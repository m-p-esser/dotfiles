(function(a,b){"object"==typeof exports&&"undefined"!=typeof module?b(exports,require("d3-scale"),require("d3-time")):"function"==typeof define&&define.amd?define(["exports","d3-scale","d3-time"],b):(a=a||self,b(a.fc=a.fc||{},a.d3,a.d3))})(this,function(a,b,c){'use strict';function d(){var a={};return a.distance=function(a,b){return b-a},a.offset=function(a,b){return a instanceof Date?new Date(a.getTime()+b):a+b},a.clampUp=function(a){return a},a.clampDown=function(a){return a},a.copy=function(){return a},a}function e(a,b){var c=[],d=!0,e=!1,f=void 0;try{for(var g,h=a[Symbol.iterator]();!(d=(g=h.next()).done);d=!0){var i=g.value,j=b.clampUp(i),k=b.clampDown(i);j===k&&c.push(j)}}catch(a){e=!0,f=a}finally{try{d||null==h["return"]||h["return"]()}finally{if(e)throw f}}return c}function f(a){var c=this;arguments.length||(a=b.scaleIdentity());var g=d(),h=function(b){var c=a.domain(),d=a.range(),e=g.distance(c[0],c[1]),f=g.distance(c[0],b),h=f/e*(d[1]-d[0])+d[0];return h};return h.invert=function(b){var c=a.domain(),d=a.range(),e=(b-d[0])/(d[1]-d[0]),f=g.distance(c[0],c[1]);return g.offset(c[0],e*f)},h.domain=function(){if(!arguments.length)return a.domain();var b=0>=arguments.length?void 0:arguments[0],c=g.clampUp(b[0]),d=g.clampDown(b[1]);return a.domain([c,d]),h},h.nice=function(){a.nice();var b=a.domain(),c=g.clampUp(b[0]),d=g.clampDown(b[1]);return a.domain([c,d]),h},h.ticks=function(){for(var b=arguments.length,d=Array(b),f=0;f<b;f++)d[f]=arguments[f];var h=a.ticks.apply(c,d);return e(h,g)},h.copy=function(){return f(a.copy()).discontinuityProvider(g.copy())},h.discontinuityProvider=function(){return arguments.length?(g=0>=arguments.length?void 0:arguments[0],h):g},j(h,a,l("range","rangeRound","interpolate","clamp","tickFormat")),h}function g(a){return g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},g(a)}var h=(a,b,c)=>{const d=b[c];if("function"!=typeof d)throw new Error(`Attempt to rebind ${c} which isn't a function on the source object`);return(...c)=>{var e=d.apply(b,c);return e===b?a:e}};const i=a=>b=>a.reduce((a,b)=>a&&b(a),b);var j=(a,b,...c)=>{const d=i(c);for(const e of Object.keys(b)){const c=d(e);c&&(a[c]=h(a,b,e))}return a},k=a=>a.map(a=>"string"==typeof a?new RegExp(`^${a}$`):a),l=(...a)=>(a=k(a),b=>a.some(a=>a.test(b))&&b),m=function(a,b,c,d){var e={sunday:0,monday:1,saturday:6},f=86400000,g=5*f,h={},i=function(b){return 0===a(b)||6===a(b)};return h.clampDown=function(c){if(c&&i(c)){var d=b.ceil(c);return a(d)===e.sunday?b.offset(d,-1):a(d)===e.monday?b.offset(d,-2):d}return c},h.clampUp=function(c){if(c&&i(c)){var d=b.floor(c);return a(d)===e.saturday?b.offset(d,2):a(d)===e.sunday?b.offset(d,1):d}return c},h.distance=function(a,b){var d=Math.round;a=h.clampUp(a),b=h.clampDown(b);var e=c.ceil(a);if(b<e)return b.getTime()-a.getTime();var i=e.getTime()-a.getTime(),j=c.ceil(b),k=j.getTime()-b.getTime(),l=d((j.getTime()-e.getTime())/(7*f));return l*g+i-k},h.offset=function(a,e){var f=Math.floor,j=i(a)?h.clampUp(a):a;if(0===e)return j;var k=0>e,l=e,m=k?d.floor(j):c.ceil(j);if(l-=m.getTime()-j.getTime(),k&&0<l||0<e&&0>l)return new Date(j.getTime()+e);j=k?m:b.offset(m,2);var n=f(l/g);return j=b.offset(j,7*n),l-=n*g,j=new Date(j.getTime()+l),j},h.copy=function(){return h},h};a.discontinuityIdentity=d,a.discontinuityRange=function(){for(var a=arguments.length,b=Array(a),c=0;c<a;c++)b[c]=arguments[c];var d=function(a,b){return a>b[0]&&a<b[1]},e=function(a,b){return a[0]>=b[0]&&a[1]<=b[1]},f={};f.distance=function(a,c){a=f.clampUp(a),c=f.clampDown(c);var d=b.filter(function(b){return e(b,[a,c])}),g=d.map(function(a){return a[1]-a[0]});return c-a-g.reduce(function(a,b){return a+b},0)};var h=function(a,b){return a instanceof Date?new Date(a.getTime()+b):a+b};return f.offset=function(a,c){if(0<c){var d=function(){for(var d,e=f.clampUp(a),g=c;0<g;)if(d=b.filter(function(a){return a[0]>e}).sort(function(c,a){return c[0]-a[0]}),d.length){var i=d[0],j=i[0]-e;j>g?(e=h(e,g),g=0):(e=i[1],g-=j)}else e=h(e,g),g=0;return{v:e}}();if("object"===g(d))return d.v}else{var e=function(){for(var d,e=f.clampDown(a),g=c;0>g;)if(d=b.filter(function(a){return a[1]<e}).sort(function(c,a){return a[0]-c[0]}),d.length){var i=d[0],j=i[1]-e;j<g?(e=h(e,g),g=0):(e=i[0],g-=j)}else e=h(e,g),g=0;return{v:e}}();if("object"===g(e))return e.v}},f.clampUp=function(a){return b.reduce(function(a,b){return d(a,b)?b[1]:a},a)},f.clampDown=function(a){return b.reduce(function(a,b){return d(a,b)?b[0]:a},a)},f.copy=function(){return f},f},a.discontinuitySkipUtcWeekends=function(){return m(function(a){return a.getUTCDay()},c.utcDay,c.utcSaturday,c.utcMonday)},a.discontinuitySkipWeekends=function(){return m(function(a){return a.getDay()},c.timeDay,c.timeSaturday,c.timeMonday)},a.scaleDiscontinuous=f,Object.defineProperty(a,"__esModule",{value:!0})});
