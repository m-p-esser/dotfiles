(function(a,b){"object"==typeof exports&&"undefined"!=typeof module?b(exports,require("d3-array")):"function"==typeof define&&define.amd?define(["exports","d3-array"],b):(a=a||self,b(a.fc=a.fc||{},a.d3))})(this,function(a,b){'use strict';var g=Math.abs;function c(){var a=10,c=function(c){var d=Math.ceil;return 1>=a?c.map(function(a){return[a]}):b.range(0,d(c.length/a)).map(function(b){return c.slice(b*a,(b+1)*a)})};return c.bucketSize=function(b){return arguments.length?(a=b,c):a},c}function d(){function a(a){var c=a.map(function(a){return[e(a),f(a)]}),d=b.range(1,c.length-1).map(function(a){var b=c[a-1],d=c[a],e=c[a+1];return .5*g((b[0]-e[0])*(d[1]-b[1])-(b[0]-d[0])*(e[1]-b[1]))});return d}var d=c(),e=function(a){return a},f=function(a){return a},h=function(c){if(d.bucketSize()>=c.length)return c;var e=a(c),f=d(e),g=d(c.slice(1,c.length-1)),h=g.map(function(a,c){var d=f[c],e=b.max(d),g=d.indexOf(e);return a[g]});return[].concat([c[0]],h,[c[c.length-1]])};return i(h,d,"bucketSize"),h.x=function(a){return arguments.length?(e=a,h):e},h.y=function(a){return arguments.length?(f=a,h):f},h}function e(){var a=function(a){return a},e=function(a){return a},d=c(),f=function(c){if(d.bucketSize()>=c.length)return c;var f=d(c.slice(1,c.length-1)),h=c[0],i=c[c.length-1],j=[].concat([h],f,[i]),k=a(h),l=e(h),m=f.map(function(c,d){var f=b.mean(j[d+1],a),h=b.mean(j[d+1],e),i=c.map(function(b){return[a(b),e(b)]}),m=i.map(function(a){return .5*g((k-f)*(a[1]-l)-(k-a[0])*(h-l))}),n=m.indexOf(b.max(m)),o=i[n];return k=o[0],l=o[1],c[n]});return[].concat([c[0]],m,[c[c.length-1]])};return i(f,d,"bucketSize"),f.x=function(b){return arguments.length?(a=b,f):a},f.y=function(a){return arguments.length?(e=a,f):e},f}function f(){var a=c(),d=function(a){return a},e=function(c){if(a.bucketSize()>c.length)return c;var e=b.extent(c,d),f=a(c.slice(1,c.length-1)),g=f.map(function(a){var c,f,b=Math.floor,g={},h=!0,i=a.map(d),j=i.filter(function(a){return a===e[0]||a===e[1]}).map(function(a){return i.indexOf(a)})[0];return void 0===j?(i.forEach(function(a,b){void 0===g[a]&&(g[a]=0),g[a]++,g[a]>g[c]||void 0===c?(c=a,f=b,h=!0):g[a]===g[c]&&(h=!1)}),h?a[f]:a[b(a.length/2)]):a[j]});return[].concat([c[0]],g,[c[c.length-1]])};return i(e,a,"bucketSize"),e.value=function(a){return arguments.length?(d=a,e):d},e}var h=(a,b,c)=>{const d=b[c];if("function"!=typeof d)throw new Error(`Attempt to rebind ${c} which isn't a function on the source object`);return(...c)=>{var e=d.apply(b,c);return e===b?a:e}},i=(a,b,...c)=>{for(const d of c)a[d]=h(a,b,d);return a};a.bucket=c,a.largestTriangleOneBucket=d,a.largestTriangleThreeBucket=e,a.modeMedian=f,Object.defineProperty(a,"__esModule",{value:!0})});
