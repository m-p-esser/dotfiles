(function(a,b){"object"==typeof exports&&"undefined"!=typeof module?b(exports,require("d3-selection"),require("d3-scale"),require("d3-dispatch"),require("d3-brush")):"function"==typeof define&&define.amd?define(["exports","d3-selection","d3-scale","d3-dispatch","d3-brush"],b):(a=a||self,b(a.fc=a.fc||{},a.d3,a.d3,a.d3,a.d3))})(this,function(a,b,c,d,e){'use strict';var f=(a,b,c)=>{const d=b[c];if("function"!=typeof d)throw new Error(`Attempt to rebind ${c} which isn't a function on the source object`);return(...c)=>{var e=d.apply(b,c);return e===b?a:e}},g=(a,b,...c)=>{for(const d of c)a[d]=f(a,b,d);return a};const h=1e-6;var i=(a,b)=>{a=a||"g";let c=(a,b)=>b,d=null;const e=function(e,f){f=f||(a=>a);const g=e.selection?e:null;g&&(e=e.selection());const i=e.selectAll((a,b,c)=>Array.from(c[b].childNodes).filter(a=>1===a.nodeType)).filter(null==b?a:`${a}.${b}`);let j=i.data(f,c);const k=j.enter().append(a).attr("class",b);let l=j.exit();j=j.merge(k);const m=g||d;return m&&(j=j.transition(m).style("opacity",1),k.style("opacity",h),l=l.transition(m).style("opacity",h)),l.remove(),j.enter=()=>k,j.exit=()=>l,j};return e.element=(...b)=>b.length?(a=b[0],e):a,e.className=(...a)=>a.length?(b=a[0],e):b,e.key=(...a)=>a.length?(c=a[0],e):c,e.transition=(...a)=>a.length?(d=a[0],e):d,e},j=function(a){return"x"===a?e.brushX():"y"===a?e.brushY():"xy"===a?e.brush():void 0},k=function(a){return[a[1],a[0]]},l=function(a){var e=j(a),f=d.dispatch("brush","start","end"),h=c.scaleIdentity(),l=c.scaleIdentity(),m=i("g","brush"),n=function(b,c,d){return"x"===a?b.map(c):"y"===a?b.map(d):"xy"===a?[[c(b[0][0]),d(b[0][1])],[c(b[1][0]),d(b[1][1])]]:void 0},o=function(a){return n(a,c.scaleLinear().domain(h.range()).invert,c.scaleLinear().domain(k(l.range())).invert)},p=function(a){return n(a,c.scaleLinear().domain(h.range()),c.scaleLinear().domain(k(l.range())))},q=function(b){var d=c.scaleLinear().domain(h.domain());return"x"===a?b.map(d.invert):"xy"===a?[d.invert(b[0][0]),d.invert(b[1][0])]:void 0},r=function(b){var d=c.scaleLinear().domain(k(l.domain()));return"y"===a?[b[1],b[0]].map(d.invert):"xy"===a?[d.invert(b[1][1]),d.invert(b[0][1])]:void 0},s=function(a){if(!(a.sourceEvent&&"draw"===a.sourceEvent.type))if(a.selection){var b=p(a.selection);f.call(a.type,{},{selection:b,xDomain:q(b),yDomain:r(b)})}else f.call(a.type,{},{})},t=function(a){a.each(function(a,c,d){e.extent([[h.range()[0],l.range()[1]],[h.range()[1],l.range()[0]]]),e.on("end",function(){return s(b.event)}).on("brush",function(){return s(b.event)}).on("start",function(){return s(b.event)});var f=m(b.select(d[c]),[a]);f.call(e).call(e.move,a?o(a):null)})};return t.xScale=function(){return arguments.length?(h=0>=arguments.length?void 0:arguments[0],t):h},t.yScale=function(){return arguments.length?(l=0>=arguments.length?void 0:arguments[0],t):l},g(t,f,"on"),g(t,e,"filter","handleSize"),t};a.brush=function(){return l("xy")},a.brushX=function(){return l("x")},a.brushY=function(){return l("y")},Object.defineProperty(a,"__esModule",{value:!0})});
