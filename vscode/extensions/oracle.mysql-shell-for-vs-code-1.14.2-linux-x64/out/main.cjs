"use strict";var Lg=Object.create;var zs=Object.defineProperty;var qg=Object.getOwnPropertyDescriptor;var Fg=Object.getOwnPropertyNames;var Gg=Object.getPrototypeOf,Ug=Object.prototype.hasOwnProperty;var _=(r,e)=>()=>(e||r((e={exports:{}}).exports,e),e.exports),Bg=(r,e)=>{for(var t in e)zs(r,t,{get:e[t],enumerable:!0})},Zu=(r,e,t,s)=>{if(e&&typeof e=="object"||typeof e=="function")for(let n of Fg(e))!Ug.call(r,n)&&n!==t&&zs(r,n,{get:()=>e[n],enumerable:!(s=qg(e,n))||s.enumerable});return r};var k=(r,e,t)=>(t=r!=null?Lg(Gg(r)):{},Zu(e||!r||!r.__esModule?zs(t,"default",{value:r,enumerable:!0}):t,r)),jg=r=>Zu(zs({},"__esModule",{value:!0}),r);var gd=_((f4,md)=>{"use strict";var{Duplex:$g}=require("stream");function hd(r){r.emit("close")}function zg(){!this.destroyed&&this._writableState.finished&&this.destroy()}function pd(r){this.removeListener("error",pd),this.destroy(),this.listenerCount("error")===0&&this.emit("error",r)}function Yg(r,e){let t=!0,s=new $g({...e,autoDestroy:!1,emitClose:!1,objectMode:!1,writableObjectMode:!1});return r.on("message",function(i,o){let a=!o&&s._readableState.objectMode?i.toString():i;s.push(a)||r.pause()}),r.once("error",function(i){s.destroyed||(t=!1,s.destroy(i))}),r.once("close",function(){s.destroyed||s.push(null)}),s._destroy=function(n,i){if(r.readyState===r.CLOSED){i(n),process.nextTick(hd,s);return}let o=!1;r.once("error",function(l){o=!0,i(l)}),r.once("close",function(){o||i(n),process.nextTick(hd,s)}),t&&r.terminate()},s._final=function(n){if(r.readyState===r.CONNECTING){r.once("open",function(){s._final(n)});return}r._socket!==null&&(r._socket._writableState.finished?(n(),s._readableState.endEmitted&&s.destroy()):(r._socket.once("finish",function(){n()}),r.close()))},s._read=function(){r.isPaused&&r.resume()},s._write=function(n,i,o){if(r.readyState===r.CONNECTING){r.once("open",function(){s._write(n,i,o)});return}r.send(n,o)},s.on("end",zg),s.on("error",pd),s}md.exports=Yg});var It=_((S4,fd)=>{"use strict";fd.exports={BINARY_TYPES:["nodebuffer","arraybuffer","fragments"],EMPTY_BUFFER:Buffer.alloc(0),GUID:"258EAFA5-E914-47DA-95CA-C5AB0DC85B11",kForOnEventAttribute:Symbol("kIsForOnEventAttribute"),kListener:Symbol("kListener"),kStatusCode:Symbol("status-code"),kWebSocket:Symbol("websocket"),NOOP:()=>{}}});var Zr=_((b4,pn)=>{"use strict";var{EMPTY_BUFFER:Qg}=It(),fo=Buffer[Symbol.species];function Jg(r,e){if(r.length===0)return Qg;if(r.length===1)return r[0];let t=Buffer.allocUnsafe(e),s=0;for(let n=0;n<r.length;n++){let i=r[n];t.set(i,s),s+=i.length}return s<e?new fo(t.buffer,t.byteOffset,s):t}function Sd(r,e,t,s,n){for(let i=0;i<n;i++)t[s+i]=r[i]^e[i&3]}function bd(r,e){for(let t=0;t<r.length;t++)r[t]^=e[t&3]}function Xg(r){return r.length===r.buffer.byteLength?r.buffer:r.buffer.slice(r.byteOffset,r.byteOffset+r.length)}function So(r){if(So.readOnly=!0,Buffer.isBuffer(r))return r;let e;return r instanceof ArrayBuffer?e=new fo(r):ArrayBuffer.isView(r)?e=new fo(r.buffer,r.byteOffset,r.byteLength):(e=Buffer.from(r),So.readOnly=!1),e}pn.exports={concat:Jg,mask:Sd,toArrayBuffer:Xg,toBuffer:So,unmask:bd};if(!process.env.WS_NO_BUFFER_UTIL)try{let r=require("bufferutil");pn.exports.mask=function(e,t,s,n,i){i<48?Sd(e,t,s,n,i):r.mask(e,t,s,n,i)},pn.exports.unmask=function(e,t){e.length<32?bd(e,t):r.unmask(e,t)}}catch{}});var yd=_((I4,vd)=>{"use strict";var Id=Symbol("kDone"),bo=Symbol("kRun"),Io=class{constructor(e){this[Id]=()=>{this.pending--,this[bo]()},this.concurrency=e||1/0,this.jobs=[],this.pending=0}add(e){this.jobs.push(e),this[bo]()}[bo](){if(this.pending!==this.concurrency&&this.jobs.length){let e=this.jobs.shift();this.pending++,e(this[Id])}}};vd.exports=Io});var rs=_((v4,Ed)=>{"use strict";var es=require("zlib"),xd=Zr(),Zg=yd(),{kStatusCode:wd}=It(),ef=Buffer[Symbol.species],tf=Buffer.from([0,0,255,255]),fn=Symbol("permessage-deflate"),st=Symbol("total-length"),ts=Symbol("callback"),vt=Symbol("buffers"),gn=Symbol("error"),mn,vo=class{constructor(e,t,s){if(this._maxPayload=s|0,this._options=e||{},this._threshold=this._options.threshold!==void 0?this._options.threshold:1024,this._isServer=!!t,this._deflate=null,this._inflate=null,this.params=null,!mn){let n=this._options.concurrencyLimit!==void 0?this._options.concurrencyLimit:10;mn=new Zg(n)}}static get extensionName(){return"permessage-deflate"}offer(){let e={};return this._options.serverNoContextTakeover&&(e.server_no_context_takeover=!0),this._options.clientNoContextTakeover&&(e.client_no_context_takeover=!0),this._options.serverMaxWindowBits&&(e.server_max_window_bits=this._options.serverMaxWindowBits),this._options.clientMaxWindowBits?e.client_max_window_bits=this._options.clientMaxWindowBits:this._options.clientMaxWindowBits==null&&(e.client_max_window_bits=!0),e}accept(e){return e=this.normalizeParams(e),this.params=this._isServer?this.acceptAsServer(e):this.acceptAsClient(e),this.params}cleanup(){if(this._inflate&&(this._inflate.close(),this._inflate=null),this._deflate){let e=this._deflate[ts];this._deflate.close(),this._deflate=null,e&&e(new Error("The deflate stream was closed while data was being processed"))}}acceptAsServer(e){let t=this._options,s=e.find(n=>!(t.serverNoContextTakeover===!1&&n.server_no_context_takeover||n.server_max_window_bits&&(t.serverMaxWindowBits===!1||typeof t.serverMaxWindowBits=="number"&&t.serverMaxWindowBits>n.server_max_window_bits)||typeof t.clientMaxWindowBits=="number"&&!n.client_max_window_bits));if(!s)throw new Error("None of the extension offers can be accepted");return t.serverNoContextTakeover&&(s.server_no_context_takeover=!0),t.clientNoContextTakeover&&(s.client_no_context_takeover=!0),typeof t.serverMaxWindowBits=="number"&&(s.server_max_window_bits=t.serverMaxWindowBits),typeof t.clientMaxWindowBits=="number"?s.client_max_window_bits=t.clientMaxWindowBits:(s.client_max_window_bits===!0||t.clientMaxWindowBits===!1)&&delete s.client_max_window_bits,s}acceptAsClient(e){let t=e[0];if(this._options.clientNoContextTakeover===!1&&t.client_no_context_takeover)throw new Error('Unexpected parameter "client_no_context_takeover"');if(!t.client_max_window_bits)typeof this._options.clientMaxWindowBits=="number"&&(t.client_max_window_bits=this._options.clientMaxWindowBits);else if(this._options.clientMaxWindowBits===!1||typeof this._options.clientMaxWindowBits=="number"&&t.client_max_window_bits>this._options.clientMaxWindowBits)throw new Error('Unexpected or invalid parameter "client_max_window_bits"');return t}normalizeParams(e){return e.forEach(t=>{Object.keys(t).forEach(s=>{let n=t[s];if(n.length>1)throw new Error(`Parameter "${s}" must have only a single value`);if(n=n[0],s==="client_max_window_bits"){if(n!==!0){let i=+n;if(!Number.isInteger(i)||i<8||i>15)throw new TypeError(`Invalid value for parameter "${s}": ${n}`);n=i}else if(!this._isServer)throw new TypeError(`Invalid value for parameter "${s}": ${n}`)}else if(s==="server_max_window_bits"){let i=+n;if(!Number.isInteger(i)||i<8||i>15)throw new TypeError(`Invalid value for parameter "${s}": ${n}`);n=i}else if(s==="client_no_context_takeover"||s==="server_no_context_takeover"){if(n!==!0)throw new TypeError(`Invalid value for parameter "${s}": ${n}`)}else throw new Error(`Unknown parameter "${s}"`);t[s]=n})}),e}decompress(e,t,s){mn.add(n=>{this._decompress(e,t,(i,o)=>{n(),s(i,o)})})}compress(e,t,s){mn.add(n=>{this._compress(e,t,(i,o)=>{n(),s(i,o)})})}_decompress(e,t,s){let n=this._isServer?"client":"server";if(!this._inflate){let i=`${n}_max_window_bits`,o=typeof this.params[i]!="number"?es.Z_DEFAULT_WINDOWBITS:this.params[i];this._inflate=es.createInflateRaw({...this._options.zlibInflateOptions,windowBits:o}),this._inflate[fn]=this,this._inflate[st]=0,this._inflate[vt]=[],this._inflate.on("error",sf),this._inflate.on("data",Cd)}this._inflate[ts]=s,this._inflate.write(e),t&&this._inflate.write(tf),this._inflate.flush(()=>{let i=this._inflate[gn];if(i){this._inflate.close(),this._inflate=null,s(i);return}let o=xd.concat(this._inflate[vt],this._inflate[st]);this._inflate._readableState.endEmitted?(this._inflate.close(),this._inflate=null):(this._inflate[st]=0,this._inflate[vt]=[],t&&this.params[`${n}_no_context_takeover`]&&this._inflate.reset()),s(null,o)})}_compress(e,t,s){let n=this._isServer?"server":"client";if(!this._deflate){let i=`${n}_max_window_bits`,o=typeof this.params[i]!="number"?es.Z_DEFAULT_WINDOWBITS:this.params[i];this._deflate=es.createDeflateRaw({...this._options.zlibDeflateOptions,windowBits:o}),this._deflate[st]=0,this._deflate[vt]=[],this._deflate.on("data",rf)}this._deflate[ts]=s,this._deflate.write(e),this._deflate.flush(es.Z_SYNC_FLUSH,()=>{if(!this._deflate)return;let i=xd.concat(this._deflate[vt],this._deflate[st]);t&&(i=new ef(i.buffer,i.byteOffset,i.length-4)),this._deflate[ts]=null,this._deflate[st]=0,this._deflate[vt]=[],t&&this.params[`${n}_no_context_takeover`]&&this._deflate.reset(),s(null,i)})}};Ed.exports=vo;function rf(r){this[vt].push(r),this[st]+=r.length}function Cd(r){if(this[st]+=r.length,this[fn]._maxPayload<1||this[st]<=this[fn]._maxPayload){this[vt].push(r);return}this[gn]=new RangeError("Max payload size exceeded"),this[gn].code="WS_ERR_UNSUPPORTED_MESSAGE_LENGTH",this[gn][wd]=1009,this.removeListener("data",Cd),this.reset()}function sf(r){this[fn]._inflate=null,r[wd]=1007,this[ts](r)}});var ss=_((y4,Sn)=>{"use strict";var{isUtf8:Td}=require("buffer"),nf=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1,1,1,1,1,0,0,1,1,0,1,1,0,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,0,1,0];function of(r){return r>=1e3&&r<=1014&&r!==1004&&r!==1005&&r!==1006||r>=3e3&&r<=4999}function yo(r){let e=r.length,t=0;for(;t<e;)if(!(r[t]&128))t++;else if((r[t]&224)===192){if(t+1===e||(r[t+1]&192)!==128||(r[t]&254)===192)return!1;t+=2}else if((r[t]&240)===224){if(t+2>=e||(r[t+1]&192)!==128||(r[t+2]&192)!==128||r[t]===224&&(r[t+1]&224)===128||r[t]===237&&(r[t+1]&224)===160)return!1;t+=3}else if((r[t]&248)===240){if(t+3>=e||(r[t+1]&192)!==128||(r[t+2]&192)!==128||(r[t+3]&192)!==128||r[t]===240&&(r[t+1]&240)===128||r[t]===244&&r[t+1]>143||r[t]>244)return!1;t+=4}else return!1;return!0}Sn.exports={isValidStatusCode:of,isValidUTF8:yo,tokenChars:nf};if(Td)Sn.exports.isValidUTF8=function(r){return r.length<24?yo(r):Td(r)};else if(!process.env.WS_NO_UTF_8_VALIDATE)try{let r=require("utf-8-validate");Sn.exports.isValidUTF8=function(e){return e.length<32?yo(e):r(e)}}catch{}});var To=_((x4,Nd)=>{"use strict";var{Writable:af}=require("stream"),Md=rs(),{BINARY_TYPES:lf,EMPTY_BUFFER:Ad,kStatusCode:cf,kWebSocket:uf}=It(),{concat:xo,toArrayBuffer:df,unmask:hf}=Zr(),{isValidStatusCode:pf,isValidUTF8:Pd}=ss(),bn=Buffer[Symbol.species],mf=Promise.resolve(),gf=typeof queueMicrotask=="function"?queueMicrotask:ff,gr=0,_d=1,kd=2,Rd=3,wo=4,Dd=5,Co=6,Eo=class extends af{constructor(e={}){super(),this._binaryType=e.binaryType||lf[0],this._extensions=e.extensions||{},this._isServer=!!e.isServer,this._maxPayload=e.maxPayload|0,this._skipUTF8Validation=!!e.skipUTF8Validation,this[uf]=void 0,this._bufferedBytes=0,this._buffers=[],this._compressed=!1,this._payloadLength=0,this._mask=void 0,this._fragmented=0,this._masked=!1,this._fin=!1,this._opcode=0,this._totalPayloadLength=0,this._messageLength=0,this._fragments=[],this._state=gr,this._loop=!1}_write(e,t,s){if(this._opcode===8&&this._state==gr)return s();this._bufferedBytes+=e.length,this._buffers.push(e),this.startLoop(s)}consume(e){if(this._bufferedBytes-=e,e===this._buffers[0].length)return this._buffers.shift();if(e<this._buffers[0].length){let s=this._buffers[0];return this._buffers[0]=new bn(s.buffer,s.byteOffset+e,s.length-e),new bn(s.buffer,s.byteOffset,e)}let t=Buffer.allocUnsafe(e);do{let s=this._buffers[0],n=t.length-e;e>=s.length?t.set(this._buffers.shift(),n):(t.set(new Uint8Array(s.buffer,s.byteOffset,e),n),this._buffers[0]=new bn(s.buffer,s.byteOffset+e,s.length-e)),e-=s.length}while(e>0);return t}startLoop(e){let t;this._loop=!0;do switch(this._state){case gr:t=this.getInfo();break;case _d:t=this.getPayloadLength16();break;case kd:t=this.getPayloadLength64();break;case Rd:this.getMask();break;case wo:t=this.getData(e);break;case Dd:this._loop=!1;return;default:this._loop=!1,gf(()=>{this._state=gr,this.startLoop(e)});return}while(this._loop);e(t)}getInfo(){if(this._bufferedBytes<2){this._loop=!1;return}let e=this.consume(2);if(e[0]&48)return this._loop=!1,se(RangeError,"RSV2 and RSV3 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_2_3");let t=(e[0]&64)===64;if(t&&!this._extensions[Md.extensionName])return this._loop=!1,se(RangeError,"RSV1 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_1");if(this._fin=(e[0]&128)===128,this._opcode=e[0]&15,this._payloadLength=e[1]&127,this._opcode===0){if(t)return this._loop=!1,se(RangeError,"RSV1 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_1");if(!this._fragmented)return this._loop=!1,se(RangeError,"invalid opcode 0",!0,1002,"WS_ERR_INVALID_OPCODE");this._opcode=this._fragmented}else if(this._opcode===1||this._opcode===2){if(this._fragmented)return this._loop=!1,se(RangeError,`invalid opcode ${this._opcode}`,!0,1002,"WS_ERR_INVALID_OPCODE");this._compressed=t}else if(this._opcode>7&&this._opcode<11){if(!this._fin)return this._loop=!1,se(RangeError,"FIN must be set",!0,1002,"WS_ERR_EXPECTED_FIN");if(t)return this._loop=!1,se(RangeError,"RSV1 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_1");if(this._payloadLength>125||this._opcode===8&&this._payloadLength===1)return this._loop=!1,se(RangeError,`invalid payload length ${this._payloadLength}`,!0,1002,"WS_ERR_INVALID_CONTROL_PAYLOAD_LENGTH")}else return this._loop=!1,se(RangeError,`invalid opcode ${this._opcode}`,!0,1002,"WS_ERR_INVALID_OPCODE");if(!this._fin&&!this._fragmented&&(this._fragmented=this._opcode),this._masked=(e[1]&128)===128,this._isServer){if(!this._masked)return this._loop=!1,se(RangeError,"MASK must be set",!0,1002,"WS_ERR_EXPECTED_MASK")}else if(this._masked)return this._loop=!1,se(RangeError,"MASK must be clear",!0,1002,"WS_ERR_UNEXPECTED_MASK");if(this._payloadLength===126)this._state=_d;else if(this._payloadLength===127)this._state=kd;else return this.haveLength()}getPayloadLength16(){if(this._bufferedBytes<2){this._loop=!1;return}return this._payloadLength=this.consume(2).readUInt16BE(0),this.haveLength()}getPayloadLength64(){if(this._bufferedBytes<8){this._loop=!1;return}let e=this.consume(8),t=e.readUInt32BE(0);return t>Math.pow(2,53-32)-1?(this._loop=!1,se(RangeError,"Unsupported WebSocket frame: payload length > 2^53 - 1",!1,1009,"WS_ERR_UNSUPPORTED_DATA_PAYLOAD_LENGTH")):(this._payloadLength=t*Math.pow(2,32)+e.readUInt32BE(4),this.haveLength())}haveLength(){if(this._payloadLength&&this._opcode<8&&(this._totalPayloadLength+=this._payloadLength,this._totalPayloadLength>this._maxPayload&&this._maxPayload>0))return this._loop=!1,se(RangeError,"Max payload size exceeded",!1,1009,"WS_ERR_UNSUPPORTED_MESSAGE_LENGTH");this._masked?this._state=Rd:this._state=wo}getMask(){if(this._bufferedBytes<4){this._loop=!1;return}this._mask=this.consume(4),this._state=wo}getData(e){let t=Ad;if(this._payloadLength){if(this._bufferedBytes<this._payloadLength){this._loop=!1;return}t=this.consume(this._payloadLength),this._masked&&this._mask[0]|this._mask[1]|this._mask[2]|this._mask[3]&&hf(t,this._mask)}if(this._opcode>7)return this.controlMessage(t);if(this._compressed){this._state=Dd,this.decompress(t,e);return}return t.length&&(this._messageLength=this._totalPayloadLength,this._fragments.push(t)),this.dataMessage()}decompress(e,t){this._extensions[Md.extensionName].decompress(e,this._fin,(n,i)=>{if(n)return t(n);if(i.length){if(this._messageLength+=i.length,this._messageLength>this._maxPayload&&this._maxPayload>0)return t(se(RangeError,"Max payload size exceeded",!1,1009,"WS_ERR_UNSUPPORTED_MESSAGE_LENGTH"));this._fragments.push(i)}let o=this.dataMessage();if(o)return t(o);this.startLoop(t)})}dataMessage(){if(this._fin){let e=this._messageLength,t=this._fragments;if(this._totalPayloadLength=0,this._messageLength=0,this._fragmented=0,this._fragments=[],this._opcode===2){let s;this._binaryType==="nodebuffer"?s=xo(t,e):this._binaryType==="arraybuffer"?s=df(xo(t,e)):s=t,this.emit("message",s,!0)}else{let s=xo(t,e);if(!this._skipUTF8Validation&&!Pd(s))return this._loop=!1,se(Error,"invalid UTF-8 sequence",!0,1007,"WS_ERR_INVALID_UTF8");this.emit("message",s,!1)}}this._state=Co}controlMessage(e){if(this._opcode===8)if(this._loop=!1,e.length===0)this.emit("conclude",1005,Ad),this.end(),this._state=gr;else{let t=e.readUInt16BE(0);if(!pf(t))return se(RangeError,`invalid status code ${t}`,!0,1002,"WS_ERR_INVALID_CLOSE_CODE");let s=new bn(e.buffer,e.byteOffset+2,e.length-2);if(!this._skipUTF8Validation&&!Pd(s))return se(Error,"invalid UTF-8 sequence",!0,1007,"WS_ERR_INVALID_UTF8");this.emit("conclude",t,s),this.end(),this._state=gr}else this._opcode===9?(this.emit("ping",e),this._state=Co):(this.emit("pong",e),this._state=Co)}};Nd.exports=Eo;function se(r,e,t,s,n){let i=new r(t?`Invalid WebSocket frame: ${e}`:e);return Error.captureStackTrace(i,se),i.code=n,i[cf]=s,i}function ff(r){mf.then(r).catch(bf)}function Sf(r){throw r}function bf(r){process.nextTick(Sf,r)}});var Ao=_((C4,qd)=>{"use strict";var{Duplex:w4}=require("stream"),{randomFillSync:If}=require("crypto"),Od=rs(),{EMPTY_BUFFER:vf}=It(),{isValidStatusCode:yf}=ss(),{mask:Ld,toBuffer:fr}=Zr(),Ve=Symbol("kByteLength"),xf=Buffer.alloc(4),Mo=class r{constructor(e,t,s){this._extensions=t||{},s&&(this._generateMask=s,this._maskBuffer=Buffer.alloc(4)),this._socket=e,this._firstFragment=!0,this._compress=!1,this._bufferedBytes=0,this._deflating=!1,this._queue=[]}static frame(e,t){let s,n=!1,i=2,o=!1;t.mask&&(s=t.maskBuffer||xf,t.generateMask?t.generateMask(s):If(s,0,4),o=(s[0]|s[1]|s[2]|s[3])===0,i=6);let a;typeof e=="string"?(!t.mask||o)&&t[Ve]!==void 0?a=t[Ve]:(e=Buffer.from(e),a=e.length):(a=e.length,n=t.mask&&t.readOnly&&!o);let l=a;a>=65536?(i+=8,l=127):a>125&&(i+=2,l=126);let c=Buffer.allocUnsafe(n?a+i:i);return c[0]=t.fin?t.opcode|128:t.opcode,t.rsv1&&(c[0]|=64),c[1]=l,l===126?c.writeUInt16BE(a,2):l===127&&(c[2]=c[3]=0,c.writeUIntBE(a,4,6)),t.mask?(c[1]|=128,c[i-4]=s[0],c[i-3]=s[1],c[i-2]=s[2],c[i-1]=s[3],o?[c,e]:n?(Ld(e,s,c,i,a),[c]):(Ld(e,s,e,0,a),[c,e])):[c,e]}close(e,t,s,n){let i;if(e===void 0)i=vf;else{if(typeof e!="number"||!yf(e))throw new TypeError("First argument must be a valid error code number");if(t===void 0||!t.length)i=Buffer.allocUnsafe(2),i.writeUInt16BE(e,0);else{let a=Buffer.byteLength(t);if(a>123)throw new RangeError("The message must not be greater than 123 bytes");i=Buffer.allocUnsafe(2+a),i.writeUInt16BE(e,0),typeof t=="string"?i.write(t,2):i.set(t,2)}}let o={[Ve]:i.length,fin:!0,generateMask:this._generateMask,mask:s,maskBuffer:this._maskBuffer,opcode:8,readOnly:!1,rsv1:!1};this._deflating?this.enqueue([this.dispatch,i,!1,o,n]):this.sendFrame(r.frame(i,o),n)}ping(e,t,s){let n,i;if(typeof e=="string"?(n=Buffer.byteLength(e),i=!1):(e=fr(e),n=e.length,i=fr.readOnly),n>125)throw new RangeError("The data size must not be greater than 125 bytes");let o={[Ve]:n,fin:!0,generateMask:this._generateMask,mask:t,maskBuffer:this._maskBuffer,opcode:9,readOnly:i,rsv1:!1};this._deflating?this.enqueue([this.dispatch,e,!1,o,s]):this.sendFrame(r.frame(e,o),s)}pong(e,t,s){let n,i;if(typeof e=="string"?(n=Buffer.byteLength(e),i=!1):(e=fr(e),n=e.length,i=fr.readOnly),n>125)throw new RangeError("The data size must not be greater than 125 bytes");let o={[Ve]:n,fin:!0,generateMask:this._generateMask,mask:t,maskBuffer:this._maskBuffer,opcode:10,readOnly:i,rsv1:!1};this._deflating?this.enqueue([this.dispatch,e,!1,o,s]):this.sendFrame(r.frame(e,o),s)}send(e,t,s){let n=this._extensions[Od.extensionName],i=t.binary?2:1,o=t.compress,a,l;if(typeof e=="string"?(a=Buffer.byteLength(e),l=!1):(e=fr(e),a=e.length,l=fr.readOnly),this._firstFragment?(this._firstFragment=!1,o&&n&&n.params[n._isServer?"server_no_context_takeover":"client_no_context_takeover"]&&(o=a>=n._threshold),this._compress=o):(o=!1,i=0),t.fin&&(this._firstFragment=!0),n){let c={[Ve]:a,fin:t.fin,generateMask:this._generateMask,mask:t.mask,maskBuffer:this._maskBuffer,opcode:i,readOnly:l,rsv1:o};this._deflating?this.enqueue([this.dispatch,e,this._compress,c,s]):this.dispatch(e,this._compress,c,s)}else this.sendFrame(r.frame(e,{[Ve]:a,fin:t.fin,generateMask:this._generateMask,mask:t.mask,maskBuffer:this._maskBuffer,opcode:i,readOnly:l,rsv1:!1}),s)}dispatch(e,t,s,n){if(!t){this.sendFrame(r.frame(e,s),n);return}let i=this._extensions[Od.extensionName];this._bufferedBytes+=s[Ve],this._deflating=!0,i.compress(e,s.fin,(o,a)=>{if(this._socket.destroyed){let l=new Error("The socket was closed while data was being compressed");typeof n=="function"&&n(l);for(let c=0;c<this._queue.length;c++){let u=this._queue[c],d=u[u.length-1];typeof d=="function"&&d(l)}return}this._bufferedBytes-=s[Ve],this._deflating=!1,s.readOnly=!1,this.sendFrame(r.frame(a,s),n),this.dequeue()})}dequeue(){for(;!this._deflating&&this._queue.length;){let e=this._queue.shift();this._bufferedBytes-=e[3][Ve],Reflect.apply(e[0],this,e.slice(1))}}enqueue(e){this._bufferedBytes+=e[3][Ve],this._queue.push(e)}sendFrame(e,t){e.length===2?(this._socket.cork(),this._socket.write(e[0]),this._socket.write(e[1],t),this._socket.uncork()):this._socket.write(e[0],t)}};qd.exports=Mo});var Hd=_((E4,Kd)=>{"use strict";var{kForOnEventAttribute:ns,kListener:Po}=It(),Fd=Symbol("kCode"),Gd=Symbol("kData"),Ud=Symbol("kError"),Bd=Symbol("kMessage"),jd=Symbol("kReason"),Sr=Symbol("kTarget"),Wd=Symbol("kType"),Vd=Symbol("kWasClean"),nt=class{constructor(e){this[Sr]=null,this[Wd]=e}get target(){return this[Sr]}get type(){return this[Wd]}};Object.defineProperty(nt.prototype,"target",{enumerable:!0});Object.defineProperty(nt.prototype,"type",{enumerable:!0});var Kt=class extends nt{constructor(e,t={}){super(e),this[Fd]=t.code===void 0?0:t.code,this[jd]=t.reason===void 0?"":t.reason,this[Vd]=t.wasClean===void 0?!1:t.wasClean}get code(){return this[Fd]}get reason(){return this[jd]}get wasClean(){return this[Vd]}};Object.defineProperty(Kt.prototype,"code",{enumerable:!0});Object.defineProperty(Kt.prototype,"reason",{enumerable:!0});Object.defineProperty(Kt.prototype,"wasClean",{enumerable:!0});var br=class extends nt{constructor(e,t={}){super(e),this[Ud]=t.error===void 0?null:t.error,this[Bd]=t.message===void 0?"":t.message}get error(){return this[Ud]}get message(){return this[Bd]}};Object.defineProperty(br.prototype,"error",{enumerable:!0});Object.defineProperty(br.prototype,"message",{enumerable:!0});var is=class extends nt{constructor(e,t={}){super(e),this[Gd]=t.data===void 0?null:t.data}get data(){return this[Gd]}};Object.defineProperty(is.prototype,"data",{enumerable:!0});var wf={addEventListener(r,e,t={}){for(let n of this.listeners(r))if(!t[ns]&&n[Po]===e&&!n[ns])return;let s;if(r==="message")s=function(i,o){let a=new is("message",{data:o?i:i.toString()});a[Sr]=this,In(e,this,a)};else if(r==="close")s=function(i,o){let a=new Kt("close",{code:i,reason:o.toString(),wasClean:this._closeFrameReceived&&this._closeFrameSent});a[Sr]=this,In(e,this,a)};else if(r==="error")s=function(i){let o=new br("error",{error:i,message:i.message});o[Sr]=this,In(e,this,o)};else if(r==="open")s=function(){let i=new nt("open");i[Sr]=this,In(e,this,i)};else return;s[ns]=!!t[ns],s[Po]=e,t.once?this.once(r,s):this.on(r,s)},removeEventListener(r,e){for(let t of this.listeners(r))if(t[Po]===e&&!t[ns]){this.removeListener(r,t);break}}};Kd.exports={CloseEvent:Kt,ErrorEvent:br,Event:nt,EventTarget:wf,MessageEvent:is};function In(r,e,t){typeof r=="object"&&r.handleEvent?r.handleEvent.call(r,t):r.call(e,t)}});var _o=_((T4,$d)=>{"use strict";var{tokenChars:os}=ss();function Je(r,e,t){r[e]===void 0?r[e]=[t]:r[e].push(t)}function Cf(r){let e=Object.create(null),t=Object.create(null),s=!1,n=!1,i=!1,o,a,l=-1,c=-1,u=-1,d=0;for(;d<r.length;d++)if(c=r.charCodeAt(d),o===void 0)if(u===-1&&os[c]===1)l===-1&&(l=d);else if(d!==0&&(c===32||c===9))u===-1&&l!==-1&&(u=d);else if(c===59||c===44){if(l===-1)throw new SyntaxError(`Unexpected character at index ${d}`);u===-1&&(u=d);let f=r.slice(l,u);c===44?(Je(e,f,t),t=Object.create(null)):o=f,l=u=-1}else throw new SyntaxError(`Unexpected character at index ${d}`);else if(a===void 0)if(u===-1&&os[c]===1)l===-1&&(l=d);else if(c===32||c===9)u===-1&&l!==-1&&(u=d);else if(c===59||c===44){if(l===-1)throw new SyntaxError(`Unexpected character at index ${d}`);u===-1&&(u=d),Je(t,r.slice(l,u),!0),c===44&&(Je(e,o,t),t=Object.create(null),o=void 0),l=u=-1}else if(c===61&&l!==-1&&u===-1)a=r.slice(l,d),l=u=-1;else throw new SyntaxError(`Unexpected character at index ${d}`);else if(n){if(os[c]!==1)throw new SyntaxError(`Unexpected character at index ${d}`);l===-1?l=d:s||(s=!0),n=!1}else if(i)if(os[c]===1)l===-1&&(l=d);else if(c===34&&l!==-1)i=!1,u=d;else if(c===92)n=!0;else throw new SyntaxError(`Unexpected character at index ${d}`);else if(c===34&&r.charCodeAt(d-1)===61)i=!0;else if(u===-1&&os[c]===1)l===-1&&(l=d);else if(l!==-1&&(c===32||c===9))u===-1&&(u=d);else if(c===59||c===44){if(l===-1)throw new SyntaxError(`Unexpected character at index ${d}`);u===-1&&(u=d);let f=r.slice(l,u);s&&(f=f.replace(/\\/g,""),s=!1),Je(t,a,f),c===44&&(Je(e,o,t),t=Object.create(null),o=void 0),a=void 0,l=u=-1}else throw new SyntaxError(`Unexpected character at index ${d}`);if(l===-1||i||c===32||c===9)throw new SyntaxError("Unexpected end of input");u===-1&&(u=d);let p=r.slice(l,u);return o===void 0?Je(e,p,t):(a===void 0?Je(t,p,!0):s?Je(t,a,p.replace(/\\/g,"")):Je(t,a,p),Je(e,o,t)),e}function Ef(r){return Object.keys(r).map(e=>{let t=r[e];return Array.isArray(t)||(t=[t]),t.map(s=>[e].concat(Object.keys(s).map(n=>{let i=s[n];return Array.isArray(i)||(i=[i]),i.map(o=>o===!0?n:`${n}=${o}`).join("; ")})).join("; ")).join(", ")}).join(", ")}$d.exports={format:Ef,parse:Cf}});var Oo=_((P4,nh)=>{"use strict";var Tf=require("events"),Mf=require("https"),Af=require("http"),Qd=require("net"),Pf=require("tls"),{randomBytes:_f,createHash:kf}=require("crypto"),{Duplex:M4,Readable:A4}=require("stream"),{URL:ko}=require("url"),yt=rs(),Rf=To(),Df=Ao(),{BINARY_TYPES:zd,EMPTY_BUFFER:vn,GUID:Nf,kForOnEventAttribute:Ro,kListener:Of,kStatusCode:Lf,kWebSocket:be,NOOP:Jd}=It(),{EventTarget:{addEventListener:qf,removeEventListener:Ff}}=Hd(),{format:Gf,parse:Uf}=_o(),{toBuffer:Bf}=Zr(),jf=30*1e3,Xd=Symbol("kAborted"),Do=[8,13],it=["CONNECTING","OPEN","CLOSING","CLOSED"],Wf=/^[!#$%&'*+\-.0-9A-Z^_`|a-z~]+$/,Y=class r extends Tf{constructor(e,t,s){super(),this._binaryType=zd[0],this._closeCode=1006,this._closeFrameReceived=!1,this._closeFrameSent=!1,this._closeMessage=vn,this._closeTimer=null,this._extensions={},this._paused=!1,this._protocol="",this._readyState=r.CONNECTING,this._receiver=null,this._sender=null,this._socket=null,e!==null?(this._bufferedAmount=0,this._isServer=!1,this._redirects=0,t===void 0?t=[]:Array.isArray(t)||(typeof t=="object"&&t!==null?(s=t,t=[]):t=[t]),Zd(this,e,t,s)):this._isServer=!0}get binaryType(){return this._binaryType}set binaryType(e){zd.includes(e)&&(this._binaryType=e,this._receiver&&(this._receiver._binaryType=e))}get bufferedAmount(){return this._socket?this._socket._writableState.length+this._sender._bufferedBytes:this._bufferedAmount}get extensions(){return Object.keys(this._extensions).join()}get isPaused(){return this._paused}get onclose(){return null}get onerror(){return null}get onopen(){return null}get onmessage(){return null}get protocol(){return this._protocol}get readyState(){return this._readyState}get url(){return this._url}setSocket(e,t,s){let n=new Rf({binaryType:this.binaryType,extensions:this._extensions,isServer:this._isServer,maxPayload:s.maxPayload,skipUTF8Validation:s.skipUTF8Validation});this._sender=new Df(e,this._extensions,s.generateMask),this._receiver=n,this._socket=e,n[be]=this,e[be]=this,n.on("conclude",Hf),n.on("drain",$f),n.on("error",zf),n.on("message",Yf),n.on("ping",Qf),n.on("pong",Jf),e.setTimeout&&e.setTimeout(0),e.setNoDelay&&e.setNoDelay(),t.length>0&&e.unshift(t),e.on("close",th),e.on("data",xn),e.on("end",rh),e.on("error",sh),this._readyState=r.OPEN,this.emit("open")}emitClose(){if(!this._socket){this._readyState=r.CLOSED,this.emit("close",this._closeCode,this._closeMessage);return}this._extensions[yt.extensionName]&&this._extensions[yt.extensionName].cleanup(),this._receiver.removeAllListeners(),this._readyState=r.CLOSED,this.emit("close",this._closeCode,this._closeMessage)}close(e,t){if(this.readyState!==r.CLOSED){if(this.readyState===r.CONNECTING){let s="WebSocket was closed before the connection was established";ke(this,this._req,s);return}if(this.readyState===r.CLOSING){this._closeFrameSent&&(this._closeFrameReceived||this._receiver._writableState.errorEmitted)&&this._socket.end();return}this._readyState=r.CLOSING,this._sender.close(e,t,!this._isServer,s=>{s||(this._closeFrameSent=!0,(this._closeFrameReceived||this._receiver._writableState.errorEmitted)&&this._socket.end())}),this._closeTimer=setTimeout(this._socket.destroy.bind(this._socket),jf)}}pause(){this.readyState===r.CONNECTING||this.readyState===r.CLOSED||(this._paused=!0,this._socket.pause())}ping(e,t,s){if(this.readyState===r.CONNECTING)throw new Error("WebSocket is not open: readyState 0 (CONNECTING)");if(typeof e=="function"?(s=e,e=t=void 0):typeof t=="function"&&(s=t,t=void 0),typeof e=="number"&&(e=e.toString()),this.readyState!==r.OPEN){No(this,e,s);return}t===void 0&&(t=!this._isServer),this._sender.ping(e||vn,t,s)}pong(e,t,s){if(this.readyState===r.CONNECTING)throw new Error("WebSocket is not open: readyState 0 (CONNECTING)");if(typeof e=="function"?(s=e,e=t=void 0):typeof t=="function"&&(s=t,t=void 0),typeof e=="number"&&(e=e.toString()),this.readyState!==r.OPEN){No(this,e,s);return}t===void 0&&(t=!this._isServer),this._sender.pong(e||vn,t,s)}resume(){this.readyState===r.CONNECTING||this.readyState===r.CLOSED||(this._paused=!1,this._receiver._writableState.needDrain||this._socket.resume())}send(e,t,s){if(this.readyState===r.CONNECTING)throw new Error("WebSocket is not open: readyState 0 (CONNECTING)");if(typeof t=="function"&&(s=t,t={}),typeof e=="number"&&(e=e.toString()),this.readyState!==r.OPEN){No(this,e,s);return}let n={binary:typeof e!="string",mask:!this._isServer,compress:!0,fin:!0,...t};this._extensions[yt.extensionName]||(n.compress=!1),this._sender.send(e||vn,n,s)}terminate(){if(this.readyState!==r.CLOSED){if(this.readyState===r.CONNECTING){let e="WebSocket was closed before the connection was established";ke(this,this._req,e);return}this._socket&&(this._readyState=r.CLOSING,this._socket.destroy())}}};Object.defineProperty(Y,"CONNECTING",{enumerable:!0,value:it.indexOf("CONNECTING")});Object.defineProperty(Y.prototype,"CONNECTING",{enumerable:!0,value:it.indexOf("CONNECTING")});Object.defineProperty(Y,"OPEN",{enumerable:!0,value:it.indexOf("OPEN")});Object.defineProperty(Y.prototype,"OPEN",{enumerable:!0,value:it.indexOf("OPEN")});Object.defineProperty(Y,"CLOSING",{enumerable:!0,value:it.indexOf("CLOSING")});Object.defineProperty(Y.prototype,"CLOSING",{enumerable:!0,value:it.indexOf("CLOSING")});Object.defineProperty(Y,"CLOSED",{enumerable:!0,value:it.indexOf("CLOSED")});Object.defineProperty(Y.prototype,"CLOSED",{enumerable:!0,value:it.indexOf("CLOSED")});["binaryType","bufferedAmount","extensions","isPaused","protocol","readyState","url"].forEach(r=>{Object.defineProperty(Y.prototype,r,{enumerable:!0})});["open","error","close","message"].forEach(r=>{Object.defineProperty(Y.prototype,`on${r}`,{enumerable:!0,get(){for(let e of this.listeners(r))if(e[Ro])return e[Of];return null},set(e){for(let t of this.listeners(r))if(t[Ro]){this.removeListener(r,t);break}typeof e=="function"&&this.addEventListener(r,e,{[Ro]:!0})}})});Y.prototype.addEventListener=qf;Y.prototype.removeEventListener=Ff;nh.exports=Y;function Zd(r,e,t,s){let n={protocolVersion:Do[1],maxPayload:104857600,skipUTF8Validation:!1,perMessageDeflate:!0,followRedirects:!1,maxRedirects:10,...s,createConnection:void 0,socketPath:void 0,hostname:void 0,protocol:void 0,timeout:void 0,method:"GET",host:void 0,path:void 0,port:void 0};if(!Do.includes(n.protocolVersion))throw new RangeError(`Unsupported protocol version: ${n.protocolVersion} (supported versions: ${Do.join(", ")})`);let i;if(e instanceof ko)i=e;else try{i=new ko(e)}catch{throw new SyntaxError(`Invalid URL: ${e}`)}i.protocol==="http:"?i.protocol="ws:":i.protocol==="https:"&&(i.protocol="wss:"),r._url=i.href;let o=i.protocol==="wss:",a=i.protocol==="ws+unix:",l;if(i.protocol!=="ws:"&&!o&&!a?l=`The URL's protocol must be one of "ws:", "wss:", "http:", "https", or "ws+unix:"`:a&&!i.pathname?l="The URL's pathname is empty":i.hash&&(l="The URL contains a fragment identifier"),l){let x=new SyntaxError(l);if(r._redirects===0)throw x;yn(r,x);return}let c=o?443:80,u=_f(16).toString("base64"),d=o?Mf.request:Af.request,p=new Set,f;if(n.createConnection=o?Kf:Vf,n.defaultPort=n.defaultPort||c,n.port=i.port||c,n.host=i.hostname.startsWith("[")?i.hostname.slice(1,-1):i.hostname,n.headers={...n.headers,"Sec-WebSocket-Version":n.protocolVersion,"Sec-WebSocket-Key":u,Connection:"Upgrade",Upgrade:"websocket"},n.path=i.pathname+i.search,n.timeout=n.handshakeTimeout,n.perMessageDeflate&&(f=new yt(n.perMessageDeflate!==!0?n.perMessageDeflate:{},!1,n.maxPayload),n.headers["Sec-WebSocket-Extensions"]=Gf({[yt.extensionName]:f.offer()})),t.length){for(let x of t){if(typeof x!="string"||!Wf.test(x)||p.has(x))throw new SyntaxError("An invalid or duplicated subprotocol was specified");p.add(x)}n.headers["Sec-WebSocket-Protocol"]=t.join(",")}if(n.origin&&(n.protocolVersion<13?n.headers["Sec-WebSocket-Origin"]=n.origin:n.headers.Origin=n.origin),(i.username||i.password)&&(n.auth=`${i.username}:${i.password}`),a){let x=n.path.split(":");n.socketPath=x[0],n.path=x[1]}let C;if(n.followRedirects){if(r._redirects===0){r._originalIpc=a,r._originalSecure=o,r._originalHostOrSocketPath=a?n.socketPath:i.host;let x=s&&s.headers;if(s={...s,headers:{}},x)for(let[E,N]of Object.entries(x))s.headers[E.toLowerCase()]=N}else if(r.listenerCount("redirect")===0){let x=a?r._originalIpc?n.socketPath===r._originalHostOrSocketPath:!1:r._originalIpc?!1:i.host===r._originalHostOrSocketPath;(!x||r._originalSecure&&!o)&&(delete n.headers.authorization,delete n.headers.cookie,x||delete n.headers.host,n.auth=void 0)}n.auth&&!s.headers.authorization&&(s.headers.authorization="Basic "+Buffer.from(n.auth).toString("base64")),C=r._req=d(n),r._redirects&&r.emit("redirect",r.url,C)}else C=r._req=d(n);n.timeout&&C.on("timeout",()=>{ke(r,C,"Opening handshake has timed out")}),C.on("error",x=>{C===null||C[Xd]||(C=r._req=null,yn(r,x))}),C.on("response",x=>{let E=x.headers.location,N=x.statusCode;if(E&&n.followRedirects&&N>=300&&N<400){if(++r._redirects>n.maxRedirects){ke(r,C,"Maximum redirects exceeded");return}C.abort();let z;try{z=new ko(E,e)}catch{let K=new SyntaxError(`Invalid URL: ${E}`);yn(r,K);return}Zd(r,z,t,s)}else r.emit("unexpected-response",C,x)||ke(r,C,`Unexpected server response: ${x.statusCode}`)}),C.on("upgrade",(x,E,N)=>{if(r.emit("upgrade",x),r.readyState!==Y.CONNECTING)return;if(C=r._req=null,x.headers.upgrade.toLowerCase()!=="websocket"){ke(r,E,"Invalid Upgrade header");return}let z=kf("sha1").update(u+Nf).digest("base64");if(x.headers["sec-websocket-accept"]!==z){ke(r,E,"Invalid Sec-WebSocket-Accept header");return}let ee=x.headers["sec-websocket-protocol"],K;if(ee!==void 0?p.size?p.has(ee)||(K="Server sent an invalid subprotocol"):K="Server sent a subprotocol but none was requested":p.size&&(K="Server sent no subprotocol"),K){ke(r,E,K);return}ee&&(r._protocol=ee);let te=x.headers["sec-websocket-extensions"];if(te!==void 0){if(!f){ke(r,E,"Server sent a Sec-WebSocket-Extensions header but no extension was requested");return}let _e;try{_e=Uf(te)}catch{ke(r,E,"Invalid Sec-WebSocket-Extensions header");return}let Ye=Object.keys(_e);if(Ye.length!==1||Ye[0]!==yt.extensionName){ke(r,E,"Server indicated an extension that was not requested");return}try{f.accept(_e[yt.extensionName])}catch{ke(r,E,"Invalid Sec-WebSocket-Extensions header");return}r._extensions[yt.extensionName]=f}r.setSocket(E,N,{generateMask:n.generateMask,maxPayload:n.maxPayload,skipUTF8Validation:n.skipUTF8Validation})}),n.finishRequest?n.finishRequest(C,r):C.end()}function yn(r,e){r._readyState=Y.CLOSING,r.emit("error",e),r.emitClose()}function Vf(r){return r.path=r.socketPath,Qd.connect(r)}function Kf(r){return r.path=void 0,!r.servername&&r.servername!==""&&(r.servername=Qd.isIP(r.host)?"":r.host),Pf.connect(r)}function ke(r,e,t){r._readyState=Y.CLOSING;let s=new Error(t);Error.captureStackTrace(s,ke),e.setHeader?(e[Xd]=!0,e.abort(),e.socket&&!e.socket.destroyed&&e.socket.destroy(),process.nextTick(yn,r,s)):(e.destroy(s),e.once("error",r.emit.bind(r,"error")),e.once("close",r.emitClose.bind(r)))}function No(r,e,t){if(e){let s=Bf(e).length;r._socket?r._sender._bufferedBytes+=s:r._bufferedAmount+=s}if(t){let s=new Error(`WebSocket is not open: readyState ${r.readyState} (${it[r.readyState]})`);process.nextTick(t,s)}}function Hf(r,e){let t=this[be];t._closeFrameReceived=!0,t._closeMessage=e,t._closeCode=r,t._socket[be]!==void 0&&(t._socket.removeListener("data",xn),process.nextTick(eh,t._socket),r===1005?t.close():t.close(r,e))}function $f(){let r=this[be];r.isPaused||r._socket.resume()}function zf(r){let e=this[be];e._socket[be]!==void 0&&(e._socket.removeListener("data",xn),process.nextTick(eh,e._socket),e.close(r[Lf])),e.emit("error",r)}function Yd(){this[be].emitClose()}function Yf(r,e){this[be].emit("message",r,e)}function Qf(r){let e=this[be];e.pong(r,!e._isServer,Jd),e.emit("ping",r)}function Jf(r){this[be].emit("pong",r)}function eh(r){r.resume()}function th(){let r=this[be];this.removeListener("close",th),this.removeListener("data",xn),this.removeListener("end",rh),r._readyState=Y.CLOSING;let e;!this._readableState.endEmitted&&!r._closeFrameReceived&&!r._receiver._writableState.errorEmitted&&(e=r._socket.read())!==null&&r._receiver.write(e),r._receiver.end(),this[be]=void 0,clearTimeout(r._closeTimer),r._receiver._writableState.finished||r._receiver._writableState.errorEmitted?r.emitClose():(r._receiver.on("error",Yd),r._receiver.on("finish",Yd))}function xn(r){this[be]._receiver.write(r)||this.pause()}function rh(){let r=this[be];r._readyState=Y.CLOSING,r._receiver.end(),this.end()}function sh(){let r=this[be];this.removeListener("error",sh),this.on("error",Jd),r&&(r._readyState=Y.CLOSING,this.destroy())}});var oh=_((_4,ih)=>{"use strict";var{tokenChars:Xf}=ss();function Zf(r){let e=new Set,t=-1,s=-1,n=0;for(n;n<r.length;n++){let o=r.charCodeAt(n);if(s===-1&&Xf[o]===1)t===-1&&(t=n);else if(n!==0&&(o===32||o===9))s===-1&&t!==-1&&(s=n);else if(o===44){if(t===-1)throw new SyntaxError(`Unexpected character at index ${n}`);s===-1&&(s=n);let a=r.slice(t,s);if(e.has(a))throw new SyntaxError(`The "${a}" subprotocol is duplicated`);e.add(a),t=s=-1}else throw new SyntaxError(`Unexpected character at index ${n}`)}if(t===-1||s!==-1)throw new SyntaxError("Unexpected end of input");let i=r.slice(t,n);if(e.has(i))throw new SyntaxError(`The "${i}" subprotocol is duplicated`);return e.add(i),e}ih.exports={parse:Zf}});var ph=_((R4,hh)=>{"use strict";var e0=require("events"),wn=require("http"),{Duplex:k4}=require("stream"),{createHash:t0}=require("crypto"),ah=_o(),Ht=rs(),r0=oh(),s0=Oo(),{GUID:n0,kWebSocket:i0}=It(),o0=/^[+/0-9A-Za-z]{22}==$/,lh=0,ch=1,dh=2,Lo=class extends e0{constructor(e,t){if(super(),e={maxPayload:100*1024*1024,skipUTF8Validation:!1,perMessageDeflate:!1,handleProtocols:null,clientTracking:!0,verifyClient:null,noServer:!1,backlog:null,server:null,host:null,path:null,port:null,WebSocket:s0,...e},e.port==null&&!e.server&&!e.noServer||e.port!=null&&(e.server||e.noServer)||e.server&&e.noServer)throw new TypeError('One and only one of the "port", "server", or "noServer" options must be specified');if(e.port!=null?(this._server=wn.createServer((s,n)=>{let i=wn.STATUS_CODES[426];n.writeHead(426,{"Content-Length":i.length,"Content-Type":"text/plain"}),n.end(i)}),this._server.listen(e.port,e.host,e.backlog,t)):e.server&&(this._server=e.server),this._server){let s=this.emit.bind(this,"connection");this._removeListeners=a0(this._server,{listening:this.emit.bind(this,"listening"),error:this.emit.bind(this,"error"),upgrade:(n,i,o)=>{this.handleUpgrade(n,i,o,s)}})}e.perMessageDeflate===!0&&(e.perMessageDeflate={}),e.clientTracking&&(this.clients=new Set,this._shouldEmitClose=!1),this.options=e,this._state=lh}address(){if(this.options.noServer)throw new Error('The server is operating in "noServer" mode');return this._server?this._server.address():null}close(e){if(this._state===dh){e&&this.once("close",()=>{e(new Error("The server is not running"))}),process.nextTick(as,this);return}if(e&&this.once("close",e),this._state!==ch)if(this._state=ch,this.options.noServer||this.options.server)this._server&&(this._removeListeners(),this._removeListeners=this._server=null),this.clients?this.clients.size?this._shouldEmitClose=!0:process.nextTick(as,this):process.nextTick(as,this);else{let t=this._server;this._removeListeners(),this._removeListeners=this._server=null,t.close(()=>{as(this)})}}shouldHandle(e){if(this.options.path){let t=e.url.indexOf("?");if((t!==-1?e.url.slice(0,t):e.url)!==this.options.path)return!1}return!0}handleUpgrade(e,t,s,n){t.on("error",uh);let i=e.headers["sec-websocket-key"],o=+e.headers["sec-websocket-version"];if(e.method!=="GET"){$t(this,e,t,405,"Invalid HTTP method");return}if(e.headers.upgrade.toLowerCase()!=="websocket"){$t(this,e,t,400,"Invalid Upgrade header");return}if(!i||!o0.test(i)){$t(this,e,t,400,"Missing or invalid Sec-WebSocket-Key header");return}if(o!==8&&o!==13){$t(this,e,t,400,"Missing or invalid Sec-WebSocket-Version header");return}if(!this.shouldHandle(e)){ls(t,400);return}let a=e.headers["sec-websocket-protocol"],l=new Set;if(a!==void 0)try{l=r0.parse(a)}catch{$t(this,e,t,400,"Invalid Sec-WebSocket-Protocol header");return}let c=e.headers["sec-websocket-extensions"],u={};if(this.options.perMessageDeflate&&c!==void 0){let d=new Ht(this.options.perMessageDeflate,!0,this.options.maxPayload);try{let p=ah.parse(c);p[Ht.extensionName]&&(d.accept(p[Ht.extensionName]),u[Ht.extensionName]=d)}catch{$t(this,e,t,400,"Invalid or unacceptable Sec-WebSocket-Extensions header");return}}if(this.options.verifyClient){let d={origin:e.headers[`${o===8?"sec-websocket-origin":"origin"}`],secure:!!(e.socket.authorized||e.socket.encrypted),req:e};if(this.options.verifyClient.length===2){this.options.verifyClient(d,(p,f,C,x)=>{if(!p)return ls(t,f||401,C,x);this.completeUpgrade(u,i,l,e,t,s,n)});return}if(!this.options.verifyClient(d))return ls(t,401)}this.completeUpgrade(u,i,l,e,t,s,n)}completeUpgrade(e,t,s,n,i,o,a){if(!i.readable||!i.writable)return i.destroy();if(i[i0])throw new Error("server.handleUpgrade() was called more than once with the same socket, possibly due to a misconfiguration");if(this._state>lh)return ls(i,503);let c=["HTTP/1.1 101 Switching Protocols","Upgrade: websocket","Connection: Upgrade",`Sec-WebSocket-Accept: ${t0("sha1").update(t+n0).digest("base64")}`],u=new this.options.WebSocket(null);if(s.size){let d=this.options.handleProtocols?this.options.handleProtocols(s,n):s.values().next().value;d&&(c.push(`Sec-WebSocket-Protocol: ${d}`),u._protocol=d)}if(e[Ht.extensionName]){let d=e[Ht.extensionName].params,p=ah.format({[Ht.extensionName]:[d]});c.push(`Sec-WebSocket-Extensions: ${p}`),u._extensions=e}this.emit("headers",c,n),i.write(c.concat(`\r
`).join(`\r
`)),i.removeListener("error",uh),u.setSocket(i,o,{maxPayload:this.options.maxPayload,skipUTF8Validation:this.options.skipUTF8Validation}),this.clients&&(this.clients.add(u),u.on("close",()=>{this.clients.delete(u),this._shouldEmitClose&&!this.clients.size&&process.nextTick(as,this)})),a(u,n)}};hh.exports=Lo;function a0(r,e){for(let t of Object.keys(e))r.on(t,e[t]);return function(){for(let s of Object.keys(e))r.removeListener(s,e[s])}}function as(r){r._state=dh,r.emit("close")}function uh(){this.destroy()}function ls(r,e,t,s){t=t||wn.STATUS_CODES[e],s={Connection:"close","Content-Type":"text/html","Content-Length":Buffer.byteLength(t),...s},r.once("finish",r.destroy),r.end(`HTTP/1.1 ${e} ${wn.STATUS_CODES[e]}\r
`+Object.keys(s).map(n=>`${n}: ${s[n]}`).join(`\r
`)+`\r
\r
`+t)}function $t(r,e,t,s,n){if(r.listenerCount("wsClientError")){let i=new Error(n);Error.captureStackTrace(i,$t),r.emit("wsClientError",i,t,e)}else ls(t,s,n)}});var um=_((Fx,cm)=>{"use strict";var lm=function(){function r(e,t){for(var s=0;s<t.length;s++){var n=t[s];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,s){return t&&r(e.prototype,t),s&&r(e,s),e}}();function P1(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}var Lt=[[{color:"0, 0, 0",class:"ansi-black"},{color:"187, 0, 0",class:"ansi-red"},{color:"0, 187, 0",class:"ansi-green"},{color:"187, 187, 0",class:"ansi-yellow"},{color:"0, 0, 187",class:"ansi-blue"},{color:"187, 0, 187",class:"ansi-magenta"},{color:"0, 187, 187",class:"ansi-cyan"},{color:"255,255,255",class:"ansi-white"}],[{color:"85, 85, 85",class:"ansi-bright-black"},{color:"255, 85, 85",class:"ansi-bright-red"},{color:"0, 255, 0",class:"ansi-bright-green"},{color:"255, 255, 85",class:"ansi-bright-yellow"},{color:"85, 85, 255",class:"ansi-bright-blue"},{color:"255, 85, 255",class:"ansi-bright-magenta"},{color:"85, 255, 255",class:"ansi-bright-cyan"},{color:"255, 255, 255",class:"ansi-bright-white"}]],_1=function(){lm(r,null,[{key:"escapeForHtml",value:function(t){return new r().escapeForHtml(t)}},{key:"linkify",value:function(t){return new r().linkify(t)}},{key:"ansiToHtml",value:function(t,s){return new r().ansiToHtml(t,s)}},{key:"ansiToJson",value:function(t,s){return new r().ansiToJson(t,s)}},{key:"ansiToText",value:function(t){return new r().ansiToText(t)}}]);function r(){P1(this,r),this.fg=this.bg=this.fg_truecolor=this.bg_truecolor=null,this.bright=0,this.decorations=[]}return lm(r,[{key:"setupPalette",value:function(){this.PALETTE_COLORS=[];for(var t=0;t<2;++t)for(var s=0;s<8;++s)this.PALETTE_COLORS.push(Lt[t][s].color);for(var n=[0,95,135,175,215,255],i=function(x,E,N){return n[x]+", "+n[E]+", "+n[N]},o=void 0,a=void 0,l=void 0,c=0;c<6;++c)for(var u=0;u<6;++u)for(var d=0;d<6;++d)this.PALETTE_COLORS.push(i(c,u,d));for(var p=8,f=0;f<24;++f,p+=10)this.PALETTE_COLORS.push(i(p,p,p))}},{key:"escapeForHtml",value:function(t){return t.replace(/[&<>\"]/gm,function(s){return s=="&"?"&amp;":s=='"'?"&quot;":s=="<"?"&lt;":s==">"?"&gt;":""})}},{key:"linkify",value:function(t){return t.replace(/(https?:\/\/[^\s]+)/gm,function(s){return'<a href="'+s+'">'+s+"</a>"})}},{key:"ansiToHtml",value:function(t,s){return this.process(t,s,!0)}},{key:"ansiToJson",value:function(t,s){return s=s||{},s.json=!0,s.clearLine=!1,this.process(t,s,!0)}},{key:"ansiToText",value:function(t){return this.process(t,{},!1)}},{key:"process",value:function(t,s,n){var i=this,o=this,a=t.split(/\033\[/),l=a.shift();s==null&&(s={}),s.clearLine=/\r/.test(t);var c=a.map(function(d){return i.processChunk(d,s,n)});if(s&&s.json){var u=o.processChunkJson("");return u.content=l,u.clearLine=s.clearLine,c.unshift(u),s.remove_empty&&(c=c.filter(function(d){return!d.isEmpty()})),c}else c.unshift(l);return c.join("")}},{key:"processChunkJson",value:function(t,s,n){s=typeof s>"u"?{}:s;var i=s.use_classes=typeof s.use_classes<"u"&&s.use_classes,o=s.key=i?"class":"color",a={content:t,fg:null,bg:null,fg_truecolor:null,bg_truecolor:null,isInverted:!1,clearLine:s.clearLine,decoration:null,decorations:[],was_processed:!1,isEmpty:function(){return!a.content}},l=t.match(/^([!\x3c-\x3f]*)([\d;]*)([\x20-\x2c]*[\x40-\x7e])([\s\S]*)/m);if(!l)return a;var c=a.content=l[4],u=l[2].split(";");if(l[1]!==""||l[3]!=="m"||!n)return a;for(var d=this;u.length>0;){var p=u.shift(),f=parseInt(p);if(isNaN(f)||f===0)d.fg=d.bg=null,d.decorations=[];else if(f===1)d.decorations.push("bold");else if(f===2)d.decorations.push("dim");else if(f===3)d.decorations.push("italic");else if(f===4)d.decorations.push("underline");else if(f===5)d.decorations.push("blink");else if(f===7)d.decorations.push("reverse");else if(f===8)d.decorations.push("hidden");else if(f===9)d.decorations.push("strikethrough");else if(f===21)d.removeDecoration("bold");else if(f===22)d.removeDecoration("bold"),d.removeDecoration("dim");else if(f===23)d.removeDecoration("italic");else if(f===24)d.removeDecoration("underline");else if(f===25)d.removeDecoration("blink");else if(f===27)d.removeDecoration("reverse");else if(f===28)d.removeDecoration("hidden");else if(f===29)d.removeDecoration("strikethrough");else if(f===39)d.fg=null;else if(f===49)d.bg=null;else if(f>=30&&f<38)d.fg=Lt[0][f%10][o];else if(f>=90&&f<98)d.fg=Lt[1][f%10][o];else if(f>=40&&f<48)d.bg=Lt[0][f%10][o];else if(f>=100&&f<108)d.bg=Lt[1][f%10][o];else if(f===38||f===48){var C=f===38;if(u.length>=1){var x=u.shift();if(x==="5"&&u.length>=1){var E=parseInt(u.shift());if(E>=0&&E<=255)if(!i)this.PALETTE_COLORS||d.setupPalette(),C?d.fg=this.PALETTE_COLORS[E]:d.bg=this.PALETTE_COLORS[E];else{var N=E>=16?"ansi-palette-"+E:Lt[E>7?1:0][E%8].class;C?d.fg=N:d.bg=N}}else if(x==="2"&&u.length>=3){var z=parseInt(u.shift()),ee=parseInt(u.shift()),K=parseInt(u.shift());if(z>=0&&z<=255&&ee>=0&&ee<=255&&K>=0&&K<=255){var te=z+", "+ee+", "+K;i?C?(d.fg="ansi-truecolor",d.fg_truecolor=te):(d.bg="ansi-truecolor",d.bg_truecolor=te):C?d.fg=te:d.bg=te}}}}}if(d.fg===null&&d.bg===null&&d.decorations.length===0)return a;var _e=[],Ye=[],Me={};return a.fg=d.fg,a.bg=d.bg,a.fg_truecolor=d.fg_truecolor,a.bg_truecolor=d.bg_truecolor,a.decorations=d.decorations,a.decoration=d.decorations.slice(-1).pop()||null,a.was_processed=!0,a}},{key:"processChunk",value:function(t,s,n){var i=this;s=s||{};var o=this.processChunkJson(t,s,n),a=s.use_classes;if(o.decorations=o.decorations.filter(function(f){if(f==="reverse"){o.fg||(o.fg=Lt[0][7][a?"class":"color"]),o.bg||(o.bg=Lt[0][0][a?"class":"color"]);var C=o.fg;o.fg=o.bg,o.bg=C;var x=o.fg_truecolor;return o.fg_truecolor=o.bg_truecolor,o.bg_truecolor=x,o.isInverted=!0,!1}return!0}),s.json)return o;if(o.isEmpty())return"";if(!o.was_processed)return o.content;var l=[],c=[],u=[],d={},p=function(C){var x=[],E=void 0;for(E in C)C.hasOwnProperty(E)&&x.push("data-"+E+'="'+i.escapeForHtml(C[E])+'"');return x.length>0?" "+x.join(" "):""};return o.isInverted&&(d["ansi-is-inverted"]="true"),o.fg&&(a?(l.push(o.fg+"-fg"),o.fg_truecolor!==null&&(d["ansi-truecolor-fg"]=o.fg_truecolor,o.fg_truecolor=null)):l.push("color:rgb("+o.fg+")")),o.bg&&(a?(l.push(o.bg+"-bg"),o.bg_truecolor!==null&&(d["ansi-truecolor-bg"]=o.bg_truecolor,o.bg_truecolor=null)):l.push("background-color:rgb("+o.bg+")")),o.decorations.forEach(function(f){if(a){c.push("ansi-"+f);return}f==="bold"?c.push("font-weight:bold"):f==="dim"?c.push("opacity:0.5"):f==="italic"?c.push("font-style:italic"):f==="hidden"?c.push("visibility:hidden"):f==="strikethrough"?u.push("line-through"):u.push(f)}),u.length&&c.push("text-decoration:"+u.join(" ")),a?'<span class="'+l.concat(c).join(" ")+'"'+p(d)+">"+o.content+"</span>":'<span style="'+l.concat(c).join(";")+'"'+p(d)+">"+o.content+"</span>"}},{key:"removeDecoration",value:function(t){var s=this.decorations.indexOf(t);s>=0&&this.decorations.splice(s,1)}}]),r}();cm.exports=_1});var gm=_((WC,mm)=>{var jr=1e3,Wr=jr*60,Vr=Wr*60,nr=Vr*24,R1=nr*7,D1=nr*365.25;mm.exports=function(r,e){e=e||{};var t=typeof r;if(t==="string"&&r.length>0)return N1(r);if(t==="number"&&isFinite(r))return e.long?L1(r):O1(r);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(r))};function N1(r){if(r=String(r),!(r.length>100)){var e=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(r);if(e){var t=parseFloat(e[1]),s=(e[2]||"ms").toLowerCase();switch(s){case"years":case"year":case"yrs":case"yr":case"y":return t*D1;case"weeks":case"week":case"w":return t*R1;case"days":case"day":case"d":return t*nr;case"hours":case"hour":case"hrs":case"hr":case"h":return t*Vr;case"minutes":case"minute":case"mins":case"min":case"m":return t*Wr;case"seconds":case"second":case"secs":case"sec":case"s":return t*jr;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return t;default:return}}}}function O1(r){var e=Math.abs(r);return e>=nr?Math.round(r/nr)+"d":e>=Vr?Math.round(r/Vr)+"h":e>=Wr?Math.round(r/Wr)+"m":e>=jr?Math.round(r/jr)+"s":r+"ms"}function L1(r){var e=Math.abs(r);return e>=nr?Hi(r,e,nr,"day"):e>=Vr?Hi(r,e,Vr,"hour"):e>=Wr?Hi(r,e,Wr,"minute"):e>=jr?Hi(r,e,jr,"second"):r+" ms"}function Hi(r,e,t,s){var n=e>=t*1.5;return Math.round(r/t)+" "+s+(n?"s":"")}});var ll=_((VC,fm)=>{function q1(r){t.debug=t,t.default=t,t.coerce=l,t.disable=i,t.enable=n,t.enabled=o,t.humanize=gm(),t.destroy=c,Object.keys(r).forEach(u=>{t[u]=r[u]}),t.names=[],t.skips=[],t.formatters={};function e(u){let d=0;for(let p=0;p<u.length;p++)d=(d<<5)-d+u.charCodeAt(p),d|=0;return t.colors[Math.abs(d)%t.colors.length]}t.selectColor=e;function t(u){let d,p=null,f,C;function x(...E){if(!x.enabled)return;let N=x,z=Number(new Date),ee=z-(d||z);N.diff=ee,N.prev=d,N.curr=z,d=z,E[0]=t.coerce(E[0]),typeof E[0]!="string"&&E.unshift("%O");let K=0;E[0]=E[0].replace(/%([a-zA-Z%])/g,(_e,Ye)=>{if(_e==="%%")return"%";K++;let Me=t.formatters[Ye];if(typeof Me=="function"){let St=E[K];_e=Me.call(N,St),E.splice(K,1),K--}return _e}),t.formatArgs.call(N,E),(N.log||t.log).apply(N,E)}return x.namespace=u,x.useColors=t.useColors(),x.color=t.selectColor(u),x.extend=s,x.destroy=t.destroy,Object.defineProperty(x,"enabled",{enumerable:!0,configurable:!1,get:()=>p!==null?p:(f!==t.namespaces&&(f=t.namespaces,C=t.enabled(u)),C),set:E=>{p=E}}),typeof t.init=="function"&&t.init(x),x}function s(u,d){let p=t(this.namespace+(typeof d>"u"?":":d)+u);return p.log=this.log,p}function n(u){t.save(u),t.namespaces=u,t.names=[],t.skips=[];let d,p=(typeof u=="string"?u:"").split(/[\s,]+/),f=p.length;for(d=0;d<f;d++)p[d]&&(u=p[d].replace(/\*/g,".*?"),u[0]==="-"?t.skips.push(new RegExp("^"+u.slice(1)+"$")):t.names.push(new RegExp("^"+u+"$")))}function i(){let u=[...t.names.map(a),...t.skips.map(a).map(d=>"-"+d)].join(",");return t.enable(""),u}function o(u){if(u[u.length-1]==="*")return!0;let d,p;for(d=0,p=t.skips.length;d<p;d++)if(t.skips[d].test(u))return!1;for(d=0,p=t.names.length;d<p;d++)if(t.names[d].test(u))return!0;return!1}function a(u){return u.toString().substring(2,u.toString().length-2).replace(/\.\*\?$/,"*")}function l(u){return u instanceof Error?u.stack||u.message:u}function c(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return t.enable(t.load()),t}fm.exports=q1});var Sm=_((Oe,$i)=>{Oe.formatArgs=G1;Oe.save=U1;Oe.load=B1;Oe.useColors=F1;Oe.storage=j1();Oe.destroy=(()=>{let r=!1;return()=>{r||(r=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})();Oe.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function F1(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function G1(r){if(r[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+r[0]+(this.useColors?"%c ":" ")+"+"+$i.exports.humanize(this.diff),!this.useColors)return;let e="color: "+this.color;r.splice(1,0,e,"color: inherit");let t=0,s=0;r[0].replace(/%[a-zA-Z%]/g,n=>{n!=="%%"&&(t++,n==="%c"&&(s=t))}),r.splice(s,0,e)}Oe.log=console.debug||console.log||(()=>{});function U1(r){try{r?Oe.storage.setItem("debug",r):Oe.storage.removeItem("debug")}catch{}}function B1(){let r;try{r=Oe.storage.getItem("debug")}catch{}return!r&&typeof process<"u"&&"env"in process&&(r=process.env.DEBUG),r}function j1(){try{return localStorage}catch{}}$i.exports=ll()(Oe);var{formatters:W1}=$i.exports;W1.j=function(r){try{return JSON.stringify(r)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}});var Im=_((KC,bm)=>{"use strict";bm.exports=(r,e=process.argv)=>{let t=r.startsWith("-")?"":r.length===1?"-":"--",s=e.indexOf(t+r),n=e.indexOf("--");return s!==-1&&(n===-1||s<n)}});var xm=_((HC,ym)=>{"use strict";var V1=require("os"),vm=require("tty"),Ue=Im(),{env:he}=process,Ft;Ue("no-color")||Ue("no-colors")||Ue("color=false")||Ue("color=never")?Ft=0:(Ue("color")||Ue("colors")||Ue("color=true")||Ue("color=always"))&&(Ft=1);"FORCE_COLOR"in he&&(he.FORCE_COLOR==="true"?Ft=1:he.FORCE_COLOR==="false"?Ft=0:Ft=he.FORCE_COLOR.length===0?1:Math.min(parseInt(he.FORCE_COLOR,10),3));function cl(r){return r===0?!1:{level:r,hasBasic:!0,has256:r>=2,has16m:r>=3}}function ul(r,e){if(Ft===0)return 0;if(Ue("color=16m")||Ue("color=full")||Ue("color=truecolor"))return 3;if(Ue("color=256"))return 2;if(r&&!e&&Ft===void 0)return 0;let t=Ft||0;if(he.TERM==="dumb")return t;if(process.platform==="win32"){let s=V1.release().split(".");return Number(s[0])>=10&&Number(s[2])>=10586?Number(s[2])>=14931?3:2:1}if("CI"in he)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI","GITHUB_ACTIONS","BUILDKITE"].some(s=>s in he)||he.CI_NAME==="codeship"?1:t;if("TEAMCITY_VERSION"in he)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(he.TEAMCITY_VERSION)?1:0;if(he.COLORTERM==="truecolor")return 3;if("TERM_PROGRAM"in he){let s=parseInt((he.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(he.TERM_PROGRAM){case"iTerm.app":return s>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(he.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(he.TERM)||"COLORTERM"in he?1:t}function K1(r){let e=ul(r,r&&r.isTTY);return cl(e)}ym.exports={supportsColor:K1,stdout:cl(ul(!0,vm.isatty(1))),stderr:cl(ul(!0,vm.isatty(2)))}});var Cm=_((fe,Yi)=>{var H1=require("tty"),zi=require("util");fe.init=Z1;fe.log=Q1;fe.formatArgs=z1;fe.save=J1;fe.load=X1;fe.useColors=$1;fe.destroy=zi.deprecate(()=>{},"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.");fe.colors=[6,2,3,4,5,1];try{let r=xm();r&&(r.stderr||r).level>=2&&(fe.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch{}fe.inspectOpts=Object.keys(process.env).filter(r=>/^debug_/i.test(r)).reduce((r,e)=>{let t=e.substring(6).toLowerCase().replace(/_([a-z])/g,(n,i)=>i.toUpperCase()),s=process.env[e];return/^(yes|on|true|enabled)$/i.test(s)?s=!0:/^(no|off|false|disabled)$/i.test(s)?s=!1:s==="null"?s=null:s=Number(s),r[t]=s,r},{});function $1(){return"colors"in fe.inspectOpts?!!fe.inspectOpts.colors:H1.isatty(process.stderr.fd)}function z1(r){let{namespace:e,useColors:t}=this;if(t){let s=this.color,n="\x1B[3"+(s<8?s:"8;5;"+s),i=`  ${n};1m${e} \x1B[0m`;r[0]=i+r[0].split(`
`).join(`
`+i),r.push(n+"m+"+Yi.exports.humanize(this.diff)+"\x1B[0m")}else r[0]=Y1()+e+" "+r[0]}function Y1(){return fe.inspectOpts.hideDate?"":new Date().toISOString()+" "}function Q1(...r){return process.stderr.write(zi.format(...r)+`
`)}function J1(r){r?process.env.DEBUG=r:delete process.env.DEBUG}function X1(){return process.env.DEBUG}function Z1(r){r.inspectOpts={};let e=Object.keys(fe.inspectOpts);for(let t=0;t<e.length;t++)r.inspectOpts[e[t]]=fe.inspectOpts[e[t]]}Yi.exports=ll()(fe);var{formatters:wm}=Yi.exports;wm.o=function(r){return this.inspectOpts.colors=this.useColors,zi.inspect(r,this.inspectOpts).split(`
`).map(e=>e.trim()).join(" ")};wm.O=function(r){return this.inspectOpts.colors=this.useColors,zi.inspect(r,this.inspectOpts)}});var Qi=_(($C,dl)=>{typeof process>"u"||process.type==="renderer"||process.browser===!0||process.__nwjs?dl.exports=Sm():dl.exports=Cm()});var Tm=_((zC,Em)=>{var m={};m[25121]=new Error("missing arguments");m[25121].code=25121;m[25122]=new Error("unsupported hive");m[25122].code=25122;m[25123]=new Error("expected to have groups of 4 arguments for each value that is written to the registry");m[25123].code=25123;m[25124]=new Error('missing or invalid architecture from arguments, use "A" (agnostic), "S" (specific), "32" or "64"');m[25124].code=25124;m[25125]=new Error("missing OSArchitecture global. Forgot to load util.vbs? submit an issue asap with steps to recreate");m[25125].code=25125;m[25126]=new Error("invalid os architecture detected");m[25126].code=25126;m[25127]=new Error("empty line written to vbscript stdin");m[25127].code=25127;m[5]=new Error("access is denied");m[5].code=5;m[2]=new Error("registry path does not exist");m[2].code=2;var hl=new Error("wbemErrFailed");hl.description="The call failed.";hl.code=2147749889;m[2147749889]=hl;var pl=new Error("wbemErrNotFound");pl.description="The object could not be found.";pl.code=2147749890;m[2147749890]=pl;var ml=new Error("wbemErrAccessDenied");ml.description="The current user does not have permission to perform the action.";ml.code=2147749891;m[2147749891]=ml;var gl=new Error("wbemErrProviderFailure");gl.description="The provider has failed at some time other than during initialization.";gl.code=2147749892;m[2147749892]=gl;var fl=new Error("wbemErrTypeMismatch");fl.description="A type mismatch occurred.";fl.code=2147749893;m[2147749893]=fl;var Sl=new Error("wbemErrOutOfMemory");Sl.description="There was not enough memory for the operation.";Sl.code=2147749894;m[2147749894]=Sl;var bl=new Error("wbemErrInvalidContext");bl.description="The SWbemNamedValue object is not valid.";bl.code=2147749895;m[2147749895]=bl;var Il=new Error("wbemErrInvalidParameter");Il.description="One of the parameters to the call is not correct.";Il.code=2147749896;m[2147749896]=Il;var vl=new Error("wbemErrNotAvailable");vl.description="The resource, typically a remote server, is not currently available.";vl.code=2147749897;m[2147749897]=vl;var yl=new Error("wbemErrCriticalError");yl.description="An internal, critical, and unexpected error occurred. Report this error to Microsoft Technical Support.";yl.code=2147749898;m[2147749898]=yl;var xl=new Error("wbemErrInvalidStream");xl.description="One or more network packets were corrupted during a remote session.";xl.code=2147749899;m[2147749899]=xl;var wl=new Error("wbemErrNotSupported");wl.description="The feature or operation is not supported.";wl.code=2147749900;m[2147749900]=wl;var Cl=new Error("wbemErrInvalidSuperclass");Cl.description="The parent class specified is not valid.";Cl.code=2147749901;m[2147749901]=Cl;var El=new Error("wbemErrInvalidNamespace");El.description="The namespace specified could not be found.";El.code=2147749902;m[2147749902]=El;var Tl=new Error("wbemErrInvalidObject");Tl.description="The specified instance is not valid.";Tl.code=2147749903;m[2147749903]=Tl;var Ml=new Error("wbemErrInvalidClass");Ml.description="The specified class is not valid.";Ml.code=2147749904;m[2147749904]=Ml;var Al=new Error("wbemErrProviderNotFound");Al.description="A provider referenced in the schema does not have a corresponding registration.";Al.code=2147749905;m[2147749905]=Al;var Pl=new Error("wbemErrInvalidProviderRegistration");Pl.description="A provider referenced in the schema has an incorrect or incomplete registration. This error may be caused by a missing pragma namespace command in the MOF file used to register the provider, resulting in the provider being registered in the wrong WMI namespace. This error may also be caused by a corrupt repository, which may be fixed by deleting it and recompiling the MOF files.";Pl.code=2147749906;m[2147749906]=Pl;var _l=new Error("wbemErrProviderLoadFailure");_l.description="COM cannot locate a provider referenced in the schema. This error may be caused by any of the following:";_l.code=2147749907;m[2147749907]=_l;var kl=new Error("wbemErrInitializationFailure");kl.description="A component, such as a provider, failed to initialize for internal reasons.";kl.code=2147749908;m[2147749908]=kl;var Rl=new Error("wbemErrTransportFailure");Rl.description="A networking error occurred, preventing normal operation.";Rl.code=2147749909;m[2147749909]=Rl;var Dl=new Error("wbemErrInvalidOperation");Dl.description="The requested operation is not valid. This error usually applies to invalid attempts to delete classes or properties.";Dl.code=2147749910;m[2147749910]=Dl;var Nl=new Error("wbemErrInvalidQuery");Nl.description="The requested operation is not valid. This error usually applies to invalid attempts to delete classes or properties.";Nl.code=2147749911;m[2147749911]=Nl;var Ol=new Error("wbemErrInvalidQueryType");Ol.description="The requested query language is not supported.";Ol.code=2147749912;m[2147749912]=Ol;var Ll=new Error("wbemErrAlreadyExists");Ll.description="In a put operation, the wbemChangeFlagCreateOnly flag was specified, but the instance already exists.";Ll.code=2147749913;m[2147749913]=Ll;var ql=new Error("wbemErrOverrideNotAllowed");ql.description="It is not possible to perform the add operation on this qualifier because the owning object does not permit overrides.";ql.code=2147749914;m[2147749914]=ql;var Fl=new Error("wbemErrPropagatedQualifier");Fl.description="The user attempted to delete a qualifier that was not owned. The qualifier was inherited from a parent class.";Fl.code=2147749915;m[2147749915]=Fl;var Gl=new Error("wbemErrPropagatedProperty");Gl.description="The user attempted to delete a property that was not owned. The property was inherited from a parent class.";Gl.code=2147749916;m[2147749916]=Gl;var Ul=new Error("wbemErrUnexpected");Ul.description="The client made an unexpected and illegal sequence of calls, such as calling EndEnumeration before calling BeginEnumeration.";Ul.code=2147749917;m[2147749917]=Ul;var Bl=new Error("wbemErrIllegalOperation");Bl.description="The user requested an illegal operation, such as spawning a class from an instance.";Bl.code=2147749918;m[2147749918]=Bl;var jl=new Error("wbemErrCannotBeKey");jl.description="There was an illegal attempt to specify a key qualifier on a property that cannot be a key. The keys are specified in the class definition for an object, and cannot be altered on a per-instance basis.";jl.code=2147749919;m[2147749919]=jl;var Wl=new Error("wbemErrIncompleteClass");Wl.description="The current object is not a valid class definition. Either it is incomplete, or it has not been registered with WMI using SWbemObject.Put_.";Wl.code=2147749920;m[2147749920]=Wl;var Vl=new Error("wbemErrInvalidSyntax");Vl.description="The syntax of an input parameter is incorrect for the applicable data structure. For example, when a CIM datetime structure does not have the correct format when passed to SWbemDateTime.SetFileTime.";Vl.code=2147749921;m[2147749921]=Vl;var Kl=new Error("wbemErrNondecoratedObject");Kl.description="Reserved for future use.";Kl.code=2147749922;m[2147749922]=Kl;var Hl=new Error("wbemErrReadOnly");Hl.description="The property that you are attempting to modify is read-only.";Hl.code=2147749923;m[2147749923]=Hl;var $l=new Error("wbemErrProviderNotCapable");$l.description="The provider cannot perform the requested operation. This would include a query that is too complex, retrieving an instance, creating or updating a class, deleting a class, or enumerating a class.";$l.code=2147749924;m[2147749924]=$l;var zl=new Error("wbemErrClassHasChildren");zl.description="An attempt was made to make a change that would invalidate a subclass.";zl.code=2147749925;m[2147749925]=zl;var Yl=new Error("wbemErrClassHasInstances");Yl.description="An attempt has been made to delete or modify a class that has instances.";Yl.code=2147749926;m[2147749926]=Yl;var Ql=new Error("wbemErrQueryNotImplemented");Ql.description="Reserved for future use.";Ql.code=2147749927;m[2147749927]=Ql;var Jl=new Error("wbemErrIllegalNull");Jl.description="A value of Nothing was specified for a property that may not be Nothing, such as one that is marked by a Key, Indexed, or Not_Null qualifier.";Jl.code=2147749928;m[2147749928]=Jl;var Xl=new Error("wbemErrInvalidQualifierType");Xl.description="The CIM type specified for a property is not valid.";Xl.code=2147749929;m[2147749929]=Xl;var Zl=new Error("wbemErrInvalidPropertyType");Zl.description="The CIM type specified for a property is not valid.";Zl.code=2147749930;m[2147749930]=Zl;var ec=new Error("wbemErrValueOutOfRange");ec.description="The request was made with an out-of-range value, or is incompatible with the type.";ec.code=2147749931;m[2147749931]=ec;var tc=new Error("wbemErrCannotBeSingleton");tc.description="An illegal attempt was made to make a class singleton, such as when the class is derived from a non-singleton class.";tc.code=2147749932;m[2147749932]=tc;var rc=new Error("wbemErrInvalidCimType");rc.description="The CIM type specified is not valid.";rc.code=2147749933;m[2147749933]=rc;var sc=new Error("wbemErrInvalidMethod");sc.description="The requested method is not available.";sc.code=2147749934;m[2147749934]=sc;var nc=new Error("wbemErrInvalidMethodParameters");nc.description="The parameters provided for the method are not valid.";nc.code=2147749935;m[2147749935]=nc;var ic=new Error("wbemErrSystemProperty");ic.description="There was an attempt to get qualifiers on a system property.";ic.code=2147749936;m[2147749936]=ic;var oc=new Error("wbemErrInvalidProperty");oc.description="The property type is not recognized.";oc.code=2147749937;m[2147749937]=oc;var ac=new Error("wbemErrCallCancelled");ac.description="An asynchronous process has been canceled internally or by the user. Note that due to the timing and nature of the asynchronous operation the operation may not have been truly canceled.";ac.code=2147749938;m[2147749938]=ac;var lc=new Error("wbemErrShuttingDown");lc.description="The user has requested an operation while WMI is in the process of shutting down.";lc.code=2147749939;m[2147749939]=lc;var cc=new Error("wbemErrPropagatedMethod");cc.description="An attempt was made to reuse an existing method name from a parent class, and the signatures did not match.";cc.code=2147749940;m[2147749940]=cc;var uc=new Error("wbemErrUnsupportedParameter");uc.description="One or more parameter values, such as a query text, is too complex or unsupported. WMI is therefore requested to retry the operation with simpler parameters.";uc.code=2147749941;m[2147749941]=uc;var dc=new Error("wbemErrMissingParameter");dc.description="A parameter was missing from the method call.";dc.code=2147749942;m[2147749942]=dc;var hc=new Error("wbemErrInvalidParameterId");hc.description="A method parameter has an ID qualifier that is not valid.";hc.code=2147749943;m[2147749943]=hc;var pc=new Error("wbemErrNonConsecutiveParameterIds");pc.description="One or more of the method parameters have ID qualifiers that are out of sequence.";pc.code=2147749944;m[2147749944]=pc;var mc=new Error("wbemErrParameterIdOnRetval");mc.description="The return value for a method has an ID qualifier.";mc.code=2147749945;m[2147749945]=mc;var gc=new Error("wbemErrInvalidObjectPath");gc.description="The specified object path was not valid.";gc.code=2147749946;m[2147749946]=gc;var fc=new Error("wbemErrOutOfDiskSpace");fc.description="Windows Server 2003:  Disk is out of space or the 4 GB limit on WMI repository (CIM repository) size is reached.";fc.code=2147749947;m[2147749947]=fc;var Sc=new Error("wbemErrBufferTooSmall");Sc.description="The supplied buffer was too small to hold all the objects in the enumerator or to read a string property.";Sc.code=2147749948;m[2147749948]=Sc;var bc=new Error("wbemErrUnsupportedPutExtension");bc.description="The provider does not support the requested put operation.";bc.code=2147749949;m[2147749949]=bc;var Ic=new Error("wbemErrUnknownObjectType");Ic.description="An object with an incorrect type or version was encountered during marshaling.";Ic.code=2147749950;m[2147749950]=Ic;var vc=new Error("wbemErrUnknownPacketType");vc.description="A packet with an incorrect type or version was encountered during marshaling.";vc.code=2147749951;m[2147749951]=vc;var yc=new Error("wbemErrMarshalVersionMismatch");yc.description="The packet has an unsupported version.";yc.code=2147749952;m[2147749952]=yc;var xc=new Error("wbemErrMarshalInvalidSignature");xc.description="The packet appears to be corrupted.";xc.code=2147749953;m[2147749953]=xc;var wc=new Error("wbemErrInvalidQualifier");wc.description="An attempt has been made to mismatch qualifiers, such as putting [key] on an object instead of a property.";wc.code=2147749954;m[2147749954]=wc;var Cc=new Error("wbemErrInvalidDuplicateParameter");Cc.description="A duplicate parameter has been declared in a CIM method.";Cc.code=2147749955;m[2147749955]=Cc;var Ec=new Error("wbemErrTooMuchData");Ec.description="Reserved for future use.";Ec.code=2147749956;m[2147749956]=Ec;var Tc=new Error("wbemErrServerTooBusy");Tc.description="A call to IWbemObjectSink::Indicate has failed. The provider may choose to refire the event.";Tc.code=2147749957;m[2147749957]=Tc;var Mc=new Error("wbemErrInvalidFlavor");Mc.description="The specified flavor was not valid.";Mc.code=2147749958;m[2147749958]=Mc;var Ac=new Error("wbemErrCircularReference");Ac.description="An attempt has been made to create a reference that is circular (for example, deriving a class from itself).";Ac.code=2147749959;m[2147749959]=Ac;var Pc=new Error("wbemErrUnsupportedClassUpdate");Pc.description="The specified class is not supported.";Pc.code=2147749960;m[2147749960]=Pc;var _c=new Error("wbemErrCannotChangeKeyInheritance");_c.description="An attempt was made to change a key when instances or subclasses are already using the key.";_c.code=2147749961;m[2147749961]=_c;var kc=new Error("wbemErrCannotChangeIndexInheritance");kc.description="An attempt was made to change an index when instances or subclasses are already using the index.";kc.code=2147749968;m[2147749968]=kc;var Rc=new Error("wbemErrTooManyProperties");Rc.description="An attempt was made to create more properties than the current version of the class supports.";Rc.code=2147749969;m[2147749969]=Rc;var Dc=new Error("wbemErrUpdateTypeMismatch");Dc.description="A property was redefined with a conflicting type in a derived class.";Dc.code=2147749970;m[2147749970]=Dc;var Nc=new Error("wbemErrUpdateOverrideNotAllowed");Nc.description="An attempt was made in a derived class to override a non-overrideable qualifier.";Nc.code=2147749971;m[2147749971]=Nc;var Oc=new Error("wbemErrUpdatePropagatedMethod");Oc.description="A method was redeclared with a conflicting signature in a derived class.";Oc.code=2147749972;m[2147749972]=Oc;var Lc=new Error("wbemErrMethodNotImplemented");Lc.description="An attempt was made to execute a method not marked with [implemented] in any relevant class.";Lc.code=2147749973;m[2147749973]=Lc;var qc=new Error("wbemErrMethodDisabled");qc.description="An attempt was made to execute a method marked with [disabled].";qc.code=2147749974;m[2147749974]=qc;var Fc=new Error("wbemErrRefresherBusy");Fc.description="The refresher is busy with another operation.";Fc.code=2147749975;m[2147749975]=Fc;var Gc=new Error("wbemErrUnparsableQuery");Gc.description="The filtering query is syntactically not valid.";Gc.code=2147749976;m[2147749976]=Gc;var Uc=new Error("wbemErrNotEventClass");Uc.description="The FROM clause of a filtering query references a class that is not an event class (not derived from __Event).";Uc.code=2147749977;m[2147749977]=Uc;var Bc=new Error("wbemErrMissingGroupWithin");Bc.description="A GROUP BY clause was used without the corresponding GROUP WITHIN clause.";Bc.code=2147749978;m[2147749978]=Bc;var jc=new Error("wbemErrMissingAggregationList");jc.description="A GROUP BY clause was used. Aggregation on all properties is not supported.";jc.code=2147749979;m[2147749979]=jc;var Wc=new Error("wbemErrPropertyNotAnObject");Wc.description="Dot notation was used on a property that is not an embedded object.";Wc.code=2147749980;m[2147749980]=Wc;var Vc=new Error("wbemErrAggregatingByObject");Vc.description="A GROUP BY clause references a property that is an embedded object without using dot notation.";Vc.code=2147749981;m[2147749981]=Vc;var Kc=new Error("wbemErrUninterpretableProviderQuery");Kc.description="An event provider registration query ( __EventProviderRegistration) did not specify the classes for which events were provided.";Kc.code=2147749983;m[2147749983]=Kc;var Hc=new Error("wbemErrBackupRestoreWinmgmtRunning");Hc.description="An request was made to back up or restore the repository while WMI was using it.";Hc.code=2147749984;m[2147749984]=Hc;var $c=new Error("wbemErrQueueOverflow");$c.description="The asynchronous delivery queue overflowed due to the event consumer being too slow.";$c.code=2147749985;m[2147749985]=$c;var zc=new Error("wbemErrPrivilegeNotHeld");zc.description="The operation failed because the client did not have the necessary security privilege.";zc.code=2147749986;m[2147749986]=zc;var Yc=new Error("wbemErrInvalidOperator");Yc.description="The operator is not valid for this property type.";Yc.code=2147749987;m[2147749987]=Yc;var Qc=new Error("wbemErrLocalCredentials");Qc.description="The user specified a username, password or authority for a local connection. The user must use a blank username/password and rely on default security.";Qc.code=2147749988;m[2147749988]=Qc;var Jc=new Error("wbemErrCannotBeAbstract");Jc.description="The class was made abstract when its parent class is not abstract.";Jc.code=2147749989;m[2147749989]=Jc;var Xc=new Error("wbemErrAmendedObject");Xc.description="An amended object was put without the wbemFlagUseAmendedQualifiers flag being specified.";Xc.code=2147749990;m[2147749990]=Xc;var Zc=new Error("wbemErrClientTooSlow");Zc.description="Windows Server 2003:  The client was not retrieving objects quickly enough from an enumeration. This constant is returned when a client creates an enumeration object but does not retrieve objects from the enumerator in a timely fashion, causing the enumerator's object caches to get backed up.";Zc.code=2147749991;m[2147749991]=Zc;var eu=new Error("wbemErrNullSecurityDescriptor");eu.description="Windows Server 2003:  A null security descriptor was used.";eu.code=2147749992;m[2147749992]=eu;var tu=new Error("wbemErrTimeout");tu.description="Windows Server 2003:  The operation timed out.";tu.code=2147749993;m[2147749993]=tu;var ru=new Error("wbemErrInvalidAssociation");ru.description="Windows Server 2003:  The association being used is not valid.";ru.code=2147749994;m[2147749994]=ru;var su=new Error("wbemErrAmbiguousOperation");su.description="Windows Server 2003:  The operation was ambiguous.";su.code=2147749995;m[2147749995]=su;var nu=new Error("wbemErrQuotaViolation");nu.description="Windows Server 2003:  WMI is taking up too much memory. This could be caused either by low memory availability or excessive memory consumption by WMI.";nu.code=2147749996;m[2147749996]=nu;var iu=new Error("wbemErrTransactionConflict");iu.description="Windows Server 2003:  The operation resulted in a transaction conflict.";iu.code=2147749997;m[2147749997]=iu;var ou=new Error("wbemErrForcedRollback");ou.description="Windows Server 2003:  The transaction forced a rollback.";ou.code=2147749998;m[2147749998]=ou;var au=new Error("wbemErrUnsupportedLocale");au.description="Windows Server 2003:  The locale used in the call is not supported.";au.code=2147749999;m[2147749999]=au;var lu=new Error("wbemErrHandleOutOfDate");lu.description="Windows Server 2003:  The object handle is out of date.";lu.code=214775e4;m[214775e4]=lu;var cu=new Error("wbemErrConnectionFailed");cu.description="Windows Server 2003:  Indicates that the connection to the SQL database failed.";cu.code=2147750001;m[2147750001]=cu;var uu=new Error("wbemErrInvalidHandleRequest");uu.description="Windows Server 2003:  The handle request was not valid.";uu.code=2147750002;m[2147750002]=uu;var du=new Error("wbemErrPropertyNameTooWide");du.description="Windows Server 2003:  The property name contains more than 255 characters.";du.code=2147750003;m[2147750003]=du;var hu=new Error("wbemErrClassNameTooWide");hu.description="Windows Server 2003:  The class name contains more than 255 characters.";hu.code=2147750004;m[2147750004]=hu;var pu=new Error("wbemErrMethodNameTooWide");pu.description="Windows Server 2003:  The method name contains more than 255 characters.";pu.code=2147750005;m[2147750005]=pu;var mu=new Error("wbemErrQualifierNameTooWide");mu.description="Windows Server 2003:  The qualifier name contains more than 255 characters.";mu.code=2147750006;m[2147750006]=mu;var gu=new Error("wbemErrRerunCommand");gu.description="Windows Server 2003:  Indicates that an SQL command should be rerun because there is a deadlock in SQL. This can be returned only when data is being stored in an SQL database.";gu.code=2147750007;m[2147750007]=gu;var fu=new Error("wbemErrDatabaseVerMismatch");fu.description="Windows Server 2003:  The database version does not match the version that the repository driver processes.";fu.code=2147750008;m[2147750008]=fu;var Su=new Error("wbemErrVetoDelete");Su.description="Windows Server 2003:  WMI cannot do the delete operation because the provider does not allow it.";Su.code=2147750010;m[2147750010]=Su;var bu=new Error("wbemErrVetoPut");bu.description="Windows Server 2003:  WMI cannot do the put operation because the provider does not allow it.";bu.code=2147750010;m[2147750010]=bu;var Iu=new Error("wbemErrInvalidLocale");Iu.description="Windows Server 2003:  The specified locale identifier was not valid for the operation.";Iu.code=2147750016;m[2147750016]=Iu;var vu=new Error("wbemErrProviderSuspended");vu.description="Windows Server 2003:  The provider is suspended.";vu.code=2147750017;m[2147750017]=vu;var yu=new Error("wbemErrSynchronizationRequired");yu.description="Windows Server 2003:  The object must be committed and retrieved again before the requested operation can succeed. This constant is returned when an object must be committed and re-retrieved to see the property value.";yu.code=2147750018;m[2147750018]=yu;var xu=new Error("wbemErrNoSchema");xu.description="Windows Server 2003:  The operation cannot be completed because no schema is available.";xu.code=2147750019;m[2147750019]=xu;var wu=new Error("wbemErrProviderAlreadyRegistered");wu.description="Windows Server 2003:  The provider registration cannot be done because the provider is already registered.";wu.code=2147750020;m[2147750020]=wu;var Cu=new Error("wbemErrProviderNotRegistered");Cu.description="Windows Server 2003:  The provider for the requested data is not registered.";Cu.code=2147750021;m[2147750021]=Cu;var Eu=new Error("wbemErrFatalTransportError");Eu.description="Windows Server 2003:  A fatal transport error occurred and other transport will not be attempted.";Eu.code=2147750022;m[2147750022]=Eu;var Tu=new Error("wbemErrEncryptedConnectionRequired");Tu.description="Windows Server 2003:  The client connection to WINMGMT must be encrypted for this operation. The IWbemServices proxy security settings should be adjusted and the operation retried.";Tu.code=2147750023;m[2147750023]=Tu;var Mu=new Error("wbemErrRegistrationTooBroad");Mu.description="Windows Server 2003:  The provider registration overlaps with the system event domain.";Mu.code=2147753985;m[2147753985]=Mu;var Au=new Error("wbemErrRegistrationTooPrecise");Au.description="Windows Server 2003:  A WITHIN clause was not used in this query.";Au.code=2147753986;m[2147753986]=Au;var Pu=new Error("wbemErrTimedout");Pu.description="Windows Server 2003:  Automation-specific error.";Pu.code=2147758081;m[2147758081]=Pu;var _u=new Error("wbemErrResetToDefault");_u.description="undefined";_u.code=2147758082;m[2147758082]=_u;Em.exports=m});var Pm=_((YC,Am)=>{var Mm=require("stream").Transform,eS=require("util");eS.inherits(Gt,Mm);function Gt(r){if(!(this instanceof Gt))return new Gt(r);Mm.call(this,r),this._buffer=[],this._currentLength=0,r&&r.sliceBy?this._sliceBy=r.sliceBy:this._sliceBy=`
`,r&&r.replaceWith&&(this.replaceWith=new Buffer(r.replaceWith))}Gt.prototype._transform=function(r,e,t){r=String(r);for(var s=0,n=-1;(n=r.indexOf(this._sliceBy,s))>-1;){var i=r.substring(s,n);this._append(i),this._separatorFlush(),s=n+this._sliceBy.length}var o=r.substring(s);o.length>0&&this._append(o),t()};Gt.prototype._append=function(r){var e=new Buffer(r);this._buffer.push(e),this._currentLength+=e.length};Gt.prototype._separatorFlush=function(r){this.replaceWith&&!r&&(this._buffer.push(this.replaceWith),this._currentLength+=this.replaceWith.length);var e=Buffer.concat(this._buffer,this._currentLength);this._buffer=[],this._currentLength=0,this.push(e),this.emit("slice",e)};Gt.prototype._flush=function(r){this._separatorFlush(!0),r&&r()};Am.exports=Gt});var Fs=_(Ee=>{function tS(r){return Array.isArray?Array.isArray(r):Ji(r)==="[object Array]"}Ee.isArray=tS;function rS(r){return typeof r=="boolean"}Ee.isBoolean=rS;function sS(r){return r===null}Ee.isNull=sS;function nS(r){return r==null}Ee.isNullOrUndefined=nS;function iS(r){return typeof r=="number"}Ee.isNumber=iS;function oS(r){return typeof r=="string"}Ee.isString=oS;function aS(r){return typeof r=="symbol"}Ee.isSymbol=aS;function lS(r){return r===void 0}Ee.isUndefined=lS;function cS(r){return Ji(r)==="[object RegExp]"}Ee.isRegExp=cS;function uS(r){return typeof r=="object"&&r!==null}Ee.isObject=uS;function dS(r){return Ji(r)==="[object Date]"}Ee.isDate=dS;function hS(r){return Ji(r)==="[object Error]"||r instanceof Error}Ee.isError=hS;function pS(r){return typeof r=="function"}Ee.isFunction=pS;function mS(r){return r===null||typeof r=="boolean"||typeof r=="number"||typeof r=="string"||typeof r=="symbol"||typeof r>"u"}Ee.isPrimitive=mS;Ee.isBuffer=require("buffer").Buffer.isBuffer;function Ji(r){return Object.prototype.toString.call(r)}});var _m=_((JC,ku)=>{typeof Object.create=="function"?ku.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:ku.exports=function(e,t){if(t){e.super_=t;var s=function(){};s.prototype=t.prototype,e.prototype=new s,e.prototype.constructor=e}}});var Gs=_((XC,Du)=>{try{if(Ru=require("util"),typeof Ru.inherits!="function")throw"";Du.exports=Ru.inherits}catch{Du.exports=_m()}var Ru});var Rm=_((ZC,km)=>{km.exports=Array.isArray||function(r){return Object.prototype.toString.call(r)=="[object Array]"}});var Ou=_(Nm=>{var Dm=require("buffer").Buffer,gS=Dm.isEncoding||function(r){switch(r&&r.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function fS(r){if(r&&!gS(r))throw new Error("Unknown encoding: "+r)}var Nu=Nm.StringDecoder=function(r){switch(this.encoding=(r||"utf8").toLowerCase().replace(/[-_]/,""),fS(r),this.encoding){case"utf8":this.surrogateSize=3;break;case"ucs2":case"utf16le":this.surrogateSize=2,this.detectIncompleteChar=bS;break;case"base64":this.surrogateSize=3,this.detectIncompleteChar=IS;break;default:this.write=SS;return}this.charBuffer=new Dm(6),this.charReceived=0,this.charLength=0};Nu.prototype.write=function(r){for(var e="";this.charLength;){var t=r.length>=this.charLength-this.charReceived?this.charLength-this.charReceived:r.length;if(r.copy(this.charBuffer,this.charReceived,0,t),this.charReceived+=t,this.charReceived<this.charLength)return"";r=r.slice(t,r.length),e=this.charBuffer.slice(0,this.charLength).toString(this.encoding);var n=e.charCodeAt(e.length-1);if(n>=55296&&n<=56319){this.charLength+=this.surrogateSize,e="";continue}if(this.charReceived=this.charLength=0,r.length===0)return e;break}this.detectIncompleteChar(r);var s=r.length;this.charLength&&(r.copy(this.charBuffer,0,r.length-this.charReceived,s),s-=this.charReceived),e+=r.toString(this.encoding,0,s);var s=e.length-1,n=e.charCodeAt(s);if(n>=55296&&n<=56319){var i=this.surrogateSize;return this.charLength+=i,this.charReceived+=i,this.charBuffer.copy(this.charBuffer,i,0,i),r.copy(this.charBuffer,0,0,i),e.substring(0,s)}return e};Nu.prototype.detectIncompleteChar=function(r){for(var e=r.length>=3?3:r.length;e>0;e--){var t=r[r.length-e];if(e==1&&t>>5==6){this.charLength=2;break}if(e<=2&&t>>4==14){this.charLength=3;break}if(e<=3&&t>>3==30){this.charLength=4;break}}this.charReceived=e};Nu.prototype.end=function(r){var e="";if(r&&r.length&&(e=this.write(r)),this.charReceived){var t=this.charReceived,s=this.charBuffer,n=this.encoding;e+=s.slice(0,t).toString(n)}return e};function SS(r){return r.toString(this.encoding)}function bS(r){this.charReceived=r.length%2,this.charLength=this.charReceived?2:0}function IS(r){this.charReceived=r.length%3,this.charLength=this.charReceived?3:0}});var Wm=_((tE,jm)=>{jm.exports=Z;var vS=Rm(),Xi=require("buffer").Buffer;Z.ReadableState=Gm;var Zi=require("events").EventEmitter;Zi.listenerCount||(Zi.listenerCount=function(r,e){return r.listeners(e).length});var Us=require("stream"),Fm=Fs();Fm.inherits=Gs();var Kr;Fm.inherits(Z,Us);function Gm(r,e){r=r||{};var t=r.highWaterMark;this.highWaterMark=t||t===0?t:16*1024,this.highWaterMark=~~this.highWaterMark,this.buffer=[],this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=!1,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.calledRead=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.objectMode=!!r.objectMode,this.defaultEncoding=r.defaultEncoding||"utf8",this.ranOut=!1,this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,r.encoding&&(Kr||(Kr=Ou().StringDecoder),this.decoder=new Kr(r.encoding),this.encoding=r.encoding)}function Z(r){if(!(this instanceof Z))return new Z(r);this._readableState=new Gm(r,this),this.readable=!0,Us.call(this)}Z.prototype.push=function(r,e){var t=this._readableState;return typeof r=="string"&&!t.objectMode&&(e=e||t.defaultEncoding,e!==t.encoding&&(r=new Xi(r,e),e="")),Um(this,t,r,e,!1)};Z.prototype.unshift=function(r){var e=this._readableState;return Um(this,e,r,"",!0)};function Um(r,e,t,s,n){var i=wS(e,t);if(i)r.emit("error",i);else if(t==null)e.reading=!1,e.ended||CS(r,e);else if(e.objectMode||t&&t.length>0)if(e.ended&&!n){var o=new Error("stream.push() after EOF");r.emit("error",o)}else if(e.endEmitted&&n){var o=new Error("stream.unshift() after end event");r.emit("error",o)}else e.decoder&&!n&&!s&&(t=e.decoder.write(t)),e.length+=e.objectMode?1:t.length,n?e.buffer.unshift(t):(e.reading=!1,e.buffer.push(t)),e.needReadable&&eo(r),ES(r,e);else n||(e.reading=!1);return yS(e)}function yS(r){return!r.ended&&(r.needReadable||r.length<r.highWaterMark||r.length===0)}Z.prototype.setEncoding=function(r){Kr||(Kr=Ou().StringDecoder),this._readableState.decoder=new Kr(r),this._readableState.encoding=r};var Om=8388608;function xS(r){if(r>=Om)r=Om;else{r--;for(var e=1;e<32;e<<=1)r|=r>>e;r++}return r}function Lm(r,e){return e.length===0&&e.ended?0:e.objectMode?r===0?0:1:r===null||isNaN(r)?e.flowing&&e.buffer.length?e.buffer[0].length:e.length:r<=0?0:(r>e.highWaterMark&&(e.highWaterMark=xS(r)),r>e.length?e.ended?e.length:(e.needReadable=!0,0):r)}Z.prototype.read=function(r){var e=this._readableState;e.calledRead=!0;var t=r,s;if((typeof r!="number"||r>0)&&(e.emittedReadable=!1),r===0&&e.needReadable&&(e.length>=e.highWaterMark||e.ended))return eo(this),null;if(r=Lm(r,e),r===0&&e.ended)return s=null,e.length>0&&e.decoder&&(s=qu(r,e),e.length-=s.length),e.length===0&&Fu(this),s;var n=e.needReadable;return e.length-r<=e.highWaterMark&&(n=!0),(e.ended||e.reading)&&(n=!1),n&&(e.reading=!0,e.sync=!0,e.length===0&&(e.needReadable=!0),this._read(e.highWaterMark),e.sync=!1),n&&!e.reading&&(r=Lm(t,e)),r>0?s=qu(r,e):s=null,s===null&&(e.needReadable=!0,r=0),e.length-=r,e.length===0&&!e.ended&&(e.needReadable=!0),e.ended&&!e.endEmitted&&e.length===0&&Fu(this),s};function wS(r,e){var t=null;return!Xi.isBuffer(e)&&typeof e!="string"&&e!==null&&e!==void 0&&!r.objectMode&&(t=new TypeError("Invalid non-string/buffer chunk")),t}function CS(r,e){if(e.decoder&&!e.ended){var t=e.decoder.end();t&&t.length&&(e.buffer.push(t),e.length+=e.objectMode?1:t.length)}e.ended=!0,e.length>0?eo(r):Fu(r)}function eo(r){var e=r._readableState;e.needReadable=!1,!e.emittedReadable&&(e.emittedReadable=!0,e.sync?process.nextTick(function(){qm(r)}):qm(r))}function qm(r){r.emit("readable")}function ES(r,e){e.readingMore||(e.readingMore=!0,process.nextTick(function(){TS(r,e)}))}function TS(r,e){for(var t=e.length;!e.reading&&!e.flowing&&!e.ended&&e.length<e.highWaterMark&&(r.read(0),t!==e.length);)t=e.length;e.readingMore=!1}Z.prototype._read=function(r){this.emit("error",new Error("not implemented"))};Z.prototype.pipe=function(r,e){var t=this,s=this._readableState;switch(s.pipesCount){case 0:s.pipes=r;break;case 1:s.pipes=[s.pipes,r];break;default:s.pipes.push(r);break}s.pipesCount+=1;var n=(!e||e.end!==!1)&&r!==process.stdout&&r!==process.stderr,i=n?a:c;s.endEmitted?process.nextTick(i):t.once("end",i),r.on("unpipe",o);function o(C){C===t&&c()}function a(){r.end()}var l=MS(t);r.on("drain",l);function c(){r.removeListener("close",d),r.removeListener("finish",p),r.removeListener("drain",l),r.removeListener("error",u),r.removeListener("unpipe",o),t.removeListener("end",a),t.removeListener("end",c),(!r._writableState||r._writableState.needDrain)&&l()}function u(C){f(),r.removeListener("error",u),Zi.listenerCount(r,"error")===0&&r.emit("error",C)}!r._events||!r._events.error?r.on("error",u):vS(r._events.error)?r._events.error.unshift(u):r._events.error=[u,r._events.error];function d(){r.removeListener("finish",p),f()}r.once("close",d);function p(){r.removeListener("close",d),f()}r.once("finish",p);function f(){t.unpipe(r)}return r.emit("pipe",t),s.flowing||(this.on("readable",Lu),s.flowing=!0,process.nextTick(function(){Gu(t)})),r};function MS(r){return function(){var e=this,t=r._readableState;t.awaitDrain--,t.awaitDrain===0&&Gu(r)}}function Gu(r){var e=r._readableState,t;e.awaitDrain=0;function s(n,i,o){var a=n.write(t);a===!1&&e.awaitDrain++}for(;e.pipesCount&&(t=r.read())!==null;)if(e.pipesCount===1?s(e.pipes,0,null):Bm(e.pipes,s),r.emit("data",t),e.awaitDrain>0)return;if(e.pipesCount===0){e.flowing=!1,Zi.listenerCount(r,"data")>0&&to(r);return}e.ranOut=!0}function Lu(){this._readableState.ranOut&&(this._readableState.ranOut=!1,Gu(this))}Z.prototype.unpipe=function(r){var e=this._readableState;if(e.pipesCount===0)return this;if(e.pipesCount===1)return r&&r!==e.pipes?this:(r||(r=e.pipes),e.pipes=null,e.pipesCount=0,this.removeListener("readable",Lu),e.flowing=!1,r&&r.emit("unpipe",this),this);if(!r){var t=e.pipes,s=e.pipesCount;e.pipes=null,e.pipesCount=0,this.removeListener("readable",Lu),e.flowing=!1;for(var n=0;n<s;n++)t[n].emit("unpipe",this);return this}var n=AS(e.pipes,r);return n===-1?this:(e.pipes.splice(n,1),e.pipesCount-=1,e.pipesCount===1&&(e.pipes=e.pipes[0]),r.emit("unpipe",this),this)};Z.prototype.on=function(r,e){var t=Us.prototype.on.call(this,r,e);if(r==="data"&&!this._readableState.flowing&&to(this),r==="readable"&&this.readable){var s=this._readableState;s.readableListening||(s.readableListening=!0,s.emittedReadable=!1,s.needReadable=!0,s.reading?s.length&&eo(this,s):this.read(0))}return t};Z.prototype.addListener=Z.prototype.on;Z.prototype.resume=function(){to(this),this.read(0),this.emit("resume")};Z.prototype.pause=function(){to(this,!0),this.emit("pause")};function to(r,e){var t=r._readableState;if(t.flowing)throw new Error("Cannot switch to old mode now.");var s=e||!1,n=!1;r.readable=!0,r.pipe=Us.prototype.pipe,r.on=r.addListener=Us.prototype.on,r.on("readable",function(){n=!0;for(var i;!s&&(i=r.read())!==null;)r.emit("data",i);i===null&&(n=!1,r._readableState.needReadable=!0)}),r.pause=function(){s=!0,this.emit("pause")},r.resume=function(){s=!1,n?process.nextTick(function(){r.emit("readable")}):this.read(0),this.emit("resume")},r.emit("readable")}Z.prototype.wrap=function(r){var e=this._readableState,t=!1,s=this;r.on("end",function(){if(e.decoder&&!e.ended){var o=e.decoder.end();o&&o.length&&s.push(o)}s.push(null)}),r.on("data",function(o){if(e.decoder&&(o=e.decoder.write(o)),!(e.objectMode&&o==null)&&!(!e.objectMode&&(!o||!o.length))){var a=s.push(o);a||(t=!0,r.pause())}});for(var n in r)typeof r[n]=="function"&&typeof this[n]>"u"&&(this[n]=function(o){return function(){return r[o].apply(r,arguments)}}(n));var i=["error","close","destroy","pause","resume"];return Bm(i,function(o){r.on(o,s.emit.bind(s,o))}),s._read=function(o){t&&(t=!1,r.resume())},s};Z._fromList=qu;function qu(r,e){var t=e.buffer,s=e.length,n=!!e.decoder,i=!!e.objectMode,o;if(t.length===0)return null;if(s===0)o=null;else if(i)o=t.shift();else if(!r||r>=s)n?o=t.join(""):o=Xi.concat(t,s),t.length=0;else if(r<t[0].length){var a=t[0];o=a.slice(0,r),t[0]=a.slice(r)}else if(r===t[0].length)o=t.shift();else{n?o="":o=new Xi(r);for(var l=0,c=0,u=t.length;c<u&&l<r;c++){var a=t[0],d=Math.min(r-l,a.length);n?o+=a.slice(0,d):a.copy(o,l,0,d),d<a.length?t[0]=a.slice(d):t.shift(),l+=d}}return o}function Fu(r){var e=r._readableState;if(e.length>0)throw new Error("endReadable called on non-empty stream");!e.endEmitted&&e.calledRead&&(e.ended=!0,process.nextTick(function(){!e.endEmitted&&e.length===0&&(e.endEmitted=!0,r.readable=!1,r.emit("end"))}))}function Bm(r,e){for(var t=0,s=r.length;t<s;t++)e(r[t],t)}function AS(r,e){for(var t=0,s=r.length;t<s;t++)if(r[t]===e)return t;return-1}});var Xm=_((rE,Jm)=>{Jm.exports=ft;var ro=require("buffer").Buffer;ft.WritableState=$m;var Km=Fs();Km.inherits=Gs();var Hm=require("stream");Km.inherits(ft,Hm);function PS(r,e,t){this.chunk=r,this.encoding=e,this.callback=t}function $m(r,e){r=r||{};var t=r.highWaterMark;this.highWaterMark=t||t===0?t:16*1024,this.objectMode=!!r.objectMode,this.highWaterMark=~~this.highWaterMark,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1;var s=r.decodeStrings===!1;this.decodeStrings=!s,this.defaultEncoding=r.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(n){LS(e,n)},this.writecb=null,this.writelen=0,this.buffer=[],this.errorEmitted=!1}function ft(r){var e=Uu();if(!(this instanceof ft)&&!(this instanceof e))return new ft(r);this._writableState=new $m(r,this),this.writable=!0,Hm.call(this)}ft.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe. Not readable."))};function _S(r,e,t){var s=new Error("write after end");r.emit("error",s),process.nextTick(function(){t(s)})}function kS(r,e,t,s){var n=!0;if(!ro.isBuffer(t)&&typeof t!="string"&&t!==null&&t!==void 0&&!e.objectMode){var i=new TypeError("Invalid non-string/buffer chunk");r.emit("error",i),process.nextTick(function(){s(i)}),n=!1}return n}ft.prototype.write=function(r,e,t){var s=this._writableState,n=!1;return typeof e=="function"&&(t=e,e=null),ro.isBuffer(r)?e="buffer":e||(e=s.defaultEncoding),typeof t!="function"&&(t=function(){}),s.ended?_S(this,s,t):kS(this,s,r,t)&&(n=DS(this,s,r,e,t)),n};function RS(r,e,t){return!r.objectMode&&r.decodeStrings!==!1&&typeof e=="string"&&(e=new ro(e,t)),e}function DS(r,e,t,s,n){t=RS(e,t,s),ro.isBuffer(t)&&(s="buffer");var i=e.objectMode?1:t.length;e.length+=i;var o=e.length<e.highWaterMark;return o||(e.needDrain=!0),e.writing?e.buffer.push(new PS(t,s,n)):zm(r,e,i,t,s,n),o}function zm(r,e,t,s,n,i){e.writelen=t,e.writecb=i,e.writing=!0,e.sync=!0,r._write(s,n,e.onwrite),e.sync=!1}function NS(r,e,t,s,n){t?process.nextTick(function(){n(s)}):n(s),r._writableState.errorEmitted=!0,r.emit("error",s)}function OS(r){r.writing=!1,r.writecb=null,r.length-=r.writelen,r.writelen=0}function LS(r,e){var t=r._writableState,s=t.sync,n=t.writecb;if(OS(t),e)NS(r,t,s,e,n);else{var i=Ym(r,t);!i&&!t.bufferProcessing&&t.buffer.length&&FS(r,t),s?process.nextTick(function(){Vm(r,t,i,n)}):Vm(r,t,i,n)}}function Vm(r,e,t,s){t||qS(r,e),s(),t&&Qm(r,e)}function qS(r,e){e.length===0&&e.needDrain&&(e.needDrain=!1,r.emit("drain"))}function FS(r,e){e.bufferProcessing=!0;for(var t=0;t<e.buffer.length;t++){var s=e.buffer[t],n=s.chunk,i=s.encoding,o=s.callback,a=e.objectMode?1:n.length;if(zm(r,e,a,n,i,o),e.writing){t++;break}}e.bufferProcessing=!1,t<e.buffer.length?e.buffer=e.buffer.slice(t):e.buffer.length=0}ft.prototype._write=function(r,e,t){t(new Error("not implemented"))};ft.prototype.end=function(r,e,t){var s=this._writableState;typeof r=="function"?(t=r,r=null,e=null):typeof e=="function"&&(t=e,e=null),typeof r<"u"&&r!==null&&this.write(r,e),!s.ending&&!s.finished&&GS(this,s,t)};function Ym(r,e){return e.ending&&e.length===0&&!e.finished&&!e.writing}function Qm(r,e){var t=Ym(r,e);return t&&(e.finished=!0,r.emit("finish")),t}function GS(r,e,t){e.ending=!0,Qm(r,e),t&&(e.finished?process.nextTick(t):r.once("finish",t)),e.ended=!0}});var Uu=_((sE,tg)=>{tg.exports=Hr;var US=Object.keys||function(r){var e=[];for(var t in r)e.push(t);return e},Zm=Fs();Zm.inherits=Gs();var eg=Wm(),Bu=Xm();Zm.inherits(Hr,eg);jS(US(Bu.prototype),function(r){Hr.prototype[r]||(Hr.prototype[r]=Bu.prototype[r])});function Hr(r){if(!(this instanceof Hr))return new Hr(r);eg.call(this,r),Bu.call(this,r),r&&r.readable===!1&&(this.readable=!1),r&&r.writable===!1&&(this.writable=!1),this.allowHalfOpen=!0,r&&r.allowHalfOpen===!1&&(this.allowHalfOpen=!1),this.once("end",BS)}function BS(){this.allowHalfOpen||this._writableState.ended||process.nextTick(this.end.bind(this))}function jS(r,e){for(var t=0,s=r.length;t<s;t++)e(r[t],t)}});var ig=_((nE,ng)=>{ng.exports=Ut;var ju=Uu(),sg=Fs();sg.inherits=Gs();sg.inherits(Ut,ju);function WS(r,e){this.afterTransform=function(t,s){return VS(e,t,s)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null}function VS(r,e,t){var s=r._transformState;s.transforming=!1;var n=s.writecb;if(!n)return r.emit("error",new Error("no writecb in Transform class"));s.writechunk=null,s.writecb=null,t!=null&&r.push(t),n&&n(e);var i=r._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&r._read(i.highWaterMark)}function Ut(r){if(!(this instanceof Ut))return new Ut(r);ju.call(this,r);var e=this._transformState=new WS(r,this),t=this;this._readableState.needReadable=!0,this._readableState.sync=!1,this.once("finish",function(){typeof this._flush=="function"?this._flush(function(s){rg(t,s)}):rg(t)})}Ut.prototype.push=function(r,e){return this._transformState.needTransform=!1,ju.prototype.push.call(this,r,e)};Ut.prototype._transform=function(r,e,t){throw new Error("not implemented")};Ut.prototype._write=function(r,e,t){var s=this._transformState;if(s.writecb=t,s.writechunk=r,s.writeencoding=e,!s.transforming){var n=this._readableState;(s.needTransform||n.needReadable||n.length<n.highWaterMark)&&this._read(n.highWaterMark)}};Ut.prototype._read=function(r){var e=this._transformState;e.writechunk!==null&&e.writecb&&!e.transforming?(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform)):e.needTransform=!0};function rg(r,e){if(e)return r.emit("error",e);var t=r._writableState,s=r._readableState,n=r._transformState;if(t.length)throw new Error("calling transform done when ws.length != 0");if(n.transforming)throw new Error("calling transform done when still transforming");return r.push(null)}});var ag=_((iE,og)=>{og.exports=ig()});var cg=_((oE,lg)=>{lg.exports=HS;var KS=Object.prototype.hasOwnProperty;function HS(){for(var r={},e=0;e<arguments.length;e++){var t=arguments[e];for(var s in t)KS.call(t,s)&&(r[s]=t[s])}return r}});var pg=_((aE,so)=>{var ug=ag(),dg=require("util").inherits,hg=cg();function $r(r){ug.call(this,r),this._destroyed=!1}dg($r,ug);$r.prototype.destroy=function(r){if(!this._destroyed){this._destroyed=!0;var e=this;process.nextTick(function(){r&&e.emit("error",r),e.emit("close")})}};function $S(r,e,t){t(null,r)}function Wu(r){return function(e,t,s){return typeof e=="function"&&(s=t,t=e,e={}),typeof t!="function"&&(t=$S),typeof s!="function"&&(s=null),r(e,t,s)}}so.exports=Wu(function(r,e,t){var s=new $r(r);return s._transform=e,t&&(s._flush=t),s});so.exports.ctor=Wu(function(r,e,t){function s(n){if(!(this instanceof s))return new s(n);this.options=hg(r,n),$r.call(this,this.options)}return dg(s,$r),s.prototype._transform=e,t&&(s.prototype._flush=t),s});so.exports.obj=Wu(function(r,e,t){var s=new $r(hg({objectMode:!0,highWaterMark:16},r));return s._transform=e,t&&(s._flush=t),s})});var gg=_((lE,ir)=>{var zS=Qi()("regedit"),mg=ir.exports.WIN_EOL=`\r
`;ir.exports.encode=function(r){return escape(r)+mg};ir.exports.writeArrayToStream=function(r,e,t){var s=r.pop();function n(i){var o=ir.exports.encode(i);return zS(o),e.write(o)&&r.length>0}for(;n(s);)s=r.pop();if(r.length===0){e.write(mg,t);return}e.once("drain",function(){ir.exports.writeArrayToStream(r,e,t)})};ir.exports.vbsOutputTransform=function(r,e,t){try{e==="buffer"?r=r.toString():r=r.toString(e),this.push(JSON.parse(r))}catch(s){return t(s)}return t()}});var Vu=_((cE,Sg)=>{var fg=require("child_process");Sg.exports=function(r){return r=r||{},function(){var t=fg.execFile.apply(fg,arguments);return r.bufferStdout||t.stdout.removeAllListeners("data"),r.bufferStderr||t.stderr.removeAllListeners("data"),t}}});var yg=_((dE,vg)=>{var uE=require("util");vg.exports=js;var Ku=0,Bs=1;function js(){var r=io(arguments),e=YS,t=Ku;if(r.length===0)throw new Error("at least one predicate and one consequent are required");r.length===1?t=Bs:r.length%2===1&&(e=r.pop());var s=function(){if(t!==Ku)throw new Error("missing at least one consequent, you forgot to call then() ?");var n=arguments,i=n[n.length-1];if(typeof i!="function")throw new Error("missing callback argument");var o=r.shift();if(!o)return e.apply(null,n);var a=r.shift(),l=io(n);l.pop(),l.push(c),o.apply(null,l);function c(u,d){if(u)return i(u);if(d)return a.apply(null,n);s.apply(null,n)}};return s.then=function(n){if(t!==Bs)throw new Error("not expecting a then() call now");return t=Ku,r.push(n),s},s.and=function(n){var i=r.pop();return r.push(js(i).then(n).else(Ig)),s},s.and.not=function(n){return s.and(no(n))},s.or=function(n){var i=r.pop();return r.push(js(i).then(bg).elseIf(n).then(bg).else(Ig)),s},s.or.not=function(n){return s.or(no(n))},s.else=function(n){if(t===Bs)throw new Error("only then() may be called after elseIf()");return e=n,s},s.elseif=s.elseIf=function(n){if(t===Bs)throw new Error("only then() may be called after elseIf()");return r.push(n),t=Bs,s},s.elseif.not=function(n){return s.elseIf(no(n))},s}js.not=function(r){if(typeof r!="function")throw new Error("argument must be a predicate function");return js(no(r))};function no(r){return function(){var e=io(arguments),t=e.pop();if(typeof t!="function")throw new Error("expected a callback but instead got "+typeof t);e.push(function(s,n){t(s,!n)}),r.apply(null,e)}}function YS(){var r=io(arguments),e=r.pop();if(r.unshift(null),typeof e!="function")throw new Error("expected a callback function");setImmediate(function(){e.apply(null,r)})}function bg(){var r=arguments[arguments.length-1];if(typeof r!="function")throw new Error("expected a callback function");r(null,!0)}function Ig(){var r=arguments[arguments.length-1];if(typeof r!="function")throw new Error("expected a callback function");r(null,!1)}function io(r){return Array.prototype.slice.call(r,0)}});var Cg=_((hE,ar)=>{var xg,Hu,oo,or,Ws;function wg(){Ws=!1,xg=yg(),Hu=require("fs"),oo=Vu()({bufferStdout:!0,bufferStderr:!0}),or=Qi()("regedit:cscript")}wg();var QS=ar.exports.CSCRIPT_NOT_FOUND="INFO: Could not find files for the given pattern(s).",JS=ar.exports.CSCRIPT_EXPECTED_OUTPUT="Microsoft (R) Windows Script Host Version",Vs="cscript.exe";function XS(r){or("spawnCScriptSucceeded()"),oo("cscript.exe",function(e,t){if(e)return e.code==="ENOENT"?r(null,!1):r(e);Vs="cscript.exe",r(null,t.indexOf(JS)>-1)})}function ZS(r){or("whereCScriptSucceeded()"),oo("where cscript.exe",function(e,t){if(e)return e.code==="ENOENT"?r(null,!1):r(e);if(typeof t!="string"||t.indexOf(QS)>-1)return r(null,!1);Vs=t.trim(),r(null,!0)})}function e2(r){or("fsStatCScriptSucceeded()"),Hu.stat("c:\\windows\\system32\\cscript.exe",function(e){if(e)return e.code==="ENOENT"?r(null,!1):r(e);Vs="c:\\windows\\system32\\cscript.exe",r(null,!0)})}function t2(r){r(new Error("cscript not found"))}ar.exports.path=function(){if(Ws===!1)throw new Error("must initialize first");return or(Vs),Vs};ar.exports.init=function(r){if(or("init()"),Ws)return or("already initialized"),setImmediate(r);var e=xg(XS).or(ZS).or(e2).then(function(t){Ws=!0,t()}).else(t2);e(function(t){if(t)return r(t);r()})};ar.exports._mock=function(r,e,t){Hu=r,oo=e,Ws=t};ar.exports._mockReset=wg});var _g=_((pE,w)=>{var r2=require("fs"),$u=require("util"),s2=require("child_process"),Eg=require("path"),Yr=Qi()("regedit"),zr=Tm(),Tg=Pm(),Mg=pg(),lr=gg(),zu=Vu()(),Bt=Cg(),Ae="A",Be="S",je="32",We="64",ao;function n2(r,e){let t;r.once("error",function(s){Yr("process error %s",s),t=s}),r.once("close",function(s){if(Yr("process exit with code %d",s),t)return t.code in zr?e(zr[t.code]):e(t);if(s!==0)return s in zr?e(zr[s]):e(new Error("vbscript process reported unknown error code "+s));e()})}function Ag(r,e){if(typeof e!="function")throw new Error("missing callback");Yr(r),Bt.init(function(t){if(t)return e(t);s2.execFile(Bt.path(),r,function(s,n,i){if(s)return n&&console.log(n),i&&console.error(i),s.code in zr?e(zr[s.code]):e(s);if(i)return e(new Error(i));if(!n)return e();Yr(n);let o;s=null;try{o=JSON.parse(n)}catch(a){a.stdout=n,s=a}e(s,o)})})}function lo(r,e,t){Bt.init(function(s){if(s)return t(s);Yr(r);let n=zu(Bt.path(),r,{encoding:"utf8"});n2(n,t),lr.writeArrayToStream(e,n.stdin)})}function i2(r,e){switch(e=e.toUpperCase(),e){case"REG_NONE":return r===""?"\0":r;case"REG_BINARY":if(!$u.isArray(r))throw new Error("invalid value type "+typeof r+" for registry type REG_BINARY, please use an array of numbers");return r.join(",");case"REG_MULTI_SZ":if(!$u.isArray(r))throw new Error("invalid value type "+typeof r+" for registry type REG_BINARY, please use an array of strings");return r.join(",");case"REG_SZ":return r===""?"\0":r;default:return r}}function cr(r,e){let t;return ao&&typeof ao=="string"?t=ao:t=Eg.join(__dirname,"vbs"),["//Nologo",Eg.join(t,r),e]}function Pg(r,e,t){let s=cr(r,e);return typeof t=="string"?s.push(t):$u.isArray(t)?s=s.concat(t):Yr("creating command without using keys %s",t||""),s}w.exports.setExternalVBSLocation=function(r){return r2.existsSync(r)?(ao=r,"Folder found and set"):"Folder not found"};w.exports.list=function(r,e,t){if(e===void 0?(t=void 0,e=Ae):typeof e=="function"&&(t=e,e=Ae),typeof r=="string"&&(r=[r]),typeof t=="function"){Ag(Pg("regList.wsf",e,r),t);return}let s=Mg.obj(lr.vbsOutputTransform);return Bt.init(function(n){if(n)return s.emit("error",n);let i=cr("regListStream.wsf",e),o=zu(Bt.path(),i,{encoding:"utf8"},function(l){l&&s.emit("error",l)});o.stderr.pipe(process.stderr);let a=new Tg({sliceBy:lr.WIN_EOL});o.stdout.pipe(a).pipe(s),lr.writeArrayToStream(r,o.stdin)}),s};w.exports.createKey=function(r,e,t){typeof e=="function"&&(t=e,e=Ae),typeof r=="string"&&(r=[r]);let s=cr("regCreateKey.wsf",e);lo(s,r,t)};w.exports.deleteKey=function(r,e,t){typeof e=="function"&&(t=e,e=Ae),typeof r=="string"&&(r=[r]);let s=cr("regDeleteKey.wsf",e);lo(s,r,t)};w.exports.deleteValue=function(r,e,t){typeof e=="function"&&(t=e,e=Ae),typeof r=="string"&&(r=[r]);var s=cr("regDeleteValue.wsf",e);lo(s,r,t)};w.exports.putValue=function(r,e,t){typeof e=="function"&&(t=e,e=Ae);let s=cr("regPutValue.wsf",e),n=[];for(let i in r)if(r.hasOwnProperty(i)){let o=r[i];for(let a in o)if(o.hasOwnProperty(a)){let l=o[a];n.push(l.type),n.push(i2(l.value,l.type)),n.push(a),n.push(i)}}lo(s,n,t)};w.exports.listUnexpandedValues=function(r,e,t){if(e===void 0?(t=void 0,e=Ae):typeof e=="function"&&(t=e,e=Ae),typeof r=="string"&&(r=[r]),typeof t=="function"){Ag(Pg("wsRegReadList.wsf",e,r),t);return}let s=Mg.obj(lr.vbsOutputTransform);return Bt.init(function(n){if(n)return s.emit("error",n);let i=cr("wsRegReadListStream.wsf",e),o=zu(Bt.path(),i,{encoding:"utf8"},function(l){l&&s.emit("error",l)});o.stderr.pipe(process.stderr);let a=new Tg({sliceBy:lr.WIN_EOL});o.stdout.pipe(a).pipe(s),lr.writeArrayToStream(r,o.stdin)}),s};w.exports.promisified={list:function(r,e=Ae){return new Promise(function(t,s){w.exports.list(r,e,function(n,i){return n?s(n):t(i)})})},listUnexpandedValues:function(r,e=Ae){return new Promise(function(t,s){w.exports.listUnexpandedValues(r,e,function(n,i){return n?s(n):t(i)})})},createKey:function(r,e=Ae){return new Promise(function(t,s){w.exports.createKey(r,e,function(n){return n?s(n):t()})})},deleteKey:function(r,e=Ae){return new Promise(function(t,s){w.exports.deleteKey(r,e,function(n){return n?s(n):t()})})},deleteValue:function(r,e=Ae){return new Promise(function(t,s){w.exports.deleteValue(r,e,function(n){return n?s(n):t()})})},putValue:function(r,e=Ae){return new Promise(function(t,s){w.exports.putValue(r,e,function(n){return n?s(n):t()})})}};w.exports.arch={};w.exports.arch.list=function(r,e){return w.exports.list(r,Be,e)};w.exports.arch.list32=function(r,e){return w.exports.list(r,je,e)};w.exports.arch.list64=function(r,e){return w.exports.list(r,We,e)};w.exports.arch.listUnexpandedValues=function(r,e){return w.exports.listUnexpandedValues(r,Be,e)};w.exports.arch.listUnexpandedValues32=function(r,e){return w.exports.listUnexpandedValues(r,je,e)};w.exports.arch.listUnexpandedValues64=function(r,e){return w.exports.listUnexpandedValues(r,We,e)};w.exports.arch.createKey=function(r,e){return w.exports.createKey(r,Be,e)};w.exports.arch.createKey32=function(r,e){return w.exports.createKey(r,je,e)};w.exports.arch.createKey64=function(r,e){return w.exports.createKey(r,We,e)};w.exports.arch.deleteKey=function(r,e){return w.exports.deleteKey(r,Be,e)};w.exports.arch.deleteKey32=function(r,e){return w.exports.deleteKey(r,je,e)};w.exports.arch.deleteKey64=function(r,e){return w.exports.deleteKey(r,We,e)};w.exports.arch.deleteValue=function(r,e){return w.exports.deleteValue(r,Be,e)};w.exports.arch.deleteValue32=function(r,e){return w.exports.deleteValue(r,je,e)};w.exports.arch.deleteValue64=function(r,e){return w.exports.deleteValue(r,We,e)};w.exports.arch.putValue=function(r,e){return w.exports.putValue(r,Be,e)};w.exports.arch.putValue32=function(r,e){return w.exports.putValue(r,je,e)};w.exports.arch.putValue64=function(r,e){return w.exports.putValue(r,We,e)};w.exports.arch.promisified={list:function(r){return w.exports.promisified.list(r,Be)},list32:function(r){return w.exports.promisified.list(r,je)},list64:function(r){return w.exports.promisified.list(r,We)},listUnexpandedValues:function(r){return w.exports.promisified.listUnexpandedValues(r,Be)},listUnexpandedValues32:function(r){return w.exports.promisified.listUnexpandedValues(r,je)},listUnexpandedValues64:function(r){return w.exports.promisified.listUnexpandedValues(r,We)},createKey:function(r){return w.exports.promisified.createKey(r,Be)},createKey32:function(r){return w.exports.promisified.createKey(r,je)},createKey64:function(r){return w.exports.promisified.createKey(r,We)},deleteKey:function(r){return w.exports.promisified.deleteKey(r,Be)},deleteKey32:function(r){return w.exports.promisified.deleteKey(r,je)},deleteKey64:function(r){return w.exports.promisified.deleteKey(r,We)},deleteValue:function(r){return w.exports.promisified.deleteValue(r,Be)},deleteValue32:function(r){return w.exports.promisified.deleteValue(r,je)},deleteValue64:function(r){return w.exports.promisified.deleteValue(r,We)},putValue:function(r){return w.exports.promisified.putValue(r,Be)},putValue32:function(r){return w.exports.promisified.putValue(r,je)},putValue64:function(r){return w.exports.promisified.putValue(r,We)}}});var g2={};Bg(g2,{activate:()=>h2,deactivate:()=>p2,printChannelOutput:()=>Re,showStatusText:()=>Vi,statusBarItem:()=>hr,taskOutputChannel:()=>Ot});module.exports=jg(g2);var M=require("vscode"),Ju=k(require("child_process"),1),Hs=require("fs"),Xu=require("path"),$s=require("os");var Ys=class r{constructor(e){this.hub=e;e.register("job",this.addJob)}static offeringTime=30;static announceInterval=100;pendingRequests=[];announceTimer;watchDog;announcePromise;nextJobId=0;addJob=e=>(this.pendingRequests.push(...e.map(t=>({...t,jobId:this.nextJobId}))),++this.nextJobId,this.announceTimer||(this.announceTimer=setInterval(this.announceRequest,r.announceInterval)),Promise.resolve(!0));announceRequest=()=>{if(!this.announcePromise&&this.pendingRequests.length>0){let e=this.pendingRequests[0];this.announcePromise=this.hub.execute(e.requestType,e.parameter),this.announcePromise.then(t=>{t?this.removeTopRequest():this.announcePromise=void 0}).catch(t=>{console.error(t),this.removeTopRequest()}),this.watchDog||(this.watchDog=setTimeout(()=>{this.cancelCurrentJob()},r.offeringTime*1e3))}};removeTopRequest=()=>{this.watchDog&&(clearTimeout(this.watchDog),this.watchDog=void 0),this.announcePromise=void 0,this.pendingRequests.shift(),this.pendingRequests.length===0&&this.announceTimer&&(clearInterval(this.announceTimer),this.announceTimer=void 0)};cancelCurrentJob=()=>{if(this.watchDog)clearTimeout(this.watchDog),this.watchDog=void 0;else return;this.announcePromise=void 0;let e=this.pendingRequests.shift();if(e)for(;this.pendingRequests.length>0&&this.pendingRequests[0].jobId===e.jobId;)this.pendingRequests.shift();this.pendingRequests.length===0&&this.announceTimer&&(clearInterval(this.announceTimer),this.announceTimer=void 0)}};var re=new Map,Wg=()=>{typeof window<"u"&&window.location.search.substring(1).split("&").forEach(e=>{let t=e.split("=");if(t.length>1){if(re.set(t[0],t[1]),t[0]==="app")re.embedded=!0;else if(t[0]==="fontSize"){let s=parseInt(t[1],10);isNaN(s)||(re.fontSize=s)}else if(t[0]==="editorFontSize"){let s=parseInt(t[1],10);isNaN(s)||(re.editorFontSize=s)}}}),process.env.NODE_ENV==="test"?re.testsRunning=!0:process.env.NODE_ENV==="development"&&(re.inDevelopment=!0),process.env.VSCODE_PID!==void 0&&process.env.JEST_WORKER_ID===void 0&&(re.inExtension=!0)},jt=class r{registry=new Map;remoteTarget;source;requestPipeline;constructor(e="app"){this.source=e,this.requestPipeline=new Ys(this),this.setRemoteTarget()}static get instance(){return new r}setRemoteTarget(e){if(e)this.remoteTarget=e;else if(typeof window<"u"){if(window.webkit)this.remoteTarget=window.webkit.messageHandlers.hostChannel;else{let t=window.chrome;t&&t.webview&&(this.remoteTarget=t.webview)}this.remoteTarget?window.onNativeMessage=t=>{this.handleRemoteMessage(t)}:(this.remoteTarget=window.parent,window.addEventListener("message",t=>{t.data.source!=="app"&&this.handleRemoteMessage(t.data)}),re.embedded&&(document.addEventListener("keydown",t=>{let s={source:this.source,command:"keydown",altKey:t.altKey,code:t.code,ctrlKey:t.ctrlKey,isComposing:t.isComposing,key:t.key,location:t.location,metaKey:t.metaKey,repeat:t.repeat,shiftKey:t.shiftKey};window.parent.postMessage(s,"*")}),document.addEventListener("keyup",t=>{let s={type:"keyup",altKey:t.altKey,code:t.code,ctrlKey:t.ctrlKey,isComposing:t.isComposing,key:t.key,location:t.location,metaKey:t.metaKey,repeat:t.repeat,shiftKey:t.shiftKey};window.parent.postMessage(s,"*")})))}}register=(e,t)=>{if(!this.registry.has(e))this.registry.set(e,[t]);else{let s=this.registry.get(e);s.findIndex(i=>i===t)===-1&&s.unshift(t)}};unregister=(e,t)=>{if(!e){this.registry.clear();return}let s=this.registry.get(e);if(s){let n=s.filter(i=>i!==t);n.length>0?this.registry.set(e,n):this.registry.delete(e)}};registrations=e=>this.registry.get(e)?.length??0;execute=async(e,t)=>{let s=this.registry.get(e);if(s){let n=[];s.forEach(o=>{n.push(o(t))});let i=await Promise.all(n);return Promise.resolve(i.some(o=>o))}return Promise.resolve(!1)};executeRemote=(e,t)=>{if(this.remoteTarget){if(this.remoteTarget.postMessage){let s={source:this.source,command:e,data:t};this.remoteTarget.postMessage(s,"*")}else this.remoteTarget.broadcastRequest&&this.remoteTarget.broadcastRequest(void 0,e,t);return!0}return!1};broadcastRequest=async(e,t,s)=>{let n=!1;return e||(n||=await this.execute(t,s)),this.remoteTarget?.broadcastRequest?(await this.remoteTarget.broadcastRequest(e,t,s),n=!0):n||=this.executeRemote(t,s),n};handleRemoteMessage(e){let t=e.command,s=e.data,n=this.registry.get(t);n&&n.forEach(i=>{i(s)})}writeToClipboard(e){if(re.embedded){let t={source:this.source,command:"writeClipboard",text:e};this.remoteTarget?.postMessage?.(t,"*")}else navigator.clipboard.writeText(e)}};Wg();var b=jt.instance;var cd=k(require("child_process"),1),Xr=k(require("fs"),1),pr=k(require("path"),1),on=k(require("net"),1),tt=k(require("os"),1);var ed=r=>r<1024?`${r.toFixed(2)} B`:(r/=1024,r<1014?`${r.toFixed(2)} KB`:(r/=1024,r<1024?`${r.toFixed(2)} MB`:(r/=1024,`${r.toFixed(2)} GB`)));var Wt=r=>/^[-+]?(\d+|Infinity)$/.test(r)?Number(r):NaN,Qs=r=>r.includes("_")||r.includes("-")?r.toLowerCase().replace(/([-_][a-z])/g,e=>e.toUpperCase().replace("-","").replace("_","")):r;var Vg=r=>r.length<1?"":r.charAt(0).toUpperCase()+r.slice(1);var td=r=>(r=r.replace(/[^\d\w,]/g,""),r.includes("_")&&(r=Qs(r)),Vg(r)),ho=r=>(r.startsWith("/")&&(r=r.slice(1)),r.replaceAll("/","_"),r.replace(/([-_][a-z])/g,e=>e.toUpperCase().replace("-","").replace("_","")));var rd=(r,e)=>Qr(r,e?.ignore??[],(t,s)=>s.replace(/([a-z])([A-Z])/g,(i,o,a)=>`${o}_${a.toLowerCase()}`)),sd=(r,e)=>Qr(r,e?.ignore??[],(t,s)=>s.replace(/_([a-z0-9])/gi,(n,i)=>i.toUpperCase())),nd=(r,e)=>{let t=r.split("."),s=e.split("."),n=Math.min(t.length,s.length);for(let i=0;i<n;++i){let o=parseInt(t[i],10),a=parseInt(s[i],10);if(o>a)return 1;if(o<a)return-1}return t.length===s.length?0:t.length<s.length?-1:1};var Q=()=>{let r=new Date().getTime(),e=performance&&performance.now&&performance.now()*1e3||0;return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,t=>{let s=Math.random()*16;return r>0?(s=(r+s)%16|0,r=Math.floor(r/16)):(s=(e+s)%16|0,e=Math.floor(e/16)),(t==="x"?s:s&7|8).toString(16)})};var Kg=r=>new Promise(e=>setTimeout(e,r)),Js=async(r,e)=>{for(;!e()&&r>0;)r-=100,await Kg(100);return r>0};var Qr=(r,e,t)=>{let s={};for(let[n,i]of Object.entries(r)){let o=i;e.includes(n)||(Array.isArray(i)?o=id(i,e,t):i!==null&&typeof i=="object"&&(o=Qr(i,e,t))),s[t(i,n)]=o}return s},id=(r,e,t)=>r.map(s=>Array.isArray(s)?id(s,e,t):s!==null&&typeof s=="object"?Qr(s,e,t):s);var od=["gui.core.list_files","gui.db.get_schema_object_names","gui.dbconnections.list_db_connections","gui.modules.get_profile_data_tree","gui.shell.complete","gui.sqleditor.execute","gui.db.get_catalog_object_names","gui.db.get_table_object_names"];var Xs=class{get backendInformation(){return(async()=>{let e=await h.get.sendRequest({requestType:"gui.core.get_backend_information",parameters:{}});return{architecture:e.result.architecture,major:Wt(e.result.major),minor:Wt(e.result.minor),patch:Wt(e.result.patch),platform:e.result.platform,serverDistribution:e.result.serverDistribution,serverMajor:Wt(e.result.serverMajor),serverMinor:Wt(e.result.serverMinor),serverPatch:Wt(e.result.serverPatch)}})()}async getLogLevel(){return(await h.get.sendRequest({requestType:"gui.core.get_log_level",parameters:{}})).result}async setLogLevel(e){await h.get.sendRequest({requestType:"gui.core.set_log_level",parameters:{args:{logLevel:e}}})}async getDbTypes(){return(await h.get.sendRequest({requestType:"gui.dbconnections.get_db_types",parameters:{}})).result}async validatePath(e){try{return await h.get.sendRequest({requestType:"gui.core.validate_path",parameters:{args:{path:e}}}),!0}catch{return!1}}async createDatabaseFile(e){await h.get.sendRequest({requestType:"gui.core.create_file",parameters:{args:{path:e}}})}async getDebuggerScriptNames(){return(await h.get.sendRequest({requestType:"gui.debugger.get_scripts",parameters:{}})).result}async getDebuggerScriptContent(e){return(await h.get.sendRequest({requestType:"gui.debugger.get_script_content",parameters:{args:{path:e}}})).result}};var Zs=class{id="dbConnection";async addDbConnection(e,t,s=""){return(await h.get.sendRequest({requestType:"gui.dbconnections.add_db_connection",parameters:{args:{profileId:e,connection:{dbType:t.dbType,caption:t.caption,description:t.description,options:t.options},folderPath:s}}})).result}async updateDbConnection(e,t,s=""){await h.get.sendRequest({requestType:"gui.dbconnections.update_db_connection",parameters:{args:{profileId:e,connectionId:t.id,connection:{dbType:t.dbType,caption:t.caption,description:t.description,options:t.options},folderPath:s}}})}async removeDbConnection(e,t){await h.get.sendRequest({requestType:"gui.dbconnections.remove_db_connection",parameters:{args:{profileId:e,connectionId:t}}})}async listDbConnections(e,t=""){let s=await h.get.sendRequest({requestType:"gui.dbconnections.list_db_connections",parameters:{args:{profileId:e,folderPath:t}}}),n=[];return s.forEach(i=>{n.push(...i.result)}),n}async getDbConnection(e){return(await h.get.sendRequest({requestType:"gui.dbconnections.get_db_connection",parameters:{args:{dbConnectionId:e}}})).result}};var en=class{scriptCategoryToLanguage=new Map([[4,"mysql"],[5,"python"],[6,"javascript"],[7,"typescript"],[8,"sql"],[3,"json"]]);languageToScriptCategory=new Map([["mysql",4],["python",5],["javascript",6],["typescript",7],["sql",8],["json",3]]);async addData(e,t,s,n,i,o){return(await h.get.sendRequest({requestType:"gui.modules.add_data",parameters:{args:{caption:e,content:t,dataCategoryId:s,treeIdentifier:n,folderPath:i,profileId:o}}})).result}async listData(e,t){return(await h.get.sendRequest({requestType:"gui.modules.list_data",parameters:{args:{folderId:e,dataCategoryId:t}}})).result}async getDataContent(e){return(await h.get.sendRequest({requestType:"gui.modules.get_data_content",parameters:{args:{id:e}}})).result}async createProfileDataTree(e,t){await h.get.sendRequest({requestType:"gui.modules.create_profile_data_tree",parameters:{args:{treeIdentifier:e,profileId:t}}})}async getProfileDataTree(e,t){let s=await h.get.sendRequest({requestType:"gui.modules.get_profile_data_tree",parameters:{args:{treeIdentifier:e,profileId:t}}}),n=[];return s.forEach(i=>{n.push(...i.result)}),n}async createUserGroupDataTree(e,t){await h.get.sendRequest({requestType:"gui.modules.create_user_group_data_tree",parameters:{args:{treeIdentifier:e,userGroupId:t}}})}async getUserGroupDataTree(e,t){await h.get.sendRequest({requestType:"gui.modules.get_user_group_data_tree",parameters:{args:{treeIdentifier:e,userGroupId:t}}})}async getProfileDataTreeIdentifiers(e){await h.get.sendRequest({requestType:"gui.modules.get_profile_tree_identifiers",parameters:{args:{profileId:e}}})}async shareDataToUserGroup(e,t,s,n,i){await h.get.sendRequest({requestType:"gui.modules.share_data_to_user_group",parameters:{args:{id:e,userGroupId:t,readOnly:s,treeIdentifier:n,folderPath:i}}})}async addDataToProfile(e,t,s,n,i){await h.get.sendRequest({requestType:"gui.modules.add_data_to_profile",parameters:{args:{id:e,profileId:t,readOnly:s,treeIdentifier:n,folderPath:i}}})}async updateData(e,t,s){await h.get.sendRequest({requestType:"gui.modules.update_data",parameters:{args:{id:e,caption:t,content:s}}})}async deleteData(e,t){await h.get.sendRequest({requestType:"gui.modules.delete_data",parameters:{args:{id:e,folderId:t}}})}async listDataCategories(e){return(await h.get.sendRequest({requestType:"gui.modules.list_data_categories",parameters:{args:{categoryId:e}}})).result}async addDataCategory(e,t){await h.get.sendRequest({requestType:"gui.modules.add_data_category",parameters:{args:{name:e,parentCategoryId:t}}})}async removeDataCategory(e){await h.get.sendRequest({requestType:"gui.modules.remove_data_category",parameters:{args:{categoryId:e}}})}scriptTypeFromLanguage(e){return this.languageToScriptCategory.get(e)}async loadScriptsTree(e){return this.loadScriptTreeEntries(2,e)}async loadScriptTreeEntries(e,t){let s=await this.getProfileDataTree("scripts",t),n=async(o,a)=>{let l=s.filter((c,u,d)=>c.parentFolderId===o?(d.splice(u,1),!0):!1);for await(let c of l){let u=await this.loadScriptStates(c.id,e);await n(c.id,u),a.push({id:"",folderId:o,dbDataId:c.id,caption:c.caption,children:u,type:2})}},i=[];if(s.length>0&&s[0].caption==="scripts"){let o=s.shift();if(o){let a=await this.loadScriptStates(o.id,e);i.push(...a),await n(o.id,i)}}return i}loadScriptStates=async(e,t)=>{let s=[],n=await this.listData(e,t);return s.push(...n.map(i=>{let o=this.scriptCategoryToLanguage.get(i.dataCategoryId)??"mysql";return{id:Q(),folderId:e,type:1,caption:i.caption,language:o,dbDataId:i.id}})),s}};var tn=class{async authenticate(e,t){let s=await h.get.sendRequest({requestType:"authenticate",parameters:{username:e,password:t}},!1);return R.userName=e,R.userId=s.activeProfile.userId,R.loadProfile(s.activeProfile),s.activeProfile}async createUser(e,t,s,n){await h.get.sendRequest({requestType:"gui.users.create_user",parameters:{args:{username:e,password:t,role:s,allowedHosts:n}}})}async getDefaultProfile(e){let t=await h.get.sendRequest({requestType:"gui.users.get_default_profile",parameters:{args:{userId:e}}});if(!Array.isArray(t))return t.result}async setDefaultProfile(e,t){await h.get.sendRequest({requestType:"gui.users.set_default_profile",parameters:{args:{userId:e,profileId:t}}})}async getGuiModuleList(e){let t=await h.get.sendRequest({requestType:"gui.users.get_gui_module_list",parameters:{args:{userId:e}}});return Array.isArray(t)?Promise.resolve([]):Promise.resolve(t.result)}async getProfile(e){let t=await h.get.sendRequest({requestType:"gui.users.get_profile",parameters:{args:{profileId:e}}});if(!Array.isArray(t))return Promise.resolve(t.result)}async addProfile(e){return(await h.get.sendRequest({requestType:"gui.users.add_profile",parameters:{args:{userId:e.userId,profile:e}}})).result}async updateProfile(e){let t=await h.get.sendRequest({requestType:"gui.users.update_profile",parameters:{args:{profile:e}}});if(!Array.isArray(t))return Promise.resolve(t.result)}async deleteProfile(e){await h.get.sendRequest({requestType:"gui.users.delete_profile",parameters:{args:{userId:e.userId,profileId:e.id}}})}async grantRole(e,t){await h.get.sendRequest({requestType:"gui.users.grant_role",parameters:{args:{username:e,role:t}}})}async listProfiles(e){return(await h.get.sendRequest({requestType:"gui.users.list_profiles",parameters:{args:{userId:e}}})).result}async listRolePrivileges(e){await h.get.sendRequest({requestType:"gui.users.list_role_privileges",parameters:{args:{role:e}}})}async listRoles(){await h.get.sendRequest({requestType:"gui.users.list_roles",parameters:{}})}async listUserPrivileges(e){await h.get.sendRequest({requestType:"gui.users.list_user_privileges",parameters:{args:{username:e}}})}async listUserRoles(e){await h.get.sendRequest({requestType:"gui.users.list_user_roles",parameters:{args:{username:e}}})}async listUsers(){await h.get.sendRequest({requestType:"gui.users.list_users",parameters:{}})}async setCurrentProfile(e){await h.get.sendRequest({requestType:"gui.users.set_current_profile",parameters:{args:{profileId:e}}})}async storePassword(e,t){await h.get.sendRequest({requestType:"gui.dbconnections.set_credential",parameters:{args:{url:e,password:t}}})}async clearPassword(e){await h.get.sendRequest({requestType:"gui.dbconnections.delete_credential",parameters:{args:{url:e}}})}async listCredentials(){await h.get.sendRequest({requestType:"gui.dbconnections.list_credentials",parameters:{}})}};var Se=class r{static interfaces={};static get core(){return r.interfaces.core||(r.interfaces.core=new Xs),r.interfaces.core}static get users(){return r.interfaces.users||(r.interfaces.users=new tn),r.interfaces.users}static get modules(){return r.interfaces.modules||(r.interfaces.modules=new en),r.interfaces.modules}static get dbConnections(){return r.interfaces.dbConnections||(r.interfaces.dbConnections=new Zs),r.interfaces.dbConnections}};var rn=class{set(e,t){let s="";s=`${e}=${t??""}`,typeof document<"u"&&(document.cookie=s)}get(e){if(typeof document>"u"||!document.cookie)return null;let t=document.cookie.split(";").find(s=>s.split("=")[0].trim()===e);if(t){let s=t.split("=");return s.length===1?s[0]:s[1].trim()}return null}remove(e){typeof document<"u"&&(document.cookie=e+"=; Max-Age=0;")}clear(){if(typeof document<"u")for(let e of document.cookie.split(";"))this.remove(e.split("=")[0].trim())}};var mo=class r{localUserMode=!1;cookies=new rn;shellProfile={description:"",id:-1,name:"",userId:-1,options:{}};sessionData;constructor(){this.clearSessionData()}static get instance(){return new r}get userId(){return this.sessionData.userId}set userId(e){this.sessionData.userId=e,this.writeSessionData()}get userName(){return this.sessionData.userName}set userName(e){this.sessionData.userName=e,this.writeSessionData()}get profile(){return this.shellProfile}set profile(e){this.loadProfile(e),this.saveProfile()}get currentProfileId(){return this.shellProfile.id}get sessionId(){return this.sessionData.sessionId}set sessionId(e){this.cookies.clear(),this.sessionData.sessionId=e,e&&this.cookies.set("SessionId",e),this.cookies.set("SameSite","None"),this.cookies.set("Secure")}clearSessionData(){this.sessionData={sessionId:"",userName:"",profileId:-1,userId:-1,moduleSessionId:{}}}moduleSessionId(e){return this.sessionData.moduleSessionId[e]}setModuleSessionId(e,t){t?this.sessionData.moduleSessionId[e]=t:delete this.sessionData.moduleSessionId[e]}loadProfile(e){this.shellProfile=e,this.sessionData.profileId=e.id,this.sessionData.userId=e.userId,this.writeSessionData(),b.execute("profileLoaded",void 0)}saveProfile(){Se.users.updateProfile(this.shellProfile).then(()=>{}).catch(e=>{b.execute("showError",["Profile Update Error",String(e)])})}writeSessionData(){process.env.VSCODE_PID}},R=mo.instance;var sn=class extends Error{constructor(t){super(t.requestState.msg);this.info=t}};var h=class r{static instance;static multiResultList=od;socket;debugging=!1;disconnecting=!1;reconnectTimer;reconnectTimeout=1e3;ongoingRequests=new Map;#e=!1;static get get(){return r.instance||(r.instance=this.createInstance()),r.instance}constructor(){}static createInstance(){return new r}get isConnected(){return this.socket?this.socket.readyState===this.socket.OPEN:!1}set inDebugCall(e){this.debugging=e}set traceEnabled(e){this.#e=e}get traceEnabled(){return this.#e}connect(e){if(this.disconnecting=!1,this.socket&&(this.socket.readyState===this.socket.OPEN||this.socket.readyState===this.socket.CONNECTING))return Promise.resolve();{let t=new URL(e.url);return t.protocol=e.url.protocol.replace("http","ws"),t.pathname="ws1.ws",re.inDevelopment&&(t.port="8000"),new Promise((s,n)=>{let i=this.createWebSocket(t,e);i.addEventListener("close",this.onClose.bind(this,e)),i.addEventListener("message",this.onMessage),i.addEventListener("open",this.onOpen.bind(this,s)),i.addEventListener("error",this.onError.bind(this,e,n)),this.socket=i})}}disconnect(){if(this.socket)try{this.disconnecting=!0,this.socket.close(),delete this.socket,this.socket=void 0}catch(e){console.error("Internal error while closing websocket: "+String(e))}}sendRequest(e,t=!0,s=[]){return this.constructAndSendRequest(t,s,{...e})}sendRawRequest(e,t){return e.request_id=e.request_id??Q(),new Promise((s,n)=>{this.traceEnabled&&b.execute("debugger",{request:e});let i={protocolType:"native",result:[],resolve:s,reject:n,onData:t};this.ongoingRequests.set(e.request_id,i),this.socket?.send(JSON.stringify(e))})}createWebSocket(e,t){return new WebSocket(e)}onMessage=e=>{let t=this.convertDataToResponse(e.data);if(t){if(this.isWebSessionData(t)&&!this.debugging)b.execute("webSessionStarted",t);else if(t.requestId){let s=this.ongoingRequests.get(t.requestId);if(s){let n=s;switch(t.eventType){case 2:{n.onData?n.onData(t,t.requestId):n.result.push(t);break}case 3:{r.multiResultList.includes(s.protocolType)?(n.result.push(t),n.resolve(n.result)):n.resolve(t);break}case 4:{this.ongoingRequests.delete(t.requestId),r.multiResultList.includes(s.protocolType)||n.result.length===0?n.resolve(n.result):n.resolve(n.result[0]);break}case-2:{this.ongoingRequests.delete(t.requestId),n.reject(new sn(t));break}case-3:{this.ongoingRequests.delete(t.requestId),n.resolve([]);break}default:}}}}};constructAndSendRequest(e,t,s){let n=s.requestId??Q();return new Promise((i,o)=>{let a={requestId:n,request:e?"execute":s.requestType,command:e?s.requestType:void 0,...s.parameters};t=t.concat(["rows"]);let l=rd(a,{ignore:t});this.traceEnabled&&b.execute("debugger",{request:l});let c={protocolType:s.requestType,result:[],resolve:i,reject:o,onData:s.onData};this.ongoingRequests.set(n,c),this.socket?.send(JSON.stringify(l))})}onOpen=e=>{this.reconnectTimer&&(clearTimeout(this.reconnectTimer),this.reconnectTimer=null),this.reconnectTimeout=1e3,b.execute("socketStateChanged",!0).then(()=>{e()})};onClose=e=>{R.clearSessionData(),b.execute("socketStateChanged",!1),!this.disconnecting&&!this.debugging&&(this.reconnectTimer&&clearTimeout(this.reconnectTimer),this.reconnectTimer=setTimeout(()=>{this.connect(e)},this.reconnectTimeout))};onError=(e,t,s)=>{t(JSON.stringify(s,void 0,4)),this.reconnectTimeout*=2,this.reconnectTimer&&(this.reconnectTimer=setTimeout(()=>{this.connect(e)},this.reconnectTimeout)),b.execute("showError",["Communication Error",`Could not establish a connection to the backend. Make sure you use valid user credentials and the MySQL Shell is running. Trying to reconnect in ${this.reconnectTimeout/1e3} seconds.`])};convertDataToResponse=e=>{if(!e||typeof e!="string")return;let t=JSON.parse(e);this.traceEnabled&&b.execute("debugger",{response:t});let s=sd(t,{ignore:["rows"]});switch(s.requestState.type){case"ERROR":{s.eventType=-2;break}case"PENDING":{s.requestState.msg==="Execution started..."?s.eventType=1:s.eventType=2;break}case"OK":{s.done?s.eventType=4:s.eventType=3;break}case"CANCELLED":{s.eventType=-3;break}default:{s.eventType=0;break}}return s};isErrorInfo(e){return"result"in e?typeof e.result.info=="string":!1}isWebSessionData(e){return e.sessionUuid!==void 0}};var nn=k(require("path"),1),ld=k(require("fs"),1),Jr=r=>{if(nn.default.isAbsolute(r)||r.includes("/")||r.includes("\\"))return r;let e=process.env.PATH??"",t=process.env.PATHEXT??"",s=e.replace(/["]+/g,"").split(nn.default.delimiter).filter(Boolean),n=t.split(";"),i=s.flatMap(o=>n.map(a=>nn.default.join(o,r+a)));for(let o of i)if(ld.default.existsSync(o))return o;return""};var Le=class r{constructor(e,t,s){this.onOutput=e;this.onError=t;this.onExit=s}static extensionShellUserConfigFolderBaseName="mysqlsh-gui";shellProcess;launchDetails={port:0,singleUserToken:""};static getShellUserConfigDir=e=>{let t;return t=process.env.MYSQLSH_GUI_CUSTOM_CONFIG_DIR??"",t.length===0&&(t=re.get("shellUserConfigDir")??""),(t.length===0||!Xr.default.existsSync(t))&&(e?tt.default.platform()==="win32"?t=pr.default.join(tt.default.homedir(),"AppData","Roaming","MySQL","mysqlsh"):t=pr.default.join(tt.default.homedir(),".mysqlsh"):tt.default.platform()==="win32"?t=pr.default.join(tt.default.homedir(),"AppData","Roaming","MySQL",r.extensionShellUserConfigFolderBaseName):t=pr.default.join(tt.default.homedir(),`.${r.extensionShellUserConfigFolderBaseName}`)),t};static runMysqlShell=e=>{let t=r.getShellPath(e.rootPath),s=r.getShellUserConfigDir(e.inDevelopment),n=t.startsWith(e.rootPath)?"embedded ":"";e.onStdOutData(`Starting ${n}MySQL Shell, using config dir '${s}' ...`),Xr.default.existsSync(s)||Xr.default.mkdirSync(s,{recursive:!0});let i=cd.default.spawn(t,e.parameters,{env:{...process.env,LOG_LEVEL:e.logLevel,MYSQLSH_USER_CONFIG_HOME:s,MYSQLSH_TERM_COLOR_MODE:"nocolor"}});i.stdin&&e.processInput&&(i.stdin.setDefaultEncoding("utf-8"),i.stdin.write(`${e.processInput}
`),i.stdin.end());let o=l=>{e.onStdOutData(l.toString())};i.stdout?.on("data",o);let a=l=>{e.onError?.(new Error(`Error while starting MySQL Shell: ${l.message}`))};if(i.on("error",a),e.onStdErrData){let l=c=>{e.onStdErrData?.(c.toString())};i.stderr.on("data",l)}else i.stderr?.on("data",o);return e.onExit&&i.on("exit",e.onExit),i};static findFreePort=()=>new Promise((e,t)=>{let s=on.createServer(),n=!1;s.on("error",i=>{s.close(),n||(n=!0,t(i))}),s.listen(0,()=>{let i=s.address();!i||typeof i=="string"||i.port===0?t(new Error("Unable to get a port for the backend")):(s.close(),n||(n=!0,e(i.port)))})});static getShellPath=e=>{let t=pr.default.join(e,"shell","bin","mysqlsh");return tt.default.platform()==="win32"&&(t+=".exe"),Xr.default.existsSync(t)||(tt.default.platform()==="win32"?t=Jr("mysqlsh"):t="mysqlsh"),t};static checkPort=e=>new Promise((t,s)=>{let n=new on.Socket;n.on("timeout",()=>{n.destroy(),t(!1)}),n.on("connect",()=>{n.destroy(),t(!0)}),n.on("error",i=>{i.code!=="ECONNREFUSED"?s(i):t(!1)}),n.connect(e,"0.0.0.0")});exitProcess(){return new Promise(e=>{let t=()=>{this.shellProcess=void 0,this.launchDetails={port:0,singleUserToken:""},e()};this.shellProcess?.pid?(this.shellProcess.on("close",t),this.shellProcess.kill()):t()})}startShellAndConnect=(e,t,s,n="INFO",i,o)=>{if(i){let a=new URL(i);try{h.get.connect({url:new URL(i)}).then(()=>{this.launchDetails.port=Number(a.port??8e3),this.launchDetails.singleUserToken=a.searchParams.get("token")??"",b.execute("connectedToUrl",a)}).catch(l=>{this.onOutput(`Could not establish websocket connection: ${String(l)}`),b.execute("connectedToUrl",void 0)})}catch(l){this.onOutput("Error while parsing the external URL string: "+String(l)),b.execute("connectedToUrl",void 0)}}else{let a=l=>{this.launchDetails.singleUserToken=Q(),this.launchDetails.port=l;let c=s?"secure={}, ":"",u=["--no-defaults","--py","-e",`gui.start.web_server(port=${this.launchDetails.port}, ${c}read_token_on_stdin=True)`],d=p=>{if(p.includes("Mode: Single user")){let f=s?"https":"http",C="localhost";re.testsRunning&&!re.inExtension&&(C="127.0.0.1");let x=new URL(`${f}://${C}:${l}/?token=${this.launchDetails.singleUserToken}`),E={url:x,shellConfigDir:r.getShellUserConfigDir(t)};o?(this.onOutput("Establishing the port forwarding session to remote ssh server..."),o(x).then(N=>{h.get.connect(E).then(()=>{b.execute("connectedToUrl",N)}).catch(z=>{this.onError(new Error(`Could not establish websocket connection: ${String(z)}`)),b.execute("connectedToUrl",void 0)})}).catch(N=>{this.onError(new Error(`Could not establish the port forwarding: ${String(N)}`))})):h.get.connect(E).then(()=>{b.execute("connectedToUrl",x)}).catch(N=>{this.onError(new Error(`Could not establish websocket connection: ${String(N)}`)),b.execute("connectedToUrl",void 0),setTimeout(()=>{this.exitProcess()},0)})}this.onOutput(p)};this.shellProcess=r.runMysqlShell({rootPath:e,inDevelopment:t,logLevel:n,parameters:u,onStdOutData:d,onError:this.onError,onExit:this.onExit,processInput:this.launchDetails.singleUserToken})};if(re.testsRunning)a(Math.floor(Math.random()*2e4)+2e4);else{let l=33336;if(process.env.MYSQLSH_GUI_CUSTOM_PORT!==void 0){let c=parseInt(process.env.MYSQLSH_GUI_CUSTOM_PORT,10);isNaN(c)?console.log("MYSQLSH_GUI_CUSTOM_PORT is not a number, using 33336."):l=c}r.checkPort(l).then(c=>{c?(this.onOutput("Finding free port..."),r.findFreePort().then(u=>{a(u)}).catch(u=>{u instanceof Error?this.onError(u):this.onError(new Error(String(u)))})):a(l)})}}}};var O=require("vscode");var mr=class{async getMdsConfigProfiles(e){return(await h.get.sendRequest({requestType:"mds.list.config_profiles",parameters:{kwargs:{configFilePath:e}}})).result}async setDefaultConfigProfile(e){await h.get.sendRequest({requestType:"mds.set.default_config_profile",parameters:{args:{profileName:e}}})}async getMdsCompartments(e,t){return(await h.get.sendRequest({requestType:"mds.list.compartments",parameters:{kwargs:{configProfile:e,compartmentId:t}}})).result}async getMdsMySQLDbSystems(e,t){return(await h.get.sendRequest({requestType:"mds.list.db_systems",parameters:{kwargs:{configProfile:e,compartmentId:t}}})).result}async getMdsMySQLDbSystem(e,t){return(await h.get.sendRequest({requestType:"mds.get.db_system",parameters:{kwargs:{configProfile:e,dbSystemId:t}}})).result}async getMdsComputeInstances(e,t){return(await h.get.sendRequest({requestType:"mds.list.compute_instances",parameters:{kwargs:{configProfile:e,compartmentId:t}}})).result}async getMdsBastions(e,t,s){return(await h.get.sendRequest({requestType:"mds.list.bastions",parameters:{kwargs:{configProfile:e,compartmentId:t,validForDbSystemId:s}}})).result}async getMdsBastion(e,t){return(await h.get.sendRequest({requestType:"mds.get.bastion",parameters:{kwargs:{configProfile:e,bastionId:t}}})).result}async createBastion(e,t,s){return(await h.get.sendRequest({requestType:"mds.create.bastion",parameters:{kwargs:{configProfile:e,dbSystemId:t,awaitActiveState:s}}})).result}async createBastionSession(e,t,s,n,i,o){return(await h.get.sendRequest({requestType:"mds.create.bastion_session",parameters:{kwargs:{configProfile:e,targetId:t,sessionType:s,compartmentId:n,awaitCreation:i}},onData:o})).result}async listLoadBalancers(e,t){return(await h.get.sendRequest({requestType:"mds.list.load_balancers",parameters:{kwargs:{configProfile:e,compartmentId:t}}})).result}async setCurrentCompartment(e){await h.get.sendRequest({requestType:"mds.set.current_compartment",parameters:{kwargs:e}})}async setCurrentBastion(e){await h.get.sendRequest({requestType:"mds.set.current_bastion",parameters:{kwargs:e}})}async listDbSystemShapes(e,t,s){return(await h.get.sendRequest({requestType:"mds.list.db_system_shapes",parameters:{kwargs:{configProfile:t,isSupportedFor:e,compartmentId:s}}})).result}async listComputeShapes(e,t){return(await h.get.sendRequest({requestType:"mds.list.compute_shapes",parameters:{kwargs:{configProfile:e,compartmentId:t}}})).result}};var bt=class{mds=new mr;moduleSessionLookupId="";constructor(e){e&&(this.moduleSessionLookupId="shellSession.temporary",R.setModuleSessionId(this.moduleSessionLookupId,e))}get hasSession(){return this.moduleSessionId!==void 0}async startShellSession(e,t,s,n,i){if(this.moduleSessionLookupId=`shellSession.${e}`,this.hasSession)return;let o=await h.get.sendRequest({requestType:"gui.shell.start_session",requestId:n,parameters:{args:{dbConnectionId:t,shellArgs:s}},onData:i});return o.result?.moduleSessionId&&R.setModuleSessionId(this.moduleSessionLookupId,o.result.moduleSessionId),o.result}async closeShellSession(){let e=this.moduleSessionId;e&&(await h.get.sendRequest({requestType:"gui.shell.close_session",parameters:{args:{moduleSessionId:e}}}),R.setModuleSessionId(this.moduleSessionLookupId))}async execute(e,t,s){let n=this.moduleSessionId;if(n)return(await h.get.sendRequest({requestType:"gui.shell.execute",requestId:t,parameters:{args:{command:e,moduleSessionId:n}},onData:s})).result}async sendReply(e,t,s,n){n=n??this.moduleSessionId,n&&await h.get.sendRequest({requestType:"prompt_reply",parameters:{moduleSessionId:n,requestId:e,type:t,reply:s}},!1)}async getCompletionItems(e,t){let s=this.moduleSessionId;if(s){let n=await h.get.sendRequest({requestType:"gui.shell.complete",parameters:{args:{data:e,offset:t,moduleSessionId:s}}}),i=[];return n.forEach(o=>{o.result&&i.push(o.result)}),i}return[]}get moduleSessionId(){return R.moduleSessionId(this.moduleSessionLookupId)}};var an=class r{constructor(e,t,s){this.caption=e;this.promptCallback=t;this.messageCallback=s;this.currentStatus="pending"}currentStatus;statusCallback;currentProgress;get status(){return this.currentStatus}get percentageDone(){return this.currentProgress}static getCurrentTimeStamp(){return new Date().toISOString().replace("T"," ").slice(0,-1)}setStatusCallback(e){this.statusCallback=e}async runTask(e,t,s){this.setStatus("running"),this.sendMessage(`[${r.getCurrentTimeStamp()}] [INFO] Starting Task: ${this.caption}

`);let n=Q(),i,o=0,a=(l,c)=>{if(l.moduleSessionId&&(i=new bt(l.moduleSessionId)),this.isShellFeedbackRequest(l)&&i)s&&o<s.length?i.sendReply(n,"OK",s[o++]):this.promptCallback(l.prompt,l.type==="password").then(u=>{i&&(u?i.sendReply(n,"OK",u):i.sendReply(n,"CANCEL",""))});else if(this.isShellSimpleResult(l)){if(l.info&&this.statusCallback!==void 0){let u=Array.from(l.info.matchAll(/(\d+)%\scompleted/gm),d=>d[1]);if(u.length>0){let d=parseInt(u[0],10);!isNaN(d)&&this.currentProgress!==d&&(this.currentProgress=d,this.statusCallback(this.currentStatus))}}this.sendMessage(l.info??l.status)}c&&(this.setStatus("done"),this.sendMessage(`
[${r.getCurrentTimeStamp()}] [INFO] Task '${this.caption}' completed successfully.

`),i&&i.closeShellSession())};try{let l=await h.get.sendRequest({requestType:"gui.shell.start_session",requestId:n,parameters:{args:{dbConnectionId:t,shellArgs:e}},onData:c=>{c.result&&a(c.result,!1)}});l.result&&a(l.result,!0)}catch(l){this.currentStatus="error",this.sendMessage(`[${r.getCurrentTimeStamp()}] [ERROR]: ${String(l)}

`),i&&i.closeShellSession()}}setStatus(e){this.currentStatus=e,this.statusCallback?.(e)}sendMessage(e){e&&this.messageCallback(e)}isShellFeedbackRequest(e){return e.type!==void 0}isShellSimpleResult(e){let t=e;return t.info!==void 0||t.error!==void 0||t.note!==void 0||t.promptDescriptor!==void 0||t.status!==void 0||t.warning!==void 0}};var ln={key:"<root>",id:"",title:"<root>",description:"<root>",values:[],children:[]},cn=r=>{let e=r.split("."),t=e.pop();if(!t)throw new Error(`The setting category path "${r}" is invalid.`);let s=ln;do{let n=e.shift();if(!n)break;if(!s.children)throw new Error(`The setting category path "${r}" is invalid.`);let i=s.children.find(o=>o.key===n);if(!i)throw new Error(`The setting category path "${r}" is invalid.`);s=i}while(!0);return[t,s]},rt=(r,e,t)=>{let[s,n]=cn(r);if(n.children&&n.children.find(i=>i.key===s))throw new Error(`Attempt to register an existing setting category (${r}).`);n.children||(n.children=[]),n.children.push({title:e,key:s,id:r,description:t,values:[]})},H=(r,e,t,s,n,i,o={})=>{let[a,l]=cn(r);if(l.values.find(c=>c.key===a))throw new Error(`Attempt to register an existing setting value (${r}).`);l.values.push({key:a,title:e,id:r,description:t,valueType:s,defaultValue:n,advanced:i,parameters:o})},ud=()=>{rt("workers","Background Workers","Settings related to background workers"),H("workers.minWorkerCount","Minimum Background Worker Count","The number of workers that are always available.","number",3,!0),H("workers.maxWorkerCount","Maximum Background Worker Count","The maximum number of workers that are active at the same time.","number",3,!0),H("workers.maxPendingTaskCount","Maximum Number of Waiting Tasks","Describes the highest number of waiting tasks for a free background worker. If this number is exceeded an error is thrown, indicating that the worker pool is overloaded and can no longer cope with incoming work.","number",100,!0),H("workers.removeIdleTime","Delay to Remove Inactive Workers","Specifies the number of seconds that pass until the oldest inactive worker is removed. Has no effect if the current number of active workers fall below the minimal worker count.","number",5,!0),rt("theming","Theme Settings","Values used to theme the application. There is a dedicated editor to change these values."),H("theming.currentTheme","Current Theme","Select the active theme for the current profile.","choice","auto",!1),H("theming.themes","Registered Themes","Themes can be edited in the Theme Editor.","action","Click to Open the Theme Editor",!1,{action:"showThemeEditor"}),H("theming.colorPadColors","Color Pad Colors","","list",[],!1),rt("editor","Code Editor","Settings related to all code editors."),rt("editor.theming","Theming","Settings related to theming."),H("editor.theming.decorationSet","Decoration Set for Code Editor Gutters","Select one of the sets for code-block decoration that results in mixed language code editors.","choice","standard",!1,{choices:[["Standard Set","standard","Includes only a solid marker for editor rows"],["Alternative Set","alternative","Uses a hatch pattern with different colors to separate editor content and result areas"]]}),H("editor.wordWrap","Word Wrapping","Determines how long lines should be wrapped automatically by the editor.","choice","off",!1,{choices:[["Off","off","Lines never wrap"],["On","on","Lines wrap at the viewport width"],["Word Wrap Column","wordWrapColumn",'Lines wrap at "Code Editor: Word Wrap Column"'],["Bounded","bounded",'Lines wrap at the minimum of viewport width or "Code Editor: Word Wrap Column"']]}),H("editor.wordWrapColumn","Word Wrap Column","Controls the column of the editor to wrap long lines when Code Editor: Word Wrap is `wordWrapColumn` or `bounded`.","number",120,!1),H("editor.showHidden","Invisible Characters","When set to true, normally invisible characters (like space or tabulator) are displayed too.","boolean",!1,!1),H("editor.dbVersion","MySQL DB Version","The default version to be used for MySQL language support, if no version is available.","string","8.0.25",!1),H("editor.sqlMode","MySQL SQL Mode","The default SQL mode to be used for MySQL language support, if mode information is not available.","string","",!1),H("editor.stopOnErrors","Stop on Errors","If this option is set, execution of scripts will be stopped if an error occurs. Otherwise, the script execution continues with the next statement.","boolean",!1,!1),H("editor.showMinimap","Show the Minimap","Determines if code editors should show a minimap, instead of the plain scrollbar, for better navigation.","boolean",!0,!1),rt("dbEditor","DB Editor","Settings related to a DB editor"),H("dbEditor.startLanguage","Start Language","Select the initial language for new DB editors.","choice","sql",!1,{choices:[["JavaScript","javascript","Supported in all code editors"],["TypeScript","typescript","Supported only in DB editors"],["Python","python","Supported only in shell session editors"],["SQL","sql","Supported in all code editors"]]}),H("dbEditor.defaultEditor","Default Editor","Select the type of the first editor when opening a DB connection.","choice","notebook",!1,{choices:[["DB Notebook","notebook","A multi-language editor with embedded results"],["MySQL Script","script","A single-language script editor (MySQL)"]]}),H("dbEditor.useMinimap","Use the minimap if globally enabled","Determines if notebooks in the DB editor show a minimap. Only has an effect when mini maps are globally enabled","boolean",!1,!1),H("dbEditor.upperCaseKeywords","Use UPPER case keywords in code completion","When set, keywords shown in code-completion popups appear in all uppercase letters and are inserted as such in the SQL code editors.","boolean",!0,!1),rt("dbEditor.connectionBrowser","Connection Browser","Settings related to the connection overview page in the DB Editor Module"),H("dbEditor.connectionBrowser.showGreeting","Show Greeting","If set, a message section is shown with some useful links.","boolean",!0,!1),rt("sql","SQL Execution","Settings related to how SQL queries are handled"),H("sql.limitRowCount","Result Set Page Size","Determines the size of one page in a result set, but has no effect if a top-level LIMIT clause is specified in the query. Set to 0 to disable auto adding a LIMIT clause and return all records as a single page. However, be cautious with large row counts (> 50000).","number",1e3,!1,{range:[0,1e4]}),H("sql.rowPacketSize","Row Packet Size","Determines the number of result records that are sent in a single response from the backend.","number",1e3,!0),rt("shellSession","Shell Session","Settings related to a shell session"),rt("shellSession.sessionBrowser","Shell Session Browser","Settings related to the shell session overview page in the Shell Session Module"),H("shellSession.sessionBrowser.showGreeting","Show Greeting","If set, a message section is shown with some useful links.","boolean",!0,!1),H("shellSession.startLanguage","Start Language","Select the initial language for a new shell session.","choice","javascript",!1,{choices:[["JavaScript","javascript","Supported in all code editors"],["Python","python","Supported only in shell session editors"],["SQL","sql","Supported in all code editors"]]})};var Qe=class r{static dirty=!1;static values={theming:{themes:[],currentTheme:"Auto"}};static saveTimer;constructor(){}static saveSettings(e=!1){if(!this.dirty&&!e)return;this.dirty=!1;let t=R.profile;t.options=this.values,R.saveProfile(),this.restartAutoSaveTimeout()}static get(e,t){let{target:s,subKey:n}=this.objectForKey(e,!1);return!s||!n?t:s[n]??t}static set(e,t){this.dirty=!0;let{target:s,subKey:n}=this.objectForKey(e,!0);s&&n&&(s[n]=t),b.execute("settingsChanged",{key:e,value:t}),b.executeRemote("settingsChanged",{key:e,value:t})}static objectForKey(e,t){let s=this.values,n=e.split(".");for(this.validatePath(e);n.length>1;){if(s[n[0]])s=s[n[0]];else if(t)s[n[0]]={},s=s[n[0]];else return{target:void 0};n.splice(0,1)}return{target:s,subKey:n[0]}}static validatePath(e){let[t,s]=cn(e);if(!s.values.find(n=>n.key===t))throw new Error(`The settings path ${e} addresses an unregistered setting.`)}static mergeProfileValues=()=>(this.values=Object.assign(this.values,R.profile.options),this.restartAutoSaveTimeout(),b.execute("settingsChanged",void 0));static applicationWillFinish=()=>(this.saveTimer&&clearTimeout(this.saveTimer),b.unregister(void 0,this.mergeProfileValues),b.unregister(void 0,this.applicationWillFinish),this.saveSettings(),Promise.resolve(!0));static restartAutoSaveTimeout(){this.saveTimer&&(clearInterval(this.saveTimer),this.saveTimer=null),this.saveTimer=setTimeout(()=>this.saveSettings(),3e3)}static{ud(),setTimeout(()=>{b.register("profileLoaded",r.mergeProfileValues),b.register("applicationWillFinish",r.applicationWillFinish)},0)}};var dd=require("vscode");var go=k(require("path"),1),dn=require("vscode"),un=class r extends dn.TreeItem{constructor(t,s){super(`${t.caption} (${t.status}${r.percentage(t)})`,dn.TreeItemCollapsibleState.None);this.task=t;let n;switch(t.status){case"running":{n="shellTaskRunning.svg";break}case"done":{n="shellTaskOk.svg";break}case"error":{n="shellTaskError.svg";break}default:n="shellTask.svg"}this.iconPath={light:go.join(__dirname,"..","images","light",n),dark:go.join(__dirname,"..","images","dark",n)},this.command=s}contextValue="shellTask";static percentage(t){return t.percentageDone&&t.status==="running"?` ${String(t.percentageDone)}%`:""}};var hn=class{constructor(e){this.tasks=e}changeEvent=new dd.EventEmitter;get onDidChangeTreeData(){return this.changeEvent.event}dispose(){}refresh(e){this.changeEvent.fire(e)}getTreeItem(e){return e}getChildren(e){return e?Promise.resolve([]):this.tasks.map(t=>{let s=new un(t,{title:"Show Task Output",command:"msg.showTaskOutput"});return t.setStatusCallback(this.statusCallback.bind(s)),s})}statusCallback=(e,t)=>{e&&this.refresh(t)}};var En=require("fs"),fh=require("path");var l0=k(gd(),1),c0=k(To(),1),u0=k(Ao(),1),mh=k(Oo(),1),d0=k(ph(),1);var gh=mh.default;var Cn=class r extends h{static createInstance(){return new r}createWebSocket(e,t){let s;if(t.shellConfigDir){let n=(0,fh.join)(t.shellConfigDir,"plugin_data/gui_plugin/web_certs/rootCA.crt");(0,En.existsSync)(n)&&(s=(0,En.readFileSync)(n))}return new gh(e,{ca:s})}};var Xp=k(require("fs"),1),kr=require("path"),v=require("vscode");var us=require("fs/promises"),De=require("vscode");var T="gui.sqleditor";var Tn="gui.shell";var zt=require("vscode");var Sh=(r,e)=>zt.commands.executeCommand("setContext",r,e),F=(r,e=3e3)=>{zt.window.withProgress({location:zt.ProgressLocation.Notification,title:r,cancellable:!1},async t=>{await Js(e,()=>!1),t.report({increment:100})})},cs=(r,e="OK",t)=>new Promise(s=>{Sh("showsModalDialog",!0);let n={detail:t,modal:!0};zt.window.showInformationMessage(r,n,e).then(i=>{Sh("showsModalDialog",!1),s(i===e)})});var Fo=k(require("path"),1),pe=require("vscode");var qo=require("vscode"),Mn=(r,e)=>{e.searchParams.set("app","vscode");let t=qo.workspace.getConfiguration("editor").get("fontSize",14);e.searchParams.set("editorFontSize",t.toString());let s=new URL(e.toString());s.pathname="/images/no-image.svg";let n=qo.workspace.getConfiguration("msg.shell").get("showUnsecuredConnectionWarning",!0);r.webview.html=`
<!doctype html><html lang="en">
<head>
<meta http-equiv="Content-Security-Policy" content="default-src *; img-src http: https:;
    script-src 'self' 'unsafe-inline' 'unsafe-eval'; style-src 'unsafe-inline' http: https: data: *;">
<style>
    .warning {
        width: 210px;
        height: 50px;
        color: black;
        background: red;
        -webkit-border-radius: 5px;
        -moz-border-radius: 5px;
        position:absolute;
        bottom: 10px;
        right: 10px;
        opacity: 0.5;
        text-align: center;
    }
    .clickThrough {
        pointer-events: none;
    }
    .warning h1 {
        line-height: 20px;
        font-size: 12px;
        font-weight: 500;
        margin: 0px;
    }
    .warning p {
        line-height: 8px;
        font-size: 8px;
        font-weight: 300;
        margin: 0px;
    }
    .warning p a {
        color: white;
    }
    #waitForContent {
        display: none;
        justify-content: center;
        align-items: center;
        text-align: center;
        min-height: 100vh;
    }
    .pingEffect {
        display: inline-block;
        position: relative;
        width: 80px;
        height: 80px;
    }
    .pingEffect div {
        position: absolute;
        border: 4px solid var(--vscode-foreground);
        opacity: 1;
        border-radius: 50%;
        animation: pingEffect 1s cubic-bezier(0, 0.2, 0.8, 1) infinite;
    }
    .pingEffect div:nth-child(2) {
    animation-delay: -0.5s;
    }
    @keyframes pingEffect {
        0% {
            top: 36px;
            left: 36px;
            width: 0;
            height: 0;
            opacity: 1;
        }
        100% {
            top: 0px;
            left: 0px;
            width: 72px;
            height: 72px;
            opacity: 0;
        }
    }
  </style>
  <script>
    // Keep track of whether the waitForContentDiv should still be shown
    let showWaitForContentDiv = true;

    // Hides the waitForContentDiv in case the content was loaded or there was and error
    function hideWaitForContentDiv() {
        showWaitForContentDiv = false;
        document.getElementById("waitForContent").style.display = "none";
    }

    // Displays a floating div panel at the bottom right
    function showFloatingLabel(title, info, clickThrough) {
        var div = document.createElement("div");
        div.classList.add("warning");
        if (clickThrough) {
            div.classList.add("clickThrough");
        }
        var h1 = document.createElement("h1");
        h1.innerHTML = title;
        div.appendChild(h1);
        var p = document.createElement("p");
        p.innerHTML = info;
        div.appendChild(p);
        document.body.appendChild(div);
    }

    // Called when an error occurred while loading the content
    function showLoadingError() {
        hideWaitForContentDiv();

        if ("${e.protocol}" === "https:") {
            showFloatingLabel("Failed to Connect",
                "Please check if you have the<br>" +
                "MySQL Shell rootCA.crt certificate<br>" +
                "<a href='https://dev.mysql.com/doc/mysql-shell-for-vs-code/en/certificate-handling.html'>" +
                "installed</a> on your local system.", false);
        } else {
            showFloatingLabel("Failed to Connect",
                "Unable to connect to MySQL Shell.<br>" +
                "Please check if the MySQL Shell<br>" +
                "process is running.", false);
        }
    }

    // Only display the waitForContentDiv after 1 second to avoid flickering
    setTimeout(() => {
        // If the waitForContentDiv should still be show (content has not loaded yet, or there was an error)
        if (showWaitForContentDiv) {
            document.getElementById("waitForContent").style.display = "flex";
        }
    }, 1000);
  </script>
</head>
<body style="margin:0px;padding:0px;overflow:hidden;">
<!-- Everything is larger in our iframe. Not sure who is to blame for this, but we need to scale it down. -->
<iframe id="frame-msg" onload="hideWaitForContentDiv()" allow="clipboard-read; clipboard-write;"
    src="${e.toString()}"
    frameborder="0" style="overflow: hidden; overflow-x: hidden; overflow-y: hidden; height:100%;
    width: 100%; position: absolute; top: 0px; left: 0px; right: 0px; bottom: 0px; user-select: none;">
</iframe>
<div id="waitForContent"><div class="pingEffect"><div></div><div></div></div></div>
<img src="${s.toString()}" onerror="showLoadingError()"
    width="0" height="0">
<script>
    let frame;
    let vscode;

    window.addEventListener('message', (event) => {
        if (!frame) {
            vscode = acquireVsCodeApi();
            frame = document.getElementById("frame-msg");

            // Listen to style changes on the outer iframe.
            const sendThemeMessage = () => {
                frame.contentWindow.postMessage({
                    source: "host",
                    command: "hostThemeChange",
                    data: { css: document.documentElement.style.cssText, themeClass: document.body.className }
                }, "*");
            };

            const observer = new MutationObserver(sendThemeMessage);
            observer.observe(document.documentElement, { attributes: true, attributeFilter: ["style"] });

            // Send initial theme change message.
            sendThemeMessage();
        }

        if (event.data.source === "host") {
            // Forward message from the extension to the iframe.
            frame.contentWindow.postMessage(event.data, "*");
        } else if (event.data.source === "app") {
            // Forward app events either directly or after a conversion to vscode.
            switch (event.data.command) {
                case "keydown": {
                    window.dispatchEvent(new KeyboardEvent("keydown", event.data));
                    break;
                }
                case "keyup": {
                    window.dispatchEvent(new KeyboardEvent("keyup", event.data));
                    break;
                }
                case "writeClipboard": {
                    // This is a special message and can be handled here.
                    window.navigator.clipboard.writeText(event.data.text);
                    break;
                }
                default: {
                    vscode.postMessage(event.data);
                    break;
                }
            }
        }
    });

    if ("${e.protocol}" !== "https:" && ${String(n)} === true) {
        showFloatingLabel("Warning: Unsecured Connection",
            "MySQL Shell is currently using HTTP.<br>" +
            "Open the VS Code Settings and enable <br>" +
            "Msg &gt; Shell: Enforce Https.",
            true);
    }
</script>

</body></html>`};var xt=class{constructor(e,t,s){this.url=e;this.onDispose=t;this.onStateChange=s}panel;requisitions;#e=!0;#t;get caption(){return this.#t??"MySQL Shell"}set caption(e){this.#t=e,this.panel&&(this.panel.title=e)}close(){this.panel&&(this.#e=!1,this.panel.dispose(),this.panel=void 0)}runCommand(e,t,s=""){return this.runInPanel(()=>(this.requisitions?.executeRemote(e,t),Promise.resolve(!0)),s)}runInPanel(e,t){let s=t?pe.workspace.getConfiguration("msg.tabPosition").get(t):void 0;return new Promise((n,i)=>{this.panel?(this.panel.reveal(),e().then(()=>{n(!0)}).catch(o=>{i(o)})):this.caption?this.createPanel(s).then(()=>{e().then(()=>{n(!0)}).catch(o=>{i(o)})}).catch(o=>{i(o)}):n(!1)})}createPanel(e){return new Promise(t=>{this.prepareEditorGroup(e).then(s=>{this.panel=pe.window.createWebviewPanel("msg-webview",this.#t,{viewColumn:s,preserveFocus:!0},{enableScripts:!0,retainContextWhenHidden:!0}),this.panel.onDidDispose(()=>{this.handleDispose()}),this.panel.iconPath={dark:pe.Uri.file(Fo.join(__dirname,"..","images","dark","mysql.svg")),light:pe.Uri.file(Fo.join(__dirname,"..","images","light","mysql.svg"))},this.requisitions=new jt("host"),this.requisitions.setRemoteTarget(this.panel.webview),this.requisitions.register("applicationDidStart",()=>(t(!0),Re("State: application did start"),Promise.resolve(!0))),this.requisitionsCreated(),this.panel.webview.onDidReceiveMessage(n=>{n.source==="app"&&this.requisitions?.handleRemoteMessage(n)}),this.onStateChange&&this.panel.onDidChangeViewState(n=>{this.onStateChange?.(this,n.webviewPanel.active)}),Mn(this.panel,this.url)})})}handleDispose(){this.panel=void 0,this.#e&&this.onDispose(this)}requisitionsCreated(){this.requisitions&&(this.requisitions.register("settingsChanged",this.updateVscodeSettings),this.requisitions.register("selectConnectionTab",this.selectConnectionTab),this.requisitions.register("dialogResponse",this.dialogResponse),this.requisitions.register("updateStatusbar",this.updateStatusbar),this.requisitions.register("closeInstance",this.forwardSimple.bind(this,"closeInstance")))}selectConnectionTab=e=>this.panel?b.execute("proxyRequest",{provider:this,original:{requestType:"selectConnectionTab",parameter:e}}):Promise.resolve(!1);dialogResponse=e=>b.execute("proxyRequest",{provider:this,original:{requestType:"dialogResponse",parameter:e}});updateStatusbar=e=>b.execute("proxyRequest",{provider:this,original:{requestType:"updateStatusbar",parameter:e}});forwardSimple=e=>b.execute("proxyRequest",{provider:this,original:{requestType:e,parameter:void 0}});updateVscodeSettings=e=>new Promise(t=>{if(e){let s=e.key.split(".");s.length===3&&pe.workspace.getConfiguration(`msg.${s[0]}`).update(`${s[1]}.${s[2]}`,e.value,pe.ConfigurationTarget.Global).then(()=>{t(!0)})}t(!1)});prepareEditorGroup=async e=>{let t=!e||e==="Active"?pe.ViewColumn.Active:pe.ViewColumn.Beside;return e==="Beside Bottom"&&(t=pe.ViewColumn.Active,await pe.commands.executeCommand("workbench.action.editorLayoutTwoRows"),await pe.commands.executeCommand("workbench.action.focusSecondEditorGroup")),t}};var qe=class extends xt{currentSchemas=new Map;#e;show(e){return this.runCommand("job",[{requestType:"showModule",parameter:T},{requestType:"showPage",parameter:{module:T,page:e}}],"newConnection")}showPageSection(e,t,s){return this.runCommand("job",[{requestType:"showModule",parameter:T},{requestType:"showPage",parameter:{module:T,page:e}},{requestType:"showPageSection",parameter:{id:s,type:t}}],"newConnection")}runCode(e,t){return this.runCommand("job",[{requestType:"showModule",parameter:T},{requestType:"showPage",parameter:{module:T,page:e,suppressAbout:!0}},{requestType:"editorRunCode",parameter:t}],t.linkId===-1?"newConnection":"newConnectionWithEmbeddedSql")}runScript(e,t){return this.runCommand("job",[{requestType:"showModule",parameter:T},{requestType:"showPage",parameter:{module:T,page:e,suppressAbout:!0,noEditor:!0}},{requestType:"editorRunScript",parameter:t}],"newConnection")}editScript(e,t){return this.runCommand("job",[{requestType:"showModule",parameter:T},{requestType:"showPage",parameter:{module:T,page:e,suppressAbout:!0}},{requestType:"editorEditScript",parameter:t}],"newConnection")}loadScript(e,t){return this.runCommand("job",[{requestType:"showModule",parameter:T},{requestType:"showPage",parameter:{module:T,page:e,suppressAbout:!0}},{requestType:"editorLoadScript",parameter:t}],"newConnection")}createNewEditor(e){return this.runCommand("job",[{requestType:"showModule",parameter:T},{requestType:"showPage",parameter:{module:T,page:e.page,suppressAbout:!0}},{requestType:"createNewEditor",parameter:e}],"newConnection")}insertScriptData(e){return e.dbDataId?this.runCommand("editorInsertUserScript",{language:e.language,resourceId:e.dbDataId},"newConnection"):Promise.resolve(!1)}addConnection(e,t){return this.runCommand("job",[{requestType:"showModule",parameter:T},{requestType:"showPage",parameter:{module:T,page:"connections"}},{requestType:"addNewConnection",parameter:{mdsData:e,profileName:t}}],"connections")}removeConnection(e){return this.runCommand("job",[{requestType:"showModule",parameter:T},{requestType:"showPage",parameter:{module:T,page:"connections"}},{requestType:"removeConnection",parameter:e}],"connections")}editConnection(e){return this.runCommand("job",[{requestType:"showModule",parameter:T},{requestType:"showPage",parameter:{module:T,page:"connections"}},{requestType:"editConnection",parameter:e}],"connections")}duplicateConnection(e){return this.runCommand("job",[{requestType:"showModule",parameter:T},{requestType:"showPage",parameter:{module:T,page:"connections"}},{requestType:"duplicateConnection",parameter:e}],"connections")}renameFile(e){return this.runCommand("job",[{requestType:"editorRenameScript",parameter:e}],"connections")}closeEditor(e,t){return this.runCommand("job",[{requestType:"editorClose",parameter:{connectionId:e,editorId:t}}],"")}reselectLastItem(){b.execute("proxyRequest",{provider:this,original:{requestType:"editorSelect",parameter:{connectionId:-1,editorId:""}}})}createScript(e){b.execute("proxyRequest",{provider:this,original:{requestType:"createNewEditor",parameter:e}})}editMrsDbObject(e,t){return this.runCommand("job",[{requestType:"showModule",parameter:T},{requestType:"showPage",parameter:{module:T,page:e}},{requestType:"showMrsDbObjectDialog",parameter:t}],"newConnection")}makeCurrentSchema(e,t){return this.currentSchemas.set(e,t),this.panel?this.runCommand("job",[{requestType:"sqlSetCurrentSchema",parameter:{id:"",connectionId:e,schema:t}}],"connections"):Promise.resolve(!1)}requisitionsCreated(){super.requisitionsCreated(),this.requisitions&&(["refreshConnections","connectionAdded","connectionUpdated","connectionRemoved","refreshOciTree","codeBlocksUpdate","editorLoadScript","editorSaveScript","createNewEditor","editorsChanged","editorSelect"].forEach(e=>{this.requisitions.register(e,this.forwardRequest.bind(this,e))}),this.requisitions.register("newSession",this.createNewSession),this.requisitions.register("closeInstance",this.closeInstance),this.requisitions.register("showInfo",this.showInfo),this.requisitions.register("editorSaveNotebook",this.editorSaveNotebook),this.requisitions.register("editorSaveNotebookInPlace",this.editorSaveNotebookInPlace),this.requisitions.register("editorLoadNotebook",this.editorLoadNotebook),this.requisitions.register("showOpenDialog",this.showOpenDialog),this.requisitions.register("sqlSetCurrentSchema",this.setCurrentSchema),this.requisitions.register("editorExecuteOnHost",this.executeOnHost))}forwardRequest=async(e,t)=>b.execute("proxyRequest",{provider:this,original:{requestType:e,parameter:t}});createNewSession=async e=>(await De.commands.executeCommand("msg.newSession"),!0);setCurrentSchema=e=>(this.currentSchemas.set(e.connectionId,e.schema),b.execute("proxyRequest",{provider:this,original:{requestType:"sqlSetCurrentSchema",parameter:e}}));executeOnHost=e=>b.execute("proxyRequest",{provider:this,original:{requestType:"editorExecuteOnHost",parameter:e}});showInfo=e=>(F(e.join(`
`),5e3),Promise.resolve(!0));editorSaveNotebook=e=>new Promise(t=>{if(e){let s={title:"",filters:{"MySQL Notebook":["mysql-notebook"]},saveLabel:"Save Notebook"};De.window.showSaveDialog(s).then(n=>{if(n!==void 0){this.#e=n;let i=n.fsPath;(0,us.writeFile)(i,e).then(()=>(De.window.setStatusBarMessage(`DB Notebook saved to ${i}`,5e3),t(!0))).catch(()=>(De.window.showErrorMessage(`Could not save notebook to ${i}.`),t(!1)))}else return t(!1)})}else return t(!1)});editorSaveNotebookInPlace=e=>new Promise(t=>{if(e)if(this.#e===void 0)this.editorSaveNotebook(e);else{let s=this.#e.fsPath;(0,us.writeFile)(s,e).then(()=>(De.window.setStatusBarMessage(`DB Notebook saved to ${s}`,5e3),t(!0))).catch(()=>(De.window.showErrorMessage(`Could not save notebook to ${s}.`),t(!1)))}else return t(!1)});editorLoadNotebook=()=>new Promise(e=>{let t={title:"",canSelectFiles:!0,canSelectFolders:!1,canSelectMany:!1,filters:{"MySQL Notebook":["mysql-notebook"]},openLabel:"Open Notebook"};De.window.showOpenDialog(t).then(s=>{if(s&&s.length>0){this.#e=s[0];let n=s[0].fsPath;(0,us.readFile)(n,{encoding:"utf-8"}).then(i=>{this.requisitions?.executeRemote("editorLoadNotebook",{content:i,standalone:!1})}).catch(()=>{De.window.showErrorMessage(`Could not load notebook from ${n}.`)})}e(!0)})});showOpenDialog=e=>new Promise(t=>{let s={id:e.id,defaultUri:De.Uri.file(e.default??""),openLabel:e.openLabel,canSelectFiles:e.canSelectFiles,canSelectFolders:e.canSelectFolders,canSelectMany:e.canSelectMany,filters:e.filters,title:e.title};De.window.showOpenDialog(s).then(n=>{if(n){let i={resourceId:s.id??"",path:n.map(o=>o.fsPath)};this.requisitions?.executeRemote("selectFile",i)}t(!0)})});closeInstance=()=>(this.close(),Promise.resolve(!0))};var Xt=k(require("path"),1),$=require("vscode");var I=class{constructor(){this.source=null,this.type=null,this.channel=null,this.start=null,this.stop=null,this.tokenIndex=null,this.line=null,this.column=null,this._text=null}getTokenSource(){return this.source[0]}getInputStream(){return this.source[1]}get text(){return this._text}set text(r){this._text=r}};I.INVALID_TYPE=0;I.EPSILON=-2;I.MIN_USER_TOKEN_TYPE=1;I.EOF=-1;I.DEFAULT_CHANNEL=0;I.HIDDEN_CHANNEL=1;var h0=class{create(r,e,t,s,n,i,o,a){}},zo=class kn extends I{constructor(e,t,s,n,i){super(),this.source=e!==void 0?e:kn.EMPTY_SOURCE,this.type=t!==void 0?t:null,this.channel=s!==void 0?s:I.DEFAULT_CHANNEL,this.start=n!==void 0?n:-1,this.stop=i!==void 0?i:-1,this.tokenIndex=-1,this.source[0]!==null?(this.line=e[0].line,this.column=e[0].column):this.column=-1}clone(){let e=new kn(this.source,this.type,this.channel,this.start,this.stop);return e.tokenIndex=this.tokenIndex,e.line=this.line,e.column=this.column,e.text=this.text,e}cloneWithType(e){let t=new kn(this.source,e,this.channel,this.start,this.stop);return t.tokenIndex=this.tokenIndex,t.line=this.line,t.column=this.column,e===I.EOF&&(t.text=""),t}toString(e){let t="";this._channel>0&&(t=",channel="+this.channel);let s=this.text;s?(s=s.replace(/\n/g,"\\n"),s=s.replace(/\r/g,"\\r"),s=s.replace(/\t/g,"\\t")):s="<no text>";let n=String(this.type);return e&&(n=e.vocabulary.getDisplayName(this.type)),"[@"+this.tokenIndex+","+this.start+":"+this.stop+"='"+s+"',<"+n+">"+t+","+this.line+":"+this.column+"]"}get text(){if(this._text!==null)return this._text;let e=this.getInputStream();if(e===null)return null;let t=e.size;return this.start<t&&this.stop<t?e.getText(this.start,this.stop):"<EOF>"}set text(e){this._text=e}};zo.EMPTY_SOURCE=[null,null];var j=class Fe{constructor(e,t){this.start=e,this.stop=t}static of(e,t){return e!=t||e<0||e>Fe.INTERVAL_POOL_MAX_VALUE?new Fe(e,t):(Fe.cache[e]===null&&(Fe.cache[e]=new Fe(e,e)),Fe.cache[e])}equals(e){return e instanceof Fe?this.start===e.start&&this.stop===e.stop:!1}hashCode(){let e=23;return e=e*31+this.start,e=e*31+this.stop,e}startsBeforeDisjoint(e){return this.start<e.start&&this.stop<e.start}startsBeforeNonDisjoint(e){return this.start<=e.start&&this.stop>=e.start}startsAfter(e){return this.start>e.start}startsAfterDisjoint(e){return this.start>e.stop}startsAfterNonDisjoint(e){return this.start>e.start&&this.start<=e.stop}disjoint(e){return this.startsBeforeDisjoint(e)||this.startsAfterDisjoint(e)}adjacent(e){return this.start===e.stop+1||this.stop===e.start-1}properlyContains(e){return e.start>=this.start&&e.stop<=this.stop}union(e){return Fe.of(Math.min(this.start,e.start),Math.max(this.stop,e.stop))}intersection(e){return Fe.of(Math.max(this.start,e.start),Math.min(this.stop,e.stop))}differenceNotProperlyContained(e){let t=null;return e.startsBeforeNonDisjoint(this)?t=Fe.of(Math.max(this.start,e.stop+1),this.stop):e.startsAfterNonDisjoint(this)&&(t=Fe.of(this.start,e.start-1)),t}toString(){return this.start===this.stop?this.start.toString():this.start.toString()+".."+this.stop.toString()}get length(){return this.stop<this.start?0:this.stop-this.start+1}};j.INVALID_INTERVAL=new j(-1,-2);j.INTERVAL_POOL_MAX_VALUE=1e3;j.cache=new Array(j.INTERVAL_POOL_MAX_VALUE+1);j.cache.fill(null);var p0=class{EOF=-1;UNKNOWN_SOURCE_NAME="<unknown>"},Go=class{constructor(r,e){if(this.name="",this.stringData=r,this.decodeToUnicodeCodePoints=e??!1,this._index=0,this.data=[],this.decodeToUnicodeCodePoints)for(let t=0;t<this.stringData.length;){let s=this.stringData.codePointAt(t);this.data.push(s),t+=s<=65535?1:2}else{this.data=new Array(this.stringData.length);for(let t=0;t<this.stringData.length;t++)this.data[t]=this.stringData.charCodeAt(t)}this._size=this.data.length}reset(){this._index=0}consume(){if(this._index>=this._size)throw"cannot consume EOF";this._index+=1}LA(r){if(r===0)return 0;r<0&&(r+=1);let e=this._index+r-1;return e<0||e>=this._size?I.EOF:this.data[e]}mark(){return-1}release(r){}seek(r){if(r<=this._index){this._index=r;return}this._index=Math.min(r,this._size)}getText(r,e){let t;if(r instanceof j?(t=r.start,e=r.stop):t=r,e>=this._size&&(e=this._size-1),t>=this._size)return"";if(this.decodeToUnicodeCodePoints){let s="";for(let n=t;n<=e;n++)s+=String.fromCodePoint(this.data[n]);return s}else return this.stringData.slice(t,e+1)}toString(){return this.stringData}get index(){return this._index}get size(){return this._size}getSourceName(){return this.name?this.name:p0.UNKNOWN_SOURCE_NAME}};var Ah={fromString:function(r){return new Go(r,!0)},fromBlob:function(r,e,t,s){let n=new window.FileReader;n.onload=function(i){let o=new Go(i.target.result,!0);t(o)},n.onerror=s,n.readAsText(r,e)},fromBuffer:function(r,e){return new Go(r.toString(e),!0)}},Ph=class{syntaxError(r,e,t,s,n,i){}reportAmbiguity(r,e,t,s,n,i,o){}reportAttemptingFullContext(r,e,t,s,n,i){}reportContextSensitivity(r,e,t,s,n,i){}},Yo=class extends Ph{constructor(){super()}syntaxError(r,e,t,s,n,i){console.error("line "+t+":"+s+" "+n)}};Yo.INSTANCE=new Yo;var m0=class extends Ph{constructor(r){if(super(),r===null)throw"delegates";return this.delegates=r,this}syntaxError(r,e,t,s,n,i){this.delegates.map(o=>o.syntaxError(r,e,t,s,n,i))}reportAmbiguity(r,e,t,s,n,i,o){this.delegates.map(a=>a.reportAmbiguity(r,e,t,s,n,i,o))}reportAttemptingFullContext(r,e,t,s,n,i){this.delegates.map(o=>o.reportAttemptingFullContext(r,e,t,s,n,i))}reportContextSensitivity(r,e,t,s,n,i){this.delegates.map(o=>o.reportContextSensitivity(r,e,t,s,n,i))}},_h=class ps{static EOF=-1;static tokenTypeMapCache=new Map;static ruleIndexMapCache=new Map;constructor(){this._listeners=[Yo.INSTANCE],this.interpreter=null,this._stateNumber=-1}checkVersion(e){let t="4.13.1";t!==e&&console.log("ANTLR runtime and generated code versions disagree: "+t+"!="+e)}addErrorListener(e){this._listeners.push(e)}removeErrorListeners(){this._listeners=[]}getTokenTypeMap(){let e=this.vocabulary,t=ps.tokenTypeMapCache.get(e);if(!t){t=new Map;for(let s=0;s<=this.atn.maxTokenType;s++){let n=e.getLiteralName(s);n&&t.set(n,s);let i=e.getSymbolicName(s);i&&t.set(i,s)}t.set("EOF",I.EOF),ps.tokenTypeMapCache.set(e,t)}return t}getRuleIndexMap(){let e=this.ruleNames,t=ps.ruleIndexMapCache.get(e);return t||(t=new Map,e.forEach((s,n)=>t.set(s,n)),ps.ruleIndexMapCache.set(e,t)),t}getTokenType(e){return this.getTokenTypeMap().get(e)||I.INVALID_TYPE}getErrorHeader(e){let t=e.offendingToken.line,s=e.offendingToken.column;return"line "+t+":"+s}getTokenErrorDisplay(e){if(e===null)return"<no token>";let t=e.text;return t===null&&(e.type===I.EOF?t="<EOF>":t="<"+e.type+">"),t=t.replace(`
`,"\\n").replace("\r","\\r").replace("	","\\t"),"'"+t+"'"}getErrorListenerDispatch(){return new m0(this._listeners)}sempred(e,t,s){return!0}precpred(e,t){return!0}get atn(){return this.interpreter.atn}get state(){return this._stateNumber}set state(e){this._stateNumber=e}},Qo=class extends h0{constructor(r){super(),this.copyText=r===void 0?!1:r}create(r,e,t,s,n,i,o,a){let l=new zo(r,e,s,n,i);return l.line=o,l.column=a,t!==null?l.text=t:this.copyText&&r[1]!==null&&(l.text=r[1].getText(n,i)),l}createThin(r,e){let t=new zo(null,r);return t.text=e,t}};Qo.DEFAULT=new Qo;var Is=class kh extends Error{constructor(e){super(e.message),Error.captureStackTrace&&Error.captureStackTrace(this,kh),this.message=e.message,this.recognizer=e.recognizer,this.input=e.input,this.ctx=e.ctx,this.offendingToken=null,this.offendingState=-1,this.recognizer!==null&&(this.offendingState=this.recognizer.state)}getExpectedTokens(){return this.recognizer!==null?this.recognizer.atn.getExpectedTokens(this.offendingState,this.ctx):null}toString(){return this.message}},Rh=class extends Is{constructor(r,e,t,s){super({message:"",recognizer:r,input:e,ctx:null}),this.startIndex=t,this.deadEndConfigs=s}toString(){let r="";return this.startIndex>=0&&this.startIndex<this.input.size&&(r=this.input.getText(new j(this.startIndex,this.startIndex))),"LexerNoViableAltException"+r}},me=class wt extends _h{constructor(e){super(),this._input=e,this._factory=Qo.DEFAULT,this._tokenFactorySourcePair=[this,e],this.interpreter=null,this._token=null,this._tokenStartCharIndex=-1,this._tokenStartLine=-1,this._tokenStartColumn=-1,this._hitEOF=!1,this._channel=I.DEFAULT_CHANNEL,this._type=I.INVALID_TYPE,this._modeStack=[],this._mode=wt.DEFAULT_MODE,this._text=null}reset(){this._input!==null&&this._input.seek(0),this._token=null,this._type=I.INVALID_TYPE,this._channel=I.DEFAULT_CHANNEL,this._tokenStartCharIndex=-1,this._tokenStartColumn=-1,this._tokenStartLine=-1,this._text=null,this._hitEOF=!1,this._mode=wt.DEFAULT_MODE,this._modeStack=[],this.interpreter.reset()}nextToken(){if(this._input===null)throw"nextToken requires a non-null input stream.";let e=this._input.mark();try{for(;;){if(this._hitEOF)return this.emitEOF(),this._token;this._token=null,this._channel=I.DEFAULT_CHANNEL,this._tokenStartCharIndex=this._input.index,this._tokenStartColumn=this.interpreter.column,this._tokenStartLine=this.interpreter.line,this._text=null;let t=!1;for(;;){this._type=I.INVALID_TYPE;let s=wt.SKIP;try{s=this.interpreter.match(this._input,this._mode)}catch(n){if(n instanceof Is)this.notifyListeners(n),this.recover(n);else throw console.log(n.stack),n}if(this._input.LA(1)===I.EOF&&(this._hitEOF=!0),this._type===I.INVALID_TYPE&&(this._type=s),this._type===wt.SKIP){t=!0;break}if(this._type!==wt.MORE)break}if(!t)return this._token===null&&this.emit(),this._token}}finally{this._input.release(e)}}skip(){this._type=wt.SKIP}more(){this._type=wt.MORE}mode(e){this._mode=e}pushMode(e){this.interpreter.debug&&console.log("pushMode "+e),this._modeStack.push(this._mode),this.mode(e)}popMode(){if(this._modeStack.length===0)throw"Empty Stack";return this.interpreter.debug&&console.log("popMode back to "+this._modeStack.slice(0,-1)),this.mode(this._modeStack.pop()),this._mode}emitToken(e){this._token=e}emit(){let e=this._factory.create(this._tokenFactorySourcePair,this._type,this._text,this._channel,this._tokenStartCharIndex,this.getCharIndex()-1,this._tokenStartLine,this._tokenStartColumn);return this.emitToken(e),e}emitEOF(){let e=this.column,t=this.line,s=this._factory.create(this._tokenFactorySourcePair,I.EOF,null,I.DEFAULT_CHANNEL,this._input.index,this._input.index-1,t,e);return this.emitToken(s),s}getCharIndex(){return this._input.index}getAllTokens(){let e=[],t=this.nextToken();for(;t.type!==I.EOF;)e.push(t),t=this.nextToken();return e}notifyListeners(e){let t=this._tokenStartCharIndex,s=this._input.index,n=this._input.getText(t,s),i="token recognition error at: '"+this.getErrorDisplay(n)+"'";this.getErrorListenerDispatch().syntaxError(this,null,this._tokenStartLine,this._tokenStartColumn,i,e)}getErrorDisplay(e){let t=[];for(let s=0;s<e.length;s++)t.push(e[s]);return t.join("")}getErrorDisplayForChar(e){return e.charCodeAt(0)===I.EOF?"<EOF>":e===`
`?"\\n":e==="	"?"\\t":e==="\r"?"\\r":e}getCharErrorDisplay(e){return"'"+this.getErrorDisplayForChar(e)+"'"}recover(e){this._input.LA(1)!==I.EOF&&(e instanceof Rh?this.interpreter.consume(this._input):this._input.consume())}get inputStream(){return this._input}set inputStream(e){this._input=null,this._tokenFactorySourcePair=[this,null],this.reset(),this._input=e,this._tokenFactorySourcePair=[this,e]}get sourceName(){return this._input.sourceName}get type(){return this._type}set type(e){this._type=e}get line(){return this.interpreter.line}set line(e){this.interpreter.line=e}get column(){return this.interpreter.column}set column(e){this.interpreter.column=e}get text(){return this._text!==null?this._text:this.interpreter.getText(this._input)}set text(e){this._text=e}};me.DEFAULT_MODE=0;me.MORE=-2;me.SKIP=-3;me.DEFAULT_TOKEN_CHANNEL=I.DEFAULT_CHANNEL;me.HIDDEN=I.HIDDEN_CHANNEL;me.MIN_CHAR_VALUE=0;me.MAX_CHAR_VALUE=1114111;var g0=class{},f0=class extends g0{constructor(r){super(),this.tokenSource=r,this.tokens=[],this._index=-1,this.fetchedEOF=!1}mark(){return 0}release(r){}reset(){this.seek(0)}seek(r){this.lazyInit(),this._index=this.adjustSeekIndex(r)}get size(){return this.tokens.length}get index(){return this._index}get(r){return this.lazyInit(),this.tokens[r]}consume(){let r=!1;if(this._index>=0?this.fetchedEOF?r=this._index<this.tokens.length-1:r=this._index<this.tokens.length:r=!1,!r&&this.LA(1)===I.EOF)throw"cannot consume EOF";this.sync(this._index+1)&&(this._index=this.adjustSeekIndex(this._index+1))}sync(r){let e=r-this.tokens.length+1;return e>0?this.fetch(e)>=e:!0}fetch(r){if(this.fetchedEOF)return 0;for(let e=0;e<r;e++){let t=this.tokenSource.nextToken();if(t.tokenIndex=this.tokens.length,this.tokens.push(t),t.type===I.EOF)return this.fetchedEOF=!0,e+1}return r}getTokens(r,e,t){if(this.lazyInit(),r===void 0&&e===void 0)return this.tokens;if(e===void 0&&(e=this.tokens.length-1),r<0||e>=this.tokens.length||e<0||r>=this.tokens.length)throw new RangeError("start "+r+" or stop "+e+" not in 0.."+(this.tokens.length-1));if(r>e)return[];if(t===void 0)return this.tokens.slice(r,e+1);let s=[];e>=this.tokens.length&&(e=this.tokens.length-1);for(let n=r;n<e;n++){let i=this.tokens[n];if(i.type===I.EOF){s.push(i);break}t.contains(i.type)&&s.push(i)}return s}LA(r){return this.LT(r).type}LB(r){return this._index-r<0?null:this.tokens[this._index-r]}LT(r){if(this.lazyInit(),r===0)return null;if(r<0)return this.LB(-r);let e=this._index+r-1;return this.sync(e),e>=this.tokens.length?this.tokens[this.tokens.length-1]:this.tokens[e]}adjustSeekIndex(r){return r}lazyInit(){this._index===-1&&this.setup()}setup(){this.sync(0),this._index=this.adjustSeekIndex(0)}setTokenSource(r){this.tokenSource=r,this.tokens=[],this._index=-1,this.fetchedEOF=!1}getTokenSource(){return this.tokenSource}nextTokenOnChannel(r,e){if(this.sync(r),r>=this.tokens.length)return-1;let t=this.tokens[r];for(;t.channel!==this.channel;){if(t.type===I.EOF)return-1;r+=1,this.sync(r),t=this.tokens[r]}return r}previousTokenOnChannel(r,e){for(;r>=0&&this.tokens[r].channel!==e;)r-=1;return r}getHiddenTokensToRight(r,e){if(e===void 0&&(e=-1),this.lazyInit(),r<0||r>=this.tokens.length)throw""+r+" not in 0.."+this.tokens.length-1;let t=this.nextTokenOnChannel(r+1,me.DEFAULT_TOKEN_CHANNEL),s=r+1,n=t===-1?this.tokens.length-1:t;return this.filterForChannel(s,n,e)}getHiddenTokensToLeft(r,e){if(e===void 0&&(e=-1),this.lazyInit(),r<0||r>=this.tokens.length)throw""+r+" not in 0.."+this.tokens.length-1;let t=this.previousTokenOnChannel(r-1,me.DEFAULT_TOKEN_CHANNEL);if(t===r-1)return null;let s=t+1,n=r-1;return this.filterForChannel(s,n,e)}filterForChannel(r,e,t){let s=[];for(let n=r;n<e+1;n++){let i=this.tokens[n];t===-1?i.channel!==me.DEFAULT_TOKEN_CHANNEL&&s.push(i):i.channel===t&&s.push(i)}return s.length===0?null:s}getSourceName(){return this.tokenSource.sourceName}getText(r){this.lazyInit(),this.fill(),r||(r=new j(0,this.tokens.length-1));let e=r.start;e instanceof I&&(e=e.tokenIndex);let t=r.stop;if(t instanceof I&&(t=t.tokenIndex),e===null||t===null||e<0||t<0)return"";t>=this.tokens.length&&(t=this.tokens.length-1);let s="";for(let n=e;n<t+1;n++){let i=this.tokens[n];if(i.type===I.EOF)break;s=s+i.text}return s}fill(){for(this.lazyInit();this.fetch(1e3)===1e3;);}},Dh=class extends f0{constructor(r,e){super(r),this.channel=e===void 0?I.DEFAULT_CHANNEL:e}adjustSeekIndex(r){return this.nextTokenOnChannel(r,this.channel)}LB(r){if(r===0||this.index-r<0)return null;let e=this.index,t=1;for(;t<=r;)e=this.previousTokenOnChannel(e-1,this.channel),t+=1;return e<0?null:this.tokens[e]}LT(r){if(this.lazyInit(),r===0)return null;if(r<0)return this.LB(-r);let e=this.index,t=1;for(;t<r;)this.sync(e+1)&&(e=this.nextTokenOnChannel(e+1,this.channel)),t+=1;return this.tokens[e]}getNumberOfOnChannelTokens(){let r=0;this.fill();for(let e=0;e<this.tokens.length;e++){let t=this.tokens[e];if(t.channel===this.channel&&(r+=1),t.type===I.EOF)break}return r}},Nh=class{},Tt=class extends Nh{},la=class extends Tt{},ca=class extends Tt{constructor(r){super(),this._parent=null,this.symbol=r}getChild(r){return null}getSymbol(){return this.symbol}get parent(){return this._parent}set parent(r){this._parent=r}getPayload(){return this.symbol}getSourceInterval(){if(this.symbol===null)return j.INVALID_INTERVAL;let r=this.symbol.tokenIndex;return new j(r,r)}getChildCount(){return 0}accept(r){return r.visitTerminal(this)}getText(){return this.symbol.text}toString(){return this.symbol.type===I.EOF?"<EOF>":this.symbol.text}toStringTree(){return this.toString()}},Jo=class extends ca{constructor(r){super(r)}isErrorNode(){return!0}accept(r){return r.visitErrorNode(this)}};function fs(r,e){if(!Array.isArray(r)||!Array.isArray(e))return!1;if(r===e)return!0;if(r.length!==e.length)return!1;for(let t=0;t<r.length;t++)if(r[t]!==e[t]&&(!r[t].equals||!r[t].equals(e[t])))return!1;return!0}var S0=Math.round(Math.random()*Math.pow(2,32));function Oh(r){if(!r)return 0;let e=typeof r,t=e==="string"?r:e==="object"&&r.toString?r.toString():!1;if(!t)return 0;let s,n,i=t.length&3,o=t.length-i,a=S0,l=3432918353,c=461845907,u=0;for(;u<o;)n=t.charCodeAt(u)&255|(t.charCodeAt(++u)&255)<<8|(t.charCodeAt(++u)&255)<<16|(t.charCodeAt(++u)&255)<<24,++u,n=(n&65535)*l+(((n>>>16)*l&65535)<<16)&4294967295,n=n<<15|n>>>17,n=(n&65535)*c+(((n>>>16)*c&65535)<<16)&4294967295,a^=n,a=a<<13|a>>>19,s=(a&65535)*5+(((a>>>16)*5&65535)<<16)&4294967295,a=(s&65535)+27492+(((s>>>16)+58964&65535)<<16);switch(n=0,i){case 3:n^=(t.charCodeAt(u+2)&255)<<16;case 2:n^=(t.charCodeAt(u+1)&255)<<8;case 1:n^=t.charCodeAt(u)&255,n=(n&65535)*l+(((n>>>16)*l&65535)<<16)&4294967295,n=n<<15|n>>>17,n=(n&65535)*c+(((n>>>16)*c&65535)<<16)&4294967295,a^=n}return a^=t.length,a^=a>>>16,a=(a&65535)*2246822507+(((a>>>16)*2246822507&65535)<<16)&4294967295,a^=a>>>13,a=(a&65535)*3266489909+(((a>>>16)*3266489909&65535)<<16)&4294967295,a^=a>>>16,a>>>0}var at=class Lh{constructor(){this.count=0,this.hash=0}update(){for(let e=0;e<arguments.length;e++){let t=arguments[e];if(t!=null)if(Array.isArray(t))this.update.apply(this,t);else{let s=0;switch(typeof t){case"undefined":case"function":continue;case"number":case"boolean":s=t;break;case"string":s=Oh(t);break;default:t.updateHashCode?t.updateHashCode(this):console.log("No updateHashCode for "+t.toString());continue}s=s*3432918353,s=s<<15|s>>>32-15,s=s*461845907,this.count=this.count+1;let n=this.hash^s;n=n<<13|n>>>32-13,n=n*5+3864292196,this.hash=n}}}finish(){let e=this.hash^this.count*4;return e=e^e>>>16,e=e*2246822507,e=e^e>>>13,e=e*3266489909,e=e^e>>>16,e}static hashStuff(){let e=new Lh;return e.update.apply(e,arguments),e.finish()}};function qh(r){return r?typeof r=="string"?Oh(r):r.hashCode():-1}function Fh(r,e){return r?r.equals(e):r===e}function b0(r){return r===null?"null":r}function ua(r){return Array.isArray(r)?"["+r.map(b0).join(", ")+"]":"null"}var An="h-",He=class{constructor(r,e){this.data={},this.hashFunction=r||qh,this.equalsFunction=e||Fh}add(r){let e=An+this.hashFunction(r);if(e in this.data){let t=this.data[e];for(let s=0;s<t.length;s++)if(this.equalsFunction(r,t[s]))return t[s];return t.push(r),r}else return this.data[e]=[r],r}has(r){return this.get(r)!=null}get(r){let e=An+this.hashFunction(r);if(e in this.data){let t=this.data[e];for(let s=0;s<t.length;s++)if(this.equalsFunction(r,t[s]))return t[s]}return null}values(){return Object.keys(this.data).filter(r=>r.startsWith(An)).flatMap(r=>this.data[r],this)}toString(){return ua(this.values())}get length(){return Object.keys(this.data).filter(r=>r.startsWith(An)).map(r=>this.data[r].length,this).reduce((r,e)=>r+e,0)}},oe=class vr{hashCode(){let e=new at;return this.updateHashCode(e),e.finish()}evaluate(e,t){}evalPrecedence(e,t){return this}static andContext(e,t){if(e===null||e===vr.NONE)return t;if(t===null||t===vr.NONE)return e;let s=new I0(e,t);return s.opnds.length===1?s.opnds[0]:s}static orContext(e,t){if(e===null)return t;if(t===null)return e;if(e===vr.NONE||t===vr.NONE)return vr.NONE;let s=new v0(e,t);return s.opnds.length===1?s.opnds[0]:s}},I0=class Rn extends oe{constructor(e,t){super();let s=new He;e instanceof Rn?e.opnds.map(function(i){s.add(i)}):s.add(e),t instanceof Rn?t.opnds.map(function(i){s.add(i)}):s.add(t);let n=Gh(s);if(n.length>0){let i=null;n.map(function(o){(i===null||o.precedence<i.precedence)&&(i=o)}),s.add(i)}this.opnds=Array.from(s.values())}equals(e){return this===e?!0:e instanceof Rn?fs(this.opnds,e.opnds):!1}updateHashCode(e){e.update(this.opnds,"AND")}evaluate(e,t){for(let s=0;s<this.opnds.length;s++)if(!this.opnds[s].evaluate(e,t))return!1;return!0}evalPrecedence(e,t){let s=!1,n=[];for(let o=0;o<this.opnds.length;o++){let a=this.opnds[o],l=a.evalPrecedence(e,t);if(s|=l!==a,l===null)return null;l!==oe.NONE&&n.push(l)}if(!s)return this;if(n.length===0)return oe.NONE;let i=null;return n.map(function(o){i=i===null?o:oe.andContext(i,o)}),i}toString(){let e=this.opnds.map(t=>t.toString());return(e.length>3?e.slice(3):e).join("&&")}},v0=class Dn extends oe{constructor(e,t){super();let s=new He;e instanceof Dn?e.opnds.map(function(i){s.add(i)}):s.add(e),t instanceof Dn?t.opnds.map(function(i){s.add(i)}):s.add(t);let n=Gh(s);if(n.length>0){let i=n.sort(function(a,l){return a.compareTo(l)}),o=i[i.length-1];s.add(o)}this.opnds=Array.from(s.values())}equals(e){return this===e?!0:e instanceof Dn?fs(this.opnds,e.opnds):!1}updateHashCode(e){e.update(this.opnds,"OR")}evaluate(e,t){for(let s=0;s<this.opnds.length;s++)if(this.opnds[s].evaluate(e,t))return!0;return!1}evalPrecedence(e,t){let s=!1,n=[];for(let o=0;o<this.opnds.length;o++){let a=this.opnds[o],l=a.evalPrecedence(e,t);if(s|=l!==a,l===oe.NONE)return oe.NONE;l!==null&&n.push(l)}if(!s)return this;if(n.length===0)return null;let i=null;return n.map(function(o){return i===null?o:oe.orContext(i,o)}),i}toString(){let e=this.opnds.map(t=>t.toString());return(e.length>3?e.slice(3):e).join("||")}};function Gh(r){let e=[];return r.values().map(function(t){t instanceof oe.PrecedencePredicate&&e.push(t)}),e}var Uh=class Bh extends oe{constructor(e,t,s){super(),this.ruleIndex=e===void 0?-1:e,this.predIndex=t===void 0?-1:t,this.isCtxDependent=s===void 0?!1:s}evaluate(e,t){let s=this.isCtxDependent?t:null;return e.sempred(s,this.ruleIndex,this.predIndex)}updateHashCode(e){e.update(this.ruleIndex,this.predIndex,this.isCtxDependent)}equals(e){return this===e?!0:e instanceof Bh?this.ruleIndex===e.ruleIndex&&this.predIndex===e.predIndex&&this.isCtxDependent===e.isCtxDependent:!1}toString(){return"{"+this.ruleIndex+":"+this.predIndex+"}?"}};oe.NONE=new Uh;var At=class{constructor(r){if(r==null)throw"target cannot be null.";this.target=r,this.isEpsilon=!1,this.label=null}},da=class extends At{constructor(r){super(r)}},G={EPSILON:1,RANGE:2,RULE:3,PREDICATE:4,ATOM:5,ACTION:6,SET:7,NOT_SET:8,WILDCARD:9,PRECEDENCE:10},jh=class extends da{constructor(r,e,t,s){super(r),this.serializationType=G.PREDICATE,this.ruleIndex=e,this.predIndex=t,this.isCtxDependent=s,this.isEpsilon=!0}matches(r,e,t){return!1}getPredicate(){return new Uh(this.ruleIndex,this.predIndex,this.isCtxDependent)}toString(){return"pred_"+this.ruleIndex+":"+this.predIndex}},y0=class extends Is{constructor(r,e,t){super({message:x0(e,t||null),recognizer:r,input:r.inputStream,ctx:r._ctx});let s=r.interpreter.atn.states[r.state].transitions[0];s instanceof jh?(this.ruleIndex=s.ruleIndex,this.predicateIndex=s.predIndex):(this.ruleIndex=0,this.predicateIndex=0),this.predicate=e,this.offendingToken=r.getCurrentToken()}};function x0(r,e){return e!==null?e:"failed predicate: {"+r+"}?"}var Uo=class extends Is{constructor(r){super({message:"",recognizer:r,input:r.inputStream,ctx:r._ctx}),this.offendingToken=r.getCurrentToken()}},w0=class extends Is{constructor(r,e,t,s,n,i){i=i??r._ctx,s=s??r.getCurrentToken(),t=t??r.getCurrentToken(),e=e??r.inputStream,super({message:"",recognizer:r,input:e,ctx:i}),this.deadEndConfigs=n,this.startToken=t,this.offendingToken=s}},ct=class Xo{constructor(){this.atn=null,this.ruleIndex=0,this.epsilonOnlyTransitions=!1,this.transitions=[],this.nextTokenWithinRule=null}get stateType(){return Xo.INVALID_STATE_NUMBER}toString(){return`${this.stateNumber}`}equals(e){return e instanceof Xo?this.stateNumber===e.stateNumber:!1}isNonGreedyExitState(){return!1}addTransition(e,t){t===void 0&&(t=-1),this.transitions.length===0?this.epsilonOnlyTransitions=e.isEpsilon:this.epsilonOnlyTransitions!==e.isEpsilon&&(this.epsilonOnlyTransitions=!1),t===-1?this.transitions.push(e):this.transitions.splice(t,1,e)}};ct.INVALID_STATE_NUMBER=-1;var Ct=class yr{constructor(e,t,s){this.literalNames=e??yr.EMPTY_NAMES,this.symbolicNames=t??yr.EMPTY_NAMES,this.displayNames=s??yr.EMPTY_NAMES,this.maxTokenType=Math.max(this.displayNames.length,Math.max(this.literalNames.length,this.symbolicNames.length))-1}static fromTokenNames(e){if(e==null||e.length===0)return yr.EMPTY_VOCABULARY;let t=[...e],s=[...e];for(let n=0;n<e.length;n++){let i=e[n];if(i!=null){if(!i.isEmpty()){let o=i.charAt(0);if(o==="'"){s[n]=null;continue}else if(o.toUpperCase()===o){t[n]=null;continue}}t[n]=null,s[n]=null}}return new yr(t,s,e)}getMaxTokenType(){return this.maxTokenType}getLiteralName(e){return e>=0&&e<this.literalNames.length?this.literalNames[e]:null}getSymbolicName(e){return e>=0&&e<this.symbolicNames.length?this.symbolicNames[e]:e===I.EOF?"EOF":null}getDisplayName(e){if(e>=0&&e<this.displayNames.length){let n=this.displayNames[e];if(n!=null)return n}let t=this.getLiteralName(e);return t??this.getSymbolicName(e)??`${e}`}getLiteralNames(){return this.literalNames}getSymbolicNames(){return this.symbolicNames}getDisplayNames(){return this.displayNames}};Ct.EMPTY_NAMES=[];Ct.EMPTY_VOCABULARY=new Ct(Ct.EMPTY_NAMES,Ct.EMPTY_NAMES,Ct.EMPTY_NAMES);var lt=class ne{static COMPLETE_CHAR_SET=ne.of(me.MIN_CHAR_VALUE,me.MAX_CHAR_VALUE);static EMPTY_SET=new ne;static{ne.COMPLETE_CHAR_SET.readonly=!0,ne.EMPTY_SET.readonly=!0}constructor(e){this.intervals=[],this.readOnly=!1,e&&this.addSet(e)}static of(e,t){let s=new ne;return s.addRange(e,t),s}get minElement(){return this.intervals.length===0?I.INVALID_TYPE:this.intervals[0].start}get maxElement(){return this.intervals.length===0?I.INVALID_TYPE:this.intervals[this.intervals.length-1].stop}get isNil(){return this.intervals.length===0}clear(){if(this.readOnly)throw new IllegalStateException("can't alter readonly IntervalSet");this.intervals=[]}addOne(e){this.addInterval(new j(e,e))}addRange(e,t){this.addInterval(new j(e,t))}addInterval(e){if(this.readOnly)throw new IllegalStateException("can't alter readonly IntervalSet");if(this.intervals.length===0)this.intervals.push(e);else{for(let t=0;t<this.intervals.length;t++){let s=this.intervals[t];if(e.equals(s))return;if(e.adjacent(s)||!e.disjoint(s)){let n=e.union(s);this.intervals[t]=n;for(let i=t+1;i<this.intervals.length;){let o=this.intervals[i];if(!n.adjacent(o)&&n.disjoint(o))break;this.intervals.splice(i,1),this.intervals[t]=n.union(o)}return}if(e.startsBeforeDisjoint(s)){this.intervals.splice(t,0,e);return}}this.intervals.push(e)}}addSet(e){return e.intervals.forEach(t=>this.addInterval(t),this),this}complement(e,t){if(!e)return new ne;let s=new ne;if(e instanceof ne){if(e.isNil)return new ne;s.addSet(e)}else s.addInterval(new j(e,t));return s.subtract(this)}or(e){let t=new ne;return t.addSet(this),e.forEach(s=>t.addSet(s),this),t}and(e){if(e.isNil)return new ne;let t=this.intervals,s=e.intervals,n,i=t.length,o=s.length,a=0,l=0;for(;a<i&&l<o;){let c=t[a],u=s[l];c.startsBeforeDisjoint(u)?a++:u.startsBeforeDisjoint(c)?l++:c.properlyContains(u)?(n||(n=new ne),n.addInterval(c.intersection(u)),l++):u.properlyContains(c)?(n||(n=new ne),n.addInterval(c.intersection(u)),a++):c.disjoint(u)||(n||(n=new ne),n.addInterval(c.intersection(u)),c.startsAfterNonDisjoint(u)?l++:u.startsAfterNonDisjoint(c)&&a++)}return n||new ne}subtract(e){if(this.isNil)return new ne;let t=new ne(this);if(e.isNil)return t;let s=0,n=0;for(;s<t.intervals.length&&n<e.intervals.length;){let i=t.intervals[s],o=e.intervals[n];if(o.stop<i.start){n++;continue}if(o.start>i.stop){s++;continue}let a=null,l=null;if(o.start>i.start&&(a=new j(i.start,o.start-1)),o.stop<i.stop&&(l=new j(o.stop+1,i.stop)),a!=null)if(l!=null){t.intervals[s]=a,t.intervals.splice(s+1,0,l),s++,n++;continue}else{t.intervals[s]=a,s++;continue}else if(l!=null){t.intervals[s]=l,n++;continue}else{t.intervals.splice(s,1);continue}}return t}contains(e){if(this.intervals===null)return!1;{let t=this.intervals.length,s=0,n=t-1;for(;s<=n;){let i=Math.floor((s+n)/2),o=this.intervals[i];if(o.stop<e)s=i+1;else if(o.start>e)n=i-1;else return!0}return!1}}removeRange(e){if(this.readOnly)throw new IllegalStateException("can't alter readonly IntervalSet");if(e.start===e.stop)this.removeOne(e.start);else if(this.intervals!==null){let t=0;for(let s=0;s<this.intervals.length;s++){let n=this.intervals[t];if(e.stop<=n.start)return;if(e.start>n.start&&e.stop<n.stop){this.intervals[t]=new j(n.start,e.start);let i=new j(e.stop,n.stop);this.intervals.splice(t,0,i);return}else e.start<=n.start&&e.stop>=n.stop?(this.intervals.splice(t,1),t=t-1):e.start<n.stop?this.intervals[t]=new j(n.start,e.start):e.stop<n.stop&&(this.intervals[t]=new j(e.stop,n.stop));t+=1}}}removeOne(e){if(this.readOnly)throw new IllegalStateException("can't alter readonly IntervalSet");if(this.intervals!==null)for(let t=0;t<this.intervals.length;t++){let s=this.intervals[t];if(e<s.start)return;if(e===s.start&&e===s.stop){this.intervals.splice(t,1);return}else if(e===s.start){this.intervals[t]=new j(s.start+1,s.stop);return}else if(e===s.stop){this.intervals[t]=new j(s.start,s.stop);return}else if(e<s.stop){let n=new j(s.start,e);s.start=e+1,this.intervals.splice(t,0,n);return}}}toString(e){if(this.intervals.length===0)return"{}";let t="";this.length>1&&(t+="{");let s,n;e instanceof Ct?(n=e,s=!1):s=e??!1;for(let i=0;i<this.intervals.length;++i){let o=this.intervals[i],a=o.start,l=o.stop;if(a===l)a==I.EOF?t+="<EOF>":s?t+="'"+String.fromCodePoint(a)+"'":n?t+=this.elementName(n,a):t+=a;else if(s)t+="'"+String.fromCodePoint(a)+"'..'"+String.fromCodePoint(l)+"'";else if(n)for(let c=a;c<=l;++c)c>a&&(t+=", "),t+=this.elementName(n,c);else t+=a+".."+l;i<this.intervals.length-1&&(t+=", ")}return this.length>1&&(t+="}"),t}elementName(e,t){return t===I.EOF?"<EOF>":t===I.EPSILON?"<EPSILON>":e.getDisplayName(t)}toArray(){let e=[];if(this.intervals!==null)for(let t=0;t<this.intervals.length;t++){let s=this.intervals[t];for(let n=s.start;n<=s.stop;n++)e.push(n)}return e}get length(){let e=0;if(this.intervals.length==1){let t=this.intervals[0];return t.stop-t.start+1}for(let t of this.intervals)e+=t.length;return e}isReadonly(){return this.readOnly}setReadonly(e){if(this.readOnly&&!e)throw new IllegalStateException("can't alter readonly IntervalSet");this.readOnly=e}[Symbol.iterator](){return this.intervals[Symbol.iterator]()}},L={INVALID_TYPE:0,BASIC:1,RULE_START:2,BLOCK_START:3,PLUS_BLOCK_START:4,STAR_BLOCK_START:5,TOKEN_START:6,RULE_STOP:7,BLOCK_END:8,STAR_LOOP_BACK:9,STAR_LOOP_ENTRY:10,PLUS_LOOP_BACK:11,LOOP_END:12},C0=class{constructor(){this.errorRecoveryMode=!1,this.lastErrorIndex=-1,this.lastErrorStates=null,this.nextTokensContext=null,this.nextTokenState=0}reset(r){this.endErrorCondition(r)}beginErrorCondition(r){this.errorRecoveryMode=!0}inErrorRecoveryMode(r){return this.errorRecoveryMode}endErrorCondition(r){this.errorRecoveryMode=!1,this.lastErrorStates=null,this.lastErrorIndex=-1}reportMatch(r){this.endErrorCondition(r)}reportError(r,e){this.inErrorRecoveryMode(r)||(this.beginErrorCondition(r),e instanceof w0?this.reportNoViableAlternative(r,e):e instanceof Uo?this.reportInputMismatch(r,e):e instanceof y0?this.reportFailedPredicate(r,e):(console.log("unknown recognition error type: "+e.constructor.name),console.log(e.stack),r.notifyErrorListeners(e.offendingToken,e.getMessage(),e)))}recover(r,e){this.lastErrorIndex===r.inputStream.index&&this.lastErrorStates!==null&&this.lastErrorStates.indexOf(r.state)>=0&&r.consume(),this.lastErrorIndex=r._input.index,this.lastErrorStates===null&&(this.lastErrorStates=[]),this.lastErrorStates.push(r.state);let t=this.getErrorRecoverySet(r);this.consumeUntil(r,t)}sync(r){if(this.inErrorRecoveryMode(r))return;let e=r.interpreter.atn.states[r.state],t=r.tokenStream.LA(1),s=r.atn.nextTokens(e);if(s.contains(t)){this.nextTokensContext=null,this.nextTokenState=ct.INVALID_STATE_NUMBER;return}else if(s.contains(I.EPSILON)){this.nextTokensContext===null&&(this.nextTokensContext=r._ctx,this.nextTokensState=r._stateNumber);return}switch(e.stateType){case L.BLOCK_START:case L.STAR_BLOCK_START:case L.PLUS_BLOCK_START:case L.STAR_LOOP_ENTRY:if(this.singleTokenDeletion(r)!==null)return;throw new Uo(r);case L.PLUS_LOOP_BACK:case L.STAR_LOOP_BACK:{this.reportUnwantedToken(r);let n=new lt;n.addSet(r.getExpectedTokens());let i=n.addSet(this.getErrorRecoverySet(r));this.consumeUntil(r,i)}break;default:}}reportNoViableAlternative(r,e){let t=r.tokenStream,s;t!==null?e.startToken.type===I.EOF?s="<EOF>":s=t.getText(new j(e.startToken.tokenIndex,e.offendingToken.tokenIndex)):s="<unknown input>";let n="no viable alternative at input "+this.escapeWSAndQuote(s);r.notifyErrorListeners(n,e.offendingToken,e)}reportInputMismatch(r,e){let t="mismatched input "+this.getTokenErrorDisplay(e.offendingToken)+" expecting "+e.getExpectedTokens().toString(r.vocabulary);r.notifyErrorListeners(t,e.offendingToken,e)}reportFailedPredicate(r,e){let t="rule "+r.ruleNames[r._ctx.ruleIndex]+" "+e.message;r.notifyErrorListeners(t,e.offendingToken,e)}reportUnwantedToken(r){if(this.inErrorRecoveryMode(r))return;this.beginErrorCondition(r);let e=r.getCurrentToken(),t=this.getTokenErrorDisplay(e),s=this.getExpectedTokens(r),n="extraneous input "+t+" expecting "+s.toString(r.vocabulary);r.notifyErrorListeners(n,e,null)}reportMissingToken(r){if(this.inErrorRecoveryMode(r))return;this.beginErrorCondition(r);let e=r.getCurrentToken(),t="missing "+this.getExpectedTokens(r).toString(r.vocabulary)+" at "+this.getTokenErrorDisplay(e);r.notifyErrorListeners(t,e,null)}recoverInline(r){let e=this.singleTokenDeletion(r);if(e!==null)return r.consume(),e;if(this.singleTokenInsertion(r))return this.getMissingSymbol(r);throw new Uo(r)}singleTokenInsertion(r){let e=r.tokenStream.LA(1),t=r.interpreter.atn,s=t.states[r.state].transitions[0].target;return t.nextTokens(s,r._ctx).contains(e)?(this.reportMissingToken(r),!0):!1}singleTokenDeletion(r){let e=r.tokenStream.LA(2);if(this.getExpectedTokens(r).contains(e)){this.reportUnwantedToken(r),r.consume();let t=r.getCurrentToken();return this.reportMatch(r),t}else return null}getMissingSymbol(r){let e=r.getCurrentToken(),t=this.getExpectedTokens(r),s=I.INVALID_TYPE;t.isNil||(s=t.minElement);let n;s===I.EOF?n="<missing EOF>":n="<missing "+r.vocabulary.getDisplayName(s)+">";let i=e,o=r.tokenStream.LT(-1);return i.type===I.EOF&&o!==null&&(i=o),r.getTokenFactory().create(i.source,s,n,I.DEFAULT_CHANNEL,-1,-1,i.line,i.column)}getExpectedTokens(r){return r.getExpectedTokens()}getTokenErrorDisplay(r){if(r===null)return"<no token>";let e=r.text;return e===null&&(r.type===I.EOF?e="<EOF>":e="<"+r.type+">"),this.escapeWSAndQuote(e)}escapeWSAndQuote(r){return r=r.replace(/\n/g,"\\n"),r=r.replace(/\r/g,"\\r"),r=r.replace(/\t/g,"\\t"),"'"+r+"'"}getErrorRecoverySet(r){let e=r.interpreter.atn,t=r._ctx,s=new lt;for(;t!==null&&t.invokingState>=0;){let n=e.states[t.invokingState].transitions[0],i=e.nextTokens(n.followState);s.addSet(i),t=t.parent}return s.removeOne(I.EPSILON),s}consumeUntil(r,e){let t=r.tokenStream.LA(1);for(;t!==I.EOF&&!e.contains(t);)r.consume(),t=r.tokenStream.LA(1)}};function bh(r,e){if(r===null){let t={state:null,alt:null,context:null,semanticContext:null};return e&&(t.reachesIntoOuterContext=0),t}else{let t={};return t.state=r.state||null,t.alt=r.alt===void 0?null:r.alt,t.context=r.context||null,t.semanticContext=r.semanticContext||null,e&&(t.reachesIntoOuterContext=r.reachesIntoOuterContext||0,t.precedenceFilterSuppressed=r.precedenceFilterSuppressed||!1),t}}var Wh=class Zo{constructor(e,t){this.checkContext(e,t),e=bh(e),t=bh(t,!0),this.state=e.state!==null?e.state:t.state,this.alt=e.alt!==null?e.alt:t.alt,this.context=e.context!==null?e.context:t.context,this.semanticContext=e.semanticContext!==null?e.semanticContext:t.semanticContext!==null?t.semanticContext:oe.NONE,this.reachesIntoOuterContext=t.reachesIntoOuterContext,this.precedenceFilterSuppressed=t.precedenceFilterSuppressed}checkContext(e,t){(e.context===null||e.context===void 0)&&(t===null||t.context===null||t.context===void 0)&&(this.context=null)}hashCode(){let e=new at;return this.updateHashCode(e),e.finish()}updateHashCode(e){e.update(this.state.stateNumber,this.alt,this.context,this.semanticContext)}equals(e){return this===e?!0:e instanceof Zo?this.state.stateNumber===e.state.stateNumber&&this.alt===e.alt&&(this.context===null?e.context===null:this.context.equals(e.context))&&this.semanticContext.equals(e.semanticContext)&&this.precedenceFilterSuppressed===e.precedenceFilterSuppressed:!1}hashCodeForConfigSet(){let e=new at;return e.update(this.state.stateNumber,this.alt,this.semanticContext),e.finish()}equalsForConfigSet(e){return this===e?!0:e instanceof Zo?this.state.stateNumber===e.state.stateNumber&&this.alt===e.alt&&this.semanticContext.equals(e.semanticContext):!1}toString(){return"("+this.state+","+this.alt+(this.context!==null?",["+this.context.toString()+"]":"")+(this.semanticContext!==oe.NONE?","+this.semanticContext.toString():"")+(this.reachesIntoOuterContext>0?",up="+this.reachesIntoOuterContext:"")+")"}},Et=class extends ct{get stateType(){return L.RULE_STOP}},ea=class extends At{constructor(r,e,t,s){super(r),this.ruleIndex=e,this.precedence=t,this.followState=s,this.serializationType=G.RULE,this.isEpsilon=!0}matches(r,e,t){return!1}},Vh=class extends At{constructor(r,e){super(r),this.serializationType=G.SET,e!=null?this.label=e:(this.label=new lt,this.label.addOne(I.INVALID_TYPE))}matches(r,e,t){return this.label.contains(r)}toString(){return this.label.toString()}},Kh=class extends Vh{constructor(r,e){super(r,e),this.serializationType=G.NOT_SET}matches(r,e,t){return r>=e&&r<=t&&!super.matches(r,e,t)}toString(){return"~"+super.toString()}},Hh=class extends At{constructor(r){super(r),this.serializationType=G.WILDCARD}matches(r,e,t){return r>=e&&r<=t}toString(){return"."}};function E0(r,e){return r=r.replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r"),e&&(r=r.replace(/ /g,"\xB7")),r}var ot={toStringTree:function(r,e,t){e=e||null,t=t||null,t!==null&&(e=t.ruleNames);let s=ot.getNodeText(r,e);s=E0(s,!1);let n=r.getChildCount();if(n===0)return s;let i="("+s+" ";n>0&&(s=ot.toStringTree(r.getChild(0),e),i=i.concat(s));for(let o=1;o<n;o++)s=ot.toStringTree(r.getChild(o),e),i=i.concat(" "+s);return i=i.concat(")"),i},getNodeText:function(r,e,t){if(e=e||null,t=t||null,t!==null&&(e=t.ruleNames),e!==null)if(r instanceof wr){let n=r.ruleContext.getAltNumber();return n!=0?e[r.ruleIndex]+":"+n:e[r.ruleIndex]}else{if(r instanceof la)return r.toString();if(r instanceof Tt&&r.symbol!==null)return r.symbol.text}let s=r.getPayload();return s instanceof I?s.text:r.getPayload().toString()},getChildren:function(r){let e=[];for(let t=0;t<r.getChildCount();t++)e.push(r.getChild(t));return e},getAncestors:function(r){let e=[];for(r=r.getParent();r!==null;)e=[r].concat(e),r=r.getParent();return e},findAllTokenNodes:function(r,e){return ot.findAllNodes(r,e,!0)},findAllRuleNodes:function(r,e){return ot.findAllNodes(r,e,!1)},findAllNodes:function(r,e,t){let s=[];return ot._findAllNodes(r,e,t,s),s},_findAllNodes:function(r,e,t,s){t&&r instanceof Tt?r.symbol.type===e&&s.push(r):!t&&r instanceof wr&&r.ruleIndex===e&&s.push(r);for(let n=0;n<r.getChildCount();n++)ot._findAllNodes(r.getChild(n),e,t,s)},descendants:function(r){let e=[r];for(let t=0;t<r.getChildCount();t++)e=e.concat(ot.descendants(r.getChild(t)));return e}},wr=class extends Nh{constructor(r,e){super(),this._parent=r??null,this.children=null,this.invokingState=e??-1}get parent(){return this._parent}set parent(r){this._parent=r}depth(){let r=0,e=this;for(;e!==null;)e=e.parent,r+=1;return r}isEmpty(){return this.invokingState===-1}getSourceInterval(){return j.INVALID_INTERVAL}get ruleContext(){return this}get ruleIndex(){return-1}getPayload(){return this}getText(){return this.getChildCount()===0?"":this.children.map(function(r){return r.getText()}).join("")}getAltNumber(){return 0}setAltNumber(r){}setParent(r){this.parent=r}getChild(r){return null}getChildCount(){return 0}accept(r){return r.visitChildren(this)}toStringTree(r,e){return ot.toStringTree(this,r,e)}toString(r,e){r=r||null,e=e||null;let t=this,s="[";for(;t!==null&&t!==e;){if(r===null)t.isEmpty()||(s+=t.invokingState);else{let n=t.ruleIndex,i=n>=0&&n<r.length?r[n]:""+n;s+=i}t.parent!==null&&(r!==null||!t.parent.isEmpty())&&(s+=" "),t=t.parent}return s+="]",s}},A=class ta{constructor(e){this.cachedHashCode=e}isEmpty(){return this===ta.EMPTY}hasEmptyPath(){return this.getReturnState(this.length-1)===ta.EMPTY_RETURN_STATE}hashCode(){return this.cachedHashCode}updateHashCode(e){e.update(this.cachedHashCode)}};A.EMPTY=null;A.EMPTY_RETURN_STATE=2147483647;A.globalNodeCount=1;A.id=A.globalNodeCount;A.trace_atn_sim=!1;var Mt=class $h extends A{constructor(e,t){let s=new at;s.update(e,t);let n=s.finish();return super(n),this.parents=e,this.returnStates=t,this}isEmpty(){return this.returnStates[0]===A.EMPTY_RETURN_STATE}getParent(e){return this.parents[e]}getReturnState(e){return this.returnStates[e]}equals(e){return this===e?!0:e instanceof $h?this.hashCode()!==e.hashCode()?!1:fs(this.returnStates,e.returnStates)&&fs(this.parents,e.parents):!1}toString(){if(this.isEmpty())return"[]";{let e="[";for(let t=0;t<this.returnStates.length;t++){if(t>0&&(e=e+", "),this.returnStates[t]===A.EMPTY_RETURN_STATE){e=e+"$";continue}e=e+this.returnStates[t],this.parents[t]!==null?e=e+" "+this.parents[t]:e=e+"null"}return e+"]"}}get length(){return this.returnStates.length}},Ke=class ra extends A{constructor(e,t){let s=0,n=new at;e!==null?n.update(e,t):n.update(1),s=n.finish(),super(s),this.parent=e,this.returnState=t}getParent(e){return this.parent}getReturnState(e){return this.returnState}equals(e){return this===e?!0:e instanceof ra?this.hashCode()!==e.hashCode()||this.returnState!==e.returnState?!1:this.parent==null?e.parent==null:this.parent.equals(e.parent):!1}toString(){let e=this.parent===null?"":this.parent.toString();return e.length===0?this.returnState===A.EMPTY_RETURN_STATE?"$":""+this.returnState:""+this.returnState+" "+e}get length(){return 1}static create(e,t){return t===A.EMPTY_RETURN_STATE&&e===null?A.EMPTY:new ra(e,t)}},sa=class extends Ke{constructor(){super(null,A.EMPTY_RETURN_STATE)}isEmpty(){return!0}getParent(r){return null}getReturnState(r){return this.returnState}equals(r){return this===r}toString(){return"$"}};A.EMPTY=new sa;var ds="h-",ha=class{constructor(r,e){this.data={},this.hashFunction=r||qh,this.equalsFunction=e||Fh}set(r,e){let t=ds+this.hashFunction(r);if(t in this.data){let s=this.data[t];for(let n=0;n<s.length;n++){let i=s[n];if(this.equalsFunction(r,i.key)){let o=i.value;return i.value=e,o}}return s.push({key:r,value:e}),e}else return this.data[t]=[{key:r,value:e}],e}containsKey(r){let e=ds+this.hashFunction(r);if(e in this.data){let t=this.data[e];for(let s=0;s<t.length;s++){let n=t[s];if(this.equalsFunction(r,n.key))return!0}}return!1}get(r){let e=ds+this.hashFunction(r);if(e in this.data){let t=this.data[e];for(let s=0;s<t.length;s++){let n=t[s];if(this.equalsFunction(r,n.key))return n.value}}return null}entries(){return Object.keys(this.data).filter(r=>r.startsWith(ds)).flatMap(r=>this.data[r],this)}getKeys(){return this.entries().map(r=>r.key)}getValues(){return this.entries().map(r=>r.value)}toString(){return"["+this.entries().map(r=>"{"+r.key+":"+r.value+"}").join(", ")+"]"}get length(){return Object.keys(this.data).filter(r=>r.startsWith(ds)).map(r=>this.data[r].length,this).reduce((r,e)=>r+e,0)}};function zh(r,e){if(e==null&&(e=wr.EMPTY),e.parent===null||e===wr.EMPTY)return A.EMPTY;let t=zh(r,e.parent),s=r.states[e.invokingState].transitions[0];return Ke.create(t,s.followState.stateNumber)}function Yh(r,e,t){if(r.isEmpty())return r;let s=t.get(r)||null;if(s!==null)return s;if(s=e.get(r),s!==null)return t.set(r,s),s;let n=!1,i=[];for(let a=0;a<i.length;a++){let l=Yh(r.getParent(a),e,t);if(n||l!==r.getParent(a)){if(!n){i=[];for(let c=0;c<r.length;c++)i[c]=r.getParent(c);n=!0}i[a]=l}}if(!n)return e.add(r),t.set(r,r),r;let o=null;return i.length===0?o=A.EMPTY:i.length===1?o=Ke.create(i[0],r.getReturnState(0)):o=new Mt(i,r.returnStates),e.add(o),t.set(o,o),t.set(r,o),o}function pa(r,e,t,s){if(r===e)return r;if(r instanceof Ke&&e instanceof Ke)return A0(r,e,t,s);if(t){if(r instanceof sa)return r;if(e instanceof sa)return e}return r instanceof Ke&&(r=new Mt([r.getParent()],[r.returnState])),e instanceof Ke&&(e=new Mt([e.getParent()],[e.returnState])),T0(r,e,t,s)}function T0(r,e,t,s){if(s!==null){let u=s.get(r,e);if(u!==null||(u=s.get(e,r),u!==null))return A.trace_atn_sim&&console.log("mergeArrays a="+r+",b="+e+" -> previous"),u}let n=0,i=0,o=0,a=new Array(r.returnStates.length+e.returnStates.length).fill(0),l=new Array(r.returnStates.length+e.returnStates.length).fill(null);for(;n<r.returnStates.length&&i<e.returnStates.length;){let u=r.parents[n],d=e.parents[i];if(r.returnStates[n]===e.returnStates[i]){let p=r.returnStates[n];p===A.EMPTY_RETURN_STATE&&u===null&&d===null||u!==null&&d!==null&&u===d?(l[o]=u,a[o]=p):(l[o]=pa(u,d,t,s),a[o]=p),n+=1,i+=1}else r.returnStates[n]<e.returnStates[i]?(l[o]=u,a[o]=r.returnStates[n],n+=1):(l[o]=d,a[o]=e.returnStates[i],i+=1);o+=1}if(n<r.returnStates.length)for(let u=n;u<r.returnStates.length;u++)l[o]=r.parents[u],a[o]=r.returnStates[u],o+=1;else for(let u=i;u<e.returnStates.length;u++)l[o]=e.parents[u],a[o]=e.returnStates[u],o+=1;if(o<l.length){if(o===1){let u=Ke.create(l[0],a[0]);return s!==null&&s.set(r,e,u),u}l=l.slice(0,o),a=a.slice(0,o)}let c=new Mt(l,a);return c.equals(r)?(s!==null&&s.set(r,e,r),A.trace_atn_sim&&console.log("mergeArrays a="+r+",b="+e+" -> a"),r):c.equals(e)?(s!==null&&s.set(r,e,e),A.trace_atn_sim&&console.log("mergeArrays a="+r+",b="+e+" -> b"),e):(M0(l),s!==null&&s.set(r,e,c),A.trace_atn_sim&&console.log("mergeArrays a="+r+",b="+e+" -> "+c),c)}function M0(r){let e=new ha;for(let t=0;t<r.length;t++){let s=r[t];e.containsKey(s)||e.set(s,s)}for(let t=0;t<r.length;t++)r[t]=e.get(r[t])}function A0(r,e,t,s){if(s!==null){let i=s.get(r,e);if(i!==null||(i=s.get(e,r),i!==null))return i}let n=P0(r,e,t);if(n!==null)return s!==null&&s.set(r,e,n),n;if(r.returnState===e.returnState){let i=pa(r.parent,e.parent,t,s);if(i===r.parent)return r;if(i===e.parent)return e;let o=Ke.create(i,r.returnState);return s!==null&&s.set(r,e,o),o}else{let i=null;if((r===e||r.parent!==null&&r.parent===e.parent)&&(i=r.parent),i!==null){let c=[r.returnState,e.returnState];r.returnState>e.returnState&&(c[0]=e.returnState,c[1]=r.returnState);let u=[i,i],d=new Mt(u,c);return s!==null&&s.set(r,e,d),d}let o=[r.returnState,e.returnState],a=[r.parent,e.parent];r.returnState>e.returnState&&(o[0]=e.returnState,o[1]=r.returnState,a=[e.parent,r.parent]);let l=new Mt(a,o);return s!==null&&s.set(r,e,l),l}}function P0(r,e,t){if(t){if(r===A.EMPTY||e===A.EMPTY)return A.EMPTY}else{if(r===A.EMPTY&&e===A.EMPTY)return A.EMPTY;if(r===A.EMPTY){let s=[e.returnState,A.EMPTY_RETURN_STATE],n=[e.parent,null];return new Mt(n,s)}else if(e===A.EMPTY){let s=[r.returnState,A.EMPTY_RETURN_STATE],n=[r.parent,null];return new Mt(n,s)}}return null}var Ih=class{constructor(){this.data=[]}clear(r){r===void 0?this.data=[]:(this.resize(r),this.data[r>>>5]&=~(1<<r))}or(r){let e=Math.min(this.data.length,r.data.length),t=0;for(;t+7<e;t+=8)this.data[t]|=r.data[t],this.data[t+1]|=r.data[t+1],this.data[t+2]|=r.data[t+2],this.data[t+3]|=r.data[t+3],this.data[t+4]|=r.data[t+4],this.data[t+5]|=r.data[t+5],this.data[t+6]|=r.data[t+6],this.data[t+7]|=r.data[t+7];for(;t<e;++t)this.data[t]|=r.data[t];if(this.data.length<r.data.length){this.resize((r.data.length<<5)-1);let s=r.data.length;for(let n=e;n<s;++n)this.data[n]=r.data[n]}}get(r){return(this.data[r>>>5]&1<<r)!==0}get length(){let r=0,e=this.data.length,t=this.data;for(let s=0;s<e;s++)r+=this.bitCount(t[s]);return r}values(){let r=new Array(this.length()),e=0,t=this.data.length;for(let s=0;s<t;++s){let n=this.data[s];for(;n!=0;){let i=n&-n;r[e++]=(s<<5)+this.bitCount(i-1|0),n^=i}}return r}nextSetBit(r){for(let e of this)if(e>r)return e}set(r){this.resize(r),this.data[r>>>5]|=1<<r}toString(){return"{"+this.values().join(", ")+"}"}resize(r){let e=r+32>>>5;for(let t=this.data.length;t<e;t++)this.data[t]=0}bitCount(r){return r-=r>>>1&1431655765,r=(r&858993459)+(r>>>2&858993459),(r+(r>>>4)&252645135)*16843009>>>24}[Symbol.iterator](){let r=this.data.length,e=0,t=this.data[e],s=this.bitCount,n=this.data;return{[Symbol.iterator](){return this},next(){for(;e<r;)if(t!==0){let i=t&-t,o=(e<<5)+s(i-1|0);return t^=i,{done:!1,value:o}}else e++,e<r&&(t=n[e]);return{done:!0,value:void 0}}}}},Qh=class na{constructor(e){this.atn=e}getDecisionLookahead(e){if(e===null)return null;let t=e.transitions.length,s=[];for(let n=0;n<t;n++){s[n]=new lt;let i=new He,o=!1;this._LOOK(e.transition(n).target,null,A.EMPTY,s[n],i,new Ih,o,!1),(s[n].length===0||s[n].contains(na.HIT_PRED))&&(s[n]=null)}return s}LOOK(e,t,s){let n=new lt,i=!0;s=s||null;let o=s!==null?zh(e.atn,s):null;return this._LOOK(e,t,o,n,new He,new Ih,i,!0),n}_LOOK(e,t,s,n,i,o,a,l){let c=new Wh({state:e,alt:0,context:s},null);if(!i.has(c)){if(i.add(c),e===t){if(s===null){n.addOne(I.EPSILON);return}else if(s.isEmpty()&&l){n.addOne(I.EOF);return}}if(e instanceof Et){if(s===null){n.addOne(I.EPSILON);return}else if(s.isEmpty()&&l){n.addOne(I.EOF);return}if(s!==A.EMPTY){let u=o.get(e.ruleIndex);try{o.clear(e.ruleIndex);for(let d=0;d<s.length;d++){let p=this.atn.states[s.getReturnState(d)];this._LOOK(p,t,s.getParent(d),n,i,o,a,l)}}finally{u&&o.set(e.ruleIndex)}return}}for(let u=0;u<e.transitions.length;u++){let d=e.transitions[u];if(d.constructor===ea){if(o.get(d.target.ruleIndex))continue;let p=Ke.create(s,d.followState.stateNumber);try{o.set(d.target.ruleIndex),this._LOOK(d.target,t,p,n,i,o,a,l)}finally{o.clear(d.target.ruleIndex)}}else if(d instanceof da)a?this._LOOK(d.target,t,s,n,i,o,a,l):n.addOne(na.HIT_PRED);else if(d.isEpsilon)this._LOOK(d.target,t,s,n,i,o,a,l);else if(d.constructor===Hh)n.addRange(I.MIN_USER_TOKEN_TYPE,this.atn.maxTokenType);else{let p=d.label;p!==null&&(d instanceof Kh&&(p=p.complement(I.MIN_USER_TOKEN_TYPE,this.atn.maxTokenType)),n.addSet(p))}}}}};Qh.HIT_PRED=I.INVALID_TYPE;var Ln=class{constructor(r,e){this.grammarType=r,this.maxTokenType=e,this.states=[],this.decisionToState=[],this.ruleToStartState=[],this.ruleToStopState=[],this.modeNameToStartState={},this.ruleToTokenType=[],this.lexerActions=[],this.modeToStartState=[]}nextTokensInContext(r,e){return new Qh(this).LOOK(r,null,e)}nextTokensNoContext(r){return r.nextTokenWithinRule!==null||(r.nextTokenWithinRule=this.nextTokensInContext(r,null),r.nextTokenWithinRule.readOnly=!0),r.nextTokenWithinRule}nextTokens(r,e){return e===void 0?this.nextTokensNoContext(r):this.nextTokensInContext(r,e)}addState(r){r!==null&&(r.atn=this,r.stateNumber=this.states.length),this.states.push(r)}removeState(r){this.states[r.stateNumber]=null}defineDecisionState(r){return this.decisionToState.push(r),r.decision=this.decisionToState.length-1,r.decision}getDecisionState(r){return this.decisionToState.length===0?null:this.decisionToState[r]}getExpectedTokens(r,e){if(r<0||r>=this.states.length)throw"Invalid state number.";let t=this.states[r],s=this.nextTokens(t);if(!s.contains(I.EPSILON))return s;let n=new lt;for(n.addSet(s),n.removeOne(I.EPSILON);e!==null&&e.invokingState>=0&&s.contains(I.EPSILON);){let i=this.states[e.invokingState].transitions[0];s=this.nextTokens(i.followState),n.addSet(s),n.removeOne(I.EPSILON),e=e.parent}return s.contains(I.EPSILON)&&n.addOne(I.EOF),n}};Ln.INVALID_ALT_NUMBER=0;var Pn={LEXER:0,PARSER:1},vh=class extends ct{get stateType(){return L.BASIC}},Cr=class extends ct{constructor(){return super(),this.decision=-1,this.nonGreedy=!1,this}},xr=class extends Cr{constructor(){return super(),this.endState=null,this}},Bo=class extends ct{get stateType(){return L.BLOCK_END}},Ir=class extends ct{get stateType(){return L.LOOP_END}},yh=class extends ct{constructor(){super(),this.isPrecedenceRule=!1}get stateType(){return L.RULE_START}},_0=class extends Cr{get stateType(){return L.TOKEN_START}},xh=class extends Cr{get stateType(){return L.PLUS_LOOP_BACK}},jo=class extends ct{get stateType(){return L.STAR_LOOP_BACK}},Yt=class extends Cr{constructor(){super(),this.precedenceRuleDecision=!1}get stateType(){return L.STAR_LOOP_ENTRY}},Wo=class extends xr{get stateType(){return L.PLUS_BLOCK_START}},Vo=class extends xr{get stateType(){return L.STAR_BLOCK_START}},wh=class extends xr{get stateType(){return L.BLOCK_START}},Ko=class extends At{constructor(r,e){super(r),this.label_=e,this.label=this.makeLabel(),this.serializationType=G.ATOM}makeLabel(){let r=new lt;return r.addOne(this.label_),r}matches(r,e,t){return this.label_===r}toString(){return this.label_}},Ch=class extends At{constructor(r,e,t){super(r),this.serializationType=G.RANGE,this.start=e,this.stop=t,this.label=this.makeLabel()}makeLabel(){let r=new lt;return r.addRange(this.start,this.stop),r}matches(r,e,t){return r>=this.start&&r<=this.stop}toString(){return"'"+String.fromCharCode(this.start)+"'..'"+String.fromCharCode(this.stop)+"'"}},k0=class extends At{constructor(r,e,t,s){super(r),this.serializationType=G.ACTION,this.ruleIndex=e,this.actionIndex=t===void 0?-1:t,this.isCtxDependent=s===void 0?!1:s,this.isEpsilon=!0}matches(r,e,t){return!1}toString(){return"action_"+this.ruleIndex+":"+this.actionIndex}},hs=class extends At{constructor(r,e){super(r),this.serializationType=G.EPSILON,this.isEpsilon=!0,this.outermostPrecedenceReturn=e}matches(r,e,t){return!1}toString(){return"epsilon"}},Jh=class Xh extends oe{constructor(e){super(),this.precedence=e===void 0?0:e}evaluate(e,t){return e.precpred(t,this.precedence)}evalPrecedence(e,t){return e.precpred(t,this.precedence)?oe.NONE:null}compareTo(e){return this.precedence-e.precedence}updateHashCode(e){e.update(this.precedence)}equals(e){return this===e?!0:e instanceof Xh?this.precedence===e.precedence:!1}toString(){return"{"+this.precedence+">=prec}?"}};oe.PrecedencePredicate=Jh;var R0=class extends da{constructor(r,e){super(r),this.serializationType=G.PRECEDENCE,this.precedence=e,this.isEpsilon=!0}matches(r,e,t){return!1}getPredicate(){return new Jh(this.precedence)}toString(){return this.precedence+" >= _p"}},Ss=class{constructor(r){r===void 0&&(r=null),this.readOnly=!1,this.verifyATN=r===null?!0:r.verifyATN,this.generateRuleBypassTransitions=r===null?!1:r.generateRuleBypassTransitions}};Ss.defaultOptions=new Ss;Ss.defaultOptions.readOnly=!0;var Ie={CHANNEL:0,CUSTOM:1,MODE:2,MORE:3,POP_MODE:4,PUSH_MODE:5,SKIP:6,TYPE:7},ut=class{constructor(r){this.actionType=r,this.isPositionDependent=!1}hashCode(){let r=new at;return this.updateHashCode(r),r.finish()}updateHashCode(r){r.update(this.actionType)}equals(r){return this===r}},ia=class extends ut{constructor(){super(Ie.SKIP)}execute(r){r.skip()}toString(){return"skip"}};ia.INSTANCE=new ia;var D0=class Zh extends ut{constructor(e){super(Ie.CHANNEL),this.channel=e}execute(e){e._channel=this.channel}updateHashCode(e){e.update(this.actionType,this.channel)}equals(e){return this===e?!0:e instanceof Zh?this.channel===e.channel:!1}toString(){return"channel("+this.channel+")"}},N0=class ep extends ut{constructor(e,t){super(Ie.CUSTOM),this.ruleIndex=e,this.actionIndex=t,this.isPositionDependent=!0}execute(e){e.action(null,this.ruleIndex,this.actionIndex)}updateHashCode(e){e.update(this.actionType,this.ruleIndex,this.actionIndex)}equals(e){return this===e?!0:e instanceof ep?this.ruleIndex===e.ruleIndex&&this.actionIndex===e.actionIndex:!1}},oa=class extends ut{constructor(){super(Ie.MORE)}execute(r){r.more()}toString(){return"more"}};oa.INSTANCE=new oa;var O0=class tp extends ut{constructor(e){super(Ie.TYPE),this.type=e}execute(e){e.type=this.type}updateHashCode(e){e.update(this.actionType,this.type)}equals(e){return this===e?!0:e instanceof tp?this.type===e.type:!1}toString(){return"type("+this.type+")"}},L0=class rp extends ut{constructor(e){super(Ie.PUSH_MODE),this.mode=e}execute(e){e.pushMode(this.mode)}updateHashCode(e){e.update(this.actionType,this.mode)}equals(e){return this===e?!0:e instanceof rp?this.mode===e.mode:!1}toString(){return"pushMode("+this.mode+")"}},aa=class extends ut{constructor(){super(Ie.POP_MODE)}execute(r){r.popMode()}toString(){return"popMode"}};aa.INSTANCE=new aa;var q0=class sp extends ut{constructor(e){super(Ie.MODE),this.mode=e}execute(e){e.mode(this.mode)}updateHashCode(e){e.update(this.actionType,this.mode)}equals(e){return this===e?!0:e instanceof sp?this.mode===e.mode:!1}toString(){return"mode("+this.mode+")"}},Ho=4;function _n(r,e){let t=[];return t[r-1]=e,t.map(function(s){return e})}var np=class{constructor(r){r==null&&(r=Ss.defaultOptions),this.deserializationOptions=r,this.stateFactories=null,this.actionFactories=null}deserialize(r){let e=this.reset(r);this.checkVersion(e),e&&this.skipUUID();let t=this.readATN();this.readStates(t,e),this.readRules(t,e),this.readModes(t);let s=[];return this.readSets(t,s,this.readInt.bind(this)),e&&this.readSets(t,s,this.readInt32.bind(this)),this.readEdges(t,s),this.readDecisions(t),this.readLexerActions(t,e),this.markPrecedenceDecisions(t),this.verifyATN(t),this.deserializationOptions.generateRuleBypassTransitions&&t.grammarType===Pn.PARSER&&(this.generateRuleBypassTransitions(t),this.verifyATN(t)),t}reset(r){if((r.charCodeAt?r.charCodeAt(0):r[0])===Ho-1){let e=function(s){let n=s.charCodeAt(0);return n>1?n-2:n+65534},t=r.split("").map(e);return t[0]=r.charCodeAt(0),this.data=t,this.pos=0,!0}else return this.data=r,this.pos=0,!1}skipUUID(){let r=0;for(;r++<8;)this.readInt()}checkVersion(r){let e=this.readInt();if(!r&&e!==Ho)throw"Could not deserialize ATN with version "+e+" (expected "+Ho+")."}readATN(){let r=this.readInt(),e=this.readInt();return new Ln(r,e)}readStates(r,e){let t,s,n,i=[],o=[],a=this.readInt();for(let u=0;u<a;u++){let d=this.readInt();if(d===L.INVALID_TYPE){r.addState(null);continue}let p=this.readInt();e&&p===65535&&(p=-1);let f=this.stateFactory(d,p);if(d===L.LOOP_END){let C=this.readInt();i.push([f,C])}else if(f instanceof xr){let C=this.readInt();o.push([f,C])}r.addState(f)}for(t=0;t<i.length;t++)s=i[t],s[0].loopBackState=r.states[s[1]];for(t=0;t<o.length;t++)s=o[t],s[0].endState=r.states[s[1]];let l=this.readInt();for(t=0;t<l;t++)n=this.readInt(),r.states[n].nonGreedy=!0;let c=this.readInt();for(t=0;t<c;t++)n=this.readInt(),r.states[n].isPrecedenceRule=!0}readRules(r,e){let t,s=this.readInt();for(r.grammarType===Pn.LEXER&&(r.ruleToTokenType=_n(s,0)),r.ruleToStartState=_n(s,0),t=0;t<s;t++){let n=this.readInt();if(r.ruleToStartState[t]=r.states[n],r.grammarType===Pn.LEXER){let i=this.readInt();e&&i===65535&&(i=I.EOF),r.ruleToTokenType[t]=i}}for(r.ruleToStopState=_n(s,0),t=0;t<r.states.length;t++){let n=r.states[t];n instanceof Et&&(r.ruleToStopState[n.ruleIndex]=n,r.ruleToStartState[n.ruleIndex].stopState=n)}}readModes(r){let e=this.readInt();for(let t=0;t<e;t++){let s=this.readInt();r.modeToStartState.push(r.states[s])}}readSets(r,e,t){let s=this.readInt();for(let n=0;n<s;n++){let i=new lt;e.push(i);let o=this.readInt();this.readInt()!==0&&i.addOne(-1);for(let a=0;a<o;a++){let l=t(),c=t();i.addRange(l,c)}}}readEdges(r,e){let t,s,n,i,o,a=this.readInt();for(t=0;t<a;t++){let l=this.readInt(),c=this.readInt(),u=this.readInt(),d=this.readInt(),p=this.readInt(),f=this.readInt();i=this.edgeFactory(r,u,l,c,d,p,f,e),r.states[l].addTransition(i)}for(t=0;t<r.states.length;t++)for(n=r.states[t],s=0;s<n.transitions.length;s++){let l=n.transitions[s];if(!(l instanceof ea))continue;let c=-1;r.ruleToStartState[l.target.ruleIndex].isPrecedenceRule&&l.precedence===0&&(c=l.target.ruleIndex),i=new hs(l.followState,c),r.ruleToStopState[l.target.ruleIndex].addTransition(i)}for(t=0;t<r.states.length;t++){if(n=r.states[t],n instanceof xr){if(n.endState===null||n.endState.startState)throw"IllegalState";n.endState.startState=n}if(n instanceof xh)for(s=0;s<n.transitions.length;s++)o=n.transitions[s].target,o instanceof Wo&&(o.loopBackState=n);else if(n instanceof jo)for(s=0;s<n.transitions.length;s++)o=n.transitions[s].target,o instanceof Yt&&(o.loopBackState=n)}}readDecisions(r){let e=this.readInt();for(let t=0;t<e;t++){let s=this.readInt(),n=r.states[s];r.decisionToState.push(n),n.decision=t}}readLexerActions(r,e){if(r.grammarType===Pn.LEXER){let t=this.readInt();r.lexerActions=_n(t,null);for(let s=0;s<t;s++){let n=this.readInt(),i=this.readInt();e&&i===65535&&(i=-1);let o=this.readInt();e&&o===65535&&(o=-1),r.lexerActions[s]=this.lexerActionFactory(n,i,o)}}}generateRuleBypassTransitions(r){let e,t=r.ruleToStartState.length;for(e=0;e<t;e++)r.ruleToTokenType[e]=r.maxTokenType+e+1;for(e=0;e<t;e++)this.generateRuleBypassTransition(r,e)}generateRuleBypassTransition(r,e){let t,s,n=new wh;n.ruleIndex=e,r.addState(n);let i=new Bo;i.ruleIndex=e,r.addState(i),n.endState=i,r.defineDecisionState(n),i.startState=n;let o=null,a=null;if(r.ruleToStartState[e].isPrecedenceRule){for(a=null,t=0;t<r.states.length;t++)if(s=r.states[t],this.stateIsEndStateFor(s,e)){a=s,o=s.loopBackState.transitions[0];break}if(o===null)throw"Couldn't identify final state of the precedence rule prefix section."}else a=r.ruleToStopState[e];for(t=0;t<r.states.length;t++){s=r.states[t];for(let d=0;d<s.transitions.length;d++){let p=s.transitions[d];p!==o&&p.target===a&&(p.target=i)}}let l=r.ruleToStartState[e],c=l.transitions.length;for(;c>0;)n.addTransition(l.transitions[c-1]),l.transitions=l.transitions.slice(-1);r.ruleToStartState[e].addTransition(new hs(n)),i.addTransition(new hs(a));let u=new vh;r.addState(u),u.addTransition(new Ko(i,r.ruleToTokenType[e])),n.addTransition(new hs(u))}stateIsEndStateFor(r,e){if(r.ruleIndex!==e||!(r instanceof Yt))return null;let t=r.transitions[r.transitions.length-1].target;return t instanceof Ir&&t.epsilonOnlyTransitions&&t.transitions[0].target instanceof Et?r:null}markPrecedenceDecisions(r){for(let e=0;e<r.states.length;e++){let t=r.states[e];if(t instanceof Yt&&r.ruleToStartState[t.ruleIndex].isPrecedenceRule){let s=t.transitions[t.transitions.length-1].target;s instanceof Ir&&s.epsilonOnlyTransitions&&s.transitions[0].target instanceof Et&&(t.precedenceRuleDecision=!0)}}}verifyATN(r){if(this.deserializationOptions.verifyATN)for(let e=0;e<r.states.length;e++){let t=r.states[e];if(t!==null)if(this.checkCondition(t.epsilonOnlyTransitions||t.transitions.length<=1),t instanceof Wo)this.checkCondition(t.loopBackState!==null);else if(t instanceof Yt)if(this.checkCondition(t.loopBackState!==null),this.checkCondition(t.transitions.length===2),t.transitions[0].target instanceof Vo)this.checkCondition(t.transitions[1].target instanceof Ir),this.checkCondition(!t.nonGreedy);else if(t.transitions[0].target instanceof Ir)this.checkCondition(t.transitions[1].target instanceof Vo),this.checkCondition(t.nonGreedy);else throw"IllegalState";else t instanceof jo?(this.checkCondition(t.transitions.length===1),this.checkCondition(t.transitions[0].target instanceof Yt)):t instanceof Ir?this.checkCondition(t.loopBackState!==null):t instanceof yh?this.checkCondition(t.stopState!==null):t instanceof xr?this.checkCondition(t.endState!==null):t instanceof Bo?this.checkCondition(t.startState!==null):t instanceof Cr?this.checkCondition(t.transitions.length<=1||t.decision>=0):this.checkCondition(t.transitions.length<=1||t instanceof Et)}}checkCondition(r,e){if(!r)throw e==null&&(e="IllegalState"),e}readInt(){return this.data[this.pos++]}readInt32(){let r=this.readInt(),e=this.readInt();return r|e<<16}edgeFactory(r,e,t,s,n,i,o,a){let l=r.states[s];switch(e){case G.EPSILON:return new hs(l);case G.RANGE:return o!==0?new Ch(l,I.EOF,i):new Ch(l,n,i);case G.RULE:return new ea(r.states[n],i,o,l);case G.PREDICATE:return new jh(l,n,i,o!==0);case G.PRECEDENCE:return new R0(l,n);case G.ATOM:return o!==0?new Ko(l,I.EOF):new Ko(l,n);case G.ACTION:return new k0(l,n,i,o!==0);case G.SET:return new Vh(l,a[n]);case G.NOT_SET:return new Kh(l,a[n]);case G.WILDCARD:return new Hh(l);default:throw"The specified transition type: "+e+" is not valid."}}stateFactory(r,e){if(this.stateFactories===null){let t=[];t[L.INVALID_TYPE]=null,t[L.BASIC]=()=>new vh,t[L.RULE_START]=()=>new yh,t[L.BLOCK_START]=()=>new wh,t[L.PLUS_BLOCK_START]=()=>new Wo,t[L.STAR_BLOCK_START]=()=>new Vo,t[L.TOKEN_START]=()=>new _0,t[L.RULE_STOP]=()=>new Et,t[L.BLOCK_END]=()=>new Bo,t[L.STAR_LOOP_BACK]=()=>new jo,t[L.STAR_LOOP_ENTRY]=()=>new Yt,t[L.PLUS_LOOP_BACK]=()=>new xh,t[L.LOOP_END]=()=>new Ir,this.stateFactories=t}if(r>this.stateFactories.length||this.stateFactories[r]===null)throw"The specified state type "+r+" is not valid.";{let t=this.stateFactories[r]();if(t!==null)return t.ruleIndex=e,t}}lexerActionFactory(r,e,t){if(this.actionFactories===null){let s=[];s[Ie.CHANNEL]=(n,i)=>new D0(n),s[Ie.CUSTOM]=(n,i)=>new N0(n,i),s[Ie.MODE]=(n,i)=>new q0(n),s[Ie.MORE]=(n,i)=>oa.INSTANCE,s[Ie.POP_MODE]=(n,i)=>aa.INSTANCE,s[Ie.PUSH_MODE]=(n,i)=>new L0(n),s[Ie.SKIP]=(n,i)=>ia.INSTANCE,s[Ie.TYPE]=(n,i)=>new O0(n),this.actionFactories=s}if(r>this.actionFactories.length||this.actionFactories[r]===null)throw"The specified lexer action type "+r+" is not valid.";return this.actionFactories[r](e,t)}},F0=class{visitTerminal(r){}visitErrorNode(r){}enterEveryRule(r){}exitEveryRule(r){}},G0=class extends F0{constructor(r){super(),this.parser=r}enterEveryRule(r){console.log("enter   "+this.parser.ruleNames[r.ruleIndex]+", LT(1)="+this.parser._input.LT(1).text)}visitTerminal(r){console.log("consume "+r.symbol+" rule "+this.parser.ruleNames[this.parser._ctx.ruleIndex])}exitEveryRule(r){console.log("exit    "+this.parser.ruleNames[r.ruleIndex]+", LT(1)="+this.parser._input.LT(1).text)}},U0=class extends _h{constructor(r){super(),this._input=null,this.errorHandler=new C0,this._precedenceStack=[],this._precedenceStack.push(0),this._ctx=null,this.buildParseTrees=!0,this._tracer=null,this._parseListeners=null,this._syntaxErrors=0,this.tokenStream=r}get context(){return this._ctx}reset(){this._input!==null&&this._input.seek(0),this.errorHandler.reset(this),this._ctx=null,this._syntaxErrors=0,this.setTrace(!1),this._precedenceStack=[],this._precedenceStack.push(0),this.interpreter!==null&&this.interpreter.reset()}match(r){let e=this.getCurrentToken();return e.type===r?(this.errorHandler.reportMatch(this),this.consume()):(e=this.errorHandler.recoverInline(this),this.buildParseTrees&&e.tokenIndex===-1&&this._ctx.addErrorNode(e)),e}matchWildcard(){let r=this.getCurrentToken();return r.type>0?(this.errorHandler.reportMatch(this),this.consume()):(r=this.errorHandler.recoverInline(this),this.buildParseTrees&&r.tokenIndex===-1&&this._ctx.addErrorNode(r)),r}getParseListeners(){return this._parseListeners||[]}addParseListener(r){if(r===null)throw"listener";this._parseListeners===null&&(this._parseListeners=[]),this._parseListeners.push(r)}removeParseListener(r){if(this._parseListeners!==null){let e=this._parseListeners.indexOf(r);e>=0&&this._parseListeners.splice(e,1),this._parseListeners.length===0&&(this._parseListeners=null)}}removeParseListeners(){this._parseListeners=null}triggerEnterRuleEvent(){if(this._parseListeners!==null){let r=this._ctx;this._parseListeners.forEach(function(e){e.enterEveryRule(r),r.enterRule(e)})}}triggerExitRuleEvent(){if(this._parseListeners!==null){let r=this._ctx;this._parseListeners.slice(0).reverse().forEach(function(e){r.exitRule(e),e.exitEveryRule(r)})}}getTokenFactory(){return this._input.tokenSource._factory}setTokenFactory(r){this._input.tokenSource._factory=r}getATNWithBypassAlts(){let r=this.getSerializedATN();if(r===null)throw"The current parser does not support an ATN with bypass alternatives.";let e=this.bypassAltsAtnCache[r];if(e===null){let t=new Ss;t.generateRuleBypassTransitions=!0,e=new np(t).deserialize(r),this.bypassAltsAtnCache[r]=e}return e}get tokenStream(){return this._input}set tokenStream(r){this._input=null,this.reset(),this._input=r}get inputStream(){return this._input}set inputStream(r){this.tokenStream=r}get syntaxErrorsCount(){return this._syntaxErrors}getCurrentToken(){return this._input.LT(1)}notifyErrorListeners(r,e,t){e=e||null,t=t||null,e===null&&(e=this.getCurrentToken()),this._syntaxErrors+=1;let s=e.line,n=e.column;this.getErrorListenerDispatch().syntaxError(this,e,s,n,r,t)}consume(){let r=this.getCurrentToken();r.type!==I.EOF&&this.tokenStream.consume();let e=this._parseListeners!==null&&this._parseListeners.length>0;if(this.buildParseTrees||e){let t;this.errorHandler.inErrorRecoveryMode(this)?t=this._ctx.addErrorNode(r):t=this._ctx.addTokenNode(r),t.invokingState=this.state,e&&this._parseListeners.forEach(function(s){t instanceof la||t.isErrorNode!==void 0&&t.isErrorNode()?s.visitErrorNode(t):t instanceof Tt&&s.visitTerminal(t)})}return r}addContextToParseTree(){this._ctx.parent!==null&&this._ctx.parent.addChild(this._ctx)}enterRule(r,e,t){this.state=e,this._ctx=r,this._ctx.start=this._input.LT(1),this.buildParseTrees&&this.addContextToParseTree(),this.triggerEnterRuleEvent()}exitRule(){this._ctx.stop=this._input.LT(-1),this.triggerExitRuleEvent(),this.state=this._ctx.invokingState,this._ctx=this._ctx.parent}enterOuterAlt(r,e){r.setAltNumber(e),this.buildParseTrees&&this._ctx!==r&&this._ctx.parent!==null&&(this._ctx.parent.removeLastChild(),this._ctx.parent.addChild(r)),this._ctx=r}getPrecedence(){return this._precedenceStack.length===0?-1:this._precedenceStack[this._precedenceStack.length-1]}enterRecursionRule(r,e,t,s){this.state=e,this._precedenceStack.push(s),this._ctx=r,this._ctx.start=this._input.LT(1),this.triggerEnterRuleEvent()}pushNewRecursionContext(r,e,t){let s=this._ctx;s._parent=r,s.invokingState=e,s.stop=this._input.LT(-1),this._ctx=r,this._ctx.start=s.start,this.buildParseTrees&&this._ctx.addChild(s),this.triggerEnterRuleEvent()}unrollRecursionContexts(r){this._precedenceStack.pop(),this._ctx.stop=this._input.LT(-1);let e=this._ctx,t=this.getParseListeners();if(t!==null&&t.length>0)for(;this._ctx!==r;)this.triggerExitRuleEvent(),this._ctx=this._ctx.parent;else this._ctx=r;e._parent=r,this.buildParseTrees&&r!==null&&r.addChild(e)}getInvokingContext(r){let e=this._ctx;for(;e!==null;){if(e.ruleIndex===r)return e;e=e.parent}return null}precpred(r,e){return e>=this._precedenceStack[this._precedenceStack.length-1]}inContext(r){return!1}isExpectedToken(r){let e=this.interpreter.atn,t=this._ctx,s=e.states[this.state],n=e.nextTokens(s);if(n.contains(r))return!0;if(!n.contains(I.EPSILON))return!1;for(;t!==null&&t.invokingState>=0&&n.contains(I.EPSILON);){let i=e.states[t.invokingState].transitions[0];if(n=e.nextTokens(i.followState),n.contains(r))return!0;t=t.parent}return!!(n.contains(I.EPSILON)&&r===I.EOF)}getExpectedTokens(){return this.interpreter.atn.getExpectedTokens(this.state,this._ctx)}getExpectedTokensWithinCurrentRule(){let r=this.interpreter.atn,e=r.states[this.state];return r.nextTokens(e)}getRuleIndex(r){let e=this.getRuleIndexMap().get(r);return e!==null?e:-1}getRuleInvocationStack(r){r=r||null,r===null&&(r=this._ctx);let e=[];for(;r!==null;){let t=r.ruleIndex;t<0?e.push("n/a"):e.push(this.ruleNames[t]),r=r.parent}return e}getDFAStrings(){return this.interpreter.decisionToDFA.toString()}dumpDFA(){let r=!1;for(let e=0;e<this.interpreter.decisionToDFA.length;e++){let t=this.interpreter.decisionToDFA[e];t.states.length>0&&(r&&console.log(),console.log("Decision "+t.decision+":"),console.log(t.toString(this.vocabulary)),r=!0)}}getSourceName(){return this._input.sourceName}setTrace(r){r?(this._tracer!==null&&this.removeParseListener(this._tracer),this._tracer=new G0(this),this.addParseListener(this._tracer)):(this.removeParseListener(this._tracer),this._tracer=null)}createTerminalNode(r,e){return new ca(e)}createErrorNode(r,e){return new Jo(e)}};U0.bypassAltsAtnCache={};function B0(r){return r.hashCodeForConfigSet()}function j0(r,e){return r===e?!0:r===null||e===null?!1:r.equalsForConfigSet(e)}var bs=class ip{constructor(e){this.configLookup=new He(B0,j0),this.fullCtx=e===void 0?!0:e,this.readOnly=!1,this.configs=[],this.uniqueAlt=0,this.conflictingAlts=null,this.hasSemanticContext=!1,this.dipsIntoOuterContext=!1,this.cachedHashCode=-1}add(e,t){if(t===void 0&&(t=null),this.readOnly)throw"This set is readonly";e.semanticContext!==oe.NONE&&(this.hasSemanticContext=!0),e.reachesIntoOuterContext>0&&(this.dipsIntoOuterContext=!0);let s=this.configLookup.add(e);if(s===e)return this.cachedHashCode=-1,this.configs.push(e),!0;let n=!this.fullCtx,i=pa(s.context,e.context,n,t);return s.reachesIntoOuterContext=Math.max(s.reachesIntoOuterContext,e.reachesIntoOuterContext),e.precedenceFilterSuppressed&&(s.precedenceFilterSuppressed=!0),s.context=i,!0}getStates(){let e=new He;for(let t=0;t<this.configs.length;t++)e.add(this.configs[t].state);return e}getPredicates(){let e=[];for(let t=0;t<this.configs.length;t++){let s=this.configs[t].semanticContext;s!==oe.NONE&&e.push(s.semanticContext)}return e}optimizeConfigs(e){if(this.readOnly)throw"This set is readonly";if(this.configLookup.length!==0)for(let t=0;t<this.configs.length;t++){let s=this.configs[t];s.context=e.getCachedContext(s.context)}}addAll(e){for(let t=0;t<e.length;t++)this.add(e[t]);return!1}equals(e){return this===e||e instanceof ip&&fs(this.configs,e.configs)&&this.fullCtx===e.fullCtx&&this.uniqueAlt===e.uniqueAlt&&this.conflictingAlts===e.conflictingAlts&&this.hasSemanticContext===e.hasSemanticContext&&this.dipsIntoOuterContext===e.dipsIntoOuterContext}hashCode(){let e=new at;return e.update(this.configs),e.finish()}updateHashCode(e){this.readOnly?(this.cachedHashCode===-1&&(this.cachedHashCode=this.hashCode()),e.update(this.cachedHashCode)):e.update(this.hashCode())}isEmpty(){return this.configs.length===0}contains(e){if(this.configLookup===null)throw"This method is not implemented for readonly sets.";return this.configLookup.contains(e)}containsFast(e){if(this.configLookup===null)throw"This method is not implemented for readonly sets.";return this.configLookup.containsFast(e)}clear(){if(this.readOnly)throw"This set is readonly";this.configs=[],this.cachedHashCode=-1,this.configLookup=new He}setReadonly(e){this.readOnly=e,e&&(this.configLookup=null)}toString(){return ua(this.configs)+(this.hasSemanticContext?",hasSemanticContext="+this.hasSemanticContext:"")+(this.uniqueAlt!==Ln.INVALID_ALT_NUMBER?",uniqueAlt="+this.uniqueAlt:"")+(this.conflictingAlts!==null?",conflictingAlts="+this.conflictingAlts:"")+(this.dipsIntoOuterContext?",dipsIntoOuterContext":"")}get items(){return this.configs}get length(){return this.configs.length}},On=class op{constructor(e,t){return e===null&&(e=-1),t===null&&(t=new bs),this.stateNumber=e,this.configs=t,this.edges=null,this.isAcceptState=!1,this.prediction=0,this.lexerActionExecutor=null,this.requiresFullContext=!1,this.predicates=null,this}getAltSet(){let e=new He;if(this.configs!==null)for(let t=0;t<this.configs.length;t++){let s=this.configs[t];e.add(s.alt)}return e.length===0?null:e}equals(e){return this===e||e instanceof op&&this.configs.equals(e.configs)}toString(){let e=""+this.stateNumber+":"+this.configs;return this.isAcceptState&&(e=e+"=>",this.predicates!==null?e=e+this.predicates:e=e+this.prediction),e}hashCode(){let e=new at;return e.update(this.configs),e.finish()}},ms=class{constructor(r,e){return this.atn=r,this.sharedContextCache=e,this}getCachedContext(r){if(this.sharedContextCache===null)return r;let e=new ha;return Yh(r,this.sharedContextCache,e)}};ms.ERROR=new On(2147483647,new bs);var Eh=class extends bs{constructor(){super(),this.configLookup=new He}},Xe=class Nn extends Wh{constructor(e,t){super(e,t);let s=e.lexerActionExecutor||null;return this.lexerActionExecutor=s||(t!==null?t.lexerActionExecutor:null),this.passedThroughNonGreedyDecision=t!==null?this.checkNonGreedyDecision(t,this.state):!1,this.hashCodeForConfigSet=Nn.prototype.hashCode,this.equalsForConfigSet=Nn.prototype.equals,this}updateHashCode(e){e.update(this.state.stateNumber,this.alt,this.context,this.semanticContext,this.passedThroughNonGreedyDecision,this.lexerActionExecutor)}equals(e){return this===e||e instanceof Nn&&this.passedThroughNonGreedyDecision===e.passedThroughNonGreedyDecision&&(this.lexerActionExecutor?this.lexerActionExecutor.equals(e.lexerActionExecutor):!e.lexerActionExecutor)&&super.equals(e)}checkNonGreedyDecision(e,t){return e.passedThroughNonGreedyDecision||t instanceof Cr&&t.nonGreedy}},$o=class ap extends ut{constructor(e,t){super(t.actionType),this.offset=e,this.action=t,this.isPositionDependent=!0}execute(e){this.action.execute(e)}updateHashCode(e){e.update(this.actionType,this.offset,this.action)}equals(e){return this===e?!0:e instanceof ap?this.offset===e.offset&&this.action===e.action:!1}},W0=class gs{constructor(e){return this.lexerActions=e===null?[]:e,this.cachedHashCode=at.hashStuff(e),this}fixOffsetBeforeMatch(e){let t=null;for(let s=0;s<this.lexerActions.length;s++)this.lexerActions[s].isPositionDependent&&!(this.lexerActions[s]instanceof $o)&&(t===null&&(t=this.lexerActions.concat([])),t[s]=new $o(e,this.lexerActions[s]));return t===null?this:new gs(t)}execute(e,t,s){let n=!1,i=t.index;try{for(let o=0;o<this.lexerActions.length;o++){let a=this.lexerActions[o];if(a instanceof $o){let l=a.offset;t.seek(s+l),a=a.action,n=s+l!==i}else a.isPositionDependent&&(t.seek(i),n=!1);a.execute(e)}}finally{n&&t.seek(i)}}hashCode(){return this.cachedHashCode}updateHashCode(e){e.update(this.cachedHashCode)}equals(e){if(this===e)return!0;if(e instanceof gs){if(this.cachedHashCode!=e.cachedHashCode||this.lexerActions.length!=e.lexerActions.length)return!1;{let t=this.lexerActions.length;for(let s=0;s<t;++s)if(!this.lexerActions[s].equals(e.lexerActions[s]))return!1;return!0}}else return!1}static append(e,t){if(e===null)return new gs([t]);let s=e.lexerActions.concat([t]);return new gs(s)}};function Th(r){r.index=-1,r.line=0,r.column=-1,r.dfaState=null}var V0=class{constructor(){Th(this)}reset(){Th(this)}},vs=class ie extends ms{constructor(e,t,s,n){super(t,n),this.decisionToDFA=s,this.recog=e,this.startIndex=-1,this.line=1,this.column=0,this.mode=me.DEFAULT_MODE,this.prevAccept=new V0}copyState(e){this.column=e.column,this.line=e.line,this.mode=e.mode,this.startIndex=e.startIndex}match(e,t){this.mode=t;let s=e.mark();try{this.startIndex=e.index,this.prevAccept.reset();let n=this.decisionToDFA[t];return n.s0===null?this.matchATN(e):this.execATN(e,n.s0)}finally{e.release(s)}}reset(){this.prevAccept.reset(),this.startIndex=-1,this.line=1,this.column=0,this.mode=me.DEFAULT_MODE}matchATN(e){let t=this.atn.modeToStartState[this.mode];ie.debug&&console.log("matchATN mode "+this.mode+" start: "+t);let s=this.mode,n=this.computeStartState(e,t),i=n.hasSemanticContext;n.hasSemanticContext=!1;let o=this.addDFAState(n);i||(this.decisionToDFA[this.mode].s0=o);let a=this.execATN(e,o);return ie.debug&&console.log("DFA after matchATN: "+this.decisionToDFA[s].toLexerString()),a}execATN(e,t){ie.debug&&console.log("start state closure="+t.configs),t.isAcceptState&&this.captureSimState(this.prevAccept,e,t);let s=e.LA(1),n=t;for(;;){ie.debug&&console.log("execATN loop starting closure: "+n.configs);let i=this.getExistingTargetState(n,s);if(i===null&&(i=this.computeTargetState(e,n,s)),i===ms.ERROR||(s!==I.EOF&&this.consume(e),i.isAcceptState&&(this.captureSimState(this.prevAccept,e,i),s===I.EOF)))break;s=e.LA(1),n=i}return this.failOrAccept(this.prevAccept,e,n.configs,s)}getExistingTargetState(e,t){if(e.edges===null||t<ie.MIN_DFA_EDGE||t>ie.MAX_DFA_EDGE)return null;let s=e.edges[t-ie.MIN_DFA_EDGE];return s===void 0&&(s=null),ie.debug&&s!==null&&console.log("reuse state "+e.stateNumber+" edge to "+s.stateNumber),s}computeTargetState(e,t,s){let n=new Eh;return this.getReachableConfigSet(e,t.configs,n,s),n.items.length===0?(n.hasSemanticContext||this.addDFAEdge(t,s,ms.ERROR),ms.ERROR):this.addDFAEdge(t,s,null,n)}failOrAccept(e,t,s,n){if(this.prevAccept.dfaState!==null){let i=e.dfaState.lexerActionExecutor;return this.accept(t,i,this.startIndex,e.index,e.line,e.column),e.dfaState.prediction}else{if(n===I.EOF&&t.index===this.startIndex)return I.EOF;throw new Rh(this.recog,t,this.startIndex,s)}}getReachableConfigSet(e,t,s,n){let i=Ln.INVALID_ALT_NUMBER;for(let o=0;o<t.items.length;o++){let a=t.items[o],l=a.alt===i;if(!(l&&a.passedThroughNonGreedyDecision)){ie.debug&&console.log(`testing %s at %s
`,this.getTokenName(n),a.toString(this.recog,!0));for(let c=0;c<a.state.transitions.length;c++){let u=a.state.transitions[c],d=this.getReachableTarget(u,n);if(d!==null){let p=a.lexerActionExecutor;p!==null&&(p=p.fixOffsetBeforeMatch(e.index-this.startIndex));let f=n===I.EOF,C=new Xe({state:d,lexerActionExecutor:p},a);this.closure(e,C,s,l,!0,f)&&(i=a.alt)}}}}}accept(e,t,s,n,i,o){ie.debug&&console.log(`ACTION %s
`,t),e.seek(n),this.line=i,this.column=o,t!==null&&this.recog!==null&&t.execute(this.recog,e,s)}getReachableTarget(e,t){return e.matches(t,0,me.MAX_CHAR_VALUE)?e.target:null}computeStartState(e,t){let s=A.EMPTY,n=new Eh;for(let i=0;i<t.transitions.length;i++){let o=t.transitions[i].target,a=new Xe({state:o,alt:i+1,context:s},null);this.closure(e,a,n,!1,!1,!1)}return n}closure(e,t,s,n,i,o){let a=null;if(ie.debug&&console.log("closure("+t.toString(this.recog,!0)+")"),t.state instanceof Et){if(ie.debug&&(this.recog!==null?console.log(`closure at %s rule stop %s
`,this.recog.ruleNames[t.state.ruleIndex],t):console.log(`closure at rule stop %s
`,t)),t.context===null||t.context.hasEmptyPath()){if(t.context===null||t.context.isEmpty())return s.add(t),!0;s.add(new Xe({state:t.state,context:A.EMPTY},t)),n=!0}if(t.context!==null&&!t.context.isEmpty()){for(let l=0;l<t.context.length;l++)if(t.context.getReturnState(l)!==A.EMPTY_RETURN_STATE){let c=t.context.getParent(l),u=this.atn.states[t.context.getReturnState(l)];a=new Xe({state:u,context:c},t),n=this.closure(e,a,s,n,i,o)}}return n}t.state.epsilonOnlyTransitions||(!n||!t.passedThroughNonGreedyDecision)&&s.add(t);for(let l=0;l<t.state.transitions.length;l++){let c=t.state.transitions[l];a=this.getEpsilonTarget(e,t,c,s,i,o),a!==null&&(n=this.closure(e,a,s,n,i,o))}return n}getEpsilonTarget(e,t,s,n,i,o){let a=null;if(s.serializationType===G.RULE){let l=Ke.create(t.context,s.followState.stateNumber);a=new Xe({state:s.target,context:l},t)}else{if(s.serializationType===G.PRECEDENCE)throw"Precedence predicates are not supported in lexers.";if(s.serializationType===G.PREDICATE)ie.debug&&console.log("EVAL rule "+s.ruleIndex+":"+s.predIndex),n.hasSemanticContext=!0,this.evaluatePredicate(e,s.ruleIndex,s.predIndex,i)&&(a=new Xe({state:s.target},t));else if(s.serializationType===G.ACTION)if(t.context===null||t.context.hasEmptyPath()){let l=W0.append(t.lexerActionExecutor,this.atn.lexerActions[s.actionIndex]);a=new Xe({state:s.target,lexerActionExecutor:l},t)}else a=new Xe({state:s.target},t);else s.serializationType===G.EPSILON?a=new Xe({state:s.target},t):(s.serializationType===G.ATOM||s.serializationType===G.RANGE||s.serializationType===G.SET)&&o&&s.matches(I.EOF,0,me.MAX_CHAR_VALUE)&&(a=new Xe({state:s.target},t))}return a}evaluatePredicate(e,t,s,n){if(this.recog===null)return!0;if(!n)return this.recog.sempred(null,t,s);let i=this.column,o=this.line,a=e.index,l=e.mark();try{return this.consume(e),this.recog.sempred(null,t,s)}finally{this.column=i,this.line=o,e.seek(a),e.release(l)}}captureSimState(e,t,s){e.index=t.index,e.line=this.line,e.column=this.column,e.dfaState=s}addDFAEdge(e,t,s,n){if(s===void 0&&(s=null),n===void 0&&(n=null),s===null&&n!==null){let i=n.hasSemanticContext;if(n.hasSemanticContext=!1,s=this.addDFAState(n),i)return s}return t<ie.MIN_DFA_EDGE||t>ie.MAX_DFA_EDGE||(ie.debug&&console.log("EDGE "+e+" -> "+s+" upon "+t),e.edges===null&&(e.edges=[]),e.edges[t-ie.MIN_DFA_EDGE]=s),s}addDFAState(e){let t=new On(null,e),s=null;for(let a=0;a<e.items.length;a++){let l=e.items[a];if(l.state instanceof Et){s=l;break}}s!==null&&(t.isAcceptState=!0,t.lexerActionExecutor=s.lexerActionExecutor,t.prediction=this.atn.ruleToTokenType[s.state.ruleIndex]);let n=this.decisionToDFA[this.mode],i=n.states.get(t);if(i!==null)return i;let o=t;return o.stateNumber=n.states.length,e.setReadonly(!0),o.configs=e,n.states.add(o),o}getDFA(e){return this.decisionToDFA[e]}getText(e){return e.getText(this.startIndex,e.index-1)}consume(e){e.LA(1)===`
`.charCodeAt(0)?(this.line+=1,this.column=0):this.column+=1,e.consume()}getTokenName(e){return e===-1?"EOF":"'"+String.fromCharCode(e)+"'"}};vs.debug=!1;vs.dfa_debug=!1;vs.MIN_DFA_EDGE=0;vs.MAX_DFA_EDGE=127;var K0=class{constructor(){this.cache=new ha}add(r){if(r===A.EMPTY)return A.EMPTY;let e=this.cache.get(r)||null;return e!==null?e:(this.cache.set(r,r),r)}get(r){return this.cache.get(r)||null}get length(){return this.cache.length}},lp=class{constructor(r,e,t){this.dfa=r,this.literalNames=e||[],this.symbolicNames=t||[]}toString(){if(this.dfa.s0===null)return null;let r="",e=this.dfa.sortedStates();for(let t=0;t<e.length;t++){let s=e[t];if(s.edges!==null){let n=s.edges.length;for(let i=0;i<n;i++){let o=s.edges[i]||null;o!==null&&o.stateNumber!==2147483647&&(r=r.concat(this.getStateString(s)),r=r.concat("-"),r=r.concat(this.getEdgeLabel(i)),r=r.concat("->"),r=r.concat(this.getStateString(o)),r=r.concat(`
`))}}}return r.length===0?null:r}getEdgeLabel(r){return r===0?"EOF":this.literalNames!==null||this.symbolicNames!==null?this.literalNames[r-1]||this.symbolicNames[r-1]:String.fromCharCode(r-1)}getStateString(r){let e=(r.isAcceptState?":":"")+"s"+r.stateNumber+(r.requiresFullContext?"^":"");return r.isAcceptState?r.predicates!==null?e+"=>"+ua(r.predicates):e+"=>"+r.prediction.toString():e}},H0=class extends lp{constructor(r){super(r,null)}getEdgeLabel(r){return"'"+String.fromCharCode(r)+"'"}},$0=class{constructor(r,e){if(e===void 0&&(e=0),this.atnStartState=r,this.decision=e,this._states=new He,this.s0=null,this.precedenceDfa=!1,r instanceof Yt&&r.precedenceRuleDecision){this.precedenceDfa=!0;let t=new On(null,new bs);t.edges=[],t.isAcceptState=!1,t.requiresFullContext=!1,this.s0=t}}getPrecedenceStartState(r){if(!this.precedenceDfa)throw"Only precedence DFAs may contain a precedence start state.";return r<0||r>=this.s0.edges.length?null:this.s0.edges[r]||null}setPrecedenceStartState(r,e){if(!this.precedenceDfa)throw"Only precedence DFAs may contain a precedence start state.";r<0||(this.s0.edges[r]=e)}setPrecedenceDfa(r){if(this.precedenceDfa!==r){if(this._states=new He,r){let e=new On(null,new bs);e.edges=[],e.isAcceptState=!1,e.requiresFullContext=!1,this.s0=e}else this.s0=null;this.precedenceDfa=r}}sortedStates(){return this._states.values().sort(function(r,e){return r.stateNumber-e.stateNumber})}toString(r,e){return r=r||null,e=e||null,this.s0===null?"":new lp(this,r,e).toString()}toLexerString(){return this.s0===null?"":new H0(this).toString()}get states(){return this._states}};var z0=class extends wr{constructor(r,e){super(r,e),this.children=null,this.start=null,this.stop=null,this.exception=null}copyFrom(r){this._parent=r._parent,this.invokingState=r.invokingState,this.children=null,this.start=r.start,this.stop=r.stop,r.children&&(this.children=[],r.children.map(function(e){e instanceof Jo&&(this.children.push(e),e.parent=this)},this))}enterRule(r){}exitRule(r){}addChild(r){return this.children===null&&(this.children=[]),this.children.push(r),r}removeLastChild(){this.children!==null&&this.children.pop()}addTokenNode(r){let e=new ca(r);return this.addChild(e),e.parent=this,e}addErrorNode(r){let e=new Jo(r);return this.addChild(e),e.parent=this,e}getChild(r,e){if(e=e??null,this.children===null||r<0||r>=this.children.length)return null;if(e===null)return this.children[r];for(let t=0;t<this.children.length;t++){let s=this.children[t];if(s instanceof e){if(r===0)return s;r-=1}}return null}getToken(r,e){if(this.children===null||e<0||e>=this.children.length)return null;for(let t=0;t<this.children.length;t++){let s=this.children[t];if(s instanceof Tt&&s.symbol.type===r){if(e===0)return s;e-=1}}return null}getTokens(r){if(this.children===null)return[];{let e=[];for(let t=0;t<this.children.length;t++){let s=this.children[t];s instanceof Tt&&s.symbol.type===r&&e.push(s)}return e}}getRuleContext(r,e){return this.getChild(r,e)}getRuleContexts(r){if(this.children===null)return[];{let e=[];for(let t=0;t<this.children.length;t++){let s=this.children[t];s instanceof r&&e.push(s)}return e}}getChildCount(){return this.children===null?0:this.children.length}getSourceInterval(){return this.start===null||this.stop===null?j.INVALID_INTERVAL:new j(this.start.tokenIndex,this.stop.tokenIndex)}};wr.EMPTY=new z0;var Mh=class{walk(r,e){if(e instanceof la||e.isErrorNode!==void 0&&e.isErrorNode())r.visitErrorNode(e);else if(e instanceof Tt)r.visitTerminal(e);else{this.enterRule(r,e);for(let t=0;t<e.getChildCount();t++){let s=e.getChild(t);this.walk(r,s)}this.exitRule(r,e)}}enterRule(r,e){let t=e.ruleContext;r.enterEveryRule(t),t.enterRule(r)}exitRule(r,e){let t=e.ruleContext;t.exitRule(r),r.exitEveryRule(t)}};Mh.DEFAULT=new Mh;var mI=class J extends me{static TOKEN_REF=1;static RULE_REF=2;static ANYWHERE=3;static ROOT=4;static WILDCARD=5;static BANG=6;static ID=7;static STRING=8;static EOF=I.EOF;static channelNames=["DEFAULT_TOKEN_CHANNEL","HIDDEN"];static literalNames=[null,null,null,"'//'","'/'","'*'","'!'"];static symbolicNames=[null,"TOKEN_REF","RULE_REF","ANYWHERE","ROOT","WILDCARD","BANG","ID","STRING"];static modeNames=["DEFAULT_MODE"];static ruleNames=["ANYWHERE","ROOT","WILDCARD","BANG","ID","NameChar","NameStartChar","STRING"];constructor(e){super(e),this.interpreter=new vs(this,J._ATN,J.decisionsToDFA,new K0)}get grammarFileName(){return"XPathLexer.g4"}get literalNames(){return J.literalNames}get symbolicNames(){return J.symbolicNames}get ruleNames(){return J.ruleNames}get serializedATN(){return J._serializedATN}get channelNames(){return J.channelNames}get modeNames(){return J.modeNames}action(e,t,s){switch(t){case 4:this.ID_action(e,s);break}}ID_action(e,t){switch(t){case 0:{let s=this.text;s.charAt(0)===s.charAt(0).toUpperCase()?this._type=J.TOKEN_REF:this._type=J.RULE_REF;break}}}static _serializedATN=[4,0,8,48,6,-1,2,0,7,0,2,1,7,1,2,2,7,2,2,3,7,3,2,4,7,4,2,5,7,5,2,6,7,6,2,7,7,7,1,0,1,0,1,0,1,1,1,1,1,2,1,2,1,3,1,3,1,4,1,4,5,4,29,8,4,10,4,12,4,32,9,4,1,4,1,4,1,5,1,5,1,6,1,6,1,7,1,7,5,7,42,8,7,10,7,12,7,45,9,7,1,7,1,7,1,43,0,8,1,3,3,4,5,5,7,6,9,7,11,0,13,0,15,8,1,0,2,784,0,0,8,14,27,48,57,65,90,95,95,97,122,127,159,170,170,173,173,181,181,186,186,192,214,216,246,248,705,710,721,736,740,748,748,750,750,768,884,886,887,890,893,895,895,902,902,904,906,908,908,910,929,931,1013,1015,1153,1155,1159,1162,1327,1329,1366,1369,1369,1376,1416,1425,1469,1471,1471,1473,1474,1476,1477,1479,1479,1488,1514,1519,1522,1536,1541,1552,1562,1564,1564,1568,1641,1646,1747,1749,1757,1759,1768,1770,1788,1791,1791,1807,1866,1869,1969,1984,2037,2042,2042,2045,2045,2048,2093,2112,2139,2144,2154,2160,2183,2185,2190,2192,2193,2200,2403,2406,2415,2417,2435,2437,2444,2447,2448,2451,2472,2474,2480,2482,2482,2486,2489,2492,2500,2503,2504,2507,2510,2519,2519,2524,2525,2527,2531,2534,2545,2556,2556,2558,2558,2561,2563,2565,2570,2575,2576,2579,2600,2602,2608,2610,2611,2613,2614,2616,2617,2620,2620,2622,2626,2631,2632,2635,2637,2641,2641,2649,2652,2654,2654,2662,2677,2689,2691,2693,2701,2703,2705,2707,2728,2730,2736,2738,2739,2741,2745,2748,2757,2759,2761,2763,2765,2768,2768,2784,2787,2790,2799,2809,2815,2817,2819,2821,2828,2831,2832,2835,2856,2858,2864,2866,2867,2869,2873,2876,2884,2887,2888,2891,2893,2901,2903,2908,2909,2911,2915,2918,2927,2929,2929,2946,2947,2949,2954,2958,2960,2962,2965,2969,2970,2972,2972,2974,2975,2979,2980,2984,2986,2990,3001,3006,3010,3014,3016,3018,3021,3024,3024,3031,3031,3046,3055,3072,3084,3086,3088,3090,3112,3114,3129,3132,3140,3142,3144,3146,3149,3157,3158,3160,3162,3165,3165,3168,3171,3174,3183,3200,3203,3205,3212,3214,3216,3218,3240,3242,3251,3253,3257,3260,3268,3270,3272,3274,3277,3285,3286,3293,3294,3296,3299,3302,3311,3313,3315,3328,3340,3342,3344,3346,3396,3398,3400,3402,3406,3412,3415,3423,3427,3430,3439,3450,3455,3457,3459,3461,3478,3482,3505,3507,3515,3517,3517,3520,3526,3530,3530,3535,3540,3542,3542,3544,3551,3558,3567,3570,3571,3585,3642,3648,3662,3664,3673,3713,3714,3716,3716,3718,3722,3724,3747,3749,3749,3751,3773,3776,3780,3782,3782,3784,3790,3792,3801,3804,3807,3840,3840,3864,3865,3872,3881,3893,3893,3895,3895,3897,3897,3902,3911,3913,3948,3953,3972,3974,3991,3993,4028,4038,4038,4096,4169,4176,4253,4256,4293,4295,4295,4301,4301,4304,4346,4348,4680,4682,4685,4688,4694,4696,4696,4698,4701,4704,4744,4746,4749,4752,4784,4786,4789,4792,4798,4800,4800,4802,4805,4808,4822,4824,4880,4882,4885,4888,4954,4957,4959,4992,5007,5024,5109,5112,5117,5121,5740,5743,5759,5761,5786,5792,5866,5870,5880,5888,5909,5919,5940,5952,5971,5984,5996,5998,6e3,6002,6003,6016,6099,6103,6103,6108,6109,6112,6121,6155,6169,6176,6264,6272,6314,6320,6389,6400,6430,6432,6443,6448,6459,6470,6509,6512,6516,6528,6571,6576,6601,6608,6617,6656,6683,6688,6750,6752,6780,6783,6793,6800,6809,6823,6823,6832,6845,6847,6862,6912,6988,6992,7001,7019,7027,7040,7155,7168,7223,7232,7241,7245,7293,7296,7304,7312,7354,7357,7359,7376,7378,7380,7418,7424,7957,7960,7965,7968,8005,8008,8013,8016,8023,8025,8025,8027,8027,8029,8029,8031,8061,8064,8116,8118,8124,8126,8126,8130,8132,8134,8140,8144,8147,8150,8155,8160,8172,8178,8180,8182,8188,8203,8207,8234,8238,8255,8256,8276,8276,8288,8292,8294,8303,8305,8305,8319,8319,8336,8348,8400,8412,8417,8417,8421,8432,8450,8450,8455,8455,8458,8467,8469,8469,8473,8477,8484,8484,8486,8486,8488,8488,8490,8493,8495,8505,8508,8511,8517,8521,8526,8526,8544,8584,11264,11492,11499,11507,11520,11557,11559,11559,11565,11565,11568,11623,11631,11631,11647,11670,11680,11686,11688,11694,11696,11702,11704,11710,11712,11718,11720,11726,11728,11734,11736,11742,11744,11775,11823,11823,12293,12295,12321,12335,12337,12341,12344,12348,12353,12438,12441,12442,12445,12447,12449,12538,12540,12543,12549,12591,12593,12686,12704,12735,12784,12799,13312,19903,19968,42124,42192,42237,42240,42508,42512,42539,42560,42607,42612,42621,42623,42737,42775,42783,42786,42888,42891,42954,42960,42961,42963,42963,42965,42969,42994,43047,43052,43052,43072,43123,43136,43205,43216,43225,43232,43255,43259,43259,43261,43309,43312,43347,43360,43388,43392,43456,43471,43481,43488,43518,43520,43574,43584,43597,43600,43609,43616,43638,43642,43714,43739,43741,43744,43759,43762,43766,43777,43782,43785,43790,43793,43798,43808,43814,43816,43822,43824,43866,43868,43881,43888,44010,44012,44013,44016,44025,44032,55203,55216,55238,55243,55291,63744,64109,64112,64217,64256,64262,64275,64279,64285,64296,64298,64310,64312,64316,64318,64318,64320,64321,64323,64324,64326,64433,64467,64829,64848,64911,64914,64967,65008,65019,65024,65039,65056,65071,65075,65076,65101,65103,65136,65140,65142,65276,65279,65279,65296,65305,65313,65338,65343,65343,65345,65370,65382,65470,65474,65479,65482,65487,65490,65495,65498,65500,65529,65531,65536,65547,65549,65574,65576,65594,65596,65597,65599,65613,65616,65629,65664,65786,65856,65908,66045,66045,66176,66204,66208,66256,66272,66272,66304,66335,66349,66378,66384,66426,66432,66461,66464,66499,66504,66511,66513,66517,66560,66717,66720,66729,66736,66771,66776,66811,66816,66855,66864,66915,66928,66938,66940,66954,66956,66962,66964,66965,66967,66977,66979,66993,66995,67001,67003,67004,67072,67382,67392,67413,67424,67431,67456,67461,67463,67504,67506,67514,67584,67589,67592,67592,67594,67637,67639,67640,67644,67644,67647,67669,67680,67702,67712,67742,67808,67826,67828,67829,67840,67861,67872,67897,67968,68023,68030,68031,68096,68099,68101,68102,68108,68115,68117,68119,68121,68149,68152,68154,68159,68159,68192,68220,68224,68252,68288,68295,68297,68326,68352,68405,68416,68437,68448,68466,68480,68497,68608,68680,68736,68786,68800,68850,68864,68903,68912,68921,69248,69289,69291,69292,69296,69297,69373,69404,69415,69415,69424,69456,69488,69509,69552,69572,69600,69622,69632,69702,69734,69749,69759,69818,69821,69821,69826,69826,69837,69837,69840,69864,69872,69881,69888,69940,69942,69951,69956,69959,69968,70003,70006,70006,70016,70084,70089,70092,70094,70106,70108,70108,70144,70161,70163,70199,70206,70209,70272,70278,70280,70280,70282,70285,70287,70301,70303,70312,70320,70378,70384,70393,70400,70403,70405,70412,70415,70416,70419,70440,70442,70448,70450,70451,70453,70457,70459,70468,70471,70472,70475,70477,70480,70480,70487,70487,70493,70499,70502,70508,70512,70516,70656,70730,70736,70745,70750,70753,70784,70853,70855,70855,70864,70873,71040,71093,71096,71104,71128,71133,71168,71232,71236,71236,71248,71257,71296,71352,71360,71369,71424,71450,71453,71467,71472,71481,71488,71494,71680,71738,71840,71913,71935,71942,71945,71945,71948,71955,71957,71958,71960,71989,71991,71992,71995,72003,72016,72025,72096,72103,72106,72151,72154,72161,72163,72164,72192,72254,72263,72263,72272,72345,72349,72349,72368,72440,72704,72712,72714,72758,72760,72768,72784,72793,72818,72847,72850,72871,72873,72886,72960,72966,72968,72969,72971,73014,73018,73018,73020,73021,73023,73031,73040,73049,73056,73061,73063,73064,73066,73102,73104,73105,73107,73112,73120,73129,73440,73462,73472,73488,73490,73530,73534,73538,73552,73561,73648,73648,73728,74649,74752,74862,74880,75075,77712,77808,77824,78933,82944,83526,92160,92728,92736,92766,92768,92777,92784,92862,92864,92873,92880,92909,92912,92916,92928,92982,92992,92995,93008,93017,93027,93047,93053,93071,93760,93823,93952,94026,94031,94087,94095,94111,94176,94177,94179,94180,94192,94193,94208,100343,100352,101589,101632,101640,110576,110579,110581,110587,110589,110590,110592,110882,110898,110898,110928,110930,110933,110933,110948,110951,110960,111355,113664,113770,113776,113788,113792,113800,113808,113817,113821,113822,113824,113827,118528,118573,118576,118598,119141,119145,119149,119170,119173,119179,119210,119213,119362,119364,119808,119892,119894,119964,119966,119967,119970,119970,119973,119974,119977,119980,119982,119993,119995,119995,119997,120003,120005,120069,120071,120074,120077,120084,120086,120092,120094,120121,120123,120126,120128,120132,120134,120134,120138,120144,120146,120485,120488,120512,120514,120538,120540,120570,120572,120596,120598,120628,120630,120654,120656,120686,120688,120712,120714,120744,120746,120770,120772,120779,120782,120831,121344,121398,121403,121452,121461,121461,121476,121476,121499,121503,121505,121519,122624,122654,122661,122666,122880,122886,122888,122904,122907,122913,122915,122916,122918,122922,122928,122989,123023,123023,123136,123180,123184,123197,123200,123209,123214,123214,123536,123566,123584,123641,124112,124153,124896,124902,124904,124907,124909,124910,124912,124926,124928,125124,125136,125142,125184,125259,125264,125273,126464,126467,126469,126495,126497,126498,126500,126500,126503,126503,126505,126514,126516,126519,126521,126521,126523,126523,126530,126530,126535,126535,126537,126537,126539,126539,126541,126543,126545,126546,126548,126548,126551,126551,126553,126553,126555,126555,126557,126557,126559,126559,126561,126562,126564,126564,126567,126570,126572,126578,126580,126583,126585,126588,126590,126590,126592,126601,126603,126619,126625,126627,126629,126633,126635,126651,130032,130041,131072,173791,173824,177977,177984,178205,178208,183969,183984,191456,194560,195101,196608,201546,201552,205743,917505,917505,917536,917631,917760,917999,662,0,65,90,97,122,170,170,181,181,186,186,192,214,216,246,248,705,710,721,736,740,748,748,750,750,880,884,886,887,890,893,895,895,902,902,904,906,908,908,910,929,931,1013,1015,1153,1162,1327,1329,1366,1369,1369,1376,1416,1488,1514,1519,1522,1568,1610,1646,1647,1649,1747,1749,1749,1765,1766,1774,1775,1786,1788,1791,1791,1808,1808,1810,1839,1869,1957,1969,1969,1994,2026,2036,2037,2042,2042,2048,2069,2074,2074,2084,2084,2088,2088,2112,2136,2144,2154,2160,2183,2185,2190,2208,2249,2308,2361,2365,2365,2384,2384,2392,2401,2417,2432,2437,2444,2447,2448,2451,2472,2474,2480,2482,2482,2486,2489,2493,2493,2510,2510,2524,2525,2527,2529,2544,2545,2556,2556,2565,2570,2575,2576,2579,2600,2602,2608,2610,2611,2613,2614,2616,2617,2649,2652,2654,2654,2674,2676,2693,2701,2703,2705,2707,2728,2730,2736,2738,2739,2741,2745,2749,2749,2768,2768,2784,2785,2809,2809,2821,2828,2831,2832,2835,2856,2858,2864,2866,2867,2869,2873,2877,2877,2908,2909,2911,2913,2929,2929,2947,2947,2949,2954,2958,2960,2962,2965,2969,2970,2972,2972,2974,2975,2979,2980,2984,2986,2990,3001,3024,3024,3077,3084,3086,3088,3090,3112,3114,3129,3133,3133,3160,3162,3165,3165,3168,3169,3200,3200,3205,3212,3214,3216,3218,3240,3242,3251,3253,3257,3261,3261,3293,3294,3296,3297,3313,3314,3332,3340,3342,3344,3346,3386,3389,3389,3406,3406,3412,3414,3423,3425,3450,3455,3461,3478,3482,3505,3507,3515,3517,3517,3520,3526,3585,3632,3634,3635,3648,3654,3713,3714,3716,3716,3718,3722,3724,3747,3749,3749,3751,3760,3762,3763,3773,3773,3776,3780,3782,3782,3804,3807,3840,3840,3904,3911,3913,3948,3976,3980,4096,4138,4159,4159,4176,4181,4186,4189,4193,4193,4197,4198,4206,4208,4213,4225,4238,4238,4256,4293,4295,4295,4301,4301,4304,4346,4348,4680,4682,4685,4688,4694,4696,4696,4698,4701,4704,4744,4746,4749,4752,4784,4786,4789,4792,4798,4800,4800,4802,4805,4808,4822,4824,4880,4882,4885,4888,4954,4992,5007,5024,5109,5112,5117,5121,5740,5743,5759,5761,5786,5792,5866,5870,5880,5888,5905,5919,5937,5952,5969,5984,5996,5998,6e3,6016,6067,6103,6103,6108,6108,6176,6264,6272,6276,6279,6312,6314,6314,6320,6389,6400,6430,6480,6509,6512,6516,6528,6571,6576,6601,6656,6678,6688,6740,6823,6823,6917,6963,6981,6988,7043,7072,7086,7087,7098,7141,7168,7203,7245,7247,7258,7293,7296,7304,7312,7354,7357,7359,7401,7404,7406,7411,7413,7414,7418,7418,7424,7615,7680,7957,7960,7965,7968,8005,8008,8013,8016,8023,8025,8025,8027,8027,8029,8029,8031,8061,8064,8116,8118,8124,8126,8126,8130,8132,8134,8140,8144,8147,8150,8155,8160,8172,8178,8180,8182,8188,8305,8305,8319,8319,8336,8348,8450,8450,8455,8455,8458,8467,8469,8469,8473,8477,8484,8484,8486,8486,8488,8488,8490,8493,8495,8505,8508,8511,8517,8521,8526,8526,8544,8584,11264,11492,11499,11502,11506,11507,11520,11557,11559,11559,11565,11565,11568,11623,11631,11631,11648,11670,11680,11686,11688,11694,11696,11702,11704,11710,11712,11718,11720,11726,11728,11734,11736,11742,11823,11823,12293,12295,12321,12329,12337,12341,12344,12348,12353,12438,12445,12447,12449,12538,12540,12543,12549,12591,12593,12686,12704,12735,12784,12799,13312,19903,19968,42124,42192,42237,42240,42508,42512,42527,42538,42539,42560,42606,42623,42653,42656,42735,42775,42783,42786,42888,42891,42954,42960,42961,42963,42963,42965,42969,42994,43009,43011,43013,43015,43018,43020,43042,43072,43123,43138,43187,43250,43255,43259,43259,43261,43262,43274,43301,43312,43334,43360,43388,43396,43442,43471,43471,43488,43492,43494,43503,43514,43518,43520,43560,43584,43586,43588,43595,43616,43638,43642,43642,43646,43695,43697,43697,43701,43702,43705,43709,43712,43712,43714,43714,43739,43741,43744,43754,43762,43764,43777,43782,43785,43790,43793,43798,43808,43814,43816,43822,43824,43866,43868,43881,43888,44002,44032,55203,55216,55238,55243,55291,63744,64109,64112,64217,64256,64262,64275,64279,64285,64285,64287,64296,64298,64310,64312,64316,64318,64318,64320,64321,64323,64324,64326,64433,64467,64829,64848,64911,64914,64967,65008,65019,65136,65140,65142,65276,65313,65338,65345,65370,65382,65470,65474,65479,65482,65487,65490,65495,65498,65500,65536,65547,65549,65574,65576,65594,65596,65597,65599,65613,65616,65629,65664,65786,65856,65908,66176,66204,66208,66256,66304,66335,66349,66378,66384,66421,66432,66461,66464,66499,66504,66511,66513,66517,66560,66717,66736,66771,66776,66811,66816,66855,66864,66915,66928,66938,66940,66954,66956,66962,66964,66965,66967,66977,66979,66993,66995,67001,67003,67004,67072,67382,67392,67413,67424,67431,67456,67461,67463,67504,67506,67514,67584,67589,67592,67592,67594,67637,67639,67640,67644,67644,67647,67669,67680,67702,67712,67742,67808,67826,67828,67829,67840,67861,67872,67897,67968,68023,68030,68031,68096,68096,68112,68115,68117,68119,68121,68149,68192,68220,68224,68252,68288,68295,68297,68324,68352,68405,68416,68437,68448,68466,68480,68497,68608,68680,68736,68786,68800,68850,68864,68899,69248,69289,69296,69297,69376,69404,69415,69415,69424,69445,69488,69505,69552,69572,69600,69622,69635,69687,69745,69746,69749,69749,69763,69807,69840,69864,69891,69926,69956,69956,69959,69959,69968,70002,70006,70006,70019,70066,70081,70084,70106,70106,70108,70108,70144,70161,70163,70187,70207,70208,70272,70278,70280,70280,70282,70285,70287,70301,70303,70312,70320,70366,70405,70412,70415,70416,70419,70440,70442,70448,70450,70451,70453,70457,70461,70461,70480,70480,70493,70497,70656,70708,70727,70730,70751,70753,70784,70831,70852,70853,70855,70855,71040,71086,71128,71131,71168,71215,71236,71236,71296,71338,71352,71352,71424,71450,71488,71494,71680,71723,71840,71903,71935,71942,71945,71945,71948,71955,71957,71958,71960,71983,71999,71999,72001,72001,72096,72103,72106,72144,72161,72161,72163,72163,72192,72192,72203,72242,72250,72250,72272,72272,72284,72329,72349,72349,72368,72440,72704,72712,72714,72750,72768,72768,72818,72847,72960,72966,72968,72969,72971,73008,73030,73030,73056,73061,73063,73064,73066,73097,73112,73112,73440,73458,73474,73474,73476,73488,73490,73523,73648,73648,73728,74649,74752,74862,74880,75075,77712,77808,77824,78895,78913,78918,82944,83526,92160,92728,92736,92766,92784,92862,92880,92909,92928,92975,92992,92995,93027,93047,93053,93071,93760,93823,93952,94026,94032,94032,94099,94111,94176,94177,94179,94179,94208,100343,100352,101589,101632,101640,110576,110579,110581,110587,110589,110590,110592,110882,110898,110898,110928,110930,110933,110933,110948,110951,110960,111355,113664,113770,113776,113788,113792,113800,113808,113817,119808,119892,119894,119964,119966,119967,119970,119970,119973,119974,119977,119980,119982,119993,119995,119995,119997,120003,120005,120069,120071,120074,120077,120084,120086,120092,120094,120121,120123,120126,120128,120132,120134,120134,120138,120144,120146,120485,120488,120512,120514,120538,120540,120570,120572,120596,120598,120628,120630,120654,120656,120686,120688,120712,120714,120744,120746,120770,120772,120779,122624,122654,122661,122666,122928,122989,123136,123180,123191,123197,123214,123214,123536,123565,123584,123627,124112,124139,124896,124902,124904,124907,124909,124910,124912,124926,124928,125124,125184,125251,125259,125259,126464,126467,126469,126495,126497,126498,126500,126500,126503,126503,126505,126514,126516,126519,126521,126521,126523,126523,126530,126530,126535,126535,126537,126537,126539,126539,126541,126543,126545,126546,126548,126548,126551,126551,126553,126553,126555,126555,126557,126557,126559,126559,126561,126562,126564,126564,126567,126570,126572,126578,126580,126583,126585,126588,126590,126590,126592,126601,126603,126619,126625,126627,126629,126633,126635,126651,131072,173791,173824,177977,177984,178205,178208,183969,183984,191456,194560,195101,196608,201546,201552,205743,47,0,1,1,0,0,0,0,3,1,0,0,0,0,5,1,0,0,0,0,7,1,0,0,0,0,9,1,0,0,0,0,15,1,0,0,0,1,17,1,0,0,0,3,20,1,0,0,0,5,22,1,0,0,0,7,24,1,0,0,0,9,26,1,0,0,0,11,35,1,0,0,0,13,37,1,0,0,0,15,39,1,0,0,0,17,18,5,47,0,0,18,19,5,47,0,0,19,2,1,0,0,0,20,21,5,47,0,0,21,4,1,0,0,0,22,23,5,42,0,0,23,6,1,0,0,0,24,25,5,33,0,0,25,8,1,0,0,0,26,30,3,13,6,0,27,29,3,11,5,0,28,27,1,0,0,0,29,32,1,0,0,0,30,28,1,0,0,0,30,31,1,0,0,0,31,33,1,0,0,0,32,30,1,0,0,0,33,34,6,4,0,0,34,10,1,0,0,0,35,36,7,0,0,0,36,12,1,0,0,0,37,38,7,1,0,0,38,14,1,0,0,0,39,43,5,39,0,0,40,42,9,0,0,0,41,40,1,0,0,0,42,45,1,0,0,0,43,44,1,0,0,0,43,41,1,0,0,0,44,46,1,0,0,0,45,43,1,0,0,0,46,47,5,39,0,0,47,16,1,0,0,0,3,0,30,43,1,1,4,0];static __ATN;static get _ATN(){return J.__ATN||(J.__ATN=new np().deserialize(J._serializedATN)),J.__ATN}static vocabulary=new Ct(J.literalNames,J.symbolicNames,[]);get vocabulary(){return J.vocabulary}static decisionsToDFA=J._ATN.decisionToState.map((e,t)=>new $0(e,t))};var y=class{constructor(){this.source=null,this.type=null,this.channel=null,this.start=null,this.stop=null,this.tokenIndex=null,this.line=null,this.column=null,this._text=null}getTokenSource(){return this.source[0]}getInputStream(){return this.source[1]}get text(){return this._text}set text(r){this._text=r}};y.INVALID_TYPE=0;y.EPSILON=-2;y.MIN_USER_TOKEN_TYPE=1;y.EOF=-1;y.DEFAULT_CHANNEL=0;y.HIDDEN_CHANNEL=1;var Y0=class{create(r,e,t,s,n,i,o,a){}},Ts=class Un extends y{constructor(e,t,s,n,i){super(),this.source=e!==void 0?e:Un.EMPTY_SOURCE,this.type=t!==void 0?t:null,this.channel=s!==void 0?s:y.DEFAULT_CHANNEL,this.start=n!==void 0?n:-1,this.stop=i!==void 0?i:-1,this.tokenIndex=-1,this.source[0]!==null?(this.line=e[0].line,this.column=e[0].column):this.column=-1}clone(){let e=new Un(this.source,this.type,this.channel,this.start,this.stop);return e.tokenIndex=this.tokenIndex,e.line=this.line,e.column=this.column,e.text=this.text,e}cloneWithType(e){let t=new Un(this.source,e,this.channel,this.start,this.stop);return t.tokenIndex=this.tokenIndex,t.line=this.line,t.column=this.column,e===y.EOF&&(t.text=""),t}toString(e){let t="";this._channel>0&&(t=",channel="+this.channel);let s=this.text;s?(s=s.replace(/\n/g,"\\n"),s=s.replace(/\r/g,"\\r"),s=s.replace(/\t/g,"\\t")):s="<no text>";let n=String(this.type);return e&&(n=e.vocabulary.getDisplayName(this.type)),"[@"+this.tokenIndex+","+this.start+":"+this.stop+"='"+s+"',<"+n+">"+t+","+this.line+":"+this.column+"]"}get text(){if(this._text!==null)return this._text;let e=this.getInputStream();if(e===null)return null;let t=e.size;return this.start<t&&this.stop<t?e.getText(this.start,this.stop):"<EOF>"}set text(e){this._text=e}};Ts.EMPTY_SOURCE=[null,null];var W=class Ge{constructor(e,t){this.start=e,this.stop=t}static of(e,t){return e!=t||e<0||e>Ge.INTERVAL_POOL_MAX_VALUE?new Ge(e,t):(Ge.cache[e]===null&&(Ge.cache[e]=new Ge(e,e)),Ge.cache[e])}equals(e){return e instanceof Ge?this.start===e.start&&this.stop===e.stop:!1}hashCode(){let e=23;return e=e*31+this.start,e=e*31+this.stop,e}startsBeforeDisjoint(e){return this.start<e.start&&this.stop<e.start}startsBeforeNonDisjoint(e){return this.start<=e.start&&this.stop>=e.start}startsAfter(e){return this.start>e.start}startsAfterDisjoint(e){return this.start>e.stop}startsAfterNonDisjoint(e){return this.start>e.start&&this.start<=e.stop}disjoint(e){return this.startsBeforeDisjoint(e)||this.startsAfterDisjoint(e)}adjacent(e){return this.start===e.stop+1||this.stop===e.start-1}properlyContains(e){return e.start>=this.start&&e.stop<=this.stop}union(e){return Ge.of(Math.min(this.start,e.start),Math.max(this.stop,e.stop))}intersection(e){return Ge.of(Math.max(this.start,e.start),Math.min(this.stop,e.stop))}differenceNotProperlyContained(e){let t=null;return e.startsBeforeNonDisjoint(this)?t=Ge.of(Math.max(this.start,e.stop+1),this.stop):e.startsAfterNonDisjoint(this)&&(t=Ge.of(this.start,e.start-1)),t}toString(){return this.start===this.stop?this.start.toString():this.start.toString()+".."+this.stop.toString()}get length(){return this.stop<this.start?0:this.stop-this.start+1}};W.INVALID_INTERVAL=new W(-1,-2);W.INTERVAL_POOL_MAX_VALUE=1e3;W.cache=new Array(W.INTERVAL_POOL_MAX_VALUE+1);W.cache.fill(null);var Ip=class{syntaxError(r,e,t,s,n,i){}reportAmbiguity(r,e,t,s,n,i,o){}reportAttemptingFullContext(r,e,t,s,n,i){}reportContextSensitivity(r,e,t,s,n,i){}},xa=class extends Ip{constructor(){super()}syntaxError(r,e,t,s,n,i){console.error("line "+t+":"+s+" "+n)}};xa.INSTANCE=new xa;var Q0=class extends Ip{constructor(r){if(super(),r===null)throw"delegates";return this.delegates=r,this}syntaxError(r,e,t,s,n,i){this.delegates.map(o=>o.syntaxError(r,e,t,s,n,i))}reportAmbiguity(r,e,t,s,n,i,o){this.delegates.map(a=>a.reportAmbiguity(r,e,t,s,n,i,o))}reportAttemptingFullContext(r,e,t,s,n,i){this.delegates.map(o=>o.reportAttemptingFullContext(r,e,t,s,n,i))}reportContextSensitivity(r,e,t,s,n,i){this.delegates.map(o=>o.reportContextSensitivity(r,e,t,s,n,i))}},vp=class ws{static EOF=-1;static tokenTypeMapCache=new Map;static ruleIndexMapCache=new Map;constructor(){this._listeners=[xa.INSTANCE],this.interpreter=null,this._stateNumber=-1}checkVersion(e){let t="4.13.1";t!==e&&console.log("ANTLR runtime and generated code versions disagree: "+t+"!="+e)}addErrorListener(e){this._listeners.push(e)}removeErrorListeners(){this._listeners=[]}getTokenTypeMap(){let e=this.vocabulary,t=ws.tokenTypeMapCache.get(e);if(!t){t=new Map;for(let s=0;s<=this.atn.maxTokenType;s++){let n=e.getLiteralName(s);n&&t.set(n,s);let i=e.getSymbolicName(s);i&&t.set(i,s)}t.set("EOF",y.EOF),ws.tokenTypeMapCache.set(e,t)}return t}getRuleIndexMap(){let e=this.ruleNames,t=ws.ruleIndexMapCache.get(e);return t||(t=new Map,e.forEach((s,n)=>t.set(s,n)),ws.ruleIndexMapCache.set(e,t)),t}getTokenType(e){return this.getTokenTypeMap().get(e)||y.INVALID_TYPE}getErrorHeader(e){let t=e.offendingToken.line,s=e.offendingToken.column;return"line "+t+":"+s}getTokenErrorDisplay(e){if(e===null)return"<no token>";let t=e.text;return t===null&&(e.type===y.EOF?t="<EOF>":t="<"+e.type+">"),t=t.replace(`
`,"\\n").replace("\r","\\r").replace("	","\\t"),"'"+t+"'"}getErrorListenerDispatch(){return new Q0(this._listeners)}sempred(e,t,s){return!0}precpred(e,t){return!0}get atn(){return this.interpreter.atn}get state(){return this._stateNumber}set state(e){this._stateNumber=e}},wa=class extends Y0{constructor(r){super(),this.copyText=r===void 0?!1:r}create(r,e,t,s,n,i,o,a){let l=new Ts(r,e,s,n,i);return l.line=o,l.column=a,t!==null?l.text=t:this.copyText&&r[1]!==null&&(l.text=r[1].getText(n,i)),l}createThin(r,e){let t=new Ts(null,r);return t.text=e,t}};wa.DEFAULT=new wa;var _s=class yp extends Error{constructor(e){super(e.message),Error.captureStackTrace&&Error.captureStackTrace(this,yp),this.message=e.message,this.recognizer=e.recognizer,this.input=e.input,this.ctx=e.ctx,this.offendingToken=null,this.offendingState=-1,this.recognizer!==null&&(this.offendingState=this.recognizer.state)}getExpectedTokens(){return this.recognizer!==null?this.recognizer.atn.getExpectedTokens(this.offendingState,this.ctx):null}toString(){return this.message}},xp=class extends _s{constructor(r,e,t,s){super({message:"",recognizer:r,input:e,ctx:null}),this.startIndex=t,this.deadEndConfigs=s}toString(){let r="";return this.startIndex>=0&&this.startIndex<this.input.size&&(r=this.input.getText(new W(this.startIndex,this.startIndex))),"LexerNoViableAltException"+r}},ye=class Pt extends vp{constructor(e){super(),this._input=e,this._factory=wa.DEFAULT,this._tokenFactorySourcePair=[this,e],this.interpreter=null,this._token=null,this._tokenStartCharIndex=-1,this._tokenStartLine=-1,this._tokenStartColumn=-1,this._hitEOF=!1,this._channel=y.DEFAULT_CHANNEL,this._type=y.INVALID_TYPE,this._modeStack=[],this._mode=Pt.DEFAULT_MODE,this._text=null}reset(){this._input!==null&&this._input.seek(0),this._token=null,this._type=y.INVALID_TYPE,this._channel=y.DEFAULT_CHANNEL,this._tokenStartCharIndex=-1,this._tokenStartColumn=-1,this._tokenStartLine=-1,this._text=null,this._hitEOF=!1,this._mode=Pt.DEFAULT_MODE,this._modeStack=[],this.interpreter.reset()}nextToken(){if(this._input===null)throw"nextToken requires a non-null input stream.";let e=this._input.mark();try{for(;;){if(this._hitEOF)return this.emitEOF(),this._token;this._token=null,this._channel=y.DEFAULT_CHANNEL,this._tokenStartCharIndex=this._input.index,this._tokenStartColumn=this.interpreter.column,this._tokenStartLine=this.interpreter.line,this._text=null;let t=!1;for(;;){this._type=y.INVALID_TYPE;let s=Pt.SKIP;try{s=this.interpreter.match(this._input,this._mode)}catch(n){if(n instanceof _s)this.notifyListeners(n),this.recover(n);else throw console.log(n.stack),n}if(this._input.LA(1)===y.EOF&&(this._hitEOF=!0),this._type===y.INVALID_TYPE&&(this._type=s),this._type===Pt.SKIP){t=!0;break}if(this._type!==Pt.MORE)break}if(!t)return this._token===null&&this.emit(),this._token}}finally{this._input.release(e)}}skip(){this._type=Pt.SKIP}more(){this._type=Pt.MORE}mode(e){this._mode=e}pushMode(e){this.interpreter.debug&&console.log("pushMode "+e),this._modeStack.push(this._mode),this.mode(e)}popMode(){if(this._modeStack.length===0)throw"Empty Stack";return this.interpreter.debug&&console.log("popMode back to "+this._modeStack.slice(0,-1)),this.mode(this._modeStack.pop()),this._mode}emitToken(e){this._token=e}emit(){let e=this._factory.create(this._tokenFactorySourcePair,this._type,this._text,this._channel,this._tokenStartCharIndex,this.getCharIndex()-1,this._tokenStartLine,this._tokenStartColumn);return this.emitToken(e),e}emitEOF(){let e=this.column,t=this.line,s=this._factory.create(this._tokenFactorySourcePair,y.EOF,null,y.DEFAULT_CHANNEL,this._input.index,this._input.index-1,t,e);return this.emitToken(s),s}getCharIndex(){return this._input.index}getAllTokens(){let e=[],t=this.nextToken();for(;t.type!==y.EOF;)e.push(t),t=this.nextToken();return e}notifyListeners(e){let t=this._tokenStartCharIndex,s=this._input.index,n=this._input.getText(t,s),i="token recognition error at: '"+this.getErrorDisplay(n)+"'";this.getErrorListenerDispatch().syntaxError(this,null,this._tokenStartLine,this._tokenStartColumn,i,e)}getErrorDisplay(e){let t=[];for(let s=0;s<e.length;s++)t.push(e[s]);return t.join("")}getErrorDisplayForChar(e){return e.charCodeAt(0)===y.EOF?"<EOF>":e===`
`?"\\n":e==="	"?"\\t":e==="\r"?"\\r":e}getCharErrorDisplay(e){return"'"+this.getErrorDisplayForChar(e)+"'"}recover(e){this._input.LA(1)!==y.EOF&&(e instanceof xp?this.interpreter.consume(this._input):this._input.consume())}get inputStream(){return this._input}set inputStream(e){this._input=null,this._tokenFactorySourcePair=[this,null],this.reset(),this._input=e,this._tokenFactorySourcePair=[this,e]}get sourceName(){return this._input.sourceName}get type(){return this._type}set type(e){this._type=e}get line(){return this.interpreter.line}set line(e){this.interpreter.line=e}get column(){return this.interpreter.column}set column(e){this.interpreter.column=e}get text(){return this._text!==null?this._text:this.interpreter.getText(this._input)}set text(e){this._text=e}};ye.DEFAULT_MODE=0;ye.MORE=-2;ye.SKIP=-3;ye.DEFAULT_TOKEN_CHANNEL=y.DEFAULT_CHANNEL;ye.HIDDEN=y.HIDDEN_CHANNEL;ye.MIN_CHAR_VALUE=0;ye.MAX_CHAR_VALUE=1114111;var wp=class{},kt=class extends wp{},Oa=class extends kt{},La=class extends kt{constructor(r){super(),this._parent=null,this.symbol=r}getChild(r){return null}getSymbol(){return this.symbol}get parent(){return this._parent}set parent(r){this._parent=r}getPayload(){return this.symbol}getSourceInterval(){if(this.symbol===null)return W.INVALID_INTERVAL;let r=this.symbol.tokenIndex;return new W(r,r)}getChildCount(){return 0}accept(r){return r.visitTerminal(this)}getText(){return this.symbol.text}toString(){return this.symbol.type===y.EOF?"<EOF>":this.symbol.text}toStringTree(){return this.toString()}},Ca=class extends La{constructor(r){super(r)}isErrorNode(){return!0}accept(r){return r.visitErrorNode(this)}};function Ms(r,e){if(!Array.isArray(r)||!Array.isArray(e))return!1;if(r===e)return!0;if(r.length!==e.length)return!1;for(let t=0;t<r.length;t++)if(r[t]!==e[t]&&(!r[t].equals||!r[t].equals(e[t])))return!1;return!0}var J0=Math.round(Math.random()*Math.pow(2,32));function Cp(r){if(!r)return 0;let e=typeof r,t=e==="string"?r:e==="object"&&r.toString?r.toString():!1;if(!t)return 0;let s,n,i=t.length&3,o=t.length-i,a=J0,l=3432918353,c=461845907,u=0;for(;u<o;)n=t.charCodeAt(u)&255|(t.charCodeAt(++u)&255)<<8|(t.charCodeAt(++u)&255)<<16|(t.charCodeAt(++u)&255)<<24,++u,n=(n&65535)*l+(((n>>>16)*l&65535)<<16)&4294967295,n=n<<15|n>>>17,n=(n&65535)*c+(((n>>>16)*c&65535)<<16)&4294967295,a^=n,a=a<<13|a>>>19,s=(a&65535)*5+(((a>>>16)*5&65535)<<16)&4294967295,a=(s&65535)+27492+(((s>>>16)+58964&65535)<<16);switch(n=0,i){case 3:n^=(t.charCodeAt(u+2)&255)<<16;case 2:n^=(t.charCodeAt(u+1)&255)<<8;case 1:n^=t.charCodeAt(u)&255,n=(n&65535)*l+(((n>>>16)*l&65535)<<16)&4294967295,n=n<<15|n>>>17,n=(n&65535)*c+(((n>>>16)*c&65535)<<16)&4294967295,a^=n}return a^=t.length,a^=a>>>16,a=(a&65535)*2246822507+(((a>>>16)*2246822507&65535)<<16)&4294967295,a^=a>>>13,a=(a&65535)*3266489909+(((a>>>16)*3266489909&65535)<<16)&4294967295,a^=a>>>16,a>>>0}var ht=class Ep{constructor(){this.count=0,this.hash=0}update(){for(let e=0;e<arguments.length;e++){let t=arguments[e];if(t!=null)if(Array.isArray(t))this.update.apply(this,t);else{let s=0;switch(typeof t){case"undefined":case"function":continue;case"number":case"boolean":s=t;break;case"string":s=Cp(t);break;default:t.updateHashCode?t.updateHashCode(this):console.log("No updateHashCode for "+t.toString());continue}s=s*3432918353,s=s<<15|s>>>32-15,s=s*461845907,this.count=this.count+1;let n=this.hash^s;n=n<<13|n>>>32-13,n=n*5+3864292196,this.hash=n}}}finish(){let e=this.hash^this.count*4;return e=e^e>>>16,e=e*2246822507,e=e^e>>>13,e=e*3266489909,e=e^e>>>16,e}static hashStuff(){let e=new Ep;return e.update.apply(e,arguments),e.finish()}};function Tp(r){return r?typeof r=="string"?Cp(r):r.hashCode():-1}function Mp(r,e){return r?r.equals(e):r===e}function X0(r){return r===null?"null":r}function qa(r){return Array.isArray(r)?"["+r.map(X0).join(", ")+"]":"null"}var qn="h-",ze=class{constructor(r,e){this.data={},this.hashFunction=r||Tp,this.equalsFunction=e||Mp}add(r){let e=qn+this.hashFunction(r);if(e in this.data){let t=this.data[e];for(let s=0;s<t.length;s++)if(this.equalsFunction(r,t[s]))return t[s];return t.push(r),r}else return this.data[e]=[r],r}has(r){return this.get(r)!=null}get(r){let e=qn+this.hashFunction(r);if(e in this.data){let t=this.data[e];for(let s=0;s<t.length;s++)if(this.equalsFunction(r,t[s]))return t[s]}return null}values(){return Object.keys(this.data).filter(r=>r.startsWith(qn)).flatMap(r=>this.data[r],this)}toString(){return qa(this.values())}get length(){return Object.keys(this.data).filter(r=>r.startsWith(qn)).map(r=>this.data[r].length,this).reduce((r,e)=>r+e,0)}},ce=class Tr{hashCode(){let e=new ht;return this.updateHashCode(e),e.finish()}evaluate(e,t){}evalPrecedence(e,t){return this}static andContext(e,t){if(e===null||e===Tr.NONE)return t;if(t===null||t===Tr.NONE)return e;let s=new Z0(e,t);return s.opnds.length===1?s.opnds[0]:s}static orContext(e,t){if(e===null)return t;if(t===null)return e;if(e===Tr.NONE||t===Tr.NONE)return Tr.NONE;let s=new e1(e,t);return s.opnds.length===1?s.opnds[0]:s}},Z0=class Bn extends ce{constructor(e,t){super();let s=new ze;e instanceof Bn?e.opnds.map(function(i){s.add(i)}):s.add(e),t instanceof Bn?t.opnds.map(function(i){s.add(i)}):s.add(t);let n=Ap(s);if(n.length>0){let i=null;n.map(function(o){(i===null||o.precedence<i.precedence)&&(i=o)}),s.add(i)}this.opnds=Array.from(s.values())}equals(e){return this===e?!0:e instanceof Bn?Ms(this.opnds,e.opnds):!1}updateHashCode(e){e.update(this.opnds,"AND")}evaluate(e,t){for(let s=0;s<this.opnds.length;s++)if(!this.opnds[s].evaluate(e,t))return!1;return!0}evalPrecedence(e,t){let s=!1,n=[];for(let o=0;o<this.opnds.length;o++){let a=this.opnds[o],l=a.evalPrecedence(e,t);if(s|=l!==a,l===null)return null;l!==ce.NONE&&n.push(l)}if(!s)return this;if(n.length===0)return ce.NONE;let i=null;return n.map(function(o){i=i===null?o:ce.andContext(i,o)}),i}toString(){let e=this.opnds.map(t=>t.toString());return(e.length>3?e.slice(3):e).join("&&")}},e1=class jn extends ce{constructor(e,t){super();let s=new ze;e instanceof jn?e.opnds.map(function(i){s.add(i)}):s.add(e),t instanceof jn?t.opnds.map(function(i){s.add(i)}):s.add(t);let n=Ap(s);if(n.length>0){let i=n.sort(function(a,l){return a.compareTo(l)}),o=i[i.length-1];s.add(o)}this.opnds=Array.from(s.values())}equals(e){return this===e?!0:e instanceof jn?Ms(this.opnds,e.opnds):!1}updateHashCode(e){e.update(this.opnds,"OR")}evaluate(e,t){for(let s=0;s<this.opnds.length;s++)if(this.opnds[s].evaluate(e,t))return!0;return!1}evalPrecedence(e,t){let s=!1,n=[];for(let o=0;o<this.opnds.length;o++){let a=this.opnds[o],l=a.evalPrecedence(e,t);if(s|=l!==a,l===ce.NONE)return ce.NONE;l!==null&&n.push(l)}if(!s)return this;if(n.length===0)return null;let i=null;return n.map(function(o){return i===null?o:ce.orContext(i,o)}),i}toString(){let e=this.opnds.map(t=>t.toString());return(e.length>3?e.slice(3):e).join("||")}};function Ap(r){let e=[];return r.values().map(function(t){t instanceof ce.PrecedencePredicate&&e.push(t)}),e}var Pp=class _p extends ce{constructor(e,t,s){super(),this.ruleIndex=e===void 0?-1:e,this.predIndex=t===void 0?-1:t,this.isCtxDependent=s===void 0?!1:s}evaluate(e,t){let s=this.isCtxDependent?t:null;return e.sempred(s,this.ruleIndex,this.predIndex)}updateHashCode(e){e.update(this.ruleIndex,this.predIndex,this.isCtxDependent)}equals(e){return this===e?!0:e instanceof _p?this.ruleIndex===e.ruleIndex&&this.predIndex===e.predIndex&&this.isCtxDependent===e.isCtxDependent:!1}toString(){return"{"+this.ruleIndex+":"+this.predIndex+"}?"}};ce.NONE=new Pp;var Dt=class{constructor(r){if(r==null)throw"target cannot be null.";this.target=r,this.isEpsilon=!1,this.label=null}},Fa=class extends Dt{constructor(r){super(r)}},U={EPSILON:1,RANGE:2,RULE:3,PREDICATE:4,ATOM:5,ACTION:6,SET:7,NOT_SET:8,WILDCARD:9,PRECEDENCE:10},kp=class extends Fa{constructor(r,e,t,s){super(r),this.serializationType=U.PREDICATE,this.ruleIndex=e,this.predIndex=t,this.isCtxDependent=s,this.isEpsilon=!0}matches(r,e,t){return!1}getPredicate(){return new Pp(this.ruleIndex,this.predIndex,this.isCtxDependent)}toString(){return"pred_"+this.ruleIndex+":"+this.predIndex}},t1=class extends _s{constructor(r,e,t){super({message:r1(e,t||null),recognizer:r,input:r.inputStream,ctx:r._ctx});let s=r.interpreter.atn.states[r.state].transitions[0];s instanceof kp?(this.ruleIndex=s.ruleIndex,this.predicateIndex=s.predIndex):(this.ruleIndex=0,this.predicateIndex=0),this.predicate=e,this.offendingToken=r.getCurrentToken()}};function r1(r,e){return e!==null?e:"failed predicate: {"+r+"}?"}var ma=class extends _s{constructor(r){super({message:"",recognizer:r,input:r.inputStream,ctx:r._ctx}),this.offendingToken=r.getCurrentToken()}},s1=class extends _s{constructor(r,e,t,s,n,i){i=i??r._ctx,s=s??r.getCurrentToken(),t=t??r.getCurrentToken(),e=e??r.inputStream,super({message:"",recognizer:r,input:e,ctx:i}),this.deadEndConfigs=n,this.startToken=t,this.offendingToken=s}},mt=class Ea{constructor(){this.atn=null,this.ruleIndex=0,this.epsilonOnlyTransitions=!1,this.transitions=[],this.nextTokenWithinRule=null}get stateType(){return Ea.INVALID_STATE_NUMBER}toString(){return`${this.stateNumber}`}equals(e){return e instanceof Ea?this.stateNumber===e.stateNumber:!1}isNonGreedyExitState(){return!1}addTransition(e,t){t===void 0&&(t=-1),this.transitions.length===0?this.epsilonOnlyTransitions=e.isEpsilon:this.epsilonOnlyTransitions!==e.isEpsilon&&(this.epsilonOnlyTransitions=!1),t===-1?this.transitions.push(e):this.transitions.splice(t,1,e)}};mt.INVALID_STATE_NUMBER=-1;var et=class Mr{constructor(e,t,s){this.literalNames=e??Mr.EMPTY_NAMES,this.symbolicNames=t??Mr.EMPTY_NAMES,this.displayNames=s??Mr.EMPTY_NAMES,this.maxTokenType=Math.max(this.displayNames.length,Math.max(this.literalNames.length,this.symbolicNames.length))-1}static fromTokenNames(e){if(e==null||e.length===0)return Mr.EMPTY_VOCABULARY;let t=[...e],s=[...e];for(let n=0;n<e.length;n++){let i=e[n];if(i!=null){if(!i.isEmpty()){let o=i.charAt(0);if(o==="'"){s[n]=null;continue}else if(o.toUpperCase()===o){t[n]=null;continue}}t[n]=null,s[n]=null}}return new Mr(t,s,e)}getMaxTokenType(){return this.maxTokenType}getLiteralName(e){return e>=0&&e<this.literalNames.length?this.literalNames[e]:null}getSymbolicName(e){return e>=0&&e<this.symbolicNames.length?this.symbolicNames[e]:e===y.EOF?"EOF":null}getDisplayName(e){if(e>=0&&e<this.displayNames.length){let n=this.displayNames[e];if(n!=null)return n}let t=this.getLiteralName(e);return t??this.getSymbolicName(e)??`${e}`}getLiteralNames(){return this.literalNames}getSymbolicNames(){return this.symbolicNames}getDisplayNames(){return this.displayNames}};et.EMPTY_NAMES=[];et.EMPTY_VOCABULARY=new et(et.EMPTY_NAMES,et.EMPTY_NAMES,et.EMPTY_NAMES);var pt=class ae{static COMPLETE_CHAR_SET=ae.of(ye.MIN_CHAR_VALUE,ye.MAX_CHAR_VALUE);static EMPTY_SET=new ae;static{ae.COMPLETE_CHAR_SET.readonly=!0,ae.EMPTY_SET.readonly=!0}constructor(e){this.intervals=[],this.readOnly=!1,e&&this.addSet(e)}static of(e,t){let s=new ae;return s.addRange(e,t),s}get minElement(){return this.intervals.length===0?y.INVALID_TYPE:this.intervals[0].start}get maxElement(){return this.intervals.length===0?y.INVALID_TYPE:this.intervals[this.intervals.length-1].stop}get isNil(){return this.intervals.length===0}clear(){if(this.readOnly)throw new IllegalStateException("can't alter readonly IntervalSet");this.intervals=[]}addOne(e){this.addInterval(new W(e,e))}addRange(e,t){this.addInterval(new W(e,t))}addInterval(e){if(this.readOnly)throw new IllegalStateException("can't alter readonly IntervalSet");if(this.intervals.length===0)this.intervals.push(e);else{for(let t=0;t<this.intervals.length;t++){let s=this.intervals[t];if(e.equals(s))return;if(e.adjacent(s)||!e.disjoint(s)){let n=e.union(s);this.intervals[t]=n;for(let i=t+1;i<this.intervals.length;){let o=this.intervals[i];if(!n.adjacent(o)&&n.disjoint(o))break;this.intervals.splice(i,1),this.intervals[t]=n.union(o)}return}if(e.startsBeforeDisjoint(s)){this.intervals.splice(t,0,e);return}}this.intervals.push(e)}}addSet(e){return e.intervals.forEach(t=>this.addInterval(t),this),this}complement(e,t){if(!e)return new ae;let s=new ae;if(e instanceof ae){if(e.isNil)return new ae;s.addSet(e)}else s.addInterval(new W(e,t));return s.subtract(this)}or(e){let t=new ae;return t.addSet(this),e.forEach(s=>t.addSet(s),this),t}and(e){if(e.isNil)return new ae;let t=this.intervals,s=e.intervals,n,i=t.length,o=s.length,a=0,l=0;for(;a<i&&l<o;){let c=t[a],u=s[l];c.startsBeforeDisjoint(u)?a++:u.startsBeforeDisjoint(c)?l++:c.properlyContains(u)?(n||(n=new ae),n.addInterval(c.intersection(u)),l++):u.properlyContains(c)?(n||(n=new ae),n.addInterval(c.intersection(u)),a++):c.disjoint(u)||(n||(n=new ae),n.addInterval(c.intersection(u)),c.startsAfterNonDisjoint(u)?l++:u.startsAfterNonDisjoint(c)&&a++)}return n||new ae}subtract(e){if(this.isNil)return new ae;let t=new ae(this);if(e.isNil)return t;let s=0,n=0;for(;s<t.intervals.length&&n<e.intervals.length;){let i=t.intervals[s],o=e.intervals[n];if(o.stop<i.start){n++;continue}if(o.start>i.stop){s++;continue}let a=null,l=null;if(o.start>i.start&&(a=new W(i.start,o.start-1)),o.stop<i.stop&&(l=new W(o.stop+1,i.stop)),a!=null)if(l!=null){t.intervals[s]=a,t.intervals.splice(s+1,0,l),s++,n++;continue}else{t.intervals[s]=a,s++;continue}else if(l!=null){t.intervals[s]=l,n++;continue}else{t.intervals.splice(s,1);continue}}return t}contains(e){if(this.intervals===null)return!1;{let t=this.intervals.length,s=0,n=t-1;for(;s<=n;){let i=Math.floor((s+n)/2),o=this.intervals[i];if(o.stop<e)s=i+1;else if(o.start>e)n=i-1;else return!0}return!1}}removeRange(e){if(this.readOnly)throw new IllegalStateException("can't alter readonly IntervalSet");if(e.start===e.stop)this.removeOne(e.start);else if(this.intervals!==null){let t=0;for(let s=0;s<this.intervals.length;s++){let n=this.intervals[t];if(e.stop<=n.start)return;if(e.start>n.start&&e.stop<n.stop){this.intervals[t]=new W(n.start,e.start);let i=new W(e.stop,n.stop);this.intervals.splice(t,0,i);return}else e.start<=n.start&&e.stop>=n.stop?(this.intervals.splice(t,1),t=t-1):e.start<n.stop?this.intervals[t]=new W(n.start,e.start):e.stop<n.stop&&(this.intervals[t]=new W(e.stop,n.stop));t+=1}}}removeOne(e){if(this.readOnly)throw new IllegalStateException("can't alter readonly IntervalSet");if(this.intervals!==null)for(let t=0;t<this.intervals.length;t++){let s=this.intervals[t];if(e<s.start)return;if(e===s.start&&e===s.stop){this.intervals.splice(t,1);return}else if(e===s.start){this.intervals[t]=new W(s.start+1,s.stop);return}else if(e===s.stop){this.intervals[t]=new W(s.start,s.stop);return}else if(e<s.stop){let n=new W(s.start,e);s.start=e+1,this.intervals.splice(t,0,n);return}}}toString(e){if(this.intervals.length===0)return"{}";let t="";this.length>1&&(t+="{");let s,n;e instanceof et?(n=e,s=!1):s=e??!1;for(let i=0;i<this.intervals.length;++i){let o=this.intervals[i],a=o.start,l=o.stop;if(a===l)a==y.EOF?t+="<EOF>":s?t+="'"+String.fromCodePoint(a)+"'":n?t+=this.elementName(n,a):t+=a;else if(s)t+="'"+String.fromCodePoint(a)+"'..'"+String.fromCodePoint(l)+"'";else if(n)for(let c=a;c<=l;++c)c>a&&(t+=", "),t+=this.elementName(n,c);else t+=a+".."+l;i<this.intervals.length-1&&(t+=", ")}return this.length>1&&(t+="}"),t}elementName(e,t){return t===y.EOF?"<EOF>":t===y.EPSILON?"<EPSILON>":e.getDisplayName(t)}toArray(){let e=[];if(this.intervals!==null)for(let t=0;t<this.intervals.length;t++){let s=this.intervals[t];for(let n=s.start;n<=s.stop;n++)e.push(n)}return e}get length(){let e=0;if(this.intervals.length==1){let t=this.intervals[0];return t.stop-t.start+1}for(let t of this.intervals)e+=t.length;return e}isReadonly(){return this.readOnly}setReadonly(e){if(this.readOnly&&!e)throw new IllegalStateException("can't alter readonly IntervalSet");this.readOnly=e}[Symbol.iterator](){return this.intervals[Symbol.iterator]()}},q={INVALID_TYPE:0,BASIC:1,RULE_START:2,BLOCK_START:3,PLUS_BLOCK_START:4,STAR_BLOCK_START:5,TOKEN_START:6,RULE_STOP:7,BLOCK_END:8,STAR_LOOP_BACK:9,STAR_LOOP_ENTRY:10,PLUS_LOOP_BACK:11,LOOP_END:12},n1=class{constructor(){this.errorRecoveryMode=!1,this.lastErrorIndex=-1,this.lastErrorStates=null,this.nextTokensContext=null,this.nextTokenState=0}reset(r){this.endErrorCondition(r)}beginErrorCondition(r){this.errorRecoveryMode=!0}inErrorRecoveryMode(r){return this.errorRecoveryMode}endErrorCondition(r){this.errorRecoveryMode=!1,this.lastErrorStates=null,this.lastErrorIndex=-1}reportMatch(r){this.endErrorCondition(r)}reportError(r,e){this.inErrorRecoveryMode(r)||(this.beginErrorCondition(r),e instanceof s1?this.reportNoViableAlternative(r,e):e instanceof ma?this.reportInputMismatch(r,e):e instanceof t1?this.reportFailedPredicate(r,e):(console.log("unknown recognition error type: "+e.constructor.name),console.log(e.stack),r.notifyErrorListeners(e.offendingToken,e.getMessage(),e)))}recover(r,e){this.lastErrorIndex===r.inputStream.index&&this.lastErrorStates!==null&&this.lastErrorStates.indexOf(r.state)>=0&&r.consume(),this.lastErrorIndex=r._input.index,this.lastErrorStates===null&&(this.lastErrorStates=[]),this.lastErrorStates.push(r.state);let t=this.getErrorRecoverySet(r);this.consumeUntil(r,t)}sync(r){if(this.inErrorRecoveryMode(r))return;let e=r.interpreter.atn.states[r.state],t=r.tokenStream.LA(1),s=r.atn.nextTokens(e);if(s.contains(t)){this.nextTokensContext=null,this.nextTokenState=mt.INVALID_STATE_NUMBER;return}else if(s.contains(y.EPSILON)){this.nextTokensContext===null&&(this.nextTokensContext=r._ctx,this.nextTokensState=r._stateNumber);return}switch(e.stateType){case q.BLOCK_START:case q.STAR_BLOCK_START:case q.PLUS_BLOCK_START:case q.STAR_LOOP_ENTRY:if(this.singleTokenDeletion(r)!==null)return;throw new ma(r);case q.PLUS_LOOP_BACK:case q.STAR_LOOP_BACK:{this.reportUnwantedToken(r);let n=new pt;n.addSet(r.getExpectedTokens());let i=n.addSet(this.getErrorRecoverySet(r));this.consumeUntil(r,i)}break;default:}}reportNoViableAlternative(r,e){let t=r.tokenStream,s;t!==null?e.startToken.type===y.EOF?s="<EOF>":s=t.getText(new W(e.startToken.tokenIndex,e.offendingToken.tokenIndex)):s="<unknown input>";let n="no viable alternative at input "+this.escapeWSAndQuote(s);r.notifyErrorListeners(n,e.offendingToken,e)}reportInputMismatch(r,e){let t="mismatched input "+this.getTokenErrorDisplay(e.offendingToken)+" expecting "+e.getExpectedTokens().toString(r.vocabulary);r.notifyErrorListeners(t,e.offendingToken,e)}reportFailedPredicate(r,e){let t="rule "+r.ruleNames[r._ctx.ruleIndex]+" "+e.message;r.notifyErrorListeners(t,e.offendingToken,e)}reportUnwantedToken(r){if(this.inErrorRecoveryMode(r))return;this.beginErrorCondition(r);let e=r.getCurrentToken(),t=this.getTokenErrorDisplay(e),s=this.getExpectedTokens(r),n="extraneous input "+t+" expecting "+s.toString(r.vocabulary);r.notifyErrorListeners(n,e,null)}reportMissingToken(r){if(this.inErrorRecoveryMode(r))return;this.beginErrorCondition(r);let e=r.getCurrentToken(),t="missing "+this.getExpectedTokens(r).toString(r.vocabulary)+" at "+this.getTokenErrorDisplay(e);r.notifyErrorListeners(t,e,null)}recoverInline(r){let e=this.singleTokenDeletion(r);if(e!==null)return r.consume(),e;if(this.singleTokenInsertion(r))return this.getMissingSymbol(r);throw new ma(r)}singleTokenInsertion(r){let e=r.tokenStream.LA(1),t=r.interpreter.atn,s=t.states[r.state].transitions[0].target;return t.nextTokens(s,r._ctx).contains(e)?(this.reportMissingToken(r),!0):!1}singleTokenDeletion(r){let e=r.tokenStream.LA(2);if(this.getExpectedTokens(r).contains(e)){this.reportUnwantedToken(r),r.consume();let t=r.getCurrentToken();return this.reportMatch(r),t}else return null}getMissingSymbol(r){let e=r.getCurrentToken(),t=this.getExpectedTokens(r),s=y.INVALID_TYPE;t.isNil||(s=t.minElement);let n;s===y.EOF?n="<missing EOF>":n="<missing "+r.vocabulary.getDisplayName(s)+">";let i=e,o=r.tokenStream.LT(-1);return i.type===y.EOF&&o!==null&&(i=o),r.getTokenFactory().create(i.source,s,n,y.DEFAULT_CHANNEL,-1,-1,i.line,i.column)}getExpectedTokens(r){return r.getExpectedTokens()}getTokenErrorDisplay(r){if(r===null)return"<no token>";let e=r.text;return e===null&&(r.type===y.EOF?e="<EOF>":e="<"+r.type+">"),this.escapeWSAndQuote(e)}escapeWSAndQuote(r){return r=r.replace(/\n/g,"\\n"),r=r.replace(/\r/g,"\\r"),r=r.replace(/\t/g,"\\t"),"'"+r+"'"}getErrorRecoverySet(r){let e=r.interpreter.atn,t=r._ctx,s=new pt;for(;t!==null&&t.invokingState>=0;){let n=e.states[t.invokingState].transitions[0],i=e.nextTokens(n.followState);s.addSet(i),t=t.parent}return s.removeOne(y.EPSILON),s}consumeUntil(r,e){let t=r.tokenStream.LA(1);for(;t!==y.EOF&&!e.contains(t);)r.consume(),t=r.tokenStream.LA(1)}};function cp(r,e){if(r===null){let t={state:null,alt:null,context:null,semanticContext:null};return e&&(t.reachesIntoOuterContext=0),t}else{let t={};return t.state=r.state||null,t.alt=r.alt===void 0?null:r.alt,t.context=r.context||null,t.semanticContext=r.semanticContext||null,e&&(t.reachesIntoOuterContext=r.reachesIntoOuterContext||0,t.precedenceFilterSuppressed=r.precedenceFilterSuppressed||!1),t}}var Rp=class Ta{constructor(e,t){this.checkContext(e,t),e=cp(e),t=cp(t,!0),this.state=e.state!==null?e.state:t.state,this.alt=e.alt!==null?e.alt:t.alt,this.context=e.context!==null?e.context:t.context,this.semanticContext=e.semanticContext!==null?e.semanticContext:t.semanticContext!==null?t.semanticContext:ce.NONE,this.reachesIntoOuterContext=t.reachesIntoOuterContext,this.precedenceFilterSuppressed=t.precedenceFilterSuppressed}checkContext(e,t){(e.context===null||e.context===void 0)&&(t===null||t.context===null||t.context===void 0)&&(this.context=null)}hashCode(){let e=new ht;return this.updateHashCode(e),e.finish()}updateHashCode(e){e.update(this.state.stateNumber,this.alt,this.context,this.semanticContext)}equals(e){return this===e?!0:e instanceof Ta?this.state.stateNumber===e.state.stateNumber&&this.alt===e.alt&&(this.context===null?e.context===null:this.context.equals(e.context))&&this.semanticContext.equals(e.semanticContext)&&this.precedenceFilterSuppressed===e.precedenceFilterSuppressed:!1}hashCodeForConfigSet(){let e=new ht;return e.update(this.state.stateNumber,this.alt,this.semanticContext),e.finish()}equalsForConfigSet(e){return this===e?!0:e instanceof Ta?this.state.stateNumber===e.state.stateNumber&&this.alt===e.alt&&this.semanticContext.equals(e.semanticContext):!1}toString(){return"("+this.state+","+this.alt+(this.context!==null?",["+this.context.toString()+"]":"")+(this.semanticContext!==ce.NONE?","+this.semanticContext.toString():"")+(this.reachesIntoOuterContext>0?",up="+this.reachesIntoOuterContext:"")+")"}},_t=class extends mt{get stateType(){return q.RULE_STOP}},Ma=class extends Dt{constructor(r,e,t,s){super(r),this.ruleIndex=e,this.precedence=t,this.followState=s,this.serializationType=U.RULE,this.isEpsilon=!0}matches(r,e,t){return!1}},Dp=class extends Dt{constructor(r,e){super(r),this.serializationType=U.SET,e!=null?this.label=e:(this.label=new pt,this.label.addOne(y.INVALID_TYPE))}matches(r,e,t){return this.label.contains(r)}toString(){return this.label.toString()}},Np=class extends Dp{constructor(r,e){super(r,e),this.serializationType=U.NOT_SET}matches(r,e,t){return r>=e&&r<=t&&!super.matches(r,e,t)}toString(){return"~"+super.toString()}},Op=class extends Dt{constructor(r){super(r),this.serializationType=U.WILDCARD}matches(r,e,t){return r>=e&&r<=t}toString(){return"."}};function i1(r,e){return r=r.replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r"),e&&(r=r.replace(/ /g,"\xB7")),r}var dt={toStringTree:function(r,e,t){e=e||null,t=t||null,t!==null&&(e=t.ruleNames);let s=dt.getNodeText(r,e);s=i1(s,!1);let n=r.getChildCount();if(n===0)return s;let i="("+s+" ";n>0&&(s=dt.toStringTree(r.getChild(0),e),i=i.concat(s));for(let o=1;o<n;o++)s=dt.toStringTree(r.getChild(o),e),i=i.concat(" "+s);return i=i.concat(")"),i},getNodeText:function(r,e,t){if(e=e||null,t=t||null,t!==null&&(e=t.ruleNames),e!==null)if(r instanceof Pr){let n=r.ruleContext.getAltNumber();return n!=0?e[r.ruleIndex]+":"+n:e[r.ruleIndex]}else{if(r instanceof Oa)return r.toString();if(r instanceof kt&&r.symbol!==null)return r.symbol.text}let s=r.getPayload();return s instanceof y?s.text:r.getPayload().toString()},getChildren:function(r){let e=[];for(let t=0;t<r.getChildCount();t++)e.push(r.getChild(t));return e},getAncestors:function(r){let e=[];for(r=r.getParent();r!==null;)e=[r].concat(e),r=r.getParent();return e},findAllTokenNodes:function(r,e){return dt.findAllNodes(r,e,!0)},findAllRuleNodes:function(r,e){return dt.findAllNodes(r,e,!1)},findAllNodes:function(r,e,t){let s=[];return dt._findAllNodes(r,e,t,s),s},_findAllNodes:function(r,e,t,s){t&&r instanceof kt?r.symbol.type===e&&s.push(r):!t&&r instanceof Pr&&r.ruleIndex===e&&s.push(r);for(let n=0;n<r.getChildCount();n++)dt._findAllNodes(r.getChild(n),e,t,s)},descendants:function(r){let e=[r];for(let t=0;t<r.getChildCount();t++)e=e.concat(dt.descendants(r.getChild(t)));return e}},Pr=class extends wp{constructor(r,e){super(),this._parent=r??null,this.children=null,this.invokingState=e??-1}get parent(){return this._parent}set parent(r){this._parent=r}depth(){let r=0,e=this;for(;e!==null;)e=e.parent,r+=1;return r}isEmpty(){return this.invokingState===-1}getSourceInterval(){return W.INVALID_INTERVAL}get ruleContext(){return this}get ruleIndex(){return-1}getPayload(){return this}getText(){return this.getChildCount()===0?"":this.children.map(function(r){return r.getText()}).join("")}getAltNumber(){return 0}setAltNumber(r){}setParent(r){this.parent=r}getChild(r){return null}getChildCount(){return 0}accept(r){return r.visitChildren(this)}toStringTree(r,e){return dt.toStringTree(this,r,e)}toString(r,e){r=r||null,e=e||null;let t=this,s="[";for(;t!==null&&t!==e;){if(r===null)t.isEmpty()||(s+=t.invokingState);else{let n=t.ruleIndex,i=n>=0&&n<r.length?r[n]:""+n;s+=i}t.parent!==null&&(r!==null||!t.parent.isEmpty())&&(s+=" "),t=t.parent}return s+="]",s}},P=class Aa{constructor(e){this.cachedHashCode=e}isEmpty(){return this===Aa.EMPTY}hasEmptyPath(){return this.getReturnState(this.length-1)===Aa.EMPTY_RETURN_STATE}hashCode(){return this.cachedHashCode}updateHashCode(e){e.update(this.cachedHashCode)}};P.EMPTY=null;P.EMPTY_RETURN_STATE=2147483647;P.globalNodeCount=1;P.id=P.globalNodeCount;P.trace_atn_sim=!1;var Rt=class Lp extends P{constructor(e,t){let s=new ht;s.update(e,t);let n=s.finish();return super(n),this.parents=e,this.returnStates=t,this}isEmpty(){return this.returnStates[0]===P.EMPTY_RETURN_STATE}getParent(e){return this.parents[e]}getReturnState(e){return this.returnStates[e]}equals(e){return this===e?!0:e instanceof Lp?this.hashCode()!==e.hashCode()?!1:Ms(this.returnStates,e.returnStates)&&Ms(this.parents,e.parents):!1}toString(){if(this.isEmpty())return"[]";{let e="[";for(let t=0;t<this.returnStates.length;t++){if(t>0&&(e=e+", "),this.returnStates[t]===P.EMPTY_RETURN_STATE){e=e+"$";continue}e=e+this.returnStates[t],this.parents[t]!==null?e=e+" "+this.parents[t]:e=e+"null"}return e+"]"}}get length(){return this.returnStates.length}},$e=class Pa extends P{constructor(e,t){let s=0,n=new ht;e!==null?n.update(e,t):n.update(1),s=n.finish(),super(s),this.parent=e,this.returnState=t}getParent(e){return this.parent}getReturnState(e){return this.returnState}equals(e){return this===e?!0:e instanceof Pa?this.hashCode()!==e.hashCode()||this.returnState!==e.returnState?!1:this.parent==null?e.parent==null:this.parent.equals(e.parent):!1}toString(){let e=this.parent===null?"":this.parent.toString();return e.length===0?this.returnState===P.EMPTY_RETURN_STATE?"$":""+this.returnState:""+this.returnState+" "+e}get length(){return 1}static create(e,t){return t===P.EMPTY_RETURN_STATE&&e===null?P.EMPTY:new Pa(e,t)}},_a=class extends $e{constructor(){super(null,P.EMPTY_RETURN_STATE)}isEmpty(){return!0}getParent(r){return null}getReturnState(r){return this.returnState}equals(r){return this===r}toString(){return"$"}};P.EMPTY=new _a;var ys="h-",Ga=class{constructor(r,e){this.data={},this.hashFunction=r||Tp,this.equalsFunction=e||Mp}set(r,e){let t=ys+this.hashFunction(r);if(t in this.data){let s=this.data[t];for(let n=0;n<s.length;n++){let i=s[n];if(this.equalsFunction(r,i.key)){let o=i.value;return i.value=e,o}}return s.push({key:r,value:e}),e}else return this.data[t]=[{key:r,value:e}],e}containsKey(r){let e=ys+this.hashFunction(r);if(e in this.data){let t=this.data[e];for(let s=0;s<t.length;s++){let n=t[s];if(this.equalsFunction(r,n.key))return!0}}return!1}get(r){let e=ys+this.hashFunction(r);if(e in this.data){let t=this.data[e];for(let s=0;s<t.length;s++){let n=t[s];if(this.equalsFunction(r,n.key))return n.value}}return null}entries(){return Object.keys(this.data).filter(r=>r.startsWith(ys)).flatMap(r=>this.data[r],this)}getKeys(){return this.entries().map(r=>r.key)}getValues(){return this.entries().map(r=>r.value)}toString(){return"["+this.entries().map(r=>"{"+r.key+":"+r.value+"}").join(", ")+"]"}get length(){return Object.keys(this.data).filter(r=>r.startsWith(ys)).map(r=>this.data[r].length,this).reduce((r,e)=>r+e,0)}};function qp(r,e){if(e==null&&(e=Pr.EMPTY),e.parent===null||e===Pr.EMPTY)return P.EMPTY;let t=qp(r,e.parent),s=r.states[e.invokingState].transitions[0];return $e.create(t,s.followState.stateNumber)}function Fp(r,e,t){if(r.isEmpty())return r;let s=t.get(r)||null;if(s!==null)return s;if(s=e.get(r),s!==null)return t.set(r,s),s;let n=!1,i=[];for(let a=0;a<i.length;a++){let l=Fp(r.getParent(a),e,t);if(n||l!==r.getParent(a)){if(!n){i=[];for(let c=0;c<r.length;c++)i[c]=r.getParent(c);n=!0}i[a]=l}}if(!n)return e.add(r),t.set(r,r),r;let o=null;return i.length===0?o=P.EMPTY:i.length===1?o=$e.create(i[0],r.getReturnState(0)):o=new Rt(i,r.returnStates),e.add(o),t.set(o,o),t.set(r,o),o}function Ua(r,e,t,s){if(r===e)return r;if(r instanceof $e&&e instanceof $e)return l1(r,e,t,s);if(t){if(r instanceof _a)return r;if(e instanceof _a)return e}return r instanceof $e&&(r=new Rt([r.getParent()],[r.returnState])),e instanceof $e&&(e=new Rt([e.getParent()],[e.returnState])),o1(r,e,t,s)}function o1(r,e,t,s){if(s!==null){let u=s.get(r,e);if(u!==null||(u=s.get(e,r),u!==null))return P.trace_atn_sim&&console.log("mergeArrays a="+r+",b="+e+" -> previous"),u}let n=0,i=0,o=0,a=new Array(r.returnStates.length+e.returnStates.length).fill(0),l=new Array(r.returnStates.length+e.returnStates.length).fill(null);for(;n<r.returnStates.length&&i<e.returnStates.length;){let u=r.parents[n],d=e.parents[i];if(r.returnStates[n]===e.returnStates[i]){let p=r.returnStates[n];p===P.EMPTY_RETURN_STATE&&u===null&&d===null||u!==null&&d!==null&&u===d?(l[o]=u,a[o]=p):(l[o]=Ua(u,d,t,s),a[o]=p),n+=1,i+=1}else r.returnStates[n]<e.returnStates[i]?(l[o]=u,a[o]=r.returnStates[n],n+=1):(l[o]=d,a[o]=e.returnStates[i],i+=1);o+=1}if(n<r.returnStates.length)for(let u=n;u<r.returnStates.length;u++)l[o]=r.parents[u],a[o]=r.returnStates[u],o+=1;else for(let u=i;u<e.returnStates.length;u++)l[o]=e.parents[u],a[o]=e.returnStates[u],o+=1;if(o<l.length){if(o===1){let u=$e.create(l[0],a[0]);return s!==null&&s.set(r,e,u),u}l=l.slice(0,o),a=a.slice(0,o)}let c=new Rt(l,a);return c.equals(r)?(s!==null&&s.set(r,e,r),P.trace_atn_sim&&console.log("mergeArrays a="+r+",b="+e+" -> a"),r):c.equals(e)?(s!==null&&s.set(r,e,e),P.trace_atn_sim&&console.log("mergeArrays a="+r+",b="+e+" -> b"),e):(a1(l),s!==null&&s.set(r,e,c),P.trace_atn_sim&&console.log("mergeArrays a="+r+",b="+e+" -> "+c),c)}function a1(r){let e=new Ga;for(let t=0;t<r.length;t++){let s=r[t];e.containsKey(s)||e.set(s,s)}for(let t=0;t<r.length;t++)r[t]=e.get(r[t])}function l1(r,e,t,s){if(s!==null){let i=s.get(r,e);if(i!==null||(i=s.get(e,r),i!==null))return i}let n=c1(r,e,t);if(n!==null)return s!==null&&s.set(r,e,n),n;if(r.returnState===e.returnState){let i=Ua(r.parent,e.parent,t,s);if(i===r.parent)return r;if(i===e.parent)return e;let o=$e.create(i,r.returnState);return s!==null&&s.set(r,e,o),o}else{let i=null;if((r===e||r.parent!==null&&r.parent===e.parent)&&(i=r.parent),i!==null){let c=[r.returnState,e.returnState];r.returnState>e.returnState&&(c[0]=e.returnState,c[1]=r.returnState);let u=[i,i],d=new Rt(u,c);return s!==null&&s.set(r,e,d),d}let o=[r.returnState,e.returnState],a=[r.parent,e.parent];r.returnState>e.returnState&&(o[0]=e.returnState,o[1]=r.returnState,a=[e.parent,r.parent]);let l=new Rt(a,o);return s!==null&&s.set(r,e,l),l}}function c1(r,e,t){if(t){if(r===P.EMPTY||e===P.EMPTY)return P.EMPTY}else{if(r===P.EMPTY&&e===P.EMPTY)return P.EMPTY;if(r===P.EMPTY){let s=[e.returnState,P.EMPTY_RETURN_STATE],n=[e.parent,null];return new Rt(n,s)}else if(e===P.EMPTY){let s=[r.returnState,P.EMPTY_RETURN_STATE],n=[r.parent,null];return new Rt(n,s)}}return null}var up=class{constructor(){this.data=[]}clear(r){r===void 0?this.data=[]:(this.resize(r),this.data[r>>>5]&=~(1<<r))}or(r){let e=Math.min(this.data.length,r.data.length),t=0;for(;t+7<e;t+=8)this.data[t]|=r.data[t],this.data[t+1]|=r.data[t+1],this.data[t+2]|=r.data[t+2],this.data[t+3]|=r.data[t+3],this.data[t+4]|=r.data[t+4],this.data[t+5]|=r.data[t+5],this.data[t+6]|=r.data[t+6],this.data[t+7]|=r.data[t+7];for(;t<e;++t)this.data[t]|=r.data[t];if(this.data.length<r.data.length){this.resize((r.data.length<<5)-1);let s=r.data.length;for(let n=e;n<s;++n)this.data[n]=r.data[n]}}get(r){return(this.data[r>>>5]&1<<r)!==0}get length(){let r=0,e=this.data.length,t=this.data;for(let s=0;s<e;s++)r+=this.bitCount(t[s]);return r}values(){let r=new Array(this.length()),e=0,t=this.data.length;for(let s=0;s<t;++s){let n=this.data[s];for(;n!=0;){let i=n&-n;r[e++]=(s<<5)+this.bitCount(i-1|0),n^=i}}return r}nextSetBit(r){for(let e of this)if(e>r)return e}set(r){this.resize(r),this.data[r>>>5]|=1<<r}toString(){return"{"+this.values().join(", ")+"}"}resize(r){let e=r+32>>>5;for(let t=this.data.length;t<e;t++)this.data[t]=0}bitCount(r){return r-=r>>>1&1431655765,r=(r&858993459)+(r>>>2&858993459),(r+(r>>>4)&252645135)*16843009>>>24}[Symbol.iterator](){let r=this.data.length,e=0,t=this.data[e],s=this.bitCount,n=this.data;return{[Symbol.iterator](){return this},next(){for(;e<r;)if(t!==0){let i=t&-t,o=(e<<5)+s(i-1|0);return t^=i,{done:!1,value:o}}else e++,e<r&&(t=n[e]);return{done:!0,value:void 0}}}}},Gp=class ka{constructor(e){this.atn=e}getDecisionLookahead(e){if(e===null)return null;let t=e.transitions.length,s=[];for(let n=0;n<t;n++){s[n]=new pt;let i=new ze,o=!1;this._LOOK(e.transition(n).target,null,P.EMPTY,s[n],i,new up,o,!1),(s[n].length===0||s[n].contains(ka.HIT_PRED))&&(s[n]=null)}return s}LOOK(e,t,s){let n=new pt,i=!0;s=s||null;let o=s!==null?qp(e.atn,s):null;return this._LOOK(e,t,o,n,new ze,new up,i,!0),n}_LOOK(e,t,s,n,i,o,a,l){let c=new Rp({state:e,alt:0,context:s},null);if(!i.has(c)){if(i.add(c),e===t){if(s===null){n.addOne(y.EPSILON);return}else if(s.isEmpty()&&l){n.addOne(y.EOF);return}}if(e instanceof _t){if(s===null){n.addOne(y.EPSILON);return}else if(s.isEmpty()&&l){n.addOne(y.EOF);return}if(s!==P.EMPTY){let u=o.get(e.ruleIndex);try{o.clear(e.ruleIndex);for(let d=0;d<s.length;d++){let p=this.atn.states[s.getReturnState(d)];this._LOOK(p,t,s.getParent(d),n,i,o,a,l)}}finally{u&&o.set(e.ruleIndex)}return}}for(let u=0;u<e.transitions.length;u++){let d=e.transitions[u];if(d.constructor===Ma){if(o.get(d.target.ruleIndex))continue;let p=$e.create(s,d.followState.stateNumber);try{o.set(d.target.ruleIndex),this._LOOK(d.target,t,p,n,i,o,a,l)}finally{o.clear(d.target.ruleIndex)}}else if(d instanceof Fa)a?this._LOOK(d.target,t,s,n,i,o,a,l):n.addOne(ka.HIT_PRED);else if(d.isEpsilon)this._LOOK(d.target,t,s,n,i,o,a,l);else if(d.constructor===Op)n.addRange(y.MIN_USER_TOKEN_TYPE,this.atn.maxTokenType);else{let p=d.label;p!==null&&(d instanceof Np&&(p=p.complement(y.MIN_USER_TOKEN_TYPE,this.atn.maxTokenType)),n.addSet(p))}}}}};Gp.HIT_PRED=y.INVALID_TYPE;var Kn=class{constructor(r,e){this.grammarType=r,this.maxTokenType=e,this.states=[],this.decisionToState=[],this.ruleToStartState=[],this.ruleToStopState=[],this.modeNameToStartState={},this.ruleToTokenType=[],this.lexerActions=[],this.modeToStartState=[]}nextTokensInContext(r,e){return new Gp(this).LOOK(r,null,e)}nextTokensNoContext(r){return r.nextTokenWithinRule!==null||(r.nextTokenWithinRule=this.nextTokensInContext(r,null),r.nextTokenWithinRule.readOnly=!0),r.nextTokenWithinRule}nextTokens(r,e){return e===void 0?this.nextTokensNoContext(r):this.nextTokensInContext(r,e)}addState(r){r!==null&&(r.atn=this,r.stateNumber=this.states.length),this.states.push(r)}removeState(r){this.states[r.stateNumber]=null}defineDecisionState(r){return this.decisionToState.push(r),r.decision=this.decisionToState.length-1,r.decision}getDecisionState(r){return this.decisionToState.length===0?null:this.decisionToState[r]}getExpectedTokens(r,e){if(r<0||r>=this.states.length)throw"Invalid state number.";let t=this.states[r],s=this.nextTokens(t);if(!s.contains(y.EPSILON))return s;let n=new pt;for(n.addSet(s),n.removeOne(y.EPSILON);e!==null&&e.invokingState>=0&&s.contains(y.EPSILON);){let i=this.states[e.invokingState].transitions[0];s=this.nextTokens(i.followState),n.addSet(s),n.removeOne(y.EPSILON),e=e.parent}return s.contains(y.EPSILON)&&n.addOne(y.EOF),n}};Kn.INVALID_ALT_NUMBER=0;var Fn={LEXER:0,PARSER:1},dp=class extends mt{get stateType(){return q.BASIC}},_r=class extends mt{constructor(){return super(),this.decision=-1,this.nonGreedy=!1,this}},Ar=class extends _r{constructor(){return super(),this.endState=null,this}},ga=class extends mt{get stateType(){return q.BLOCK_END}},Er=class extends mt{get stateType(){return q.LOOP_END}},hp=class extends mt{constructor(){super(),this.isPrecedenceRule=!1}get stateType(){return q.RULE_START}},u1=class extends _r{get stateType(){return q.TOKEN_START}},pp=class extends _r{get stateType(){return q.PLUS_LOOP_BACK}},fa=class extends mt{get stateType(){return q.STAR_LOOP_BACK}},Qt=class extends _r{constructor(){super(),this.precedenceRuleDecision=!1}get stateType(){return q.STAR_LOOP_ENTRY}},Sa=class extends Ar{get stateType(){return q.PLUS_BLOCK_START}},ba=class extends Ar{get stateType(){return q.STAR_BLOCK_START}},mp=class extends Ar{get stateType(){return q.BLOCK_START}},Ia=class extends Dt{constructor(r,e){super(r),this.label_=e,this.label=this.makeLabel(),this.serializationType=U.ATOM}makeLabel(){let r=new pt;return r.addOne(this.label_),r}matches(r,e,t){return this.label_===r}toString(){return this.label_}},gp=class extends Dt{constructor(r,e,t){super(r),this.serializationType=U.RANGE,this.start=e,this.stop=t,this.label=this.makeLabel()}makeLabel(){let r=new pt;return r.addRange(this.start,this.stop),r}matches(r,e,t){return r>=this.start&&r<=this.stop}toString(){return"'"+String.fromCharCode(this.start)+"'..'"+String.fromCharCode(this.stop)+"'"}},d1=class extends Dt{constructor(r,e,t,s){super(r),this.serializationType=U.ACTION,this.ruleIndex=e,this.actionIndex=t===void 0?-1:t,this.isCtxDependent=s===void 0?!1:s,this.isEpsilon=!0}matches(r,e,t){return!1}toString(){return"action_"+this.ruleIndex+":"+this.actionIndex}},xs=class extends Dt{constructor(r,e){super(r),this.serializationType=U.EPSILON,this.isEpsilon=!0,this.outermostPrecedenceReturn=e}matches(r,e,t){return!1}toString(){return"epsilon"}},Up=class Bp extends ce{constructor(e){super(),this.precedence=e===void 0?0:e}evaluate(e,t){return e.precpred(t,this.precedence)}evalPrecedence(e,t){return e.precpred(t,this.precedence)?ce.NONE:null}compareTo(e){return this.precedence-e.precedence}updateHashCode(e){e.update(this.precedence)}equals(e){return this===e?!0:e instanceof Bp?this.precedence===e.precedence:!1}toString(){return"{"+this.precedence+">=prec}?"}};ce.PrecedencePredicate=Up;var h1=class extends Fa{constructor(r,e){super(r),this.serializationType=U.PRECEDENCE,this.precedence=e,this.isEpsilon=!0}matches(r,e,t){return!1}getPredicate(){return new Up(this.precedence)}toString(){return this.precedence+" >= _p"}},As=class{constructor(r){r===void 0&&(r=null),this.readOnly=!1,this.verifyATN=r===null?!0:r.verifyATN,this.generateRuleBypassTransitions=r===null?!1:r.generateRuleBypassTransitions}};As.defaultOptions=new As;As.defaultOptions.readOnly=!0;var ve={CHANNEL:0,CUSTOM:1,MODE:2,MORE:3,POP_MODE:4,PUSH_MODE:5,SKIP:6,TYPE:7},gt=class{constructor(r){this.actionType=r,this.isPositionDependent=!1}hashCode(){let r=new ht;return this.updateHashCode(r),r.finish()}updateHashCode(r){r.update(this.actionType)}equals(r){return this===r}},Ra=class extends gt{constructor(){super(ve.SKIP)}execute(r){r.skip()}toString(){return"skip"}};Ra.INSTANCE=new Ra;var p1=class jp extends gt{constructor(e){super(ve.CHANNEL),this.channel=e}execute(e){e._channel=this.channel}updateHashCode(e){e.update(this.actionType,this.channel)}equals(e){return this===e?!0:e instanceof jp?this.channel===e.channel:!1}toString(){return"channel("+this.channel+")"}},m1=class Wp extends gt{constructor(e,t){super(ve.CUSTOM),this.ruleIndex=e,this.actionIndex=t,this.isPositionDependent=!0}execute(e){e.action(null,this.ruleIndex,this.actionIndex)}updateHashCode(e){e.update(this.actionType,this.ruleIndex,this.actionIndex)}equals(e){return this===e?!0:e instanceof Wp?this.ruleIndex===e.ruleIndex&&this.actionIndex===e.actionIndex:!1}},Da=class extends gt{constructor(){super(ve.MORE)}execute(r){r.more()}toString(){return"more"}};Da.INSTANCE=new Da;var g1=class Vp extends gt{constructor(e){super(ve.TYPE),this.type=e}execute(e){e.type=this.type}updateHashCode(e){e.update(this.actionType,this.type)}equals(e){return this===e?!0:e instanceof Vp?this.type===e.type:!1}toString(){return"type("+this.type+")"}},f1=class Kp extends gt{constructor(e){super(ve.PUSH_MODE),this.mode=e}execute(e){e.pushMode(this.mode)}updateHashCode(e){e.update(this.actionType,this.mode)}equals(e){return this===e?!0:e instanceof Kp?this.mode===e.mode:!1}toString(){return"pushMode("+this.mode+")"}},Na=class extends gt{constructor(){super(ve.POP_MODE)}execute(r){r.popMode()}toString(){return"popMode"}};Na.INSTANCE=new Na;var S1=class Hp extends gt{constructor(e){super(ve.MODE),this.mode=e}execute(e){e.mode(this.mode)}updateHashCode(e){e.update(this.actionType,this.mode)}equals(e){return this===e?!0:e instanceof Hp?this.mode===e.mode:!1}toString(){return"mode("+this.mode+")"}},va=4;function Gn(r,e){let t=[];return t[r-1]=e,t.map(function(s){return e})}var Hn=class{constructor(r){r==null&&(r=As.defaultOptions),this.deserializationOptions=r,this.stateFactories=null,this.actionFactories=null}deserialize(r){let e=this.reset(r);this.checkVersion(e),e&&this.skipUUID();let t=this.readATN();this.readStates(t,e),this.readRules(t,e),this.readModes(t);let s=[];return this.readSets(t,s,this.readInt.bind(this)),e&&this.readSets(t,s,this.readInt32.bind(this)),this.readEdges(t,s),this.readDecisions(t),this.readLexerActions(t,e),this.markPrecedenceDecisions(t),this.verifyATN(t),this.deserializationOptions.generateRuleBypassTransitions&&t.grammarType===Fn.PARSER&&(this.generateRuleBypassTransitions(t),this.verifyATN(t)),t}reset(r){if((r.charCodeAt?r.charCodeAt(0):r[0])===va-1){let e=function(s){let n=s.charCodeAt(0);return n>1?n-2:n+65534},t=r.split("").map(e);return t[0]=r.charCodeAt(0),this.data=t,this.pos=0,!0}else return this.data=r,this.pos=0,!1}skipUUID(){let r=0;for(;r++<8;)this.readInt()}checkVersion(r){let e=this.readInt();if(!r&&e!==va)throw"Could not deserialize ATN with version "+e+" (expected "+va+")."}readATN(){let r=this.readInt(),e=this.readInt();return new Kn(r,e)}readStates(r,e){let t,s,n,i=[],o=[],a=this.readInt();for(let u=0;u<a;u++){let d=this.readInt();if(d===q.INVALID_TYPE){r.addState(null);continue}let p=this.readInt();e&&p===65535&&(p=-1);let f=this.stateFactory(d,p);if(d===q.LOOP_END){let C=this.readInt();i.push([f,C])}else if(f instanceof Ar){let C=this.readInt();o.push([f,C])}r.addState(f)}for(t=0;t<i.length;t++)s=i[t],s[0].loopBackState=r.states[s[1]];for(t=0;t<o.length;t++)s=o[t],s[0].endState=r.states[s[1]];let l=this.readInt();for(t=0;t<l;t++)n=this.readInt(),r.states[n].nonGreedy=!0;let c=this.readInt();for(t=0;t<c;t++)n=this.readInt(),r.states[n].isPrecedenceRule=!0}readRules(r,e){let t,s=this.readInt();for(r.grammarType===Fn.LEXER&&(r.ruleToTokenType=Gn(s,0)),r.ruleToStartState=Gn(s,0),t=0;t<s;t++){let n=this.readInt();if(r.ruleToStartState[t]=r.states[n],r.grammarType===Fn.LEXER){let i=this.readInt();e&&i===65535&&(i=y.EOF),r.ruleToTokenType[t]=i}}for(r.ruleToStopState=Gn(s,0),t=0;t<r.states.length;t++){let n=r.states[t];n instanceof _t&&(r.ruleToStopState[n.ruleIndex]=n,r.ruleToStartState[n.ruleIndex].stopState=n)}}readModes(r){let e=this.readInt();for(let t=0;t<e;t++){let s=this.readInt();r.modeToStartState.push(r.states[s])}}readSets(r,e,t){let s=this.readInt();for(let n=0;n<s;n++){let i=new pt;e.push(i);let o=this.readInt();this.readInt()!==0&&i.addOne(-1);for(let a=0;a<o;a++){let l=t(),c=t();i.addRange(l,c)}}}readEdges(r,e){let t,s,n,i,o,a=this.readInt();for(t=0;t<a;t++){let l=this.readInt(),c=this.readInt(),u=this.readInt(),d=this.readInt(),p=this.readInt(),f=this.readInt();i=this.edgeFactory(r,u,l,c,d,p,f,e),r.states[l].addTransition(i)}for(t=0;t<r.states.length;t++)for(n=r.states[t],s=0;s<n.transitions.length;s++){let l=n.transitions[s];if(!(l instanceof Ma))continue;let c=-1;r.ruleToStartState[l.target.ruleIndex].isPrecedenceRule&&l.precedence===0&&(c=l.target.ruleIndex),i=new xs(l.followState,c),r.ruleToStopState[l.target.ruleIndex].addTransition(i)}for(t=0;t<r.states.length;t++){if(n=r.states[t],n instanceof Ar){if(n.endState===null||n.endState.startState)throw"IllegalState";n.endState.startState=n}if(n instanceof pp)for(s=0;s<n.transitions.length;s++)o=n.transitions[s].target,o instanceof Sa&&(o.loopBackState=n);else if(n instanceof fa)for(s=0;s<n.transitions.length;s++)o=n.transitions[s].target,o instanceof Qt&&(o.loopBackState=n)}}readDecisions(r){let e=this.readInt();for(let t=0;t<e;t++){let s=this.readInt(),n=r.states[s];r.decisionToState.push(n),n.decision=t}}readLexerActions(r,e){if(r.grammarType===Fn.LEXER){let t=this.readInt();r.lexerActions=Gn(t,null);for(let s=0;s<t;s++){let n=this.readInt(),i=this.readInt();e&&i===65535&&(i=-1);let o=this.readInt();e&&o===65535&&(o=-1),r.lexerActions[s]=this.lexerActionFactory(n,i,o)}}}generateRuleBypassTransitions(r){let e,t=r.ruleToStartState.length;for(e=0;e<t;e++)r.ruleToTokenType[e]=r.maxTokenType+e+1;for(e=0;e<t;e++)this.generateRuleBypassTransition(r,e)}generateRuleBypassTransition(r,e){let t,s,n=new mp;n.ruleIndex=e,r.addState(n);let i=new ga;i.ruleIndex=e,r.addState(i),n.endState=i,r.defineDecisionState(n),i.startState=n;let o=null,a=null;if(r.ruleToStartState[e].isPrecedenceRule){for(a=null,t=0;t<r.states.length;t++)if(s=r.states[t],this.stateIsEndStateFor(s,e)){a=s,o=s.loopBackState.transitions[0];break}if(o===null)throw"Couldn't identify final state of the precedence rule prefix section."}else a=r.ruleToStopState[e];for(t=0;t<r.states.length;t++){s=r.states[t];for(let d=0;d<s.transitions.length;d++){let p=s.transitions[d];p!==o&&p.target===a&&(p.target=i)}}let l=r.ruleToStartState[e],c=l.transitions.length;for(;c>0;)n.addTransition(l.transitions[c-1]),l.transitions=l.transitions.slice(-1);r.ruleToStartState[e].addTransition(new xs(n)),i.addTransition(new xs(a));let u=new dp;r.addState(u),u.addTransition(new Ia(i,r.ruleToTokenType[e])),n.addTransition(new xs(u))}stateIsEndStateFor(r,e){if(r.ruleIndex!==e||!(r instanceof Qt))return null;let t=r.transitions[r.transitions.length-1].target;return t instanceof Er&&t.epsilonOnlyTransitions&&t.transitions[0].target instanceof _t?r:null}markPrecedenceDecisions(r){for(let e=0;e<r.states.length;e++){let t=r.states[e];if(t instanceof Qt&&r.ruleToStartState[t.ruleIndex].isPrecedenceRule){let s=t.transitions[t.transitions.length-1].target;s instanceof Er&&s.epsilonOnlyTransitions&&s.transitions[0].target instanceof _t&&(t.precedenceRuleDecision=!0)}}}verifyATN(r){if(this.deserializationOptions.verifyATN)for(let e=0;e<r.states.length;e++){let t=r.states[e];if(t!==null)if(this.checkCondition(t.epsilonOnlyTransitions||t.transitions.length<=1),t instanceof Sa)this.checkCondition(t.loopBackState!==null);else if(t instanceof Qt)if(this.checkCondition(t.loopBackState!==null),this.checkCondition(t.transitions.length===2),t.transitions[0].target instanceof ba)this.checkCondition(t.transitions[1].target instanceof Er),this.checkCondition(!t.nonGreedy);else if(t.transitions[0].target instanceof Er)this.checkCondition(t.transitions[1].target instanceof ba),this.checkCondition(t.nonGreedy);else throw"IllegalState";else t instanceof fa?(this.checkCondition(t.transitions.length===1),this.checkCondition(t.transitions[0].target instanceof Qt)):t instanceof Er?this.checkCondition(t.loopBackState!==null):t instanceof hp?this.checkCondition(t.stopState!==null):t instanceof Ar?this.checkCondition(t.endState!==null):t instanceof ga?this.checkCondition(t.startState!==null):t instanceof _r?this.checkCondition(t.transitions.length<=1||t.decision>=0):this.checkCondition(t.transitions.length<=1||t instanceof _t)}}checkCondition(r,e){if(!r)throw e==null&&(e="IllegalState"),e}readInt(){return this.data[this.pos++]}readInt32(){let r=this.readInt(),e=this.readInt();return r|e<<16}edgeFactory(r,e,t,s,n,i,o,a){let l=r.states[s];switch(e){case U.EPSILON:return new xs(l);case U.RANGE:return o!==0?new gp(l,y.EOF,i):new gp(l,n,i);case U.RULE:return new Ma(r.states[n],i,o,l);case U.PREDICATE:return new kp(l,n,i,o!==0);case U.PRECEDENCE:return new h1(l,n);case U.ATOM:return o!==0?new Ia(l,y.EOF):new Ia(l,n);case U.ACTION:return new d1(l,n,i,o!==0);case U.SET:return new Dp(l,a[n]);case U.NOT_SET:return new Np(l,a[n]);case U.WILDCARD:return new Op(l);default:throw"The specified transition type: "+e+" is not valid."}}stateFactory(r,e){if(this.stateFactories===null){let t=[];t[q.INVALID_TYPE]=null,t[q.BASIC]=()=>new dp,t[q.RULE_START]=()=>new hp,t[q.BLOCK_START]=()=>new mp,t[q.PLUS_BLOCK_START]=()=>new Sa,t[q.STAR_BLOCK_START]=()=>new ba,t[q.TOKEN_START]=()=>new u1,t[q.RULE_STOP]=()=>new _t,t[q.BLOCK_END]=()=>new ga,t[q.STAR_LOOP_BACK]=()=>new fa,t[q.STAR_LOOP_ENTRY]=()=>new Qt,t[q.PLUS_LOOP_BACK]=()=>new pp,t[q.LOOP_END]=()=>new Er,this.stateFactories=t}if(r>this.stateFactories.length||this.stateFactories[r]===null)throw"The specified state type "+r+" is not valid.";{let t=this.stateFactories[r]();if(t!==null)return t.ruleIndex=e,t}}lexerActionFactory(r,e,t){if(this.actionFactories===null){let s=[];s[ve.CHANNEL]=(n,i)=>new p1(n),s[ve.CUSTOM]=(n,i)=>new m1(n,i),s[ve.MODE]=(n,i)=>new S1(n),s[ve.MORE]=(n,i)=>Da.INSTANCE,s[ve.POP_MODE]=(n,i)=>Na.INSTANCE,s[ve.PUSH_MODE]=(n,i)=>new f1(n),s[ve.SKIP]=(n,i)=>Ra.INSTANCE,s[ve.TYPE]=(n,i)=>new g1(n),this.actionFactories=s}if(r>this.actionFactories.length||this.actionFactories[r]===null)throw"The specified lexer action type "+r+" is not valid.";return this.actionFactories[r](e,t)}},b1=class{visitTerminal(r){}visitErrorNode(r){}enterEveryRule(r){}exitEveryRule(r){}},I1=class extends b1{constructor(r){super(),this.parser=r}enterEveryRule(r){console.log("enter   "+this.parser.ruleNames[r.ruleIndex]+", LT(1)="+this.parser._input.LT(1).text)}visitTerminal(r){console.log("consume "+r.symbol+" rule "+this.parser.ruleNames[this.parser._ctx.ruleIndex])}exitEveryRule(r){console.log("exit    "+this.parser.ruleNames[r.ruleIndex]+", LT(1)="+this.parser._input.LT(1).text)}},v1=class extends vp{constructor(r){super(),this._input=null,this.errorHandler=new n1,this._precedenceStack=[],this._precedenceStack.push(0),this._ctx=null,this.buildParseTrees=!0,this._tracer=null,this._parseListeners=null,this._syntaxErrors=0,this.tokenStream=r}get context(){return this._ctx}reset(){this._input!==null&&this._input.seek(0),this.errorHandler.reset(this),this._ctx=null,this._syntaxErrors=0,this.setTrace(!1),this._precedenceStack=[],this._precedenceStack.push(0),this.interpreter!==null&&this.interpreter.reset()}match(r){let e=this.getCurrentToken();return e.type===r?(this.errorHandler.reportMatch(this),this.consume()):(e=this.errorHandler.recoverInline(this),this.buildParseTrees&&e.tokenIndex===-1&&this._ctx.addErrorNode(e)),e}matchWildcard(){let r=this.getCurrentToken();return r.type>0?(this.errorHandler.reportMatch(this),this.consume()):(r=this.errorHandler.recoverInline(this),this.buildParseTrees&&r.tokenIndex===-1&&this._ctx.addErrorNode(r)),r}getParseListeners(){return this._parseListeners||[]}addParseListener(r){if(r===null)throw"listener";this._parseListeners===null&&(this._parseListeners=[]),this._parseListeners.push(r)}removeParseListener(r){if(this._parseListeners!==null){let e=this._parseListeners.indexOf(r);e>=0&&this._parseListeners.splice(e,1),this._parseListeners.length===0&&(this._parseListeners=null)}}removeParseListeners(){this._parseListeners=null}triggerEnterRuleEvent(){if(this._parseListeners!==null){let r=this._ctx;this._parseListeners.forEach(function(e){e.enterEveryRule(r),r.enterRule(e)})}}triggerExitRuleEvent(){if(this._parseListeners!==null){let r=this._ctx;this._parseListeners.slice(0).reverse().forEach(function(e){r.exitRule(e),e.exitEveryRule(r)})}}getTokenFactory(){return this._input.tokenSource._factory}setTokenFactory(r){this._input.tokenSource._factory=r}getATNWithBypassAlts(){let r=this.getSerializedATN();if(r===null)throw"The current parser does not support an ATN with bypass alternatives.";let e=this.bypassAltsAtnCache[r];if(e===null){let t=new As;t.generateRuleBypassTransitions=!0,e=new Hn(t).deserialize(r),this.bypassAltsAtnCache[r]=e}return e}get tokenStream(){return this._input}set tokenStream(r){this._input=null,this.reset(),this._input=r}get inputStream(){return this._input}set inputStream(r){this.tokenStream=r}get syntaxErrorsCount(){return this._syntaxErrors}getCurrentToken(){return this._input.LT(1)}notifyErrorListeners(r,e,t){e=e||null,t=t||null,e===null&&(e=this.getCurrentToken()),this._syntaxErrors+=1;let s=e.line,n=e.column;this.getErrorListenerDispatch().syntaxError(this,e,s,n,r,t)}consume(){let r=this.getCurrentToken();r.type!==y.EOF&&this.tokenStream.consume();let e=this._parseListeners!==null&&this._parseListeners.length>0;if(this.buildParseTrees||e){let t;this.errorHandler.inErrorRecoveryMode(this)?t=this._ctx.addErrorNode(r):t=this._ctx.addTokenNode(r),t.invokingState=this.state,e&&this._parseListeners.forEach(function(s){t instanceof Oa||t.isErrorNode!==void 0&&t.isErrorNode()?s.visitErrorNode(t):t instanceof kt&&s.visitTerminal(t)})}return r}addContextToParseTree(){this._ctx.parent!==null&&this._ctx.parent.addChild(this._ctx)}enterRule(r,e,t){this.state=e,this._ctx=r,this._ctx.start=this._input.LT(1),this.buildParseTrees&&this.addContextToParseTree(),this.triggerEnterRuleEvent()}exitRule(){this._ctx.stop=this._input.LT(-1),this.triggerExitRuleEvent(),this.state=this._ctx.invokingState,this._ctx=this._ctx.parent}enterOuterAlt(r,e){r.setAltNumber(e),this.buildParseTrees&&this._ctx!==r&&this._ctx.parent!==null&&(this._ctx.parent.removeLastChild(),this._ctx.parent.addChild(r)),this._ctx=r}getPrecedence(){return this._precedenceStack.length===0?-1:this._precedenceStack[this._precedenceStack.length-1]}enterRecursionRule(r,e,t,s){this.state=e,this._precedenceStack.push(s),this._ctx=r,this._ctx.start=this._input.LT(1),this.triggerEnterRuleEvent()}pushNewRecursionContext(r,e,t){let s=this._ctx;s._parent=r,s.invokingState=e,s.stop=this._input.LT(-1),this._ctx=r,this._ctx.start=s.start,this.buildParseTrees&&this._ctx.addChild(s),this.triggerEnterRuleEvent()}unrollRecursionContexts(r){this._precedenceStack.pop(),this._ctx.stop=this._input.LT(-1);let e=this._ctx,t=this.getParseListeners();if(t!==null&&t.length>0)for(;this._ctx!==r;)this.triggerExitRuleEvent(),this._ctx=this._ctx.parent;else this._ctx=r;e._parent=r,this.buildParseTrees&&r!==null&&r.addChild(e)}getInvokingContext(r){let e=this._ctx;for(;e!==null;){if(e.ruleIndex===r)return e;e=e.parent}return null}precpred(r,e){return e>=this._precedenceStack[this._precedenceStack.length-1]}inContext(r){return!1}isExpectedToken(r){let e=this.interpreter.atn,t=this._ctx,s=e.states[this.state],n=e.nextTokens(s);if(n.contains(r))return!0;if(!n.contains(y.EPSILON))return!1;for(;t!==null&&t.invokingState>=0&&n.contains(y.EPSILON);){let i=e.states[t.invokingState].transitions[0];if(n=e.nextTokens(i.followState),n.contains(r))return!0;t=t.parent}return!!(n.contains(y.EPSILON)&&r===y.EOF)}getExpectedTokens(){return this.interpreter.atn.getExpectedTokens(this.state,this._ctx)}getExpectedTokensWithinCurrentRule(){let r=this.interpreter.atn,e=r.states[this.state];return r.nextTokens(e)}getRuleIndex(r){let e=this.getRuleIndexMap().get(r);return e!==null?e:-1}getRuleInvocationStack(r){r=r||null,r===null&&(r=this._ctx);let e=[];for(;r!==null;){let t=r.ruleIndex;t<0?e.push("n/a"):e.push(this.ruleNames[t]),r=r.parent}return e}getDFAStrings(){return this.interpreter.decisionToDFA.toString()}dumpDFA(){let r=!1;for(let e=0;e<this.interpreter.decisionToDFA.length;e++){let t=this.interpreter.decisionToDFA[e];t.states.length>0&&(r&&console.log(),console.log("Decision "+t.decision+":"),console.log(t.toString(this.vocabulary)),r=!0)}}getSourceName(){return this._input.sourceName}setTrace(r){r?(this._tracer!==null&&this.removeParseListener(this._tracer),this._tracer=new I1(this),this.addParseListener(this._tracer)):(this.removeParseListener(this._tracer),this._tracer=null)}createTerminalNode(r,e){return new La(e)}createErrorNode(r,e){return new Ca(e)}};v1.bypassAltsAtnCache={};function y1(r){return r.hashCodeForConfigSet()}function x1(r,e){return r===e?!0:r===null||e===null?!1:r.equalsForConfigSet(e)}var Ps=class $p{constructor(e){this.configLookup=new ze(y1,x1),this.fullCtx=e===void 0?!0:e,this.readOnly=!1,this.configs=[],this.uniqueAlt=0,this.conflictingAlts=null,this.hasSemanticContext=!1,this.dipsIntoOuterContext=!1,this.cachedHashCode=-1}add(e,t){if(t===void 0&&(t=null),this.readOnly)throw"This set is readonly";e.semanticContext!==ce.NONE&&(this.hasSemanticContext=!0),e.reachesIntoOuterContext>0&&(this.dipsIntoOuterContext=!0);let s=this.configLookup.add(e);if(s===e)return this.cachedHashCode=-1,this.configs.push(e),!0;let n=!this.fullCtx,i=Ua(s.context,e.context,n,t);return s.reachesIntoOuterContext=Math.max(s.reachesIntoOuterContext,e.reachesIntoOuterContext),e.precedenceFilterSuppressed&&(s.precedenceFilterSuppressed=!0),s.context=i,!0}getStates(){let e=new ze;for(let t=0;t<this.configs.length;t++)e.add(this.configs[t].state);return e}getPredicates(){let e=[];for(let t=0;t<this.configs.length;t++){let s=this.configs[t].semanticContext;s!==ce.NONE&&e.push(s.semanticContext)}return e}optimizeConfigs(e){if(this.readOnly)throw"This set is readonly";if(this.configLookup.length!==0)for(let t=0;t<this.configs.length;t++){let s=this.configs[t];s.context=e.getCachedContext(s.context)}}addAll(e){for(let t=0;t<e.length;t++)this.add(e[t]);return!1}equals(e){return this===e||e instanceof $p&&Ms(this.configs,e.configs)&&this.fullCtx===e.fullCtx&&this.uniqueAlt===e.uniqueAlt&&this.conflictingAlts===e.conflictingAlts&&this.hasSemanticContext===e.hasSemanticContext&&this.dipsIntoOuterContext===e.dipsIntoOuterContext}hashCode(){let e=new ht;return e.update(this.configs),e.finish()}updateHashCode(e){this.readOnly?(this.cachedHashCode===-1&&(this.cachedHashCode=this.hashCode()),e.update(this.cachedHashCode)):e.update(this.hashCode())}isEmpty(){return this.configs.length===0}contains(e){if(this.configLookup===null)throw"This method is not implemented for readonly sets.";return this.configLookup.contains(e)}containsFast(e){if(this.configLookup===null)throw"This method is not implemented for readonly sets.";return this.configLookup.containsFast(e)}clear(){if(this.readOnly)throw"This set is readonly";this.configs=[],this.cachedHashCode=-1,this.configLookup=new ze}setReadonly(e){this.readOnly=e,e&&(this.configLookup=null)}toString(){return qa(this.configs)+(this.hasSemanticContext?",hasSemanticContext="+this.hasSemanticContext:"")+(this.uniqueAlt!==Kn.INVALID_ALT_NUMBER?",uniqueAlt="+this.uniqueAlt:"")+(this.conflictingAlts!==null?",conflictingAlts="+this.conflictingAlts:"")+(this.dipsIntoOuterContext?",dipsIntoOuterContext":"")}get items(){return this.configs}get length(){return this.configs.length}},Vn=class zp{constructor(e,t){return e===null&&(e=-1),t===null&&(t=new Ps),this.stateNumber=e,this.configs=t,this.edges=null,this.isAcceptState=!1,this.prediction=0,this.lexerActionExecutor=null,this.requiresFullContext=!1,this.predicates=null,this}getAltSet(){let e=new ze;if(this.configs!==null)for(let t=0;t<this.configs.length;t++){let s=this.configs[t];e.add(s.alt)}return e.length===0?null:e}equals(e){return this===e||e instanceof zp&&this.configs.equals(e.configs)}toString(){let e=""+this.stateNumber+":"+this.configs;return this.isAcceptState&&(e=e+"=>",this.predicates!==null?e=e+this.predicates:e=e+this.prediction),e}hashCode(){let e=new ht;return e.update(this.configs),e.finish()}},Cs=class{constructor(r,e){return this.atn=r,this.sharedContextCache=e,this}getCachedContext(r){if(this.sharedContextCache===null)return r;let e=new Ga;return Fp(r,this.sharedContextCache,e)}};Cs.ERROR=new Vn(2147483647,new Ps);var fp=class extends Ps{constructor(){super(),this.configLookup=new ze}},Ze=class Wn extends Rp{constructor(e,t){super(e,t);let s=e.lexerActionExecutor||null;return this.lexerActionExecutor=s||(t!==null?t.lexerActionExecutor:null),this.passedThroughNonGreedyDecision=t!==null?this.checkNonGreedyDecision(t,this.state):!1,this.hashCodeForConfigSet=Wn.prototype.hashCode,this.equalsForConfigSet=Wn.prototype.equals,this}updateHashCode(e){e.update(this.state.stateNumber,this.alt,this.context,this.semanticContext,this.passedThroughNonGreedyDecision,this.lexerActionExecutor)}equals(e){return this===e||e instanceof Wn&&this.passedThroughNonGreedyDecision===e.passedThroughNonGreedyDecision&&(this.lexerActionExecutor?this.lexerActionExecutor.equals(e.lexerActionExecutor):!e.lexerActionExecutor)&&super.equals(e)}checkNonGreedyDecision(e,t){return e.passedThroughNonGreedyDecision||t instanceof _r&&t.nonGreedy}},ya=class Yp extends gt{constructor(e,t){super(t.actionType),this.offset=e,this.action=t,this.isPositionDependent=!0}execute(e){this.action.execute(e)}updateHashCode(e){e.update(this.actionType,this.offset,this.action)}equals(e){return this===e?!0:e instanceof Yp?this.offset===e.offset&&this.action===e.action:!1}},w1=class Es{constructor(e){return this.lexerActions=e===null?[]:e,this.cachedHashCode=ht.hashStuff(e),this}fixOffsetBeforeMatch(e){let t=null;for(let s=0;s<this.lexerActions.length;s++)this.lexerActions[s].isPositionDependent&&!(this.lexerActions[s]instanceof ya)&&(t===null&&(t=this.lexerActions.concat([])),t[s]=new ya(e,this.lexerActions[s]));return t===null?this:new Es(t)}execute(e,t,s){let n=!1,i=t.index;try{for(let o=0;o<this.lexerActions.length;o++){let a=this.lexerActions[o];if(a instanceof ya){let l=a.offset;t.seek(s+l),a=a.action,n=s+l!==i}else a.isPositionDependent&&(t.seek(i),n=!1);a.execute(e)}}finally{n&&t.seek(i)}}hashCode(){return this.cachedHashCode}updateHashCode(e){e.update(this.cachedHashCode)}equals(e){if(this===e)return!0;if(e instanceof Es){if(this.cachedHashCode!=e.cachedHashCode||this.lexerActions.length!=e.lexerActions.length)return!1;{let t=this.lexerActions.length;for(let s=0;s<t;++s)if(!this.lexerActions[s].equals(e.lexerActions[s]))return!1;return!0}}else return!1}static append(e,t){if(e===null)return new Es([t]);let s=e.lexerActions.concat([t]);return new Es(s)}};function Sp(r){r.index=-1,r.line=0,r.column=-1,r.dfaState=null}var C1=class{constructor(){Sp(this)}reset(){Sp(this)}},Jt=class le extends Cs{constructor(e,t,s,n){super(t,n),this.decisionToDFA=s,this.recog=e,this.startIndex=-1,this.line=1,this.column=0,this.mode=ye.DEFAULT_MODE,this.prevAccept=new C1}copyState(e){this.column=e.column,this.line=e.line,this.mode=e.mode,this.startIndex=e.startIndex}match(e,t){this.mode=t;let s=e.mark();try{this.startIndex=e.index,this.prevAccept.reset();let n=this.decisionToDFA[t];return n.s0===null?this.matchATN(e):this.execATN(e,n.s0)}finally{e.release(s)}}reset(){this.prevAccept.reset(),this.startIndex=-1,this.line=1,this.column=0,this.mode=ye.DEFAULT_MODE}matchATN(e){let t=this.atn.modeToStartState[this.mode];le.debug&&console.log("matchATN mode "+this.mode+" start: "+t);let s=this.mode,n=this.computeStartState(e,t),i=n.hasSemanticContext;n.hasSemanticContext=!1;let o=this.addDFAState(n);i||(this.decisionToDFA[this.mode].s0=o);let a=this.execATN(e,o);return le.debug&&console.log("DFA after matchATN: "+this.decisionToDFA[s].toLexerString()),a}execATN(e,t){le.debug&&console.log("start state closure="+t.configs),t.isAcceptState&&this.captureSimState(this.prevAccept,e,t);let s=e.LA(1),n=t;for(;;){le.debug&&console.log("execATN loop starting closure: "+n.configs);let i=this.getExistingTargetState(n,s);if(i===null&&(i=this.computeTargetState(e,n,s)),i===Cs.ERROR||(s!==y.EOF&&this.consume(e),i.isAcceptState&&(this.captureSimState(this.prevAccept,e,i),s===y.EOF)))break;s=e.LA(1),n=i}return this.failOrAccept(this.prevAccept,e,n.configs,s)}getExistingTargetState(e,t){if(e.edges===null||t<le.MIN_DFA_EDGE||t>le.MAX_DFA_EDGE)return null;let s=e.edges[t-le.MIN_DFA_EDGE];return s===void 0&&(s=null),le.debug&&s!==null&&console.log("reuse state "+e.stateNumber+" edge to "+s.stateNumber),s}computeTargetState(e,t,s){let n=new fp;return this.getReachableConfigSet(e,t.configs,n,s),n.items.length===0?(n.hasSemanticContext||this.addDFAEdge(t,s,Cs.ERROR),Cs.ERROR):this.addDFAEdge(t,s,null,n)}failOrAccept(e,t,s,n){if(this.prevAccept.dfaState!==null){let i=e.dfaState.lexerActionExecutor;return this.accept(t,i,this.startIndex,e.index,e.line,e.column),e.dfaState.prediction}else{if(n===y.EOF&&t.index===this.startIndex)return y.EOF;throw new xp(this.recog,t,this.startIndex,s)}}getReachableConfigSet(e,t,s,n){let i=Kn.INVALID_ALT_NUMBER;for(let o=0;o<t.items.length;o++){let a=t.items[o],l=a.alt===i;if(!(l&&a.passedThroughNonGreedyDecision)){le.debug&&console.log(`testing %s at %s
`,this.getTokenName(n),a.toString(this.recog,!0));for(let c=0;c<a.state.transitions.length;c++){let u=a.state.transitions[c],d=this.getReachableTarget(u,n);if(d!==null){let p=a.lexerActionExecutor;p!==null&&(p=p.fixOffsetBeforeMatch(e.index-this.startIndex));let f=n===y.EOF,C=new Ze({state:d,lexerActionExecutor:p},a);this.closure(e,C,s,l,!0,f)&&(i=a.alt)}}}}}accept(e,t,s,n,i,o){le.debug&&console.log(`ACTION %s
`,t),e.seek(n),this.line=i,this.column=o,t!==null&&this.recog!==null&&t.execute(this.recog,e,s)}getReachableTarget(e,t){return e.matches(t,0,ye.MAX_CHAR_VALUE)?e.target:null}computeStartState(e,t){let s=P.EMPTY,n=new fp;for(let i=0;i<t.transitions.length;i++){let o=t.transitions[i].target,a=new Ze({state:o,alt:i+1,context:s},null);this.closure(e,a,n,!1,!1,!1)}return n}closure(e,t,s,n,i,o){let a=null;if(le.debug&&console.log("closure("+t.toString(this.recog,!0)+")"),t.state instanceof _t){if(le.debug&&(this.recog!==null?console.log(`closure at %s rule stop %s
`,this.recog.ruleNames[t.state.ruleIndex],t):console.log(`closure at rule stop %s
`,t)),t.context===null||t.context.hasEmptyPath()){if(t.context===null||t.context.isEmpty())return s.add(t),!0;s.add(new Ze({state:t.state,context:P.EMPTY},t)),n=!0}if(t.context!==null&&!t.context.isEmpty()){for(let l=0;l<t.context.length;l++)if(t.context.getReturnState(l)!==P.EMPTY_RETURN_STATE){let c=t.context.getParent(l),u=this.atn.states[t.context.getReturnState(l)];a=new Ze({state:u,context:c},t),n=this.closure(e,a,s,n,i,o)}}return n}t.state.epsilonOnlyTransitions||(!n||!t.passedThroughNonGreedyDecision)&&s.add(t);for(let l=0;l<t.state.transitions.length;l++){let c=t.state.transitions[l];a=this.getEpsilonTarget(e,t,c,s,i,o),a!==null&&(n=this.closure(e,a,s,n,i,o))}return n}getEpsilonTarget(e,t,s,n,i,o){let a=null;if(s.serializationType===U.RULE){let l=$e.create(t.context,s.followState.stateNumber);a=new Ze({state:s.target,context:l},t)}else{if(s.serializationType===U.PRECEDENCE)throw"Precedence predicates are not supported in lexers.";if(s.serializationType===U.PREDICATE)le.debug&&console.log("EVAL rule "+s.ruleIndex+":"+s.predIndex),n.hasSemanticContext=!0,this.evaluatePredicate(e,s.ruleIndex,s.predIndex,i)&&(a=new Ze({state:s.target},t));else if(s.serializationType===U.ACTION)if(t.context===null||t.context.hasEmptyPath()){let l=w1.append(t.lexerActionExecutor,this.atn.lexerActions[s.actionIndex]);a=new Ze({state:s.target,lexerActionExecutor:l},t)}else a=new Ze({state:s.target},t);else s.serializationType===U.EPSILON?a=new Ze({state:s.target},t):(s.serializationType===U.ATOM||s.serializationType===U.RANGE||s.serializationType===U.SET)&&o&&s.matches(y.EOF,0,ye.MAX_CHAR_VALUE)&&(a=new Ze({state:s.target},t))}return a}evaluatePredicate(e,t,s,n){if(this.recog===null)return!0;if(!n)return this.recog.sempred(null,t,s);let i=this.column,o=this.line,a=e.index,l=e.mark();try{return this.consume(e),this.recog.sempred(null,t,s)}finally{this.column=i,this.line=o,e.seek(a),e.release(l)}}captureSimState(e,t,s){e.index=t.index,e.line=this.line,e.column=this.column,e.dfaState=s}addDFAEdge(e,t,s,n){if(s===void 0&&(s=null),n===void 0&&(n=null),s===null&&n!==null){let i=n.hasSemanticContext;if(n.hasSemanticContext=!1,s=this.addDFAState(n),i)return s}return t<le.MIN_DFA_EDGE||t>le.MAX_DFA_EDGE||(le.debug&&console.log("EDGE "+e+" -> "+s+" upon "+t),e.edges===null&&(e.edges=[]),e.edges[t-le.MIN_DFA_EDGE]=s),s}addDFAState(e){let t=new Vn(null,e),s=null;for(let a=0;a<e.items.length;a++){let l=e.items[a];if(l.state instanceof _t){s=l;break}}s!==null&&(t.isAcceptState=!0,t.lexerActionExecutor=s.lexerActionExecutor,t.prediction=this.atn.ruleToTokenType[s.state.ruleIndex]);let n=this.decisionToDFA[this.mode],i=n.states.get(t);if(i!==null)return i;let o=t;return o.stateNumber=n.states.length,e.setReadonly(!0),o.configs=e,n.states.add(o),o}getDFA(e){return this.decisionToDFA[e]}getText(e){return e.getText(this.startIndex,e.index-1)}consume(e){e.LA(1)===`
`.charCodeAt(0)?(this.line+=1,this.column=0):this.column+=1,e.consume()}getTokenName(e){return e===-1?"EOF":"'"+String.fromCharCode(e)+"'"}};Jt.debug=!1;Jt.dfa_debug=!1;Jt.MIN_DFA_EDGE=0;Jt.MAX_DFA_EDGE=127;var Ba=class{constructor(){this.cache=new Ga}add(r){if(r===P.EMPTY)return P.EMPTY;let e=this.cache.get(r)||null;return e!==null?e:(this.cache.set(r,r),r)}get(r){return this.cache.get(r)||null}get length(){return this.cache.length}},Qp=class{constructor(r,e,t){this.dfa=r,this.literalNames=e||[],this.symbolicNames=t||[]}toString(){if(this.dfa.s0===null)return null;let r="",e=this.dfa.sortedStates();for(let t=0;t<e.length;t++){let s=e[t];if(s.edges!==null){let n=s.edges.length;for(let i=0;i<n;i++){let o=s.edges[i]||null;o!==null&&o.stateNumber!==2147483647&&(r=r.concat(this.getStateString(s)),r=r.concat("-"),r=r.concat(this.getEdgeLabel(i)),r=r.concat("->"),r=r.concat(this.getStateString(o)),r=r.concat(`
`))}}}return r.length===0?null:r}getEdgeLabel(r){return r===0?"EOF":this.literalNames!==null||this.symbolicNames!==null?this.literalNames[r-1]||this.symbolicNames[r-1]:String.fromCharCode(r-1)}getStateString(r){let e=(r.isAcceptState?":":"")+"s"+r.stateNumber+(r.requiresFullContext?"^":"");return r.isAcceptState?r.predicates!==null?e+"=>"+qa(r.predicates):e+"=>"+r.prediction.toString():e}},E1=class extends Qp{constructor(r){super(r,null)}getEdgeLabel(r){return"'"+String.fromCharCode(r)+"'"}},ja=class{constructor(r,e){if(e===void 0&&(e=0),this.atnStartState=r,this.decision=e,this._states=new ze,this.s0=null,this.precedenceDfa=!1,r instanceof Qt&&r.precedenceRuleDecision){this.precedenceDfa=!0;let t=new Vn(null,new Ps);t.edges=[],t.isAcceptState=!1,t.requiresFullContext=!1,this.s0=t}}getPrecedenceStartState(r){if(!this.precedenceDfa)throw"Only precedence DFAs may contain a precedence start state.";return r<0||r>=this.s0.edges.length?null:this.s0.edges[r]||null}setPrecedenceStartState(r,e){if(!this.precedenceDfa)throw"Only precedence DFAs may contain a precedence start state.";r<0||(this.s0.edges[r]=e)}setPrecedenceDfa(r){if(this.precedenceDfa!==r){if(this._states=new ze,r){let e=new Vn(null,new Ps);e.edges=[],e.isAcceptState=!1,e.requiresFullContext=!1,this.s0=e}else this.s0=null;this.precedenceDfa=r}}sortedStates(){return this._states.values().sort(function(r,e){return r.stateNumber-e.stateNumber})}toString(r,e){return r=r||null,e=e||null,this.s0===null?"":new Qp(this,r,e).toString()}toLexerString(){return this.s0===null?"":new E1(this).toString()}get states(){return this._states}};var T1=class extends Pr{constructor(r,e){super(r,e),this.children=null,this.start=null,this.stop=null,this.exception=null}copyFrom(r){this._parent=r._parent,this.invokingState=r.invokingState,this.children=null,this.start=r.start,this.stop=r.stop,r.children&&(this.children=[],r.children.map(function(e){e instanceof Ca&&(this.children.push(e),e.parent=this)},this))}enterRule(r){}exitRule(r){}addChild(r){return this.children===null&&(this.children=[]),this.children.push(r),r}removeLastChild(){this.children!==null&&this.children.pop()}addTokenNode(r){let e=new La(r);return this.addChild(e),e.parent=this,e}addErrorNode(r){let e=new Ca(r);return this.addChild(e),e.parent=this,e}getChild(r,e){if(e=e??null,this.children===null||r<0||r>=this.children.length)return null;if(e===null)return this.children[r];for(let t=0;t<this.children.length;t++){let s=this.children[t];if(s instanceof e){if(r===0)return s;r-=1}}return null}getToken(r,e){if(this.children===null||e<0||e>=this.children.length)return null;for(let t=0;t<this.children.length;t++){let s=this.children[t];if(s instanceof kt&&s.symbol.type===r){if(e===0)return s;e-=1}}return null}getTokens(r){if(this.children===null)return[];{let e=[];for(let t=0;t<this.children.length;t++){let s=this.children[t];s instanceof kt&&s.symbol.type===r&&e.push(s)}return e}}getRuleContext(r,e){return this.getChild(r,e)}getRuleContexts(r){if(this.children===null)return[];{let e=[];for(let t=0;t<this.children.length;t++){let s=this.children[t];s instanceof r&&e.push(s)}return e}}getChildCount(){return this.children===null?0:this.children.length}getSourceInterval(){return this.start===null||this.stop===null?W.INVALID_INTERVAL:new W(this.start.tokenIndex,this.stop.tokenIndex)}};Pr.EMPTY=new T1;var bp=class{walk(r,e){if(e instanceof Oa||e.isErrorNode!==void 0&&e.isErrorNode())r.visitErrorNode(e);else if(e instanceof kt)r.visitTerminal(e);else{this.enterRule(r,e);for(let t=0;t<e.getChildCount();t++){let s=e.getChild(t);this.walk(r,s)}this.exitRule(r,e)}}enterRule(r,e){let t=e.ruleContext;r.enterEveryRule(t),t.enterRule(r)}exitRule(r,e){let t=e.ruleContext;t.exitRule(r),r.exitEveryRule(t)}};bp.DEFAULT=new bp;var D6=class X extends ye{static TOKEN_REF=1;static RULE_REF=2;static ANYWHERE=3;static ROOT=4;static WILDCARD=5;static BANG=6;static ID=7;static STRING=8;static EOF=y.EOF;static channelNames=["DEFAULT_TOKEN_CHANNEL","HIDDEN"];static literalNames=[null,null,null,"'//'","'/'","'*'","'!'"];static symbolicNames=[null,"TOKEN_REF","RULE_REF","ANYWHERE","ROOT","WILDCARD","BANG","ID","STRING"];static modeNames=["DEFAULT_MODE"];static ruleNames=["ANYWHERE","ROOT","WILDCARD","BANG","ID","NameChar","NameStartChar","STRING"];constructor(e){super(e),this.interpreter=new Jt(this,X._ATN,X.decisionsToDFA,new Ba)}get grammarFileName(){return"XPathLexer.g4"}get literalNames(){return X.literalNames}get symbolicNames(){return X.symbolicNames}get ruleNames(){return X.ruleNames}get serializedATN(){return X._serializedATN}get channelNames(){return X.channelNames}get modeNames(){return X.modeNames}action(e,t,s){switch(t){case 4:this.ID_action(e,s);break}}ID_action(e,t){switch(t){case 0:{let s=this.text;s.charAt(0)===s.charAt(0).toUpperCase()?this._type=X.TOKEN_REF:this._type=X.RULE_REF;break}}}static _serializedATN=[4,0,8,48,6,-1,2,0,7,0,2,1,7,1,2,2,7,2,2,3,7,3,2,4,7,4,2,5,7,5,2,6,7,6,2,7,7,7,1,0,1,0,1,0,1,1,1,1,1,2,1,2,1,3,1,3,1,4,1,4,5,4,29,8,4,10,4,12,4,32,9,4,1,4,1,4,1,5,1,5,1,6,1,6,1,7,1,7,5,7,42,8,7,10,7,12,7,45,9,7,1,7,1,7,1,43,0,8,1,3,3,4,5,5,7,6,9,7,11,0,13,0,15,8,1,0,2,784,0,0,8,14,27,48,57,65,90,95,95,97,122,127,159,170,170,173,173,181,181,186,186,192,214,216,246,248,705,710,721,736,740,748,748,750,750,768,884,886,887,890,893,895,895,902,902,904,906,908,908,910,929,931,1013,1015,1153,1155,1159,1162,1327,1329,1366,1369,1369,1376,1416,1425,1469,1471,1471,1473,1474,1476,1477,1479,1479,1488,1514,1519,1522,1536,1541,1552,1562,1564,1564,1568,1641,1646,1747,1749,1757,1759,1768,1770,1788,1791,1791,1807,1866,1869,1969,1984,2037,2042,2042,2045,2045,2048,2093,2112,2139,2144,2154,2160,2183,2185,2190,2192,2193,2200,2403,2406,2415,2417,2435,2437,2444,2447,2448,2451,2472,2474,2480,2482,2482,2486,2489,2492,2500,2503,2504,2507,2510,2519,2519,2524,2525,2527,2531,2534,2545,2556,2556,2558,2558,2561,2563,2565,2570,2575,2576,2579,2600,2602,2608,2610,2611,2613,2614,2616,2617,2620,2620,2622,2626,2631,2632,2635,2637,2641,2641,2649,2652,2654,2654,2662,2677,2689,2691,2693,2701,2703,2705,2707,2728,2730,2736,2738,2739,2741,2745,2748,2757,2759,2761,2763,2765,2768,2768,2784,2787,2790,2799,2809,2815,2817,2819,2821,2828,2831,2832,2835,2856,2858,2864,2866,2867,2869,2873,2876,2884,2887,2888,2891,2893,2901,2903,2908,2909,2911,2915,2918,2927,2929,2929,2946,2947,2949,2954,2958,2960,2962,2965,2969,2970,2972,2972,2974,2975,2979,2980,2984,2986,2990,3001,3006,3010,3014,3016,3018,3021,3024,3024,3031,3031,3046,3055,3072,3084,3086,3088,3090,3112,3114,3129,3132,3140,3142,3144,3146,3149,3157,3158,3160,3162,3165,3165,3168,3171,3174,3183,3200,3203,3205,3212,3214,3216,3218,3240,3242,3251,3253,3257,3260,3268,3270,3272,3274,3277,3285,3286,3293,3294,3296,3299,3302,3311,3313,3315,3328,3340,3342,3344,3346,3396,3398,3400,3402,3406,3412,3415,3423,3427,3430,3439,3450,3455,3457,3459,3461,3478,3482,3505,3507,3515,3517,3517,3520,3526,3530,3530,3535,3540,3542,3542,3544,3551,3558,3567,3570,3571,3585,3642,3648,3662,3664,3673,3713,3714,3716,3716,3718,3722,3724,3747,3749,3749,3751,3773,3776,3780,3782,3782,3784,3790,3792,3801,3804,3807,3840,3840,3864,3865,3872,3881,3893,3893,3895,3895,3897,3897,3902,3911,3913,3948,3953,3972,3974,3991,3993,4028,4038,4038,4096,4169,4176,4253,4256,4293,4295,4295,4301,4301,4304,4346,4348,4680,4682,4685,4688,4694,4696,4696,4698,4701,4704,4744,4746,4749,4752,4784,4786,4789,4792,4798,4800,4800,4802,4805,4808,4822,4824,4880,4882,4885,4888,4954,4957,4959,4992,5007,5024,5109,5112,5117,5121,5740,5743,5759,5761,5786,5792,5866,5870,5880,5888,5909,5919,5940,5952,5971,5984,5996,5998,6e3,6002,6003,6016,6099,6103,6103,6108,6109,6112,6121,6155,6169,6176,6264,6272,6314,6320,6389,6400,6430,6432,6443,6448,6459,6470,6509,6512,6516,6528,6571,6576,6601,6608,6617,6656,6683,6688,6750,6752,6780,6783,6793,6800,6809,6823,6823,6832,6845,6847,6862,6912,6988,6992,7001,7019,7027,7040,7155,7168,7223,7232,7241,7245,7293,7296,7304,7312,7354,7357,7359,7376,7378,7380,7418,7424,7957,7960,7965,7968,8005,8008,8013,8016,8023,8025,8025,8027,8027,8029,8029,8031,8061,8064,8116,8118,8124,8126,8126,8130,8132,8134,8140,8144,8147,8150,8155,8160,8172,8178,8180,8182,8188,8203,8207,8234,8238,8255,8256,8276,8276,8288,8292,8294,8303,8305,8305,8319,8319,8336,8348,8400,8412,8417,8417,8421,8432,8450,8450,8455,8455,8458,8467,8469,8469,8473,8477,8484,8484,8486,8486,8488,8488,8490,8493,8495,8505,8508,8511,8517,8521,8526,8526,8544,8584,11264,11492,11499,11507,11520,11557,11559,11559,11565,11565,11568,11623,11631,11631,11647,11670,11680,11686,11688,11694,11696,11702,11704,11710,11712,11718,11720,11726,11728,11734,11736,11742,11744,11775,11823,11823,12293,12295,12321,12335,12337,12341,12344,12348,12353,12438,12441,12442,12445,12447,12449,12538,12540,12543,12549,12591,12593,12686,12704,12735,12784,12799,13312,19903,19968,42124,42192,42237,42240,42508,42512,42539,42560,42607,42612,42621,42623,42737,42775,42783,42786,42888,42891,42954,42960,42961,42963,42963,42965,42969,42994,43047,43052,43052,43072,43123,43136,43205,43216,43225,43232,43255,43259,43259,43261,43309,43312,43347,43360,43388,43392,43456,43471,43481,43488,43518,43520,43574,43584,43597,43600,43609,43616,43638,43642,43714,43739,43741,43744,43759,43762,43766,43777,43782,43785,43790,43793,43798,43808,43814,43816,43822,43824,43866,43868,43881,43888,44010,44012,44013,44016,44025,44032,55203,55216,55238,55243,55291,63744,64109,64112,64217,64256,64262,64275,64279,64285,64296,64298,64310,64312,64316,64318,64318,64320,64321,64323,64324,64326,64433,64467,64829,64848,64911,64914,64967,65008,65019,65024,65039,65056,65071,65075,65076,65101,65103,65136,65140,65142,65276,65279,65279,65296,65305,65313,65338,65343,65343,65345,65370,65382,65470,65474,65479,65482,65487,65490,65495,65498,65500,65529,65531,65536,65547,65549,65574,65576,65594,65596,65597,65599,65613,65616,65629,65664,65786,65856,65908,66045,66045,66176,66204,66208,66256,66272,66272,66304,66335,66349,66378,66384,66426,66432,66461,66464,66499,66504,66511,66513,66517,66560,66717,66720,66729,66736,66771,66776,66811,66816,66855,66864,66915,66928,66938,66940,66954,66956,66962,66964,66965,66967,66977,66979,66993,66995,67001,67003,67004,67072,67382,67392,67413,67424,67431,67456,67461,67463,67504,67506,67514,67584,67589,67592,67592,67594,67637,67639,67640,67644,67644,67647,67669,67680,67702,67712,67742,67808,67826,67828,67829,67840,67861,67872,67897,67968,68023,68030,68031,68096,68099,68101,68102,68108,68115,68117,68119,68121,68149,68152,68154,68159,68159,68192,68220,68224,68252,68288,68295,68297,68326,68352,68405,68416,68437,68448,68466,68480,68497,68608,68680,68736,68786,68800,68850,68864,68903,68912,68921,69248,69289,69291,69292,69296,69297,69373,69404,69415,69415,69424,69456,69488,69509,69552,69572,69600,69622,69632,69702,69734,69749,69759,69818,69821,69821,69826,69826,69837,69837,69840,69864,69872,69881,69888,69940,69942,69951,69956,69959,69968,70003,70006,70006,70016,70084,70089,70092,70094,70106,70108,70108,70144,70161,70163,70199,70206,70209,70272,70278,70280,70280,70282,70285,70287,70301,70303,70312,70320,70378,70384,70393,70400,70403,70405,70412,70415,70416,70419,70440,70442,70448,70450,70451,70453,70457,70459,70468,70471,70472,70475,70477,70480,70480,70487,70487,70493,70499,70502,70508,70512,70516,70656,70730,70736,70745,70750,70753,70784,70853,70855,70855,70864,70873,71040,71093,71096,71104,71128,71133,71168,71232,71236,71236,71248,71257,71296,71352,71360,71369,71424,71450,71453,71467,71472,71481,71488,71494,71680,71738,71840,71913,71935,71942,71945,71945,71948,71955,71957,71958,71960,71989,71991,71992,71995,72003,72016,72025,72096,72103,72106,72151,72154,72161,72163,72164,72192,72254,72263,72263,72272,72345,72349,72349,72368,72440,72704,72712,72714,72758,72760,72768,72784,72793,72818,72847,72850,72871,72873,72886,72960,72966,72968,72969,72971,73014,73018,73018,73020,73021,73023,73031,73040,73049,73056,73061,73063,73064,73066,73102,73104,73105,73107,73112,73120,73129,73440,73462,73472,73488,73490,73530,73534,73538,73552,73561,73648,73648,73728,74649,74752,74862,74880,75075,77712,77808,77824,78933,82944,83526,92160,92728,92736,92766,92768,92777,92784,92862,92864,92873,92880,92909,92912,92916,92928,92982,92992,92995,93008,93017,93027,93047,93053,93071,93760,93823,93952,94026,94031,94087,94095,94111,94176,94177,94179,94180,94192,94193,94208,100343,100352,101589,101632,101640,110576,110579,110581,110587,110589,110590,110592,110882,110898,110898,110928,110930,110933,110933,110948,110951,110960,111355,113664,113770,113776,113788,113792,113800,113808,113817,113821,113822,113824,113827,118528,118573,118576,118598,119141,119145,119149,119170,119173,119179,119210,119213,119362,119364,119808,119892,119894,119964,119966,119967,119970,119970,119973,119974,119977,119980,119982,119993,119995,119995,119997,120003,120005,120069,120071,120074,120077,120084,120086,120092,120094,120121,120123,120126,120128,120132,120134,120134,120138,120144,120146,120485,120488,120512,120514,120538,120540,120570,120572,120596,120598,120628,120630,120654,120656,120686,120688,120712,120714,120744,120746,120770,120772,120779,120782,120831,121344,121398,121403,121452,121461,121461,121476,121476,121499,121503,121505,121519,122624,122654,122661,122666,122880,122886,122888,122904,122907,122913,122915,122916,122918,122922,122928,122989,123023,123023,123136,123180,123184,123197,123200,123209,123214,123214,123536,123566,123584,123641,124112,124153,124896,124902,124904,124907,124909,124910,124912,124926,124928,125124,125136,125142,125184,125259,125264,125273,126464,126467,126469,126495,126497,126498,126500,126500,126503,126503,126505,126514,126516,126519,126521,126521,126523,126523,126530,126530,126535,126535,126537,126537,126539,126539,126541,126543,126545,126546,126548,126548,126551,126551,126553,126553,126555,126555,126557,126557,126559,126559,126561,126562,126564,126564,126567,126570,126572,126578,126580,126583,126585,126588,126590,126590,126592,126601,126603,126619,126625,126627,126629,126633,126635,126651,130032,130041,131072,173791,173824,177977,177984,178205,178208,183969,183984,191456,194560,195101,196608,201546,201552,205743,917505,917505,917536,917631,917760,917999,662,0,65,90,97,122,170,170,181,181,186,186,192,214,216,246,248,705,710,721,736,740,748,748,750,750,880,884,886,887,890,893,895,895,902,902,904,906,908,908,910,929,931,1013,1015,1153,1162,1327,1329,1366,1369,1369,1376,1416,1488,1514,1519,1522,1568,1610,1646,1647,1649,1747,1749,1749,1765,1766,1774,1775,1786,1788,1791,1791,1808,1808,1810,1839,1869,1957,1969,1969,1994,2026,2036,2037,2042,2042,2048,2069,2074,2074,2084,2084,2088,2088,2112,2136,2144,2154,2160,2183,2185,2190,2208,2249,2308,2361,2365,2365,2384,2384,2392,2401,2417,2432,2437,2444,2447,2448,2451,2472,2474,2480,2482,2482,2486,2489,2493,2493,2510,2510,2524,2525,2527,2529,2544,2545,2556,2556,2565,2570,2575,2576,2579,2600,2602,2608,2610,2611,2613,2614,2616,2617,2649,2652,2654,2654,2674,2676,2693,2701,2703,2705,2707,2728,2730,2736,2738,2739,2741,2745,2749,2749,2768,2768,2784,2785,2809,2809,2821,2828,2831,2832,2835,2856,2858,2864,2866,2867,2869,2873,2877,2877,2908,2909,2911,2913,2929,2929,2947,2947,2949,2954,2958,2960,2962,2965,2969,2970,2972,2972,2974,2975,2979,2980,2984,2986,2990,3001,3024,3024,3077,3084,3086,3088,3090,3112,3114,3129,3133,3133,3160,3162,3165,3165,3168,3169,3200,3200,3205,3212,3214,3216,3218,3240,3242,3251,3253,3257,3261,3261,3293,3294,3296,3297,3313,3314,3332,3340,3342,3344,3346,3386,3389,3389,3406,3406,3412,3414,3423,3425,3450,3455,3461,3478,3482,3505,3507,3515,3517,3517,3520,3526,3585,3632,3634,3635,3648,3654,3713,3714,3716,3716,3718,3722,3724,3747,3749,3749,3751,3760,3762,3763,3773,3773,3776,3780,3782,3782,3804,3807,3840,3840,3904,3911,3913,3948,3976,3980,4096,4138,4159,4159,4176,4181,4186,4189,4193,4193,4197,4198,4206,4208,4213,4225,4238,4238,4256,4293,4295,4295,4301,4301,4304,4346,4348,4680,4682,4685,4688,4694,4696,4696,4698,4701,4704,4744,4746,4749,4752,4784,4786,4789,4792,4798,4800,4800,4802,4805,4808,4822,4824,4880,4882,4885,4888,4954,4992,5007,5024,5109,5112,5117,5121,5740,5743,5759,5761,5786,5792,5866,5870,5880,5888,5905,5919,5937,5952,5969,5984,5996,5998,6e3,6016,6067,6103,6103,6108,6108,6176,6264,6272,6276,6279,6312,6314,6314,6320,6389,6400,6430,6480,6509,6512,6516,6528,6571,6576,6601,6656,6678,6688,6740,6823,6823,6917,6963,6981,6988,7043,7072,7086,7087,7098,7141,7168,7203,7245,7247,7258,7293,7296,7304,7312,7354,7357,7359,7401,7404,7406,7411,7413,7414,7418,7418,7424,7615,7680,7957,7960,7965,7968,8005,8008,8013,8016,8023,8025,8025,8027,8027,8029,8029,8031,8061,8064,8116,8118,8124,8126,8126,8130,8132,8134,8140,8144,8147,8150,8155,8160,8172,8178,8180,8182,8188,8305,8305,8319,8319,8336,8348,8450,8450,8455,8455,8458,8467,8469,8469,8473,8477,8484,8484,8486,8486,8488,8488,8490,8493,8495,8505,8508,8511,8517,8521,8526,8526,8544,8584,11264,11492,11499,11502,11506,11507,11520,11557,11559,11559,11565,11565,11568,11623,11631,11631,11648,11670,11680,11686,11688,11694,11696,11702,11704,11710,11712,11718,11720,11726,11728,11734,11736,11742,11823,11823,12293,12295,12321,12329,12337,12341,12344,12348,12353,12438,12445,12447,12449,12538,12540,12543,12549,12591,12593,12686,12704,12735,12784,12799,13312,19903,19968,42124,42192,42237,42240,42508,42512,42527,42538,42539,42560,42606,42623,42653,42656,42735,42775,42783,42786,42888,42891,42954,42960,42961,42963,42963,42965,42969,42994,43009,43011,43013,43015,43018,43020,43042,43072,43123,43138,43187,43250,43255,43259,43259,43261,43262,43274,43301,43312,43334,43360,43388,43396,43442,43471,43471,43488,43492,43494,43503,43514,43518,43520,43560,43584,43586,43588,43595,43616,43638,43642,43642,43646,43695,43697,43697,43701,43702,43705,43709,43712,43712,43714,43714,43739,43741,43744,43754,43762,43764,43777,43782,43785,43790,43793,43798,43808,43814,43816,43822,43824,43866,43868,43881,43888,44002,44032,55203,55216,55238,55243,55291,63744,64109,64112,64217,64256,64262,64275,64279,64285,64285,64287,64296,64298,64310,64312,64316,64318,64318,64320,64321,64323,64324,64326,64433,64467,64829,64848,64911,64914,64967,65008,65019,65136,65140,65142,65276,65313,65338,65345,65370,65382,65470,65474,65479,65482,65487,65490,65495,65498,65500,65536,65547,65549,65574,65576,65594,65596,65597,65599,65613,65616,65629,65664,65786,65856,65908,66176,66204,66208,66256,66304,66335,66349,66378,66384,66421,66432,66461,66464,66499,66504,66511,66513,66517,66560,66717,66736,66771,66776,66811,66816,66855,66864,66915,66928,66938,66940,66954,66956,66962,66964,66965,66967,66977,66979,66993,66995,67001,67003,67004,67072,67382,67392,67413,67424,67431,67456,67461,67463,67504,67506,67514,67584,67589,67592,67592,67594,67637,67639,67640,67644,67644,67647,67669,67680,67702,67712,67742,67808,67826,67828,67829,67840,67861,67872,67897,67968,68023,68030,68031,68096,68096,68112,68115,68117,68119,68121,68149,68192,68220,68224,68252,68288,68295,68297,68324,68352,68405,68416,68437,68448,68466,68480,68497,68608,68680,68736,68786,68800,68850,68864,68899,69248,69289,69296,69297,69376,69404,69415,69415,69424,69445,69488,69505,69552,69572,69600,69622,69635,69687,69745,69746,69749,69749,69763,69807,69840,69864,69891,69926,69956,69956,69959,69959,69968,70002,70006,70006,70019,70066,70081,70084,70106,70106,70108,70108,70144,70161,70163,70187,70207,70208,70272,70278,70280,70280,70282,70285,70287,70301,70303,70312,70320,70366,70405,70412,70415,70416,70419,70440,70442,70448,70450,70451,70453,70457,70461,70461,70480,70480,70493,70497,70656,70708,70727,70730,70751,70753,70784,70831,70852,70853,70855,70855,71040,71086,71128,71131,71168,71215,71236,71236,71296,71338,71352,71352,71424,71450,71488,71494,71680,71723,71840,71903,71935,71942,71945,71945,71948,71955,71957,71958,71960,71983,71999,71999,72001,72001,72096,72103,72106,72144,72161,72161,72163,72163,72192,72192,72203,72242,72250,72250,72272,72272,72284,72329,72349,72349,72368,72440,72704,72712,72714,72750,72768,72768,72818,72847,72960,72966,72968,72969,72971,73008,73030,73030,73056,73061,73063,73064,73066,73097,73112,73112,73440,73458,73474,73474,73476,73488,73490,73523,73648,73648,73728,74649,74752,74862,74880,75075,77712,77808,77824,78895,78913,78918,82944,83526,92160,92728,92736,92766,92784,92862,92880,92909,92928,92975,92992,92995,93027,93047,93053,93071,93760,93823,93952,94026,94032,94032,94099,94111,94176,94177,94179,94179,94208,100343,100352,101589,101632,101640,110576,110579,110581,110587,110589,110590,110592,110882,110898,110898,110928,110930,110933,110933,110948,110951,110960,111355,113664,113770,113776,113788,113792,113800,113808,113817,119808,119892,119894,119964,119966,119967,119970,119970,119973,119974,119977,119980,119982,119993,119995,119995,119997,120003,120005,120069,120071,120074,120077,120084,120086,120092,120094,120121,120123,120126,120128,120132,120134,120134,120138,120144,120146,120485,120488,120512,120514,120538,120540,120570,120572,120596,120598,120628,120630,120654,120656,120686,120688,120712,120714,120744,120746,120770,120772,120779,122624,122654,122661,122666,122928,122989,123136,123180,123191,123197,123214,123214,123536,123565,123584,123627,124112,124139,124896,124902,124904,124907,124909,124910,124912,124926,124928,125124,125184,125251,125259,125259,126464,126467,126469,126495,126497,126498,126500,126500,126503,126503,126505,126514,126516,126519,126521,126521,126523,126523,126530,126530,126535,126535,126537,126537,126539,126539,126541,126543,126545,126546,126548,126548,126551,126551,126553,126553,126555,126555,126557,126557,126559,126559,126561,126562,126564,126564,126567,126570,126572,126578,126580,126583,126585,126588,126590,126590,126592,126601,126603,126619,126625,126627,126629,126633,126635,126651,131072,173791,173824,177977,177984,178205,178208,183969,183984,191456,194560,195101,196608,201546,201552,205743,47,0,1,1,0,0,0,0,3,1,0,0,0,0,5,1,0,0,0,0,7,1,0,0,0,0,9,1,0,0,0,0,15,1,0,0,0,1,17,1,0,0,0,3,20,1,0,0,0,5,22,1,0,0,0,7,24,1,0,0,0,9,26,1,0,0,0,11,35,1,0,0,0,13,37,1,0,0,0,15,39,1,0,0,0,17,18,5,47,0,0,18,19,5,47,0,0,19,2,1,0,0,0,20,21,5,47,0,0,21,4,1,0,0,0,22,23,5,42,0,0,23,6,1,0,0,0,24,25,5,33,0,0,25,8,1,0,0,0,26,30,3,13,6,0,27,29,3,11,5,0,28,27,1,0,0,0,29,32,1,0,0,0,30,28,1,0,0,0,30,31,1,0,0,0,31,33,1,0,0,0,32,30,1,0,0,0,33,34,6,4,0,0,34,10,1,0,0,0,35,36,7,0,0,0,36,12,1,0,0,0,37,38,7,1,0,0,38,14,1,0,0,0,39,43,5,39,0,0,40,42,9,0,0,0,41,40,1,0,0,0,42,45,1,0,0,0,43,44,1,0,0,0,43,41,1,0,0,0,44,46,1,0,0,0,45,43,1,0,0,0,46,47,5,39,0,0,47,16,1,0,0,0,3,0,30,43,1,1,4,0];static __ATN;static get _ATN(){return X.__ATN||(X.__ATN=new Hn().deserialize(X._serializedATN)),X.__ATN}static vocabulary=new et(X.literalNames,X.symbolicNames,[]);get vocabulary(){return X.vocabulary}static decisionsToDFA=X._ATN.decisionToState.map((e,t)=>new ja(e,t))};var $n=class r extends ye{static tabSize=8;opened=0;indents=[];buffer=[];lastToken;constructor(e){super(e)}emit(e){return e?(super._token=e,this.buffer.push(e),this.lastToken=e,e):super.emit()}nextToken(){if(this.inputStream.LA(1)===ge.EOF&&this.indents.length>0){let t=this.buffer[this.buffer.length-1];for((!t||t.type!==ge.LINE_BREAK)&&this.emitToken(ge.LINE_BREAK);this.indents.length!==0;)this.emitToken(ge.DEDENT),this.indents.pop()}let e=this.buffer.shift();return e||super.nextToken()}emitToken(e,t,s){if(e instanceof y){this.emit(e);return}t=t??r.DEFAULT_TOKEN_CHANNEL,s=s??"";let n=this._tokenStartCharIndex,i=new Ts(this._tokenFactorySourcePair,e,t,n-s.length,n);i.text=s,i.line=this.line,e!==ge.NEWLINE&&(i.column=this.column-s.length),this.emit(i)}handleNewLine(){this.emitToken(ge.NEWLINE,r.HIDDEN,this.text);let e=String.fromCharCode(this.inputStream.LA(1));e!==" "&&e!=="	"&&this.isNotNewLineOrComment(e)&&this.processNewLine(0)}handleSpaces(){let e=String.fromCharCode(this.inputStream.LA(1));if((!this.lastToken||this.lastToken.type===ge.NEWLINE)&&this.isNotNewLineOrComment(e)){let t=0,s=this.text;for(let n=0;n<s.length;++n)t+=s.charAt(n)==="	"?r.tabSize-t%r.tabSize:1;this.processNewLine(t)}this.emitToken(ge.WS,r.HIDDEN,this.text)}incIndentLevel(){this.opened++}decIndentLevel(){this.opened>0&&--this.opened}isNotNewLineOrComment(e){return this.opened===0&&e!=="\r"&&e!==`
`&&e!=="\f"&&e!=="#"}processNewLine(e){this.emitToken(ge.LINE_BREAK);let t=this.indents.length===0?0:this.indents[0];if(e>t)this.indents.push(e),this.emitToken(ge.INDENT);else for(;this.indents.length!==0&&this.indents[0]>e;)this.emitToken(ge.DEDENT),this.indents.pop()}};var ge=class r extends $n{static INDENT=1;static DEDENT=2;static LINE_BREAK=3;static DEF=4;static RETURN=5;static RAISE=6;static FROM=7;static IMPORT=8;static NONLOCAL=9;static AS=10;static GLOBAL=11;static ASSERT=12;static IF=13;static ELIF=14;static ELSE=15;static WHILE=16;static FOR=17;static IN=18;static TRY=19;static NONE=20;static FINALLY=21;static WITH=22;static EXCEPT=23;static LAMBDA=24;static OR=25;static AND=26;static NOT=27;static IS=28;static CLASS=29;static YIELD=30;static DEL=31;static PASS=32;static CONTINUE=33;static BREAK=34;static ASYNC=35;static AWAIT=36;static PRINT=37;static EXEC=38;static TRUE=39;static FALSE=40;static DOT=41;static ELLIPSIS=42;static REVERSE_QUOTE=43;static STAR=44;static COMMA=45;static COLON=46;static SEMI_COLON=47;static POWER=48;static ASSIGN=49;static OR_OP=50;static XOR=51;static AND_OP=52;static LEFT_SHIFT=53;static RIGHT_SHIFT=54;static ADD=55;static MINUS=56;static DIV=57;static MOD=58;static IDIV=59;static NOT_OP=60;static LESS_THAN=61;static GREATER_THAN=62;static EQUALS=63;static GT_EQ=64;static LT_EQ=65;static NOT_EQ_1=66;static NOT_EQ_2=67;static AT=68;static ARROW=69;static ADD_ASSIGN=70;static SUB_ASSIGN=71;static MULT_ASSIGN=72;static AT_ASSIGN=73;static DIV_ASSIGN=74;static MOD_ASSIGN=75;static AND_ASSIGN=76;static OR_ASSIGN=77;static XOR_ASSIGN=78;static LEFT_SHIFT_ASSIGN=79;static RIGHT_SHIFT_ASSIGN=80;static POWER_ASSIGN=81;static IDIV_ASSIGN=82;static STRING=83;static DECIMAL_INTEGER=84;static OCT_INTEGER=85;static HEX_INTEGER=86;static BIN_INTEGER=87;static IMAG_NUMBER=88;static FLOAT_NUMBER=89;static OPEN_PAREN=90;static CLOSE_PAREN=91;static OPEN_BRACE=92;static CLOSE_BRACE=93;static OPEN_BRACKET=94;static CLOSE_BRACKET=95;static NAME=96;static LINE_JOIN=97;static NEWLINE=98;static WS=99;static COMMENT=100;static channelNames=["DEFAULT_TOKEN_CHANNEL","HIDDEN"];static literalNames=[null,null,null,null,"'def'","'return'","'raise'","'from'","'import'","'nonlocal'","'as'","'global'","'assert'","'if'","'elif'","'else'","'while'","'for'","'in'","'try'","'None'","'finally'","'with'","'except'","'lambda'","'or'","'and'","'not'","'is'","'class'","'yield'","'del'","'pass'","'continue'","'break'","'async'","'await'","'print'","'exec'","'True'","'False'","'.'","'...'","'`'","'*'","','","':'","';'","'**'","'='","'|'","'^'","'&'","'<<'","'>>'","'+'","'-'","'/'","'%'","'//'","'~'","'<'","'>'","'=='","'>='","'<='","'<>'","'!='","'@'","'->'","'+='","'-='","'*='","'@='","'/='","'%='","'&='","'|='","'^='","'<<='","'>>='","'**='","'//='",null,null,null,null,null,null,null,"'('","')'","'{'","'}'","'['","']'"];static symbolicNames=[null,"INDENT","DEDENT","LINE_BREAK","DEF","RETURN","RAISE","FROM","IMPORT","NONLOCAL","AS","GLOBAL","ASSERT","IF","ELIF","ELSE","WHILE","FOR","IN","TRY","NONE","FINALLY","WITH","EXCEPT","LAMBDA","OR","AND","NOT","IS","CLASS","YIELD","DEL","PASS","CONTINUE","BREAK","ASYNC","AWAIT","PRINT","EXEC","TRUE","FALSE","DOT","ELLIPSIS","REVERSE_QUOTE","STAR","COMMA","COLON","SEMI_COLON","POWER","ASSIGN","OR_OP","XOR","AND_OP","LEFT_SHIFT","RIGHT_SHIFT","ADD","MINUS","DIV","MOD","IDIV","NOT_OP","LESS_THAN","GREATER_THAN","EQUALS","GT_EQ","LT_EQ","NOT_EQ_1","NOT_EQ_2","AT","ARROW","ADD_ASSIGN","SUB_ASSIGN","MULT_ASSIGN","AT_ASSIGN","DIV_ASSIGN","MOD_ASSIGN","AND_ASSIGN","OR_ASSIGN","XOR_ASSIGN","LEFT_SHIFT_ASSIGN","RIGHT_SHIFT_ASSIGN","POWER_ASSIGN","IDIV_ASSIGN","STRING","DECIMAL_INTEGER","OCT_INTEGER","HEX_INTEGER","BIN_INTEGER","IMAG_NUMBER","FLOAT_NUMBER","OPEN_PAREN","CLOSE_PAREN","OPEN_BRACE","CLOSE_BRACE","OPEN_BRACKET","CLOSE_BRACKET","NAME","LINE_JOIN","NEWLINE","WS","COMMENT"];static modeNames=["DEFAULT_MODE"];static ruleNames=["DEF","RETURN","RAISE","FROM","IMPORT","NONLOCAL","AS","GLOBAL","ASSERT","IF","ELIF","ELSE","WHILE","FOR","IN","TRY","NONE","FINALLY","WITH","EXCEPT","LAMBDA","OR","AND","NOT","IS","CLASS","YIELD","DEL","PASS","CONTINUE","BREAK","ASYNC","AWAIT","PRINT","EXEC","TRUE","FALSE","DOT","ELLIPSIS","REVERSE_QUOTE","STAR","COMMA","COLON","SEMI_COLON","POWER","ASSIGN","OR_OP","XOR","AND_OP","LEFT_SHIFT","RIGHT_SHIFT","ADD","MINUS","DIV","MOD","IDIV","NOT_OP","LESS_THAN","GREATER_THAN","EQUALS","GT_EQ","LT_EQ","NOT_EQ_1","NOT_EQ_2","AT","ARROW","ADD_ASSIGN","SUB_ASSIGN","MULT_ASSIGN","AT_ASSIGN","DIV_ASSIGN","MOD_ASSIGN","AND_ASSIGN","OR_ASSIGN","XOR_ASSIGN","LEFT_SHIFT_ASSIGN","RIGHT_SHIFT_ASSIGN","POWER_ASSIGN","IDIV_ASSIGN","STRING","DECIMAL_INTEGER","OCT_INTEGER","HEX_INTEGER","BIN_INTEGER","IMAG_NUMBER","FLOAT_NUMBER","OPEN_PAREN","CLOSE_PAREN","OPEN_BRACE","CLOSE_BRACE","OPEN_BRACKET","CLOSE_BRACKET","NAME","LINE_JOIN","NEWLINE","WS","COMMENT","SHORT_STRING","LONG_STRING","LONG_STRING_ITEM","RN","EXPONENT_OR_POINT_FLOAT","POINT_FLOAT","SHORT_BYTES","LONG_BYTES","LONG_BYTES_ITEM","SHORT_BYTES_CHAR_NO_SINGLE_QUOTE","SHORT_BYTES_CHAR_NO_DOUBLE_QUOTE","LONG_BYTES_CHAR","BYTES_ESCAPE_SEQ","ID_CONTINUE","ID_START"];constructor(e){super(e),this.interpreter=new Jt(this,r._ATN,r.decisionsToDFA,new Ba)}get grammarFileName(){return"PythonLexer.g4"}get literalNames(){return r.literalNames}get symbolicNames(){return r.symbolicNames}get ruleNames(){return r.ruleNames}get serializedATN(){return r._serializedATN}get channelNames(){return r.channelNames}get modeNames(){return r.modeNames}action(e,t,s){switch(t){case 86:this.OPEN_PAREN_action(e,s);break;case 87:this.CLOSE_PAREN_action(e,s);break;case 88:this.OPEN_BRACE_action(e,s);break;case 89:this.CLOSE_BRACE_action(e,s);break;case 90:this.OPEN_BRACKET_action(e,s);break;case 91:this.CLOSE_BRACKET_action(e,s);break;case 94:this.NEWLINE_action(e,s);break;case 95:this.WS_action(e,s);break}}OPEN_PAREN_action(e,t){switch(t){case 0:this.incIndentLevel();break}}CLOSE_PAREN_action(e,t){switch(t){case 1:this.decIndentLevel();break}}OPEN_BRACE_action(e,t){switch(t){case 2:this.incIndentLevel();break}}CLOSE_BRACE_action(e,t){switch(t){case 3:this.decIndentLevel();break}}OPEN_BRACKET_action(e,t){switch(t){case 4:this.incIndentLevel();break}}CLOSE_BRACKET_action(e,t){switch(t){case 5:this.decIndentLevel();break}}NEWLINE_action(e,t){switch(t){case 6:this.handleNewLine();break}}WS_action(e,t){switch(t){case 7:this.handleSpaces();break}}static _serializedATN=[4,0,100,854,6,-1,2,0,7,0,2,1,7,1,2,2,7,2,2,3,7,3,2,4,7,4,2,5,7,5,2,6,7,6,2,7,7,7,2,8,7,8,2,9,7,9,2,10,7,10,2,11,7,11,2,12,7,12,2,13,7,13,2,14,7,14,2,15,7,15,2,16,7,16,2,17,7,17,2,18,7,18,2,19,7,19,2,20,7,20,2,21,7,21,2,22,7,22,2,23,7,23,2,24,7,24,2,25,7,25,2,26,7,26,2,27,7,27,2,28,7,28,2,29,7,29,2,30,7,30,2,31,7,31,2,32,7,32,2,33,7,33,2,34,7,34,2,35,7,35,2,36,7,36,2,37,7,37,2,38,7,38,2,39,7,39,2,40,7,40,2,41,7,41,2,42,7,42,2,43,7,43,2,44,7,44,2,45,7,45,2,46,7,46,2,47,7,47,2,48,7,48,2,49,7,49,2,50,7,50,2,51,7,51,2,52,7,52,2,53,7,53,2,54,7,54,2,55,7,55,2,56,7,56,2,57,7,57,2,58,7,58,2,59,7,59,2,60,7,60,2,61,7,61,2,62,7,62,2,63,7,63,2,64,7,64,2,65,7,65,2,66,7,66,2,67,7,67,2,68,7,68,2,69,7,69,2,70,7,70,2,71,7,71,2,72,7,72,2,73,7,73,2,74,7,74,2,75,7,75,2,76,7,76,2,77,7,77,2,78,7,78,2,79,7,79,2,80,7,80,2,81,7,81,2,82,7,82,2,83,7,83,2,84,7,84,2,85,7,85,2,86,7,86,2,87,7,87,2,88,7,88,2,89,7,89,2,90,7,90,2,91,7,91,2,92,7,92,2,93,7,93,2,94,7,94,2,95,7,95,2,96,7,96,2,97,7,97,2,98,7,98,2,99,7,99,2,100,7,100,2,101,7,101,2,102,7,102,2,103,7,103,2,104,7,104,2,105,7,105,2,106,7,106,2,107,7,107,2,108,7,108,2,109,7,109,2,110,7,110,2,111,7,111,1,0,1,0,1,0,1,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2,1,2,1,2,1,2,1,2,1,2,1,3,1,3,1,3,1,3,1,3,1,4,1,4,1,4,1,4,1,4,1,4,1,4,1,5,1,5,1,5,1,5,1,5,1,5,1,5,1,5,1,5,1,6,1,6,1,6,1,7,1,7,1,7,1,7,1,7,1,7,1,7,1,8,1,8,1,8,1,8,1,8,1,8,1,8,1,9,1,9,1,9,1,10,1,10,1,10,1,10,1,10,1,11,1,11,1,11,1,11,1,11,1,12,1,12,1,12,1,12,1,12,1,12,1,13,1,13,1,13,1,13,1,14,1,14,1,14,1,15,1,15,1,15,1,15,1,16,1,16,1,16,1,16,1,16,1,17,1,17,1,17,1,17,1,17,1,17,1,17,1,17,1,18,1,18,1,18,1,18,1,18,1,19,1,19,1,19,1,19,1,19,1,19,1,19,1,20,1,20,1,20,1,20,1,20,1,20,1,20,1,21,1,21,1,21,1,22,1,22,1,22,1,22,1,23,1,23,1,23,1,23,1,24,1,24,1,24,1,25,1,25,1,25,1,25,1,25,1,25,1,26,1,26,1,26,1,26,1,26,1,26,1,27,1,27,1,27,1,27,1,28,1,28,1,28,1,28,1,28,1,29,1,29,1,29,1,29,1,29,1,29,1,29,1,29,1,29,1,30,1,30,1,30,1,30,1,30,1,30,1,31,1,31,1,31,1,31,1,31,1,31,1,32,1,32,1,32,1,32,1,32,1,32,1,33,1,33,1,33,1,33,1,33,1,33,1,34,1,34,1,34,1,34,1,34,1,35,1,35,1,35,1,35,1,35,1,36,1,36,1,36,1,36,1,36,1,36,1,37,1,37,1,38,1,38,1,38,1,38,1,39,1,39,1,40,1,40,1,41,1,41,1,42,1,42,1,43,1,43,1,44,1,44,1,44,1,45,1,45,1,46,1,46,1,47,1,47,1,48,1,48,1,49,1,49,1,49,1,50,1,50,1,50,1,51,1,51,1,52,1,52,1,53,1,53,1,54,1,54,1,55,1,55,1,55,1,56,1,56,1,57,1,57,1,58,1,58,1,59,1,59,1,59,1,60,1,60,1,60,1,61,1,61,1,61,1,62,1,62,1,62,1,63,1,63,1,63,1,64,1,64,1,65,1,65,1,65,1,66,1,66,1,66,1,67,1,67,1,67,1,68,1,68,1,68,1,69,1,69,1,69,1,70,1,70,1,70,1,71,1,71,1,71,1,72,1,72,1,72,1,73,1,73,1,73,1,74,1,74,1,74,1,75,1,75,1,75,1,75,1,76,1,76,1,76,1,76,1,77,1,77,1,77,1,77,1,78,1,78,1,78,1,78,1,79,1,79,1,79,3,79,543,8,79,1,79,1,79,3,79,547,8,79,3,79,549,8,79,1,79,1,79,3,79,553,8,79,1,79,1,79,3,79,557,8,79,1,79,1,79,3,79,561,8,79,1,79,1,79,3,79,565,8,79,3,79,567,8,79,1,80,1,80,5,80,571,8,80,10,80,12,80,574,9,80,1,80,4,80,577,8,80,11,80,12,80,578,3,80,581,8,80,1,81,1,81,1,81,4,81,586,8,81,11,81,12,81,587,1,82,1,82,1,82,4,82,593,8,82,11,82,12,82,594,1,83,1,83,1,83,4,83,600,8,83,11,83,12,83,601,1,84,1,84,4,84,606,8,84,11,84,12,84,607,3,84,610,8,84,1,84,1,84,1,85,1,85,1,86,1,86,1,86,1,87,1,87,1,87,1,88,1,88,1,88,1,89,1,89,1,89,1,90,1,90,1,90,1,91,1,91,1,91,1,92,1,92,5,92,636,8,92,10,92,12,92,639,9,92,1,93,1,93,5,93,643,8,93,10,93,12,93,646,9,93,1,93,1,93,1,93,1,93,1,94,1,94,1,94,1,94,1,94,1,95,4,95,658,8,95,11,95,12,95,659,1,95,1,95,1,95,1,95,1,96,1,96,5,96,668,8,96,10,96,12,96,671,9,96,1,96,1,96,1,97,1,97,1,97,1,97,3,97,679,8,97,1,97,5,97,682,8,97,10,97,12,97,685,9,97,1,97,1,97,1,97,1,97,1,97,3,97,692,8,97,1,97,5,97,695,8,97,10,97,12,97,698,9,97,1,97,3,97,701,8,97,1,98,1,98,1,98,1,98,1,98,5,98,708,8,98,10,98,12,98,711,9,98,1,98,1,98,1,98,1,98,1,98,1,98,1,98,1,98,5,98,721,8,98,10,98,12,98,724,9,98,1,98,1,98,1,98,3,98,729,8,98,1,99,1,99,1,99,1,99,3,99,735,8,99,3,99,737,8,99,1,100,3,100,740,8,100,1,100,1,100,1,101,4,101,745,8,101,11,101,12,101,746,1,101,3,101,750,8,101,1,101,1,101,3,101,754,8,101,1,101,4,101,757,8,101,11,101,12,101,758,1,101,3,101,762,8,101,1,102,5,102,765,8,102,10,102,12,102,768,9,102,1,102,1,102,4,102,772,8,102,11,102,12,102,773,1,102,4,102,777,8,102,11,102,12,102,778,1,102,3,102,782,8,102,1,103,1,103,1,103,5,103,787,8,103,10,103,12,103,790,9,103,1,103,1,103,1,103,1,103,5,103,796,8,103,10,103,12,103,799,9,103,1,103,3,103,802,8,103,1,104,1,104,1,104,1,104,1,104,5,104,809,8,104,10,104,12,104,812,9,104,1,104,1,104,1,104,1,104,1,104,1,104,1,104,1,104,5,104,822,8,104,10,104,12,104,825,9,104,1,104,1,104,1,104,3,104,830,8,104,1,105,1,105,3,105,834,8,105,1,106,3,106,837,8,106,1,107,3,107,840,8,107,1,108,3,108,843,8,108,1,109,1,109,1,109,1,110,1,110,3,110,850,8,110,1,111,3,111,853,8,111,4,709,722,810,823,0,112,1,4,3,5,5,6,7,7,9,8,11,9,13,10,15,11,17,12,19,13,21,14,23,15,25,16,27,17,29,18,31,19,33,20,35,21,37,22,39,23,41,24,43,25,45,26,47,27,49,28,51,29,53,30,55,31,57,32,59,33,61,34,63,35,65,36,67,37,69,38,71,39,73,40,75,41,77,42,79,43,81,44,83,45,85,46,87,47,89,48,91,49,93,50,95,51,97,52,99,53,101,54,103,55,105,56,107,57,109,58,111,59,113,60,115,61,117,62,119,63,121,64,123,65,125,66,127,67,129,68,131,69,133,70,135,71,137,72,139,73,141,74,143,75,145,76,147,77,149,78,151,79,153,80,155,81,157,82,159,83,161,84,163,85,165,86,167,87,169,88,171,89,173,90,175,91,177,92,179,93,181,94,183,95,185,96,187,97,189,98,191,99,193,100,195,0,197,0,199,0,201,0,203,0,205,0,207,0,209,0,211,0,213,0,215,0,217,0,219,0,221,0,223,0,1,0,25,2,0,85,85,117,117,2,0,70,70,102,102,2,0,82,82,114,114,2,0,66,66,98,98,1,0,49,57,1,0,48,57,2,0,79,79,111,111,1,0,48,55,2,0,88,88,120,120,3,0,48,57,65,70,97,102,1,0,48,49,2,0,74,74,106,106,2,0,9,9,32,32,2,0,10,10,12,13,4,0,10,10,13,13,39,39,92,92,4,0,10,10,13,13,34,34,92,92,1,0,92,92,2,0,69,69,101,101,2,0,43,43,45,45,5,0,0,9,11,12,14,38,40,91,93,127,5,0,0,9,11,12,14,33,35,91,93,127,2,0,0,91,93,127,1,0,0,127,148,0,48,57,768,879,1155,1158,1425,1465,1467,1469,1471,1471,1473,1474,1476,1477,1479,1479,1552,1557,1611,1630,1632,1641,1648,1648,1750,1756,1759,1764,1767,1768,1770,1773,1776,1785,1809,1809,1840,1866,1958,1968,2305,2307,2364,2364,2366,2381,2385,2388,2402,2403,2406,2415,2433,2435,2492,2492,2494,2500,2503,2504,2507,2509,2519,2519,2530,2531,2534,2543,2561,2563,2620,2620,2622,2626,2631,2632,2635,2637,2662,2673,2689,2691,2748,2748,2750,2757,2759,2761,2763,2765,2786,2787,2790,2799,2817,2819,2876,2876,2878,2883,2887,2888,2891,2893,2902,2903,2918,2927,2946,2946,3006,3010,3014,3016,3018,3021,3031,3031,3046,3055,3073,3075,3134,3140,3142,3144,3146,3149,3157,3158,3174,3183,3202,3203,3260,3260,3262,3268,3270,3272,3274,3277,3285,3286,3302,3311,3330,3331,3390,3395,3398,3400,3402,3405,3415,3415,3430,3439,3458,3459,3530,3530,3535,3540,3542,3542,3544,3551,3570,3571,3633,3633,3636,3642,3655,3662,3664,3673,3761,3761,3764,3769,3771,3772,3784,3789,3792,3801,3864,3865,3872,3881,3893,3893,3895,3895,3897,3897,3902,3903,3953,3972,3974,3975,3984,3991,3993,4028,4038,4038,4140,4146,4150,4153,4160,4169,4182,4185,4959,4959,4969,4977,5906,5908,5938,5940,5970,5971,6002,6003,6070,6099,6109,6109,6112,6121,6155,6157,6160,6169,6313,6313,6432,6443,6448,6459,6470,6479,6576,6592,6600,6601,6608,6617,6679,6683,7616,7619,8255,8256,8276,8276,8400,8412,8417,8417,8421,8427,12330,12335,12441,12442,43010,43010,43014,43014,43019,43019,43043,43047,64286,64286,65024,65039,65056,65059,65075,65076,65101,65103,65296,65305,65343,65343,295,0,65,90,95,95,97,122,170,170,181,181,186,186,192,214,216,246,248,577,592,705,710,721,736,740,750,750,890,890,902,902,904,906,908,908,910,929,931,974,976,1013,1015,1153,1162,1230,1232,1273,1280,1295,1329,1366,1369,1369,1377,1415,1488,1514,1520,1522,1569,1594,1600,1610,1646,1647,1649,1747,1749,1749,1765,1766,1774,1775,1786,1788,1791,1791,1808,1808,1810,1839,1869,1901,1920,1957,1969,1969,2308,2361,2365,2365,2384,2384,2392,2401,2429,2429,2437,2444,2447,2448,2451,2472,2474,2480,2482,2482,2486,2489,2493,2493,2510,2510,2524,2525,2527,2529,2544,2545,2565,2570,2575,2576,2579,2600,2602,2608,2610,2611,2613,2614,2616,2617,2649,2652,2654,2654,2674,2676,2693,2701,2703,2705,2707,2728,2730,2736,2738,2739,2741,2745,2749,2749,2768,2768,2784,2785,2821,2828,2831,2832,2835,2856,2858,2864,2866,2867,2869,2873,2877,2877,2908,2909,2911,2913,2929,2929,2947,2947,2949,2954,2958,2960,2962,2965,2969,2970,2972,2972,2974,2975,2979,2980,2984,2986,2990,3001,3077,3084,3086,3088,3090,3112,3114,3123,3125,3129,3168,3169,3205,3212,3214,3216,3218,3240,3242,3251,3253,3257,3261,3261,3294,3294,3296,3297,3333,3340,3342,3344,3346,3368,3370,3385,3424,3425,3461,3478,3482,3505,3507,3515,3517,3517,3520,3526,3585,3632,3634,3635,3648,3654,3713,3714,3716,3716,3719,3720,3722,3722,3725,3725,3732,3735,3737,3743,3745,3747,3749,3749,3751,3751,3754,3755,3757,3760,3762,3763,3773,3773,3776,3780,3782,3782,3804,3805,3840,3840,3904,3911,3913,3946,3976,3979,4096,4129,4131,4135,4137,4138,4176,4181,4256,4293,4304,4346,4348,4348,4352,4441,4447,4514,4520,4601,4608,4680,4682,4685,4688,4694,4696,4696,4698,4701,4704,4744,4746,4749,4752,4784,4786,4789,4792,4798,4800,4800,4802,4805,4808,4822,4824,4880,4882,4885,4888,4954,4992,5007,5024,5108,5121,5740,5743,5750,5761,5786,5792,5866,5870,5872,5888,5900,5902,5905,5920,5937,5952,5969,5984,5996,5998,6e3,6016,6067,6103,6103,6108,6108,6176,6263,6272,6312,6400,6428,6480,6509,6512,6516,6528,6569,6593,6599,6656,6678,7424,7615,7680,7835,7840,7929,7936,7957,7960,7965,7968,8005,8008,8013,8016,8023,8025,8025,8027,8027,8029,8029,8031,8061,8064,8116,8118,8124,8126,8126,8130,8132,8134,8140,8144,8147,8150,8155,8160,8172,8178,8180,8182,8188,8305,8305,8319,8319,8336,8340,8450,8450,8455,8455,8458,8467,8469,8469,8472,8477,8484,8484,8486,8486,8488,8488,8490,8497,8499,8505,8508,8511,8517,8521,8544,8579,11264,11310,11312,11358,11392,11492,11520,11557,11568,11621,11631,11631,11648,11670,11680,11686,11688,11694,11696,11702,11704,11710,11712,11718,11720,11726,11728,11734,11736,11742,12293,12295,12321,12329,12337,12341,12344,12348,12353,12438,12443,12447,12449,12538,12540,12543,12549,12588,12593,12686,12704,12727,12784,12799,13312,19893,19968,40891,40960,42124,43008,43009,43011,43013,43015,43018,43020,43042,44032,55203,63744,64045,64048,64106,64112,64217,64256,64262,64275,64279,64285,64285,64287,64296,64298,64310,64312,64316,64318,64318,64320,64321,64323,64324,64326,64433,64467,64829,64848,64911,64914,64967,65008,65019,65136,65140,65142,65276,65313,65338,65345,65370,65382,65470,65474,65479,65482,65487,65490,65495,65498,65500,892,0,1,1,0,0,0,0,3,1,0,0,0,0,5,1,0,0,0,0,7,1,0,0,0,0,9,1,0,0,0,0,11,1,0,0,0,0,13,1,0,0,0,0,15,1,0,0,0,0,17,1,0,0,0,0,19,1,0,0,0,0,21,1,0,0,0,0,23,1,0,0,0,0,25,1,0,0,0,0,27,1,0,0,0,0,29,1,0,0,0,0,31,1,0,0,0,0,33,1,0,0,0,0,35,1,0,0,0,0,37,1,0,0,0,0,39,1,0,0,0,0,41,1,0,0,0,0,43,1,0,0,0,0,45,1,0,0,0,0,47,1,0,0,0,0,49,1,0,0,0,0,51,1,0,0,0,0,53,1,0,0,0,0,55,1,0,0,0,0,57,1,0,0,0,0,59,1,0,0,0,0,61,1,0,0,0,0,63,1,0,0,0,0,65,1,0,0,0,0,67,1,0,0,0,0,69,1,0,0,0,0,71,1,0,0,0,0,73,1,0,0,0,0,75,1,0,0,0,0,77,1,0,0,0,0,79,1,0,0,0,0,81,1,0,0,0,0,83,1,0,0,0,0,85,1,0,0,0,0,87,1,0,0,0,0,89,1,0,0,0,0,91,1,0,0,0,0,93,1,0,0,0,0,95,1,0,0,0,0,97,1,0,0,0,0,99,1,0,0,0,0,101,1,0,0,0,0,103,1,0,0,0,0,105,1,0,0,0,0,107,1,0,0,0,0,109,1,0,0,0,0,111,1,0,0,0,0,113,1,0,0,0,0,115,1,0,0,0,0,117,1,0,0,0,0,119,1,0,0,0,0,121,1,0,0,0,0,123,1,0,0,0,0,125,1,0,0,0,0,127,1,0,0,0,0,129,1,0,0,0,0,131,1,0,0,0,0,133,1,0,0,0,0,135,1,0,0,0,0,137,1,0,0,0,0,139,1,0,0,0,0,141,1,0,0,0,0,143,1,0,0,0,0,145,1,0,0,0,0,147,1,0,0,0,0,149,1,0,0,0,0,151,1,0,0,0,0,153,1,0,0,0,0,155,1,0,0,0,0,157,1,0,0,0,0,159,1,0,0,0,0,161,1,0,0,0,0,163,1,0,0,0,0,165,1,0,0,0,0,167,1,0,0,0,0,169,1,0,0,0,0,171,1,0,0,0,0,173,1,0,0,0,0,175,1,0,0,0,0,177,1,0,0,0,0,179,1,0,0,0,0,181,1,0,0,0,0,183,1,0,0,0,0,185,1,0,0,0,0,187,1,0,0,0,0,189,1,0,0,0,0,191,1,0,0,0,0,193,1,0,0,0,1,225,1,0,0,0,3,229,1,0,0,0,5,236,1,0,0,0,7,242,1,0,0,0,9,247,1,0,0,0,11,254,1,0,0,0,13,263,1,0,0,0,15,266,1,0,0,0,17,273,1,0,0,0,19,280,1,0,0,0,21,283,1,0,0,0,23,288,1,0,0,0,25,293,1,0,0,0,27,299,1,0,0,0,29,303,1,0,0,0,31,306,1,0,0,0,33,310,1,0,0,0,35,315,1,0,0,0,37,323,1,0,0,0,39,328,1,0,0,0,41,335,1,0,0,0,43,342,1,0,0,0,45,345,1,0,0,0,47,349,1,0,0,0,49,353,1,0,0,0,51,356,1,0,0,0,53,362,1,0,0,0,55,368,1,0,0,0,57,372,1,0,0,0,59,377,1,0,0,0,61,386,1,0,0,0,63,392,1,0,0,0,65,398,1,0,0,0,67,404,1,0,0,0,69,410,1,0,0,0,71,415,1,0,0,0,73,420,1,0,0,0,75,426,1,0,0,0,77,428,1,0,0,0,79,432,1,0,0,0,81,434,1,0,0,0,83,436,1,0,0,0,85,438,1,0,0,0,87,440,1,0,0,0,89,442,1,0,0,0,91,445,1,0,0,0,93,447,1,0,0,0,95,449,1,0,0,0,97,451,1,0,0,0,99,453,1,0,0,0,101,456,1,0,0,0,103,459,1,0,0,0,105,461,1,0,0,0,107,463,1,0,0,0,109,465,1,0,0,0,111,467,1,0,0,0,113,470,1,0,0,0,115,472,1,0,0,0,117,474,1,0,0,0,119,476,1,0,0,0,121,479,1,0,0,0,123,482,1,0,0,0,125,485,1,0,0,0,127,488,1,0,0,0,129,491,1,0,0,0,131,493,1,0,0,0,133,496,1,0,0,0,135,499,1,0,0,0,137,502,1,0,0,0,139,505,1,0,0,0,141,508,1,0,0,0,143,511,1,0,0,0,145,514,1,0,0,0,147,517,1,0,0,0,149,520,1,0,0,0,151,523,1,0,0,0,153,527,1,0,0,0,155,531,1,0,0,0,157,535,1,0,0,0,159,566,1,0,0,0,161,580,1,0,0,0,163,582,1,0,0,0,165,589,1,0,0,0,167,596,1,0,0,0,169,609,1,0,0,0,171,613,1,0,0,0,173,615,1,0,0,0,175,618,1,0,0,0,177,621,1,0,0,0,179,624,1,0,0,0,181,627,1,0,0,0,183,630,1,0,0,0,185,633,1,0,0,0,187,640,1,0,0,0,189,651,1,0,0,0,191,657,1,0,0,0,193,665,1,0,0,0,195,700,1,0,0,0,197,728,1,0,0,0,199,736,1,0,0,0,201,739,1,0,0,0,203,761,1,0,0,0,205,781,1,0,0,0,207,801,1,0,0,0,209,829,1,0,0,0,211,833,1,0,0,0,213,836,1,0,0,0,215,839,1,0,0,0,217,842,1,0,0,0,219,844,1,0,0,0,221,849,1,0,0,0,223,852,1,0,0,0,225,226,5,100,0,0,226,227,5,101,0,0,227,228,5,102,0,0,228,2,1,0,0,0,229,230,5,114,0,0,230,231,5,101,0,0,231,232,5,116,0,0,232,233,5,117,0,0,233,234,5,114,0,0,234,235,5,110,0,0,235,4,1,0,0,0,236,237,5,114,0,0,237,238,5,97,0,0,238,239,5,105,0,0,239,240,5,115,0,0,240,241,5,101,0,0,241,6,1,0,0,0,242,243,5,102,0,0,243,244,5,114,0,0,244,245,5,111,0,0,245,246,5,109,0,0,246,8,1,0,0,0,247,248,5,105,0,0,248,249,5,109,0,0,249,250,5,112,0,0,250,251,5,111,0,0,251,252,5,114,0,0,252,253,5,116,0,0,253,10,1,0,0,0,254,255,5,110,0,0,255,256,5,111,0,0,256,257,5,110,0,0,257,258,5,108,0,0,258,259,5,111,0,0,259,260,5,99,0,0,260,261,5,97,0,0,261,262,5,108,0,0,262,12,1,0,0,0,263,264,5,97,0,0,264,265,5,115,0,0,265,14,1,0,0,0,266,267,5,103,0,0,267,268,5,108,0,0,268,269,5,111,0,0,269,270,5,98,0,0,270,271,5,97,0,0,271,272,5,108,0,0,272,16,1,0,0,0,273,274,5,97,0,0,274,275,5,115,0,0,275,276,5,115,0,0,276,277,5,101,0,0,277,278,5,114,0,0,278,279,5,116,0,0,279,18,1,0,0,0,280,281,5,105,0,0,281,282,5,102,0,0,282,20,1,0,0,0,283,284,5,101,0,0,284,285,5,108,0,0,285,286,5,105,0,0,286,287,5,102,0,0,287,22,1,0,0,0,288,289,5,101,0,0,289,290,5,108,0,0,290,291,5,115,0,0,291,292,5,101,0,0,292,24,1,0,0,0,293,294,5,119,0,0,294,295,5,104,0,0,295,296,5,105,0,0,296,297,5,108,0,0,297,298,5,101,0,0,298,26,1,0,0,0,299,300,5,102,0,0,300,301,5,111,0,0,301,302,5,114,0,0,302,28,1,0,0,0,303,304,5,105,0,0,304,305,5,110,0,0,305,30,1,0,0,0,306,307,5,116,0,0,307,308,5,114,0,0,308,309,5,121,0,0,309,32,1,0,0,0,310,311,5,78,0,0,311,312,5,111,0,0,312,313,5,110,0,0,313,314,5,101,0,0,314,34,1,0,0,0,315,316,5,102,0,0,316,317,5,105,0,0,317,318,5,110,0,0,318,319,5,97,0,0,319,320,5,108,0,0,320,321,5,108,0,0,321,322,5,121,0,0,322,36,1,0,0,0,323,324,5,119,0,0,324,325,5,105,0,0,325,326,5,116,0,0,326,327,5,104,0,0,327,38,1,0,0,0,328,329,5,101,0,0,329,330,5,120,0,0,330,331,5,99,0,0,331,332,5,101,0,0,332,333,5,112,0,0,333,334,5,116,0,0,334,40,1,0,0,0,335,336,5,108,0,0,336,337,5,97,0,0,337,338,5,109,0,0,338,339,5,98,0,0,339,340,5,100,0,0,340,341,5,97,0,0,341,42,1,0,0,0,342,343,5,111,0,0,343,344,5,114,0,0,344,44,1,0,0,0,345,346,5,97,0,0,346,347,5,110,0,0,347,348,5,100,0,0,348,46,1,0,0,0,349,350,5,110,0,0,350,351,5,111,0,0,351,352,5,116,0,0,352,48,1,0,0,0,353,354,5,105,0,0,354,355,5,115,0,0,355,50,1,0,0,0,356,357,5,99,0,0,357,358,5,108,0,0,358,359,5,97,0,0,359,360,5,115,0,0,360,361,5,115,0,0,361,52,1,0,0,0,362,363,5,121,0,0,363,364,5,105,0,0,364,365,5,101,0,0,365,366,5,108,0,0,366,367,5,100,0,0,367,54,1,0,0,0,368,369,5,100,0,0,369,370,5,101,0,0,370,371,5,108,0,0,371,56,1,0,0,0,372,373,5,112,0,0,373,374,5,97,0,0,374,375,5,115,0,0,375,376,5,115,0,0,376,58,1,0,0,0,377,378,5,99,0,0,378,379,5,111,0,0,379,380,5,110,0,0,380,381,5,116,0,0,381,382,5,105,0,0,382,383,5,110,0,0,383,384,5,117,0,0,384,385,5,101,0,0,385,60,1,0,0,0,386,387,5,98,0,0,387,388,5,114,0,0,388,389,5,101,0,0,389,390,5,97,0,0,390,391,5,107,0,0,391,62,1,0,0,0,392,393,5,97,0,0,393,394,5,115,0,0,394,395,5,121,0,0,395,396,5,110,0,0,396,397,5,99,0,0,397,64,1,0,0,0,398,399,5,97,0,0,399,400,5,119,0,0,400,401,5,97,0,0,401,402,5,105,0,0,402,403,5,116,0,0,403,66,1,0,0,0,404,405,5,112,0,0,405,406,5,114,0,0,406,407,5,105,0,0,407,408,5,110,0,0,408,409,5,116,0,0,409,68,1,0,0,0,410,411,5,101,0,0,411,412,5,120,0,0,412,413,5,101,0,0,413,414,5,99,0,0,414,70,1,0,0,0,415,416,5,84,0,0,416,417,5,114,0,0,417,418,5,117,0,0,418,419,5,101,0,0,419,72,1,0,0,0,420,421,5,70,0,0,421,422,5,97,0,0,422,423,5,108,0,0,423,424,5,115,0,0,424,425,5,101,0,0,425,74,1,0,0,0,426,427,5,46,0,0,427,76,1,0,0,0,428,429,5,46,0,0,429,430,5,46,0,0,430,431,5,46,0,0,431,78,1,0,0,0,432,433,5,96,0,0,433,80,1,0,0,0,434,435,5,42,0,0,435,82,1,0,0,0,436,437,5,44,0,0,437,84,1,0,0,0,438,439,5,58,0,0,439,86,1,0,0,0,440,441,5,59,0,0,441,88,1,0,0,0,442,443,5,42,0,0,443,444,5,42,0,0,444,90,1,0,0,0,445,446,5,61,0,0,446,92,1,0,0,0,447,448,5,124,0,0,448,94,1,0,0,0,449,450,5,94,0,0,450,96,1,0,0,0,451,452,5,38,0,0,452,98,1,0,0,0,453,454,5,60,0,0,454,455,5,60,0,0,455,100,1,0,0,0,456,457,5,62,0,0,457,458,5,62,0,0,458,102,1,0,0,0,459,460,5,43,0,0,460,104,1,0,0,0,461,462,5,45,0,0,462,106,1,0,0,0,463,464,5,47,0,0,464,108,1,0,0,0,465,466,5,37,0,0,466,110,1,0,0,0,467,468,5,47,0,0,468,469,5,47,0,0,469,112,1,0,0,0,470,471,5,126,0,0,471,114,1,0,0,0,472,473,5,60,0,0,473,116,1,0,0,0,474,475,5,62,0,0,475,118,1,0,0,0,476,477,5,61,0,0,477,478,5,61,0,0,478,120,1,0,0,0,479,480,5,62,0,0,480,481,5,61,0,0,481,122,1,0,0,0,482,483,5,60,0,0,483,484,5,61,0,0,484,124,1,0,0,0,485,486,5,60,0,0,486,487,5,62,0,0,487,126,1,0,0,0,488,489,5,33,0,0,489,490,5,61,0,0,490,128,1,0,0,0,491,492,5,64,0,0,492,130,1,0,0,0,493,494,5,45,0,0,494,495,5,62,0,0,495,132,1,0,0,0,496,497,5,43,0,0,497,498,5,61,0,0,498,134,1,0,0,0,499,500,5,45,0,0,500,501,5,61,0,0,501,136,1,0,0,0,502,503,5,42,0,0,503,504,5,61,0,0,504,138,1,0,0,0,505,506,5,64,0,0,506,507,5,61,0,0,507,140,1,0,0,0,508,509,5,47,0,0,509,510,5,61,0,0,510,142,1,0,0,0,511,512,5,37,0,0,512,513,5,61,0,0,513,144,1,0,0,0,514,515,5,38,0,0,515,516,5,61,0,0,516,146,1,0,0,0,517,518,5,124,0,0,518,519,5,61,0,0,519,148,1,0,0,0,520,521,5,94,0,0,521,522,5,61,0,0,522,150,1,0,0,0,523,524,5,60,0,0,524,525,5,60,0,0,525,526,5,61,0,0,526,152,1,0,0,0,527,528,5,62,0,0,528,529,5,62,0,0,529,530,5,61,0,0,530,154,1,0,0,0,531,532,5,42,0,0,532,533,5,42,0,0,533,534,5,61,0,0,534,156,1,0,0,0,535,536,5,47,0,0,536,537,5,47,0,0,537,538,5,61,0,0,538,158,1,0,0,0,539,549,7,0,0,0,540,542,7,1,0,0,541,543,7,2,0,0,542,541,1,0,0,0,542,543,1,0,0,0,543,549,1,0,0,0,544,546,7,2,0,0,545,547,7,1,0,0,546,545,1,0,0,0,546,547,1,0,0,0,547,549,1,0,0,0,548,539,1,0,0,0,548,540,1,0,0,0,548,544,1,0,0,0,548,549,1,0,0,0,549,552,1,0,0,0,550,553,3,195,97,0,551,553,3,197,98,0,552,550,1,0,0,0,552,551,1,0,0,0,553,567,1,0,0,0,554,556,7,3,0,0,555,557,7,2,0,0,556,555,1,0,0,0,556,557,1,0,0,0,557,561,1,0,0,0,558,559,7,2,0,0,559,561,7,3,0,0,560,554,1,0,0,0,560,558,1,0,0,0,561,564,1,0,0,0,562,565,3,207,103,0,563,565,3,209,104,0,564,562,1,0,0,0,564,563,1,0,0,0,565,567,1,0,0,0,566,548,1,0,0,0,566,560,1,0,0,0,567,160,1,0,0,0,568,572,7,4,0,0,569,571,7,5,0,0,570,569,1,0,0,0,571,574,1,0,0,0,572,570,1,0,0,0,572,573,1,0,0,0,573,581,1,0,0,0,574,572,1,0,0,0,575,577,5,48,0,0,576,575,1,0,0,0,577,578,1,0,0,0,578,576,1,0,0,0,578,579,1,0,0,0,579,581,1,0,0,0,580,568,1,0,0,0,580,576,1,0,0,0,581,162,1,0,0,0,582,583,5,48,0,0,583,585,7,6,0,0,584,586,7,7,0,0,585,584,1,0,0,0,586,587,1,0,0,0,587,585,1,0,0,0,587,588,1,0,0,0,588,164,1,0,0,0,589,590,5,48,0,0,590,592,7,8,0,0,591,593,7,9,0,0,592,591,1,0,0,0,593,594,1,0,0,0,594,592,1,0,0,0,594,595,1,0,0,0,595,166,1,0,0,0,596,597,5,48,0,0,597,599,7,3,0,0,598,600,7,10,0,0,599,598,1,0,0,0,600,601,1,0,0,0,601,599,1,0,0,0,601,602,1,0,0,0,602,168,1,0,0,0,603,610,3,203,101,0,604,606,7,5,0,0,605,604,1,0,0,0,606,607,1,0,0,0,607,605,1,0,0,0,607,608,1,0,0,0,608,610,1,0,0,0,609,603,1,0,0,0,609,605,1,0,0,0,610,611,1,0,0,0,611,612,7,11,0,0,612,170,1,0,0,0,613,614,3,203,101,0,614,172,1,0,0,0,615,616,5,40,0,0,616,617,6,86,0,0,617,174,1,0,0,0,618,619,5,41,0,0,619,620,6,87,1,0,620,176,1,0,0,0,621,622,5,123,0,0,622,623,6,88,2,0,623,178,1,0,0,0,624,625,5,125,0,0,625,626,6,89,3,0,626,180,1,0,0,0,627,628,5,91,0,0,628,629,6,90,4,0,629,182,1,0,0,0,630,631,5,93,0,0,631,632,6,91,5,0,632,184,1,0,0,0,633,637,3,223,111,0,634,636,3,221,110,0,635,634,1,0,0,0,636,639,1,0,0,0,637,635,1,0,0,0,637,638,1,0,0,0,638,186,1,0,0,0,639,637,1,0,0,0,640,644,5,92,0,0,641,643,7,12,0,0,642,641,1,0,0,0,643,646,1,0,0,0,644,642,1,0,0,0,644,645,1,0,0,0,645,647,1,0,0,0,646,644,1,0,0,0,647,648,3,201,100,0,648,649,1,0,0,0,649,650,6,93,6,0,650,188,1,0,0,0,651,652,3,201,100,0,652,653,6,94,7,0,653,654,1,0,0,0,654,655,6,94,6,0,655,190,1,0,0,0,656,658,7,12,0,0,657,656,1,0,0,0,658,659,1,0,0,0,659,657,1,0,0,0,659,660,1,0,0,0,660,661,1,0,0,0,661,662,6,95,8,0,662,663,1,0,0,0,663,664,6,95,6,0,664,192,1,0,0,0,665,669,5,35,0,0,666,668,8,13,0,0,667,666,1,0,0,0,668,671,1,0,0,0,669,667,1,0,0,0,669,670,1,0,0,0,670,672,1,0,0,0,671,669,1,0,0,0,672,673,6,96,6,0,673,194,1,0,0,0,674,683,5,39,0,0,675,678,5,92,0,0,676,679,3,201,100,0,677,679,9,0,0,0,678,676,1,0,0,0,678,677,1,0,0,0,679,682,1,0,0,0,680,682,8,14,0,0,681,675,1,0,0,0,681,680,1,0,0,0,682,685,1,0,0,0,683,681,1,0,0,0,683,684,1,0,0,0,684,686,1,0,0,0,685,683,1,0,0,0,686,701,5,39,0,0,687,696,5,34,0,0,688,691,5,92,0,0,689,692,3,201,100,0,690,692,9,0,0,0,691,689,1,0,0,0,691,690,1,0,0,0,692,695,1,0,0,0,693,695,8,15,0,0,694,688,1,0,0,0,694,693,1,0,0,0,695,698,1,0,0,0,696,694,1,0,0,0,696,697,1,0,0,0,697,699,1,0,0,0,698,696,1,0,0,0,699,701,5,34,0,0,700,674,1,0,0,0,700,687,1,0,0,0,701,196,1,0,0,0,702,703,5,39,0,0,703,704,5,39,0,0,704,705,5,39,0,0,705,709,1,0,0,0,706,708,3,199,99,0,707,706,1,0,0,0,708,711,1,0,0,0,709,710,1,0,0,0,709,707,1,0,0,0,710,712,1,0,0,0,711,709,1,0,0,0,712,713,5,39,0,0,713,714,5,39,0,0,714,729,5,39,0,0,715,716,5,34,0,0,716,717,5,34,0,0,717,718,5,34,0,0,718,722,1,0,0,0,719,721,3,199,99,0,720,719,1,0,0,0,721,724,1,0,0,0,722,723,1,0,0,0,722,720,1,0,0,0,723,725,1,0,0,0,724,722,1,0,0,0,725,726,5,34,0,0,726,727,5,34,0,0,727,729,5,34,0,0,728,702,1,0,0,0,728,715,1,0,0,0,729,198,1,0,0,0,730,737,8,16,0,0,731,734,5,92,0,0,732,735,3,201,100,0,733,735,9,0,0,0,734,732,1,0,0,0,734,733,1,0,0,0,735,737,1,0,0,0,736,730,1,0,0,0,736,731,1,0,0,0,737,200,1,0,0,0,738,740,5,13,0,0,739,738,1,0,0,0,739,740,1,0,0,0,740,741,1,0,0,0,741,742,5,10,0,0,742,202,1,0,0,0,743,745,7,5,0,0,744,743,1,0,0,0,745,746,1,0,0,0,746,744,1,0,0,0,746,747,1,0,0,0,747,750,1,0,0,0,748,750,3,205,102,0,749,744,1,0,0,0,749,748,1,0,0,0,750,751,1,0,0,0,751,753,7,17,0,0,752,754,7,18,0,0,753,752,1,0,0,0,753,754,1,0,0,0,754,756,1,0,0,0,755,757,7,5,0,0,756,755,1,0,0,0,757,758,1,0,0,0,758,756,1,0,0,0,758,759,1,0,0,0,759,762,1,0,0,0,760,762,3,205,102,0,761,749,1,0,0,0,761,760,1,0,0,0,762,204,1,0,0,0,763,765,7,5,0,0,764,763,1,0,0,0,765,768,1,0,0,0,766,764,1,0,0,0,766,767,1,0,0,0,767,769,1,0,0,0,768,766,1,0,0,0,769,771,5,46,0,0,770,772,7,5,0,0,771,770,1,0,0,0,772,773,1,0,0,0,773,771,1,0,0,0,773,774,1,0,0,0,774,782,1,0,0,0,775,777,7,5,0,0,776,775,1,0,0,0,777,778,1,0,0,0,778,776,1,0,0,0,778,779,1,0,0,0,779,780,1,0,0,0,780,782,5,46,0,0,781,766,1,0,0,0,781,776,1,0,0,0,782,206,1,0,0,0,783,788,5,39,0,0,784,787,3,213,106,0,785,787,3,219,109,0,786,784,1,0,0,0,786,785,1,0,0,0,787,790,1,0,0,0,788,786,1,0,0,0,788,789,1,0,0,0,789,791,1,0,0,0,790,788,1,0,0,0,791,802,5,39,0,0,792,797,5,34,0,0,793,796,3,215,107,0,794,796,3,219,109,0,795,793,1,0,0,0,795,794,1,0,0,0,796,799,1,0,0,0,797,795,1,0,0,0,797,798,1,0,0,0,798,800,1,0,0,0,799,797,1,0,0,0,800,802,5,34,0,0,801,783,1,0,0,0,801,792,1,0,0,0,802,208,1,0,0,0,803,804,5,39,0,0,804,805,5,39,0,0,805,806,5,39,0,0,806,810,1,0,0,0,807,809,3,211,105,0,808,807,1,0,0,0,809,812,1,0,0,0,810,811,1,0,0,0,810,808,1,0,0,0,811,813,1,0,0,0,812,810,1,0,0,0,813,814,5,39,0,0,814,815,5,39,0,0,815,830,5,39,0,0,816,817,5,34,0,0,817,818,5,34,0,0,818,819,5,34,0,0,819,823,1,0,0,0,820,822,3,211,105,0,821,820,1,0,0,0,822,825,1,0,0,0,823,824,1,0,0,0,823,821,1,0,0,0,824,826,1,0,0,0,825,823,1,0,0,0,826,827,5,34,0,0,827,828,5,34,0,0,828,830,5,34,0,0,829,803,1,0,0,0,829,816,1,0,0,0,830,210,1,0,0,0,831,834,3,217,108,0,832,834,3,219,109,0,833,831,1,0,0,0,833,832,1,0,0,0,834,212,1,0,0,0,835,837,7,19,0,0,836,835,1,0,0,0,837,214,1,0,0,0,838,840,7,20,0,0,839,838,1,0,0,0,840,216,1,0,0,0,841,843,7,21,0,0,842,841,1,0,0,0,843,218,1,0,0,0,844,845,5,92,0,0,845,846,7,22,0,0,846,220,1,0,0,0,847,850,3,223,111,0,848,850,7,23,0,0,849,847,1,0,0,0,849,848,1,0,0,0,850,222,1,0,0,0,851,853,7,24,0,0,852,851,1,0,0,0,853,224,1,0,0,0,57,0,542,546,548,552,556,560,564,566,572,578,580,587,594,601,607,609,637,644,659,669,678,681,683,691,694,696,700,709,722,728,734,736,739,746,749,753,758,761,766,773,778,781,786,788,795,797,801,810,823,829,833,836,839,842,849,852,9,1,86,0,1,87,1,1,88,2,1,89,3,1,90,4,1,91,5,0,1,0,1,94,6,1,95,7];static __ATN;static get _ATN(){return r.__ATN||(r.__ATN=new Hn().deserialize(r._serializedATN)),r.__ATN}static vocabulary=new et(r.literalNames,r.symbolicNames,[]);get vocabulary(){return r.vocabulary}static decisionsToDFA=r._ATN.decisionToState.map((e,t)=>new ja(e,t))};var zn=class r{static nextSpanId=1;blockDecorationType;codeBlocks=new Map;setup(e){this.initializeBlockDecorations(),b.register("proxyRequest",this.proxyRequest),e.subscriptions.push($.workspace.onDidCloseTextDocument(t=>{t.uri.scheme==="file"&&this.codeBlocks.delete(t.uri)})),e.subscriptions.push($.window.onDidChangeActiveTextEditor(t=>{t&&this.codeBlocks.has(t.document.uri)&&this.updateCodeDecorations(t.document)})),e.subscriptions.push($.workspace.onDidChangeTextDocument(t=>{let s=this.codeBlocks.get(t.document.uri);s&&t.contentChanges.forEach(n=>{let i=n.text.length-n.rangeLength,o=-1,a=0;s.forEach((c,u)=>{this.spansOverlap(c.start,c.length,n.rangeOffset,i)&&(o===-1&&(o=u),++a)});let l=!1;if(a>0){let c=s[o];a>1||n.rangeOffset<c.start||n.rangeOffset+n.rangeLength>c.start+c.length?(s.splice(o--,a),l=!0):s[o].length-=i}for(let c=o+1;c<s.length;++c)s[c].start-=i;l&&this.updateCodeDecorations(t.document)})}))}executeSqlFromEditor(e,t,s){let n=e.document.getText(),{line:i,character:o}=e.selection.active,a=Ah.fromString(n),l,c;switch(e.document.languageId){case"python":{l=new ge(a),c=ge.STRING;break}case"javascript":case"typescript":return;default:return}let u=new Dh(l);try{u.fill();let d=u.getTokens(),p=0;for(;p<d.length;){let f=d[p],C=f.line-1;if((C>i||C===i&&f.column>o)&&p>0&&(f=d[p-1],f.line-1<i||f.column<=o)){if(f.type===c&&f.text){let[x,E]=this.determinePythonQuotes(f.text),N=f.text.substring(x,f.text.length-E),[z,ee]=this.beautifyQuery(N),K={id:r.nextSpanId++,originalCode:N,whiteSpaces:ee,start:f.start+x,length:f.stop+1-E-(f.start+x)},te=this.codeBlocks.get(e.document.uri);te||(te=[],this.codeBlocks.set(e.document.uri,te));let _e=te.findIndex(Me=>Me.start===K.start);_e===-1?(te.push(K),te.sort((Me,St)=>Me.start-St.start),this.updateCodeDecorations(e.document)):te[_e]=K;let Ye={caption:t,connectionId:s,query:z,linkId:K.id};b.execute("executeCodeBlock",Ye)}break}++p}}catch(d){Re(String(d))}}initializeBlockDecorations(){this.blockDecorationType=$.window.createTextEditorDecorationType({isWholeLine:!1,rangeBehavior:$.DecorationRangeBehavior.OpenOpen,overviewRulerLane:$.OverviewRulerLane.Left,light:{backgroundColor:"#db8f0015",overviewRulerColor:"#db8f00",gutterIconPath:Xt.default.join(__dirname,"..","images","light","query-marker.svg"),before:{contentIconPath:Xt.default.join(__dirname,"..","images","light","sqlBlockStart.svg"),width:"24px",height:"14px",margin:"0px 6px 0px 6px",color:"#db8f00"},after:{contentIconPath:Xt.default.join(__dirname,"..","images","light","sqlBlockEnd.svg"),width:"24px",height:"14px",margin:"0px 6px 0px 6px",color:"#db8f00"}},dark:{backgroundColor:"#db8f0015",overviewRulerColor:"#db8f00",gutterIconPath:Xt.default.join(__dirname,"..","images","dark","query-marker.svg"),before:{contentIconPath:Xt.default.join(__dirname,"..","images","dark","sqlBlockStart.svg"),width:"24px",height:"14px",margin:"0px 6px 0px 6px",color:"#db8f00"},after:{contentIconPath:Xt.default.join(__dirname,"..","images","dark","sqlBlockEnd.svg"),width:"24px",height:"14px",margin:"0px 6px 0px 6px",color:"#db8f00"}}})}codeBlocksUpdate=e=>{let t,s;if(this.codeBlocks.forEach((n,i)=>{n.forEach(o=>{o.id===e.linkId&&(t=o,s=i)})}),t&&s)if($.window.activeTextEditor?.document.uri!==s){let n={viewColumn:$.ViewColumn.One,preserveFocus:!0};$.window.showTextDocument(s,n).then(i=>{this.checkAndApplyCodeBlockChanges(i,e.code,t)})}else this.checkAndApplyCodeBlockChanges($.window.activeTextEditor,e.code,t);else $.window.showInformationMessage("The original code block no longer exists and cannot be updated.");return Promise.resolve(!0)};determinePythonQuotes(e){let t=e.match(/^(u|br?|r(f|b)?|fr?)?(["']{1,3})/i);if(t){let s=t[0].length,n=s-(t[1]??"").length;return[s,n]}return[0,0]}beautifyQuery(e){let t={leading:"",indentation:"",trailing:""};e=e.replace(/\t/g,"    ");let s=e.split(`
`),n=0;for(let i of s)if(i.trim().length===0)++n,t.leading+=i+`
`;else break;s.splice(0,n),n=0;for(let i of s.reverse())if(i.trim().length===0)++n,t.trailing+=`
`+i;else break;if(s.splice(0,n),s.reverse(),s.length>0){let i=s[0].match(/(:?\s+).*/);t.indentation=i?.[1]??"",t.indentation&&s.forEach((o,a)=>{o.startsWith(t.indentation)&&(s[a]=o.substring(t.indentation.length))})}return[s.join(`
`),t]}updateCodeDecorations(e){let t=this.codeBlocks.get(e.uri);if(t){let s=t.map(n=>{let i=e.positionAt(n.start),o=e.positionAt(n.start+n.length);return new $.Range(i,o)});$.window.activeTextEditor?.setDecorations(this.blockDecorationType,s)}}spansOverlap(e,t,s,n){let i=e+t,o=s+n;return e<=s?s<=i:e<=o}checkAndApplyCodeBlockChanges(e,t,s){if(s){let n=t.split(`
`).map(c=>c.trim().length===0?"":s.whiteSpaces.indentation+c);t=s.whiteSpaces.leading+n.join(`
`)+s.whiteSpaces.trailing;let i=e.document.positionAt(s.start),o=e.document.positionAt(s.start+s.length),a=new $.Range(i,o);e.document.getText(a)!==s.originalCode?$.window.showWarningMessage("The original code was changed meanwhile. Do you still want to update it with your application code?","Update","Cancel").then(c=>{c==="Update"&&e.edit(u=>{u.replace(a,t)}).then(u=>{u?s.originalCode=t:$.window.showErrorMessage("The changes could not be applied.")})}):e.edit(c=>{c.replace(a,t)}).then(c=>{c?s.originalCode=t:$.window.showErrorMessage("The changes could not be applied.")})}}proxyRequest=e=>{switch(e.original.requestType){case"codeBlocksUpdate":{let t=e.original.parameter;return this.codeBlocksUpdate(t)}default:}return Promise.resolve(!1)}};var Wa=k(require("path"),1),Ne=require("vscode");var D=class extends Ne.TreeItem{constructor(t,s,n,i,o,a,l){super(t,a?Ne.TreeItemCollapsibleState.Collapsed:Ne.TreeItemCollapsibleState.None);this.name=t;this.schema=s;this.backend=n;this.connectionId=i;this.iconPath={light:Wa.join(__dirname,"..","images","light",o),dark:Wa.join(__dirname,"..","images","dark",o)},this.command=l}copyNameToClipboard(){Ne.env.clipboard.writeText(this.name).then(()=>{F("The name was copied to the system clipboard")})}copyCreateScriptToClipboard(t=!1,s=!1){this.backend.execute(`show create ${this.dbType} ${this.qualifiedName}`).then(n=>{if(n&&n.rows&&n.rows.length>0){let i=n.rows[0],o=this.createScriptResultIndex;if(i.length>o){let a=i[o];if(t){if(s){let l=Array.from(a.matchAll(/PROCEDURE `(.*?)`/gm),c=>c[1]);l.length>0?a=`DROP PROCEDURE \`${l[0]}\`$$
${a}`:(l=Array.from(a.matchAll(/FUNCTION `(.*?)`/gm),c=>c[1]),l.length&&(a=`DROP FUNCTION \`${l[0]}\`$$
${a}`))}a=`DELIMITER $$
${a}$$
DELIMITER ;`}Ne.env.clipboard.writeText(a).then(()=>{F("The create script was copied to the system clipboard")})}}}).catch(n=>{Ne.window.showErrorMessage("Error while getting create script: "+n.message)})}dropItem(){let t=`Do you want to drop the ${this.dbType} ${this.name}?`,s=`Drop ${this.name}`;cs(t,s,"This operation cannot be reverted!").then(n=>{if(n){let i=`drop ${this.dbType} ${this.qualifiedName}`;this.backend.execute(i).then(()=>{Ne.commands.executeCommand("msg.refreshConnections"),F(`The object ${this.name} has been dropped successfully.`)}).catch(o=>{Ne.window.showErrorMessage(`Error dropping the object: ${o.message}`)})}})}get qualifiedName(){return""}get dbType(){return""}get createScriptResultIndex(){return 1}};var Jp=require("vscode");var Va=k(require("path"),1),Qn=require("vscode"),Yn=class extends Qn.TreeItem{contextValue="editorOverview";constructor(e,t,s){super(e,Qn.TreeItemCollapsibleState.None),this.tooltip=t,this.command=s,this.iconPath={light:Va.join(__dirname,"..","images","light","overviewPage.svg"),dark:Va.join(__dirname,"..","images","dark","overviewPage.svg")}}};var Ka=k(require("path"),1),Xn=require("vscode");var Jn=class extends Xn.TreeItem{entry;constructor(e,t,s){super(e,Xn.TreeItemCollapsibleState.Expanded),this.entry={details:{caption:e,id:s,dbType:t}};let n;t==="MySQL"?(n="connectionMysql",this.contextValue="editorConnectionMySQL"):(n="connectionSqlite",this.contextValue="editorConnectionSQLite"),this.iconPath={light:Ka.join(__dirname,"..","images","light",n+".svg"),dark:Ka.join(__dirname,"..","images","dark",n+".svg")}}};var Ha=k(require("path"),1),Zn=require("vscode"),Rs=class extends Zn.TreeItem{contextValue="editorTab";constructor(e){super(e,Zn.TreeItemCollapsibleState.Expanded),this.iconPath={light:Ha.join(__dirname,"..","images","light","tab.svg"),dark:Ha.join(__dirname,"..","images","dark","tab.svg")}}};var Zt=k(require("path"),1),ei=require("vscode");var Ds=class r extends ei.TreeItem{constructor(t,s,n,i,o){super(t,ei.TreeItemCollapsibleState.None);this.normalCaption=t;this.alternativeCaption=s;if(this.command=o,i===1||i===0)if(n==="msg")this.iconPath={light:Zt.join(__dirname,"..","images","light","notebook.svg"),dark:Zt.join(__dirname,"..","images","dark","notebook.svg")};else{let a;switch(n){case"sql":{a="scriptSqlite";break}case"mysql":{a="scriptMysql";break}case"javascript":{a="scriptJs";break}case"typescript":{a="scriptTs";break}case"python":{a="scriptPy";break}default:{a="default";break}}this.iconPath={light:Zt.join(__dirname,"..","images","light","file-icons",a+".svg"),dark:Zt.join(__dirname,"..","images","dark","file-icons",a+".svg")}}else{let a=r.#e.get(i)??"default";this.iconPath={light:Zt.join(__dirname,"..","images","light",a+".svg"),dark:Zt.join(__dirname,"..","images","dark",a+".svg")}}}static#e=new Map([[0,"terminal"],[1,"script"],[2,"folder"],[3,"adminServerStatus"],[4,"clientConnections"],[5,"adminPerformanceDashboard"]]);contextValue="editorItem";updateLabel(t){this.label=t?this.alternativeCaption:this.normalCaption}};var $a=k(require("path"),1),ri=require("vscode"),ti=class extends ri.TreeItem{contextValue="session";constructor(e,t){super(e,ri.TreeItemCollapsibleState.None),this.iconPath={light:$a.join(__dirname,"..","images","light","terminal.svg"),dark:$a.join(__dirname,"..","images","dark","terminal.svg")},this.command=t}};var si=class{#e=new Map;#t=new Map;#r=new Map;#s=new Jp.EventEmitter;#i;#o;get onDidChangeTreeData(){return this.#s.event}set onSelect(e){this.#i=e}constructor(){b.register("proxyRequest",this.proxyRequest),b.register("editorSaved",this.editorSaved),this.#o=this.createOverviewItems(null)}dispose(){b.unregister("proxyRequest",this.proxyRequest),b.unregister("editorSaved",this.editorSaved)}clear(e){return e?this.#e.delete(e):this.#e.clear(),this.#s.fire(void 0),this.#e.size===0}isOpen(e){for(let[t,s]of this.#e.entries())if(s.connections.some(n=>n.connectionId===e.details.id))return!0;return!1}currentConnectionId(e){let t=this.#r.get(e);return t&&t.type==="editor"?t.parent.connectionId:t&&t.type==="connection"?t.connectionId:null}createUniqueCaption=()=>{if(this.#e.size===0)return"MySQL Shell";let e=2;for(;e<100;){let t=`MySQL Shell (${e})`,s=!1;if(this.#e.forEach(n=>{n.caption===t&&(s=!0)}),!s)return t;++e}return""};getTreeItem(e){return e.treeItem}getParent(e){return e.type==="editor"||e.type==="connection"?e.parent:null}getChildren(e){if(!e){let t=[...this.#e.values()],s=[...this.#t.values()];if(t.length===0)return[this.#o,...s.values()];if(t.length===1){let n=[...this.#e.values()][0];return[n.connectionOverview,...n.connections,...s.values()]}return[...this.#e.values(),...s.values()]}if(e.type==="connectionProvider"){let t=e;return[t.connectionOverview,...t.connections]}return e.type==="sessionProvider"?[...e.sessions]:e.type==="connection"?e.editors:null}updateEditors=(e,t)=>{if(t.opened){let s=this.#e.get(e);s||(s={type:"connectionProvider",provider:e,caption:e.caption,treeItem:new Rs(e.caption),connections:[]},this.#e.set(e,s),s.connectionOverview=this.createOverviewItems(e),s.connectionOverview.parent=s);let n=s.connections.find(a=>a.connectionId===t.connectionId),i={title:"",command:"",arguments:[e,t.connectionCaption,t.connectionId,t.editorId]};switch(t.editorType){case 0:{i.command="msg.showNotebook";break}case 1:{i.command="msg.showScript";break}case 3:{i.command="msg.showServerStatus";break}case 4:{i.command="msg.showClientConnections";break}case 5:{i.command="msg.showPerformanceDashboard";break}default:}if(n){let a=`${t.editorCaption} (${t.connectionCaption})`;n.editors.push({type:"editor",caption:t.editorCaption,alternativeCaption:a,id:t.editorId,language:t.language,editorType:t.editorType,parent:n,treeItem:new Ds(t.editorCaption,a,t.language,t.editorType,i)})}else{n={type:"connection",connectionId:t.connectionId,caption:t.connectionCaption,dbType:t.dbType,editors:[],parent:s,treeItem:new Jn(t.connectionCaption,t.dbType,t.connectionId)};let a=`${t.editorCaption} (${t.connectionCaption})`;n.editors.push({type:"editor",caption:t.editorCaption,alternativeCaption:a,id:t.editorId,language:t.language,editorType:t.editorType,parent:n,treeItem:new Ds(t.editorCaption,a,t.language,t.editorType,i)}),s.connections.push(n)}let o=n.editors[n.editors.length-1];this.#s.fire(void 0),this.#r.set(e,o),o.caption!=="DB Connection Overview"&&(e.caption=t.connectionCaption),this.#i(o)}else{let s=this.#e.get(e);if(!s)return;let n=s.connections.findIndex(i=>i.connectionId===t.connectionId);if(n>-1){let i=s.connections[n];if(t.editorId===void 0)i.editors=[];else{let o=i.editors.findIndex(a=>a.id===t.editorId);o!==-1&&i.editors.splice(o,1)}i.editors.length===0&&s.connections.splice(n,1)}s.connections.length===0&&this.#e.delete(e),this.#s.fire(void 0)}};createOverviewItems=e=>{let t={command:"msg.openDBBrowser",arguments:[e]};return{type:"connectionOverview",caption:"DB Connection Overview",treeItem:new Yn("DB Connection Overview","Open the DB Connection Overview",t),parent:null}};proxyRequest=e=>{switch(e.original.requestType){case"editorsChanged":{let t=e.original.parameter;return this.updateEditors(e.provider,t),Promise.resolve(!0)}case"editorSelect":{let t=e.original.parameter;return this.selectItem(e.provider,t.connectionId,t.editorId)}case"selectConnectionTab":{let t=e.original.parameter;return this.selectItem(e.provider,t.connectionId,t.page)}case"refreshSessions":{let t=e.original.parameter;return this.refreshSessions(e.provider,t)}default:}return Promise.resolve(!1)};selectItem=(e,t,s)=>{let n=this.#e.get(e);if(!n)return Promise.resolve(!1);if(t<0&&s.length===0){let o=this.#r.get(e);return o&&this.#i(o),Promise.resolve(!0)}let i=n.connections.find(o=>o.connectionId===t);if(i){let o=i.editors.find(a=>a.id===s)??i.editors[0];o&&(this.#r.set(e,o),this.#i(o))}else this.#r.set(e,n.connectionOverview),s==="DB Connection Overview"?e.caption=n.caption:e.caption=s??n.caption,this.#i(n.connectionOverview);return Promise.resolve(!1)};refreshSessions=(e,t)=>{if(t.length===0)e.close(),this.#t.delete(e);else{let s=this.#t.get(e);s||(s={type:"sessionProvider",provider:e,caption:e.caption,treeItem:new Rs(e.caption),sessions:[]},this.#t.set(e,s)),s.sessions=t.map(n=>({type:"shellSession",caption:n.caption,id:n.sessionId,parent:s,details:n,treeItem:new ti(n.caption??"Unknown",{title:"Open Shell GUI Console",command:"msg.openSession",arguments:[n]})}))}return this.#s.fire(void 0),Promise.resolve(!0)};editorSaved=e=>{for(let t of this.#e.values())for(let s of t.connections)for(let n of s.editors)n.id===e.id&&(n.caption=e.newName,n.treeItem.label=e.newName,this.#s.fire(n));return Promise.resolve(!0)};updateEditorItemCaptions=(e,t)=>{for(let s of e.connections)for(let n of s.editors)n.treeItem.updateLabel(t)}};var ni=class{constructor(e){this.connectionsProvider=e}#e=!1;#t;#r=new zn;#s=new Map;#i;#o=!0;#n=!1;setup(e){this.#t=e;let t=e.context;this.#r.setup(t);let s=v.window.createTreeView("msg.connections",{treeDataProvider:this.connectionsProvider,showCollapseAll:!0,canSelectMany:!1});t.subscriptions.push(s),s.onDidExpandElement(i=>{this.connectionsProvider.didExpandElement(i.element)}),s.onDidCollapseElement(i=>{this.connectionsProvider.didCollapseElement(i.element)}),this.#i=new si;let n=v.window.createTreeView("msg.openEditors",{treeDataProvider:this.#i,showCollapseAll:!0,canSelectMany:!1});t.subscriptions.push(n),this.#i.onSelect=i=>{n.reveal(i,{select:!0,focus:!1,expand:3})},n.onDidChangeVisibility(i=>{let o=v.workspace.getConfiguration("msg.startup").get("showDbConnectionsTab",!0);i.visible&&this.#o&&o&&(this.#o=!1,this.#e?v.commands.executeCommand("msg.openDBBrowser"):this.#n=!0)}),b.register("connectedToUrl",this.connectedToUrl),b.register("executeCodeBlock",this.executeCodeBlock),b.register("proxyRequest",this.proxyRequest),t.subscriptions.push(v.commands.registerCommand("msg.refreshConnections",()=>{b.execute("refreshConnections",void 0)})),t.subscriptions.push(v.commands.registerCommand("msg.refreshVisibleRouters",()=>{this.connectionsProvider.refreshMrsRouters()})),t.subscriptions.push(v.commands.registerCommand("msg.openConnection",i=>{if(i){let o;this.#i.isOpen(i.treeItem)?o=this.#t.newProvider:o=this.#t.currentProvider,o?.show(String(i.treeItem.details.id))}})),t.subscriptions.push(v.commands.registerCommand("msg.openConnectionNewTab",i=>{i&&this.#t.newProvider?.show(String(i.treeItem.details.id))})),t.subscriptions.push(v.commands.registerCommand("msg.showTableData",i=>{if(i){let o=this.#t.currentProvider,l=v.workspace.getConfiguration("msg.dbEditor").get("upperCaseKeywords",!0),c=l?"SELECT":"select",u=l?"FROM":"from",d=i.treeItem,p=`${c} * ${u} \`${d.schema}\`.\`${d.label}\``,f=`${d.schema}.${d.label} - Data`;o?.runScript(String(d.connectionId),{scriptId:Q(),language:"mysql",content:p,name:f})}})),t.subscriptions.push(v.commands.registerCommand("msg.selectTableRows",i=>{if(i){let o=this.#t.currentProvider,l=v.workspace.getConfiguration("msg.dbEditor").get("upperCaseKeywords",!0),c=l?"SELECT":"select",u=l?"FROM":"from",d=i.treeItem,p=`${c} * ${u} \`${d.schema}\`.\`${d.label}\``;o?.runCode(String(d.connectionId),{code:p,language:"mysql",linkId:-1})}})),t.subscriptions.push(v.commands.registerCommand("msg.showNotebook",(i,o,a,l)=>{i??=this.#t.currentProvider,i instanceof qe&&(i.caption=o,i.showPageSection(String(a),0,l))})),t.subscriptions.push(v.commands.registerCommand("msg.showScript",(i,o,a,l)=>{i??=this.#t.currentProvider,i instanceof qe&&(i.caption=o,i.showPageSection(String(a),1,l))})),t.subscriptions.push(v.commands.registerCommand("msg.showServerStatus",(i,o,a,l)=>{i??=this.#t.currentProvider,i instanceof qe&&(i.caption=o,i.showPageSection(String(a),3,l))})),t.subscriptions.push(v.commands.registerCommand("msg.showClientConnections",(i,o,a,l)=>{i??=this.#t.currentProvider,i instanceof qe&&(i.caption=o,i.showPageSection(String(a),4,l))})),t.subscriptions.push(v.commands.registerCommand("msg.showPerformanceDashboard",(i,o,a,l)=>{i??=this.#t.currentProvider,i instanceof qe&&(i.caption=o,i.showPageSection(String(a),5,l))})),t.subscriptions.push(v.commands.registerCommand("msg.insertScript",i=>{i&&this.#t.currentProvider?.insertScriptData(i.entry)})),t.subscriptions.push(v.commands.registerCommand("msg.addConnection",()=>{this.#t.currentProvider?.addConnection()})),t.subscriptions.push(v.commands.registerCommand("msg.refreshConnection",i=>{b.execute("refreshConnections",{item:i})})),t.subscriptions.push(v.commands.registerCommand("msg.removeConnection",i=>{i&&this.#t.currentProvider?.removeConnection(i.treeItem.details.id)})),t.subscriptions.push(v.commands.registerCommand("msg.editConnection",i=>{i&&this.#t.currentProvider?.editConnection(i?.treeItem.details.id)})),t.subscriptions.push(v.commands.registerCommand("msg.duplicateConnection",i=>{i&&this.#t.currentProvider?.duplicateConnection(i.treeItem.details.id)})),t.subscriptions.push(v.commands.registerCommand("msg.showSystemSchemasOnConnection",i=>{i&&(i.treeItem.details.hideSystemSchemas=!1,b.execute("refreshConnections",{entry:i}))})),t.subscriptions.push(v.commands.registerCommand("msg.hideSystemSchemasOnConnection",i=>{i&&(i.treeItem.details.hideSystemSchemas=!0,b.execute("refreshConnections",{entry:i}))})),t.subscriptions.push(v.commands.registerCommand("msg.openDBBrowser",i=>{if(i??=this.#t.currentProvider,i instanceof qe)i.show("connections");else{let o=this.#t.currentProvider;o&&o.show("connections")}})),t.subscriptions.push(v.commands.registerCommand("msg.makeCurrentSchema",i=>{if(i){let o=this.#t.currentProvider;o&&o?.makeCurrentSchema(i.parent.treeItem.details.id,i.treeItem.name).then(a=>{a&&this.connectionsProvider.makeCurrentSchema(i)})}})),t.subscriptions.push(v.commands.registerCommand("msg.dropSchema",i=>{i?.treeItem.dropItem()})),t.subscriptions.push(v.commands.registerCommand("msg.dropTable",i=>{i?.treeItem.dropItem()})),t.subscriptions.push(v.commands.registerCommand("msg.dropView",i=>{i?.treeItem.dropItem()})),t.subscriptions.push(v.commands.registerCommand("msg.dropRoutine",i=>{i?.treeItem.dropItem()})),t.subscriptions.push(v.commands.registerCommand("msg.dropTrigger",i=>{i?.treeItem.dropItem()})),t.subscriptions.push(v.commands.registerCommand("msg.dropEvent",i=>{i?.treeItem?.dropItem()})),t.subscriptions.push(v.commands.registerCommand("msg.defaultConnection",i=>{i&&v.workspace.getConfiguration("msg.editor").update("defaultDbConnection",i.treeItem.details.caption,v.ConfigurationTarget.Global).then(()=>{v.window.showInformationMessage(`"${i.treeItem.label}" has been set as default DB Connection.`)})})),t.subscriptions.push(v.commands.registerCommand("msg.copyNameToClipboard",i=>{i&&i.treeItem instanceof D&&i.treeItem.copyNameToClipboard()})),t.subscriptions.push(v.commands.registerCommand("msg.copyCreateScriptToClipboard",i=>{i&&i.treeItem instanceof D&&i.treeItem.copyCreateScriptToClipboard()})),t.subscriptions.push(v.commands.registerCommand("msg.copyCreateScriptWithDelimitersToClipboard",i=>{i&&i.treeItem instanceof D&&i.treeItem.copyCreateScriptToClipboard(!0)})),t.subscriptions.push(v.commands.registerCommand("msg.copyDropCreateScriptWithDelimitersToClipboard",i=>{i&&i.treeItem instanceof D&&i.treeItem.copyCreateScriptToClipboard(!0,!0)})),t.subscriptions.push(v.commands.registerCommand("msg.editInScriptEditor",async i=>{if(i?.scheme==="file")if(!Xp.default.existsSync(i.fsPath))v.window.showErrorMessage(`The file ${i.fsPath} could not be found.`);else if((await v.workspace.fs.stat(i)).size>=1e7)await v.window.showInformationMessage(`The file "${i.fsPath}" is too large to edit it in a web view. Instead use the VS Code built-in editor.`);else{let a=await e.determineConnection();a&&await v.workspace.fs.readFile(i).then(l=>{let c=l.toString(),u=this.#t.currentProvider;if(u){let d=(0,kr.basename)(i.fsPath),p={scriptId:Q(),name:d,content:c,language:this.languageFromConnection(a)},f=this.#s.get(u);f||(f=new Map,this.#s.set(u,f)),f.set(p.scriptId,i),u.editScript(String(a.treeItem.details.id),p)}})}})),t.subscriptions.push(v.commands.registerCommand("msg.loadScriptFromDisk",i=>{i&&v.window.showOpenDialog({title:"Select the script file to load to MySQL Shell",openLabel:"Select Script File",canSelectFiles:!0,canSelectFolders:!1,canSelectMany:!1,filters:{SQL:["sql","mysql"],TypeScript:["ts"],JavaScript:["js"]}}).then(async o=>{if(o&&o.length===1){let a=o[0];(await v.workspace.fs.stat(a)).size>=1e7?await v.window.showInformationMessage(`The file "${a.fsPath}" is too large to edit it in a web view. Instead use the VS Code built-in editor.`):await v.workspace.fs.readFile(a).then(c=>{let u=c.toString(),d=this.#t.currentProvider;if(d){let p="mysql",f=(0,kr.basename)(a.fsPath);switch(f.substring(f.lastIndexOf(".")??0)){case".ts":{p="typescript";break}case".js":{p="javascript";break}case".sql":{i.treeItem.details.dbType==="Sqlite"&&(p="sql");break}default:}let x={scriptId:Q(),name:f,content:u,language:p},E=this.#s.get(d);E||(E=new Map,this.#s.set(d,E)),E.set(x.scriptId,a),d.editScript(String(i.treeItem.details.id),x)}})}})})),t.subscriptions.push(v.commands.registerCommand("msg.mds.createConnectionViaBastionService",i=>{i&&this.#t.currentProvider?.addConnection(i.dbSystem,i.profile.profile)})),t.subscriptions.push(v.commands.registerTextEditorCommand("msg.executeEmbeddedSqlFromEditor",i=>{i&&e.determineConnection().then(o=>{o&&this.#r.executeSqlFromEditor(i,o.treeItem.details.caption,o.treeItem.details.id)})})),t.subscriptions.push(v.commands.registerTextEditorCommand("msg.executeSelectedSqlFromEditor",i=>{i&&e.determineConnection().then(o=>{if(o){let a=this.#t.currentProvider;if(a){let l="";return i.selection.isEmpty?l=i.document.getText():i.selections.forEach(c=>{l+=i.document.getText(c)}),a.runScript(String(o.treeItem.details.id),{scriptId:Q(),content:l,language:this.languageFromConnection(o)})}}})})),t.subscriptions.push(v.commands.registerCommand("msg.closeEditor",i=>{if(i){let o=i.parent.parent.provider;o instanceof qe&&o.closeEditor(i.parent.connectionId,i.id)}})),t.subscriptions.push(v.commands.registerCommand("msg.newNotebookMysql",i=>{this.createNewEditor({entry:i,language:"msg"})})),t.subscriptions.push(v.commands.registerCommand("msg.newNotebookSqlite",i=>{this.createNewEditor({entry:i,language:"msg"})})),t.subscriptions.push(v.commands.registerCommand("msg.newScriptJs",i=>{this.createNewEditor({entry:i,language:"javascript"})})),t.subscriptions.push(v.commands.registerCommand("msg.newScriptMysql",i=>{this.createNewEditor({entry:i,language:"mysql"})})),t.subscriptions.push(v.commands.registerCommand("msg.newScriptSqlite",i=>{this.createNewEditor({entry:i,language:"sql"})})),t.subscriptions.push(v.commands.registerCommand("msg.newScriptTs",i=>{this.createNewEditor({entry:i,language:"typescript"})})),t.subscriptions.push(v.commands.registerCommand("msg.mrs.addDbObject",i=>{if(i){let o;i.type==="routine"?o=i.treeItem.dbType.toUpperCase():o=i.type.toUpperCase();let a=i.treeItem;o==="TABLE"||o==="VIEW"||o==="PROCEDURE"||o==="FUNCTION"?this.createNewDbObject(i.treeItem.backend,a,o).then(l=>{this.#t.currentProvider?.editMrsDbObject(String(a.connectionId),{dbObject:l,createObject:!0})}).catch(l=>{v.window.showErrorMessage(`${String(l)}`)}):v.window.showErrorMessage(`The database object type '${o}' is not supported at this time`)}})),t.subscriptions.push(v.commands.registerCommand("msg.mrs.editDbObject",i=>{i&&this.#t.currentProvider?.editMrsDbObject(String(i.treeItem.connectionId),{dbObject:i.treeItem.value,createObject:!1})}))}async refreshConnectionTree(){await this.connectionsProvider.closeAllConnections(),this.connectionsProvider.refresh()}clear(){this.#i.clear()}providerClosed(e){this.#s.delete(e),this.#i.clear(e)&&this.connectionsProvider.resetCurrentSchemas()}generateNewProviderCaption(){return this.#i.createUniqueCaption()}providerStateChanged(e,t){this.connectionsProvider.providerStateChanged(e,t)}createNewDbObject=async(e,t,s)=>{let n={comments:"",crudOperations:s==="PROCEDURE"?["UPDATE"]:["READ"],crudOperationFormat:"FEED",dbSchemaId:"",enabled:1,id:"",name:t.name,objectType:s,requestPath:`/${Qs(t.name)}`,requiresAuth:1,rowUserOwnershipEnforced:0,serviceId:"",autoDetectMediaType:0},i=await e.mrs.listServices(),o;if(i.length===1)o=i[0];else if(i.length>1&&(o=i.find(a=>a.isCurrent),!o)){let a=i.map(c=>c.urlContextRoot),l=await v.window.showQuickPick(a,{title:"Select a connection for SQL execution",matchOnDescription:!0,placeHolder:"Type the name of an existing DB connection"});l&&(o=i.find(c=>c.urlContextRoot===l))}if(o){let l=(await e.mrs.listSchemas(o.id)).find(c=>c.name===t.schema);if(n.schemaName=t.schema,l)n.dbSchemaId=l.id;else if(await v.window.showInformationMessage(`The database schema ${t.schema} has not been added to the REST Service. Do you want to add the schema now?`,"Yes","No")==="Yes")n.dbSchemaId=await e.mrs.addSchema(o.id,t.schema,`/${Qs(t.schema)}`,!1,null,null,void 0),v.commands.executeCommand("msg.refreshConnections"),F(`The MRS schema ${t.schema} has been added successfully.`,5e3);else throw new Error("Operation cancelled.")}else throw i.length===0?new Error("Please create a REST Service before adding DB Objects."):new Error("No REST Service selected.");return n};connectedToUrl=e=>(this.#e=e!==void 0,this.#n&&(this.#n=!1,v.commands.executeCommand("msg.openDBBrowser")),Promise.resolve(!0));executeCodeBlock=e=>{let t=this.#t.currentProvider;return t?t.runCode(String(e.connectionId),{linkId:e.linkId,code:e.query,language:"mysql"}):Promise.resolve(!1)};editorLoadScript=e=>{let t={};switch(e.language){case"mysql":{t.SQL=["mysql","sql"];break}case"sql":{t.SQL=["sql"];break}case"typescript":{t.TypeScript=["ts"];break}case"javascript":{t.JavaScript=["js"];break}default:}return v.window.showOpenDialog({title:"Load Script File",filters:t,canSelectFiles:!0,canSelectFolders:!1,canSelectMany:!1}).then(s=>{s.length>0&&v.workspace.fs.readFile(s[0]).then(n=>{let i=this.#t.currentProvider;if(i){let o=this.#s.get(i);if(o){o.set(e.scriptId,s[0]);let l=(0,kr.basename)(s[0].fsPath);i.renameFile({scriptId:e.scriptId,name:l,language:e.language,content:e.content}),b.execute("editorSaved",{id:e.scriptId,newName:l,saved:!1})}e.content=n.toString();let a=this.#i.currentConnectionId(i)??-1;i.loadScript(String(a),e)}})}),Promise.resolve(!0)};editorSaveScript=e=>{let t=this.#t.currentProvider;if(t){let s=this.#s.get(t);if(s){let n=s.get(e.scriptId);if(n)if(n.scheme==="untitled"){let i={};switch(e.language){case"mysql":{i.SQL=["mysql","sql"];break}case"sql":{i.SQL=["sql"];break}case"typescript":{i.TypeScript=["ts"];break}case"javascript":{i.JavaScript=["js"];break}default:}v.window.showSaveDialog({title:"Save Script File",filters:i}).then(o=>{if(o){let a=(0,kr.basename)(o.fsPath);s.set(e.scriptId,o),t.renameFile({scriptId:e.scriptId,name:a,language:e.language,content:e.content});let l=Buffer.from(e.content,"utf-8");v.workspace.fs.writeFile(o,l),b.execute("editorSaved",{id:e.scriptId,newName:a,saved:o!==void 0})}})}else{let i=Buffer.from(e.content,"utf-8");v.workspace.fs.writeFile(n,i)}}}return Promise.resolve(!0)};createNewEditor=e=>new Promise(t=>{let s=-1,n;if(e.entry?.parent?.provider?(s=e.entry.connectionId,n=e.entry.parent.provider):(n=this.#t.currentProvider,n&&(s=this.#i.currentConnectionId(n)??-1)),s===-1){v.window.showErrorMessage("Please select a connection first."),t(!1);return}v.workspace.openTextDocument({language:e.language,content:e.content}).then(i=>{let o=e.provider?e.provider:n;if(n){let a=(0,kr.basename)(i.fileName);if(e.language==="msg")o.createNewEditor({page:String(s),language:e.language,content:e.content});else{let l={scriptId:Q(),name:a,content:i.getText(),language:e.language},c=this.#s.get(o);c||(c=new Map,this.#s.set(o,c)),c.set(l.scriptId,i.uri),o.editScript(String(s),l)}}t(!0)})});languageFromConnection=e=>{switch(e.treeItem.details.dbType){case"MySQL":return"mysql";default:return"sql"}};proxyRequest=e=>{switch(e.original.requestType){case"editorSaveScript":{let t=e.original.parameter;return this.editorSaveScript(t)}case"editorLoadScript":{let t=e.original.parameter;return this.editorLoadScript(t)}case"createNewEditor":{let t=e.original.parameter;return this.createNewEditor({provider:e.provider,language:t.language,content:t.content})}default:}return Promise.resolve(!1)}};var B=require("vscode"),Zp=require("fs/promises");var Ns=class{#e=[];wait(e){let t={timeout:null,resolve:()=>{}};this.#e.push(t);let s=new Promise(n=>{let i=!1;t.resolve=(o,a)=>{if(!i){if(i=!0,t.timeout&&(clearTimeout(t.timeout),t.timeout=null),!o){let l=this.#e.indexOf(t);l>-1&&this.#e.splice(l,1)}n(a===void 0?!0:a)}}});return e!==void 0&&e>0&&isFinite(e)&&(t.timeout=setTimeout(()=>{t.timeout=null,t.resolve(!1)},e)),s}notify(e){this.#e.pop()?.resolve(!0,e)}notifyAll(e){let t=this.#e.reverse();this.#e=[];let s;for(;(s=t.pop())!==void 0;)s.resolve(!0,e)}};var ii=class{#e;#t;#r;#s=!1;#i=new Ns;#o=new Ns;#n;#c=!1;#a;#l=[];setup(e){this.#e=e,b.register("connectionsUpdated",this.handleConnectionsUpdated),b.register("connectedToUrl",this.handleConnectToUrl),e.context.subscriptions.push(B.window.registerCustomEditorProvider("msg.notebook",this,{webviewOptions:{retainContextWhenHidden:!0}})),e.context.subscriptions.push(B.workspace.onDidDeleteFiles(t=>{for(let s of t.files)s.fsPath.endsWith(".mysql-notebook")&&e.context.workspaceState.update(s.toString(),void 0)})),e.context.subscriptions.push(B.workspace.onDidRenameFiles(t=>{for(let s of t.files){let n=-1;s.oldUri.fsPath.endsWith(".mysql-notebook")&&(n=e.context.workspaceState.get(s.oldUri.toString(),-1),e.context.workspaceState.update(s.oldUri.toString(),void 0)),s.newUri.fsPath.endsWith(".mysql-notebook")&&e.context.workspaceState.update(s.newUri.toString(),n)}})),e.context.subscriptions.push(B.commands.registerCommand("msg.openNotebookWithConnection",t=>{t&&e.determineConnection("MySQL",!0).then(s=>{s&&B.workspace.openTextDocument(t).then(n=>{let i=s.treeItem;B.commands.executeCommand("vscode.openWith",t,"msg.notebook").then(()=>{e.context.workspaceState.update(n.uri.toString(),i.details.id),this.showNotebookPage(i.details.id,n.getText())})})})}))}resolveCustomTextEditor(e,t){return new Promise(s=>{this.setupWebview(e,t).then(()=>{s()})})}showNotebookPage(e,t){return Promise.resolve(this.#r?.executeRemote("job",[{requestType:"showModule",parameter:T},{requestType:"showPage",parameter:{module:T,page:String(e),suppressAbout:!0,noEditor:!0}},{requestType:"editorLoadNotebook",parameter:{content:t,standalone:!0}}])??!0)}handleConnectionsUpdated=()=>{if(this.#s=!0,this.#n&&this.#a){let e=this.#e.context.workspaceState.get(this.#n.uri.toString());if(!this.isValidConnectionId(e))if(this.#n.isDirty)this.#n.save().then(()=>(this.#a.dispose(),Promise.resolve(!0)));else return this.#a.dispose(),Promise.resolve(!0)}return this.#o.notifyAll(),Promise.resolve(!0)};handleConnectToUrl=e=>this.#t?(this.#a?.dispose(),Promise.resolve(!0)):(this.#t=e,this.#s=!1,this.#i.notifyAll(),Promise.resolve(!0));async setupWebview(e,t){t.webview.html="<br/><h2>Loading...</h2>",this.#t||await this.#i.wait(),Mn(t,this.#t),this.#s||await this.#o.wait();let s=this.#e.context.workspaceState.get(e.uri.toString());if(this.isValidConnectionId(s)||(s=void 0,await this.#e.context.workspaceState.update(e.uri.toString(),void 0)),s===void 0){let n=await this.#e.determineConnection("MySQL");n&&(s=n.treeItem.details.id)}s!==void 0?(this.#a=t,this.#n=e,this.#e.context.workspaceState.update(e.uri.toString(),s),t.webview.options={...t.webview.options,enableScripts:!0},this.#r=new jt("host"),this.#r.setRemoteTarget(t.webview),this.#r.register("editorChanged",async()=>(await this.makeDocumentDirty(),Promise.resolve(!0))),this.#r.register("editorSaveNotebook",this.triggerSave),this.#r.register("editorLoadNotebook",this.triggerLoad),this.#r.register("applicationDidStart",()=>this.showNotebookPage(s,e.getText())),this.#l.push(t.webview.onDidReceiveMessage(n=>{n.source==="app"&&this.#r?.handleRemoteMessage(n)})),this.#l.push(t.onDidChangeViewState(n=>{n.webviewPanel.active})),this.#l.push(B.workspace.onWillSaveTextDocument(n=>{n.document.uri.toString()===this.#n?.uri.toString()&&n.waitUntil(this.saveNotebook())})),this.#l.push(this.#a.onDidDispose(()=>{this.handleDispose()}))):t.webview.html="<br/><h2>No connection selected</h2>"}isValidConnectionId(e){return e!==void 0&&this.#e.connections.find(t=>t.treeItem.details.id===e)!==void 0}handleDispose(){this.#l.forEach(e=>{e.dispose()}),this.#a=void 0}async makeDocumentDirty(){if(this.#n){let e=new B.WorkspaceEdit;e.insert(this.#n.uri,new B.Position(0,0)," "),await B.workspace.applyEdit(e);let t=new B.WorkspaceEdit;t.delete(this.#n.uri,new B.Range(new B.Position(0,0),new B.Position(0,1))),await B.workspace.applyEdit(t)}}saveNotebook(){return this.#c||this.#r.executeRemote("editorSaveNotebook",void 0),Promise.resolve()}triggerSave=async e=>{if(this.#n&&e){let t=new B.WorkspaceEdit;t.replace(this.#n.uri,new B.Range(0,0,this.#n.lineCount,0),e),await B.workspace.applyEdit(t),this.#c=!0,await this.#n.save(),this.#c=!1}return Promise.resolve(!0)};triggerLoad=async()=>{let e={title:"",canSelectFiles:!0,canSelectFolders:!1,canSelectMany:!1,filters:{"MySQL Notebook":["mysql-notebook"]},openLabel:"Open Notebook"},t=await B.window.showOpenDialog(e);if(t&&t.length>0){let s=t[0].fsPath,n=await(0,Zp.readFile)(s,{encoding:"utf-8"});if(this.#n){let i=new B.WorkspaceEdit;i.replace(this.#n.uri,new B.Range(0,0,this.#n.lineCount,0),n),await B.workspace.applyEdit(i),this.#r.executeRemote("editorLoadNotebook",{content:n,standalone:!0})}}return!0}};var S=require("vscode"),rl=require("os"),sl=require("fs");var za=k(require("path"),1),oi=require("vscode"),xe=class extends oi.TreeItem{constructor(t,s,n=oi.TreeItemCollapsibleState.None){super(t,n);this.name=t;this.profile=s;this.iconPath={light:za.join(__dirname,"..","images","light",this.iconName),dark:za.join(__dirname,"..","images","dark",this.iconName)}}get iconName(){return"folder.svg"}};var Ya=k(require("path"),1),em=require("vscode");var ai=class extends xe{constructor(t,s,n){super(n.name,t,em.TreeItemCollapsibleState.None);this.compartment=s;this.bastion=n;let i=n.isCurrent?"ociBastionCurrent.svg":"ociBastion.svg";n.lifecycleState!=="ACTIVE"&&(i=n.isCurrent?"ociBastionCurrentNotActive.svg":"ociBastionNotActive.svg"),this.iconPath={light:Ya.join(__dirname,"..","images","light",i),dark:Ya.join(__dirname,"..","images","dark",i)}}contextValue="mdsBastion"};var Qa=k(require("path"),1),tm=require("vscode");var Rr=class extends xe{constructor(t,s,n=tm.TreeItemCollapsibleState.Collapsed){super(s.isCurrent?`${s.name} (Default)`:s.name,t,n);this.compartment=s;let i=s.isCurrent?"folderCurrent.svg":"folder.svg";this.iconPath={light:Qa.join(__dirname,"..","images","light",i),dark:Qa.join(__dirname,"..","images","dark",i)}}contextValue="mdsCompartment"};var rm=require("vscode");var li=class extends xe{constructor(t,s,n,i){super(n.displayName??"<unknown>",t,rm.TreeItemCollapsibleState.None);this.compartment=s;this.compute=n;this.shellSession=i}contextValue="mdsComputeInstance";get iconName(){return"ociCompute.svg"}};var Dr=class extends xe{constructor(t,s,n,i){super(n.displayName,t,i);this.compartment=s;this.dbSystem=n}contextValue="mdsDbSystem"};var Ja=k(require("path"),1),sm=require("vscode");var ci=class extends xe{constructor(t,s,n){super(n.displayName,t,sm.TreeItemCollapsibleState.None);this.compartment=s;this.loadBalancer=n;let i="ociLoadBalancer.svg";n.lifecycleState!=="ACTIVE"&&(i="ociLoadBalancerNotActive.svg"),this.iconPath={light:Ja.join(__dirname,"..","images","light",i),dark:Ja.join(__dirname,"..","images","dark",i)}}contextValue="mdsLoadBalancer"};var Xa=k(require("path"),1),nm=require("vscode");var Os=class extends xe{contextValue="mdsConfigProfile";constructor(e){super(e.profile+` (${e.region})`,e,nm.TreeItemCollapsibleState.Collapsed);let t=e.isCurrent?"ociProfileCurrent.svg":"ociProfile.svg";this.iconPath={light:Xa.join(__dirname,"..","images","light",t),dark:Xa.join(__dirname,"..","images","dark",t)}}};var Nt=require("vscode");var Za=k(require("path"),1),im=require("vscode");var Ls=class extends Dr{constructor(t,s,n){super(t,s,n,im.TreeItemCollapsibleState.Collapsed);this.compartment=s;this.dbSystem=n;let i="ociDbSystemHWNotActive.svg";n.lifecycleState==="ACTIVE"?i="ociDbSystemHW.svg":(n.lifecycleState==="INACTIVE"||n.lifecycleState==="FAILED")&&(i="ociDbSystemHWStopped.svg"),this.iconPath={light:Za.join(__dirname,"..","images","light",i),dark:Za.join(__dirname,"..","images","dark",i)}}contextValue="mdsDbSystemHW"};var el=k(require("path"),1),om=require("vscode");var ui=class extends Dr{constructor(t,s,n){super(t,s,n,om.TreeItemCollapsibleState.None);this.compartment=s;this.dbSystem=n;let i="ociDbSystemNotActive.svg";n.lifecycleState==="ACTIVE"?i="ociDbSystem.svg":(n.lifecycleState==="INACTIVE"||n.lifecycleState==="FAILED")&&(i="ociDbSystemStopped.svg"),this.iconPath={light:el.join(__dirname,"..","images","light",i),dark:el.join(__dirname,"..","images","dark",i)}}contextValue="mdsDbSystem"};var tl=k(require("path"),1),am=require("vscode");var di=class extends xe{constructor(t,s,n){super(`HeatWave Cluster (${n.heatWaveCluster?.clusterSize??""} node${(n.heatWaveCluster?.clusterSize??0)>1?"s":""})`,t,am.TreeItemCollapsibleState.None);this.compartment=s;this.dbSystem=n;let i="ociComputeNotActive.svg";n.heatWaveCluster&&n.heatWaveCluster.lifecycleState==="ACTIVE"?i="ociCompute.svg":n.heatWaveCluster&&(n.heatWaveCluster.lifecycleState==="INACTIVE"||n.heatWaveCluster.lifecycleState==="FAILED")&&(i="ociComputeStopped.svg"),this.iconPath={light:tl.join(__dirname,"..","images","light",i),dark:tl.join(__dirname,"..","images","dark",i)}}contextValue="mdsHWCluster"};var hi=class{changeEvent=new Nt.EventEmitter;shellSession=new bt;compartmentCache={};constructor(){b.register("proxyRequest",this.proxyRequest)}dispose(){b.register("proxyRequest",this.proxyRequest)}get onDidChangeTreeData(){return this.changeEvent.event}refresh(e){this.compartmentCache={},this.listConfigProfiles().then(()=>{this.changeEvent.fire(e)})}getTreeItem(e){return e}getChildren(e){if(h.get.isConnected){if(!e)return this.listConfigProfiles();if(e instanceof Os)return this.listCompartments(e.profile,!0,e.profile.tenancy);if(e instanceof Rr)return new Promise((t,s)=>{Promise.all([this.listCompartments(e.profile,!1,e.compartment.id),this.listDatabases(e.profile,e.compartment),this.listComputeInstances(e.profile,e.compartment),this.listBastionHosts(e.profile,e.compartment),this.listLoadBalancers(e.profile,e.compartment)]).then(([n,i,o,a,l])=>{t([...n,...i,...o,...a,...l])}).catch(n=>{s(n)})});if(e instanceof Ls)return e.dbSystem.heatWaveCluster&&e.dbSystem.heatWaveCluster.lifecycleState!=="DELETED"?[new di(e.profile,e.compartment,e.dbSystem)]:[]}}async listConfigProfiles(){return(await this.shellSession.mds.getMdsConfigProfiles()).map(t=>new Os(t))}addOciCompartmentTreeItem(e,t,s,n,i){n&&s.isCurrent?e.unshift(new Rr(t,s)):(n&&s.id===i||!n&&i&&s.compartmentId===i||!n&&!i)&&e.push(new Rr(t,s))}async listCompartments(e,t,s){let n=[];if(this.compartmentCache[e.profile])return this.compartmentCache[e.profile].forEach(i=>{this.addOciCompartmentTreeItem(n,e,i,t,s)}),n;try{let i=await this.shellSession.mds.getMdsCompartments(e.profile);this.compartmentCache[e.profile]=i,this.compartmentCache[e.profile].forEach(o=>{this.addOciCompartmentTreeItem(n,e,o,t,s)})}catch(i){let o=i?.data?.requestState?.msg;o&&o.includes("NotAuthorizedOrNotFound")&&Nt.window.setStatusBarMessage("Not authorized to list the sub-compartment of this compartment.",5e3)}return n}async listDatabases(e,t){let s=[];try{(await this.shellSession.mds.getMdsMySQLDbSystems(e.profile,t.id)).forEach(i=>{i.isSupportedForHwCluster||i.isSupportedForAnalyticsCluster?s.push(new Ls(e,t,i)):s.push(new ui(e,t,i))})}catch(n){let i=n?.data?.requestState?.msg;i&&i.includes("NotAuthorizedOrNotFound")&&Nt.window.setStatusBarMessage("Not authorized to list the MySQL DB Systems in this compartment.",5e3)}return s}async listComputeInstances(e,t){let s=[];try{(await this.shellSession.mds.getMdsComputeInstances(e.profile,t.id)).forEach(i=>{s.push(new li(e,t,i,this.shellSession))})}catch(n){let i=n?.data?.requestState?.msg;i&&i.includes("NotAuthorizedOrNotFound")&&Nt.window.setStatusBarMessage("Not authorized to list the compute instances in this compartment.",5e3)}return s}async listBastionHosts(e,t){let s=[];try{(await this.shellSession.mds.getMdsBastions(e.profile,t.id)).forEach(i=>{s.push(new ai(e,t,i))})}catch(n){let i=n?.data?.requestState?.msg;i&&i.includes("NotAuthorizedOrNotFound")&&Nt.window.setStatusBarMessage("Not authorized to list the bastions in this compartment.",5e3)}return s}async listLoadBalancers(e,t){let s=[];try{(await this.shellSession.mds.listLoadBalancers(e.profile,t.id)).forEach(i=>{s.push(new ci(e,t,i))})}catch(n){let i=n?.data?.requestState?.msg;i&&i.includes("NotAuthorizedOrNotFound")&&Nt.window.setStatusBarMessage("Not authorized to list the load balancers in this compartment.",5e3)}return s}proxyRequest=e=>{switch(e.original.requestType){case"refreshOciTree":return this.refresh(),Promise.resolve(!0);default:}return Promise.resolve(!1)}};var pi=class{pendingDialogRequests=new Map;runningDialogs=new Set;url;constructor(){b.register("connectedToUrl",this.connectedToUrl),b.register("proxyRequest",this.proxyRequest)}showDialog(e,t){return this.url?new Promise(s=>{let n=new xt(this.url,this.handleDispose);n.caption=t,this.pendingDialogRequests.set(n,s),n.runCommand("showDialog",e,t)}):Promise.resolve()}handleDispose=e=>{let t=this.pendingDialogRequests.get(e);t&&(t(),this.pendingDialogRequests.delete(e)),this.runningDialogs.delete(e)};connectedToUrl=e=>(this.url=e,this.pendingDialogRequests.clear(),Promise.resolve(!0));proxyRequest=e=>{switch(e.original.requestType){case"dialogResponse":{let t=e.original.parameter,s=this.pendingDialogRequests.get(e.provider);if(s)return e.provider.close(),this.pendingDialogRequests.delete(e.provider),s(t),Promise.resolve(!0);break}case"closeInstance":{e.provider.close();break}default:}return Promise.resolve(!1)}};var Nr=class extends D{contextValue="schemaItem";get qualifiedName(){return`\`${this.name}\``}get dbType(){return"schema"}};var Or=class extends Nr{contextValue="schemaItemMySQL";constructor(e,t,s,n,i,o,a){super(e,t,s,n,i?"schemaMySQLCurrent.svg":"schemaMySQL.svg",o,a)}};var mi=class{dialogManager=new pi;shellSession=new bt;ociTreeDataProvider;setup=e=>{this.ociTreeDataProvider=new hi,e.context.subscriptions.push(S.window.registerTreeDataProvider("msg.oci",this.ociTreeDataProvider)),e.context.subscriptions.push(S.commands.registerCommand("msg.mds.refreshOciProfiles",()=>{this.ociTreeDataProvider.refresh()})),e.context.subscriptions.push(S.commands.registerCommand("msg.mds.configureOciProfiles",()=>{let t=`${(0,rl.homedir)()}/.oci/config`;process.env.MYSQLSH_OCI_CONFIG_FILE!==void 0&&(t=process.env.MYSQLSH_OCI_CONFIG_FILE);let s=S.Uri.file(t);if((0,sl.existsSync)(s.fsPath))S.workspace.openTextDocument(s).then(n=>{S.window.showTextDocument(n,1,!1)});else{let n=new S.WorkspaceEdit;n.createFile(s,{ignoreIfExists:!0}),S.workspace.applyEdit(n).then(()=>{S.workspace.openTextDocument(s).then(i=>{S.window.showTextDocument(i,1,!1).then(o=>{o.edit(a=>{let l=i.lineAt(0),c=i.lineAt(i.lineCount-1),u=new S.Range(l.range.start,c.range.end);a.replace(u,`;To add a new OCI Profile, please follow these instructions.
;https://docs.oracle.com/en-us/iaas/Content/API/Concepts/devguidesetupprereq.htm.
;Then paste your OCI Config here, replacing these lines and save.
;Click the Reload icon in the ORACLE CLOUD INFRASTRUCTURE View.`)}).then(()=>{let a=o.selection.start;o.selection=new S.Selection(a,a)})})})})}})),e.context.subscriptions.push(S.commands.registerCommand("msg.mds.createRouterEndpoint",async t=>{t?.dbSystem.id&&await this.showMdsEndpointDialog(t.dbSystem,t.compartment,t.profile,e)})),e.context.subscriptions.push(S.commands.registerCommand("msg.mds.getProfileInfo",t=>{t&&t.profile.profile&&this.showNewJsonDocument(`${t.profile.profile.toString()} Info.json`,JSON.stringify(t.profile,null,4))})),e.context.subscriptions.push(S.commands.registerCommand("msg.mds.setDefaultProfile",async t=>{if(t&&t.profile.profile){S.window.setStatusBarMessage(`Setting current config profile to ${t.profile.profile} ...`,1e4);try{await this.shellSession.mds.setDefaultConfigProfile(t.profile.profile),await S.commands.executeCommand("msg.mds.refreshOciProfiles"),S.window.setStatusBarMessage(`Default config profile set to ${t.profile.profile}.`,5e3)}catch(s){await S.window.showErrorMessage(`Error while setting default config profile: ${String(s)}`)}}})),e.context.subscriptions.push(S.commands.registerCommand("msg.mds.getCompartmentInfo",t=>{t&&t.compartment.id&&this.showNewJsonDocument(`${t.compartment.name.toString()} Info.json`,JSON.stringify(t.compartment,null,4))})),e.context.subscriptions.push(S.commands.registerCommand("msg.mds.setCurrentCompartment",async t=>{if(t&&t.compartment.id){S.window.setStatusBarMessage(`Setting current compartment to ${t.compartment.name} ...`,1e4);try{await this.shellSession.mds.setCurrentCompartment({compartmentId:t.compartment.id,configProfile:t.profile.profile,interactive:!1,raiseExceptions:!0}),await S.commands.executeCommand("msg.mds.refreshOciProfiles"),S.window.setStatusBarMessage(`Current compartment set to ${t.compartment.name}.`,5e3)}catch(s){await S.window.showErrorMessage(`Error while setting current compartment: ${String(s)}`)}}})),e.context.subscriptions.push(S.commands.registerCommand("msg.mds.getDbSystemInfo",async t=>{if(t?.dbSystem.id)try{let s=await this.shellSession.mds.getMdsMySQLDbSystem(t.profile.profile,t.dbSystem.id);this.showNewJsonDocument(`${t.dbSystem.displayName??"<unknown>"} Info.json`,JSON.stringify(s,null,4))}catch(s){S.window.showErrorMessage(`Error while fetching the DB System data: ${String(s)}`)}})),e.context.subscriptions.push(S.commands.registerCommand("msg.mds.startDbSystem",async t=>{if(t?.dbSystem.id){let s=["--","mds","start","db-system",`--db_system_id=${t.dbSystem.id.toString()}`,`--config_profile=${t.profile.profile.toString()}`,"--await_completion=true","--raise_exceptions=true"];await e.addNewShellTask("Start DB System",s,void 0,!1),await S.commands.executeCommand("msg.mds.refreshOciProfiles")}})),e.context.subscriptions.push(S.commands.registerCommand("msg.mds.stopDbSystem",async t=>{if(t?.dbSystem.id){let s=["--","mds","stop","db-system",`--db_system_id=${t.dbSystem.id.toString()}`,`--config_profile=${t.profile.profile.toString()}`,"--await_completion=true","--raise_exceptions=true"];await e.addNewShellTask("Stop DB System",s,void 0,!1),await S.commands.executeCommand("msg.mds.refreshOciProfiles")}})),e.context.subscriptions.push(S.commands.registerCommand("msg.mds.restartDbSystem",async t=>{if(t?.dbSystem.id){let s=["--","mds","restart","db-system",`--db_system_id=${t.dbSystem.id.toString()}`,`--config_profile=${t.profile.profile.toString()}`,"--await_completion=true","--raise_exceptions=true"];await e.addNewShellTask("Restart DB System",s,void 0,!1),await S.commands.executeCommand("msg.mds.refreshOciProfiles")}})),e.context.subscriptions.push(S.commands.registerCommand("msg.mds.addHWCluster",async t=>{t&&t.dbSystem&&t.dbSystem.id&&t.compartment&&t.profile&&await this.showMdsHWClusterDialog(t.dbSystem,t.compartment,t.profile,e)})),e.context.subscriptions.push(S.commands.registerCommand("msg.mds.deleteDbSystem",async t=>{if(t?.dbSystem.id){let s=["--","mds","delete","db-system",`--db_system_id=${t.dbSystem.id.toString()}`,`--config_profile=${t.profile.profile.toString()}`,"--await_completion=true","--raise_exceptions=true"];await e.addNewShellTask("Delete DB System",s,void 0,!1),await S.commands.executeCommand("msg.mds.refreshOciProfiles")}})),e.context.subscriptions.push(S.commands.registerCommand("msg.mds.startHWCluster",async t=>{if(t?.dbSystem.id){let s=["--","mds","start","heat-wave-cluster",`--db_system_id=${t.dbSystem.id.toString()}`,`--config_profile=${t.profile.profile.toString()}`,"--await_completion=true","--raise_exceptions=true"];await e.addNewShellTask("Start HeatWave Cluster",s,void 0,!1),await S.commands.executeCommand("msg.mds.refreshOciProfiles")}})),e.context.subscriptions.push(S.commands.registerCommand("msg.mds.stopHWCluster",async t=>{if(t?.dbSystem.id){let s=["--","mds","stop","heat-wave-cluster",`--db_system_id=${t.dbSystem.id.toString()}`,`--config_profile=${t.profile.profile.toString()}`,"--await_completion=true","--raise_exceptions=true"];await e.addNewShellTask("Stop HeatWave Cluster",s,void 0,!1),await S.commands.executeCommand("msg.mds.refreshOciProfiles")}})),e.context.subscriptions.push(S.commands.registerCommand("msg.mds.restartHWCluster",async t=>{if(t?.dbSystem.id){let s=["--","mds","restart","heat-wave-cluster",`--db_system_id=${t.dbSystem.id.toString()}`,`--config_profile=${t.profile.profile.toString()}`,"--await_completion=true","--raise_exceptions=true"];await e.addNewShellTask("Restart HeatWave Cluster",s,void 0,!1),await S.commands.executeCommand("msg.mds.refreshOciProfiles")}})),e.context.subscriptions.push(S.commands.registerCommand("msg.mds.rescaleHWCluster",async t=>{t&&t.dbSystem&&t.dbSystem.id&&t.compartment&&t.profile&&await this.showMdsHWClusterDialog(t.dbSystem,t.compartment,t.profile,e)})),e.context.subscriptions.push(S.commands.registerCommand("msg.mds.deleteHWCluster",async t=>{if(t?.dbSystem.id){let s=["--","mds","delete","heat-wave-cluster",`--db_system_id=${t.dbSystem.id.toString()}`,`--config_profile=${t.profile.profile.toString()}`,"--await_completion=true","--raise_exceptions=true"];await e.addNewShellTask("Delete HeatWave Cluster",s,void 0,!1),await S.commands.executeCommand("msg.mds.refreshOciProfiles")}})),e.context.subscriptions.push(S.commands.registerCommand("msg.mds.getComputeInstance",t=>{t&&t.compute.id&&this.showNewJsonDocument(`${t.compute.displayName??"<unknown>"} Info.json`,JSON.stringify(t.compute,null,4))})),e.context.subscriptions.push(S.commands.registerCommand("msg.mds.getBastion",async t=>{if(t&&t.bastion.id)try{let s=await this.shellSession.mds.getMdsBastion(t.profile.profile,t.bastion.id);this.showNewJsonDocument(`${s.name??"<unknown>"} Info.json`,JSON.stringify(s,null,4))}catch(s){await S.window.showErrorMessage(`Error while fetching the bastion data: ${String(s)}`)}})),e.context.subscriptions.push(S.commands.registerCommand("msg.mds.getLoadBalancer",t=>{t&&t.loadBalancer&&this.showNewJsonDocument(`${t.loadBalancer.displayName??"<unknown>"} Info.json`,JSON.stringify(t.loadBalancer,null,4))})),e.context.subscriptions.push(S.commands.registerCommand("msg.showTaskOutput",()=>{Ot.show()})),e.context.subscriptions.push(S.commands.registerCommand("msg.mds.deleteBastion",async t=>{if(t&&t.bastion.id){let s=["--","mds","delete","bastion",`--bastion_id=${t.bastion.id.toString()}`,`--config_profile=${t.profile.profile.toString()}`,"--await_deletion=true","--raise_exceptions=true"];await e.addNewShellTask("Delete Bastion",s),await S.commands.executeCommand("msg.mds.refreshOciProfiles")}})),e.context.subscriptions.push(S.commands.registerCommand("msg.mds.setCurrentBastion",async t=>{if(t&&t.bastion.id){S.window.setStatusBarMessage(`Setting current bastion to ${t.bastion.name} ...`,1e4);try{await this.shellSession.mds.setCurrentBastion({bastionId:t.bastion.id,configProfile:t.profile.profile,interactive:!1,raiseExceptions:!0}),await S.commands.executeCommand("msg.mds.refreshOciProfiles"),S.window.setStatusBarMessage(`Current compartment set to ${t.bastion.name}.`,5e3)}catch(s){await S.window.showErrorMessage(`Error while setting current bastion: ${String(s)}`)}}})),e.context.subscriptions.push(S.commands.registerCommand("msg.mds.refreshOnBastionActiveState",async t=>{if(t&&t.bastion.id){let s=["--","mds","get","bastion",`--bastion_id=${t.bastion.id.toString()}`,`--config_profile=${t.profile.profile.toString()}`,"--await_state=ACTIVE","--raise_exceptions=true"];await e.addNewShellTask("Refresh Bastion",s),await S.commands.executeCommand("msg.mds.refreshOciProfiles")}})),e.context.subscriptions.push(S.commands.registerCommand("msg.mds.deleteComputeInstance",async t=>{if(t&&t.compute.id){let s=["--","mds","delete","compute_instance",`--instance_id=${t.compute.id}`,`--config_profile=${t.profile.profile}`,"--await_deletion=true","--raise_exceptions=true"];await e.addNewShellTask("Delete Compute Instance",s),await S.commands.executeCommand("msg.mds.refreshOciProfiles")}})),e.context.subscriptions.push(S.commands.registerCommand("msg.mds.openBastionSshSession",async t=>{if(t&&t.shellSession&&t.shellSession.mds&&t.compute.id){S.window.setStatusBarMessage("Opening Bastion Session ...",1e4);try{let s=await t.shellSession.mds.createBastionSession(t.profile.profile,t.compute.id,"MANAGED_SSH",t.compute.compartmentId,!0,n=>{n.message&&S.window.setStatusBarMessage(n.message)});if(S.window.setStatusBarMessage("Bastion Session available, opening Terminal ...",5e3),s?.bastionId&&this.isPortForwardingData(s.targetResourceDetails)){let n=S.window.createTerminal(`Terminal ${t.name}`),i=`${s.id}@host.bastion. ${t.profile.region}.oci.oraclecloud.com`,o=s.targetResourceDetails.targetResourcePrivateIpAddress;if(o){let a=s.targetResourceDetails.targetResourcePort;a&&(n.sendText(`ssh -o ProxyCommand="ssh -W %h:%p -p 22 ${i}" -p ${a} opc@${o}`),n.sendText("clear"),n.show())}}}catch(s){await S.window.showErrorMessage(`Error while creating the bastion session: ${String(s)}`)}}})),e.context.subscriptions.push(S.commands.registerCommand("msg.mds.loadToHeatWave",async(t,s)=>{if(t){let n=[];if(s&&s.length>0?s?.forEach(i=>{i instanceof Or&&i.parent.treeItem.details.caption===t.parent.treeItem.details.caption&&n.push(i.name)}):n.push(t.treeItem.name),n.length>0)try{let i=await t?.treeItem.backend.getCatalogObjects("Schema");i&&await this.showMdsHWLoadDataDialog(t.treeItem.connectionId,n,i,e)}catch(i){await S.window.showErrorMessage(`Error retrieving schema list: ${String(i)}`)}}}))};showNewJsonDocument(e,t){let s=`${(0,rl.homedir)()}/${e}`,n=(0,sl.existsSync)(s)?"file":"untitled",i=S.Uri.parse(`${n}:${s}`);S.workspace.openTextDocument(i).then(o=>{S.window.showTextDocument(o,1,!1).then(a=>{a.edit(l=>{let c=o.lineAt(0),u=o.lineAt(o.lineCount-1),d=new S.Range(c.range.start,u.range.end);l.replace(d,t)}).then(()=>{let l=a.selection.start;a.selection=new S.Selection(l,l)}),S.languages.setTextDocumentLanguage(o,"json")})},o=>{S.window.showErrorMessage(`Error while showing the document: ${String(o)}`)})}async showMdsHWClusterDialog(e,t,s,n){let i=S.window.createStatusBarItem();i.text="$(loading~spin) Fetching List of MDS HeatWave Cluster Shapes...",i.show();try{let o=await this.shellSession.mds.listDbSystemShapes("HEATWAVECLUSTER",s.profile,t.id);i.hide();let a=e.heatWaveCluster&&e.heatWaveCluster.lifecycleState!=="DELETED"?"Rescale the MySQL HeatWave Cluster":"Configure the MySQL HeatWave Cluster",l={id:"mdsHWClusterDialog",type:20,title:a,parameters:{shapes:o},values:{clusterSize:e?.heatWaveCluster?.clusterSize,shapeName:e?.heatWaveCluster?.shapeName}},c=await this.dialogManager.showDialog(l,a);if(!c||c.closure!==0)return;if(c.data){let u=c.data.clusterSize,d=c.data.shapeName;if(!e.heatWaveCluster||e.heatWaveCluster.lifecycleState==="DELETED"){let p=["--","mds","create","heat-wave-cluster",`--db_system_id=${e.id.toString()}`,`--cluster_size=${u.toString()}`,`--shape_name=${d}`,`--config_profile=${s.profile.toString()}`,"--await_completion=true","--raise_exceptions=true"];await n.addNewShellTask("Create HeatWave Cluster",p,void 0,!1),await S.commands.executeCommand("msg.mds.refreshOciProfiles")}else if(e.heatWaveCluster&&u===e.heatWaveCluster.clusterSize&&d===e.heatWaveCluster.shapeName)S.window.setStatusBarMessage("The HeatWave Cluster parameters remained unchanged.",6e3);else{let p=["--","mds","update","heat-wave-cluster",`--db_system_id=${e.id.toString()}`,`--cluster_size=${u.toString()}`,`--shape_name=${d}`,`--config_profile=${s.profile.toString()}`,"--await_completion=true","--raise_exceptions=true"];await n.addNewShellTask("Rescale HeatWave Cluster",p,void 0,!1),await S.commands.executeCommand("msg.mds.refreshOciProfiles")}}}catch(o){i.hide(),await S.window.showErrorMessage(`Error while listing MySQL REST services: ${String(o)}`)}}async showMdsHWLoadDataDialog(e,t,s,n){let i="Load Data to HeatWave",o={id:"mdsHWLoadDataDialog",type:21,title:i,parameters:{},values:{selectedSchemas:t,allSchemas:s}},a=await this.dialogManager.showDialog(o,i);if(!(!a||a.closure!==0)&&a.data){let l=a.data.schemas,c=a.data.mode,u=a.data.output,d=a.data.disableUnsupportedColumns,p=a.data.optimizeLoadParallelism,f=a.data.enableMemoryCheck,C=a.data.sqlMode,x=a.data.excludeList,E=["--","mds","util","heat-wave-load-data",`--schemas=${l.join(",")}`,`--mode=${c}`,`--output=${u}`,`--disable-unsupported-columns=${d?"1":"0"}`,`--optimize-load-parallelism=${p?"1":"0"}`,`--enable-memory-check=${f?"1":"0"}`,`--sql-mode="${C}"`,`--exclude-list=${x}`,"--raise-exceptions=1","--interactive=1"];await n.addNewShellTask("Load Data to HeatWave Cluster",E,e),await S.window.showInformationMessage("The data load to the HeatWave cluster operation has finished.")}}async showMdsEndpointDialog(e,t,s,n){let i=S.window.createStatusBarItem();i.text="$(loading~spin) Fetching List of Compute Shapes...",i.show();try{let a=(await this.shellSession.mds.listComputeShapes(s.profile,e.compartmentId)).map((d,p,f)=>d.shape);i.hide();let l="MySQL Endpoint Configuration",c={id:"mdsEndpointDialog",type:22,title:l,parameters:{shapes:a},values:{instanceName:`${e?.displayName} Endpoint`,shapeName:"VM.Standard.E4.Flex",cpuCount:1,memorySize:16,mysqlUserName:"dba"}},u=await this.dialogManager.showDialog(c,l);if(!u||u.closure!==0)return;if(u.data){let d=u.data.instanceName,p=u.data.shapeName,f=u.data.cpuCount,C=u.data.memorySize,x=u.data.mysqlUserName,E=u.data.mysqlUserPassword,N=u.data.createDbConnection,z=u.data.publicIp,ee=u.data.domainName,K=u.data.sslCertificate,te=u.data.portForwarding,_e=u.data.mrs,Ye=u.data.jwtSecret,Me=["--","mds","util","create-endpoint",`--db_system_id=${e.id}`,`--config_profile=${s.profile}`,`--instance_name=${d}`,`--shape=${p}`,`--cpu_count=${f}`,`--memory_size=${C}`,`--mysql_user_name="${x}"`,`--public_ip=${z?"true":"false"}`,`--port_forwarding=${te?"true":"false"}`,`--mrs=${_e?"true":"false"}`,`--domain_name=${ee}`,`--ssl_cert=${K?"true":"false"}`,"--raise_exceptions=true"];if(Ye!==""&&Me.push(`--jwt_secret="${Ye}"`),await n.addNewShellTask("Create new Router Endpoint",Me,void 0,!0,[E]),await S.commands.executeCommand("msg.mds.refreshOciProfiles"),N){let St={id:0,dbType:"MySQL",caption:d,description:"MySQL Router Connection",useSSH:!1,useMDS:!1,options:{scheme:"mysql",host:ee??z,port:6446,user:x,schema:"","ssl-mode":void 0,compression:"PREFERRED"}};Se.dbConnections.addDbConnection(R.currentProfileId,St,"").then(uo=>{uo!==void 0&&b.broadcastRequest(void 0,"refreshConnections",void 0)}).catch(uo=>{S.window.showErrorMessage(`Error while adding the DB Connection: ${String(uo.message)}`)})}}}catch(o){i.hide(),await S.window.showErrorMessage(`Error while listing Compute Shapes: ${String(o)}`)}}isPortForwardingData(e){return e.targetResourcePrivateIpAddress!==void 0}};var we=k(require("fs"),1),ue=k(require("os"),1),V=k(require("path"),1),g=require("vscode");var gi=class{moduleSessionLookupId="";async startSession(e,t){this.moduleSessionLookupId=`dbSession.${e}`;let s=await h.get.sendRequest({requestType:"gui.db.start_session",parameters:{args:{connection:t}}});R.setModuleSessionId(this.moduleSessionLookupId,s.result.moduleSessionId)}async closeSession(){this.moduleSessionId&&(await h.get.sendRequest({requestType:"gui.db.close_session",parameters:{args:{moduleSessionId:this.moduleSessionId}}}),R.setModuleSessionId(this.moduleSessionLookupId))}async getCatalogObjects(e,t){if(!this.moduleSessionId)return[];let s=await h.get.sendRequest({requestType:"gui.db.get_catalog_object_names",parameters:{args:{type:e,filter:t,moduleSessionId:this.moduleSessionId}}}),n=[];return s.forEach(i=>{n.push(...i.result)}),n}async getSchemaObjects(e,t,s,n){if(!this.moduleSessionId)return[];let i=await h.get.sendRequest({requestType:"gui.db.get_schema_object_names",parameters:{args:{type:t,filter:n,schemaName:e,routineType:s,moduleSessionId:this.moduleSessionId}}}),o=[];return i.forEach(a=>{o.push(...a.result)}),o}async getTableObjects(e,t,s,n){if(!this.moduleSessionId)return[];let i=await h.get.sendRequest({requestType:"gui.db.get_table_object_names",parameters:{args:{type:s,filter:n,schemaName:e,tableName:t,moduleSessionId:this.moduleSessionId}}}),o=[];return i.forEach(a=>{o.push(...a.result)}),o}get moduleSessionId(){return R.moduleSessionId(this.moduleSessionLookupId)}};var fi=class{moduleSessionLookupId="";async configure(e,t,s,n){await h.get.sendRequest({requestType:"mrs.configure",parameters:{args:{moduleSessionId:this.moduleSessionId,enableMrs:e,updateIfAvailable:s,options:n,allowRecreationOnMajorUpgrade:t}}})}async status(){return(await h.get.sendRequest({requestType:"mrs.status",parameters:{args:{moduleSessionId:this.moduleSessionId}}})).result}async listServices(){return(await h.get.sendRequest({requestType:"mrs.list.services",parameters:{kwargs:{moduleSessionId:this.moduleSessionId}}})).result}async addService(e,t,s,n,i,o,a,l,c,u,d){return(await h.get.sendRequest({requestType:"mrs.add.service",parameters:{kwargs:{urlContextRoot:e,urlHostName:s,enabled:i,moduleSessionId:this.moduleSessionId,urlProtocol:t,authPath:a,comments:n,options:o,authCompletedUrl:l,authCompletedUrlValidation:c,authCompletedPageContent:u,authApps:d}}},!0,["options"])).result}async updateService(e,t,s,n){await h.get.sendRequest({requestType:"mrs.update.service",parameters:{kwargs:{serviceId:e,urlContextRoot:t,urlHostName:s,value:n,moduleSessionId:this.moduleSessionId}}},!0,["options"])}async deleteService(e){await h.get.sendRequest({requestType:"mrs.delete.service",parameters:{kwargs:{serviceId:e,urlContextRoot:null,urlHostName:null,moduleSessionId:this.moduleSessionId}}})}async getService(e,t,s,n,i){return(await h.get.sendRequest({requestType:"mrs.get.service",parameters:{kwargs:{serviceId:e,urlContextRoot:t,urlHostName:s,getDefault:n,autoSelectSingle:i,moduleSessionId:this.moduleSessionId}}})).result}async setCurrentService(e){await h.get.sendRequest({requestType:"mrs.set.current_service",parameters:{kwargs:{serviceId:e,moduleSessionId:this.moduleSessionId}}})}async getCurrentServiceMetadata(){return(await h.get.sendRequest({requestType:"mrs.get.current_service_metadata",parameters:{kwargs:{moduleSessionId:this.moduleSessionId}}})).result}async getAuthVendors(){return(await h.get.sendRequest({requestType:"mrs.get.authentication_vendors",parameters:{kwargs:{moduleSessionId:this.moduleSessionId}}})).result}async addAuthApp(e,t,s){return(await h.get.sendRequest({requestType:"mrs.add.authentication_app",parameters:{args:{serviceId:e,appName:t.name},kwargs:{authVendorId:t.authVendorId,description:t.description,url:t.url,urlDirectAuth:t.urlDirectAuth,accessToken:t.accessToken,appId:t.appId,limitToRegisteredUsers:t.limitToRegisteredUsers,registeredUsers:s,defaultRoleId:t.defaultRoleId,moduleSessionId:this.moduleSessionId}}})).result}async getAuthApps(e){return(await h.get.sendRequest({requestType:"mrs.list.authentication_apps",parameters:{args:{serviceId:e},kwargs:{moduleSessionId:this.moduleSessionId}}})).result}async getAuthApp(e){return(await h.get.sendRequest({requestType:"mrs.get.authentication_app",parameters:{args:{appId:e,moduleSessionId:this.moduleSessionId}}})).result}async deleteAuthApp(e){await h.get.sendRequest({requestType:"mrs.delete.authentication_app",parameters:{kwargs:{appId:e,moduleSessionId:this.moduleSessionId}}})}async updateAuthApp(e,t){await h.get.sendRequest({requestType:"mrs.update.authentication_app",parameters:{kwargs:{appId:e,value:t,moduleSessionId:this.moduleSessionId}}})}async listUsers(e,t){return(await h.get.sendRequest({requestType:"mrs.list.users",parameters:{kwargs:{serviceId:e,authAppId:t,moduleSessionId:this.moduleSessionId}}})).result}async deleteUser(e){await h.get.sendRequest({requestType:"mrs.delete.user",parameters:{args:{userId:e,moduleSessionId:this.moduleSessionId}}})}async addUser(e,t,s,n,i,o,a,l,c){await h.get.sendRequest({requestType:"mrs.add.user",parameters:{kwargs:{authAppId:e,name:t,email:s,vendorUserId:n,loginPermitted:i,mappedUserId:o,appOptions:a,authString:l,userRoles:c,moduleSessionId:this.moduleSessionId}}})}async updateUser(e,t,s){await h.get.sendRequest({requestType:"mrs.update.user",parameters:{kwargs:{userId:e,value:t,userRoles:s,moduleSessionId:this.moduleSessionId}}})}async listSchemas(e){return(await h.get.sendRequest({requestType:"mrs.list.schemas",parameters:{args:{serviceId:e},kwargs:{moduleSessionId:this.moduleSessionId}}})).result}async getSchema(e,t,s,n,i){return(await h.get.sendRequest({requestType:"mrs.get.schema",parameters:{kwargs:{schemaId:e??null,serviceId:t??null,requestPath:s??null,schemaName:n??null,autoSelectSingle:i??null,moduleSessionId:this.moduleSessionId}}})).result}async deleteSchema(e,t){await h.get.sendRequest({requestType:"mrs.delete.schema",parameters:{kwargs:{schemaId:e,serviceId:t,schemaName:null,moduleSessionId:this.moduleSessionId}}})}async addSchema(e,t,s,n,i,o,a){return(await h.get.sendRequest({requestType:"mrs.add.schema",parameters:{kwargs:{serviceId:e,schemaName:t,requestPath:s,requiresAuth:n,enabled:!0,itemsPerPage:o,comments:a,options:i,moduleSessionId:this.moduleSessionId}}})).result}async updateSchema(e,t,s,n,i,o,a,l,c){await h.get.sendRequest({requestType:"mrs.update.schema",parameters:{kwargs:{moduleSessionId:this.moduleSessionId,schemaId:e,value:{serviceId:t,schemaName:s,requestPath:n,requiresAuth:i,enabled:o,itemsPerPage:a,comments:l,options:c}}}})}async addDbObject(e,t,s,n,i,o,a,l,c,u,d,p,f,C,x,E,N,z,ee){return(await h.get.sendRequest({requestType:"mrs.add.db_object",parameters:{kwargs:{moduleSessionId:this.moduleSessionId,dbObjectName:e,dbObjectType:t,schemaId:C,schemaName:x,autoAddSchema:s,requestPath:n,enabled:i,crudOperations:o,crudOperationFormat:a,requiresAuth:l,itemsPerPage:p===null?void 0:p,rowUserOwnershipEnforced:c,rowUserOwnershipColumn:f,comments:E,mediaType:N,autoDetectMediaType:u,authStoredProcedure:z,options:d,objects:ee}}})).result}async updateDbObject(e,t,s,n,i){await h.get.sendRequest({requestType:"mrs.update.db_object",parameters:{kwargs:{moduleSessionId:this.moduleSessionId,dbObjectId:e,schemaId:n,dbObjectName:t,requestPath:s,value:i}}})}async listDbObjects(e){return(await h.get.sendRequest({requestType:"mrs.list.db_objects",parameters:{kwargs:{schemaId:e,moduleSessionId:this.moduleSessionId}}})).result}async deleteDbObject(e){await h.get.sendRequest({requestType:"mrs.delete.db_object",parameters:{args:{},kwargs:{dbObjectId:e,moduleSessionId:this.moduleSessionId}}})}async addContentSet(e,t,s,n,i,o,a,l,c){return(await h.get.sendRequest({requestType:"mrs.add.content_set",parameters:{args:{serviceId:i,contentDir:e},kwargs:{moduleSessionId:this.moduleSessionId,requestPath:t,requiresAuth:s,comments:o,options:n,enabled:a,replaceExisting:l}},onData:d=>{c&&d.result.info&&c(d.result.info)}})).result}async getServiceRequestPathAvailability(e,t){return(await h.get.sendRequest({requestType:"mrs.get.service_request_path_availability",parameters:{kwargs:{moduleSessionId:this.moduleSessionId,serviceId:e,requestPath:t}}})).result}async listContentSets(e,t){return(await h.get.sendRequest({requestType:"mrs.list.content_sets",parameters:{args:{serviceId:e},kwargs:{moduleSessionId:this.moduleSessionId,requestPath:t}}})).result}async listContentFiles(e,t){return(await h.get.sendRequest({requestType:"mrs.list.content_files",parameters:{args:{contentSetId:e},kwargs:{moduleSessionId:this.moduleSessionId,includeEnableState:t}}})).result}async deleteContentSet(e){await h.get.sendRequest({requestType:"mrs.delete.content_set",parameters:{kwargs:{moduleSessionId:this.moduleSessionId,contentSetId:e}}})}get moduleSessionId(){return R.moduleSessionId(this.moduleSessionLookupId)}async dumpSchema(e,t,s,n,i){await h.get.sendRequest({requestType:"mrs.dump.schema",parameters:{args:{path:e},kwargs:{moduleSessionId:this.moduleSessionId,serviceId:t,serviceName:s,schemaId:n,schemaName:i}}})}async dumpObject(e,t,s,n,i,o,a){await h.get.sendRequest({requestType:"mrs.dump.object",parameters:{args:{path:e},kwargs:{moduleSessionId:this.moduleSessionId,serviceId:t,serviceName:s,schemaId:n,schemaName:i,objectId:o,objectName:a}}})}async loadSchema(e,t,s){await h.get.sendRequest({requestType:"mrs.load.schema",parameters:{args:{path:e},kwargs:{moduleSessionId:this.moduleSessionId,serviceId:t,serviceName:s}}})}async loadObject(e,t,s,n,i){await h.get.sendRequest({requestType:"mrs.load.object",parameters:{args:{path:e},kwargs:{moduleSessionId:this.moduleSessionId,serviceId:t,serviceName:s,schemaId:n,schemaName:i}}})}async listRoles(e){return(await h.get.sendRequest({requestType:"mrs.list.roles",parameters:{args:{serviceId:e,moduleSessionId:this.moduleSessionId}}})).result}async listUserRoles(e){return(await h.get.sendRequest({requestType:"mrs.list.user_roles",parameters:{args:{userId:e,moduleSessionId:this.moduleSessionId}}})).result}async listRouterIds(e){return(await h.get.sendRequest({requestType:"mrs.list.router_ids",parameters:{args:{seenWithin:e,moduleSessionId:this.moduleSessionId}}})).result}async listRouters(e){return(await h.get.sendRequest({requestType:"mrs.list.routers",parameters:{args:{activeWhenSeenWithin:e,moduleSessionId:this.moduleSessionId}}})).result}async deleteRouter(e){await h.get.sendRequest({requestType:"mrs.delete.router",parameters:{args:{routerId:e,moduleSessionId:this.moduleSessionId}}})}async getSdkBaseClasses(e,t){return(await h.get.sendRequest({requestType:"mrs.get.sdk_base_classes",parameters:{kwargs:{sdkLanguage:e,prepareForRuntime:t,moduleSessionId:this.moduleSessionId}}})).result}async getSdkServiceClasses(e,t,s,n){return(await h.get.sendRequest({requestType:"mrs.get.sdk_service_classes",parameters:{kwargs:{serviceId:e,serviceUrl:n,sdkLanguage:t,prepareForRuntime:s,moduleSessionId:this.moduleSessionId}}})).result}async getRuntimeManagementCode(){return(await h.get.sendRequest({requestType:"mrs.get.runtime_management_code",parameters:{kwargs:{moduleSessionId:this.moduleSessionId}}})).result}async dumpSdkServiceFiles(e,t){return(await h.get.sendRequest({requestType:"mrs.dump.sdk_service_files",parameters:{kwargs:{directory:e,options:t,moduleSessionId:this.moduleSessionId}}})).result}async getSdkOptions(e){return(await h.get.sendRequest({requestType:"mrs.get.sdk_options",parameters:{args:{directory:e}}})).result}async getTableColumnsWithReferences(e,t,s,n,i,o){return(await h.get.sendRequest({requestType:"mrs.get.table_columns_with_references",parameters:{args:{dbObjectId:s,schemaId:n,requestPath:e,dbObjectName:t},kwargs:{moduleSessionId:this.moduleSessionId,schemaName:i,dbObjectType:o}}})).result}async getDbObjectParameters(e,t,s,n){return(await h.get.sendRequest({requestType:"mrs.get.db_object_parameters",parameters:{args:{},kwargs:{dbObjectId:s,dbSchemaName:t,dbObjectName:e,dbType:n,moduleSessionId:this.moduleSessionId}}})).result}async getDbFunctionReturnType(e,t){return(await h.get.sendRequest({requestType:"mrs.get.db_function_return_type",parameters:{args:{dbSchemaName:t,dbObjectName:e},kwargs:{moduleSessionId:this.moduleSessionId}}})).result}async getDbObject(e,t,s,n){return(await h.get.sendRequest({requestType:"mrs.get.db_object",parameters:{args:{},kwargs:{dbObjectId:e,schemaId:t,schemaName:s,absoluteRequestPath:n,moduleSessionId:this.moduleSessionId}}})).result}async getObjects(e){return(await h.get.sendRequest({requestType:"mrs.get.objects",parameters:{args:{dbObjectId:e},kwargs:{moduleSessionId:this.moduleSessionId}}})).result}async getObjectFieldsWithReferences(e){return(await h.get.sendRequest({requestType:"mrs.get.object_fields_with_references",parameters:{args:{objectId:e},kwargs:{moduleSessionId:this.moduleSessionId}}})).result}};var Te=class extends gi{mds=new mr;mrs=new fi;get hasSession(){return this.moduleSessionId!==void 0}async startSession(e){if(this.moduleSessionLookupId=`sqlEditor.${e}`,this.mrs.moduleSessionLookupId=this.moduleSessionLookupId,!this.hasSession){let t=await h.get.sendRequest({requestType:"gui.sqleditor.start_session",parameters:{args:{}}});t.result?.moduleSessionId&&R.setModuleSessionId(this.moduleSessionLookupId,t.result.moduleSessionId)}}async closeSession(){let e=this.moduleSessionId;e&&(await h.get.sendRequest({requestType:"gui.sqleditor.close_session",parameters:{args:{moduleSessionId:e}}}),R.setModuleSessionId(this.moduleSessionLookupId))}async getGuiModuleDisplayInfo(){await h.get.sendRequest({requestType:"gui.sqleditor.get_gui_module_display_info",parameters:{args:{}}})}async isGuiModuleBackend(){return(await h.get.sendRequest({requestType:"gui.sqleditor.is_gui_module_backend",parameters:{args:{}}})).result}async openConnection(e,t,s){let n=this.moduleSessionId;if(n)return(await h.get.sendRequest({requestId:t,requestType:"gui.sqleditor.open_connection",parameters:{args:{moduleSessionId:n,dbConnectionId:e}},onData:s})).result}async execute(e,t,s,n){let i=this.moduleSessionId;if(i){let o=await h.get.sendRequest({requestType:"gui.sqleditor.execute",requestId:s,parameters:{args:{moduleSessionId:i,sql:e,params:t!==void 0&&t.length>0?t:void 0,options:{rowPacketSize:Qe.get("sql.rowPacketSize",1e3)}}},onData:n}),a={};return o.forEach(l=>{l.result.executionTime&&(a.executionTime=l.result.executionTime),l.result.rows&&(a.rows||(a.rows=[]),a.rows.push(...l.result.rows)),l.result.columns&&(a.columns||(a.columns=[]),a.columns.push(...l.result.columns)),l.result.totalRowCount&&(a.totalRowCount=l.result.totalRowCount)}),a}}async reconnect(){let e=this.moduleSessionId;e&&await h.get.sendRequest({requestType:"gui.sqleditor.reconnect",parameters:{args:{moduleSessionId:e}}})}async killQuery(){let e=this.moduleSessionId;e&&await h.get.sendRequest({requestType:"gui.sqleditor.kill_query",parameters:{args:{moduleSessionId:e}}})}async setAutoCommit(e){let t=this.moduleSessionId;t&&await h.get.sendRequest({requestType:"gui.sqleditor.set_auto_commit",parameters:{args:{moduleSessionId:t,state:e}}})}async getAutoCommit(){let e=this.moduleSessionId;if(e)return(await h.get.sendRequest({requestType:"gui.sqleditor.get_auto_commit",parameters:{args:{moduleSessionId:e}}})).result}async getCurrentSchema(){let e=this.moduleSessionId;if(e)return(await h.get.sendRequest({requestType:"gui.sqleditor.get_current_schema",parameters:{args:{moduleSessionId:e}}})).result}async setCurrentSchema(e){let t=this.moduleSessionId;t&&await h.get.sendRequest({requestType:"gui.sqleditor.set_current_schema",parameters:{args:{moduleSessionId:t,schemaName:e}}})}async sendReply(e,t,s,n){n=n??this.moduleSessionId,n&&await h.get.sendRequest({requestType:"prompt_reply",parameters:{moduleSessionId:n,requestId:e,type:t,reply:s}},!1)}};var dm=k(um(),1),Si=require("vscode");var k1=r=>r?.prompt!==void 0,er=async(r,e,t)=>{await r.openConnection(e,void 0,(s,n)=>{let i=s.result;k1(i)?i.type==="password"?Si.window.showInputBox({title:i.prompt,password:!0}).then(o=>{o!==void 0?r.sendReply(n,"OK",o):r.sendReply(n,"CANCEL","")}):i.prompt&&Si.window.showInputBox({title:dm.default.ansiToText(i.prompt),password:!1,value:"N"}).then(o=>{o?r.sendReply(n,"OK",o):r.sendReply(n,"CANCEL","")}):t&&t(s.requestState.msg)})},hm=async(r,e,t)=>{let s=Si.window.createStatusBarItem();try{s.text="$(loading~spin) Starting Database Session ...",s.show(),s.text="$(loading~spin) Starting Database Session ...",await r.startSession(String(e)+t),s.text="$(loading~spin) Opening Database Connection ...",await er(r,e,n=>{s.text="$(loading~spin) "+n}),s.hide()}catch(n){throw s.hide(),await r.closeSession(),new Error(`A error occurred when trying to open the database connection. Error: ${n instanceof Error?n.message:String(n)}`)}};var bi=class{#e;#t;#r;setup=e=>{this.#r=e,e.context.subscriptions.push(g.commands.registerCommand("msg.mrs.configureMySQLRestService",async t=>{await this.configureMrs(t)})),e.context.subscriptions.push(g.commands.registerCommand("msg.mrs.disableMySQLRestService",async t=>{await this.configureMrs(t?.parent,!1)})),e.context.subscriptions.push(g.commands.registerCommand("msg.mrs.enableMySQLRestService",async t=>{await this.configureMrs(t?.parent,!0)})),e.context.subscriptions.push(g.commands.registerCommand("msg.mrs.bootstrapLocalRouter",async t=>{await this.bootstrapLocalRouter(e.context,t)})),e.context.subscriptions.push(g.commands.registerCommand("msg.mrs.startLocalRouter",async t=>{await this.startStopLocalRouter(e.context,t)})),e.context.subscriptions.push(g.commands.registerCommand("msg.mrs.killLocalRouters",t=>{let s=g.window.terminals.find(n=>n.name==="MySQL Router MRS");if(s===void 0&&(s=g.window.createTerminal("MySQL Router MRS")),s){s.show(),ue.default.platform()==="win32"?s.sendText("taskkill /IM mysqlrouter.exe /F",!0):s.sendText("killall -9 mysqlrouter",!0);try{we.default.unlinkSync(V.default.join(this.getRouterConfigDir(e.context,t),"mysqlrouter.pid"))}catch{}}})),e.context.subscriptions.push(g.commands.registerCommand("msg.mrs.stopLocalRouter",async t=>{await this.startStopLocalRouter(e.context,t,!1)})),e.context.subscriptions.push(g.commands.registerCommand("msg.mrs.docs",()=>{this.browseDocs()})),e.context.subscriptions.push(g.commands.registerCommand("msg.mrs.docs.service",()=>{this.browseDocs("rest-service-properties")})),e.context.subscriptions.push(g.commands.registerCommand("msg.mrs.deleteRouter",async t=>{if(t){let s=t.treeItem;if(await g.window.showInformationMessage(`Are you sure the MRS router ${s.value.address} should be deleted?`,"Yes","No")==="Yes")try{await s.backend?.mrs.deleteRouter(s.value.id),await g.commands.executeCommand("msg.refreshConnections"),F("The MRS Router has been deleted successfully.")}catch(i){g.window.showErrorMessage(`Error deleting the MRS Router: ${String(i)}`)}}})),e.context.subscriptions.push(g.commands.registerCommand("msg.mrs.addService",t=>{if(t){let s=t.treeItem,n=String(s.connectionId),i=this.#r.currentProvider;i&&i.runCommand("job",[{requestType:"showModule",parameter:T},{requestType:"showPage",parameter:{module:T,page:n}},{requestType:"showMrsServiceDialog",parameter:void 0}],"newConnection")}})),e.context.subscriptions.push(g.commands.registerCommand("msg.mrs.editService",t=>{if(t){let s=t.treeItem,n=String(s.connectionId),i=this.#r.currentProvider;i&&i.runCommand("job",[{requestType:"showModule",parameter:T},{requestType:"showPage",parameter:{module:T,page:n}},{requestType:"showMrsServiceDialog",parameter:s.value}],"newConnection")}})),e.context.subscriptions.push(g.commands.registerCommand("msg.mrs.deleteService",async t=>{if(t){let s=t.treeItem;if(await g.window.showInformationMessage(`Are you sure the MRS service ${s.value.urlContextRoot} should be deleted?`,"Yes","No")==="Yes")try{await s.backend?.mrs.deleteService(s.value.id),await g.commands.executeCommand("msg.refreshConnections"),F("The MRS service has been deleted successfully.")}catch(i){g.window.showErrorMessage(`Error adding the MRS service: ${String(i)}`)}}})),e.context.subscriptions.push(g.commands.registerCommand("msg.mrs.setCurrentService",async t=>{if(t)try{let s=t.treeItem;await s.backend?.mrs.setCurrentService(s.value.id),await g.commands.executeCommand("msg.refreshConnections"),F("The MRS service has been set as the new default service.")}catch(s){g.window.showErrorMessage(`Error setting the default MRS service: ${String(s)}`)}})),e.context.subscriptions.push(g.commands.registerCommand("msg.mrs.exportServiceSdk",async t=>{if(t&&t.treeItem&&t.treeItem.value&&this.#r.currentProvider){let s=t.treeItem;try{let n=await g.window.showSaveDialog({title:"Export REST Service SDK Files...",defaultUri:g.Uri.file(`${ue.default.homedir()}/${ho(s.value.urlContextRoot)}.mrs.sdk`),saveLabel:"Export SDK Files"});if(n!==void 0){let i=t.parent.parent.id;this.#r.currentProvider.runCommand("job",[{requestType:"showModule",parameter:T},{requestType:"showPage",parameter:{module:T,page:i}},{requestType:"showMrsSdkExportDialog",parameter:{serviceId:s.value.id,connectionId:i,connectionDetails:t.parent.parent.treeItem.details,directory:n.fsPath}}],"newConnection")}}catch{}}})),e.context.subscriptions.push(g.commands.registerCommand("msg.mrs.rebuildMrsSdk",async t=>{if(t){let s=await e.determineConnection("MySQL");if(s){let n=new Te,i=g.window.createStatusBarItem();try{i.text="$(loading~spin) Starting Database Session ...",i.show(),i.text="$(loading~spin) Starting Database Session ...",await n.startSession(String(s.treeItem.details.id)+"MrsSdkGeneration"),i.text="$(loading~spin) Opening Database Connection ...",await er(n,s.treeItem.details.id,o=>{i.text="$(loading~spin) "+o}),await n.mrs.dumpSdkServiceFiles(t.fsPath),F("MRS SDK Files exported successfully.")}catch(o){g.window.showErrorMessage(`A error occurred when trying to show the MRS Static Content Set Dialog. Error: ${o instanceof Error?o.message:String(o)}`)}finally{i.hide(),await n.closeSession()}}}})),e.context.subscriptions.push(g.commands.registerCommand("msg.mrs.deleteSchema",async t=>{if(t){let s=t.treeItem;if(await g.window.showInformationMessage(`Are you sure the MRS schema ${s.value.name} should be deleted?`,"Yes","No")==="Yes")try{await t.treeItem.backend.mrs.deleteSchema(s.value.id,s.value.serviceId),await g.commands.executeCommand("msg.refreshConnections"),F("The MRS schema has been deleted successfully.")}catch(i){g.window.showErrorMessage(`Error removing an MRS schema: ${String(i)}`)}}})),e.context.subscriptions.push(g.commands.registerCommand("msg.mrs.editSchema",t=>{if(t){let s=t.treeItem,n=String(s.connectionId),i=this.#r.currentProvider;i&&i.runCommand("job",[{requestType:"showModule",parameter:T},{requestType:"showPage",parameter:{module:T,page:n}},{requestType:"showMrsSchemaDialog",parameter:{schemaName:s.value.name,schema:s.value}}],"newConnection")}})),e.context.subscriptions.push(g.commands.registerCommand("msg.mrs.addSchema",async t=>{if(t){let s=t.treeItem,n=String(s.connectionId),i=this.#r.currentProvider;i&&((await s.backend.mrs.listServices()).length>0?i.runCommand("job",[{requestType:"showModule",parameter:T},{requestType:"showPage",parameter:{module:T,page:n}},{requestType:"showMrsSchemaDialog",parameter:{schemaName:s.schema}}],"newConnection"):g.window.showErrorMessage("Please create a REST Service before adding a DB Schema."))}})),e.context.subscriptions.push(g.commands.registerCommand("msg.mrs.copyDbObjectRequestPath",async t=>{if(t){let s=t.treeItem;if(s.value){let n=s.value;await g.env.clipboard.writeText((n.hostCtx??"")+(n.schemaRequestPath??"")+n.requestPath),F("The DB Object was copied to the system clipboard")}}})),e.context.subscriptions.push(g.commands.registerCommand("msg.mrs.openDbObjectRequestPath",async t=>{if(t){let s=t.treeItem;if(s.value){let n=s.value,i=(n.hostCtx??"")+(n.schemaRequestPath??"")+n.requestPath;i.startsWith("/")?i=`https://localhost:8443${i}`:i=`https://${i}`,await g.env.openExternal(g.Uri.parse(i))}}})),e.context.subscriptions.push(g.commands.registerCommand("msg.mrs.openContentFileRequestPath",async t=>{if(t){let s=t.treeItem;if(s.value){let n=s.value,i=(n.hostCtx??"")+(n.contentSetRequestPath??"")+n.requestPath;i.startsWith("/")?i=`https://localhost:8443${i}`:i=`https://${i}`,await g.env.openExternal(g.Uri.parse(i))}}})),e.context.subscriptions.push(g.commands.registerCommand("msg.mrs.deleteDbObject",async t=>{if(t){let s=t.treeItem;if(s.value){let n=s.backend;if(await cs(`Are you sure you want to delete the REST DB Object ${s.value.name}?`,"Delete DB Object","This operation cannot be reverted!"))try{await n.mrs.deleteDbObject(s.value.id),g.commands.executeCommand("msg.refreshConnections"),F(`The REST DB Object ${s.value.name} has been deleted.`)}catch(o){g.window.showErrorMessage(`Error deleting the REST DB Object: ${String(o)}`)}}}})),e.context.subscriptions.push(g.commands.registerCommand("msg.mrs.editAuthApp",t=>{if(t){let s=t.treeItem,n=String(s.connectionId),i=this.#r.currentProvider;i&&i.runCommand("job",[{requestType:"showModule",parameter:T},{requestType:"showPage",parameter:{module:T,page:n}},{requestType:"showMrsAuthAppDialog",parameter:{authApp:s.value}}],"newConnection")}})),e.context.subscriptions.push(g.commands.registerCommand("msg.mrs.addAuthApp",t=>{try{if(t){let s=t.treeItem;if(s.value){let n=String(s.connectionId),i=this.#r.currentProvider;i&&i.runCommand("job",[{requestType:"showModule",parameter:T},{requestType:"showPage",parameter:{module:T,page:n}},{requestType:"showMrsAuthAppDialog",parameter:{service:s.value}}],"newConnection")}}}catch(s){g.window.showErrorMessage(`Error adding a new MRS Authentication App: ${String(s)}`)}})),e.context.subscriptions.push(g.commands.registerCommand("msg.mrs.deleteAuthApp",async t=>{try{if(t){let s=t.treeItem;if(s.value?.name){let n=s.backend;await g.window.showInformationMessage(`Are you sure the MRS authentication app ${s.value.name} should be deleted?`,"Yes","No")==="Yes"&&(await n.mrs.deleteAuthApp(s.value.id),g.commands.executeCommand("msg.refreshConnections"),F(`The MRS Authentication App ${s.value.name} has been deleted.`))}}}catch(s){g.window.showErrorMessage(`Error deleting the MRS Authentication App: ${String(s)}`)}})),e.context.subscriptions.push(g.commands.registerCommand("msg.mrs.deleteUser",async t=>{try{if(t){let s=t.treeItem;if(s.value.id&&s.value.name){let n=s.backend;await g.window.showInformationMessage(`Are you sure the MRS user ${s.value.name??"unknown"} should be deleted?`,"Yes","No")==="Yes"&&(await n.mrs.deleteUser(s.value.id),g.commands.executeCommand("msg.refreshConnections"),F(`The MRS User ${s.value.name} has been deleted.`))}}}catch(s){g.window.showErrorMessage(`Error deleting the MRS User: ${String(s)}`)}})),e.context.subscriptions.push(g.commands.registerCommand("msg.mrs.addUser",t=>{if(t){let s=t.treeItem;if(s.value){let n=String(s.connectionId),i=this.#r.currentProvider;i&&i.runCommand("job",[{requestType:"showModule",parameter:T},{requestType:"showPage",parameter:{module:T,page:n}},{requestType:"showMrsUserDialog",parameter:{authApp:s.value}}],"newConnection")}}})),e.context.subscriptions.push(g.commands.registerCommand("msg.mrs.editUser",t=>{let s=t?.treeItem,n=s?.backend;try{n&&s.value&&s.value.authAppId&&n.mrs.getAuthApp(s.value.authAppId).then(i=>{if(i){let o=String(s.connectionId),a=this.#r.currentProvider;a&&a.runCommand("job",[{requestType:"showModule",parameter:T},{requestType:"showPage",parameter:{module:T,page:o}},{requestType:"showMrsUserDialog",parameter:{authApp:i,user:s.value}}],"newConnection")}else throw new Error("Unable to find authApp")}).catch(i=>{g.window.showErrorMessage(`Error adding a new User: ${String(i)}`)})}catch(i){g.window.showErrorMessage(`Error adding a new User: ${String(i)}`)}})),e.context.subscriptions.push(g.commands.registerCommand("msg.mrs.addFolderAsContentSet",async t=>{if(t){let s=await e.determineConnection("MySQL");if(s){let n=this.#r.currentProvider;n&&n.runCommand("job",[{requestType:"showModule",parameter:T},{requestType:"showPage",parameter:{module:T,page:String(s.treeItem.details.id)}},{requestType:"showMrsContentSetDialog",parameter:{directory:t.fsPath}}],"newConnection")}}})),e.context.subscriptions.push(g.commands.registerCommand("msg.mrs.deleteContentSet",async t=>{if(t){let s=t.treeItem;if(s.value){let n=s.backend;if(await cs(`Are you sure you want to drop the static content set ${s.value.requestPath}?`,"Delete Static Content Set","This operation cannot be reverted!"))try{await n.mrs.deleteContentSet(s.value.id),g.commands.executeCommand("msg.refreshConnections"),F("The MRS static content set has been deleted successfully.")}catch(o){g.window.showErrorMessage(`Error deleting the Static Content Set: ${String(o)}`)}}}})),e.context.subscriptions.push(g.commands.registerCommand("msg.mrs.dumpSchemaToJSONFile",async t=>{if(t){let s=t.treeItem;if(s.value){let n=s.backend;await g.window.showSaveDialog({title:"REST Schema Dump...",saveLabel:"Select the target file",defaultUri:g.Uri.file(`${ue.default.homedir()}/${ho(s.value.requestPath)}.mrs.json`),filters:{JSON:["mrs.json"]}}).then(async i=>{if(i!==void 0)try{let o=i.fsPath;await n.mrs.dumpSchema(o,s.value.serviceId,void 0,s.value.id),F("The REST Schema has been dumped successfully.")}catch(o){g.window.showErrorMessage(`Error dumping the REST Schema: ${String(o)}`)}})}}})),e.context.subscriptions.push(g.commands.registerCommand("msg.mrs.dumpObjectToJSONFile",async t=>{if(t){let s=t.treeItem;if(s.value){let n=s.backend;await g.window.showSaveDialog({title:"REST Database Object Dump...",saveLabel:"Select the target file",defaultUri:g.Uri.file(`${ue.default.homedir()}/${s.value.name}.mrs.json`),filters:{JSON:["mrs.json"]}}).then(async i=>{if(i!==void 0)try{let o=i.fsPath;await n.mrs.dumpObject(o,s.value.serviceId,void 0,s.value.dbSchemaId,void 0,s.value.id),F("The REST Database Object has been dumped successfully.")}catch(o){g.window.showErrorMessage(`Error dumping the REST Database Object: ${String(o)}`)}})}}})),e.context.subscriptions.push(g.commands.registerCommand("msg.mrs.loadSchemaFromJSONFile",async t=>{if(t)if(t instanceof g.Uri){let s=await e.determineConnection("MySQL");if(s){let n=new Te,i=g.window.createStatusBarItem();try{i.text="$(loading~spin) Starting Database Session ...",i.show(),i.text="$(loading~spin) Starting Database Session ...",await n.startSession(String(s.treeItem.details.id)+"MRSContentSetDlg"),i.text="$(loading~spin) Opening Database Connection ...",await er(n,s.treeItem.details.id,l=>{i.text="$(loading~spin) "+l});let o=await n.mrs.listServices(),a;if(o.length===0)g.window.showErrorMessage("No MRS Services available for this connection.");else if(o.length===1)a=o[0];else{i.text="Please select a MRS Service ...";let l=o.map(u=>u.hostCtx),c=await g.window.showQuickPick(l,{title:"Select a MRS Service to load the MRS schema dump",matchOnDescription:!0,placeHolder:"Type the name of an existing MRS Service"});a=o.find(u=>u.hostCtx===c)}a!==void 0&&(i.text="$(loading~spin) Loading REST Schema ...",await n.mrs.loadSchema(t.fsPath,a.id),g.commands.executeCommand("msg.refreshConnections"),F("The REST Schema has been loaded successfully."))}catch(o){g.window.showErrorMessage(`A error occurred when trying to show the MRS Static Content Set Dialog. Error: ${o instanceof Error?o.message:String(o)}`)}finally{i.hide(),await n.closeSession()}}}else{if(!t.treeItem.value)return;let s=t.treeItem.backend;await g.window.showOpenDialog({title:"REST Schema Load...",openLabel:"Select the source file",canSelectFiles:!0,canSelectFolders:!1,canSelectMany:!1,filters:{JSON:["mrs.json"]}}).then(async n=>{if(n!==void 0){let i=g.window.createStatusBarItem();try{i.text="$(loading~spin) Loading REST Schema ...",i.show();let o=n[0].fsPath;await s.mrs.loadSchema(o,t.treeItem.value.id),g.commands.executeCommand("msg.refreshConnections"),F("The REST Schema has been loaded successfully.")}catch(o){g.window.showErrorMessage(`Error loading REST Schema: ${String(o)}`)}finally{i.hide()}}})}})),e.context.subscriptions.push(g.commands.registerCommand("msg.mrs.loadObjectFromJSONFile",async t=>{if(t){let s=t.treeItem;if(s.value){let n=s.backend;await g.window.showOpenDialog({title:"REST Database Object Load...",openLabel:"Select the source file",canSelectFiles:!0,canSelectFolders:!1,canSelectMany:!1,filters:{JSON:["mrs.json"]}}).then(async i=>{if(i!==void 0)try{let o=i[0].fsPath;await n.mrs.loadObject(o,s.value.serviceId,void 0,s.value.id),g.commands.executeCommand("msg.refreshConnections"),F("The REST Database Object has been loaded successfully.")}catch(o){g.window.showErrorMessage(`Error loading REST Database Object: ${String(o)}`)}})}}})),e.context.subscriptions.push(g.commands.registerCommand("msg.mrs.saveExampleProject",async t=>{let s=t.fsPath,n;if(ue.default.platform()==="win32"?n=s.match(/([^\\]*)\/*$/):n=s.match(/([^/]*)\/*$/),n===null){g.window.showErrorMessage("Error storing the MRS Project: Project folder contains no path.");return}let i=n[1];await g.window.showOpenDialog({title:`Saving MRS Example Project "${i}" ...`,openLabel:`Save ${i} Project`,canSelectFiles:!1,canSelectFolders:!0,canSelectMany:!1,defaultUri:g.Uri.file(`${ue.default.homedir()}/Documents`)}).then(async o=>{if(o!==void 0)try{let a=g.Uri.joinPath(o[0],i),l=u=>u.indexOf("node_modules")===-1;we.default.cpSync(s,a.fsPath,{filter:l,recursive:!0}),F(`The MRS Project ${i} has been stored successfully.`),await g.window.showInformationMessage(`Do you want to open the MRS Project ${i} in a new VS Code Window?`,"Yes","No")==="Yes"&&g.commands.executeCommand("vscode.openFolder",a,{forceNewWindow:!0})}catch(a){g.window.showErrorMessage(`Error storing the MRS Project: ${String(a)}`)}})}))};configureMrs=async(e,t)=>{let s="Yes";if(t===void 0&&(s=await g.window.showInformationMessage("Do you want to configure this instance for MySQL REST Service Support? This operation will create the MRS metadata database schema.","Yes","No")),e&&s==="Yes"){let n=new Te;try{await hm(n,e.treeItem.details.id,"msg.mrs.configureMySQLRestService");let i=g.window.createStatusBarItem();try{i.text="$(loading~spin) Configuring the MySQL REST Service Metadata Schema ...",i.show(),await n.mrs.configure(t)}finally{i.hide()}g.commands.executeCommand("msg.refreshConnections"),F("MySQL REST Service configured successfully.")}catch(i){g.window.showErrorMessage(`A error occurred when trying to configure the MySQL REST Service. Error: ${i instanceof Error?i.message:String(i)}`)}finally{await n.closeSession()}}};getRouterConfigDir=(e,t)=>{let s=Le.getShellUserConfigDir(e.extensionMode===g.ExtensionMode.Development),n=V.default.join(s,"plugin_data","mrs_plugin","router_configs");return process.env.MYSQL_ROUTER_CUSTOM_DIR!==void 0?process.env.MYSQL_ROUTER_CUSTOM_DIR:V.default.join(n,t?.parent.id.toString()??"default","mysqlrouter")};getEmbeddedRouterBinPath=e=>{let t=(0,V.join)(e.extensionPath,"router","bin");if(we.default.existsSync(t))return t};bootstrapLocalRouter=async(e,t,s=!1)=>{if(t){let n=this.getEmbeddedRouterBinPath(e);if(n!==void 0||Jr("mysqlrouter_bootstrap").length>0){let i=Le.getShellUserConfigDir(e.extensionMode===g.ExtensionMode.Development),o=V.default.join(i,"plugin_data","gui_plugin","web_certs"),a=t.parent.treeItem.details.options;if(a.scheme!=="mysql"){g.window.showErrorMessage("Only DB Connections using classic MySQL protocol can be used for bootstrapping.");return}if(a.ssh!==void 0||a["mysql-db-system-id"]!==void 0){g.window.showErrorMessage("DB Connection using SSH Tunneling or MDS Bastion settings cannot be used for bootstrapping.");return}let l=`${a.user??""}@${a.host}`+(a.port!==void 0?`:${a.port}`:""),c=g.window.terminals.find(d=>d.name==="MySQL Router MRS");c===void 0&&(c=g.window.createTerminal("MySQL Router MRS"));let u=this.getRouterConfigDir(e,t);if(we.default.existsSync(u))if(await g.window.showInformationMessage(`The MySQL Router config directory ${u} already exists. Do you want to rename the existing directory and proceed?`,"Yes","No")==="Yes")try{we.default.renameSync(u,u+"_old")}catch{we.default.rmSync(u+"_old",{recursive:!0,force:!0}),we.default.renameSync(u,u+"_old")}else return;else we.default.mkdirSync(u,{recursive:!0});if(c!==void 0){c.show();let d=n!==void 0?(0,V.join)(n,"mysqlrouter_bootstrap"):"mysqlrouter_bootstrap",p=6446+(t?.parent.id??0)*4,f=8443+(t?.parent.id??0);if(c.sendText(`${d} ${l} --mrs --directory "${u}" "--conf-set-option=http_server.ssl_cert=${V.default.join(o,"server.crt")}" "--conf-set-option=http_server.ssl_key=${V.default.join(o,"server.key")}" --conf-set-option=logger.level=DEBUG --conf-set-option=logger.sinks=consolelog --conf-base-port=${p.toString()} --conf-set-option=http_server.port=${f.toString()}`,!s),s)return c.sendText("; exit"),new Promise((C,x)=>{let E=g.window.onDidCloseTerminal(N=>{N===c&&(E.dispose(),c.exitStatus!==void 0?C(c.exitStatus):x("Terminal exited with undefined status"))})})}}else if(await g.window.showInformationMessage("The mysqlrouter_bootstrap executable could not be found in any directory listed in the PATH environment variable. This seems to indicate that MySQL Router has not been installed. Do you want to download and install the MySQL Router now?","Yes","No")==="Yes"){let o="https://downloads.mysql.com/snapshots/pb/mysql-8.2.0-labs-mrs7-preview-release/",a;switch(ue.default.platform()){case"darwin":{switch(ue.default.arch()){case"arm":case"arm64":{a=`${o}mysql-router-8.2.0-labs-mrs-7-macos13-arm64.dmg`;break}default:{a=`${o}mysql-router-8.2.0-labs-mrs-7-macos13-x86_64.dmg`;break}}break}case"win32":{a=`${o}mysql-router-8.2.0-labs-mrs-7-winx64.msi`;break}default:{a="https://labs.mysql.com";break}}await g.env.openExternal(g.Uri.parse(a)),await g.window.showInformationMessage("After installing MySQL Router, VS Code needs to be restarted to read the updated PATH environment variable. Please manually restart VS Code after completing the installation process.","OK")}}};getBaseDir=()=>ue.default.platform()!=="win32"?ue.default.homedir():V.default.join(ue.default.homedir(),"AppData","Roaming","MySQL");startStopLocalRouter=async(e,t,s=!0)=>{if(t)if(this.getEmbeddedRouterBinPath(e)!==void 0||Jr("mysqlrouter")){let i=this.getRouterConfigDir(e,t);if(we.default.existsSync(i)){let o=g.window.terminals.find(l=>l.name==="MySQL Router MRS");if(o===void 0?o=g.window.createTerminal("MySQL Router MRS"):o.show(),s){let l=V.default.join(this.getRouterConfigDir(e,t),"mysqlrouter.pid");try{if(await we.default.promises.access(l),await g.window.showInformationMessage("A MySQL Router instance might already to be running. Do you want to force a start/restart of the MySQL Router?","Yes","No")==="Yes")ue.default.platform()==="win32"?o.sendText("taskkill /IM mysqlrouter.exe /F",!0):o.sendText("killall -9 mysqlrouter",!0),await we.default.promises.unlink(l);else return}catch{}}let a=(s?"start":"stop")+(ue.default.platform()==="win32"?".ps1":".sh");a=V.default.join(i,a),a.includes(" ")&&(ue.default.platform()==="win32"?a.includes(" ")&&(a='& "'+a+'"'):a='"'+a+'"'),ue.default.platform()==="win32"&&(o.sendText("Set-ExecutionPolicy -ExecutionPolicy RemoteSigned -Scope CurrentUser",!0),o.sendText("clear",!0)),o.sendText(a,!0)}else s?await g.window.showInformationMessage(`The MySQL Router config directory ${i} was not found. Do you want to bootstrap a local MySQL Router instance for development now?`,"Yes","No")==="Yes"&&(await this.bootstrapLocalRouter(this.#r.context,t,!0),this.startStopLocalRouter(this.#r.context,t)):await g.window.showInformationMessage(`The MySQL Router config directory ${i} was not found. Please bootstrap a local MySQL Router instance for development first.`,"OK")}else await g.window.showInformationMessage("The mysqlrouter executable could not be found. Do you want to download and install the MySQL Router now?","Yes","No")==="Yes"&&g.env.openExternal(g.Uri.parse("https://labs.mysql.com"))};browseDocs=(e,t="index.html")=>{let s=this.#t!==t;if(!this.#e||s){this.#t=t;try{let n,i=V.default.join(this.#r.context.extensionPath,"shell","lib","mysqlsh","plugins","mrs_plugin"),o=V.default.join(i,"docs",t);if(we.default.existsSync(o))n=we.default.readFileSync(o,"utf8");else if(ue.default.platform()==="win32"?i=V.default.join(this.getBaseDir(),"mysqlsh","plugins","mrs_plugin"):i=V.default.join(this.getBaseDir(),".mysqlsh","plugins","mrs_plugin"),o=V.default.join(i,"docs",t),we.default.existsSync(o))n=we.default.readFileSync(o,"utf8");else throw new Error("MRS Documentation not found.");this.#e||(this.#e=g.window.createWebviewPanel("mrsDocs","MRS Docs",g.ViewColumn.One,{enableScripts:!0,retainContextWhenHidden:!0,localResourceRoots:[g.Uri.file(V.default.join(i,"docs")),g.Uri.file(V.default.join(i,"docs","style")),g.Uri.file(V.default.join(i,"docs","images"))]}),this.#e.onDidDispose(()=>{this.handleDocsWebviewPanelDispose()}),this.#e.webview.onDidReceiveMessage(l=>{switch(l.path&&typeof l.path=="string"&&ue.default.platform()==="win32"&&(l.path=String(l.path).replaceAll("/","\\")),l.command){case"openSqlFile":{if(l.path&&typeof l.path=="string"){let c=g.Uri.file(V.default.join(i,String(l.path)));g.commands.executeCommand("msg.editInScriptEditor",c)}break}case"loadMrsDump":{if(l.path&&typeof l.path=="string"){let c=g.Uri.file(V.default.join(i,String(l.path)));g.commands.executeCommand("msg.mrs.loadSchemaFromJSONFile",c)}break}case"saveProject":{if(l.path&&typeof l.path=="string"){let c=g.Uri.file(V.default.join(i,String(l.path)));g.commands.executeCommand("msg.mrs.saveExampleProject",c)}break}case"goto":{let c,u;l.path&&typeof l.path=="string"&&(c=l.path),l.id&&typeof l.id=="string"&&(u=l.id),this.browseDocs(u,c);break}default:}}));let a=this.#e.webview.asWebviewUri(g.Uri.file(V.default.join(i,"docs/")));n=n.replace('"style/',`"${a.toString()}style/`),n=n.replace(/(src=")(.*)(\/images)/gm,`$1${a.toString()}$3`),n=n.replace(/(href=")((?!http).*?\.html)(#.*?)?(")/gm,`$1$2$3$4 onclick="document.vscode.postMessage({ command: 'goto', path: '$2', id: '$3' });" `),this.#e.webview.html=n}catch(n){this.#e=void 0,g.window.showErrorMessage(`${String(n)}`)}}else this.#e.reveal();e&&this.#e&&(e.startsWith("#")&&(e=e.slice(1)),s?setTimeout(()=>{this.#e?.webview.postMessage({command:"goToId",id:e})},200):this.#e.webview.postMessage({command:"goToId",id:e}))};handleDocsWebviewPanelDispose=()=>{this.#e=void 0}};var qr=require("vscode");var nl=k(require("path"),1),Ii=require("vscode"),qt=class extends Ii.TreeItem{constructor(t,s){super(t.caption,Ii.TreeItemCollapsibleState.Collapsed);this.details=t;this.backend=s;this.iconPath={light:nl.join(__dirname,"..","images","light","connected.svg"),dark:nl.join(__dirname,"..","images","dark","connected.svg")}}contextValue="connection"};var Lr=class extends xt{openSessions=[];constructor(e,t){super(e,t)}show(e){return this.runCommand("job",[{requestType:"showModule",parameter:Tn},{requestType:"showPage",parameter:{module:Tn,page:e}}],"newShellConsole")}openSession(e){let t=e.sessionId===-1?"newSession":"openSession";return this.runCommand("job",[{requestType:"showModule",parameter:Tn},{requestType:t,parameter:e}],"newShellConsole")}removeSession(e){return this.runCommand("removeSession",e,"newShellConsole")}requisitionsCreated(){super.requisitionsCreated(),this.requisitions&&(this.requisitions.register("sessionAdded",this.sessionAdded),this.requisitions.register("sessionRemoved",this.sessionRemoved))}sessionAdded=e=>(this.openSessions.push(e),b.execute("proxyRequest",{provider:this,original:{requestType:"refreshSessions",parameter:this.openSessions}}));sessionRemoved=e=>{let t=this.openSessions.findIndex(s=>s.sessionId===e.sessionId);return t>-1&&this.openSessions.splice(t,1),b.execute("proxyRequest",{provider:this,original:{requestType:"refreshSessions",parameter:this.openSessions}})};handleDispose(){super.handleDispose(),this.openSessions=[],b.execute("proxyRequest",{provider:this,original:{requestType:"refreshSessions",parameter:[]}})}};var vi=class{providers=[];url;setup(e){let t=e.context;b.register("connectedToUrl",this.connectedToUrl),t.subscriptions.push(qr.commands.registerCommand("msg.openSessionBrowser",s=>{s??=this.currentProvider,s instanceof Lr&&s?.show("sessions")})),t.subscriptions.push(qr.commands.registerCommand("msg.newSession",()=>{this.currentProvider?.openSession({sessionId:-1})})),t.subscriptions.push(qr.commands.registerCommand("msg.openSession",s=>{this.currentProvider?.openSession(s)})),t.subscriptions.push(qr.commands.registerCommand("msg.newSessionUsingConnection",s=>{let n=this.currentProvider,i,o;s.treeItem instanceof qt?(i=s.treeItem.details.caption,o=s.treeItem.details.id):(i=s.caption,o=s.connectionId);let a={sessionId:-1,caption:`Session to ${i}`,dbConnectionId:o};n?.openSession(a)})),t.subscriptions.push(qr.commands.registerCommand("msg.removeSession",s=>{let n=s.parent.provider;n instanceof Lr&&n.removeSession(s.details)}))}closeProviders(){this.providers.forEach(e=>{e.close()}),this.providers=[]}get currentProvider(){if(this.providers.length>0)return this.providers[this.providers.length-1];if(this.url){let e=this.createTabCaption(),t=new Lr(this.url,s=>{let n=this.providers.findIndex(i=>i===s);n>-1&&this.providers.splice(n,1)});return t.caption=e,this.providers.push(t),t}}connectedToUrl=e=>(this.url=e,this.closeProviders(),Promise.resolve(!0));createTabCaption=()=>{if(this.providers.length===0)return"MySQL Shell Consoles";let e=1;for(;;){let t=`MySQL Shell Consoles (${e})`;if(!this.providers.find(s=>s.caption===t))return t;++e}}};var Ce=require("vscode");var tr=class r extends D{constructor(t,s,n,i){super(i,t,s,n,r.getIonName(i),!0);this.groupType=i}contextValue=`${String(this.label)}GroupItem`;static getIonName(t){switch(t){case"Tables":return"schemaTables.svg";case"Views":return"schemaViews.svg";case"Routines":return"schemaRoutines.svg";case"Events":return"schemaEvents.svg";default:return""}}};var Fr=class extends D{contextValue="adminSection";constructor(e,t,s,n,i,o){super(e,"",t,s,n,i,o)}};var yi=class extends D{contextValue="admin";constructor(e,t,s,n){super(e,"",t,s,"adminDashboard.svg",n)}};var il=k(require("path"),1);var rr=class extends qt{contextValue="connectionMySQL";constructor(e,t){super(e,t);let s="connectionMySQL.svg";e.options["mysql-db-system-id"]!==void 0&&(s="ociDbSystem.svg"),this.iconPath={light:il.join(__dirname,"..","images","light",s),dark:il.join(__dirname,"..","images","dark",s)}}};var ol=k(require("path"),1);var sr=class extends qt{contextValue="connectionSqlite";constructor(e,t){super(e,t),this.iconPath={light:ol.join(__dirname,"..","images","light","connectionSqlite.svg"),dark:ol.join(__dirname,"..","images","dark","connectionSqlite.svg")}}};var al=k(require("path"),1),qs=require("vscode"),de=class extends qs.TreeItem{constructor(t,s,n,i,o){super(t,o?qs.TreeItemCollapsibleState.Collapsed:qs.TreeItemCollapsibleState.None);this.backend=s;this.connectionId=n;this.iconPath={light:al.join(__dirname,"..","images","light",i),dark:al.join(__dirname,"..","images","dark",i)}}};var xi=class extends de{constructor(t,s,n,i){super(t,n,i,s.enabled?"shield.svg":"shieldDisabled.svg",!0);this.value=s;this.tooltip=s.description??t}contextValue="mrsAuthApp"};var wi=class extends de{constructor(t,s,n,i){super(t,n,i,s.enabled?"mrsContentFile.svg":"mrsContentFileDisabled.svg",!1);this.value=s}contextValue="mrsContentFile"};var Ci=class extends de{constructor(t,s,n,i){super(t,n,i,s.enabled===1?"mrsContentSet.svg":"mrsContentSetDisabled.svg",!0);this.value=s}contextValue="mrsContentSet"};var Ei=class r extends de{constructor(t,s,n,i){super(t,n,i,r.getIconName(s),!1);this.value=s}contextValue="mrsDbObject";static getIconName=t=>{let s="mrsDbObject"+td(t.objectType.toLowerCase());return s+=t.requiresAuth===1?"Locked":"",s+=t.enabled!==1?"Disabled":"",s+".svg"}};var Ti=class r extends de{constructor(t,s,n,i,o){super(t,n,i,r.getIconName(s,o),!1);this.value=s;this.description=s.version,this.tooltip=o?"This MySQL Router requires an upgrade.":`MySQL Router ${s.version} - ${s.address}`}contextValue="mrsRouter";static getIconName=(t,s)=>s?"routerError.svg":t.active?"router.svg":"routerNotActive.svg"};var Mi=class extends de{constructor(t,s,n,i){let o=s.enabled===1?s.requiresAuth===1?"mrsSchemaLocked.svg":"mrsSchema.svg":"mrsSchemaDisabled.svg";super(t,n,i,o,!0);this.value=s}contextValue="mrsSchema"};var Ai=class extends de{constructor(t,s,n,i){let o=s.isCurrent?s.enabled?"mrsServiceDefault.svg":"mrsServiceDefaultDisabled.svg":s.enabled?"mrsService.svg":"mrsServiceDisabled.svg";super(t,n,i,o,!0);this.value=s}contextValue="mrsService"};var Pi=class extends D{contextValue="mrs";constructor(e,t,s,n,i,o,a){super(e,t,s,n,o?"mrs.svg":"mrsDisabled.svg",i,a)}};var _i=class extends de{constructor(t,s,n,i){super(t,n,i,"ociProfile.svg",!1);this.value=s}contextValue="mrsUser"};var ki=class extends D{contextValue="schemaEventItem";constructor(e,t,s,n,i){super(e,t,s,n,"schemaEvent.svg",i)}get qualifiedName(){return`\`${this.schema}\`.\`${this.name}\``}get dbType(){return"event"}};var Gr=class extends D{constructor(t,s,n,i,o,a,l){super(t,s,i,o,n==="procedure"?"schemaRoutine.svg":"schemaFunction.svg",a,l);this.type=n}contextValue="schemaRoutineItem";get qualifiedName(){return`\`${this.schema}\`.\`${this.name}\``}get dbType(){return this.type}get createScriptResultIndex(){return 2}};var Ri=class extends Gr{contextValue="schemaRoutineItemMySQL";get iconName(){return this.dbType==="procedure"?"schemaRoutine.svg":"schemaFunction.svg"}};var Di=class extends Nr{contextValue="schemaItem";constructor(e,t,s,n,i,o,a){super(e,t,s,n,i?"schemaSqliteCurrent.svg":"schemaSqlite.svg",o,a)}get qualifiedName(){return`\`${this.name}\``}get dbType(){return"schema"}};var Ni=class extends D{constructor(t,s,n,i,o){super(t,s,i,o,"schemaTableColumn.svg",!1);this.table=n}contextValue="schemaTableColumnItem";get qualifiedName(){return`\`${this.schema}\`.\`${this.table}\`.\`${this.name}\``}get dbType(){return"column"}};var Oi=class extends D{constructor(t,s,n,i,o){super(t,s,i,o,"schemaTableForeignKey.svg",!1);this.table=n}contextValue="schemaTableForeignKeyItem"};var Li=class r extends D{constructor(t,s,n,i,o){super(o,t,n,i,r.getIconName(o),!0);this.table=s;this.groupType=o}contextValue=`schemaTable${String(this.label)}GroupItem`;static getIconName(t){switch(t){case"Columns":return"schemaTableColumns.svg";case"Indexes":return"schemaTableIndexes.svg";case"Foreign Keys":return"schemaTableForeignKey.svg";case"Triggers":return"schemaTableTriggers.svg";default:return""}}};var qi=class extends D{constructor(t,s,n,i,o){super(t,s,i,o,"schemaTableIndex.svg",!1);this.table=n}contextValue="schemaTableIndexItem";get qualifiedName(){return`\`${this.schema}\`.\`${this.table}\`.\`${this.name}\``}get dbType(){return"index"}};var Ur=class extends D{contextValue="schemaTableItem";constructor(e,t,s,n,i,o){super(e,t,s,n,i,o)}get qualifiedName(){return`\`${this.schema}\`.\`${this.name}\``}get dbType(){return"table"}};var Fi=class extends Ur{contextValue="schemaTableItemMySQL";constructor(e,t,s,n,i){super(e,t,s,n,"schemaTable.svg",i)}};var Gi=class extends Ur{contextValue="schemaTableItem";constructor(e,t,s,n,i){super(e,t,s,n,"schemaTable.svg",i)}};var Ui=class extends D{constructor(t,s,n,i,o){super(t,s,i,o,"schemaTableTrigger.svg",!1);this.table=n}contextValue="schemaTableTriggerItem";get qualifiedName(){return`\`${this.schema}\`.\`${this.name}\``}get dbType(){return"trigger"}};var Br=class extends D{contextValue="schemaViewItem";constructor(e,t,s,n,i,o){super(e,t,s,n,i,o)}get qualifiedName(){return`\`${this.schema}\`.\`${this.name}\``}get dbType(){return"view"}};var Bi=class extends Br{contextValue="schemaViewItemMySQL";constructor(e,t,s,n,i){super(e,t,s,n,"schemaView.svg",i)}};var ji=class extends Br{contextValue="schemaViewItem";constructor(e,t,s,n,i){super(e,t,s,n,"schemaView.svg",i)}};var Wi=class r{static nextId=1;connections=[];expandedMrsTreeItems=new Set;changeEvent=new Ce.EventEmitter;refreshMrsRoutersTimer=null;requiredRouterVersion;clearCurrentSchemas=!1;#e=!1;get onDidChangeTreeData(){return this.changeEvent.event}constructor(){b.register("refreshConnections",this.refreshConnections),b.register("proxyRequest",this.proxyRequest)}dispose(){this.refreshMrsRoutersTimer!==null&&(clearTimeout(this.refreshMrsRoutersTimer),this.refreshMrsRoutersTimer=null),b.unregister("refreshConnections",this.refreshConnections),b.unregister("proxyRequest",this.proxyRequest),this.closeAllConnections()}refresh(e){e?this.changeEvent.fire(e):this.updateConnections().then(()=>{this.changeEvent.fire(e),this.refreshMrsRoutersTimer===null&&this.refreshMrsRouters(),b.execute("connectionsUpdated",void 0)})}providerStateChanged(e,t){if(t){this.clearCurrentSchemas=!1;let s=e.currentSchemas;this.connections.forEach(n=>{n.currentSchema=s.get(n.treeItem.details.id)??""}),this.changeEvent.fire(void 0)}else this.clearCurrentSchemas=!0,setTimeout(()=>{this.clearCurrentSchemas&&(this.clearCurrentSchemas=!1,this.resetCurrentSchemas())},300)}makeCurrentSchema(e){e.parent.currentSchema=e.treeItem.schema,this.changeEvent.fire(e.parent)}resetCurrentSchemas(){this.connections.forEach(e=>{e.currentSchema=""}),this.changeEvent.fire(void 0)}getTreeItem(e){return e.treeItem}getParent(e){if("parent"in e)return e.parent}async getChildren(e){if(!e)return this.connections;switch(e.type){case"connection":{let t=[];return await this.updateSchemaList(e),e.mrsEntry!==void 0&&t.push(e.mrsEntry),e.adminEntry!==void 0&&t.push(e.adminEntry),t.push(...e.schemaEntries),t}case"admin":{let t={title:"Show Server Status",command:"msg.showServerStatus",arguments:[void 0,"Server Status",e.treeItem.connectionId,Q()]},s={title:"Show Client Connections",command:"msg.showClientConnections",arguments:[void 0,"Client Connections",e.treeItem.connectionId,Q()]},n={title:"Show Performance Dashboard",command:"msg.showPerformanceDashboard",arguments:[void 0,"Performance Dashboard",e.treeItem.connectionId,Q()]},i=e.treeItem;return e.sections=[{parent:e,type:"adminSection",treeItem:new Fr("Server Status",i.backend,i.connectionId,"adminServerStatus.svg",!1,t)},{parent:e,type:"adminSection",treeItem:new Fr("Client Connections",i.backend,i.connectionId,"clientConnections.svg",!1,s)},{parent:e,type:"adminSection",treeItem:new Fr("Performance Dashboard",i.backend,i.connectionId,"adminPerformanceDashboard.svg",!1,n)}],e.sections}case"schema":{let t=e.treeItem;return e.groups=[{parent:e,type:"schemaMemberGroup",treeItem:new tr(t.schema,t.backend,t.connectionId,"Tables"),members:[]},{parent:e,type:"schemaMemberGroup",treeItem:new tr(t.schema,t.backend,t.connectionId,"Views"),members:[]}],e.parent.treeItem.details.dbType==="MySQL"&&e.groups.push({parent:e,type:"schemaMemberGroup",treeItem:new tr(t.schema,t.backend,t.connectionId,"Routines"),members:[]},{parent:e,type:"schemaMemberGroup",treeItem:new tr(t.schema,t.backend,t.connectionId,"Events"),members:[]}),e.groups}case"schemaMemberGroup":return await this.loadSchemaGroupMembers(e),e.members;case"table":{let t=e.treeItem;e.groups=[];for(let s of["Columns","Indexes","Foreign Keys","Triggers"])e.groups.push({parent:e,type:"tableMemberGroup",treeItem:new Li(t.schema,t.name,t.backend,t.connectionId,s),members:[]});return e.groups}case"tableMemberGroup":return await this.loadTableMembers(e),e.members;case"mrs":return await this.loadMrsServices(e),[...e.services,...e.routers];case"mrsService":return await this.loadMrsServiceEntries(e),[...e.schemas,...e.contentSets,...e.authApps];case"mrsAuthApp":return await this.loadMrsAuthAppUsers(e),e.users;case"mrsContentSet":return await this.loadMrsContentSetFiles(e),e.files;case"mrsSchema":return await this.loadMrsDbObjects(e),e.dbObjects;default:return Promise.resolve([])}}async closeAllConnections(){for(let e of this.connections)await e.treeItem.backend.closeSession().catch(()=>{});this.connections=[]}didExpandElement=e=>{e.type==="mrs"&&this.expandedMrsTreeItems.add(e)};didCollapseElement=e=>{e.type==="mrs"&&this.expandedMrsTreeItems.delete(e)};refreshMrsRouters=()=>{this.refreshMrsRoutersTimer!==null&&clearTimeout(this.refreshMrsRoutersTimer);for(let e of this.expandedMrsTreeItems)this.refresh(e);this.refreshMrsRoutersTimer=setTimeout(()=>{this.refreshMrsRouters()},1e4)};async updateConnections(){if(R.currentProfileId===-1)await this.closeAllConnections();else try{let e=await Se.dbConnections.listDbConnections(R.currentProfileId),t=0,s=0;for(;t<this.connections.length&&e.length>0;)if(this.connections[t].treeItem.details.caption===e[s].caption){if(s>0){for(let n=0;n<s;++n){let i=e[n];this.connections.splice(t,0,{id:r.nextId++,type:"connection",isOpen:!1,openEditors:0,currentSchema:"",treeItem:i.dbType==="MySQL"?new rr(i,new Te):new sr(i,new Te),schemaEntries:[]})}e.splice(0,s),s=0}++t,e.shift()}else{for(;++s<e.length&&this.connections[t].treeItem.details.caption!==e[s].caption;);s===e.length&&(this.connections.splice(t,1)[0].treeItem.backend.closeSession(),s=0)}for(;e.length>0;){++t;let n=e.shift();this.connections.push({id:r.nextId++,type:"connection",isOpen:!1,openEditors:0,currentSchema:"",treeItem:n.dbType==="MySQL"?new rr(n,new Te):new sr(n,new Te),schemaEntries:[]})}for(;t<this.connections.length;)await this.connections.splice(t,1)[0].treeItem.backend.closeSession()}catch(e){throw Ce.window.showErrorMessage(`Cannot load DB connections: ${String(e)}`),e}}updateSchemaList=async e=>{if(e.isOpen)return this.doUpdateSchemaList(e);let t=e.treeItem;await t.backend.startSession(String(e.id)+"ConnectionTreeProvider");try{if(t.details.dbType==="Sqlite"){let s=t.details.options;if(await Se.core.validatePath(s.dbFile))return await er(t.backend,t.details.id,n=>{Vi(n)}),e.isOpen=!0,this.doUpdateSchemaList(e);try{return await Se.core.createDatabaseFile(s.dbFile),this.doUpdateSchemaList(e)}catch(n){throw Error(`DB Creation Error: 
${String(n)??"<unknown>"}`)}}else return await er(t.backend,t.details.id,s=>{Vi(s)}),e.isOpen=!0,this.doUpdateSchemaList(e)}catch(s){throw await t.backend.closeSession(),new Error(`Error during module session creation: 
${s instanceof Error?s.message:String(s)}`)}};doUpdateSchemaList=async e=>{try{let t=e.treeItem;e.schemaEntries=[],t.details.dbType==="MySQL"&&(e.adminEntry={parent:e,type:"admin",treeItem:new yi("MySQL Administration",t.backend,t.details.id,!0),sections:[]});let s=await t.backend.getCatalogObjects("Schema");for(let n of s)if(t.details.dbType==="MySQL"){if(n==="mysql_rest_service_metadata")try{let o=!0,a=await t.backend.mrs.status();if(this.requiredRouterVersion=a.requiredRouterVersion,a.majorUpgradeRequired){o=!1;let l=await Ce.window.showInformationMessage(`This MySQL Shell version requires a new major version of the MRS metadata schema, ${String(a.requiredMetadataVersion)}. The currently deployed schema version is ${String(a.currentMetadataVersion)}. You need to downgrade the MySQL Shell version or drop and recreate the MRS metadata schema. Do you want to drop and recreate the MRS metadata schema? WARNING: All existing MRS data will be lost.`,"Yes","No");l==="Yes"&&(l=await Ce.window.showInformationMessage("Are you really sure you want to drop and recreate the MRS metadata schema? WARNING: All existing MRS data will be lost.","Drop and Recreate","No"),l==="Drop and Recreate"&&(await t.backend.mrs.configure(!0,!0),o=!0))}else if(a.serviceUpgradeable&&(o=!1,await Ce.window.showInformationMessage(`This MySQL Shell version requires a new minor version of the MRS metadata schema, ${String(a.requiredMetadataVersion)}. The currently deployed schema version is ${String(a.currentMetadataVersion)}. Do you want to update the MRS metadata schema?`,"Yes","No")==="Yes")){o=!0;let c=Ce.window.createStatusBarItem();try{c.text="$(loading~spin) Updating the MySQL REST Service Metadata Schema ...",c.show(),await t.backend.mrs.configure(!0,!1,!0),F("The MySQL REST Service Metadata Schema has been updated.")}finally{c.hide()}}o&&(e.mrsEntry={parent:e,type:"mrs",treeItem:new Pi("MySQL REST Service",n,t.backend,t.details.id,!0,a.serviceEnabled),routers:[],services:[]})}catch(o){Ce.window.showErrorMessage(`Failed to check and upgrade the MySQL REST Service Schema. Error: ${o instanceof Error?o.message:String(o)}`)}let i=t.details.hideSystemSchemas??!0;(n!=="mysql"&&n!=="mysql_innodb_cluster_metadata"&&n!=="mysql_rest_service_metadata"||!i)&&e.schemaEntries.push({parent:e,type:"schema",treeItem:new Or(n,n,t.backend,t.details.id,n===e.currentSchema,!0),groups:[]})}else e.schemaEntries.push({parent:e,type:"schema",treeItem:new Di(n,n,t.backend,t.details.id,n===e.currentSchema,!0),groups:[]})}catch(t){throw new Error(`Error retrieving schema list: ${t instanceof Error?t.message:String(t)}`)}};async loadSchemaGroupMembers(e){let t=e.treeItem,s=e.parent.parent.treeItem.details.dbType==="MySQL";switch(e.treeItem.groupType){case"Routines":{let n=(i,o)=>{for(let a of o)s?e.members.push({parent:e,type:"routine",treeItem:new Ri(a,t.schema,i,t.backend,t.connectionId,!1)}):e.members.push({parent:e,type:"routine",treeItem:new Gr(a,t.schema,i,t.backend,t.connectionId,!1)})};try{let i=await t.backend.getSchemaObjects(t.schema,"Routine","function");n("function",i),i=await t.backend.getSchemaObjects(t.schema,"Routine","procedure"),n("procedure",i)}catch(i){Ce.window.showErrorMessage("Error while retrieving schema objects: "+String(i))}break}default:try{let n=e.treeItem.groupType.slice(0,-1);(await t.backend.getSchemaObjects(t.schema,n)).forEach(o=>{switch(e.treeItem.groupType){case"Tables":{s?e.members.push({parent:e,type:"table",treeItem:new Fi(o,t.schema,t.backend,t.connectionId,!0),groups:[]}):e.members.push({parent:e,type:"table",treeItem:new Gi(o,t.schema,t.backend,t.connectionId,!0),groups:[]});break}case"Views":{s?e.members.push({parent:e,type:"view",treeItem:new Bi(o,t.schema,t.backend,t.connectionId,!0)}):e.members.push({parent:e,type:"view",treeItem:new ji(o,t.schema,t.backend,t.connectionId,!0)});break}case"Events":{e.members.push({parent:e,type:"event",treeItem:new ki(o,t.schema,t.backend,t.connectionId,!1)});break}default:}})}catch(n){Ce.window.showErrorMessage("Error while retrieving schema objects: "+n)}}}async loadTableMembers(e){let t=e.treeItem;switch(t.groupType){case"Columns":{(await t.backend.getTableObjects(t.schema,t.table,"Column")).forEach(n=>{e.members.push({parent:e,type:"column",treeItem:new Ni(n,t.schema,t.table,t.backend,t.connectionId)})});break}case"Indexes":{(await t.backend.getTableObjects(t.schema,t.table,"Index")).forEach(n=>{e.members.push({parent:e,type:"index",treeItem:new qi(n,t.schema,t.table,t.backend,t.connectionId)})});break}case"Triggers":{(await t.backend.getTableObjects(t.schema,t.table,"Trigger")).forEach(n=>{e.members.push({parent:e,type:"trigger",treeItem:new Ui(n,t.schema,t.table,t.backend,t.connectionId)})});break}case"Foreign Keys":{(await t.backend.getTableObjects(t.schema,t.table,"Foreign Key")).forEach(n=>{e.members.push({parent:e,type:"foreignKey",treeItem:new Oi(n,t.schema,t.table,t.backend,t.connectionId)})});break}default:}}async loadMrsServices(e){try{let t=e.treeItem,s=await t.backend.mrs.listServices();e.services=s.map(i=>{let o=i.urlContextRoot;return i.urlHostName&&(o=o+` (${i.urlHostName})`),{parent:e,type:"mrsService",treeItem:new Ai(o,i,t.backend,t.connectionId),schemas:[],contentSets:[],authApps:[]}});let n=await t.backend.mrs.listRouters(10);e.routers=n.map(i=>({parent:e,type:"mrsRouter",treeItem:new Ti(i.address,i,t.backend,t.connectionId,this.requiredRouterVersion!==void 0?nd(this.requiredRouterVersion,i.version)>0:!1)})),this.#e=!1}catch(t){this.#e||(Ce.window.setStatusBarMessage(`An error occurred while retrieving MRS content. Error: ${t instanceof Error?t.message:String(t)??"<unknown>"}`,1e4),this.#e=!0),e.services=[],e.routers=[]}}loadMrsServiceEntries=async e=>{try{let t=e.treeItem,s=await t.backend.mrs.listSchemas(t.value.id);e.schemas=s.map(o=>({parent:e,type:"mrsSchema",treeItem:new Mi(`${o.requestPath} (${o.name})`,o,t.backend,t.connectionId),dbObjects:[]}));let n=await t.backend.mrs.listContentSets(t.value.id);e.contentSets=n.map(o=>({parent:e,type:"mrsContentSet",treeItem:new Ci(`${o.requestPath}`,o,t.backend,t.connectionId),files:[]}));let i=await t.backend.mrs.getAuthApps(t.value.id);e.authApps=i.map(o=>{let a=o.name??"unknown",l=o.authVendor??"unknown";return{parent:e,type:"mrsAuthApp",treeItem:new xi(`${a} (${l})`,o,t.backend,t.connectionId),users:[]}}),this.#e=!1}catch(t){this.#e||(Ce.window.setStatusBarMessage(`An error occurred while retrieving MRS services. Error: ${t instanceof Error?t.message:String(t)??"<unknown>"}`,1e4),this.#e=!0),e.schemas=[],e.contentSets=[],e.authApps=[]}};loadMrsAuthAppUsers=async e=>{try{let t=e.treeItem,s=await t.backend.mrs.listUsers(void 0,t.value.id);e.users=s.map(n=>({parent:e,type:"mrsUser",treeItem:new _i(n.name??"unknown",n,t.backend,t.connectionId)})),this.#e=!1}catch(t){this.#e||(Ce.window.setStatusBarMessage(`An error occurred while retrieving MRS users. Error: ${t instanceof Error?t.message:String(t)??"<unknown>"}`,1e4),this.#e=!0),e.users=[]}};loadMrsContentSetFiles=async e=>{try{let t=e.treeItem,s=await t.backend.mrs.listContentFiles(t.value.id);e.files=s.map(n=>({parent:e,type:"mrsContentFile",treeItem:new wi(`${n.requestPath} (${ed(n.size)})`,n,t.backend,t.connectionId)})),this.#e=!1}catch(t){this.#e||(Ce.window.setStatusBarMessage(`An error occurred while retrieving MRS content files. Error: ${t instanceof Error?t.message:String(t)??"<unknown>"}`,1e4),this.#e=!0),e.files=[]}};async loadMrsDbObjects(e){let t=e.treeItem;try{let s=await t.backend.mrs.listDbObjects(t.value.id);e.dbObjects=s.map(n=>({parent:e,type:"mrsDbObject",treeItem:new Ei(`${n.requestPath} (${n.name})`,n,t.backend,t.connectionId)})),this.#e=!1}catch(s){this.#e||(Ce.window.setStatusBarMessage(`An error occurred while retrieving MRS db objects. Error: ${s instanceof Error?s.message:String(s)??"<unknown>"}`,1e4),this.#e=!0),e.dbObjects=[]}}refreshConnections=e=>(this.refresh(e?.entry),Promise.resolve(!0));proxyRequest=async e=>{switch(e.original.requestType){case"sqlSetCurrentSchema":{let t=e.original.parameter,s=this.connections.find(n=>n.treeItem.details.id===t.connectionId);if(s&&s.currentSchema!==t.schema)return s.currentSchema=t.schema,this.refreshConnections({entry:s});break}case"refreshConnections":{let t=e.original.parameter;return this.refreshConnections(t)}case"connectionAdded":{let t=e.original.parameter,s=this.connections.find(n=>n.treeItem.details.id===t.id);if(!s){let n;t.dbType==="MySQL"?n=new rr(t,new Te):n=new sr(t,new Te),s={id:r.nextId++,type:"connection",isOpen:!1,openEditors:0,currentSchema:"",treeItem:n,schemaEntries:[]},this.connections.push(s),this.refresh()}break}case"connectionUpdated":{let t=e.original.parameter,s=this.connections.find(n=>n.treeItem.details.id===t.id);if(s){let n;t.dbType==="MySQL"?n=new rr(t,new Te):n=new sr(t,new Te),s.treeItem=n,this.refresh(s)}break}case"connectionRemoved":{let t=e.original.parameter,s=this.connections.find(n=>n.treeItem.details.id===t.id);s&&(await s.treeItem.backend.closeSession(),this.connections.splice(this.connections.indexOf(s),1)),this.refresh();break}case"editorsChanged":{let t=e.original.parameter,s=this.connections.find(n=>n.treeItem.details.id===t.connectionId);if(s){if(t.opened)++s.openEditors;else if(--s.openEditors,s.openEditors===0)return s.currentSchema="",this.refreshConnections({entry:s})}return Promise.resolve(!0)}default:}return Promise.resolve(!1)}};var Ki=class{constructor(e){this.context=e;this.setupEnvironment(),b.register("settingsChanged",this.updateVscodeSettings),b.register("webSessionStarted",t=>(R.sessionId=t.sessionUuid,R.localUserMode=t.localUserMode??!1,R.userName===""?R.localUserMode&&Se.users.authenticate("LocalAdministrator","").then(s=>{s&&this.onAuthentication(s)}).catch(s=>{Re("Internal error: "+String(s),!0)}):(R.loadProfile(t.activeProfile),this.activeProfile=t.activeProfile),Promise.resolve(!0))),b.register("connectedToUrl",this.connectedToUrl),b.register("proxyRequest",this.proxyRequest)}url;providers=[];lastActiveProvider;activeProfile;updatingSettings=!1;connectionsProvider=new Wi;dbEditorCommandHandler=new ni(this.connectionsProvider);shellConsoleCommandHandler=new vi;notebookProvider=new ii;mrsCommandHandler=new bi;mdsCommandHandler=new mi;scriptsTreeDataProvider;shellTasksTreeDataProvider;shellTasks=[];moduleDataCategories=new Map;#e=new Map;get connections(){return this.connectionsProvider.connections}closeAllTabs(){this.providers.forEach(e=>{e.close()}),this.providers=[],this.dbEditorCommandHandler.clear(),this.lastActiveProvider=void 0,this.shellConsoleCommandHandler.closeProviders()}async addNewShellTask(e,t,s,n=!0,i){let o=new an(e,this.taskPromptCallback,this.taskMessageCallback);this.shellTasks.push(o),this.shellTasksTreeDataProvider.refresh(),n&&Ot.show(),await o.runTask(t,s,i),this.shellTasksTreeDataProvider.refresh()}determineConnection=async(e,t)=>{let s=this.connectionsProvider.connections,n="Select a connection for SQL execution";if(!t){let l=O.workspace.getConfiguration("msg.editor").get("defaultDbConnection");if(l){let c=s.find(u=>u.treeItem.details.caption===l);if(!c)O.window.showErrorMessage(`The default Database Connection ${l} is not available anymore.`);else if(e&&c.treeItem.details.dbType!==e)O.window.showErrorMessage(`The default Database Connection ${l} is a ${String(c.treeItem.details.dbType)} connection. This function requires a ${String(e)} connection.`);else return c;n="Select another connection for SQL execution"}}if(e&&(s=s.filter(l=>l.treeItem.details.dbType===e)),s.length===0){e?O.window.showErrorMessage(`Please create a ${String(e)} Database Connection first.`):O.window.showErrorMessage("Please create a Database Connection first.");return}let i=s.map(l=>l.treeItem.details.caption),o=await O.window.showQuickPick(i,{title:n,matchOnDescription:!0,placeHolder:"Type the name of an existing DB connection"});return s.find(l=>l.treeItem.details.caption===o)};broadcastRequest=async(e,t,s)=>{await Promise.all(this.providers.map(n=>e===void 0||n!==e?n.runCommand(t,s):Promise.resolve()))};get currentProvider(){return this.lastActiveProvider?this.lastActiveProvider:this.providers.length>0?this.providers[this.providers.length-1]:this.newProvider}get newProvider(){if(this.url){let e=this.dbEditorCommandHandler.generateNewProviderCaption(),t=new qe(this.url,this.providerDisposed,this.providerStateChanged);return t.caption=e,this.providers.push(t),t}}setupEnvironment(){Cn.get,b.setRemoteTarget(this),this.dbEditorCommandHandler.setup(this),this.shellConsoleCommandHandler.setup(this),this.notebookProvider.setup(this),this.mrsCommandHandler.setup(this),this.mdsCommandHandler.setup(this);let e=()=>{let s=O.workspace.getConfiguration("msg.debugLog").get("level","INFO");Se.core.setLogLevel(s).catch(n=>{O.window.showErrorMessage("Error while setting log level: "+String(n))})};e(),this.context.subscriptions.push(O.workspace.onDidChangeConfiguration(t=>{t.affectsConfiguration("msg")&&(e(),this.updateProfileSettings())})),this.shellTasksTreeDataProvider=new hn(this.shellTasks),this.context.subscriptions.push(O.window.registerTreeDataProvider("msg.shellTasks",this.shellTasksTreeDataProvider)),this.context.subscriptions.push(O.commands.registerCommand("msg.selectProfile",async()=>{await this.selectProfile()})),this.context.subscriptions.push(O.commands.registerCommand("msg.dumpSchemaToDisk",t=>{t&&O.window.showOpenDialog({title:"Select an output folder for the dump.",openLabel:"Select Dump Folder",canSelectFiles:!1,canSelectFolders:!0,canSelectMany:!1}).then(s=>{let n=t.treeItem;if(s&&s.length===1){let i=["--","util","dump-schemas",n.schema,"--outputUrl",s[0].fsPath];this.addNewShellTask(`Dump Schema ${n.schema} to Disk`,i,n.connectionId).then(()=>{this.shellTasksTreeDataProvider.refresh()})}})})),this.context.subscriptions.push(O.commands.registerCommand("msg.dumpSchemaToDiskForMds",t=>{t&&O.window.showOpenDialog({title:"Select an output folder for the dump.",openLabel:"Select Dump Folder",canSelectFiles:!1,canSelectFolders:!0,canSelectMany:!1}).then(s=>{let n=t.treeItem;if(s&&s.length===1){let i=["--","util","dump-schemas",n.schema,"--outputUrl",s[0].fsPath,"--ocimds","true","--compatibility","create_invisible_pks,force_innodb,skip_invalid_accounts,strip_definers,strip_restricted_grants,strip_tablespaces"];this.addNewShellTask(`Dump Schema ${n.schema} to Disk`,i,n.connectionId).then(()=>{this.shellTasksTreeDataProvider.refresh()})}})})),this.context.subscriptions.push(O.commands.registerCommand("msg.loadDumpFromDisk",t=>{t&&O.window.showOpenDialog({title:"Select a folder that contains a MySQL Shell dump.",openLabel:"Select Dump Folder",canSelectFiles:!1,canSelectFolders:!0,canSelectMany:!1}).then(s=>{if(s&&s.length===1){let n=["--","util","load-dump",s[0].fsPath],i="",o=s[0].fsPath.match(/([^/]*)\/*$/);o&&o.length>1&&(i=o[1]+" "),this.addNewShellTask(`Loading Dump ${i}from Disk`,n,t.treeItem.details.id).then(()=>{this.shellTasksTreeDataProvider.refresh(),O.commands.executeCommand("msg.refreshConnections")})}})}))}async onAuthentication(e){this.activeProfile=e,(await Se.modules.listDataCategories()).forEach(s=>{this.moduleDataCategories.set(s.name,s)}),await this.dbEditorCommandHandler.refreshConnectionTree(),O.commands.executeCommand("msg.mds.refreshOciProfiles")}updateProfileSettings(){if(!this.updatingSettings){this.updatingSettings=!0;let e=(s,n)=>{s?.forEach(i=>{i.values.forEach(o=>{let a=n?.get(`${i.key}.${o.key}`);a!=null&&Qe.set(o.id,a)}),e(i.children,n)})},t=ln.children;t&&t.forEach(s=>{let n=O.workspace.getConfiguration(`msg.${s.key}`);s.values.forEach(i=>{let o=n.get(i.key);o!=null&&Qe.set(i.id,o)}),e(s.children,n)}),Qe.saveSettings(),this.updatingSettings=!1}}updateVscodeSettings=async e=>{if(!this.updatingSettings){if(this.updatingSettings=!0,e){let t=e.key.split(".");if(t.length===3){let s=O.workspace.getConfiguration(`msg.${t[0]}`);s.get(`${t[1]}.${t[2]}`)!==e.value&&await s.update(`${t[1]}.${t[2]}`,e.value,O.ConfigurationTarget.Global)}}else{let t=ln.children;if(t){let s=async(n,i)=>{if(n&&i)for await(let o of n){for await(let a of o.values){let l=Qe.get(a.id),c=i.get(`${o.key}.${a.key}`);l!==c&&await i.update(`${o.key}.${a.key}`,l,O.ConfigurationTarget.Global)}await s(o.children,i)}};for await(let n of t)if(n.key!=="theming"){let i=O.workspace.getConfiguration(`msg.${n.key}`);for await(let o of n.values){let a=Qe.get(o.id),l=i.get(o.key);a!==l&&await i.update(o.key,a,O.ConfigurationTarget.Global)}await s(n.children,i)}}}this.updatingSettings=!1}return!0};async selectProfile(){if(this.activeProfile){let e=await Se.users.listProfiles(this.activeProfile.userId),t=e.map(n=>n.name),s=await O.window.showQuickPick(t,{title:"Activate a Profile",matchOnDescription:!0,placeHolder:"Type the name of an existing profile"});if(s){let n=e.find(i=>i.name===s);n&&(await Se.users.setCurrentProfile(n.id),O.window.setStatusBarMessage("Profile set successfully",5e3))}}}taskPromptCallback=(e,t)=>new Promise(s=>{let n=e.match(/\[([\w\d\s/]+)\]:\s*?$/);if(n&&n.length===2&&n.index){let i=n[1].split("/");for(let o=0;o<i.length;o++)i[o]=i[o].charAt(0).toUpperCase()+i[o].slice(1);O.window.showInformationMessage(e.substring(0,n.index),...i).then(o=>{s(o)})}else O.window.showInputBox({title:e,password:t}).then(i=>{s(i)})});taskMessageCallback=e=>{typeof e=="string"?Ot.append(e):Ot.append(JSON.stringify(e))};connectedToUrl=e=>(this.url=e,this.closeAllTabs(),Promise.resolve(!0));providerDisposed=e=>{let t=this.providers.findIndex(s=>s===e);t>-1&&this.providers.splice(t,1),this.lastActiveProvider===e&&(this.lastActiveProvider=void 0),this.dbEditorCommandHandler.providerClosed(e)};providerStateChanged=(e,t)=>{t&&(this.lastActiveProvider=e,this.lastActiveProvider.reselectLastItem()),this.dbEditorCommandHandler.providerStateChanged(e,t)};proxyRequest=e=>{switch(e.original.requestType){case"updateStatusbar":return this.updateStatusbar(e.original.parameter),Promise.resolve(!0);case"connectionAdded":case"connectionUpdated":case"connectionRemoved":case"refreshConnections":return new Promise(t=>{b.broadcastRequest(e.provider,e.original.requestType,e.original.parameter).then(()=>{t(!0)})});case"editorExecuteOnHost":{let t=e.original.parameter;return new Promise(s=>{b.broadcastRequest(e.provider,"editorRunCode",t).then(()=>{s(!0)})})}default:}return Promise.resolve(!1)};updateStatusbar=e=>{e.forEach(t=>{if(t.text){let s=this.#e.get(t.id);s?(clearTimeout(s[1]),s[1]=setTimeout(()=>{s?.[0].dispose(),this.#e.delete(t.id)},t.hideAfter??25e3)):(s=[O.window.createStatusBarItem(),setTimeout(()=>{s?.[0].dispose(),this.#e.delete(t.id)},t.hideAfter??25e3)],this.#e.set(t.id,s),s[0].show()),s[0].text=t.text}else{let s=this.#e.get(t.id);s&&(s[0].dispose(),clearTimeout(s[1]),this.#e.delete(t.id))}})}};var Pe=require("vscode"),Rg=require("path"),ur=require("os");var Dg=k(_g(),1),Ng=r=>`<style>
    body {
        background-color: var(--vscode-editor-background);
    }
    #welcome {
        z-index: 2;
        display: flex;
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        color: var(--vscode-editor-foreground);
        flex-direction: column;
        align-items: center;
        justify-content: center;
    }
    #sakilaLogo {
        margin: 8px 0px 8px 0px;
        width: 160px;
        height: 160px;
        min-height: 160px;
        min-width: 160px;
        background-color: hsl(200, 65%, 40%);
        mask-image: url(${r.toString()}/images/welcome/mysqlsh.svg);
        -webkit-mask-image: url(${r.toString()}/images/welcome/mysqlsh.svg);
    }
    #pages .page {
        display: flex;
        height: 250px;
        width: 100%;
        max-width: 600px;
        flex-direction: column;
        align-items: center;
        justify-content: center;
    }
    .inactivePage {
        display: none !important;
    }
    h2 {
        margin-top: 15px;
        text-align: center;
        font-size: 25pt;
        font-weight: 100;
    }
    h3 {
        margin-top: 11px;
        text-align: center;
        font-size: 14pt;
        font-weight: 400;
    }
    p {
        text-align: center;
        font-size: 11pt;
        font-weight: 100;
        line-height: 13pt;
        margin-left: 30px;
        margin-right: 30px;
    }
    .pWithImg {
        text-align: left;
        font-size: 11pt;
        font-weight: 100;
        line-height: 13pt;
        margin-left: 30px;
        margin-right: 30px;
    }
    .pError {
        color: red;
        font-weight: 400;
    }
    .links {
        display: flex;
        flex-direction: row;
        justify-content: center;
        font-size: 11pt;
        font-weight: 100;
        padding-top: 10px;
        padding-bottom: 60px;
        white-space: nowrap;
    }
    .links a {
        color: var(--vscode-textLink-foreground);
        text-decoration: none;
        font-weight: 500;
        padding-left: 30px;
        padding-right: 30px;
    }
    .welcomeControls {
        display: flex;
        width: 100%;
        max-width: 600px;
        flex-direction: row;
        align-items: center;
        justify-content: center;
    }
    input[type=button] {
        margin: 8px 0px 0px 10px;
        width: 200px;
        height: 32px;
        color: var(--vscode-button-foreground);
        background-color: var(--vscode-button-background);
        border-style: none;
    }
    #cancelBtn {
        display: none;
    }
    .disabledBtn {
        color: var(--vscode-tab-inactiveForeground) !important;
        background-color: var(--vscode-tab-inactiveBackground) !important;
    }
    .CopyrightText {
        margin-top: 80px;
        font-size: 10px;
        font-weight: 100;
        color: var(--vscode-tab-unfocusedInactiveForeground);
    }
    #waitForConfirmation {
        width: 80px;
        display: block;
    }
    .pingEffect {
        display: inline-block;
        position: relative;
        width: 80px;
        height: 80px;
    }
    .pingEffect div {
        position: absolute;
        border: 4px solid var(--vscode-foreground);
        opacity: 1;
        border-radius: 50%;
        animation: pingEffect 1s cubic-bezier(0, 0.2, 0.8, 1) infinite;
    }
    .pingEffect div:nth-child(2) {
    animation-delay: -0.5s;
    }
    @keyframes pingEffect {
        0% {
            top: 36px;
            left: 36px;
            width: 0;
            height: 0;
            opacity: 1;
        }
        100% {
            top: 0px;
            left: 0px;
            width: 72px;
            height: 72px;
            opacity: 0;
        }
    }
    code {
        font-size: 10pt;
        font-weight: 400;
        line-height: 12pt;
    }
</style>
`,o2=(r,e)=>`<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MySQL Shell Requirements Error</title>
    ${Ng(e)}
</head>
<body>
    <div id="welcome">
        <div id="sakilaLogo"></div>
        <h2>MySQL Shell for VS Code</h2>
        <div id="pages">
            <div id="page1" class="page">
                <h3>MySQL Shell Requirements Error.</h3>
                <p>The requirements of the MySQL Shell for VS Code extension could not be met.</p>
                <p id="requirementsError" class="pError">${r}</p>
                <p>You can safely remove the extension from VS Code.<br>
                    Please feel free to file a
                    <a href="https://bugs.mysql.com/report.php?category=Shell%20VSCode%20Extension">bug report</a>.</p>
            </div>
        </div>
    </div>
</body>
</html>`,Yu=(r,e)=>{let t=e?1:0,s=e?2:-100,n=e?`
        <div id="page2" class="page inactivePage">
            <h3>Installation of MS VC++ runtime libraries.</h3>
            <p>This extension requires the MS VC++ runtime libraries.
            Please download them from the following web page and install them on your system.</p>
            <p>
                <a href="https://docs.microsoft.com/en-US/cpp/windows/latest-supported-vc-redist?view=msvc-170">
                MS Visual C++ 2019 Redistributable</a>
            </p>
            <div id="checkError" class="pError"></div>
            <h3>Click the [Check VC++ Runtime] button after completing the installation.</h3>
            <br/>
        </div>
`:"";return`<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Welcome to MySQL Shell</title>
    ${Ng(r)}
</head>
<body>
    <div id="welcome">
        <div id="sakilaLogo"></div>
        <h2>MySQL Shell for VS Code</h2>
        <div id="pages">
            <div id="page1" class="page">
                <h3>Welcome to MySQL Shell for VS Code.</h3>
                <p>This extension provides the powerful tool set of MySQL Shell
                    to users of Visual Studio Code.</p>
                <div class="links">
                    <a href="https://blogs.oracle.com/mysql/post/introducing-mysql-shell-for-vs-code">
                        Learn More &gt;</a>
                    <a href="#">Browse Tutorial &gt;</a>
                    <a href="#">Read Docs &gt;</a>
                </div>
                <p>Please click [Next >] to complete the installation of the
                    MySQL Shell for VS Code extension.</p>
            </div>
            ${n}
            <div id="page3" class="page inactivePage">
                <h3>Installation of Certificate.</h3>
                <p>This extension needs a certificate to be installed on your local
                    user account in order to securely access the MySQL Shell.</p>
                <p class="pWithImg">
                    <img src="${r.toString()}/images/welcome/trustSettingDlg-${(0,ur.platform)()}.png"
                        width="171px" height="87px" alt="Trust Dialog" align="left" hspace="15px"/>
                    In the next step a security dialog ${(0,ur.platform)()==="linux"?"might":"will"} be shown
                    for you to confirm the installation of the certificate.<br>
                    <br>
                    Please click [Next >] to start the installation of the
                    MySQL Shell certificate.</p>
            </div>
            <div id="page4" class="page inactivePage">
                <h3>Installation of Certificate.</h3>
                <p>Please confirm the installation of the certificate in order
                    to complete the installation of the extension.</p>
                <div id="waitForConfirmation"><div class="pingEffect"><div></div><div></div></div></div>
                <p id="certError" class="pError"></p>
            </div>
            <div id="page5" class="page inactivePage">
                <h3>Installation Completed</h3>
                <p>Thank you for installing the MySQL Shell for VS Code extension!</p>
                <p>A reload of the VS Code window is needed to be able to use the MySQL Shell.</p>
                <h3>Please click the [Reload VS Code Window] button.</h3>
            </div>
        </div>
        <form name="welcomeControls" class="welcomeControls">
            <input id="cancelBtn" alt="Cancel" type="button" value="Cancel"></input>
            <input id="nextBtn" alt="Next" type="button" value="Next >"></input>
        </form>
        <div class="CopyrightText">&copy; 2022, 2023, Oracle Corporation and/or its affiliates.</div>
    </div>
    <script>
        (function() {
            const vscode = acquireVsCodeApi();
            const pageInstallCert = 3 + ${t};
            const pageLast = 4 + ${t};
            const vcRuntimePage = ${s};
            const nextBtn = document.getElementById('nextBtn');
            const cancelBtn = document.getElementById('cancelBtn');
            var currentPage = 1;
            var restartWizard = false;

            function showPage(pageIndex) {
                const pagesElement = document.getElementById("pages");

                for (let i = 0; i < pagesElement.children.length; i++) {
                    pagesElement.children[i].classList.add("inactivePage");
                }

                if (pageIndex-1 < pagesElement.children.length) {
                    pagesElement.children[pageIndex-1].classList.remove("inactivePage");
                }
            }

            // Register Next button click event
            nextBtn.addEventListener('click', () => {
                // On button click, move to next page
                if (currentPage == vcRuntimePage) {
                    nextBtn.disabled = true;
                    nextBtn.classList.add("disabledBtn");
                    document.getElementById("checkError").innerHTML = "";

                    vscode.postMessage({ command: 'recheckRuntime' });
                } else {
                    currentPage += 1;
                }

                // Process handling for the new page or restart the wizard if requested
                if (restartWizard) {
                    // Go to page 1 and reset the buttons
                    restartWizard = false;
                    document.getElementById("certError").innerHTML = "";
                    nextBtn.value = "Next >";
                    cancelBtn.style.display = "none";
                    document.getElementById("waitForConfirmation").style.display = "block";
                    currentPage = 1;
                } else if (currentPage == pageInstallCert) {
                    // Try to install the cert
                    nextBtn.disabled = true;
                    nextBtn.classList.add("disabledBtn");

                    vscode.postMessage({ command: 'installCert' });
                } else if (currentPage == vcRuntimePage) {
                    nextBtn.value = "Check VC++ Runtime";
                } else if (currentPage >= pageLast) {
                    // Close the webview panel
                    vscode.postMessage({ command: 'restartVsCode' });
                    // Ensure no other page is shown
                    currentPage = pageLast + 1;
                }

                showPage(currentPage);
            });

            // Register Cancel button click event
            cancelBtn.addEventListener('click', () => {
                // Close the webview panel
                vscode.postMessage({ command: 'done' });
            });

            // Handle the message inside the webview
            window.addEventListener('message', event => {

                const message = event.data; // The JSON data our extension sent

                switch (message.command) {
                    case 'reCheckVcRuntime':
                        if (message.output.includes("true")) {
                            showPage(vcRuntimePage + 1);
                            nextBtn.value = "Next >";
                            currentPage = vcRuntimePage + 1;
                        } else {
                            const errorMessage = "VC++ runtime library installation not detected.";
                            document.getElementById("checkError").innerHTML = errorMessage;

                            showPage(vcRuntimePage);
                            currentPage = vcRuntimePage;
                        }
                        nextBtn.disabled = false;
                        nextBtn.classList.remove("disabledBtn");
                        break;

                    case 'installCertResult':
                        if (message.output.includes("true")) {
                            showPage(pageLast);

                            nextBtn.value = "Reload VS Code Window";
                            nextBtn.disabled = false;
                            nextBtn.classList.remove("disabledBtn");

                            cancelBtn.style.display = "none";
                            restartWizard = false;
                        } else if (message.output.includes("ERROR")) {
                            document.getElementById("waitForConfirmation").style.display = "none";
                            document.getElementById("certError").innerHTML = message.output;

                            nextBtn.value = "Restart Setup Wizard";
                            nextBtn.disabled = false;
                            nextBtn.classList.remove("disabledBtn");

                            cancelBtn.style.display = "block";
                            restartWizard = true;
                        }

                        break;
                }
            });
        }())
    </script>
</body>
</html>`},kg=()=>new Promise((r,e)=>{(0,ur.platform)()==="win32"?Dg.promisified.list(["HKLM\\SOFTWARE\\WOW6432Node\\Microsoft\\VisualStudio\\14.0\\VC\\Runtimes\\X64","HKLM\\SOFTWARE\\Microsoft\\VisualStudio\\14.0\\VC\\Runtimes\\X64"]).then(t=>{let s=!1;for(let n in t)if(t[n].exists){s=!0;break}r(s)}).catch(t=>{e(`C++ Runtime availability could not checked: ${String(t)}`)}):r(!1)}),Og=r=>{r.subscriptions.push(Pe.commands.registerCommand("msg.runWelcomeWizard",()=>{let e=Pe.window.createWebviewPanel("mysqlShellInitialSetup","Welcome to MySQL Shell",Pe.ViewColumn.One,{enableScripts:!0,retainContextWhenHidden:!0,localResourceRoots:[Pe.Uri.file((0,Rg.join)(r.extensionPath,"images"))]}),t="",s=(0,ur.platform)();if(s==="darwin"||s==="win32"){let i=(0,ur.release)().match(/(\d*)\.(\d*)\.(\d*)/),o=i&&i.length>1?parseInt(i[1],10):0;s==="darwin"&&o<20?t="This extension requires macOS 11 Big Sur or later.":s==="win32"&&o<10&&(t="This extension requires Windows 10 or later.")}let n=e.webview.asWebviewUri(Pe.Uri.file(r.extensionPath));t?e.webview.html=o2(t,n):s==="win32"?kg().then(i=>{e.webview.html=Yu(n,!i)}).catch(i=>{Re(String(i),!0),e.webview.html=Yu(n,!1)}):e.webview.html=Yu(n,!1),e.webview.onDidReceiveMessage(i=>{switch(i.command){case"installCert":{let a=Pe.workspace.getConfiguration("msg.debugLog").get("level","INFO"),l={rootPath:r.extensionPath,inDevelopment:r.extensionMode===Pe.ExtensionMode.Development,parameters:["--","gui","core","install-shell-web-certificate","--replace_existing=true"],logLevel:a,onStdOutData:c=>{Re(c),!c.startsWith("Starting embedded MySQL Shell")&&!c.includes("DEBUG")&&e.webview.postMessage({command:"installCertResult",output:c})}};Le.runMysqlShell(l);return}case"restartVsCode":{e.dispose(),Pe.commands.executeCommand("workbench.action.reloadWindow");return}case"recheckRuntime":{kg().then(o=>{e.webview.postMessage({command:"reCheckVcRuntime",output:o.toString()})}).catch(o=>{Re(String(o))});return}case"done":{e.dispose();return}default:}},void 0,r.subscriptions)}))};var Ot,hr,co,Qu,Ks=!1,a2="This will close all MySQL Shell tabs and restart the underlying process. After that a new connection will automatically be established.",l2="This will completely reset the MySQL Shell for VS Code extension by deleting the web certificate and user settings directory.",c2="The MySQL Shell for VS Code extension has been reset. Please restart VS Code to initialize the extension again or press [Cancel] and remove the Extension from the Extensions View Container.",Re=(r,e=!1)=>{co.appendLine(r),e&&co.show(!0)},u2=r=>{!Ks&&r.includes("Sending session response...")&&(Ks=!0),Ks||(r.includes("Certificate is not installed.")?M.window.showInformationMessage("The MySQL Shell for VS Code extension cannot run because the web certificate is not installed. Do you want to run the Welcome Wizard to install it?","Run Welcome Wizard","Cancel").then(e=>{e!=="Cancel"&&M.commands.executeCommand("msg.runWelcomeWizard")}):r.includes("Certificate is not correctly installed.")&&M.window.showInformationMessage("The MySQL Shell for VS Code extension cannot run because the web certificate is incorrectly installed. Do you want to run the Welcome Wizard to fix it?","Run Welcome Wizard","Cancel").then(e=>{e!=="Cancel"&&M.commands.executeCommand("msg.runWelcomeWizard")})),Re(r)},dr=new Le(u2,r=>{Re(r.message,!0)}),d2=async r=>{let e=await M.env.asExternalUri(M.Uri.parse(r.href));return new URL(e.toString().replace("%3D","="))},h2=r=>{co=M.window.createOutputChannel("MySQL Shell for VS Code"),Ot=M.window.createOutputChannel("MySQL Shell - Tasks"),hr=M.window.createStatusBarItem(M.StatusBarAlignment.Left),hr.hide(),hr.tooltip="MySQL Task Process",Qu=new Ki(r),Og(r),r.subscriptions.push(M.commands.registerCommand("msg.restartShell",()=>{M.window.showWarningMessage(a2,"Restart MySQL Shell","Cancel").then(async i=>{i==="Restart MySQL Shell"&&(Qu.closeAllTabs(),h.get.disconnect(),await dr.exitProcess(),R.clearSessionData(),dr.startShellAndConnect(r.extensionPath,r.extensionMode===M.ExtensionMode.Development,!0))})})),r.subscriptions.push(M.commands.registerCommand("msg.connectToShell",()=>{let i=M.workspace.getConfiguration("msg.shell").get("externalUrl");M.window.showInputBox({title:"Connect to a MySQL Instance",value:i,prompt:"Enter the address of a MySQL Shell instance to connect to. Leave the field empty to start and connect to a local MySQL Shell"}).then(async o=>{Qu.closeAllTabs(),h.get.disconnect(),await dr.exitProcess(),R.clearSessionData();let l=M.workspace.getConfiguration("msg.debugLog").get("level","INFO");dr.startShellAndConnect(r.extensionPath,r.extensionMode===M.ExtensionMode.Development,!0,l,o)})})),r.subscriptions.push(M.commands.registerCommand("msg.resetExtension",()=>{M.window.showWarningMessage(l2,"Reset Extension","Cancel").then(i=>{if(i==="Reset Extension"){r.globalState.update("MySQLShellInitialRun","");let a=M.workspace.getConfiguration("msg.debugLog").get("level","INFO"),l={rootPath:r.extensionPath,inDevelopment:r.extensionMode===M.ExtensionMode.Development,parameters:["--","gui","core","remove-shell-web-certificate"],logLevel:a,onStdOutData:c=>{if(c.includes("true")){let u=Le.getShellUserConfigDir(r.extensionMode===M.ExtensionMode.Development);u.endsWith(Le.extensionShellUserConfigFolderBaseName)&&(0,Hs.rmSync)(u,{recursive:!0,force:!0}),M.window.showWarningMessage(c2,"Restart VS Code","Cancel").then(d=>{d==="Restart VS Code"&&M.commands.executeCommand("workbench.action.reloadWindow")})}else!c.startsWith("Starting embedded MySQL Shell")&&!c.includes("DEBUG")&&!c.includes("LC_ALL")&&M.window.showInformationMessage(`The following error occurred while deleting the certificate: ${c} Cancelled reset operation.`)}};Le.runMysqlShell(l)}})})),r.subscriptions.push(M.commands.registerCommand("msg.fileBugReport",()=>{let i=M.extensions.getExtension("Oracle.mysql-shell-for-vs-code").packageJSON.version||"1.0.0",o,a;switch((0,$s.platform)()){case"darwin":{o="6";break}case"win32":{o="7";break}default:{o="5";break}}switch((0,$s.arch)()){case"arm":case"arm64":{a="3";break}case"x86":{a="2";break}default:{a="1";break}}M.env.openExternal(M.Uri.parse(`https://bugs.mysql.com/report.php?category=Shell%20VSCode%20Extension&version=${i}&os=${o}&cpu_arch=${a}`))})),r.subscriptions.push(M.commands.registerCommand("msg.hasLaunchedSuccessfully",async()=>(await Js(3e3,()=>Ks),Ks)));let e=M.extensions.getExtension("Oracle.mysql-shell-for-vs-code"),t=e.packageJSON.version||"1.0.0",s=r.globalState.get("MySQLShellLastRunVersion");if((!s||s===""||s!==t)&&(r.globalState.update("MySQLShellLastRunVersion",t),(0,$s.platform)()==="darwin")){let i=(0,Xu.join)(r.extensionPath,"shell");(0,Hs.existsSync)(i)&&Ju.execSync(`xattr -rc ${i}`);let o=(0,Xu.join)(r.extensionPath,"router");(0,Hs.existsSync)(o)&&Ju.execSync(`xattr -rc ${o}`)}let n=r.globalState.get("MySQLShellInitialRun");if((!n||n==="")&&!re.testsRunning)r.globalState.update("MySQLShellInitialRun",t),M.commands.executeCommand("msg.runWelcomeWizard");else{let i=M.workspace.getConfiguration("msg.shell").get("useExternal"),o;i&&(o=M.workspace.getConfiguration("msg.shell").get("externalUrl"));let a=e.extensionKind===M.ExtensionKind.Workspace&&M.env.remoteName==="ssh-remote";co.appendLine(`Running on a ${a?"ssh-remote":"local"} VS Code session.`);let l=M.workspace.getConfiguration("msg.debugLog").get("level","INFO"),c=M.workspace.getConfiguration("msg.shell").get("enforceHttps",!0),u=r.extensionMode===M.ExtensionMode.Development;a?dr.startShellAndConnect(r.extensionPath,u,c,l,o,d2):dr.startShellAndConnect(r.extensionPath,u,c,l,o)}},p2=()=>{b.unregister(),h.get.disconnect(),dr.exitProcess()},m2,Vi=r=>{clearTimeout(m2),hr.text=`MySQL Shell: ${r}`,hr.show(),setTimeout(()=>{hr.hide()},5e3)};0&&(module.exports={activate,deactivate,printChannelOutput,showStatusText,statusBarItem,taskOutputChannel});
