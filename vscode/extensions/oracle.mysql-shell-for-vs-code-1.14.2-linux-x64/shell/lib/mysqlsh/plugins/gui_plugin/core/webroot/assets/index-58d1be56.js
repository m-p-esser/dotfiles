var e,t,n,i,o,s,r,a,l,d,c,u,h,p,m,g,f,b,v,S,C,w,y,k,I,D,T,R,x,E,M,P,L,F,A,B,N,O,_,G,U,q,V,z,H,j,W,$,K,Q,Y,J,X,Z,ee,te,ne,ie,oe,se,re,ae,le,de,ce,ue,he=Object.defineProperty,pe=(e,t,n)=>(((e,t,n)=>{t in e?he(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,"symbol"!=typeof t?t+"":t,n),n),me=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)},ge=(e,t,n)=>(me(e,t,"read from private field"),n?n.call(e):t.get(e)),fe=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},be=(e,t,n,i)=>(me(e,t,"write to private field"),i?i.call(e,n):t.set(e,n),n),ve=(e,t,n)=>(me(e,t,"access private method"),n);import{B as Se,a as Ce,c as we,C as ye,_ as ke,o as Ie,d as De,F as Te,k as Re,A as xe,e as Ee,f as Me,S as Pe,h as Le,n as Fe,w as Ae,i as Be,T as Ne,R as Oe,V as _e,t as Ge,j as Ue,l as qe,m as Ve,s as ze,p as He,q as je,r as We,I as $e,u as Ke,v as Qe,x as Ye,y as Je,z as Xe,D as Ze,E as et,G as tt,H as nt,J as it,K as ot,L as st,M as rt,N as at,O as lt,P as dt,Q as ct,U as ut,W as ht,X as pt,Y as mt,Z as gt,$ as ft,a0 as bt,a1 as vt,a2 as St,a3 as Ct,a4 as wt,a5 as yt,a6 as kt,a7 as It,a8 as Dt}from"./dependencies-a10b35e1.js";import{T as Tt,D as Rt,S as xt,R as Et,M as Mt,a as Pt,b as Lt,F as Ft,I as At,E as Bt,c as Nt,d as Ot,e as _t}from"./tabulator-tables-4b52f00b.js";import{e as Gt,W as Ut,a as qt,b as Vt,c as zt,d as Ht,l as jt,_ as Wt,R as $t,P as Kt,S as Qt,K as Yt,f as Jt}from"./monaco-editor-3ec5f4cc.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const n of e)if("childList"===n.type)for(const e of n.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();const Xt="/assets/settings-d658a628.svg",Zt=class _RequisitionPipeline{constructor(e){pe(this,"pendingRequests",[]),pe(this,"announceTimer"),pe(this,"watchDog"),pe(this,"announcePromise"),pe(this,"nextJobId",0),pe(this,"addJob",(e=>(this.pendingRequests.push(...e.map((e=>({...e,jobId:this.nextJobId})))),++this.nextJobId,this.announceTimer||(this.announceTimer=setInterval(this.announceRequest,_RequisitionPipeline.announceInterval)),Promise.resolve(!0)))),pe(this,"announceRequest",(()=>{if(!this.announcePromise&&this.pendingRequests.length>0){const e=this.pendingRequests[0];this.announcePromise=this.hub.execute(e.requestType,e.parameter),this.announcePromise.then((e=>{e?this.removeTopRequest():this.announcePromise=void 0})).catch((e=>{console.error(e),this.removeTopRequest()})),this.watchDog||(this.watchDog=setTimeout((()=>{this.cancelCurrentJob()}),1e3*_RequisitionPipeline.offeringTime))}})),pe(this,"removeTopRequest",(()=>{this.watchDog&&(clearTimeout(this.watchDog),this.watchDog=void 0),this.announcePromise=void 0,this.pendingRequests.shift(),0===this.pendingRequests.length&&this.announceTimer&&(clearInterval(this.announceTimer),this.announceTimer=void 0)})),pe(this,"cancelCurrentJob",(()=>{if(!this.watchDog)return;clearTimeout(this.watchDog),this.watchDog=void 0,this.announcePromise=void 0;const e=this.pendingRequests.shift();if(e)for(;this.pendingRequests.length>0&&this.pendingRequests[0].jobId===e.jobId;)this.pendingRequests.shift();0===this.pendingRequests.length&&this.announceTimer&&(clearInterval(this.announceTimer),this.announceTimer=void 0)})),this.hub=e,e.register("job",this.addJob)}};pe(Zt,"offeringTime",30),pe(Zt,"announceInterval",100);let en=Zt;const tn=new Map;class RequisitionHub{constructor(e="app"){pe(this,"registry",new Map),pe(this,"remoteTarget"),pe(this,"source"),pe(this,"requestPipeline"),pe(this,"register",((e,t)=>{if(this.registry.has(e)){const n=this.registry.get(e);-1===n.findIndex((e=>e===t))&&n.unshift(t)}else this.registry.set(e,[t])})),pe(this,"unregister",((e,t)=>{if(!e)return void this.registry.clear();const n=this.registry.get(e);if(n){const i=n.filter((e=>e!==t));i.length>0?this.registry.set(e,i):this.registry.delete(e)}})),pe(this,"registrations",(e=>{const t=this.registry.get(e);return(null==t?void 0:t.length)??0})),pe(this,"execute",(async(e,t)=>{const n=this.registry.get(e);if(n){const e=[];n.forEach((n=>{e.push(n(t))}));const i=await Promise.all(e);return Promise.resolve(i.some((e=>e)))}return Promise.resolve(!1)})),pe(this,"executeRemote",((e,t)=>{if(this.remoteTarget){if(this.remoteTarget.postMessage){const n={source:this.source,command:e,data:t};this.remoteTarget.postMessage(n,"*")}else this.remoteTarget.broadcastRequest&&this.remoteTarget.broadcastRequest(void 0,e,t);return!0}return!1})),pe(this,"broadcastRequest",(async(e,t,n)=>{var i;let o=!1;return e||o||(o=await this.execute(t,n)),(null==(i=this.remoteTarget)?void 0:i.broadcastRequest)?(await this.remoteTarget.broadcastRequest(e,t,n),o=!0):o||(o=this.executeRemote(t,n)),o})),this.source=e,this.requestPipeline=new en(this),this.setRemoteTarget()}static get instance(){return new RequisitionHub}setRemoteTarget(e){if(e)this.remoteTarget=e;else if("undefined"!=typeof window){if(window.webkit)this.remoteTarget=window.webkit.messageHandlers.hostChannel;else{const e=window.chrome;e&&e.webview&&(this.remoteTarget=e.webview)}this.remoteTarget?window.onNativeMessage=e=>{this.handleRemoteMessage(e)}:(this.remoteTarget=window.parent,window.addEventListener("message",(e=>{"app"!==e.data.source&&this.handleRemoteMessage(e.data)})),tn.embedded&&(document.addEventListener("keydown",(e=>{const t={source:this.source,command:"keydown",altKey:e.altKey,code:e.code,ctrlKey:e.ctrlKey,isComposing:e.isComposing,key:e.key,location:e.location,metaKey:e.metaKey,repeat:e.repeat,shiftKey:e.shiftKey};window.parent.postMessage(t,"*")})),document.addEventListener("keyup",(e=>{const t={type:"keyup",altKey:e.altKey,code:e.code,ctrlKey:e.ctrlKey,isComposing:e.isComposing,key:e.key,location:e.location,metaKey:e.metaKey,repeat:e.repeat,shiftKey:e.shiftKey};window.parent.postMessage(t,"*")}))))}}handleRemoteMessage(e){const t=e.command,n=e.data,i=this.registry.get(t);i&&i.forEach((e=>{e(n)}))}writeToClipboard(e){var t,n;if(tn.embedded){const i={source:this.source,command:"writeClipboard",text:e};null==(n=null==(t=this.remoteTarget)?void 0:t.postMessage)||n.call(t,i,"*")}else navigator.clipboard.writeText(e)}}(()=>{if("undefined"!=typeof window){window.location.search.substring(1).split("&").forEach((e=>{const t=e.split("=");if(t.length>1)if(tn.set(t[0],t[1]),"app"===t[0])tn.embedded=!0;else if("fontSize"===t[0]){const e=parseInt(t[1],10);isNaN(e)||(tn.fontSize=e)}else if("editorFontSize"===t[0]){const e=parseInt(t[1],10);isNaN(e)||(tn.editorFontSize=e)}}))}void 0!=={SOURCE_MAPS:"",WASMER_CACHE_DIR:"/Users/mzinner/.wasmer/cache",TERM_PROGRAM:"vscode",NODE:"/usr/local/bin/node",WASMER_DIR:"/Users/mzinner/.wasmer",INIT_CWD:"/Users/mzinner/git/shell-plugins/gui/frontend",SHELL:"/bin/zsh",TERM:"xterm-256color",TMPDIR:"/var/folders/tt/6ybm2lp556qg3_6gm4r93ndw0000gn/T/",npm_config_global_prefix:"/usr/local",TERM_PROGRAM_VERSION:"1.84.2",NODE_OPTIONS:"--max-old-space-size=16000",MallocNanoZone:"0",ORIGINAL_XDG_CURRENT_DESKTOP:"undefined",COLOR:"1",npm_config_noproxy:"",LC_ALL:"en_US.UTF-8",npm_config_local_prefix:"/Users/mzinner/git/shell-plugins/gui/frontend",USER:"mzinner",GOOGLE_DEFAULT_CLIENT_ID:"550135929089-tnk1us9e9580gbnuo899ucnhen7s35n7.apps.googleusercontent.com",GOOGLE_DEFAULT_CLIENT_SECRET:"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",COMMAND_MODE:"unix2003",npm_config_globalconfig:"/usr/local/etc/npmrc",SSH_AUTH_SOCK:"/private/tmp/com.apple.launchd.uzQ1FEBr0D/Listeners",__CF_USER_TEXT_ENCODING:"0x1F5:0x0:0x0",npm_execpath:"/usr/local/lib/node_modules/npm/bin/npm-cli.js",DBUSERNAME:"dba",GOOGLE_API_KEY:"AIzaSyAYrgMCZmdaW73BhOzbMSF02DBVhUE0mCk",PATH:"/Users/mzinner/git/shell-plugins/gui/frontend/node_modules/.bin:/Users/mzinner/git/shell-plugins/gui/node_modules/.bin:/Users/mzinner/git/shell-plugins/node_modules/.bin:/Users/mzinner/git/node_modules/.bin:/Users/mzinner/node_modules/.bin:/Users/node_modules/.bin:/node_modules/.bin:/usr/local/lib/node_modules/npm/node_modules/@npmcli/run-script/lib/node-gyp-bin:/usr/local/bin:/System/Cryptexes/App/usr/bin:/usr/bin:/bin:/usr/sbin:/sbin:/Applications/Little Snitch.app/Contents/Components:/var/run/com.apple.security.cryptexd/codex.system/bootstrap/usr/local/bin:/var/run/com.apple.security.cryptexd/codex.system/bootstrap/usr/bin:/var/run/com.apple.security.cryptexd/codex.system/bootstrap/usr/appleinternal/bin:/Users/mzinner/.wasmer/bin:/opt/homebrew/bin:/Users/mzinner/Library/Python/3.9/bin:/Users/mzinner/.wasmer/globals/wapm_packages/.bin",npm_package_json:"/Users/mzinner/git/shell-plugins/gui/frontend/package.json",__CFBundleIdentifier:"com.microsoft.VSCode",npm_config_init_module:"/Users/mzinner/.npm-init.js",npm_config_userconfig:"/Users/mzinner/.npmrc",PWD:"/Users/mzinner/git/shell-plugins/gui/frontend",npm_command:"run-script",EDITOR:"vi",npm_lifecycle_event:"build",LANG:"en_US.UTF-8",npm_package_name:"mysql-shell-gui",XPC_FLAGS:"0x0",DBPORT:"3306",VSCODE_GIT_ASKPASS_EXTRA_ARGS:"--ms-enable-electron-run-as-node",npm_config_npm_version:"10.1.0",npm_config_node_gyp:"/usr/local/lib/node_modules/npm/node_modules/node-gyp/bin/node-gyp.js",XPC_SERVICE_NAME:"0",npm_package_version:"1.14.2",HOME:"/Users/mzinner",SHLVL:"2",VSCODE_GIT_ASKPASS_MAIN:"/Applications/Visual Studio Code.app/Contents/Resources/app/extensions/git/dist/askpass-main.js",LOGNAME:"mzinner",npm_config_cache:"/Users/mzinner/.npm",npm_lifecycle_script:"bash ./scripts/production-build.sh",LC_CTYPE:"en_US.UTF-8",VSCODE_GIT_IPC_HANDLE:"/var/folders/tt/6ybm2lp556qg3_6gm4r93ndw0000gn/T/vscode-git-d5ee20e761.sock",npm_config_user_agent:"npm/10.1.0 node/v20.9.0 darwin arm64 workspaces/false",GIT_ASKPASS:"/Applications/Visual Studio Code.app/Contents/Resources/app/extensions/git/dist/askpass.sh",VSCODE_GIT_ASKPASS_NODE:"/Applications/Visual Studio Code.app/Contents/Frameworks/Code Helper (Plugin).app/Contents/MacOS/Code Helper (Plugin)",DBPASSWORD:"rootroot",COLORTERM:"truecolor",npm_config_prefix:"/usr/local",npm_node_execpath:"/usr/local/bin/node",_:"node_modules/.bin/vite",NODE_ENV:"production"}.VSCODE_PID&&void 0==={SOURCE_MAPS:"",WASMER_CACHE_DIR:"/Users/mzinner/.wasmer/cache",TERM_PROGRAM:"vscode",NODE:"/usr/local/bin/node",WASMER_DIR:"/Users/mzinner/.wasmer",INIT_CWD:"/Users/mzinner/git/shell-plugins/gui/frontend",SHELL:"/bin/zsh",TERM:"xterm-256color",TMPDIR:"/var/folders/tt/6ybm2lp556qg3_6gm4r93ndw0000gn/T/",npm_config_global_prefix:"/usr/local",TERM_PROGRAM_VERSION:"1.84.2",NODE_OPTIONS:"--max-old-space-size=16000",MallocNanoZone:"0",ORIGINAL_XDG_CURRENT_DESKTOP:"undefined",COLOR:"1",npm_config_noproxy:"",LC_ALL:"en_US.UTF-8",npm_config_local_prefix:"/Users/mzinner/git/shell-plugins/gui/frontend",USER:"mzinner",GOOGLE_DEFAULT_CLIENT_ID:"550135929089-tnk1us9e9580gbnuo899ucnhen7s35n7.apps.googleusercontent.com",GOOGLE_DEFAULT_CLIENT_SECRET:"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",COMMAND_MODE:"unix2003",npm_config_globalconfig:"/usr/local/etc/npmrc",SSH_AUTH_SOCK:"/private/tmp/com.apple.launchd.uzQ1FEBr0D/Listeners",__CF_USER_TEXT_ENCODING:"0x1F5:0x0:0x0",npm_execpath:"/usr/local/lib/node_modules/npm/bin/npm-cli.js",DBUSERNAME:"dba",GOOGLE_API_KEY:"AIzaSyAYrgMCZmdaW73BhOzbMSF02DBVhUE0mCk",PATH:"/Users/mzinner/git/shell-plugins/gui/frontend/node_modules/.bin:/Users/mzinner/git/shell-plugins/gui/node_modules/.bin:/Users/mzinner/git/shell-plugins/node_modules/.bin:/Users/mzinner/git/node_modules/.bin:/Users/mzinner/node_modules/.bin:/Users/node_modules/.bin:/node_modules/.bin:/usr/local/lib/node_modules/npm/node_modules/@npmcli/run-script/lib/node-gyp-bin:/usr/local/bin:/System/Cryptexes/App/usr/bin:/usr/bin:/bin:/usr/sbin:/sbin:/Applications/Little Snitch.app/Contents/Components:/var/run/com.apple.security.cryptexd/codex.system/bootstrap/usr/local/bin:/var/run/com.apple.security.cryptexd/codex.system/bootstrap/usr/bin:/var/run/com.apple.security.cryptexd/codex.system/bootstrap/usr/appleinternal/bin:/Users/mzinner/.wasmer/bin:/opt/homebrew/bin:/Users/mzinner/Library/Python/3.9/bin:/Users/mzinner/.wasmer/globals/wapm_packages/.bin",npm_package_json:"/Users/mzinner/git/shell-plugins/gui/frontend/package.json",__CFBundleIdentifier:"com.microsoft.VSCode",npm_config_init_module:"/Users/mzinner/.npm-init.js",npm_config_userconfig:"/Users/mzinner/.npmrc",PWD:"/Users/mzinner/git/shell-plugins/gui/frontend",npm_command:"run-script",EDITOR:"vi",npm_lifecycle_event:"build",LANG:"en_US.UTF-8",npm_package_name:"mysql-shell-gui",XPC_FLAGS:"0x0",DBPORT:"3306",VSCODE_GIT_ASKPASS_EXTRA_ARGS:"--ms-enable-electron-run-as-node",npm_config_npm_version:"10.1.0",npm_config_node_gyp:"/usr/local/lib/node_modules/npm/node_modules/node-gyp/bin/node-gyp.js",XPC_SERVICE_NAME:"0",npm_package_version:"1.14.2",HOME:"/Users/mzinner",SHLVL:"2",VSCODE_GIT_ASKPASS_MAIN:"/Applications/Visual Studio Code.app/Contents/Resources/app/extensions/git/dist/askpass-main.js",LOGNAME:"mzinner",npm_config_cache:"/Users/mzinner/.npm",npm_lifecycle_script:"bash ./scripts/production-build.sh",LC_CTYPE:"en_US.UTF-8",VSCODE_GIT_IPC_HANDLE:"/var/folders/tt/6ybm2lp556qg3_6gm4r93ndw0000gn/T/vscode-git-d5ee20e761.sock",npm_config_user_agent:"npm/10.1.0 node/v20.9.0 darwin arm64 workspaces/false",GIT_ASKPASS:"/Applications/Visual Studio Code.app/Contents/Resources/app/extensions/git/dist/askpass.sh",VSCODE_GIT_ASKPASS_NODE:"/Applications/Visual Studio Code.app/Contents/Frameworks/Code Helper (Plugin).app/Contents/MacOS/Code Helper (Plugin)",DBPASSWORD:"rootroot",COLORTERM:"truecolor",npm_config_prefix:"/usr/local",npm_node_execpath:"/usr/local/bin/node",_:"node_modules/.bin/vite",NODE_ENV:"production"}.JEST_WORKER_ID&&(tn.inExtension=!0)})();const nn=RequisitionHub.instance,on=(e,t)=>new Promise((n=>{const i=document.createElement("input");i.type="file",i.id="fileSelect",i.multiple=t,i.accept=e.join(","),document.body.appendChild(i),i.onchange=()=>{const e=i.files?Array.from(i.files):null;n(e),document.body.removeChild(i)},i.click()})),sn=(e,t)=>{const n=new Blob([e],{type:"text/plain"}),i=document.createElement("a");i.download=t,i.innerHTML="Download File",window.webkitURL?i.href=window.webkitURL.createObjectURL(n):(i.href=window.URL.createObjectURL(n),i.onclick=e=>{e.target&&document.body.removeChild(e.target)},i.style.display="none",document.body.appendChild(i)),i.click(),window.webkitURL?window.webkitURL.revokeObjectURL(i.href):window.URL.revokeObjectURL(i.href)},rn=(e,t,n)=>null!=t&&e<t?t:null!=n&&e>n?n:e,an=()=>{let e=(new Date).getTime(),t=performance&&performance.now&&1e3*performance.now()||0;return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(n=>{let i=16*Math.random();return e>0?(i=(e+i)%16|0,e=Math.floor(e/16)):(i=(t+i)%16|0,t=Math.floor(t/16)),("x"===n?i:7&i|8).toString(16)}))},ln=()=>{const e=an().replaceAll("-","");return Fn(e)},dn=(e,t)=>{let n=0,i=e.length-1;for(;n<=i;){const o=i+n>>1,s=t(e[o]);if(s>0)n=o+1;else{if(!(s<0))return o;i=o-1}}return-n-1},cn=e=>new Promise((t=>setTimeout(t,e))),un=e=>{if("object"!=typeof e)return e;const t={};for(const[n,i]of Object.entries(e))t[n]=un(i);return t},hn=e=>{if(e&&"object"!=typeof e)return;const t=e;if("symbol"==typeof t.symbol)switch(t.symbol.description){case"ignore":return{type:"ignore"};case"regex":return{type:"regex",parameters:t.parameters};case"list":return{type:"list",parameters:t.parameters}}},pn=(e,t)=>{if(e===t)return!0;if(void 0===e||void 0===t)return!1;const n=typeof e,i=typeof t,o=hn(e),s=hn(t);if(o||s){if(o&&s)return!1;const n=o?t:e,i=o??s;switch(null==i?void 0:i.type){case"ignore":return!0;case"regex":{const e=new RegExp(i.parameters);return"string"==typeof n&&null!==e.exec(n)}case"list":{if(!Array.isArray(n))return!1;const e=i.parameters.list;if(i.parameters.full&&n.length!==e.length)return!1;for(let t=0;t<e.length;++t)if(!pn(n[t],e[t]))return!1;return!0}default:return!1}}if("object"===n&&"object"===i){const n=e,i=t;if(Object.keys(n).length!==Object.keys(i).length)return!1;for(const e in n)if(!(e in i)||!pn(n[e],i[e]))return!1;return!0}return"object"!=typeof e&&"object"!=typeof t&&Object.is(e,t)},mn=e=>Function("'use strict';return ("+e+")")(),gn=(e,t,n)=>{const i={};for(const[o,s]of Object.entries(e)){let e=s;t.includes(o)||(Array.isArray(s)?e=fn(s,t,n):null!==s&&"object"==typeof s&&(e=gn(s,t,n))),i[n(s,o)]=e}return i},fn=(e,t,n)=>e.map((e=>Array.isArray(e)?fn(e,t,n):null!==e&&"object"==typeof e?gn(e,t,n):e)),bn="Enter",vn="Tab",Sn=" ",Cn="ArrowDown",wn="ArrowLeft",yn="ArrowRight",kn="ArrowUp",In="Escape",Dn="a",Tn=new Map([["(",")"],["{","}"],["[","]"],['"','"'],["'","'"],["`","`"]]),Rn=(e,t="`")=>{const n=Tn.get(t)??t;if(e.length>2){const i=e[0],o=e[e.length-1];if(t===i&&n===o)return e}return`${t}${e}${n}`},xn=(e,t="\"'`")=>{let n=e.trim();if(n.length>1){const e=n[0],i=n[n.length-1];if(t.includes(e)){Tn.get(e)===i&&(n=n.substring(1,n.length-1))}}return n},En=(e,t="px")=>{if(null!=e)return"number"==typeof e?`${e}${t}`:e},Mn=e=>{if(null==e||isNaN(e)||!isFinite(e)||e<0)return"invalid time";if(e<10){if(e<1)return 0===e?"0s":Math.floor(1e6*e)/1e3+"ms";const t=Math.floor(e);return e-t>0?`${e}s`:`${t}s`}{e=Math.round(e);const t=Math.floor(e/86400),n=Math.floor(e/3600)%24,i=Math.floor(e/60)%60,o=e%60;return(t>0?`0${t}`.slice(-2)+"d ":"")+(n>0?`0${n}`.slice(-2)+":":"")+(i>0?`0${i}`.slice(-2)+":":"")+(e>60?`0${o}`.slice(-2):`${o}s`)}},Pn=(e,t)=>`${t} ${e}${1===t||-1===t?"":"s"}`,Ln=(e,t)=>{if("string"!=typeof e)return"<invalid>";const n=Se.from(e,"base64").toString("hex");return t&&n.length>t?"0x"+n.substring(0,t)+"…":"0x"+n},Fn=e=>{e.startsWith("0x")&&(e=e.slice(2));return Se.from(e,"hex").toString("base64")},An=e=>/^[-+]?(\d+|Infinity)$/.test(e)?Number(e):NaN,Bn=e=>e.includes("_")||e.includes("-")?e.toLowerCase().replace(/([-_][a-z])/g,(e=>e.toUpperCase().replace("-","").replace("_",""))):e,Nn=e=>e.length<1?"":e.charAt(0).toUpperCase()+e.slice(1),On=e=>((e=e.replace(/[^\d\w,]/g,"")).includes("_")&&(e=Bn(e)),Nn(e)),_n=(e,t)=>{const n=e.split(/[\\/]/).pop()??"";return t&&n.endsWith(t)?n.substring(0,n.length-t.length):n};var Gn=(e=>(e[e.Request=-1]="Request",e[e.ErrorResponse=-2]="ErrorResponse",e[e.CancelResponse=-3]="CancelResponse",e[e.StartResponse=1]="StartResponse",e[e.DataResponse=2]="DataResponse",e[e.EndResponse=3]="EndResponse",e[e.FinalResponse=4]="FinalResponse",e[e.Unknown=0]="Unknown",e))(Gn||{}),Un=(e=>(e.Ok="OK",e.Cancel="CANCEL",e))(Un||{}),qn=(e=>(e.UserAuthenticate="authenticate",e.PromptReply="prompt_reply",e))(qn||{}),Vn=(e=>(e.GuiClusterIsGuiModuleBackend="gui.cluster.is_gui_module_backend",e.GuiClusterGetGuiModuleDisplayInfo="gui.cluster.get_gui_module_display_info",e.GuiCoreSetLogLevel="gui.core.set_log_level",e.GuiCoreGetLogLevel="gui.core.get_log_level",e.GuiCoreListFiles="gui.core.list_files",e.GuiCoreCreateFile="gui.core.create_file",e.GuiCoreValidatePath="gui.core.validate_path",e.GuiCoreDeleteFile="gui.core.delete_file",e.GuiCoreGetBackendInformation="gui.core.get_backend_information",e.GuiCoreIsShellWebCertificateInstalled="gui.core.is_shell_web_certificate_installed",e.GuiCoreInstallShellWebCertificate="gui.core.install_shell_web_certificate",e.GuiCoreRemoveShellWebCertificate="gui.core.remove_shell_web_certificate",e.GuiDbconnectionsAddDbConnection="gui.dbconnections.add_db_connection",e.GuiDbconnectionsUpdateDbConnection="gui.dbconnections.update_db_connection",e.GuiDbconnectionsRemoveDbConnection="gui.dbconnections.remove_db_connection",e.GuiDbconnectionsListDbConnections="gui.dbconnections.list_db_connections",e.GuiDbconnectionsGetDbConnection="gui.dbconnections.get_db_connection",e.GuiDbconnectionsGetDbTypes="gui.dbconnections.get_db_types",e.GuiDbconnectionsSetCredential="gui.dbconnections.set_credential",e.GuiDbconnectionsDeleteCredential="gui.dbconnections.delete_credential",e.GuiDbconnectionsListCredentials="gui.dbconnections.list_credentials",e.GuiDbconnectionsTestConnection="gui.dbconnections.test_connection",e.GuiDbconnectionsMoveConnection="gui.dbconnections.move_connection",e.GuiMdsIsGuiModuleBackend="gui.mds.is_gui_module_backend",e.GuiMdsGetGuiModuleDisplayInfo="gui.mds.get_gui_module_display_info",e.GuiModelerIsGuiModuleBackend="gui.modeler.is_gui_module_backend",e.GuiModelerGetGuiModuleDisplayInfo="gui.modeler.get_gui_module_display_info",e.GuiShellIsGuiModuleBackend="gui.shell.is_gui_module_backend",e.GuiShellGetGuiModuleDisplayInfo="gui.shell.get_gui_module_display_info",e.GuiShellStartSession="gui.shell.start_session",e.GuiShellCloseSession="gui.shell.close_session",e.GuiShellExecute="gui.shell.execute",e.GuiShellComplete="gui.shell.complete",e.GuiShellKillTask="gui.shell.kill_task",e.GuiDbGetObjectsTypes="gui.db.get_objects_types",e.GuiDbGetCatalogObjectNames="gui.db.get_catalog_object_names",e.GuiDbGetSchemaObjectNames="gui.db.get_schema_object_names",e.GuiDbGetTableObjectNames="gui.db.get_table_object_names",e.GuiDbGetCatalogObject="gui.db.get_catalog_object",e.GuiDbGetSchemaObject="gui.db.get_schema_object",e.GuiDbGetTableObject="gui.db.get_table_object",e.GuiDbStartSession="gui.db.start_session",e.GuiDbCloseSession="gui.db.close_session",e.GuiDbReconnect="gui.db.reconnect",e.GuiSqleditorIsGuiModuleBackend="gui.sqleditor.is_gui_module_backend",e.GuiSqleditorGetGuiModuleDisplayInfo="gui.sqleditor.get_gui_module_display_info",e.GuiSqleditorStartSession="gui.sqleditor.start_session",e.GuiSqleditorCloseSession="gui.sqleditor.close_session",e.GuiSqleditorOpenConnection="gui.sqleditor.open_connection",e.GuiSqleditorReconnect="gui.sqleditor.reconnect",e.GuiSqleditorExecute="gui.sqleditor.execute",e.GuiSqleditorKillQuery="gui.sqleditor.kill_query",e.GuiSqleditorGetCurrentSchema="gui.sqleditor.get_current_schema",e.GuiSqleditorSetCurrentSchema="gui.sqleditor.set_current_schema",e.GuiSqleditorGetAutoCommit="gui.sqleditor.get_auto_commit",e.GuiSqleditorSetAutoCommit="gui.sqleditor.set_auto_commit",e.GuiUsersCreateUser="gui.users.create_user",e.GuiUsersSetAllowedHosts="gui.users.set_allowed_hosts",e.GuiUsersDeleteUser="gui.users.delete_user",e.GuiUsersGrantRole="gui.users.grant_role",e.GuiUsersGetUserId="gui.users.get_user_id",e.GuiUsersListUsers="gui.users.list_users",e.GuiUsersListUserRoles="gui.users.list_user_roles",e.GuiUsersListRoles="gui.users.list_roles",e.GuiUsersListRolePrivileges="gui.users.list_role_privileges",e.GuiUsersListUserPrivileges="gui.users.list_user_privileges",e.GuiUsersGetGuiModuleList="gui.users.get_gui_module_list",e.GuiUsersListProfiles="gui.users.list_profiles",e.GuiUsersGetProfile="gui.users.get_profile",e.GuiUsersUpdateProfile="gui.users.update_profile",e.GuiUsersAddProfile="gui.users.add_profile",e.GuiUsersDeleteProfile="gui.users.delete_profile",e.GuiUsersGetDefaultProfile="gui.users.get_default_profile",e.GuiUsersSetDefaultProfile="gui.users.set_default_profile",e.GuiUsersSetCurrentProfile="gui.users.set_current_profile",e.GuiUsersListUserGroups="gui.users.list_user_groups",e.GuiUsersCreateUserGroup="gui.users.create_user_group",e.GuiUsersAddUserToGroup="gui.users.add_user_to_group",e.GuiUsersRemoveUserFromGroup="gui.users.remove_user_from_group",e.GuiUsersUpdateUserGroup="gui.users.update_user_group",e.GuiUsersRemoveUserGroup="gui.users.remove_user_group",e.GuiDebuggerIsGuiModuleBackend="gui.debugger.is_gui_module_backend",e.GuiDebuggerGetGuiModuleDisplayInfo="gui.debugger.get_gui_module_display_info",e.GuiDebuggerGetScripts="gui.debugger.get_scripts",e.GuiDebuggerGetScriptContent="gui.debugger.get_script_content",e.GuiModulesAddData="gui.modules.add_data",e.GuiModulesListData="gui.modules.list_data",e.GuiModulesGetDataContent="gui.modules.get_data_content",e.GuiModulesShareDataToUserGroup="gui.modules.share_data_to_user_group",e.GuiModulesAddDataToProfile="gui.modules.add_data_to_profile",e.GuiModulesUpdateData="gui.modules.update_data",e.GuiModulesDeleteData="gui.modules.delete_data",e.GuiModulesListDataCategories="gui.modules.list_data_categories",e.GuiModulesAddDataCategory="gui.modules.add_data_category",e.GuiModulesRemoveDataCategory="gui.modules.remove_data_category",e.GuiModulesGetDataCategoryId="gui.modules.get_data_category_id",e.GuiModulesCreateProfileDataTree="gui.modules.create_profile_data_tree",e.GuiModulesGetProfileDataTree="gui.modules.get_profile_data_tree",e.GuiModulesCreateUserGroupDataTree="gui.modules.create_user_group_data_tree",e.GuiModulesGetUserGroupDataTree="gui.modules.get_user_group_data_tree",e.GuiModulesGetProfileTreeIdentifiers="gui.modules.get_profile_tree_identifiers",e.GuiModulesMoveData="gui.modules.move_data",e.GuiInfo="gui.info",e.GuiVersion="gui.version",e))(Vn||{});class ResponseError extends Error{constructor(e){super(e.requestState.msg),this.info=e}}const zn=class _MessageScheduler{constructor(){pe(this,"socket"),pe(this,"debugging",!1),pe(this,"disconnecting",!1),pe(this,"reconnectTimer"),pe(this,"reconnectTimeout",1e3),pe(this,"ongoingRequests",new Map),fe(this,e,!1),pe(this,"onMessage",(e=>{const t=this.convertDataToResponse(e.data);if(t)if(this.isWebSessionData(t)&&!this.debugging)nn.execute("webSessionStarted",t);else if(t.requestId){const e=this.ongoingRequests.get(t.requestId);if(e){const n=e;switch(t.eventType){case Gn.DataResponse:n.onData?n.onData(t,t.requestId):n.result.push(t);break;case Gn.EndResponse:_MessageScheduler.multiResultList.includes(e.protocolType)?(n.result.push(t),n.resolve(n.result)):n.resolve(t);break;case Gn.FinalResponse:this.ongoingRequests.delete(t.requestId),_MessageScheduler.multiResultList.includes(e.protocolType)||0===n.result.length?n.resolve(n.result):n.resolve(n.result[0]);break;case Gn.ErrorResponse:this.ongoingRequests.delete(t.requestId),n.reject(new ResponseError(t));break;case Gn.CancelResponse:this.ongoingRequests.delete(t.requestId),n.resolve([])}}}})),pe(this,"onOpen",(e=>{this.reconnectTimer&&(clearTimeout(this.reconnectTimer),this.reconnectTimer=null),this.reconnectTimeout=1e3,nn.execute("socketStateChanged",!0).then((()=>{e()}))})),pe(this,"onClose",(e=>{Qn.clearSessionData(),nn.execute("socketStateChanged",!1),this.disconnecting||this.debugging||(this.reconnectTimer&&clearTimeout(this.reconnectTimer),this.reconnectTimer=setTimeout((()=>{this.connect(e)}),this.reconnectTimeout))})),pe(this,"onError",((e,t,n)=>{t(JSON.stringify(n,void 0,4)),this.reconnectTimeout*=2,this.reconnectTimer&&(this.reconnectTimer=setTimeout((()=>{this.connect(e)}),this.reconnectTimeout)),nn.execute("showError",["Communication Error",`Could not establish a connection to the backend. Make sure you use valid user credentials and the MySQL Shell is running. Trying to reconnect in ${this.reconnectTimeout/1e3} seconds.`])})),pe(this,"convertDataToResponse",(e=>{if(!e||"string"!=typeof e)return;const t=JSON.parse(e);this.traceEnabled&&nn.execute("debugger",{response:t});const n=gn(t,(null==(i={ignore:["rows"]})?void 0:i.ignore)??[],((e,t)=>t.replace(/_([a-z0-9])/gi,((e,t)=>t.toUpperCase()))));var i;switch(n.requestState.type){case"ERROR":n.eventType=Gn.ErrorResponse;break;case"PENDING":"Execution started..."===n.requestState.msg?n.eventType=Gn.StartResponse:n.eventType=Gn.DataResponse;break;case"OK":n.done?n.eventType=Gn.FinalResponse:n.eventType=Gn.EndResponse;break;case"CANCELLED":n.eventType=Gn.CancelResponse;break;default:n.eventType=Gn.Unknown}return n}))}static get get(){return _MessageScheduler.instance||(_MessageScheduler.instance=this.createInstance()),_MessageScheduler.instance}static createInstance(){return new _MessageScheduler}get isConnected(){return!!this.socket&&this.socket.readyState===this.socket.OPEN}set inDebugCall(e){this.debugging=e}set traceEnabled(t){be(this,e,t)}get traceEnabled(){return ge(this,e)}connect(e){if(this.disconnecting=!1,!this.socket||this.socket.readyState!==this.socket.OPEN&&this.socket.readyState!==this.socket.CONNECTING){const t=new URL(e.url);return t.protocol=e.url.protocol.replace("http","ws"),t.pathname="ws1.ws",tn.inDevelopment&&(t.port="8000"),new Promise(((n,i)=>{const o=this.createWebSocket(t,e);o.addEventListener("close",this.onClose.bind(this,e)),o.addEventListener("message",this.onMessage),o.addEventListener("open",this.onOpen.bind(this,n)),o.addEventListener("error",this.onError.bind(this,e,i)),this.socket=o}))}return Promise.resolve()}disconnect(){if(this.socket)try{this.disconnecting=!0,this.socket.close(),delete this.socket,this.socket=void 0}catch(e){console.error("Internal error while closing websocket: "+String(e))}}sendRequest(e,t=!0,n=[]){return this.constructAndSendRequest(t,n,{...e})}sendRawRequest(e,t){return e.request_id=e.request_id??an(),new Promise(((n,i)=>{var o;this.traceEnabled&&nn.execute("debugger",{request:e});const s={protocolType:"native",result:[],resolve:n,reject:i,onData:t};this.ongoingRequests.set(e.request_id,s),null==(o=this.socket)||o.send(JSON.stringify(e))}))}createWebSocket(e,t){return new WebSocket(e)}constructAndSendRequest(e,t,n){const i=n.requestId??an();return new Promise(((o,s)=>{var r;const a={requestId:i,request:e?"execute":n.requestType,command:e?n.requestType:void 0,...n.parameters};t=t.concat(["rows"]);const l=gn(a,(null==(d={ignore:t})?void 0:d.ignore)??[],((e,t)=>t.replace(/([a-z])([A-Z])/g,((e,t,n)=>`${t}_${n.toLowerCase()}`))));var d;this.traceEnabled&&nn.execute("debugger",{request:l});const c={protocolType:n.requestType,result:[],resolve:o,reject:s,onData:n.onData};this.ongoingRequests.set(i,c),null==(r=this.socket)||r.send(JSON.stringify(l))}))}isErrorInfo(e){if(!("result"in e))return!1;return"string"==typeof e.result.info}isWebSessionData(e){return void 0!==e.sessionUuid}};e=new WeakMap,pe(zn,"instance"),pe(zn,"multiResultList",["gui.core.list_files","gui.db.get_schema_object_names","gui.dbconnections.list_db_connections","gui.modules.get_profile_data_tree","gui.shell.complete","gui.sqleditor.execute","gui.db.get_catalog_object_names","gui.db.get_table_object_names"]);let Hn=zn;class ShellInterfaceCore{get backendInformation(){return(async()=>{const e=await Hn.get.sendRequest({requestType:Vn.GuiCoreGetBackendInformation,parameters:{}});return{architecture:e.result.architecture,major:An(e.result.major),minor:An(e.result.minor),patch:An(e.result.patch),platform:e.result.platform,serverDistribution:e.result.serverDistribution,serverMajor:An(e.result.serverMajor),serverMinor:An(e.result.serverMinor),serverPatch:An(e.result.serverPatch)}})()}async getLogLevel(){return(await Hn.get.sendRequest({requestType:Vn.GuiCoreGetLogLevel,parameters:{}})).result}async setLogLevel(e){await Hn.get.sendRequest({requestType:Vn.GuiCoreSetLogLevel,parameters:{args:{logLevel:e}}})}async getDbTypes(){return(await Hn.get.sendRequest({requestType:Vn.GuiDbconnectionsGetDbTypes,parameters:{}})).result}async validatePath(e){try{return await Hn.get.sendRequest({requestType:Vn.GuiCoreValidatePath,parameters:{args:{path:e}}}),!0}catch(t){return!1}}async createDatabaseFile(e){await Hn.get.sendRequest({requestType:Vn.GuiCoreCreateFile,parameters:{args:{path:e}}})}async getDebuggerScriptNames(){return(await Hn.get.sendRequest({requestType:Vn.GuiDebuggerGetScripts,parameters:{}})).result}async getDebuggerScriptContent(e){return(await Hn.get.sendRequest({requestType:Vn.GuiDebuggerGetScriptContent,parameters:{args:{path:e}}})).result}}class ShellInterfaceDbConnection{constructor(){pe(this,"id","dbConnection")}async addDbConnection(e,t,n=""){return(await Hn.get.sendRequest({requestType:Vn.GuiDbconnectionsAddDbConnection,parameters:{args:{profileId:e,connection:{dbType:t.dbType,caption:t.caption,description:t.description,options:t.options},folderPath:n}}})).result}async updateDbConnection(e,t,n=""){await Hn.get.sendRequest({requestType:Vn.GuiDbconnectionsUpdateDbConnection,parameters:{args:{profileId:e,connectionId:t.id,connection:{dbType:t.dbType,caption:t.caption,description:t.description,options:t.options},folderPath:n}}})}async removeDbConnection(e,t){await Hn.get.sendRequest({requestType:Vn.GuiDbconnectionsRemoveDbConnection,parameters:{args:{profileId:e,connectionId:t}}})}async listDbConnections(e,t=""){const n=await Hn.get.sendRequest({requestType:Vn.GuiDbconnectionsListDbConnections,parameters:{args:{profileId:e,folderPath:t}}}),i=[];return n.forEach((e=>{i.push(...e.result)})),i}async getDbConnection(e){return(await Hn.get.sendRequest({requestType:Vn.GuiDbconnectionsGetDbConnection,parameters:{args:{dbConnectionId:e}}})).result}}var jn=(e=>(e[e.Notebook=0]="Notebook",e[e.Script=1]="Script",e[e.Folder=2]="Folder",e[e.Status=3]="Status",e[e.Connections=4]="Connections",e[e.Dashboard=5]="Dashboard",e))(jn||{}),Wn=(e=>(e[e.Document=0]="Document",e[e.Schema=1]="Schema",e[e.Table=2]="Table",e[e.StoredFunction=3]="StoredFunction",e[e.StoredProcedure=4]="StoredProcedure",e[e.Event=5]="Event",e[e.Trigger=6]="Trigger",e[e.Column=7]="Column",e[e.View=8]="View",e[e.Index=9]="Index",e[e.ForeignKey=10]="ForeignKey",e[e.GroupNode=11]="GroupNode",e[e.UserVariable=12]="UserVariable",e[e.User=13]="User",e[e.Engine=14]="Engine",e[e.Plugin=15]="Plugin",e[e.Character=16]="Character",e))(Wn||{});class ShellInterfaceModule{constructor(){pe(this,"scriptCategoryToLanguage",new Map([[4,"mysql"],[5,"python"],[6,"javascript"],[7,"typescript"],[8,"sql"],[3,"json"]])),pe(this,"languageToScriptCategory",new Map([["mysql",4],["python",5],["javascript",6],["typescript",7],["sql",8],["json",3]])),pe(this,"loadScriptStates",(async(e,t)=>{const n=[],i=await this.listData(e,t);return n.push(...i.map((t=>{const n=this.scriptCategoryToLanguage.get(t.dataCategoryId)??"mysql";return{id:an(),folderId:e,type:jn.Script,caption:t.caption,language:n,dbDataId:t.id}}))),n}))}async addData(e,t,n,i,o,s){return(await Hn.get.sendRequest({requestType:Vn.GuiModulesAddData,parameters:{args:{caption:e,content:t,dataCategoryId:n,treeIdentifier:i,folderPath:o,profileId:s}}})).result}async listData(e,t){return(await Hn.get.sendRequest({requestType:Vn.GuiModulesListData,parameters:{args:{folderId:e,dataCategoryId:t}}})).result}async getDataContent(e){return(await Hn.get.sendRequest({requestType:Vn.GuiModulesGetDataContent,parameters:{args:{id:e}}})).result}async createProfileDataTree(e,t){await Hn.get.sendRequest({requestType:Vn.GuiModulesCreateProfileDataTree,parameters:{args:{treeIdentifier:e,profileId:t}}})}async getProfileDataTree(e,t){const n=await Hn.get.sendRequest({requestType:Vn.GuiModulesGetProfileDataTree,parameters:{args:{treeIdentifier:e,profileId:t}}}),i=[];return n.forEach((e=>{i.push(...e.result)})),i}async createUserGroupDataTree(e,t){await Hn.get.sendRequest({requestType:Vn.GuiModulesCreateUserGroupDataTree,parameters:{args:{treeIdentifier:e,userGroupId:t}}})}async getUserGroupDataTree(e,t){await Hn.get.sendRequest({requestType:Vn.GuiModulesGetUserGroupDataTree,parameters:{args:{treeIdentifier:e,userGroupId:t}}})}async getProfileDataTreeIdentifiers(e){await Hn.get.sendRequest({requestType:Vn.GuiModulesGetProfileTreeIdentifiers,parameters:{args:{profileId:e}}})}async shareDataToUserGroup(e,t,n,i,o){await Hn.get.sendRequest({requestType:Vn.GuiModulesShareDataToUserGroup,parameters:{args:{id:e,userGroupId:t,readOnly:n,treeIdentifier:i,folderPath:o}}})}async addDataToProfile(e,t,n,i,o){await Hn.get.sendRequest({requestType:Vn.GuiModulesAddDataToProfile,parameters:{args:{id:e,profileId:t,readOnly:n,treeIdentifier:i,folderPath:o}}})}async updateData(e,t,n){await Hn.get.sendRequest({requestType:Vn.GuiModulesUpdateData,parameters:{args:{id:e,caption:t,content:n}}})}async deleteData(e,t){await Hn.get.sendRequest({requestType:Vn.GuiModulesDeleteData,parameters:{args:{id:e,folderId:t}}})}async listDataCategories(e){return(await Hn.get.sendRequest({requestType:Vn.GuiModulesListDataCategories,parameters:{args:{categoryId:e}}})).result}async addDataCategory(e,t){await Hn.get.sendRequest({requestType:Vn.GuiModulesAddDataCategory,parameters:{args:{name:e,parentCategoryId:t}}})}async removeDataCategory(e){await Hn.get.sendRequest({requestType:Vn.GuiModulesRemoveDataCategory,parameters:{args:{categoryId:e}}})}scriptTypeFromLanguage(e){return this.languageToScriptCategory.get(e)}async loadScriptsTree(e){return this.loadScriptTreeEntries(2,e)}async loadScriptTreeEntries(e,t){const n=await this.getProfileDataTree("scripts",t),i=async(t,o)=>{const s=n.filter(((e,n,i)=>e.parentFolderId===t&&(i.splice(n,1),!0)));for await(const n of s){const s=await this.loadScriptStates(n.id,e);await i(n.id,s),o.push({id:"",folderId:t,dbDataId:n.id,caption:n.caption,children:s,type:jn.Folder})}},o=[];if(n.length>0&&"scripts"===n[0].caption){const t=n.shift();if(t){const n=await this.loadScriptStates(t.id,e);o.push(...n),await i(t.id,o)}}return o}}class ShellInterfaceUser{async authenticate(e,t){const n=await Hn.get.sendRequest({requestType:qn.UserAuthenticate,parameters:{username:e,password:t}},!1);return Qn.userName=e,Qn.userId=n.activeProfile.userId,Qn.loadProfile(n.activeProfile),n.activeProfile}async createUser(e,t,n,i){await Hn.get.sendRequest({requestType:Vn.GuiUsersCreateUser,parameters:{args:{username:e,password:t,role:n,allowedHosts:i}}})}async getDefaultProfile(e){const t=await Hn.get.sendRequest({requestType:Vn.GuiUsersGetDefaultProfile,parameters:{args:{userId:e}}});if(!Array.isArray(t))return t.result}async setDefaultProfile(e,t){await Hn.get.sendRequest({requestType:Vn.GuiUsersSetDefaultProfile,parameters:{args:{userId:e,profileId:t}}})}async getGuiModuleList(e){const t=await Hn.get.sendRequest({requestType:Vn.GuiUsersGetGuiModuleList,parameters:{args:{userId:e}}});return Array.isArray(t)?Promise.resolve([]):Promise.resolve(t.result)}async getProfile(e){const t=await Hn.get.sendRequest({requestType:Vn.GuiUsersGetProfile,parameters:{args:{profileId:e}}});if(!Array.isArray(t))return Promise.resolve(t.result)}async addProfile(e){return(await Hn.get.sendRequest({requestType:Vn.GuiUsersAddProfile,parameters:{args:{userId:e.userId,profile:e}}})).result}async updateProfile(e){const t=await Hn.get.sendRequest({requestType:Vn.GuiUsersUpdateProfile,parameters:{args:{profile:e}}});if(!Array.isArray(t))return Promise.resolve(t.result)}async deleteProfile(e){await Hn.get.sendRequest({requestType:Vn.GuiUsersDeleteProfile,parameters:{args:{userId:e.userId,profileId:e.id}}})}async grantRole(e,t){await Hn.get.sendRequest({requestType:Vn.GuiUsersGrantRole,parameters:{args:{username:e,role:t}}})}async listProfiles(e){return(await Hn.get.sendRequest({requestType:Vn.GuiUsersListProfiles,parameters:{args:{userId:e}}})).result}async listRolePrivileges(e){await Hn.get.sendRequest({requestType:Vn.GuiUsersListRolePrivileges,parameters:{args:{role:e}}})}async listRoles(){await Hn.get.sendRequest({requestType:Vn.GuiUsersListRoles,parameters:{}})}async listUserPrivileges(e){await Hn.get.sendRequest({requestType:Vn.GuiUsersListUserPrivileges,parameters:{args:{username:e}}})}async listUserRoles(e){await Hn.get.sendRequest({requestType:Vn.GuiUsersListUserRoles,parameters:{args:{username:e}}})}async listUsers(){await Hn.get.sendRequest({requestType:Vn.GuiUsersListUsers,parameters:{}})}async setCurrentProfile(e){await Hn.get.sendRequest({requestType:Vn.GuiUsersSetCurrentProfile,parameters:{args:{profileId:e}}})}async storePassword(e,t){await Hn.get.sendRequest({requestType:Vn.GuiDbconnectionsSetCredential,parameters:{args:{url:e,password:t}}})}async clearPassword(e){await Hn.get.sendRequest({requestType:Vn.GuiDbconnectionsDeleteCredential,parameters:{args:{url:e}}})}async listCredentials(){await Hn.get.sendRequest({requestType:Vn.GuiDbconnectionsListCredentials,parameters:{}})}}const $n=class _ShellInterface{static get core(){return _ShellInterface.interfaces.core||(_ShellInterface.interfaces.core=new ShellInterfaceCore),_ShellInterface.interfaces.core}static get users(){return _ShellInterface.interfaces.users||(_ShellInterface.interfaces.users=new ShellInterfaceUser),_ShellInterface.interfaces.users}static get modules(){return _ShellInterface.interfaces.modules||(_ShellInterface.interfaces.modules=new ShellInterfaceModule),_ShellInterface.interfaces.modules}static get dbConnections(){return _ShellInterface.interfaces.dbConnections||(_ShellInterface.interfaces.dbConnections=new ShellInterfaceDbConnection),_ShellInterface.interfaces.dbConnections}};pe($n,"interfaces",{});let Kn=$n;class Cookies{set(e,t){let n="";n=`${e}=${t??""}`,"undefined"!=typeof document&&(document.cookie=n)}get(e){if("undefined"==typeof document||!document.cookie)return null;const t=document.cookie.split(";").find((t=>t.split("=")[0].trim()===e));if(t){const e=t.split("=");return 1===e.length?e[0]:e[1].trim()}return null}remove(e){"undefined"!=typeof document&&(document.cookie=e+"=; Max-Age=0;")}clear(){if("undefined"!=typeof document)for(const e of document.cookie.split(";"))this.remove(e.split("=")[0].trim())}}class WebSession{constructor(){pe(this,"localUserMode",!1),pe(this,"cookies",new Cookies),pe(this,"shellProfile",{description:"",id:-1,name:"",userId:-1,options:{}}),pe(this,"sessionData"),this.clearSessionData()}static get instance(){return new WebSession}get userId(){return this.sessionData.userId}set userId(e){this.sessionData.userId=e,this.writeSessionData()}get userName(){return this.sessionData.userName}set userName(e){this.sessionData.userName=e,this.writeSessionData()}get profile(){return this.shellProfile}set profile(e){this.loadProfile(e),this.saveProfile()}get currentProfileId(){return this.shellProfile.id}get sessionId(){return this.sessionData.sessionId}set sessionId(e){this.cookies.clear(),this.sessionData.sessionId=e,e&&this.cookies.set("SessionId",e),this.cookies.set("SameSite","None"),this.cookies.set("Secure")}clearSessionData(){this.sessionData={sessionId:"",userName:"",profileId:-1,userId:-1,moduleSessionId:{}}}moduleSessionId(e){return this.sessionData.moduleSessionId[e]}setModuleSessionId(e,t){t?this.sessionData.moduleSessionId[e]=t:delete this.sessionData.moduleSessionId[e]}loadProfile(e){this.shellProfile=e,this.sessionData.profileId=e.id,this.sessionData.userId=e.userId,this.writeSessionData(),nn.execute("profileLoaded",void 0)}saveProfile(){Kn.users.updateProfile(this.shellProfile).then((()=>{})).catch((e=>{nn.execute("showError",["Profile Update Error",String(e)])}))}writeSessionData(){}}const Qn=WebSession.instance,Yn=class _ModuleRegistry{static registerModule(e){_ModuleRegistry.modules.set(e.info.id,{moduleClass:e,enabled:!1})}static enableModule(e){const t=_ModuleRegistry.modules.get(e);t&&(t.enabled=!0)}static get enabledModules(){return new Map([..._ModuleRegistry.modules].filter((e=>e[1].enabled)))}static get registeredModules(){return _ModuleRegistry.modules}};pe(Yn,"modules",new Map);let Jn=Yn;var Xn=(e=>(e.Tiny="tiny",e.Small="small",e.Medium="medium",e.Big="big",e.Huge="huge",e))(Xn||{}),Zn=(e=>(e.TopLeft="top-start",e.TopCenter="top",e.TopRight="top-end",e.RightTop="right-start",e.RightCenter="right",e.RightBottom="right-end",e.BottomLeft="bottom-start",e.BottomCenter="bottom",e.BottomRight="bottom-end",e.LeftTop="left-start",e.LeftCenter="left",e.LeftBottom="left-end",e))(Zn||{}),ei=(e=>(e[e.Click=0]="Click",e[e.DoubleClick=1]="DoubleClick",e[e.Enter=2]="Enter",e[e.Leave=3]="Leave",e[e.Down=4]="Down",e[e.Up=5]="Up",e[e.Move=6]="Move",e))(ei||{}),ti=(e=>(e[e.Down=0]="Down",e[e.Up=1]="Up",e[e.Move=2]="Move",e))(ti||{}),ni=(e=>(e[e.Start=0]="Start",e[e.Over=1]="Over",e[e.Enter=2]="Enter",e[e.Leave=3]="Leave",e[e.Drop=4]="Drop",e))(ni||{}),ii=(e=>(e[e.None=0]="None",e[e.Highlight=1]="Highlight",e[e.Single=2]="Single",e[e.Multi=3]="Multi",e))(ii||{});class ComponentBase extends Ce{constructor(e){super(e),pe(this,"handledProps",[]),pe(this,"forcedEvents",new Set),pe(this,"internalHandleMouseClick",(e=>{var t;if(!this.isDisabled(e)&&this.handleMouseEvent(0,e)){const n=this.mergedProps;null==(t=n.onClick)||t.call(n,e,n)}})),pe(this,"internalHandleMouseDoubleClick",(e=>{var t;if(!this.isDisabled(e)&&this.handleMouseEvent(1,e)){const n=this.mergedProps;null==(t=n.onDoubleClick)||t.call(n,e,n)}})),pe(this,"internalHandleKeyDown",(e=>{var t;if(!this.isDisabled(e)&&this.handleKeyboardEvent(0,e)){const n=this.mergedProps;null==(t=n.onKeyDown)||t.call(n,e,n)}})),pe(this,"internalHandleKeyUp",(e=>{var t;if(!this.isDisabled(e)&&this.handleKeyboardEvent(1,e)){const n=this.mergedProps;null==(t=n.onKeyUp)||t.call(n,e,n)}})),pe(this,"internalHandleKeyPress",(e=>{var t;if(!this.isDisabled(e)&&this.handleKeyboardEvent(2,e)){const n=this.mergedProps;null==(t=n.onKeyPress)||t.call(n,e,n)}})),pe(this,"internalHandleFocus",(e=>{var t;const n=this.mergedProps;null==(t=n.onFocus)||t.call(n,e,n)})),pe(this,"internalHandleBlur",(e=>{var t;const n=this.mergedProps;null==(t=n.onBlur)||t.call(n,e,n)})),pe(this,"internalHandleMouseEnter",(e=>{var t;if(!this.isDisabled(e)&&this.handleMouseEvent(2,e)){const n=this.mergedProps;null==(t=n.onMouseEnter)||t.call(n,e,n)}})),pe(this,"internalHandleMouseLeave",(e=>{var t;if(!this.isDisabled(e)&&this.handleMouseEvent(3,e)){const n=this.mergedProps;null==(t=n.onMouseLeave)||t.call(n,e,n)}})),pe(this,"internalHandleMouseDown",(e=>{var t;if(!this.isDisabled(e)&&this.handleMouseEvent(4,e)){const n=this.mergedProps;null==(t=n.onMouseDown)||t.call(n,e,n)}})),pe(this,"internalHandleMouseUp",(e=>{var t;if(!this.isDisabled(e)&&this.handleMouseEvent(5,e)){const n=this.mergedProps;null==(t=n.onMouseUp)||t.call(n,e,n)}})),pe(this,"internalHandleMouseMove",(e=>{var t;if(!this.isDisabled(e)&&this.handleMouseEvent(6,e)){const n=this.mergedProps;null==(t=n.onMouseMove)||t.call(n,e,n)}})),pe(this,"internalHandlePointerDown",(e=>{var t;if(!this.isDisabled(e)&&this.handlePointerEvent(0,e)){const n=this.mergedProps;null==(t=n.onPointerDown)||t.call(n,e,n)}})),pe(this,"internalHandlePointerUp",(e=>{var t;if(!this.isDisabled(e)&&this.handlePointerEvent(1,e)){const n=this.mergedProps;null==(t=n.onPointerUp)||t.call(n,e,n)}})),pe(this,"internalHandlePointerMove",(e=>{var t;if(!this.isDisabled(e)&&this.handlePointerEvent(2,e)){const n=this.mergedProps;null==(t=n.onPointerMove)||t.call(n,e,n)}})),pe(this,"internalHandleDragStart",(e=>{var t;if(!this.isDisabled(e)&&this.handleDragEvent(0,e)){const n=this.mergedProps;null==(t=n.onDragStart)||t.call(n,e,n)}})),pe(this,"internalHandleDragOver",(e=>{var t;if(this.handleDragEvent(1,e)){const n=this.mergedProps;null==(t=n.onDragOver)||t.call(n,e,n)}})),pe(this,"internalHandleDragEnter",(e=>{var t;if(!this.isDisabled(e)&&this.handleDragEvent(2,e)){const n=this.mergedProps;null==(t=n.onDragEnter)||t.call(n,e,n)}})),pe(this,"internalHandleDragLeave",(e=>{var t;if(!this.isDisabled(e)&&this.handleDragEvent(3,e)){const n=this.mergedProps;null==(t=n.onDragLeave)||t.call(n,e,n)}})),pe(this,"internalHandleDrop",(e=>{var t;if(!this.isDisabled(e)&&this.handleDragEvent(4,e)){const n=this.mergedProps;null==(t=n.onDrop)||t.call(n,e,n)}})),this.addHandledProperties("class","className","size","children","onChange","onConfirm","onCancel","onMouseEnter","onMouseLeave","onMouseDown","onMouseUp","onMouseMove","onPointerDown","onPointerUp","onPointerMove","onDragStart","onDragOver","onDragEnter","onDragLeave","onDrop","onFocus","onBlur","onResize","onClick","onDoubleClick","onKeyDown","onKeyUp","onKeyPress","onAction","onMount","onUnmount","onItemClick","onOpen","onClose","onSelect")}get mergedProps(){const{dataId:e,data:t}=this.props;return e&&t?Object.assign({},this.props,t[e]):this.props}setStatePromise(e){return new Promise((t=>{super.setState(e,t)}))}getEffectiveClassNames(e){const{className:t}=this.props;return we("msg",e,null==t?void 0:t.replace("msg ",""),this.props.size)}classFromProperty(e,t){if(null!=e){if(t instanceof Array)return"boolean"==typeof e?t[e?1:0]:t[e];if(e)return t}}addHandledProperties(...e){this.handledProps.push(...e)}connectEvents(...e){e.forEach((e=>this.forcedEvents.add(e)))}connectDragEvents(){this.forcedEvents.add("onDragStart"),this.forcedEvents.add("onDragOver"),this.forcedEvents.add("onDragEnter"),this.forcedEvents.add("onDragLeave"),this.forcedEvents.add("onDrop")}get unhandledProperties(){const e={};for(const[t,n]of Object.entries(this.props))this.handledProps.includes(t)||(e[t]=n);return(this.props.onClick||this.forcedEvents.has("onClick"))&&(e.onClick=this.internalHandleMouseClick),(this.props.onDoubleClick||this.forcedEvents.has("onDoubleClick"))&&(e.onDoubleClick=this.internalHandleMouseDoubleClick),(this.props.onKeyDown||this.forcedEvents.has("onKeyDown"))&&(e.onKeyDown=this.internalHandleKeyDown),(this.props.onKeyUp||this.forcedEvents.has("onKeyUp"))&&(e.onKeyUp=this.internalHandleKeyUp),(this.props.onKeyPress||this.forcedEvents.has("onKeyPress"))&&(e.onKeyPress=this.internalHandleKeyPress),(this.props.onFocus||this.forcedEvents.has("onFocus"))&&(e.onFocus=this.internalHandleFocus),(this.props.onBlur||this.forcedEvents.has("onBlur"))&&(e.onBlur=this.internalHandleBlur),(this.props.onMouseEnter||this.forcedEvents.has("onMouseEnter"))&&(e.onMouseEnter=this.internalHandleMouseEnter),(this.props.onMouseLeave||this.forcedEvents.has("onMouseLeave"))&&(e.onMouseLeave=this.internalHandleMouseLeave),(this.props.onMouseDown||this.forcedEvents.has("onMouseDown"))&&(e.onMouseDown=this.internalHandleMouseDown),(this.props.onMouseUp||this.forcedEvents.has("onMouseUp"))&&(e.onMouseUp=this.internalHandleMouseUp),(this.props.onMouseMove||this.forcedEvents.has("onMouseMove"))&&(e.onMouseMove=this.internalHandleMouseMove),(this.props.onPointerDown||this.forcedEvents.has("onPointerDown"))&&(e.onPointerDown=this.internalHandlePointerDown),(this.props.onPointerUp||this.forcedEvents.has("onPointerUp"))&&(e.onPointerUp=this.internalHandlePointerUp),(this.props.onPointerMove||this.forcedEvents.has("onPointerMove"))&&(e.onPointerMove=this.internalHandlePointerMove),(this.props.onDragStart||this.forcedEvents.has("onDragStart"))&&(e.onDragStart=this.internalHandleDragStart),(this.props.onDragOver||this.forcedEvents.has("onDragOver"))&&(e.onDragOver=this.internalHandleDragOver),(this.props.onDragEnter||this.forcedEvents.has("onDragEnter"))&&(e.onDragEnter=this.internalHandleDragEnter),(this.props.onDragLeave||this.forcedEvents.has("onDragLeave"))&&(e.onDragLeave=this.internalHandleDragLeave),(this.props.onDrop||this.forcedEvents.has("onDrop"))&&(e.onDrop=this.internalHandleDrop),e}handleMouseEvent(e,t){return!0}handleKeyboardEvent(e,t){return!0}handlePointerEvent(e,t){return!0}handleDragEvent(e,t){return!0}isDisabled(e){return!!this.props.disabled&&(e.preventDefault(),!0)}}const oi=[{name:"#Base Colors",description:"Base Colors",preview:!0,children:[{name:"focusBorder",description:"Border color for focused elements",preview:!0},{name:"foreground",description:"Standard foreground color",preview:!0},{name:"hotForeground",description:"Standard hover foreground color",preview:!1},{name:"background",description:"Standard background color",preview:!0},{name:"descriptionForeground",description:"Description/help text foreground color",preview:!0},{name:"errorForeground",description:"Standard error foreground color",preview:!0},{name:"widget.shadow",description:"Drop shadow color",preview:!0},{name:"selection.background",description:"Standard selection background color",preview:!0},{name:"icon.foreground",description:"Standard icon foreground color",preview:!0}]},{name:"#Window Colors",description:"Window/Dialog Colors",preview:!0,children:[{name:"window.activeBorder",description:"Active border color",preview:!1},{name:"window.inactiveBorder",description:"Inactive border color",preview:!1},{name:"window.background",description:"Main background color",preview:!0},{name:"window.headerBackground",description:"Header color",preview:!0},{name:"window.footerBackground",description:"Footer color",preview:!0}]},{name:"#Popup Colors",description:"Popup Colors",preview:!0,children:[{name:"popup.border",description:"Border color",preview:!0},{name:"popup.background",description:"Background color",preview:!0},{name:"popup.foreground",description:"Default foreground color",preview:!0}]},{name:"#Text Colors",description:"Text Colors (except code editors)",preview:!0,children:[{name:"textBlockQuote.background",description:"Block quotes background color",preview:!0},{name:"textBlockQuote.border",description:"Block quotes border color",preview:!0},{name:"textCodeBlock.background",description:"Code block background color",preview:!0},{name:"textLink.activeForeground",description:"Text link active foreground color",preview:!0},{name:"textLink.foreground",description:"Text link foreground color",preview:!0},{name:"textPreformat.foreground",description:"Preformatted text foreground color",preview:!0},{name:"textSeparator.foreground",description:"Text separator foreground color",preview:!0},{name:"text.captionForeground",description:"Caption foreground color",preview:!0},{name:"text.dimmedForeground",description:"Dimmed/disabled text foreground color",preview:!0}]},{name:"#Button Control",description:"Button Colors",preview:!0,children:[{name:"button.background",description:"Background color",preview:!0},{name:"button.foreground",description:"Foreground color",preview:!0},{name:"button.hoverBackground",description:"Hover background color",preview:!0},{name:"button.dimmedBackground",description:"Dimmed background color",preview:!0},{name:"button.pressedBackground",description:"Pressed background color",preview:!0},{name:"button.border",description:"Border color",preview:!0},{name:"checkbox.background",description:"Checkbox/Radio Button background color",preview:!0},{name:"checkbox.foreground",description:"Checkbox/Radio Button foreground color",preview:!0},{name:"checkbox.border",description:"Checkbox/Radio Button border color",preview:!0}]},{name:"#Dropdown Control",description:"Dropdown Colors",preview:!0,children:[{name:"dropdown.background",description:"Background color",preview:!0},{name:"dropdown.hoverBackground",description:"Hover background color",preview:!0},{name:"dropdown.listBackground",description:"List background color",preview:!0},{name:"dropdown.border",description:"Border color",preview:!0},{name:"dropdown.foreground",description:"Foreground color",preview:!0}]},{name:"#Input Control",description:"Input Controls Colors",preview:!0,children:[{name:"input.background",description:"Background color",preview:!0},{name:"input.hoverBackground",description:"Hover background color",preview:!0},{name:"input.border",description:"Border color",preview:!0},{name:"input.foreground",description:"Foreground color",preview:!0},{name:"inputOption.activeBackground",description:"Background color of activated options in input fields",preview:!0},{name:"inputOption.activeBorder",description:"Border color of activated options in input fields",preview:!0},{name:"input.placeholderForeground",description:"Placeholder foreground color",preview:!0},{name:"inputValidation.errorBackground",description:"Validation error background color",preview:!1},{name:"inputValidation.errorForeground",description:"Validation error foreground color",preview:!1},{name:"inputValidation.errorBorder",description:"Validation error border color",preview:!1},{name:"inputValidation.infoBackground",description:"Validation info background color",preview:!1},{name:"inputValidation.infoForeground",description:"Validation info foreground color",preview:!1},{name:"inputValidation.infoBorder",description:"Validation info border color",preview:!1},{name:"inputValidation.warningBackground",description:"Validation warning background color",preview:!1},{name:"inputValidation.warningForeground",description:"Validation warning foreground color",preview:!1},{name:"inputValidation.warningBorder",description:"Validation warning border color",preview:!1}]},{name:"#Tags",description:"Tag Colors",preview:!0,children:[{name:"tag.background",description:"Background color",preview:!0},{name:"tag.foreground",description:"Foreground color",preview:!0}]},{name:"#Badge",description:"Badge Colors",preview:!1,children:[{name:"badge.foreground",description:"Badge foreground color",preview:!1},{name:"badge.background",description:"Badge background color",preview:!1}]},{name:"#Progress Bar",description:"Progress Bar Colors",preview:!0,children:[{name:"progressBar.background",description:"Background color",preview:!0}]},{name:"#Lists, Trees, Grids, Tables",description:"List / Tree / Grid / Table Colors",preview:!0,children:[{name:"list.activeSelectionBackground",description:"Selected item background color when the list is active",preview:!0},{name:"list.activeSelectionForeground",description:"Selected item foreground color when the list is active",preview:!0},{name:"list.inactiveSelectionBackground",description:"Selected item background color when the list is not active",preview:!0},{name:"list.inactiveSelectionForeground",description:"Selected item foreground color when the list is not active",preview:!0},{name:"list.dropBackground",description:"Drop target item background color",preview:!1},{name:"list.focusBackground",description:"Focused item background color when the list is active",preview:!1},{name:"list.focusForeground",description:"Focused item foreground color when the list is active",preview:!1},{name:"list.inactiveFocusBackground",description:"Focused item background color when the list is not active",preview:!1},{name:"list.highlightForeground",description:"Foreground color for marked items (e.g. when matching a search expression",preview:!1},{name:"list.hoverBackground",description:"Item background color during mouse hover",preview:!0},{name:"list.hoverForeground",description:"Item foreground color during mouse hover",preview:!0},{name:"list.invalidItemForeground",description:"Invalid item foreground color",preview:!1},{name:"list.errorForeground",description:"Error foreground color",preview:!1},{name:"list.warningForeground",description:"Warning foreground color",preview:!1},{name:"listFilterWidget.background",description:"Filter widget background color",preview:!1},{name:"listFilterWidget.outline",description:"Filter widget border color",preview:!1},{name:"listFilterWidget.noMatchesOutline",description:"Filter widget no-match border color",preview:!1},{name:"list.filterMatchBackground",description:"Filtered match background color",preview:!1},{name:"list.filterMatchBorder",description:"Filtered match border color",preview:!1},{name:"tree.indentGuidesStroke",description:"Tree lines color",preview:!1},{name:"list.headerBackground",description:"Header background color",preview:!0},{name:"list.gridColor",description:"Grid lines color",preview:!0},{name:"list.sortIndicatorForeground",description:"Sort indicator foreground color",preview:!0},{name:"list.columnResizerForeground",description:"Column resizer line foreground color",preview:!0},{name:"list.emptyBackground",description:"Empty list background color",preview:!1}]},{name:"#Activity Bar",description:"Activity Bar Colors",preview:!0,children:[{name:"activityBar.background",description:"Background color",preview:!0},{name:"activityBar.dropBackground",description:"Drop background feedback color for items",preview:!0},{name:"activityBar.dropBorder",description:"Drop border feedback color for items",preview:!0},{name:"activityBar.foreground",description:"Foreground color",preview:!0},{name:"activityBar.inactiveForeground",description:"Inactive foreground color",preview:!1},{name:"activityBar.border",description:"Border color",preview:!0},{name:"activityBarBadge.background",description:"Notification badge background color",preview:!1},{name:"activityBarBadge.foreground",description:"Notification badge foreground color",preview:!1},{name:"activityBar.activeBorder",description:"Active indicator border color",preview:!0},{name:"activityBar.activeBackground",description:"Optional background color for the active element",preview:!0},{name:"activityBar.activeFocusBorder",description:"Focus border color for the active item",preview:!1}]},{name:"#Side Bar",description:"Side Bar Colors",preview:!0,children:[{name:"sideBar.background",description:"Background color",preview:!0},{name:"sideBar.foreground",description:"Foreground color",preview:!0},{name:"sideBar.border",description:"Border color",preview:!0},{name:"sideBarTitle.foreground",description:"Title foreground color",preview:!0},{name:"sideBarSectionHeader.background",description:"Section header background color",preview:!0},{name:"sideBarSectionHeader.foreground",description:"Section header foreground color",preview:!0},{name:"sideBarSectionHeader.border",description:"Side bar section header border color",preview:!0},{name:"sideBar.dropBackground",description:"Item hover background color",preview:!0},{name:"sideBar.markerBackground",description:"Background color for a marked item",preview:!0}]},{name:"#Editor Groups & Tabs",description:"Tabview (Group) Colors",preview:!0,children:[{name:"editorGroup.border",description:"Tabview group separator color",preview:!1},{name:"editorGroup.dropBackground",description:"Tab page drop background color",preview:!0},{name:"editorGroupHeader.noTabsBackground",description:"Background color of the Tabs container when tabs are disabled",preview:!1},{name:"editorGroupHeader.tabsBackground",description:"Background color of the Tabs container",preview:!0},{name:"editorGroupHeader.tabsBorder",description:"Separator color between tabs and tabview content",preview:!0},{name:"editorGroupHeader.border",description:"Border color between editor group header and editor (below breadcrumbs if enabled)",preview:!1},{name:"editorGroup.emptyBackground",description:"Background color of an empty editor group",preview:!1},{name:"editorGroup.focusedEmptyBorder",description:"Border color of an empty editor group that is focused",preview:!1},{name:"tab.activeBackground",description:"Background color of a selected item in an active group",preview:!0},{name:"tab.unfocusedActiveBackground",description:"Active tab background color in an inactive editor group",preview:!1},{name:"tab.activeForeground",description:"Foreground color of a selected item in an active group",preview:!0},{name:"tab.border",description:"Border to separate Tabs from each other",preview:!0},{name:"tab.activeBorder",description:"Inner border for the active tab (bottom for top tabs, right for left tabs etc.)",preview:!0},{name:"tab.unfocusedActiveBorder",description:"Inner border for the active tab in an inactive editor group",preview:!1},{name:"tab.activeBorderTop",description:"Outer border for the active tab (top for top tabs, right for right tabs etc.)",preview:!0},{name:"tab.unfocusedActiveBorderTop",description:"Outer border for the active tab in an inactive editor group",preview:!1},{name:"tab.dropBackground",description:"Tab item drop background color",preview:!0},{name:"tab.inactiveBackground",description:"Inactive Tab background color",preview:!0},{name:"tab.inactiveForeground",description:"Inactive Tab foreground color in an active group",preview:!0},{name:"tab.unfocusedActiveForeground",description:"Active tab foreground color in an inactive editor group",preview:!1},{name:"tab.unfocusedInactiveForeground",description:"Inactive tab foreground color in an inactive editor group",preview:!1},{name:"tab.hoverBackground",description:"Tab background color when hovering",preview:!0},{name:"tab.unfocusedHoverBackground",description:"Tab background color in an unfocused group when hovering",preview:!1},{name:"tab.hoverBorder",description:"Border to highlight tabs when hovering",preview:!0},{name:"tab.unfocusedHoverBorder",description:"Border to highlight tabs in an unfocused group when hovering",preview:!1},{name:"tab.activeModifiedBorder",description:"Border on the top of modified active tabs in an active group",preview:!1},{name:"tab.inactiveModifiedBorder",description:"Border on the top of modified inactive tabs in an active group",preview:!1},{name:"tab.unfocusedActiveModifiedBorder",description:"Border on the top of modified active tabs in an unfocused group",preview:!1},{name:"tab.unfocusedInactiveModifiedBorder",description:"Border on the top of modified inactive tabs in an unfocused group",preview:!1},{name:"editorPane.background",description:"Content pane background color",preview:!0}]},{name:"#Editor Colors",description:"Editor Colors, except syntax highlighting",preview:!0,children:[{name:"editor.background",description:"Editor background color",preview:!0},{name:"editor.foreground",description:"Editor foreground color",preview:!0},{name:"editorLineNumber.foreground",description:"Line number foreground color",preview:!0},{name:"editorLineNumber.activeForeground",description:"Line number active foreground color",preview:!0},{name:"editorCursor.background",description:"Cursor background color",preview:!0},{name:"editorCursor.foreground",description:"Cursor foreground color",preview:!0},{name:"##Selection Colors",description:"Selection Colors",preview:!0,children:[{name:"editor.selectionBackground",description:"Selection active background color",preview:!0},{name:"editor.selectionForeground",description:"Selection foreground color",preview:!0},{name:"editor.inactiveSelectionBackground",description:"Selection inactive background color",preview:!0},{name:"editor.selectionHighlightBackground",description:"Selection highlight background color",preview:!0},{name:"editor.selectionHighlightBorder",description:"Selection highlight border color",preview:!0}]},{name:"##Word Highlight Colors",description:"Word Highlight Colors",preview:!0,children:[{name:"editor.wordHighlightBackground",description:"Word highlight background color",preview:!0},{name:"editor.wordHighlightBorder",description:"Word highlight border color",preview:!0},{name:"editor.wordHighlightStrongBackground",description:"Word highlight strong background color",preview:!0},{name:"editor.wordHighlightStrongBorder",description:"Word highlight strong border color",preview:!0}]},{name:"##Find Colors",description:"Text Match Colors",preview:!0,children:[{name:"editor.findMatchBackground",description:"Find match background color",preview:!0},{name:"editor.findMatchHighlightBackground",description:"Find match highlight background color",preview:!0},{name:"editor.findRangeHighlightBackground",description:"Find range highlight background color",preview:!0},{name:"editor.findMatchBorder",description:"Find match border color",preview:!0},{name:"editor.findMatchHighlightBorder",description:"Find match highlight border color",preview:!0},{name:"editor.findRangeHighlightBorder",description:"Range highlight border color",preview:!0}]},{name:"##Search Editor",description:"Search Editor Color",preview:!1,children:[{name:"searchEditor.findMatchBackground",description:"Find match background color",preview:!1},{name:"searchEditor.findMatchBorder",description:"Find match border color",preview:!1},{name:"searchEditor.textInputBorder",description:"Text input border color",preview:!1}]},{name:"##Highlight",description:"Hover / Line Highlight colors",preview:!0,children:[{name:"editor.hoverHighlightBackground",description:"Hover highlight background color",preview:!0},{name:"editor.lineHighlightBackground",description:"Line highlight background color",preview:!0},{name:"editor.lineHighlightBorder",description:"Line highlight border color",preview:!0}]},{name:"##Range Highlight",description:"Text Range Colors",preview:!0,children:[{name:"editor.rangeHighlightBackground",description:"Highlighted range background color",preview:!0},{name:"editor.rangeHighlightBorder",description:"Highlighted range border color",preview:!0}]},{name:"##Symbol Highlight",description:"Symbol Highlight Colors",preview:!0,children:[{name:"editor.symbolHighlightBackground",description:"Symbol highlight background color",preview:!0},{name:"editor.symbolHighlightBorder",description:"Symbol highlight border color",preview:!0}]},{name:"##Whitespace + Indent Guide",description:"Additional Text Element Colors",preview:!0,children:[{name:"editorWhitespace.foreground",description:"Whitespace characters foreground color",preview:!0},{name:"editorIndentGuide.background",description:"Indentation guides normal background",preview:!0},{name:"editorIndentGuide.activeBackground",description:"Indentation guides active background color",preview:!0},{name:"editorRuler.foreground",description:"Editor ruler foreground color",preview:!0}]},{name:"##Bracket Match Colors",description:"Bracket Match Colors",preview:!0,children:[{name:"editorBracketMatch.background",description:"Bracket matching background color",preview:!0},{name:"editorBracketMatch.border",description:"Bracket matching border color",preview:!0}]},{name:"##Overview Ruler",description:"Overview Ruler Colors",preview:!0,children:[{name:"editorOverviewRuler.background",description:"Background color",preview:!0},{name:"editorOverviewRuler.border",description:"Border color",preview:!0},{name:"editorOverviewRuler.findMatchForeground",description:"Find match foreground color",preview:!0},{name:"editorOverviewRuler.rangeHighlightForeground",description:"Range highlight foreground color",preview:!0},{name:"editorOverviewRuler.selectionHighlightForeground",description:"Selection highlight foreground color",preview:!0},{name:"editorOverviewRuler.wordHighlightForeground",description:"Word highlight foreground color",preview:!0},{name:"editorOverviewRuler.wordHighlightStrongForeground",description:"Word highlight strong foreground color",preview:!0},{name:"editorOverviewRuler.modifiedForeground",description:"Modified content foreground color",preview:!0},{name:"editorOverviewRuler.addedForeground",description:"Added content foreground color",preview:!0},{name:"editorOverviewRuler.deletedForeground",description:"Deleted content foreground color",preview:!0},{name:"editorOverviewRuler.errorForeground",description:"Error foreground color",preview:!0},{name:"editorOverviewRuler.warningForeground",description:"Warning foreground color",preview:!0},{name:"editorOverviewRuler.infoForeground",description:"Info foreground color",preview:!0},{name:"editorOverviewRuler.bracketMatchForeground",description:"Bracket matching foreground color",preview:!0}]},{name:"##Editor Messages",description:"Editor Message Colors",preview:!0,children:[{name:"editorError.foreground",description:"Editor error squiggles foreground color",preview:!0},{name:"editorError.border",description:"Editor error border color",preview:!0},{name:"editorWarning.foreground",description:"Editor warning squiggles foreground color",preview:!0},{name:"editorWarning.border",description:"Editor warning border color",preview:!0},{name:"editorInfo.foreground",description:"Editor info squiggles foreground color",preview:!0},{name:"editorInfo.border",description:"Editor info border color",preview:!0},{name:"editorHint.foreground",description:"Editor hint foreground color",preview:!0},{name:"editorHint.border",description:"Editor hint border color",preview:!0},{name:"problemsErrorIcon.foreground",description:"Error icon foreground color",preview:!0},{name:"problemsWarningIcon.foreground",description:"Warning icon foreground color",preview:!0},{name:"problemsInfoIcon.foreground",description:"Info icon foreground color",preview:!0}]},{name:"##Gutter Colors",description:"Gutter Colors",preview:!0,children:[{name:"editorGutter.background",description:"Background color",preview:!0},{name:"editorGutter.modifiedBackground",description:"Modified lines background color",preview:!0},{name:"editorGutter.addedBackground",description:"Added lines background color",preview:!0},{name:"editorGutter.deletedBackground",description:"Deleted lines background color",preview:!0},{name:"editorGutter.commentRangeForeground",description:"Commenting range foreground color",preview:!0}]},{name:"##Editor Widget Colors",description:"Widget Colors",preview:!0,children:[{name:"editorWidget.foreground",description:"Foreground color",preview:!0},{name:"editorWidget.background",description:"Background color",preview:!0},{name:"editorWidget.border",description:"Border color",preview:!0},{name:"editorWidget.resizeBorder",description:"Resize bar border color",preview:!0},{name:"editorSuggestWidget.background",description:"Suggestion widget background color",preview:!0},{name:"editorSuggestWidget.border",description:"Suggestion widget border color",preview:!0},{name:"editorSuggestWidget.foreground",description:"Suggestion widget foreground color",preview:!0},{name:"editorSuggestWidget.highlightForeground",description:"Suggestion widget highlight foreground color",preview:!0},{name:"editorSuggestWidget.selectedBackground",description:"Suggestion widget selection background color",preview:!0},{name:"editorHoverWidget.foreground",description:"Editor hover foreground color",preview:!0},{name:"editorHoverWidget.background",description:"Editor hover background color",preview:!0},{name:"editorHoverWidget.border",description:"Editor hover border color",preview:!0},{name:"editorHoverWidget.statusBarBackground",description:"Status bar background color",preview:!0},{name:"debugExceptionWidget.background",description:"Exception widget background color",preview:!0},{name:"debugExceptionWidget.border",description:"Exception widget border color",preview:!0},{name:"editorMarkerNavigation.background",description:"Background color",preview:!0},{name:"editorMarkerNavigationError.background",description:"Error background color",preview:!0},{name:"editorMarkerNavigationWarning.background",description:"Warning background color",preview:!0},{name:"editorMarkerNavigationInfo.background",description:"Info background color",preview:!0}]},{name:"##Peek View Colors",description:"Peek View Colors",preview:!0,children:[{name:"peekView.border",description:"Color of the peek view borders and arrow",preview:!0},{name:"peekViewEditor.background",description:"Background color of the peek view editor",preview:!0},{name:"peekViewEditorGutter.background",description:"Background color of the gutter in the peek view editor",preview:!0},{name:"peekViewEditor.matchHighlightBackground",description:"Match highlight color in the peek view editor",preview:!0},{name:"peekViewEditor.matchHighlightBorder",description:"Match highlight border color in the peek view editor",preview:!0},{name:"peekViewResult.background",description:"Background color of the peek view result list",preview:!0},{name:"peekViewResult.fileForeground",description:"Foreground color for file nodes in the peek view result list",preview:!0},{name:"peekViewResult.lineForeground",description:"Foreground color for line nodes in the peek view result list",preview:!0},{name:"peekViewResult.matchHighlightBackground",description:"Match highlight color in the peek view result list",preview:!0},{name:"peekViewResult.selectionBackground",description:"Background color of the selected entry in the peek view result list",preview:!0},{name:"peekViewResult.selectionForeground",description:"Foreground color of the selected entry in the peek view result list",preview:!0},{name:"peekViewTitle.background",description:"Background color of the peek view title area",preview:!0},{name:"peekViewTitleDescription.foreground",description:"Color of the peek view title info",preview:!0},{name:"peekViewTitleLabel.foreground",description:"Color of the peek view title",preview:!0}]},{name:"##Quick picker",description:"Quick Picker Colors",preview:!0,children:[{name:"pickerGroup.border",description:"Quick picker color for grouping borders",preview:!0},{name:"pickerGroup.foreground",description:"Quick picker color for grouping labels",preview:!0},{name:"quickInput.background",description:"Quick input background color",preview:!0},{name:"quickInput.foreground",description:"Quick input foreground color",preview:!0},{name:"quickInputTitle.background",description:"Quick picker title background color",preview:!0}]},{name:"##Diff Editor Colors",description:"Diff Editor Colors",preview:!1,children:[{name:"diffEditor.insertedTextBackground",description:"Inserted text background color",preview:!1},{name:"diffEditor.insertedTextBorder",description:"Inserted text border color",preview:!1},{name:"diffEditor.removedTextBackground",description:"Removed text background color",preview:!1},{name:"diffEditor.removedTextBorder",description:"Removed text border color",preview:!1},{name:"diffEditor.border",description:"Text editor border color",preview:!1}]},{name:"##Merge Colors",description:"Merge Conflict Colors",preview:!1,children:[{name:"merge.currentHeaderBackground",description:"Current header background in inline merge conflicts",preview:!1},{name:"merge.currentContentBackground",description:"Current content background in inline merge conflicts",preview:!1},{name:"merge.incomingHeaderBackground",description:"Incoming header background in inline merge conflicts",preview:!1},{name:"merge.incomingContentBackground",description:"Incoming content background in inline merge conflicts",preview:!1},{name:"merge.border",description:"Border color on headers and the splitter in inline merge conflicts",preview:!1},{name:"merge.commonContentBackground",description:"Common ancestor content background in inline merge-conflicts",preview:!1},{name:"merge.commonHeaderBackground",description:"Common ancestor header background in inline merge-conflicts",preview:!1},{name:"editorOverviewRuler.currentContentForeground",description:"Current overview ruler foreground for inline merge conflicts",preview:!1},{name:"editorOverviewRuler.incomingContentForeground",description:"Incoming overview ruler foreground for inline merge conflicts",preview:!1},{name:"editorOverviewRuler.commonContentForeground",description:"Common ancestor overview ruler foreground for inline merge conflicts",preview:!1}]},{name:"##Minimap",description:"Minimap Colors",preview:!0,children:[{name:"minimap.findMatchHighlight",description:"Find match highlight color",preview:!0},{name:"minimap.selectionHighlight",description:"Selection highlight color",preview:!0},{name:"minimap.errorHighlight",description:"Error highlight color",preview:!0},{name:"minimap.warningHighlight",description:"Warning highlight color",preview:!0},{name:"minimap.background",description:"Background color",preview:!0},{name:"minimapSlider.background",description:"Slider background color",preview:!0},{name:"minimapSlider.hoverBackground",description:"Slider hover background color",preview:!0},{name:"minimapSlider.activeBackground",description:"Slider pressed background color",preview:!0},{name:"minimapGutter.addedBackground",description:"Added content background color",preview:!0},{name:"minimapGutter.modifiedBackground",description:"Modified content background color",preview:!0},{name:"minimapGutter.deletedBackground",description:"Deleted content background color",preview:!0}]},{name:"##Editor Zone",description:"Editor Zone Colors",preview:!0,children:[{name:"editorZone.background",description:"Background color",preview:!0},{name:"editorZone.foreground",description:"Foreground color",preview:!0},{name:"resultView.headerBackground",description:"Result View header background color",preview:!0},{name:"resultView.headerForeground",description:"Result View header foreground color",preview:!0},{name:"resultView.background",description:"Result View cell background color",preview:!0},{name:"resultView.foreground",description:"Result View cell foreground color",preview:!0},{name:"resultView.gridColor",description:"Result View grid color",preview:!0},{name:"resultStatus.background",description:"Status background color",preview:!0},{name:"resultStatus.foreground",description:"Status foreground color",preview:!0}]},{name:"##Editor Prompt",description:"Editor Prompt Colors",preview:!0,children:[{name:"editorPrompt.primary.js",description:"Foreground color for the JS initial prompt",preview:!0},{name:"editorPrompt.secondary.js",description:"Foreground color for the JS prompt continuation",preview:!0},{name:"editorPrompt.primary.ts",description:"Foreground color for the TS initial prompt",preview:!0},{name:"editorPrompt.secondary.ts",description:"Foreground color for the TS prompt continuation",preview:!0},{name:"editorPrompt.primary.sql",description:"Foreground color for the SQL initial prompt",preview:!0},{name:"editorPrompt.secondary.sql",description:"Foreground color for the SQL prompt continuation",preview:!0},{name:"editorPrompt.primary.py",description:"Foreground color for the Python initial prompt",preview:!0},{name:"editorPrompt.secondary.py",description:"Foreground color for the Python prompt continuation",preview:!0},{name:"editorPrompt.result",description:"Foreground color for the result prompt continuation",preview:!0}]},{name:"##Miscellaneous",description:"Miscellaneous Colors",preview:!0,children:[{name:"editorLink.activeForeground",description:"Active link foreground color",preview:!0},{name:"editorUnnecessaryCode.border",description:"Unused code border color",preview:!0},{name:"editorUnnecessaryCode.opacity",description:"Unused code opacity",preview:!0},{name:"editor.foldBackground",description:"Fold range background color",preview:!0}]}]},{name:"#Scrollbar",description:"Scrollbar (Slider) Colors",preview:!0,children:[{name:"scrollbar.shadow",description:"Scrollbar slider shadow",preview:!0},{name:"scrollbarSlider.activeBackground",description:"Scrollbar slider background color when clicked on",preview:!0},{name:"scrollbarSlider.background",description:"Scrollbar slider background color",preview:!0},{name:"scrollbarSlider.hoverBackground",description:"Scrollbar slider background color when hovering",preview:!0}]},{name:"#Panel Colors",description:"Output Panel Colors",preview:!1,children:[{name:"panel.background",description:"Background color",preview:!1},{name:"panel.border",description:"Border color",preview:!1},{name:"panel.dropBackground",description:"Drop feedback background color",preview:!1},{name:"panelTitle.activeBorder",description:"Active title border color",preview:!1},{name:"panelTitle.activeForeground",description:"Active title foreground color",preview:!1},{name:"panelTitle.inactiveForeground",description:"Inactive title foreground color",preview:!1},{name:"panelInput.border",description:"Input box border color",preview:!1},{name:"imagePreview.border",description:"Border color for image in image preview",preview:!1}]},{name:"#Tooltip Colors",description:"Hint / Info / Tooltip Colors",preview:!0,children:[{name:"tooltip.foreground",description:"Foreground color of a tooltip",preview:!0},{name:"tooltip.background",description:"Background color of a tooltip",preview:!0},{name:"tooltip.border",description:"Border color of a tooltip",preview:!0}]},{name:"#Status Bar Colors",description:"Status Bar Colors",preview:!0,children:[{name:"statusBar.background",description:"Background Color",preview:!0},{name:"statusBar.foreground",description:"Foreground color",preview:!0},{name:"statusBar.border",description:"Border color",preview:!0},{name:"statusBar.debuggingBackground",description:"Status Bar background color when a program is being debugged",preview:!1},{name:"statusBar.debuggingForeground",description:"Status Bar foreground color when a program is being debugged",preview:!1},{name:"statusBar.debuggingBorder",description:"Status Bar border color separating the Status Bar and editor when a program is being debugged",preview:!1},{name:"statusBar.noFolderForeground",description:"Foreground color when no folder is opened",preview:!1},{name:"statusBar.noFolderBackground",description:"Background color when no folder is opened",preview:!1},{name:"statusBar.noFolderBorder",description:"Border color separating the Status Bar and editor when no folder is opened",preview:!1},{name:"statusBarItem.activeBackground",description:"Active item background color",preview:!0},{name:"statusBarItem.hoverBackground",description:"Item hover background color",preview:!0},{name:"statusBarItem.prominentForeground",description:"Prominent item foreground color",preview:!0},{name:"statusBarItem.prominentBackground",description:"Prominent item background color",preview:!0},{name:"statusBarItem.prominentHoverBackground",description:"Prominent item hover background color",preview:!0},{name:"statusBarItem.remoteBackground",description:"Remote indicator background color",preview:!1},{name:"statusBarItem.remoteForeground",description:"Remote indicator foreground color",preview:!1}]},{name:"#Tile Colors",description:"Browser Tile Colors",preview:!0,children:[{name:"browserTile.background",description:"Background color for a standard tile",preview:!0},{name:"browserTile.foreground",description:"Foreground color for a standard tile",preview:!0},{name:"browserTile.border",description:"Border color for a standard tile",preview:!0},{name:"browserTile.activeBackground",description:"Background color for a pressed/selected standard tile",preview:!0},{name:"browserTile.activeForeground",description:"Foreground color for a pressed/selected standard tile",preview:!0},{name:"browserTile.activeBorder",description:"Border color for a pressed/selected standard tile",preview:!0},{name:"browserTile.hoverBackground",description:"Background color for a standard tile under the mouse pointer",preview:!0},{name:"browserTileSecondary.background",description:"Background color for a secondary tile",preview:!0},{name:"browserTileSecondary.foreground",description:"Foreground color for a secondary tile",preview:!0},{name:"browserTileSecondary.border",description:"Border color for a secondary tile",preview:!0},{name:"browserTileSecondary.activeBackground",description:"Background color for a pressed/selected secondary tile",preview:!0},{name:"browserTileSecondary.activeForeground",description:"Foreground color for a pressed/selected secondary tile",preview:!0},{name:"browserTileSecondary.activeBorder",description:"Border color for a pressed/selected secondary tile",preview:!0}]},{name:"#Title Bar Colors",description:"Title Bar Colors",preview:!0,children:[{name:"titleBar.activeBackground",description:"Active background color",preview:!0},{name:"titleBar.activeForeground",description:"Active foreground color",preview:!0},{name:"titleBar.inactiveBackground",description:"Inactive background color",preview:!0},{name:"titleBar.inactiveForeground",description:"Inactive foreground color",preview:!0},{name:"titleBar.border",description:"Border color",preview:!0}]},{name:"#Menu Colors",description:"Menu Colors",preview:!0,children:[{name:"menubar.background",description:"Menu Bar background color",preview:!0},{name:"menubar.selectionForeground",description:"Menu Bar selection foreground color",preview:!0},{name:"menubar.selectionBackground",description:"Menu Bar selection background color",preview:!0},{name:"menubar.selectionBorder",description:"Menu Bar selection border color",preview:!0},{name:"menu.foreground",description:"Menu foreground color",preview:!0},{name:"menu.background",description:"Menu background color",preview:!0},{name:"menu.blurredBackground",description:"Menu background color if blurring of content behind the menu is supported",preview:!0},{name:"menu.selectionForeground",description:"Menu Item selected foreground color",preview:!0},{name:"menu.selectionBackground",description:"Menu Item selected background color",preview:!0},{name:"menu.selectionBorder",description:"Menu Item selected border color",preview:!0},{name:"menu.separatorBackground",description:"Menu Separator color",preview:!0},{name:"menu.border",description:"Menu Border Color",preview:!0}]},{name:"#Notification Colors",description:"Notification Colors",preview:!1,children:[{name:"notificationCenter.border",description:"Notification Center border color",preview:!1},{name:"notificationCenterHeader.foreground",description:"Notification Center header foreground color",preview:!1},{name:"notificationCenterHeader.background",description:"Notification Center header background color",preview:!1},{name:"notificationToast.border",description:"Notification toast border color",preview:!1},{name:"notifications.foreground",description:"Notification foreground color",preview:!1},{name:"notifications.background",description:"Notification background color",preview:!1},{name:"notifications.border",description:"Notification border color",preview:!1},{name:"notificationLink.foreground",description:"Notification links foreground color",preview:!1},{name:"notificationsErrorIcon.foreground",description:"Notification error icon color",preview:!1},{name:"notificationsWarningIcon.foreground",description:"Notification warning icon color",preview:!1},{name:"notificationsInfoIcon.foreground",description:"Notification info icon color",preview:!1}]},{name:"#Extension View",description:"Extension View Colors",preview:!1,children:[{name:"extensionButton.prominentForeground",description:"Button foreground color",preview:!1},{name:"extensionButton.prominentBackground",description:"Button background color",preview:!1},{name:"extensionButton.prominentHoverBackground",description:"Button background hover color",preview:!1},{name:"extensionBadge.remoteBackground",description:"Remote Badge background color",preview:!1},{name:"extensionBadge.remoteForeground",description:"Remote Badge foreground color",preview:!1}]},{name:"#Terminal Colors",description:"Integrated Terminal Colors",preview:!0,children:[{name:"terminal.background",description:"Background color",preview:!0},{name:"terminal.border",description:"Border color",preview:!0},{name:"terminal.foreground",description:"Foreground color",preview:!0},{name:"terminal.ansiBlack",description:"'Black' ANSI color",preview:!0},{name:"terminal.ansiBlue",description:"'Blue' ANSI color",preview:!0},{name:"terminal.ansiBrightBlack",description:"'BrightBlack' ANSI color",preview:!0},{name:"terminal.ansiBrightBlue",description:"'BrightBlue' ANSI color",preview:!0},{name:"terminal.ansiBrightCyan",description:"'BrightCyan' ANSI color",preview:!0},{name:"terminal.ansiBrightGreen",description:"'BrightGreen' ANSI color",preview:!0},{name:"terminal.ansiBrightMagenta",description:"'BrightMagenta' ANSI color",preview:!0},{name:"terminal.ansiBrightRed",description:"'BrightRed' ANSI color",preview:!0},{name:"terminal.ansiBrightWhite",description:"'BrightWhite' ANSI color",preview:!0},{name:"terminal.ansiBrightYellow",description:"'BrightYellow' ANSI color",preview:!0},{name:"terminal.ansiCyan",description:"'Cyan' ANSI color",preview:!0},{name:"terminal.ansiGreen",description:"'Green' ANSI color",preview:!0},{name:"terminal.ansiMagenta",description:"'Magenta' ANSI color",preview:!0},{name:"terminal.ansiRed",description:"'Red' ANSI color",preview:!0},{name:"terminal.ansiWhite",description:"'White' ANSI color",preview:!0},{name:"terminal.ansiYellow",description:"'Yellow' ANSI color",preview:!0},{name:"terminal.selectionBackground",description:"Selection background color",preview:!0},{name:"terminalCursor.background",description:"Terminal cursor background color",preview:!0},{name:"terminalCursor.foreground",description:"Terminal cursor foreground color",preview:!0}]},{name:"#Debug",description:"Debug Window Colors",preview:!1,children:[{name:"debugToolBar.background",description:"Debug toolbar background color",preview:!1},{name:"debugToolBar.border",description:"Debug toolbar border color",preview:!1},{name:"editor.stackFrameHighlightBackground",description:"Background color of the top stack frame highlight in the editor",preview:!1},{name:"editor.focusedStackFrameHighlightBackground",description:"Background color of the focused stack frame highlight in the editor",preview:!1}]},{name:"#Welcome Page",description:"Welcome Page Colors",preview:!1,children:[{name:"welcomePage.background",description:"Background color",preview:!1},{name:"welcomePage.buttonBackground",description:"Button background color",preview:!1},{name:"welcomePage.buttonHoverBackground",description:"Button hover background color",preview:!1},{name:"walkThrough.embeddedEditorBackground",description:"Embedded editor background color",preview:!1}]},{name:"#Git colors",description:"Git Colors",preview:!1,children:[{name:"gitDecoration.addedResourceForeground",description:"Color for added Git resources",preview:!1},{name:"gitDecoration.modifiedResourceForeground",description:"Color for modified Git resources",preview:!1},{name:"gitDecoration.deletedResourceForeground",description:"Color for deleted Git resources",preview:!1},{name:"gitDecoration.untrackedResourceForeground",description:"Color for untracked Git resources",preview:!1},{name:"gitDecoration.ignoredResourceForeground",description:"Color for ignored Git resources",preview:!1},{name:"gitDecoration.conflictingResourceForeground",description:"Color for conflicting Git resources",preview:!1},{name:"gitDecoration.submoduleResourceForeground",description:"Color for submodule resources",preview:!1}]},{name:"#Settings Editor Colors",description:"Settings Editor Colors",preview:!1,children:[{name:"settings.headerForeground",description:"Header foreground color",preview:!1},{name:"settings.modifiedItemIndicator",description:"Modified indicator color",preview:!1},{name:"settings.dropdownBackground",description:"Dropdown background color",preview:!1},{name:"settings.dropdownForeground",description:"Dropdown foreground color",preview:!1},{name:"settings.dropdownBorder",description:"Dropdown border color",preview:!1},{name:"settings.dropdownListBorder",description:"Dropdown list border color",preview:!1},{name:"settings.checkboxBackground",description:"Checkbox background color",preview:!1},{name:"settings.checkboxForeground",description:"Checkbox foreground color",preview:!1},{name:"settings.checkboxBorder",description:"Checkbox border color",preview:!1},{name:"settings.textInputBackground",description:"Text input background color",preview:!1},{name:"settings.textInputForeground",description:"Text input foreground color",preview:!1},{name:"settings.textInputBorder",description:"Text input border color",preview:!1},{name:"settings.numberInputBackground",description:"Number input background color",preview:!1},{name:"settings.numberInputForeground",description:"Number input foreground color",preview:!1},{name:"settings.numberInputBorder",description:"Number input border color",preview:!1}]},{name:"#Breadcrumbs",description:"Breadcrumb Colors",preview:!0,children:[{name:"breadcrumb.foreground",description:"Color of breadcrumb items",preview:!0},{name:"breadcrumb.background",description:"Background color of breadcrumb items",preview:!0},{name:"breadcrumb.focusForeground",description:"Color of focused breadcrumb items",preview:!0},{name:"breadcrumb.activeSelectionForeground",description:"Color of selected breadcrumb items",preview:!0},{name:"breadcrumbPicker.background",description:"Background color of breadcrumb item picker",preview:!0}]},{name:"#Snippets",description:"Snippet Colors",preview:!1,children:[{name:"editor.snippetTabstopHighlightBackground",description:"Snippet highlight background color",preview:!1},{name:"editor.snippetTabstopHighlightBorder",description:"Snippet highlight border color",preview:!1},{name:"editor.snippetFinalTabstopHighlightBackground",description:"Snippet final tabstop highlight background color",preview:!1},{name:"editor.snippetFinalTabstopHighlightBorder",description:"Snippet final tabstop highlight border color",preview:!1}]},{name:"#Symbol Icons",description:"Icon Colors",preview:!0,children:[{name:"symbolIcon.arrayForeground",description:"Array symbol foreground color",preview:!0},{name:"symbolIcon.booleanForeground",description:"Boolean symbol foreground color",preview:!0},{name:"symbolIcon.classForeground",description:"Class symbol foreground color",preview:!0},{name:"symbolIcon.colorForeground",description:"Color symbol foreground color",preview:!0},{name:"symbolIcon.constantForeground",description:"Constant symbol foreground color",preview:!0},{name:"symbolIcon.constructorForeground",description:"Constructor symbol foreground color",preview:!0},{name:"symbolIcon.enumeratorForeground",description:"Enumerator symbol foreground color",preview:!0},{name:"symbolIcon.enumeratorMemberForeground",description:"Enumerator member symbol foreground color",preview:!0},{name:"symbolIcon.eventForeground",description:"Event symbol foreground color",preview:!0},{name:"symbolIcon.fieldForeground",description:"Field symbol foreground color",preview:!0},{name:"symbolIcon.fileForeground",description:"File symbol foreground color",preview:!0},{name:"symbolIcon.folderForeground",description:"Folder symbol foreground color",preview:!0},{name:"symbolIcon.functionForeground",description:"Function symbol foreground color",preview:!0},{name:"symbolIcon.interfaceForeground",description:"Interface symbol foreground color",preview:!0},{name:"symbolIcon.keyForeground",description:"Key symbol foreground color",preview:!0},{name:"symbolIcon.keywordForeground",description:"Keyword symbol foreground color",preview:!0},{name:"symbolIcon.methodForeground",description:"Method symbol foreground color",preview:!0},{name:"symbolIcon.moduleForeground",description:"Module symbol foreground color",preview:!0},{name:"symbolIcon.namespaceForeground",description:"Namespace symbol foreground color",preview:!0},{name:"symbolIcon.nullForeground",description:"Null symbol foreground color",preview:!0},{name:"symbolIcon.numberForeground",description:"Number symbol foreground color",preview:!0},{name:"symbolIcon.objectForeground",description:"Object symbol foreground color",preview:!0},{name:"symbolIcon.operatorForeground",description:"Operator symbol foreground color",preview:!0},{name:"symbolIcon.packageForeground",description:"Package symbol foreground color",preview:!0},{name:"symbolIcon.propertyForeground",description:"Property symbol foreground color",preview:!0},{name:"symbolIcon.referenceForeground",description:"Reference symbol foreground color",preview:!0},{name:"symbolIcon.snippetForeground",description:"Snippet symbol foreground color",preview:!0},{name:"symbolIcon.stringForeground",description:"String symbol foreground color",preview:!0},{name:"symbolIcon.structForeground",description:"Struct symbol foreground color",preview:!0},{name:"symbolIcon.textForeground",description:"Text symbol foreground color",preview:!0},{name:"symbolIcon.typeParameterForeground",description:"Type parameter symbol foreground color",preview:!0},{name:"symbolIcon.unitForeground",description:"Unit symbol foreground color",preview:!0},{name:"symbolIcon.variableForeground",description:"Variable symbol foreground color",preview:!0}]},{name:"#Debug Icons",description:"Debug Icons",preview:!1,children:[{name:"debugIcon.breakpointForeground",description:"Icon color for breakpoints",preview:!1},{name:"debugIcon.breakpointDisabledForeground",description:"Icon color for disabled breakpoints",preview:!1},{name:"debugIcon.breakpointUnverifiedForeground",description:"Icon color for unverified breakpoints",preview:!1},{name:"debugIcon.breakpointCurrentStackframeForeground",description:"Icon color for the current breakpoint stack frame",preview:!1},{name:"debugIcon.breakpointStackframeForeground",description:"Icon color for all breakpoint stack frames",preview:!1},{name:"debugIcon.startForeground",description:"Debug toolbar icon for start debugging",preview:!1},{name:"debugIcon.pauseForeground",description:"Debug toolbar icon for pause",preview:!1},{name:"debugIcon.stopForeground",description:"Debug toolbar icon for stop",preview:!1},{name:"debugIcon.disconnectForeground",description:"Debug toolbar icon for disconnect",preview:!1},{name:"debugIcon.restartForeground",description:"Debug toolbar icon for restart",preview:!1},{name:"debugIcon.stepOverForeground",description:"Debug toolbar icon for step over",preview:!1},{name:"debugIcon.stepIntoForeground",description:"Debug toolbar icon for step into",preview:!1},{name:"debugIcon.stepOutForeground",description:"Debug toolbar icon for step over",preview:!1},{name:"debugIcon.continueForeground",description:"Debug toolbar icon for continue",preview:!1},{name:"debugIcon.stepBackForeground",description:"Debug toolbar icon for step back",preview:!1}]}],si={name:"Default Dark",type:"dark",colors:{hotForeground:"#F2F2F2",background:"#2C2C2C","window.background":"#212121","window.headerBackground":"#1B1B1B","window.footerBackground":"#212121","text.captionForeground":"#DFDFDF","text.dimmedForeground":"#797979","button.pressedBackground":"#3B3B3B","dropdown.hoverBackground":"#3B3B3B","list.headerBackground":"#38383E","list.gridColor":"#202020","list.sortIndicatorForeground":"#0D66A2","list.columnResizerForeground":"#BFBFBF","list.emptyBackground":"#383838","button.dimmedBackground":"#4E4E4E","input.hoverBackground":"#3B3A40","tag.background":"#606060","tag.foreground":"#DDDDDD","tooltip.foreground":"#D7D7D7","tooltip.background":"#3A3A3A","tooltip.border":"#535353","menubar.background":"#262626","menu.blurredBackground":"#25252580","tab.dropBackground":"#404040","resultView.headerBackground":"#0A0A0A","resultView.headerForeground":"#9F9E9E","resultView.background":"#1e1e1e","resultView.foreground":"#C0B4C4","resultView.gridColor":"#080808","editorZone.background":"#141414","editorZone.foreground":"#B1AEB5","resultStatus.background":"#0A0A0A","resultStatus.foreground":"#777777","browserTile.activeBackground":"#123E54","browserTile.activeBorder":"#2D9BD2","browserTile.background":"#123F54","browserTile.border":"#2A93C6","browserTileSecondary.background":"#2E2E2E","browserTileSecondary.border":"#444444","browserTile.foreground":"#CCCCCC","browserTile.activeForeground":"#CCCCCC","browserTile.hoverBackground":"#1B5E7F","browserTileSecondary.foreground":"#CCCCCC","browserTileSecondary.activeBackground":"#2C2C2C","browserTileSecondary.activeForeground":"#CCCCCC","browserTileSecondary.activeBorder":"#3D3D3D","popup.border":"#959595","popup.background":"#393939","popup.foreground":"#D7D7D7","editorPrompt.primary.js":"#ffe100","editorPrompt.secondary.js":"#ffe100","editorPrompt.primary.ts":"#529BBA","editorPrompt.secondary.ts":"#529BBA","editorPrompt.primary.sql":"#db8f00","editorPrompt.secondary.sql":"#db8f00","editorPrompt.primary.py":"#3776AB","editorPrompt.secondary.py":"#3776AB","editorPrompt.result":"#141414","activityBar.activeBackground":"#3A3A3A","activityBar.activeBorder":"#FFFFFF","activityBar.activeFocusBorder":"#6D122D","activityBar.background":"#3A3A3A","activityBar.border":"#3D3D3D","activityBar.dropBackground":"#555555","activityBar.foreground":"#B2B2B2","activityBar.inactiveForeground":"#FFFFFF","activityBarBadge.background":"#007ACC","activityBarBadge.foreground":"#FFFFFF","badge.background":"#4D4D4D","badge.foreground":"#FFFFFF","breadcrumb.activeSelectionForeground":"#E0E0E0","breadcrumb.background":"#222222","breadcrumb.focusForeground":"#E0E0E0","breadcrumb.foreground":"#CCCCCC","breadcrumbPicker.background":"#252525","button.background":"#333333","button.foreground":"#909090","button.hoverBackground":"#404040","button.border":"#3D3D3D","checkbox.background":"#3C3C3C","checkbox.border":"#3C3C3C","checkbox.foreground":"#F0F0F0",contrastActiveBorder:"#3d3d3d",contrastBorder:"#3d3d3d","debugExceptionWidget.background":"#420B0D","debugExceptionWidget.border":"#A31515","debugIcon.breakpointCurrentStackframeForeground":"#FFCC00","debugIcon.breakpointDisabledForeground":"#848484","debugIcon.breakpointForeground":"#E51400","debugIcon.breakpointStackframeForeground":"#89D185","debugIcon.breakpointUnverifiedForeground":"#848484","debugIcon.continueForeground":"#75BEFF","debugIcon.disconnectForeground":"#F48771","debugIcon.pauseForeground":"#75BEFF","debugIcon.restartForeground":"#89D185","debugIcon.startForeground":"#89D185","debugIcon.stepBackForeground":"#75BEFF","debugIcon.stepIntoForeground":"#75BEFF","debugIcon.stepOutForeground":"#75BEFF","debugIcon.stepOverForeground":"#75BEFF","debugIcon.stopForeground":"#F48771","debugToolBar.background":"#333333","debugToolBar.border":"#3D3D3D",descriptionForeground:"#D6D6DB","diffEditor.border":"#3D3D3D","diffEditor.insertedTextBackground":"#9BB955","diffEditor.insertedTextBorder":"#3D3D3D","diffEditor.removedTextBackground":"#FF0000","diffEditor.removedTextBorder":"#3D3D3D","dropdown.background":"#2A2727","dropdown.border":"#3A3A3A","dropdown.foreground":"#F0F0F0","dropdown.listBackground":"#333333","editor.background":"#1E1E1E","editor.findMatchBackground":"#5C5C5C","editor.findMatchBorder":"#6C120F","editor.findMatchHighlightBackground":"#5C5C5C","editor.findMatchHighlightBorder":"#3D3D3D","editor.findRangeHighlightBackground":"#6C120F","editor.findRangeHighlightBorder":"#3D3D3D","editor.focusedStackFrameHighlightBackground":"#7ABD7A","editor.foldBackground":"#40BE5D33","editor.foreground":"#D4D4D4","editor.hoverHighlightBackground":"#264F78","editor.inactiveSelectionBackground":"#3A3D41","editor.lineHighlightBackground":"#2C2C2C","editor.lineHighlightBorder":"#282828","editor.rangeHighlightBackground":"#B9323270","editor.rangeHighlightBorder":"#B9323270","editor.selectionBackground":"#264F78","editor.selectionForeground":"#D7D7D7","editor.selectionHighlightBackground":"#30985A","editor.selectionHighlightBorder":"#30985A","editor.snippetFinalTabstopHighlightBackground":"#2C2C2C","editor.snippetFinalTabstopHighlightBorder":"#525252","editor.snippetTabstopHighlightBackground":"#7C7C7C","editor.snippetTabstopHighlightBorder":"#3D3D3D","editor.stackFrameHighlightBackground":"#FFFF00","editor.symbolHighlightBackground":"#EA5C00","editor.symbolHighlightBorder":"#3D3D3D","editor.wordHighlightBackground":"#575757","editor.wordHighlightBorder":"#3D3D3D","editor.wordHighlightStrongBackground":"#004972","editor.wordHighlightStrongBorder":"#3D3D3D","editorBracketMatch.background":"#006400","editorBracketMatch.border":"#888888","editorCodeLens.foreground":"#999999","editorCursor.background":"#2C2C2C","editorCursor.foreground":"#AEAFAF","editorError.border":"#3D3D3D","editorError.foreground":"#F48771","editorGroup.border":"#444444","editorGroup.dropBackground":"#595959","editorGroup.emptyBackground":"#2C2C2C","editorGroup.focusedEmptyBorder":"#3D3D3D","editorGroupHeader.noTabsBackground":"#1E1E1E","editorGroupHeader.tabsBackground":"#272727","editorGroupHeader.tabsBorder":"#222222","editorGutter.addedBackground":"#587C0C","editorGutter.background":"#1E1E1E","editorGutter.commentRangeForeground":"#C5C5C5","editorGutter.deletedBackground":"#94151B","editorGutter.modifiedBackground":"#0C7D9D","editorHint.border":"#3D3D3D","editorHint.foreground":"#EEEEEE","editorHoverWidget.background":"#252525","editorHoverWidget.border":"#454545","editorHoverWidget.foreground":"#CCCCCC","editorHoverWidget.statusBarBackground":"#2C2C2C","editorIndentGuide.activeBackground":"#707070","editorIndentGuide.background":"#404040","editorInfo.border":"#3D3D3D","editorInfo.foreground":"#75BEFF","editorLightBulb.foreground":"#ffcc00","editorLightBulbAutoFix.foreground":"#75beff","editorLineNumber.activeForeground":"#C6C6C6","editorLineNumber.foreground":"#858585","editorLink.activeForeground":"#4E94CE","editorMarkerNavigation.background":"#2D2D2D","editorMarkerNavigationError.background":"#F48771","editorMarkerNavigationInfo.background":"#75BEFF","editorMarkerNavigationWarning.background":"#CCA700","editorOverviewRuler.addedForeground":"#587C0C","editorOverviewRuler.border":"#7F7F7F","editorOverviewRuler.bracketMatchForeground":"#A0A0A0","editorOverviewRuler.commonContentForeground":"#606060","editorOverviewRuler.currentContentForeground":"#40C8AE","editorOverviewRuler.deletedForeground":"#94151B","editorOverviewRuler.errorForeground":"#FF1212","editorOverviewRuler.findMatchForeground":"#D18616","editorOverviewRuler.incomingContentForeground":"#40A6FF","editorOverviewRuler.infoForeground":"#75BEFF","editorOverviewRuler.modifiedForeground":"#0C7D9D","editorOverviewRuler.rangeHighlightForeground":"#007ACC","editorOverviewRuler.selectionHighlightForeground":"#A0A0A0","editorOverviewRuler.warningForeground":"#CCA700","editorOverviewRuler.wordHighlightForeground":"#A0A0A0","editorOverviewRuler.wordHighlightStrongForeground":"#C0A0C0","editorPane.background":"#222222","editorRuler.foreground":"#24903D","editorSuggestWidget.background":"#252525","editorSuggestWidget.border":"#454545","editorSuggestWidget.foreground":"#D4D4D4","editorSuggestWidget.focusHighlightForeground":"#46b5ff","editorSuggestWidget.highlightForeground":"#0097FB","editorSuggestWidget.selectedBackground":"#062F4A","editorSuggestWidget.selectedForeground":"#e3e3e3","editorSuggestWidget.selectedIconForeground":"#F0F0F0","editorUnnecessaryCode.border":"#3D3D3D","editorUnnecessaryCode.opacity":"#000000","editorWarning.border":"#3D3D3D","editorWarning.foreground":"#CCA700","editorWhitespace.foreground":"#E3E3E3","editorWidget.background":"#252525","editorWidget.border":"#454545","editorWidget.foreground":"#CCCCCC","editorWidget.resizeBorder":"#3D3D3D",errorForeground:"#E78F7E","extensionBadge.remoteBackground":"#007ACC","extensionBadge.remoteForeground":"#FFFFFF","extensionButton.prominentBackground":"#327E36","extensionButton.prominentForeground":"#FFFFFF","extensionButton.prominentHoverBackground":"#28632B",focusBorder:"#0E639C",foreground:"#BFBFBF","gitDecoration.addedResourceForeground":"#81B88B","gitDecoration.conflictingResourceForeground":"#6C6CC4","gitDecoration.deletedResourceForeground":"#C74E39","gitDecoration.ignoredResourceForeground":"#8C8C8C","gitDecoration.modifiedResourceForeground":"#E2C08D","gitDecoration.submoduleResourceForeground":"#8DB9E2","gitDecoration.untrackedResourceForeground":"#73C991","icon.foreground":"#FFFFFF","imagePreview.border":"#808080","input.background":"#282828","input.border":"#343434","input.foreground":"#CCCCCC","input.placeholderForeground":"#595959","inputOption.activeBackground":"#0E639C","inputOption.activeBorder":"#007ACC","inputValidation.errorBackground":"#5A1D1D","inputValidation.errorBorder":"#BE1100","inputValidation.errorForeground":"#D7D7DB","inputValidation.infoBackground":"#063B49","inputValidation.infoBorder":"#007ACC","inputValidation.infoForeground":"#D7D7DB","inputValidation.warningBackground":"#352A05","inputValidation.warningBorder":"#B89500","inputValidation.warningForeground":"#D7D7DB","list.activeSelectionBackground":"#094771","list.activeSelectionForeground":"#FFFFFF","list.deemphasizedForeground":"#8c8c8c","list.dropBackground":"#3B3B3B","list.errorForeground":"#F88070","list.filterMatchBackground":"#EA5C00","list.filterMatchBorder":"#3D3D3D","list.focusBackground":"#062F4A","list.focusForeground":"#D7D7DB","list.highlightForeground":"#0097FB","list.hoverBackground":"#575757","list.hoverForeground":"#D7D7DB","list.inactiveFocusBackground":"#2C2C2C","list.inactiveSelectionBackground":"#373737","list.inactiveSelectionForeground":"#D7D7DB","list.invalidItemForeground":"#B89500","list.warningForeground":"#CCA700","listFilterWidget.background":"#653723","listFilterWidget.noMatchesOutline":"#BE1100","listFilterWidget.outline":"#000000","menu.background":"#252525","menu.border":"#3D3D3D","menu.foreground":"#CCCCCC","menu.selectionBackground":"#094771","menu.selectionBorder":"#073555","menu.selectionForeground":"#FFFFFF","menu.separatorBackground":"#BBBBBB","menubar.selectionBackground":"#094771","menubar.selectionBorder":"#3D3D3D","menubar.selectionForeground":"#CCCCCC","merge.border":"#3D3D3D","merge.commonContentBackground":"#606060","merge.commonHeaderBackground":"#606060","merge.currentContentBackground":"#40C8AE","merge.currentHeaderBackground":"#40C8AE","merge.incomingContentBackground":"#40A6FF","merge.incomingHeaderBackground":"#40A6FF","minimap.foregroundOpacity":"#000000","minimap.background":"#1E1E1E","minimap.errorHighlight":"#FF1212","minimap.findMatchHighlight":"#D18616","minimap.selectionHighlight":"#264F78","minimap.warningHighlight":"#CCA700","minimapGutter.addedBackground":"#587C0C","minimapGutter.deletedBackground":"#94151B","minimapGutter.modifiedBackground":"#0C7D9D","minimapSlider.activeBackground":"#BFBFBF66","minimapSlider.background":"#66666666","minimapSlider.hoverBackground":"#99999966","notebook.outputContainerBackgroundColor":"#ffffff0f","notificationCenter.border":"#3D3D3D","notificationCenterHeader.background":"#303031","notificationCenterHeader.foreground":"#D7D7DB","notificationLink.foreground":"#3794FF","notifications.background":"#252525","notifications.border":"#303030","notifications.foreground":"#CCCCCC","notificationsErrorIcon.foreground":"#F48771","notificationsInfoIcon.foreground":"#75BEFF","notificationsWarningIcon.foreground":"#CCA700","notificationToast.border":"#3D3D3D","panel.background":"#1E1E1E","panel.border":"#808080","panel.dropBackground":"#FFFFFF","panelInput.border":"#3D3D3D","panelTitle.activeBorder":"#E7E7E7","panelTitle.activeForeground":"#E7E7E7","panelTitle.inactiveForeground":"#E7E7E7","peekView.border":"#00568F","peekViewEditor.background":"#001F33","peekViewEditor.matchHighlightBackground":"#30985A","peekViewEditor.matchHighlightBorder":"#30985A","peekViewEditorGutter.background":"#001F33","peekViewResult.background":"#252525","peekViewResult.fileForeground":"#FFFFFF","peekViewResult.lineForeground":"#BBBBBB","peekViewResult.matchHighlightBackground":"#30985A","peekViewResult.selectionBackground":"#0E639C","peekViewResult.selectionForeground":"#BFBFBF","peekViewTitle.background":"#001C2E","peekViewTitleDescription.foreground":"#BFBFBF","peekViewTitleLabel.foreground":"#BFBFBF","pickerGroup.border":"#3F3F46","pickerGroup.foreground":"#3794FF","problemsErrorIcon.foreground":"#F48771","problemsInfoIcon.foreground":"#75BEFF","problemsWarningIcon.foreground":"#CCA700","progressBar.background":"#0E70C0","quickInput.background":"#252525","quickInput.foreground":"#CCCCCC","quickInputTitle.background":"#FFFFFF","scrollbar.shadow":"#000000","scrollbarSlider.activeBackground":"#BFBFBF","scrollbarSlider.background":"#797979","scrollbarSlider.hoverBackground":"#646464","searchEditor.findMatchBackground":"#EA5C00","searchEditor.textInputBorder":"#3D3D3D","selection.background":"#0C7ED9","settings.checkboxBackground":"#3C3C3C","settings.checkboxBorder":"#3C3C3C","settings.checkboxForeground":"#F0F0F0","settings.dropdownBackground":"#3C3C3C","settings.dropdownBorder":"#3C3C3C","settings.dropdownForeground":"#F0F0F0","settings.dropdownListBorder":"#454545","settings.headerForeground":"#E7E7E7","settings.modifiedItemIndicator":"#0C7D9D","settings.numberInputBackground":"#292929","settings.numberInputBorder":"#3D3D3D","settings.numberInputForeground":"#CCCCCC","settings.textInputBackground":"#292929","settings.textInputBorder":"#3D3D3D","settings.textInputForeground":"#CCCCCC","sideBar.background":"#272727","sideBar.border":"#3D3D3D","sideBar.dropBackground":"#313131","sideBar.markerBackground":"#3ABB92","sideBar.foreground":"#D7D7DB","sideBarSectionHeader.background":"#424242","sideBarSectionHeader.border":"#424242","sideBarSectionHeader.foreground":"#B3B3B3","sideBarTitle.foreground":"#6E6E6E","statusBar.background":"#007ACC","statusBar.border":"#000000","statusBar.debuggingForeground":"#FFFFFF","statusBar.foreground":"#FFFFFF","statusBar.noFolderBackground":"#68217A","statusBar.noFolderBorder":"#3D3D3D","statusBar.noFolderForeground":"#FFFFFF","statusBarItem.activeBackground":"#0098FD","statusBarItem.hoverBackground":"#0089E6","statusBarItem.prominentBackground":"#C0CC0080","statusBarItem.prominentForeground":"#FFFFFF","statusBarItem.prominentHoverBackground":"#C0CC0099","statusBarItem.remoteBackground":"#16825D","statusBarItem.remoteForeground":"#FFFFFF","symbolIcon.arrayForeground":"#CCCCCC","symbolIcon.booleanForeground":"#CCCCCC","symbolIcon.classForeground":"#EE9D28","symbolIcon.colorForeground":"#CCCCCC","symbolIcon.constantForeground":"#CCCCCC","symbolIcon.constructorForeground":"#B180D7","symbolIcon.enumeratorForeground":"#EE9D28","symbolIcon.enumeratorMemberForeground":"#75BEFF","symbolIcon.eventForeground":"#EE9D28","symbolIcon.fieldForeground":"#75BEFF","symbolIcon.fileForeground":"#CCCCCC","symbolIcon.folderForeground":"#CCCCCC","symbolIcon.functionForeground":"#B180D7","symbolIcon.interfaceForeground":"#75BEFF","symbolIcon.keyForeground":"#CCCCCC","symbolIcon.keywordForeground":"#CCCCCC","symbolIcon.methodForeground":"#B180D7","symbolIcon.moduleForeground":"#CCCCCC","symbolIcon.namespaceForeground":"#CCCCCC","symbolIcon.nullForeground":"#CCCCCC","symbolIcon.numberForeground":"#CCCCCC","symbolIcon.objectForeground":"#CCCCCC","symbolIcon.operatorForeground":"#CCCCCC","symbolIcon.packageForeground":"#CCCCCC","symbolIcon.propertyForeground":"#CCCCCC","symbolIcon.referenceForeground":"#CCCCCC","symbolIcon.snippetForeground":"#CCCCCC","symbolIcon.stringForeground":"#CCCCCC","symbolIcon.structForeground":"#CCCCCC","symbolIcon.textForeground":"#CCCCCC","symbolIcon.typeParameterForeground":"#CCCCCC","symbolIcon.unitForeground":"#CCCCCC","symbolIcon.variableForeground":"#75BEFF","tab.activeBackground":"#1E1E1E","tab.activeBorder":"#FFFFFF00","tab.activeBorderTop":"#007ACC","tab.activeForeground":"#FFFFFF","tab.activeModifiedBorder":"#3399CC","tab.border":"#25252500","tab.hoverBackground":"#404040","tab.hoverBorder":"#404040","tab.inactiveBackground":"#2E2E2E","tab.inactiveForeground":"#999999","tab.inactiveModifiedBorder":"#3399CC","tab.unfocusedActiveBackground":"#1E1E1E","tab.unfocusedActiveBorder":"#000000","tab.unfocusedActiveBorderTop":"#007ACC","tab.unfocusedActiveForeground":"#FFFFFF","tab.unfocusedActiveModifiedBorder":"#3399CC","tab.unfocusedHoverBackground":"#404040","tab.unfocusedHoverBorder":"#000000","tab.unfocusedInactiveForeground":"#FFFFFF","tab.unfocusedInactiveModifiedBorder":"#3399CC","terminal.ansiBlack":"#000000","terminal.ansiBlue":"#2472C8","terminal.ansiBrightBlack":"#666666","terminal.ansiBrightBlue":"#3B8EEA","terminal.ansiBrightCyan":"#29B8DB","terminal.ansiBrightGreen":"#23D18B","terminal.ansiBrightMagenta":"#D670D6","terminal.ansiBrightRed":"#F14C4C","terminal.ansiBrightWhite":"#E5E5E5","terminal.ansiBrightYellow":"#F5F543","terminal.ansiCyan":"#11A8CD","terminal.ansiGreen":"#0DBC79","terminal.ansiMagenta":"#BC3FBC","terminal.ansiRed":"#CD3131","terminal.ansiWhite":"#E5E5E5","terminal.ansiYellow":"#E5E510","terminal.background":"#050505","terminal.border":"#808080","terminal.foreground":"#CCCCCC","terminal.selectionBackground":"#FFFFFF","terminalCursor.background":"#2C2C2C","terminalCursor.foreground":"#D7D7DB","textBlockQuote.background":"#7F7F7F21","textBlockQuote.border":"#007ACC","textCodeBlock.background":"#0A0A0A","textLink.activeForeground":"#9C27B0","textLink.foreground":"#3DA2D6","textPreformat.foreground":"#D7BA7D","textSeparator.foreground":"#3B3B3B","titleBar.activeBackground":"#222222","titleBar.activeForeground":"#BEBEBE","titleBar.border":"#007ACC","titleBar.inactiveBackground":"#1E1E1E","titleBar.inactiveForeground":"#BEBEBE","tree.indentGuidesStroke":"#585858","walkThrough.embeddedEditorBackground":"#2C2C2C","welcomePage.background":"#333338","welcomePage.buttonBackground":"#2C2C2C","welcomePage.buttonHoverBackground":"#494949","widget.shadow":"#0000004d","window.activeBorder":"#222225","window.inactiveBorder":"#222225","activityBar.dropBorder":"#AFAFAF","editorGroupHeader.border":"#3D3D3D","searchEditor.findMatchBorder":"#3D3D3D","statusBar.debuggingBackground":"#2C2C2C","statusBar.debuggingBorder":"#3D3D3D","editorOverviewRuler.background":"#1E1E1E"},tokenColors:[{scope:["emphasis"],settings:{fontStyle:"bold"},name:"Emphasis"},{scope:["strong"],settings:{fontStyle:"bold"},name:"Strong"},{name:"Line + Block Comment",scope:["comment","comment.block","comment.line"],settings:{foreground:"#0987CB"}},{name:"Special line comment",scope:["comment.line.double-dash","comment.line.double-slash","comment.line.number-sign"],settings:{foreground:"#52a0cb"}},{name:"Single line comment with char",scope:"comment.line.character",settings:{foreground:"#709dce"}},{name:"Doc Comment",scope:"comment.block.documentation",settings:{foreground:"#709dce"}},{name:"Generic constant",scope:"constant, constant.other",settings:{foreground:"#e59337"}},{name:"Numeric constant",scope:"constant.numeric",settings:{foreground:"#e59337"}},{name:"Character constant",scope:"constant.character",settings:{foreground:"#e59337"}},{name:"Escape sequence",scope:"constant.character.escape",settings:{foreground:"#ff6f30"}},{name:"Language constant",scope:"constant.language",settings:{fontStyle:"bold underline",foreground:"#c5914c"}},{name:"Delimiter",scope:["delimiter"],settings:{fontStyle:"bold",foreground:"#A8A8A8"}},{name:"Generic entity + others default",scope:["entity","entity.other"],settings:{foreground:"#cc666a"}},{name:"Generic entity name",scope:"entity.name",settings:{foreground:"#cc4e52"}},{name:"Function name",scope:"entity.name.function",settings:{foreground:"#c2c299"}},{name:"Type name",scope:"entity.name.type",settings:{foreground:"#ebd8b7",fontStyle:""}},{name:"Tag name",scope:"entity.name.tag",settings:{foreground:"#cc833b"}},{name:"Section name",scope:"entity.name.section",settings:{foreground:"#c2c269"}},{name:"Inherited class",scope:"entity.other.inherited-class",settings:{fontStyle:"italic underline",foreground:"#cf85be"}},{name:"Attribute name",scope:"entity.other.attribute-name",settings:{foreground:"#eb9195"}},{name:"Generic Identifier",scope:["identifier"],settings:{foreground:"#CDCDCD"}},{name:"Generic invalid",scope:"invalid",settings:{background:"#e03e44",foreground:"#FFFFFF"}},{name:"Illegal",scope:"invalid.illegal",settings:{background:"#e03e44",foreground:"#e5e500"}},{name:"Deprecated",scope:"invalid.deprecated",settings:{background:"#e0a9ab"}},{name:"Generic keyword",scope:"keyword",settings:{fontStyle:" bold",foreground:"#2BB074"}},{name:"Control keyword",scope:"keyword.control",settings:{fontStyle:"bold",foreground:"#a9b5ad"}},{name:"Operator keyword + operators",scope:"keyword.operator",settings:{fontStyle:"bold",foreground:"#FFFF00"}},{name:"Other keywords",scope:"keyword.other",settings:{fontStyle:"bold",foreground:"#8f9a9c"}},{name:"Generic markup",scope:"markup",settings:{}},{name:"Generic meta",scope:"meta",settings:{}},{name:"Meta Tag",scope:["metatag"],settings:{foreground:"#EBC8A3"}},{name:"Number",scope:["number"],settings:{foreground:"#FF9800"}},{name:"Other",scope:["other"],settings:{foreground:"#D7D7D7"}},{name:"Generic storage",scope:"storage",settings:{fontStyle:"bold",foreground:"#689c9c"}},{name:"Type",scope:"storage.type",settings:{fontStyle:"bold",foreground:"#78a6a6"}},{name:"Storage modifier",scope:"storage.modifier",settings:{fontStyle:"bold",foreground:"#78a6a6"}},{name:"Generic string",scope:["string"],settings:{foreground:"#e5bd46",fontStyle:""}},{name:"Generic quoted string",scope:"string.quoted",settings:{foreground:"#e5bd46"}},{name:"Singly quoted string",scope:"string.quoted.single",settings:{foreground:"#e5bd46"}},{name:"Doubly quoted string",scope:"string.quoted.double",settings:{foreground:"#e5bd46"}},{name:"Triply quoted string",scope:"string.quoted.triple",settings:{foreground:"#e5bd46"}},{name:"Other quoted string",scope:["string.quoted.other","string.sql"],settings:{foreground:"#e5bd46"}},{name:"Unquoted string",scope:"string.unquoted",settings:{foreground:"#e5bd46"}},{name:"Interpolated string",scope:"string.interpolated",settings:{foreground:"#e0d5b3"}},{name:"Regular expression string",scope:"string.regexp",settings:{foreground:"#FF6f30"}},{name:"Other string",scope:"string.other",settings:{foreground:"#eccd73"}},{name:"Generic support",scope:"support",settings:{foreground:"#9b90c3"}},{name:"Function support",scope:["predefined.sql","support.function"],settings:{foreground:"#78a6a6"}},{name:"Class support",scope:"support.class",settings:{foreground:"#9b90c3"}},{name:"Type support",scope:"support.type",settings:{foreground:"#b9b1d5"}},{name:"Constant support",scope:"support.constant",settings:{foreground:"#9b90c3"}},{name:"Variable support",scope:"support.variable",settings:{foreground:"#9b90c3"}},{name:"Other support",scope:"support.other",settings:{foreground:"#9b90c3"}},{name:"Type",scope:["type.identifier"],settings:{foreground:"#EBD7B9"}},{name:"Generic variable",scope:"variable",settings:{foreground:"#d7b37c"}},{name:"Parameter variable",scope:"variable.parameter",settings:{foreground:"#63bf8d"}},{name:"Language variable",scope:"variable.language",settings:{foreground:"#d7b37c"}},{name:"Other variable",scope:"variable.other",settings:{foreground:"#5aaa7f"}},{name:"Predicate entity",scope:"entity.other.predicate",settings:{foreground:"#a6a6a6"}},{name:"Any other block",scope:"entity.other.block",settings:{foreground:"#7d7d7d"}},{name:"Token support",scope:"support.other.token",settings:{foreground:"#d7d7c7"}},{name:"JSON Value String",scope:["string.value","string.value.json"],settings:{foreground:"#46c1f1"}},{name:"diff.header",scope:["meta.diff.header"],settings:{foreground:"#75715E"}},{name:"diff.deleted",scope:"markup.deleted",settings:{foreground:"#F92672"}},{name:"diff.inserted",scope:"markup.inserted",settings:{foreground:"#A6E22E"}},{name:"diff.changed",scope:"markup.changed",settings:{foreground:"#E6DB74"}},{scope:"markup.inserted",settings:{foreground:"#b5cea8"}},{scope:"markup.deleted",settings:{foreground:"#ce9178"}},{scope:"markup.changed",settings:{foreground:"#569cd6"}},{scope:"markup.punctuation.quote",settings:{foreground:"#608b4e"}},{scope:"markup.other",settings:{foreground:"#d4d4d4"}},{scope:"constant.rgb-value",settings:{foreground:"#d4d4d4"}},{scope:"entity.name.selector",settings:{foreground:"#d7ba7d"}},{scope:"entity.other.attribute-name.css",settings:{foreground:"#d7ba7d"}},{scope:"markup.underline",settings:{fontStyle:"underline"}},{scope:"markup.bold",settings:{fontStyle:"bold",foreground:"#569cd6"}},{scope:"markup.heading",settings:{fontStyle:"bold",foreground:"#569cd6"}},{scope:"markup.italic",settings:{fontStyle:"italic",foreground:"#569cd6"}},{scope:"",settings:{foreground:"#D4D4D4"}},{scope:"emphasis",settings:{fontStyle:"italic"}},{scope:"strong",settings:{fontStyle:"bold"}},{scope:"variable.predefined",settings:{foreground:"#c8dfbd"}},{scope:"constant",settings:{foreground:"#569CD6"}},{scope:"number.hex",settings:{foreground:"#5BB498"}},{scope:"regexp",settings:{foreground:"#B46695"}},{scope:"annotation",settings:{foreground:"#cc6666"}},{scope:"type",settings:{foreground:"#3DC9B0"}},{scope:"delimiter.html",settings:{foreground:"#808080"}},{scope:"delimiter.xml",settings:{foreground:"#808080"}},{scope:"delimiter.colon",settings:{foreground:"#80AA80"}},{scope:"tag",settings:{foreground:"#569CD6"}},{scope:"tag.id.pug",settings:{foreground:"#4F76AC"}},{scope:"tag.class.pug",settings:{foreground:"#4F76AC"}},{scope:"meta.scss",settings:{foreground:"#A79873"}},{scope:"meta.tag",settings:{foreground:"#CE9178"}},{scope:"metatag.content.html",settings:{foreground:"#9CDCFE"}},{scope:"metatag.html",settings:{foreground:"#569CD6"}},{scope:"metatag.xml",settings:{foreground:"#569CD6"}},{scope:"metatag.php",settings:{fontStyle:"bold"}},{scope:"key",settings:{foreground:"#9CDCFE"}},{scope:"string.key.json",settings:{foreground:"#209688"}},{scope:"attribute.name",settings:{foreground:"#9CDCFE"}},{scope:"attribute.value",settings:{foreground:"#CE9178"}},{scope:"attribute.value.number.css",settings:{foreground:"#B5CEA8"}},{scope:"attribute.value.unit.css",settings:{foreground:"#B5CEA8"}},{scope:"attribute.value.hex.css",settings:{foreground:"#D4D4D4"}},{scope:"keyword.flow",settings:{foreground:"#C586C0"}},{scope:"keyword.json",settings:{foreground:"#CE9178"}},{scope:"keyword.flow.scss",settings:{foreground:"#569CD6"}},{scope:"operator.scss",settings:{foreground:"#909090"}},{scope:"operator.sql",settings:{foreground:"#778899"}},{scope:"operator.swift",settings:{foreground:"#909090"}},{scope:"command",settings:{foreground:"#db8f00",fontStyle:""}}]},ri={name:"Default Light",type:"light",colors:{hotForeground:"#848484",background:"#FFFFFF","window.background":"#FFFFFF","window.headerBackground":"#F2F2F3","window.footerBackground":"#FFFFFF","text.captionForeground":"#998F8F","text.dimmedForeground":"#707070","button.pressedBackground":"#0062A3","dropdown.hoverBackground":"#F0F0F0","tooltip.foreground":"#484848","tooltip.background":"#F2F2F2","tooltip.border":"#CBCBCB","menubar.background":"#FFFFFF","menu.blurredBackground":"#ffffff80","list.headerBackground":"#E6E6E6","list.gridColor":"#EDEDED","list.sortIndicatorForeground":"#007ACC","list.columnResizerForeground":"#BFBFBF","list.emptyBackground":"#383838","button.dimmedBackground":"#B7B7B7","input.hoverBackground":"#F0F0F0","tag.background":"#808080","tag.foreground":"#F2F2F2","tag.dropBackground":"#404040","browserTile.activeBackground":"#ABD7ED","browserTile.activeBorder":"#42A5D7","browserTile.background":"#C0E1F2","browserTile.border":"#6CB9E0","browserTile.foreground":"#575760","browserTile.activeForeground":"#575760","browserTile.hoverBackground":"#AAD6ED","browserTileSecondary.background":"#E4E4E7","browserTileSecondary.border":"#B4B4BB","browserTileSecondary.foreground":"#575760","browserTileSecondary.activeBackground":"#D6D6DB","browserTileSecondary.activeForeground":"#575760","browserTileSecondary.activeBorder":"#B4B4BB","tab.dropBackground":"#CFDDEC","resultView.headerBackground":"#F0F0F0","resultView.headerForeground":"#616161","resultView.gridColor":"#EDEDED","resultView.background":"#FFFFFF","resultView.foreground":"#C0B4C4","editorZone.background":"#EAEAEA","editorZone.foreground":"#616161","resultStatus.background":"#F3F3F3","resultStatus.foreground":"#616161","popup.border":"#BFBFBF","popup.background":"#FFFFFF","popup.foreground":"#616161","editorPrompt.primary.js":"#ffe100","editorPrompt.secondary.js":"#ffe100","editorPrompt.primary.ts":"#529BBA","editorPrompt.secondary.ts":"#529BBA","editorPrompt.primary.sql":"#db8f00","editorPrompt.secondary.sql":"#db8f00","editorPrompt.primary.py":"#3776AB","editorPrompt.secondary.py":"#3776AB","editorPrompt.result":"#EAEAEA","activityBar.activeBackground":"#2C2C30","activityBar.activeBorder":"#FFFFFF","activityBar.activeFocusBorder":"#3D3D42","activityBar.background":"#2C2C2C","activityBar.border":"#4D4D4D","activityBar.dropBackground":"#666666","activityBar.foreground":"#808080","activityBar.inactiveForeground":"#FFFFFF","activityBarBadge.background":"#007ACC","activityBarBadge.foreground":"#FFFFFF","badge.background":"#C4C4C4","badge.foreground":"#333333","breadcrumb.activeSelectionForeground":"#45A9EC","breadcrumb.background":"#F8F8F8","breadcrumb.focusForeground":"#616161","breadcrumb.foreground":"#202020","breadcrumbPicker.background":"#616161","button.background":"#007ACC","button.foreground":"#FFFFFF","button.hoverBackground":"#45A9EC","button.border":"#007ACC","checkbox.background":"#FFFFFF","checkbox.border":"#007ACC","checkbox.foreground":"#707070",contrastActiveBorder:"#3d3d42",contrastBorder:"#3d3d42","debugExceptionWidget.background":"#F1DFDE","debugExceptionWidget.border":"#A31515","debugIcon.breakpointCurrentStackframeForeground":"#FFCC00","debugIcon.breakpointDisabledForeground":"#848484","debugIcon.breakpointForeground":"#E51400","debugIcon.breakpointStackframeForeground":"#89D185","debugIcon.breakpointUnverifiedForeground":"#848484","debugIcon.continueForeground":"#007ACC","debugIcon.disconnectForeground":"#A1260D","debugIcon.pauseForeground":"#007ACC","debugIcon.restartForeground":"#388A34","debugIcon.startForeground":"#388A34","debugIcon.stepBackForeground":"#007ACC","debugIcon.stepIntoForeground":"#007ACC","debugIcon.stepOutForeground":"#007ACC","debugIcon.stepOverForeground":"#007ACC","debugIcon.stopForeground":"#A1260D","debugToolBar.background":"#F3F3F3","debugToolBar.border":"#3D3D42",descriptionForeground:"#717171","diffEditor.border":"#3D3D42","diffEditor.insertedTextBackground":"#9BB955","diffEditor.insertedTextBorder":"#3D3D42","diffEditor.removedTextBackground":"#FF0000","diffEditor.removedTextBorder":"#3D3D42","dropdown.background":"#FFFFFF","dropdown.border":"#CECECE","dropdown.listBackground":"#FFFFFF","editor.background":"#FFFFFF","editor.findMatchBackground":"#808080b3","editor.findMatchBorder":"#808080b3","editor.findMatchHighlightBackground":"#EA5C0073","editor.findMatchHighlightBorder":"#EA5C0073","editor.findRangeHighlightBackground":"#E8E8E8","editor.findRangeHighlightBorder":"#3D3D4200","editor.focusedStackFrameHighlightBackground":"#CEE7CE","editor.foldBackground":"#ADD6FF66","editor.foreground":"#000000","editor.hoverHighlightBackground":"#ADD6FF","editor.inactiveSelectionBackground":"#E5EBF1","editor.lineHighlightBackground":"#FFFFFF","editor.lineHighlightBorder":"#E6E6E6","editor.rangeHighlightBackground":"#FFFF474d","editor.rangeHighlightBorder":"#FFFFCC00","editor.selectionBackground":"#ADD6FF","editor.selectionForeground":"#D7D7DB","editor.selectionHighlightBackground":"#ADD6FF","editor.selectionHighlightBorder":"#3D3D42","editor.snippetFinalTabstopHighlightBackground":"#2C2C30","editor.snippetFinalTabstopHighlightBorder":"#0A3264","editor.snippetTabstopHighlightBackground":"#0A3264","editor.snippetTabstopHighlightBorder":"#3D3D42","editor.stackFrameHighlightBackground":"#FFFF66","editor.symbolHighlightBackground":"#EA5C00","editor.symbolHighlightBorder":"#3D3D42","editor.wordHighlightBackground":"#7A7A7A77","editor.wordHighlightBorder":"#7A7A7A94","editor.wordHighlightStrongBackground":"#007ACC4d","editor.wordHighlightStrongBorder":"#C2D7E5","editorBracketMatch.background":"#0064001a","editorBracketMatch.border":"#B9B9B9","editorCodeLens.foreground":"#999999","editorCursor.background":"#ED4A56","editorCursor.foreground":"#000000","editorError.border":"#3D3D4200","editorError.foreground":"#E51400","editorGroup.border":"#E7E7E7","editorGroup.dropBackground":"#DAE7F6","editorGroup.emptyBackground":"#d1d1d1","editorGroup.focusedEmptyBorder":"#3D3D42","editorGroupHeader.noTabsBackground":"#FFFFFF","editorGroupHeader.tabsBackground":"#F3F3F3","editorGroupHeader.tabsBorder":"#FFFFFF","editorGutter.addedBackground":"#81B88B","editorGutter.background":"#FFFFFF","editorGutter.commentRangeForeground":"#C5C5C5","editorGutter.deletedBackground":"#CA4B51","editorGutter.modifiedBackground":"#66AFE0","editorHint.border":"#3D3D4200","editorHint.foreground":"#6C6C6C","editorHoverWidget.background":"#F3F3F3","editorHoverWidget.border":"#C8C8C8","editorHoverWidget.foreground":"#616161","editorHoverWidget.statusBarBackground":"#E7E7E7","editorIndentGuide.activeBackground":"#939393","editorIndentGuide.background":"#D3D3D3","editorInfo.border":"#3D3D4200","editorInfo.foreground":"#75BEFF","editorLightBulb.foreground":"#ddb100","editorLightBulbAutoFix.foreground":"#007acc","editorLineNumber.activeForeground":"#237893","editorLineNumber.foreground":"#237893","editorLink.activeForeground":"#0000FF","editorMarkerNavigation.background":"#FFFFFF","editorMarkerNavigationError.background":"#E51400","editorMarkerNavigationInfo.background":"#75BEFF","editorMarkerNavigationWarning.background":"#E9A700","editorOverviewRuler.addedForeground":"#81B88B","editorOverviewRuler.border":"#7F7F7F","editorOverviewRuler.bracketMatchForeground":"#A0A0A0","editorOverviewRuler.commonContentForeground":"#606060","editorOverviewRuler.currentContentForeground":"#40C8AE","editorOverviewRuler.deletedForeground":"#CA4B51","editorOverviewRuler.errorForeground":"#FF1212","editorOverviewRuler.findMatchForeground":"#D18616","editorOverviewRuler.incomingContentForeground":"#40A6FF","editorOverviewRuler.infoForeground":"#75BEFF","editorOverviewRuler.modifiedForeground":"#66AFE0","editorOverviewRuler.rangeHighlightForeground":"#007ACC","editorOverviewRuler.selectionHighlightForeground":"#A0A0A0","editorOverviewRuler.warningForeground":"#E9A700","editorOverviewRuler.wordHighlightForeground":"#A0A0A0","editorOverviewRuler.wordHighlightStrongForeground":"#C0A0C0","editorPane.background":"#FFFFFF","editorRuler.foreground":"#D3D3D3","editorSuggestWidget.background":"#F3F3F3","editorSuggestWidget.border":"#C8C8C8","editorSuggestWidget.foreground":"#000000","editorSuggestWidget.focusHighlightForeground":"#003e74","editorSuggestWidget.highlightForeground":"#0066BF","editorSuggestWidget.selectedBackground":"#94caf9","editorSuggestWidget.selectedForeground":"#000000","editorSuggestWidget.selectedIconForeground":"#000000","editorUnnecessaryCode.border":"#3D3D42","editorUnnecessaryCode.opacity":"#000000","editorWarning.border":"#3D3D4200","editorWarning.foreground":"#E9A700","editorWhitespace.foreground":"#333333","editorWidget.background":"#F3F3F3","editorWidget.border":"#C8C8C8","editorWidget.foreground":"#616161","editorWidget.resizeBorder":"#3D3D42",errorForeground:"#A1260D","extensionBadge.remoteBackground":"#007ACC","extensionBadge.remoteForeground":"#FFFFFF","extensionButton.prominentBackground":"#327E36","extensionButton.prominentForeground":"#FFFFFF","extensionButton.prominentHoverBackground":"#28632B",focusBorder:"#007ACC",foreground:"#616161","gitDecoration.addedResourceForeground":"#587C0C","gitDecoration.conflictingResourceForeground":"#6C6CC4","gitDecoration.deletedResourceForeground":"#AD0707","gitDecoration.ignoredResourceForeground":"#8E8E90","gitDecoration.modifiedResourceForeground":"#895503","gitDecoration.submoduleResourceForeground":"#1258A7","gitDecoration.untrackedResourceForeground":"#007100","icon.foreground":"#616161","imagePreview.border":"#808080","input.background":"#FFFFFF","input.border":"#CECECE","input.foreground":"#000000","input.placeholderForeground":"#A9A9A9","inputOption.activeBackground":"#CCE9FC","inputOption.activeBorder":"#CCE9FC","inputValidation.errorBackground":"#F2DEDE","inputValidation.errorBorder":"#BE1100","inputValidation.errorForeground":"#D7D7DB","inputValidation.infoBackground":"#D6ECF2","inputValidation.infoBorder":"#007ACC","inputValidation.infoForeground":"#D7D7DB","inputValidation.warningBackground":"#F6F5D2","inputValidation.warningBorder":"#B89500","inputValidation.warningForeground":"#D7D7DB","list.activeSelectionBackground":"#B4D8FE","list.activeSelectionForeground":"#616161","list.deemphasizedForeground":"#8e8e90","list.dropBackground":"#D6EBFF","list.errorForeground":"#B01011","list.filterMatchBackground":"#EA5C00","list.filterMatchBorder":"#3D3D42","list.focusBackground":"#D6EBFF","list.focusForeground":"#D7D7DB","list.highlightForeground":"#0066BF","list.hoverBackground":"#68B1FD","list.hoverForeground":"#FFFFFF","list.inactiveFocusBackground":"#2C2C30","list.inactiveSelectionBackground":"#CECECE","list.inactiveSelectionForeground":"#616161","list.invalidItemForeground":"#B89500","list.warningForeground":"#855F00","listFilterWidget.background":"#EFC1AD","listFilterWidget.noMatchesOutline":"#BE1100","listFilterWidget.outline":"#000000","menu.background":"#FFFFFF","menu.border":"#3D3D42","menu.foreground":"#616161","menu.selectionBackground":"#45A9EC","menu.selectionBorder":"#00000000","menu.selectionForeground":"#FFFFFF","menu.separatorBackground":"#979797","menubar.selectionBackground":"#45A9EC","menubar.selectionBorder":"#3D3D4200","menubar.selectionForeground":"#FFFFFF","merge.border":"#3D3D42","merge.commonContentBackground":"#606060","merge.commonHeaderBackground":"#606060","merge.currentContentBackground":"#40C8AE","merge.currentHeaderBackground":"#40C8AE","merge.incomingContentBackground":"#40A6FF","merge.incomingHeaderBackground":"#40A6FF","minimap.foregroundOpacity":"#000000","minimap.background":"#FFFFFFFF","minimap.errorHighlight":"#FF1212","minimap.findMatchHighlight":"#D18616","minimap.selectionHighlight":"#ADD6FF","minimap.warningHighlight":"#E9A700","minimapGutter.addedBackground":"#81B88B","minimapGutter.deletedBackground":"#CA4B51","minimapGutter.modifiedBackground":"#66AFE0","minimapSlider.activeBackground":"#64646465","minimapSlider.background":"#64646425","minimapSlider.hoverBackground":"#64646445","notebook.focusedCellIndicator":"#66AFE0","notebook.outputContainerBackgroundColor":"#e4e6f1","notificationCenter.border":"#3D3D42","notificationCenterHeader.background":"#E7E7E7","notificationCenterHeader.foreground":"#D7D7DB","notificationLink.foreground":"#006AB1","notifications.background":"#F3F3F3","notifications.border":"#E7E7E7","notifications.foreground":"#616161","notificationsErrorIcon.foreground":"#E51400","notificationsInfoIcon.foreground":"#75BEFF","notificationsWarningIcon.foreground":"#E9A700","notificationToast.border":"#3D3D42","panel.background":"#FFFFFF","panel.border":"#808080","panel.dropBackground":"#2677CB","panelInput.border":"#DDDDDD","panelTitle.activeBorder":"#424242","panelTitle.activeForeground":"#424242","panelTitle.inactiveForeground":"#424242","peekView.border":"#007ACC","peekViewEditor.background":"#F2F8FC","peekViewEditor.matchHighlightBackground":"#F5D80281","peekViewEditor.matchHighlightBorder":"#3D3D4200","peekViewEditorGutter.background":"#F2F8FC","peekViewResult.background":"#F3F3F3","peekViewResult.fileForeground":"#1E1E1E","peekViewResult.lineForeground":"#007ACC","peekViewResult.matchHighlightBackground":"#EA5C0062","peekViewResult.selectionBackground":"#007ACC33","peekViewResult.selectionForeground":"#6C6C6C","peekViewTitle.background":"#FFFFFF","peekViewTitleDescription.foreground":"#616161","peekViewTitleLabel.foreground":"#333333","pickerGroup.border":"#CCCEDB","pickerGroup.foreground":"#0066BF","problemsErrorIcon.foreground":"#E51400","problemsInfoIcon.foreground":"#75BEFF","problemsWarningIcon.foreground":"#E9A700","progressBar.background":"#0E70C0","quickInput.background":"#F3F3F3","quickInput.foreground":"#616161","quickInputTitle.background":"#000000","scrollbar.shadow":"#DDDDDD","scrollbarSlider.activeBackground":"#4C4C4C80","scrollbarSlider.background":"#B4B4B480","scrollbarSlider.hoverBackground":"#66666680","searchEditor.findMatchBackground":"#EA5C00","searchEditor.findMatchBorder":"#3D3D42","searchEditor.textInputBorder":"#CECECE","selection.background":"#B4D8FE","settings.checkboxBackground":"#FFFFFF","settings.checkboxBorder":"#CECECE","settings.checkboxForeground":"#D7D7DB","settings.dropdownBackground":"#FFFFFF","settings.dropdownBorder":"#CECECE","settings.dropdownForeground":"#D7D7DB","settings.dropdownListBorder":"#C8C8C8","settings.headerForeground":"#444444","settings.modifiedItemIndicator":"#66AFE0","settings.numberInputBackground":"#FFFFFF","settings.numberInputBorder":"#CECECE","settings.numberInputForeground":"#616161","settings.textInputBackground":"#FFFFFF","settings.textInputBorder":"#CECECE","settings.textInputForeground":"#616161","sideBar.background":"#F3F3F3","sideBar.border":"#3D3D42","sideBar.dropBackground":"#E8E8E8","sideBar.markerBackground":"#3ABB92","sideBar.foreground":"#616161","sideBarSectionHeader.background":"#DCDCDC","sideBarSectionHeader.border":"#D7D7D7","sideBarSectionHeader.foreground":"#616161","sideBarTitle.foreground":"#6F6F6F","statusBar.background":"#007ACC","statusBar.border":"#007ACC","statusBar.debuggingBackground":"#CC6633","statusBar.debuggingForeground":"#FFFFFF","statusBar.foreground":"#FFFFFF","statusBar.noFolderBackground":"#68217A","statusBar.noFolderBorder":"#3D3D42","statusBar.noFolderForeground":"#FFFFFF","statusBarItem.activeBackground":"#FFFFFF","statusBarItem.hoverBackground":"#FFFFFF","statusBarItem.prominentBackground":"#0088E3","statusBarItem.prominentForeground":"#FFFFFF","statusBarItem.prominentHoverBackground":"#0088E3","statusBarItem.remoteBackground":"#16825D","statusBarItem.remoteForeground":"#FFFFFF","symbolIcon.arrayForeground":"#616161","symbolIcon.booleanForeground":"#616161","symbolIcon.classForeground":"#D67E00","symbolIcon.colorForeground":"#616161","symbolIcon.constantForeground":"#616161","symbolIcon.constructorForeground":"#652D90","symbolIcon.enumeratorForeground":"#D67E00","symbolIcon.enumeratorMemberForeground":"#007ACC","symbolIcon.eventForeground":"#D67E00","symbolIcon.fieldForeground":"#007ACC","symbolIcon.fileForeground":"#616161","symbolIcon.folderForeground":"#616161","symbolIcon.functionForeground":"#652D90","symbolIcon.interfaceForeground":"#007ACC","symbolIcon.keyForeground":"#616161","symbolIcon.keywordForeground":"#616161","symbolIcon.methodForeground":"#652D90","symbolIcon.moduleForeground":"#616161","symbolIcon.namespaceForeground":"#616161","symbolIcon.nullForeground":"#616161","symbolIcon.numberForeground":"#616161","symbolIcon.objectForeground":"#616161","symbolIcon.operatorForeground":"#616161","symbolIcon.packageForeground":"#616161","symbolIcon.propertyForeground":"#616161","symbolIcon.referenceForeground":"#616161","symbolIcon.snippetForeground":"#616161","symbolIcon.stringForeground":"#616161","symbolIcon.structForeground":"#616161","symbolIcon.textForeground":"#616161","symbolIcon.typeParameterForeground":"#616161","symbolIcon.unitForeground":"#616161","symbolIcon.variableForeground":"#007ACC","tab.activeBackground":"#FFFFFF","tab.activeBorder":"#FFFFFF","tab.activeBorderTop":"#007ACC","tab.activeForeground":"#333333","tab.activeModifiedBorder":"#33AAEE","tab.border":"#F3F3F3","tab.hoverBackground":"#ECECEC","tab.hoverBorder":"#ECECEC","tab.inactiveBackground":"#ECECEC","tab.inactiveForeground":"#6A6A6A","tab.inactiveModifiedBorder":"#33AAEE","tab.unfocusedActiveBackground":"#FFFFFF","tab.unfocusedActiveBorder":"#000000","tab.unfocusedActiveBorderTop":"#007ACC","tab.unfocusedActiveForeground":"#333333","tab.unfocusedActiveModifiedBorder":"#33AAEE","tab.unfocusedHoverBackground":"#404040","tab.unfocusedHoverBorder":"#000000","tab.unfocusedInactiveForeground":"#333333","tab.unfocusedInactiveModifiedBorder":"#33AAEE","terminal.ansiBlack":"#000000","terminal.ansiBlue":"#0451A5","terminal.ansiBrightBlack":"#666666","terminal.ansiBrightBlue":"#0451A5","terminal.ansiBrightCyan":"#0598BC","terminal.ansiBrightGreen":"#14CE14","terminal.ansiBrightMagenta":"#BC05BC","terminal.ansiBrightRed":"#CD3131","terminal.ansiBrightWhite":"#A5A5A5","terminal.ansiBrightYellow":"#B5BA00","terminal.ansiCyan":"#0598BC","terminal.ansiGreen":"#00BC00","terminal.ansiMagenta":"#BC05BC","terminal.ansiRed":"#CD3131","terminal.ansiWhite":"#555555","terminal.ansiYellow":"#949800","terminal.background":"#050505","terminal.border":"#808080","terminal.foreground":"#333333","terminal.selectionBackground":"#000000","terminalCursor.background":"#2C2C30","terminalCursor.foreground":"#D7D7DB","textBlockQuote.background":"#F0F0F0","textBlockQuote.border":"#007ACC","textCodeBlock.background":"#F1F1F1","textLink.activeForeground":"#0089E5","textLink.foreground":"#0089E5","textPreformat.foreground":"#B96818","textSeparator.foreground":"#AFAFAF","titleBar.activeBackground":"#FFFFFF","titleBar.activeForeground":"#616161","titleBar.border":"#007ACC","titleBar.inactiveBackground":"#DDDDDD","titleBar.inactiveForeground":"#737373","tree.indentGuidesStroke":"#A9A9A9","walkThrough.embeddedEditorBackground":"#2C2C30","welcomePage.background":"#333338","welcomePage.buttonBackground":"#2C2C30","welcomePage.buttonHoverBackground":"#494950","widget.shadow":"#00000033","window.activeBorder":"#85858F","window.inactiveBorder":"#85858F","dropdown.foreground":"#616161","activityBar.dropBorder":"#3D3D42","editorGroupHeader.border":"#3D3D42","statusBar.debuggingBorder":"#3D3D3D","editorOverviewRuler.background":"#FFFFFF"},tokenColors:[{scope:"identifier",settings:{foreground:"#795E26"}},{scope:"header",settings:{foreground:"#000080"}},{name:"Generic comment + line/block defaults",scope:"comment, comment.line, comment.block",settings:{foreground:"#009688"}},{name:"Single line comment (//, --, #)",scope:"comment.line.double-slash, comment.line.double-dash, comment.line.number-sign",settings:{foreground:"#009688"}},{name:"Single line comment with char",scope:"comment.line.character",settings:{foreground:"#009688"}},{name:"Multi line comment (doc type)",scope:"comment.block.documentation",settings:{foreground:"#009688"}},{name:"Generic constant + others default",scope:"constant, constant.other",settings:{foreground:"#e59337"}},{name:"Numeric constant",scope:"constant.numeric",settings:{foreground:"#e59337"}},{name:"Character constant",scope:"constant.character",settings:{foreground:"#e59337"}},{name:"Escape sequence",scope:"constant.character.escape",settings:{foreground:"#ff6f30"}},{name:"Language constant",scope:"constant.language",settings:{fontStyle:"bold",foreground:"#c5914c"}},{name:"Generic entity + others default",scope:"entity, entity.other",settings:{foreground:"#cc666a"}},{name:"Generic entity name",scope:"entity.name",settings:{foreground:"#cc4e52"}},{name:"Function name",scope:"entity.name.function",settings:{foreground:"#c2c299"}},{name:"Type name",scope:"entity.name.type",settings:{foreground:"#ebd8b7"}},{name:"Tag name",scope:"entity.name.tag",settings:{foreground:"#cc833b"}},{name:"Section name",scope:"entity.name.section",settings:{foreground:"#c2c269"}},{name:"Inherited class",scope:"entity.other.inherited-class",settings:{fontStyle:"italic underline",foreground:"#cf85be"}},{name:"Attribute name",scope:"entity.other.attribute-name",settings:{foreground:"#eb9195"}},{name:"Illegal",scope:"invalid.illegal",settings:{background:"#e03e44",foreground:"#e5e500"}},{name:"Deprecated",scope:"invalid.deprecated",settings:{background:"#e0a9ab"}},{name:"Generic keyword",scope:"keyword",settings:{fontStyle:"bold",foreground:"#3f51b5"}},{name:"Control keyword",scope:"keyword.control",settings:{fontStyle:"bold",foreground:"#a9b5ad"}},{name:"Operator keyword + operators",scope:"keyword.operator",settings:{fontStyle:"bold",foreground:"#aaa9b5"}},{name:"Other keywords",scope:"keyword.other",settings:{fontStyle:"bold",foreground:"#8f9a9c"}},{name:"Generic markup",scope:"markup",settings:{}},{name:"Generic meta",scope:"meta",settings:{}},{name:"Generic storage",scope:"storage",settings:{fontStyle:"bold",foreground:"#689c9c"}},{name:"Type",scope:"storage.type",settings:{fontStyle:"bold",foreground:"#78a6a6"}},{name:"Storage modifier",scope:"storage.modifier",settings:{fontStyle:"bold",foreground:"#78a6a6"}},{name:"Generic string",scope:"string",settings:{foreground:"#e5bd46"}},{name:"Generic quoted string",scope:"string.quoted",settings:{foreground:"#e5bd46"}},{name:"Singly quoted string",scope:"string.quoted.single",settings:{foreground:"#e5bd46"}},{name:"Doubly quoted string",scope:"string.quoted.double",settings:{foreground:"#e5bd46"}},{name:"Triply quoted string",scope:"string.quoted.triple",settings:{foreground:"#e5bd46"}},{name:"Other quoted string",scope:"string.quoted.other",settings:{foreground:"#e5bd46"}},{name:"Unquoted string",scope:"string.unquoted",settings:{foreground:"#e5bd46"}},{name:"Interpolated string",scope:"string.interpolated",settings:{foreground:"#e0d5b3"}},{name:"Regular expression string",scope:"string.regexp",settings:{foreground:"#FF6f30"}},{name:"Other string",scope:"string.other",settings:{foreground:"#eccd73"}},{name:"Generic support",scope:"support",settings:{foreground:"#9b90c3"}},{name:"Function support",scope:"support.function",settings:{foreground:"#78a6a6"}},{name:"Class support",scope:"support.class",settings:{foreground:"#9b90c3"}},{name:"Type support",scope:"support.type",settings:{foreground:"#b9b1d5"}},{name:"Constant support",scope:"support.constant",settings:{foreground:"#9b90c3"}},{name:"Variable support",scope:"support.variable",settings:{foreground:"#9b90c3"}},{name:"Other support",scope:"support.other",settings:{foreground:"#9b90c3"}},{name:"Generic variable",scope:"variable",settings:{foreground:"#63bf8d"}},{name:"Parameter variable",scope:"variable.parameter",settings:{foreground:"#63bf8d"}},{name:"Language variable",scope:"variable.language",settings:{foreground:"#45aa73"}},{name:"Other variable",scope:"variable.other",settings:{foreground:"#5aaa7f"}},{name:"Predicate entity",scope:"entity.other.predicate",settings:{foreground:"#a6a6a6"}},{name:"Any other block",scope:"entity.other.block",settings:{foreground:"#7d7d7d"}},{name:"Token support",scope:"support.other.token",settings:{foreground:"#d7d7c7"}},{name:"JSON String",scope:"meta.structure.dictionary.json string.quoted.double.json",settings:{foreground:"#CFCFC2"}},{name:"diff.header",scope:"meta.diff, meta.diff.header",settings:{foreground:"#75715E"}},{name:"diff.deleted",scope:"markup.deleted",settings:{foreground:"#F92672"}},{name:"diff.inserted",scope:"markup.inserted",settings:{foreground:"#A6E22E"}},{name:"diff.changed",scope:"markup.changed",settings:{foreground:"#E6DB74"}},{scope:"markup.inserted",settings:{foreground:"#b5cea8"}},{scope:"markup.deleted",settings:{foreground:"#ce9178"}},{scope:"markup.changed",settings:{foreground:"#569cd6"}},{scope:"markup.punctuation.quote",settings:{foreground:"#608b4e"}},{scope:"markup.other",settings:{foreground:"#d4d4d4"}},{scope:"constant.rgb-value",settings:{foreground:"#d4d4d4"}},{scope:"entity.name.selector",settings:{foreground:"#d7ba7d"}},{scope:"entity.other.attribute-name.css",settings:{foreground:"#d7ba7d"}},{scope:"markup.underline",settings:{fontStyle:"underline"}},{scope:"markup.bold",settings:{fontStyle:"bold",foreground:"#569cd6"}},{scope:"markup.heading",settings:{fontStyle:"bold",foreground:"#569cd6"}},{scope:"markup.italic",settings:{fontStyle:"italic",foreground:"#569cd6"}},{scope:"",settings:{foreground:"#000000"}},{scope:"invalid",settings:{foreground:"#cd3131"}},{scope:"emphasis",settings:{fontStyle:"italic"}},{scope:"strong",settings:{fontStyle:"bold"}},{scope:"variable.predefined",settings:{foreground:"#4864AA"}},{scope:"constant",settings:{foreground:"#dd0000"}},{scope:"number.hex",settings:{foreground:"#3030c0"}},{scope:"regexp",settings:{foreground:"#800000"}},{scope:"annotation",settings:{foreground:"#808080"}},{scope:"type",settings:{foreground:"#008080"}},{scope:"delimiter.html",settings:{foreground:"#383838"}},{scope:"delimiter.xml",settings:{foreground:"#0000FF"}},{scope:"delimiter.colon",settings:{foreground:"#679e76"}},{scope:"tag",settings:{foreground:"#800000"}},{scope:"tag.id.pug",settings:{foreground:"#4F76AC"}},{scope:"tag.class.pug",settings:{foreground:"#4F76AC"}},{scope:"meta.scss",settings:{foreground:"#800000"}},{scope:"metatag.content.html",settings:{foreground:"#FF0000"}},{scope:"metatag.html",settings:{foreground:"#808080"}},{scope:"metatag.xml",settings:{foreground:"#808080"}},{scope:"metatag.php",settings:{fontStyle:"bold"}},{scope:"key",settings:{foreground:"#863B00"}},{scope:"string.key.json",settings:{foreground:"#A31515"}},{scope:"string.value.json",settings:{foreground:"#0451A5"}},{scope:"attribute.name",settings:{foreground:"#FF0000"}},{scope:"attribute.value",settings:{foreground:"#0451A5"}},{scope:"attribute.value.number",settings:{foreground:"#098658"}},{scope:"attribute.value.unit",settings:{foreground:"#098658"}},{scope:"attribute.value.html",settings:{foreground:"#0000FF"}},{scope:"attribute.value.xml",settings:{foreground:"#0000FF"}},{scope:"string.html",settings:{foreground:"#0000FF"}},{scope:"string.yaml",settings:{foreground:"#0451A5"}},{scope:"keyword.json",settings:{foreground:"#0451A5"}},{scope:"keyword.flow",settings:{foreground:"#AF00DB"}},{scope:"keyword.flow.scss",settings:{foreground:"#0000FF"}},{scope:"operator.scss",settings:{foreground:"#666666"}},{scope:"operator.sql",settings:{foreground:"#778899"}},{scope:"operator.swift",settings:{foreground:"#666666"}},{scope:"command",settings:{foreground:"#db8f00",fontStyle:""}}]},ai={key:"<root>",id:"",title:"<root>",description:"<root>",values:[],children:[]},li=e=>{const t=e.split("."),n=t.pop();if(!n)throw new Error(`The setting category path "${e}" is invalid.`);let i=ai;for(;;){const n=t.shift();if(!n)break;if(!i.children)throw new Error(`The setting category path "${e}" is invalid.`);const o=i.children.find((e=>e.key===n));if(!o)throw new Error(`The setting category path "${e}" is invalid.`);i=o}return[n,i]},di=(e,t,n)=>{const[i,o]=li(e);if(o.children&&o.children.find((e=>e.key===i)))throw new Error(`Attempt to register an existing setting category (${e}).`);o.children||(o.children=[]),o.children.push({title:t,key:i,id:e,description:n,values:[]})},ci=(e,t,n,i,o,s,r={})=>{const[a,l]=li(e);if(l.values.find((e=>e.key===a)))throw new Error(`Attempt to register an existing setting value (${e}).`);l.values.push({key:a,title:t,id:e,description:n,valueType:i,defaultValue:o,advanced:s,parameters:r})},ui=class _Settings{constructor(){}static saveSettings(e=!1){if(!this.dirty&&!e)return;this.dirty=!1;Qn.profile.options=this.values,Qn.saveProfile(),this.restartAutoSaveTimeout()}static get(e,t){const{target:n,subKey:i}=this.objectForKey(e,!1);return n&&i?n[i]??t:t}static set(e,t){this.dirty=!0;const{target:n,subKey:i}=this.objectForKey(e,!0);n&&i&&(n[i]=t),nn.execute("settingsChanged",{key:e,value:t}),nn.executeRemote("settingsChanged",{key:e,value:t})}static objectForKey(e,t){let n=this.values;const i=e.split(".");for(this.validatePath(e);i.length>1;){if(n[i[0]])n=n[i[0]];else{if(!t)return{target:void 0};n[i[0]]={},n=n[i[0]]}i.splice(0,1)}return{target:n,subKey:i[0]}}static validatePath(e){const[t,n]=li(e);if(!n.values.find((e=>e.key===t)))throw new Error(`The settings path ${e} addresses an unregistered setting.`)}static restartAutoSaveTimeout(){this.saveTimer&&(clearInterval(this.saveTimer),this.saveTimer=null),this.saveTimer=setTimeout((()=>this.saveSettings()),3e3)}};pe(ui,"dirty",!1),pe(ui,"values",{theming:{themes:[],currentTheme:"Auto"}}),pe(ui,"saveTimer"),pe(ui,"mergeProfileValues",(()=>(ui.values=Object.assign(ui.values,Qn.profile.options),ui.restartAutoSaveTimeout(),nn.execute("settingsChanged",void 0)))),pe(ui,"applicationWillFinish",(()=>(ui.saveTimer&&clearTimeout(ui.saveTimer),nn.unregister(void 0,ui.mergeProfileValues),nn.unregister(void 0,ui.applicationWillFinish),ui.saveSettings(),Promise.resolve(!0)))),di("workers","Background Workers","Settings related to background workers"),ci("workers.minWorkerCount","Minimum Background Worker Count","The number of workers that are always available.","number",3,!0),ci("workers.maxWorkerCount","Maximum Background Worker Count","The maximum number of workers that are active at the same time.","number",3,!0),ci("workers.maxPendingTaskCount","Maximum Number of Waiting Tasks","Describes the highest number of waiting tasks for a free background worker. If this number is exceeded an error is thrown, indicating that the worker pool is overloaded and can no longer cope with incoming work.","number",100,!0),ci("workers.removeIdleTime","Delay to Remove Inactive Workers","Specifies the number of seconds that pass until the oldest inactive worker is removed. Has no effect if the current number of active workers fall below the minimal worker count.","number",5,!0),di("theming","Theme Settings","Values used to theme the application. There is a dedicated editor to change these values."),ci("theming.currentTheme","Current Theme","Select the active theme for the current profile.","choice","auto",!1),ci("theming.themes","Registered Themes","Themes can be edited in the Theme Editor.","action","Click to Open the Theme Editor",!1,{action:"showThemeEditor"}),ci("theming.colorPadColors","Color Pad Colors","","list",[],!1),di("editor","Code Editor","Settings related to all code editors."),di("editor.theming","Theming","Settings related to theming."),ci("editor.theming.decorationSet","Decoration Set for Code Editor Gutters","Select one of the sets for code-block decoration that results in mixed language code editors.","choice","standard",!1,{choices:[["Standard Set","standard","Includes only a solid marker for editor rows"],["Alternative Set","alternative","Uses a hatch pattern with different colors to separate editor content and result areas"]]}),ci("editor.wordWrap","Word Wrapping","Determines how long lines should be wrapped automatically by the editor.","choice","off",!1,{choices:[["Off","off","Lines never wrap"],["On","on","Lines wrap at the viewport width"],["Word Wrap Column","wordWrapColumn",'Lines wrap at "Code Editor: Word Wrap Column"'],["Bounded","bounded",'Lines wrap at the minimum of viewport width or "Code Editor: Word Wrap Column"']]}),ci("editor.wordWrapColumn","Word Wrap Column","Controls the column of the editor to wrap long lines when Code Editor: Word Wrap is `wordWrapColumn` or `bounded`.","number",120,!1),ci("editor.showHidden","Invisible Characters","When set to true, normally invisible characters (like space or tabulator) are displayed too.","boolean",!1,!1),ci("editor.dbVersion","MySQL DB Version","The default version to be used for MySQL language support, if no version is available.","string","8.0.25",!1),ci("editor.sqlMode","MySQL SQL Mode","The default SQL mode to be used for MySQL language support, if mode information is not available.","string","",!1),ci("editor.stopOnErrors","Stop on Errors","If this option is set, execution of scripts will be stopped if an error occurs. Otherwise, the script execution continues with the next statement.","boolean",!1,!1),ci("editor.showMinimap","Show the Minimap","Determines if code editors should show a minimap, instead of the plain scrollbar, for better navigation.","boolean",!0,!1),di("dbEditor","DB Editor","Settings related to a DB editor"),ci("dbEditor.startLanguage","Start Language","Select the initial language for new DB editors.","choice","sql",!1,{choices:[["JavaScript","javascript","Supported in all code editors"],["TypeScript","typescript","Supported only in DB editors"],["Python","python","Supported only in shell session editors"],["SQL","sql","Supported in all code editors"]]}),ci("dbEditor.defaultEditor","Default Editor","Select the type of the first editor when opening a DB connection.","choice","notebook",!1,{choices:[["DB Notebook","notebook","A multi-language editor with embedded results"],["MySQL Script","script","A single-language script editor (MySQL)"]]}),ci("dbEditor.useMinimap","Use the minimap if globally enabled","Determines if notebooks in the DB editor show a minimap. Only has an effect when mini maps are globally enabled","boolean",!1,!1),ci("dbEditor.upperCaseKeywords","Use UPPER case keywords in code completion","When set, keywords shown in code-completion popups appear in all uppercase letters and are inserted as such in the SQL code editors.","boolean",!0,!1),di("dbEditor.connectionBrowser","Connection Browser","Settings related to the connection overview page in the DB Editor Module"),ci("dbEditor.connectionBrowser.showGreeting","Show Greeting","If set, a message section is shown with some useful links.","boolean",!0,!1),di("sql","SQL Execution","Settings related to how SQL queries are handled"),ci("sql.limitRowCount","Result Set Page Size","Determines the size of one page in a result set, but has no effect if a top-level LIMIT clause is specified in the query. Set to 0 to disable auto adding a LIMIT clause and return all records as a single page. However, be cautious with large row counts (> 50000).","number",1e3,!1,{range:[0,1e4]}),ci("sql.rowPacketSize","Row Packet Size","Determines the number of result records that are sent in a single response from the backend.","number",1e3,!0),di("shellSession","Shell Session","Settings related to a shell session"),di("shellSession.sessionBrowser","Shell Session Browser","Settings related to the shell session overview page in the Shell Session Module"),ci("shellSession.sessionBrowser.showGreeting","Show Greeting","If set, a message section is shown with some useful links.","boolean",!0,!1),ci("shellSession.startLanguage","Start Language","Select the initial language for a new shell session.","choice","javascript",!1,{choices:[["JavaScript","javascript","Supported in all code editors"],["Python","python","Supported only in shell session editors"],["SQL","sql","Supported in all code editors"]]}),setTimeout((()=>{nn.register("profileLoaded",ui.mergeProfileValues),nn.register("applicationWillFinish",ui.applicationWillFinish)}),0);let hi=ui;const pi=class _ThemeManager{constructor(){pe(this,"themeDefinitions",new Map),pe(this,"themeStyleElement"),pe(this,"currentTheme",""),pe(this,"safeThemeName",""),pe(this,"updating",!1),pe(this,"settingsChanged",(e=>!e||""===e.key||e.key.startsWith("theming.")?(this.updating||(hi.get("theming.themes",[]).forEach((e=>{this.loadThemeDetails(e)})),this.activeTheme=hi.get("theming.currentTheme","Auto")),Promise.resolve(!0)):Promise.resolve(!1))),pe(this,"hostThemeChange",(e=>{switch(e.themeClass){case"vscode-dark":document.body.setAttribute("theme","dark"),this.loadTheme("Default Dark"),this.storeThemeName("Default Dark"),this.sendChangeNotification(this.currentTheme);break;case"vscode-light":document.body.setAttribute("theme","light"),this.loadTheme("Default Light"),this.storeThemeName("Default Light"),this.sendChangeNotification(this.currentTheme);break;default:this.storeThemeName("Auto")}return Promise.resolve(!0)})),pe(this,"handleOSThemeChange",(e=>{if("Auto"===this.currentTheme){let t="";t=e.matches?"Default Light":"Default Dark",this.loadTheme(t),this.sendChangeNotification(t),this.storeThemeName("Auto")}})),pe(this,"iterateColorDescription",((e,t)=>{if(Array.isArray(e))e.forEach((e=>{this.iterateColorDescription(e,t)}));else if("object"==typeof e)for(const[n,i]of Object.entries(e))"string"==typeof i?t(n,i):this.iterateColorDescription(i,t)})),this.loadThemeDetails(si),this.loadThemeDetails(ri),this.themeStyleElement=document.createElement("style"),this.themeStyleElement.id="theme-colors",document.head.prepend(this.themeStyleElement),tn.embedded||(this.updating=!0,this.activeTheme="Auto",this.updating=!1),tn.embedded||window.matchMedia("(prefers-color-scheme: light)").addEventListener("change",this.handleOSThemeChange),nn.register("settingsChanged",this.settingsChanged),nn.register("hostThemeChange",this.hostThemeChange)}static get get(){return _ThemeManager.instance||(_ThemeManager.instance=new _ThemeManager),_ThemeManager.instance}get activeThemeValues(){var e;return null==(e=this.themeDefinitions.get(this.currentTheme))?void 0:e.json}get activeThemeType(){const e=this.themeDefinitions.get(this.currentTheme);if(e)return e.type}get installedThemes(){return Array.from(this.themeDefinitions.keys())}get themeStyleNode(){var e;return(null==(e=this.themeStyleElement)?void 0:e.sheet).cssRules[0].style}get currentThemeAsText(){var e;return JSON.stringify(null==(e=this.themeDefinitions.get(this.currentTheme))?void 0:e.json,void 0,4)}get activeThemeSafe(){return this.safeThemeName}get activeTheme(){return this.currentTheme}set activeTheme(e){if(this.currentTheme!==e){let t=e;"Auto"===e?(t=window.matchMedia("(prefers-color-scheme: light)").matches?"Default Light":"Default Dark",this.loadTheme(t),this.storeThemeName("Auto")):this.loadTheme(e),this.updateSettings(),this.sendChangeNotification(t)}}getTokenForegroundColor(e){const t=this.themeDefinitions.get(this.currentTheme);if(t){const n=t.json.tokenColors||t.json.settings;if(n){const t=[];for(const i of n){(Array.isArray(i.scope)?i.scope:i.scope.split(",")).forEach((n=>{e.startsWith(n.trim())&&i.settings.foreground&&t.push([n,i.settings.foreground])}))}if(t.sort(((e,t)=>t[0].length-e[0].length)),t.length>0)return t[0][1]}}}saveTheme(){const e=this.themeStyleNode,t=this.themeDefinitions.get(this.currentTheme);if(t){const n=t.json.colors||{};this.iterateColorDescription(oi,((t,i)=>{if("name"===t&&!i.startsWith("#")){const t=this.themeValueNameToCssVariable(i),o=new ye(e.getPropertyValue(t).trim());n[i]=o.hexa()}})),this.loadThemeDetails(t.json),t.json.colors=n}this.updateSettings(),this.sendChangeNotification(this.currentTheme)}loadThemeDetails(e,t=!1){let n;n=e.type?"dark"===e.type?"dark":"light":e.name.toLowerCase().includes("dark")?"dark":"light";let i=":root {\n";e.colors||(e.colors="dark"===n?{...si.colors}:{...ri.colors}),Object.keys(e.colors).forEach((t=>{i+="\t"+this.themeValueNameToCssVariable(t)+": "+e.colors[t]+";\n"})),i+="}\n";const o=this.themeDefinitions.get(e.name);if(o)o.css=i;else{if(!e.tokenColors&&e.settings&&(e.tokenColors=e.settings,delete e.settings),e.include||"string"==typeof e.tokenColors)throw new Error("This theme contains references to local files, which cannot be loaded automatically.");t&&this.uiColorSanityCheck(e.colors),e.tokenColors||(e.tokenColors=[]),t&&this.tokenColorSanityCheck(e.tokenColors),this.themeDefinitions.set(e.name,{type:n,css:i,json:e})}return e.name}themeValueNameToCssVariable(e){return"--"+e.replace(/\./g,"-")}duplicateCurrentTheme(e){const t=this.themeDefinitions.get(this.currentTheme);return t&&(t.json.name=e,this.themeDefinitions.set(e,{...t})),this.updateSettings(),!1}removeCurrentTheme(){this.themeDefinitions.delete(this.currentTheme),this.themeDefinitions.size>0&&(this.updating=!0,this.activeTheme=this.themeDefinitions.keys().next().value,this.updating=!1),this.updateSettings()}sendChangeNotification(e){const t=this.themeDefinitions.get(e);if(t){const e={name:this.currentTheme,safeName:this.safeThemeName,type:t.type,values:t.json};setTimeout((()=>{nn.execute("themeChanged",e)}),0)}}loadTheme(e){const t=this.themeDefinitions.get(e);t&&(document.body.setAttribute("theme",t.type),this.themeStyleElement&&(this.themeStyleElement.innerHTML=t.css),this.storeThemeName(e))}storeThemeName(e){this.currentTheme=e,this.safeThemeName=e.replace(/[^a-zA-Z]+/g,"-")}uiColorSanityCheck(e){this.iterateColorDescription(oi,((t,n)=>{"name"!==t||n.startsWith("#")||e[n]||(e[n]="")}));for(const[t,n]of Object.entries(e))e[t]=this.checkColor(n);this.setDefaultValue(e,"background","button.background"),this.setDefaultValue(e,"list.gridColor","list.hoverForeground"),this.setDefaultValue(e,"list.columnResizerForeground","list.hoverForeground"),this.matchAndAssignDefault(/.*background$/i,e,e.background),this.matchAndAssignDefault(/.*foreground$/i,e,e.foreground),this.matchAndAssignDefault(/.*border$/i,e,e["button.border"]);for(const[t,n]of Object.entries(e))0===n.length&&(e[t]="orangered");e["list.gridColor"]||(e["list.gridColor"]=e["tree.indentGuidesStroke"])}tokenColorSanityCheck(e){e.forEach((e=>{e.settings.foreground&&(e.settings.foreground=this.checkColor(e.settings.foreground)),e.settings.background&&(e.settings.background=this.checkColor(e.settings.background))}))}checkColor(e){let t=e.trim();if(t.length>0)try{new ye(t)}catch(n){t="orangered"}return t}matchAndAssignDefault(e,t,n){if(n&&0!==n.length||(n="",this.iterateColorDescription(oi,((i,o)=>{"name"===i&&0===n.length&&i.match(e)&&t[o].length>0&&(n=t[o])}))),n.length>0)for(const[i,o]of Object.entries(t))i.match(e)&&0===o.length&&(t[i]=n)}setDefaultValue(e,t,n){e[t]||(e[t]=e[n])}updateSettings(){if(this.updating)return;this.updating=!0;const e=[];this.themeDefinitions.forEach(((t,n)=>{"Default Dark"!==n&&"Default Light"!==n&&e.push(t.json)})),hi.set("theming.themes",e),hi.set("theming.currentTheme",this.currentTheme),hi.saveSettings(),this.updating=!1}};pe(pi,"instance");let mi=pi;mi.get;const gi='/*\n * Copyright (c) 2020, Oracle and/or its affiliates.\n *\n * This program is free software; you can redistribute it and/or modify\n * it under the terms of the GNU General Public License, version 2.0,\n * as published by the Free Software Foundation.\n *\n * This program is also distributed with certain software (including\n * but not limited to OpenSSL) that is licensed under separate terms, as\n * designated in a particular file or component or in included license\n * documentation.  The authors of MySQL hereby grant you an additional\n * permission to link the program and your derivative works with the\n * separately licensed software that they have included with MySQL.\n * This program is distributed in the hope that it will be useful,  but\n * WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See\n * the GNU General Public License, version 2.0, for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software Foundation, Inc.,\n * 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA\n */\n\n<< javascript >>\nconst initialDiameter = 1000;\n\nvar diameter = initialDiameter;\nvar initialScale = 0.5;\n\nfunction render() {\n\tvar radius = diameter / 2;\n\tvar innerRadius = radius * 0.90;\n\n\tvar svg = d3.select("svg")\n\t    .attr("xmlns", "http://www.w3.org/2000/svg")\n\t    .attr("version", "1.1")\n\t    .attr("viewBox", "0 0 " + diameter + " " + diameter);\n\n\tvar topGroup = svg.append("g");\n\n\tvar zoom = d3.zoom()\n\t    .scaleExtent([0.1 * initialScale, 10 * initialScale])\n\t    .on("zoom", zoomed);\n\n\tfunction zoomed() {\n\t    topGroup.attr("transform", d3.event.transform);\n\t}\n\n\tsvg\n\t    .call(zoom)\n\t    .call(zoom.transform, d3.zoomIdentity\n\t        .scale(initialScale, initialScale)\n\t        .translate(radius, radius)\n\t    )\n\t    .on("dblclick.zoom", null);\n\n\tvar cluster = d3.cluster()\n        .size([360, innerRadius]);\n\n\tconst line = d3.radialLine()\n\t    .radius(function (d) {\n\t        return d.y;\n\t    })\n\t    .angle(function (d) {\n\t        return d.x / 180 * Math.PI;\n\t    })\n\t    .curve(d3.curveBundle.beta(0.75));\n\n\tvar link = topGroup.append("g").selectAll(".link");\n\tvar node = topGroup.append("g").selectAll(".node");\n\n\tvar root = d3.hierarchy(packageHierarchy(data), (d) => d.children);\n\tvar nodes = root.descendants();\n\n\tvar links = packageReferences(nodes);\n\n\tcluster(root);\n\n\tlink = link\n\t    .data(links)\n\t    .enter().append(\'path\')\n\t    .attr(\'class\', \'link\')\n\t    .attr(\'d\', d => line(d.source.path(d.target)));\n\n\tnode = node\n\t    .data(nodes.filter(function (n) {\n\t        return !n.children;\n\t    }))\n\t    .enter().append("text")\n\t    .attr("class", function (d) {\n\t        return "node " + d.data.class;\n\t    })\n\t    .attr("dy", "0.31em")\n\t    .attr("transform", function (d) {\n\t        return "rotate(" + (d.x - 90) + ")translate(" + (d.y + 10) + ",0)" + (d.x < 180 ? "" :\n\t            "rotate(180)");\n\t    })\n\t    .style("text-anchor", function (d) {\n\t        return d.x < 180 ? "start" : "end";\n\t    })\n\t    .text(function (d) {\n\t        return d.data.key;\n\t    })\n\t    .on("mouseover", onMouseOver)\n\t    .on("mouseout", onMouseOut);\n\n\tvar fadeTimer = null;\n\n    function onMouseOver(d) {\n\t\tclearTimeout(fadeTimer);\n\n        node\n\t\t\t.each(function (n) {\n        \t\tn.target = n.source = false;\n\t\t\t});\n\n\t\tlink\n\t\t\t.classed("link-target", function (l) {\n        \t\tif (l.target === d) return l.source.source = true;\n\t\t\t})\n\t\t\t.classed("link-source", function (l) {\n        \t\tif (l.source === d) return l.target.target = true;\n\t\t\t})\n    \t\t.classed("link-dimmed", function (l) {\n        \t\treturn (l.source !== d) && (l.target !== d);\n\t\t\t});\n\n\t\tnode\n\t\t\t.classed("node-target", function (n) {\n        \t\treturn n.target;\n\t\t\t})\n    \t\t.classed("node-source", function (n) {\n        \t\treturn n.source;\n\t\t\t});\n\t}\n\n\tfunction onMouseOut(d) {\n\t\tif (fadeTimer) {\n\t\t\tclearTimeout(fadeTimer);\n\t\t}\n\n    \tfadeTimer = setTimeout(() => {\n        \tfadeTimer = null;\n    \t\tlink.classed("link-dimmed", false);\n\t\t}, 200);\n\n    \tlink\n\t\t\t.classed("link-target", false)\n        \t.classed("link-source", false);\n\n    \tnode\n       \t\t.classed("node-target", false)\n        \t.classed("node-source", false);\n    }\n\n\tfunction packageHierarchy(rules) {\n\t    var map = {};\n\t    var modules = [];\n\n\t    function find(name, data) {\n\t        var node = map[name];\n\t        var i;\n\t        if (!node) {\n\t            node = map[name] = data || {\n\t                name: name,\n\t                children: []\n\t            };\n\t            if (name.length > 0) {\n\t                node.parent = find(name.substring(0, i = name.lastIndexOf(".")));\n\t                node.parent.children.push(node);\n\n\t                // Pick one out of 10 color classes for this node.\n\t                var index = modules.indexOf(node.parent.name);\n\t                if (index < 0) {\n\t                    modules.push(node.parent.name);\n\t                    index = modules.length - 1;\n\t                }\n\t                index = index % 10;\n\t                node.class = "module-" + index;\n\t                node.key = name.substring(i + 1);\n\t            }\n\t        }\n\t        return node;\n\t    }\n\n\t    rules.forEach(function (d) {\n\t        find(d.name, d);\n\t    });\n\n\t    return map[""];\n\t}\n\n\tfunction packageReferences(nodes) {\n\t    var map = {};\n\t    var references = [];\n\n\t    // Compute a map from name to node.\n\t    nodes.forEach(function (d) {\n\t        map[d.data.name] = d;\n\t    });\n\n\t    // For each import, construct a link from the source to target node.\n\t    nodes.forEach(function (d) {\n\t        if (d.data.references) {\n\t            d.data.references.forEach(function (i) {\n\t                references.push({\n\t                    source: map[d.data.name],\n\t                    target: map[i]\n\t                });\n\t            });\n\t        }\n\t    });\n\n\t    return references;\n\t}\n}\n\nfunction changeDiameter(factor) {\n\tconst svg = document.querySelectorAll(\'svg\')[0];\n\twhile (svg.firstChild) {\n\t    svg.removeChild(svg.firstChild);\n\t}\n\tdiameter *= factor;\n\tdiameter = diameter < 100 ? 100 : (diameter > 10000 ? 10000 : diameter);\n\tinitialScale = diameter / initialDiameter / 2;\n\n\trender();\n}\n\n<< typescript >>\n/**\n * Checks if a point is within a given rectangle.\n *\n * @param p The point to check for.\n * @param r The rectangle to check against.\n *\n * @returns True if the point is within the the rectangle bounds, false otherwise.\n */\nexport const pointInRect = (p: DOMPoint | undefined, r: DOMRect | undefined): boolean => {\n    if (!p || !r) {\n        return false;\n    }\n\n    return (\n        r.x <= p.x && p.x <= (r.x + r.width)\n        && r.y <= p.y && p.y <= (r.y + r.height)\n    );\n};\n\n/**\n * Checks if two rectangles are equal.\n *\n * @param left The first rectangle to check.\n * @param right The second rectangle to check.\n *\n * @returns True, if both rects have the same dimensions and positions, false otherwise.\n */\nexport const rectsAreEqual = (left: DOMRect, right: DOMRect): boolean =>\n    left.x === right.x && left.y === right.y && left.width === right.width && left.height === right.height;\n\n/**\n * Creates a new rect with change bounds and location, depending on the inflation values.\n *\n * @param r The rectangle to change.\n * @param top The top delta to apply.\n * @param right The right delta to apply.\n * @param bottom The bottom delta to apply.\n * @param left The left delat to apply.\n *\n * @returns Undefined, if the given rect was undefined or the changed rectangle.\n */\nexport const inflateRect = (r: DOMRect | undefined,\n    top: number, right: number, bottom: number, left: number): DOMRect | undefined => {\n    if (!r) {\n        return undefined;\n    }\n\n    return new DOMRect(r.x - left, r.y - top, r.width + right + left, r.height + top + bottom);\n};\n\n<< mysql >>\ndelimiter $$\n\nCREATE PROCEDURE do_insert(value INT)\nBEGIN\n  DECLARE CONTINUE HANDLER FOR SQLEXCEPTION\n    BEGIN\n    END;\n  SELECT result;\nEND$$\nCREATE PROCEDURE do_insert(value INT)\nBEGIN\n  -- declare variables to hold diagnostics area information\n  DECLARE code CHAR(5) DEFAULT \'00000\';\n  DECLARE msg TEXT;\n  DECLARE rowCount INT;\n  DECLARE result TEXT;\n  -- declare exception handler for failed insert\n  DECLARE CONTINUE HANDLER FOR SQLEXCEPTION\n    BEGIN\n      GET DIAGNOSTICS CONDITION 1\n        code = RETURNED_SQLSTATE, msg = MESSAGE_TEXT;\n    END;\n\n  -- perform the insert\n  INSERT INTO t1 (int_col) VALUES(value);\n  -- check whether the insert was successful\n  IF code = \'00000\' THEN\n    GET DIAGNOSTICS rowCount = ROW_COUNT;\n    SET result = CONCAT(\'insert succeeded, row count = \',rowCount);\n  ELSE\n    SET result = CONCAT(\'insert failed, error = \',code,\', message = \',msg);\n  END IF;\n  -- say what happened\n  SELECT result;\nEND$$\n\nSELECT\n\tcurrency_code,\n\tSUM(CASE WHEN TYPE = \'buy\'THEN to_amount END ) AS BUY,\n\tSUM(CASE WHEN TYPE = \'sell\' THEN to_amount END ) AS SELL,\n\tSUM(CASE WHEN TYPE = \'sell\' THEN rate END ) AS SELL_RATE,\n\tSUM(CASE WHEN TYPE = \'buy\' THEN rate END ) AS BUY_RATE,\n\tAVG(CASE WHEN TYPE = \'buy\' THEN rate END ) AS AVG_BUY_RATE,\n\tAVG(CASE WHEN TYPE = \'sell\' THEN rate END ) AS AVG_SELL_RATE\nFROM tb_currency\nLEFT JOIN tb_bill\n\tON tb_currency.CURRENCY_ID = tb_bill.CURRENCY_ID\n\t\tAND tb_bill.TYPE IN (\'buy\', \'sell\')\n\t\tAND date( DATE_TIME ) >= \'2011-01-01\'\n\t\tAND date( DATE_TIME ) <= \'2011-01-11\'\nGROUP BY currency_code$$\n\n<< json >>\n[\n    {\n        "name": "#Base Colors",\n        "description": "Base Colors",\n        "preview": true,\n        "children": [\n            {\n                "name": "focusBorder",\n                "description": "Border color for focused elements",\n                "preview": true\n            },\n            {\n                "name": "foreground",\n                "description": "Standard foreground color",\n                "preview": true\n            },\n            {\n                "name": "hotForeground",\n                "description": "Standard hover foreground color",\n                "preview": true\n            },\n            {\n                "name": "background",\n                "description": "Standard background color",\n                "preview": true\n            },\n            {\n                "name": "descriptionForeground",\n                "description": "Description/help text foreground color",\n                "preview": true\n            },\n            {\n                "name": "errorForeground",\n                "description": "Standard error foreground color",\n                "preview": true\n            },\n            {\n                "name": "widget.shadow",\n                "description": "Drop shadow color",\n                "preview": true\n            },\n            {\n                "name": "selection.background",\n                "description": "Standard selection background color",\n                "preview": true\n            },\n            {\n                "name": "icon.foreground",\n                "description": "Standard icon foreground color",\n                "preview": true\n            }\n        ]\n    },\n    {\n        "name": "#Window Colors",\n        "description": "Window/Dialog Colors",\n        "preview": true,\n        "children": [\n            {\n                "name": "window.activeBorder",\n                "description": "Active border color",\n                "preview": true\n            },\n            {\n                "name": "window.inactiveBorder",\n                "description": "Incactive border color",\n                "preview": true\n            },\n            {\n                "name": "window.background",\n                "description": "Main background color",\n                "preview": true\n            },\n            {\n                "name": "window.headerBackground",\n                "description": "Header color",\n                "preview": true\n            },\n            {\n                "name": "window.footerBackground",\n                "description": "Footer color",\n                "preview": true\n            }\n        ]\n    }\n]\n\n<< markdown >>\n# MySQL Workbench\n\nCopyright (c) 2007, 2020, Oracle and/or its affiliates.\n\nThis is a release of [MySQL Workbench](https://mysqlworkbench.org), a graphical tool for working with MySQL servers and databases.\n\n![Home screen on Windows](https://dev.mysql.com/doc/workbench/en/images/wb-home-screen-new.png)\n\nLicense information can be found in the [License](License.txt) file.\n\nThis distribution may include materials developed by third parties.\nFor license and attribution notices for these materials, please refer to the [License](License.txt) file.\n\nFor more information on MySQL Workbench, visit\n  [http://dev.mysql.com/doc/workbench/en](http://dev.mysql.com/doc/workbench/en)\n\nFor additional downloads and the source of MySQL Workbench, visit\n  [http://dev.mysql.com/downloads](http://dev.mysql.com/downloads)\n\nMySQL Workbench is brought to you by the MySQL team at Oracle.\n\n# Overview\n\n[MySQL Workbench](https://mysqlworkbench.org) is a graphical tool for working with MySQL servers and databases. MySQL Workbench fully supports MySQL server versions 5.6 and higher.\n\nMySQL Workbench functionality covers five main topics:\n\n* **SQL Development:** Enables you to create and manage connections to database servers. Along with enabling you to configure connection parameters, MySQL Workbench provides the capability to execute SQL queries on the database connections using the built-in SQL Editor.\n\n* **Data Modeling (Design):** Enables you to create models of your database schema graphically, reverse and forward engineer between a schema and a live database, and edit all aspects of your database using the comprehensive Table Editor. The Table Editor provides easy-to-use facilities for editing Tables, Columns, Indexes, Triggers, Partitioning, Options, Inserts and Privileges, Routines and Views.\n\n* **Server Administration:** Enables you to administer MySQL server instances by administering users, performing backup and recovery, inspecting audit data, viewing database health, and monitoring the MySQL server performance.\n\n* **Data Migration:** Allows you to migrate from Microsoft SQL Server, Microsoft Access, Sybase ASE, SQLite, SQL Anywhere, PostreSQL, and other RDBMS tables, objects and data to MySQL. Migration also supports migrating from earlier versions of MySQL to the latest releases.\n\n* **MySQL Enterprise Support:** Support for Enterprise products such as MySQL Enterprise Backup, MySQL Firewall, and MySQL Audit.\n\n![Performance dashboard](https://dev.mysql.com/doc/workbench/en/images/wb-performance-dashboard.png)\n\nThe [code repository on Github](https://github.com/mysql/mysql-workbench) is where we publish a snapshot of our internal repository everytime a new release of the product is published. Use the [MySQL bug system](http://bugs.mysql.com/) to report any issue you have. You can use Github or the MySQL bug system to contribute to the development. File a pull request on Github or a new issue on the MySQL Bug system with your patch and we will take care of it.\n\n<< ini >>\n; last modified 1 April 2001 by John Doe\n[owner]\nname=John Doe\norganization=Acme Widgets Inc.\n\n[database]\n; use IP address in case network name resolution is not working\nserver=192.0.2.62\nport=143\nfile="payroll.dat"\n\n[client]\nhost=localhost\nuser=root\nsocket=/dev/shm/var_auto_eclipse/tmp/mysqld.1.sock\npassword=\nport=13030\n\n[mysql]\ndefault-character-set=utf8\n# SERVER SECTION\n# ----------------------------------------------------------------------\n#\n# The following options will be read by the MySQL Server. Make sure that\n# you have installed the server correctly (see above) so it reads this\n# file.\n#\n[mysqld]\n#skip-innodb\n# The TCP/IP Port the MySQL Server will listen on\nport=3306\nmax_allowed_packet=16M\n#Path to installation directory. All paths are usually resolved relative to this.\n#basedir="C:/Program Files/MySQL/MySQL Server 5.1/"\nbasedir="C:/MySQL/"\n#Path to the database root\n#datadir="C:/Documents and Settings/All Users/Application Data/MySQL/MySQL Server 5.1/Data/"\ndatadir="C:/MySQLData/"\n\n<< xml >>\n<?xml version="1.0" encoding="utf-8"?>\n<languages>\n  \x3c!--\n    Settings for scintilla-based code editors in MySQL Workbench.\n\n    For a list of possible style identifiers see the SciLexer.h file.\n    Keyword list identifiers are taken from the various Lex*.cpp files in Scintilla.\n  --\x3e\n\n  <language name="SCLEX_MYSQL">\n    \x3c!-- This is the base language setting. It\'s usually not directly used, but provides values shared by\n         more specialized MySQL versions. --\x3e\n\n    \x3c!-- Lexer properties --\x3e\n    <property name="fold" value="1" />\n    <property name="fold.compact" value="0" />\n    <property name="fold.comment" value="1" />\n\n    \x3c!-- Editor settings --\x3e\n    <setting name="usetabs" value="1" />\n    <setting name="tabwidth" value="4" />\n    <setting name="indentation" value="4" />\n\n    \x3c!-- Keep in mind to use the same list names as defined in the lexers (e.g. LexMySQL.cpp). --\x3e\n    <keywords name="Major Keywords">\n      \x3c!-- Keywords that can start a statement. No longer used. --\x3e\n    </keywords>\n\n    <keywords name="Keywords">\n      \x3c!-- Normal keywords. No longer kept here but come from the keywords_list.h file provided by the server itself. --\x3e\n    </keywords>\n\n    <keywords name="Procedure keywords">\n      begin end comment\n    </keywords>\n\n    <keywords name="User Keywords 1">\n      delimiter\n    </keywords>\n\n    \x3c!-- These two lists are not used for syntax highlighting but assemble keywords from the other lists that serve a special purpose. --\x3e\n    <keywords name="User Keywords 2"> \x3c!-- Keywords that are allowed at the start of an expression. --\x3e\n      binary case cast convert exists interval match not row\n    </keywords>\n\n    <keywords name="User Keywords 3"> \x3c!-- Like user 2 but those that can appear between two expressions. --\x3e\n      all and any as between escape false in is like or regexp sounds true unknown xor\n    </keywords>\n\n    <style id="0" fore-color-light="#284444" fore-color-dark="#808a8c" /> \x3c!-- SCE_MYSQL_DEFAULT --\x3e\n\n    <style id="1" fore-color-light="#0987cb" fore-color-dark="#0a99e5" /> \x3c!-- SCE_MYSQL_COMMENT --\x3e\n    <style id="2" fore-color-light="#0987cb" fore-color-dark="#0a99e5" /> \x3c!-- SCE_MYSQL_COMMENTLINE --\x3e\n    <style id="21" back-color-light="#F0F0F0" back-color-dark="#404040" /> \x3c!-- SCE_MYSQL_HIDDENCOMMAND --\x3e\n\n    <style id="3" fore-color-light="#63bf8d" fore-color-dark="#63bf8d" /> \x3c!-- SCE_MYSQL_VARIABLE --\x3e\n    <style id="4" fore-color-light="#45aa73" fore-color-dark="#45aa73" /> \x3c!-- SCE_MYSQL_SYSTEMVARIABLE --\x3e\n    <style id="5" fore-color-light="#45aa73" fore-color-dark="#45aa73" /> \x3c!-- SCE_MYSQL_KNOWNSYSTEMVARIABLE --\x3e\n\n    <style id="6" fore-color-light="#cc6c00" fore-color-dark="#e57a00" /> \x3c!-- SCE_MYSQL_NUMBER --\x3e\n    <style id="12" fore-color-light="#dd7a00" fore-color-dark="#f28600" /> \x3c!-- SCE_MYSQL_SQSTRING --\x3e\n    <style id="13" fore-color-light="#dd7a00" fore-color-dark="#f28600" /> \x3c!-- SCE_MYSQL_DQSTRING --\x3e\n\n    <style id="7" bold="Yes" fore-color-light="#007FBF" /> \x3c!-- SCE_MYSQL_MAJORKEYWORD --\x3e\n    <style id="8" bold="Yes" fore-color-light="#007FBF" /> \x3c!-- SCE_MYSQL_KEYWORD --\x3e\n    <style id="15" fore-color-light="#7d7d63" fore-color-dark="#7db27d" /> \x3c!-- SCE_MYSQL_FUNCTION --\x3e\n    <style id="10" fore-color-light="#7d7d63" fore-color-dark="#7db27d" /> \x3c!-- SCE_MYSQL_PROCEDUREKEYWORD --\x3e\n    <style id="14" bold="Yes" /> \x3c!-- SCE_MYSQL_OPERATOR --\x3e\n\n    <style id="16" fore-color-light="#000000" fore-color-dark="#FFFFFF" /> \x3c!-- SCE_MYSQL_IDENTIFIER --\x3e\n    <style id="17" fore-color-light="#993a3e" fore-color-dark="#e5454c" /> \x3c!-- SCE_MYSQL_QUOTEDIDENTIFIER --\x3e\n\n    <style id="22" fore-color-light="#FFFFFF" back-color-light="#A0A0A0" fore-color-dark="#000000" back-color-dark="#404040" bold="Yes" /> \x3c!-- SCE_MYSQL_PLACEHOLDER --\x3e\n\n    <style id="18" fore-color-light="#007F00" fore-color-dark="#00b200" bold="yes"/> \x3c!-- SCE_MYSQL_USER1 --\x3e\n\n    \x3c!-- All styles again in their variant in a hidden command (with a 0x40 offset). --\x3e\n    <style id="65" fore-color-light="#0987cb" back-color-light="#F0F0F0" fore-color-dark="#0a99e5" back-color-dark="#404040" /> \x3c!-- SCE_MYSQL_COMMENT --\x3e\n    <style id="66" fore-color-light="#0987cb" back-color-light="#F0F0F0" fore-color-dark="#0a99e5" back-color-dark="#404040" /> \x3c!-- SCE_MYSQL_COMMENTLINE --\x3e\n\n    <style id="67" fore-color-light="#63bf8d" back-color-light="#F0F0F0" fore-color-dark="#63bf8d" back-color-dark="#404040" /> \x3c!-- SCE_MYSQL_VARIABLE --\x3e\n    <style id="68" fore-color-light="#45aa73" back-color-light="#F0F0F0" fore-color-dark="#45aa73" back-color-dark="#404040" /> \x3c!-- SCE_MYSQL_SYSTEMVARIABLE --\x3e\n    <style id="69" fore-color-light="#45aa73" back-color-light="#F0F0F0" fore-color-dark="#45aa73" back-color-dark="#404040" /> \x3c!-- SCE_MYSQL_KNOWNSYSTEMVARIABLE --\x3e\n\n    <style id="70" fore-color-light="#cc6c00" back-color-light="#F0F0F0" fore-color-dark="#e57a00" back-color-dark="#404040" /> \x3c!-- SCE_MYSQL_NUMBER --\x3e\n    <style id="76" fore-color-light="#dd7a00" back-color-light="#F0F0F0" fore-color-dark="#f28600" back-color-dark="#404040" /> \x3c!-- SCE_MYSQL_SQSTRING --\x3e\n    <style id="77" fore-color-light="#dd7a00" back-color-light="#F0F0F0" fore-color-dark="#f28600" back-color-dark="#404040" /> \x3c!-- SCE_MYSQL_DQSTRING --\x3e\n\n    <style id="71" back-color-light="#F0F0F0" back-color-dark="#404040" bold="Yes" /> \x3c!-- SCE_MYSQL_MAJORKEYWORD --\x3e\n    <style id="72" back-color-light="#F0F0F0" back-color-dark="#404040" bold="Yes"/> \x3c!-- SCE_MYSQL_KEYWORD --\x3e\n    <style id="79" fore-color-light="#7d7d63" back-color-light="#F0F0F0" fore-color-dark="#7db27d" back-color-dark="#404040" /> \x3c!-- SCE_MYSQL_FUNCTION --\x3e\n    <style id="74" fore-color-light="#7d7d63" back-color-light="#F0F0F0" fore-color-dark="#7db27d" back-color-dark="#404040" /> \x3c!-- SCE_MYSQL_PROCEDUREKEYWORD --\x3e\n    <style id="78" back-color-light="#F0F0F0" back-color-dark="#284444" bold="Yes" /> \x3c!-- SCE_MYSQL_OPERATOR --\x3e\n\n    <style id="80" fore-color-light="#000000" back-color-light="#F0F0F0" fore-color-dark="#FFFFFF" back-color-dark="#404040" /> \x3c!-- SCE_MYSQL_IDENTIFIER --\x3e\n    <style id="81" fore-color-light="#993a3e" back-color-light="#F0F0F0" fore-color-dark="#e5454c" back-color-dark="#404040" /> \x3c!-- SCE_MYSQL_QUOTEDIDENTIFIER --\x3e\n\n    <style id="86" fore-color-light="#FFFFFF" back-color-light="#A0A0A0" fore-color-dark="#284444" back-color-dark="#404040" bold="Yes" /> \x3c!-- SCE_MYSQL_PLACEHOLDER --\x3e\n\n    <style id="82" fore-color-light="#007F00" back-color-light="#F0F0F0" fore-color-dark="#00b200" back-color-dark="#404040" bold="yes"/> \x3c!-- SCE_MYSQL_USER1 --\x3e\n\n    \x3c!-- Various other styles --\x3e\n    <style id="34" back-color-light="#ffee55" back-color-dark="#ffee55" /> \x3c!-- STYLE_BRACELIGHT --\x3e\n    <style id="35" back-color-light="#ff7855" back-color-dark="#ff7855" /> \x3c!-- STYLE_BRACELBAD --\x3e\n  </language>\n</languages>\n',fi=[{start:1,end:2,language:"typescript",result:{type:"text",text:[{type:2,content:"typescript"}],executionInfo:{text:"Normal execution info"}}},{start:3,end:3,language:"typescript"},{start:4,end:5,language:"javascript",result:{type:"text",text:[{type:2,content:"javascript"}],executionInfo:{type:0,text:"Error execution info"}}},{start:6,end:6,language:"javascript"},{start:7,end:8,language:"sql",result:{type:"resultSets",sets:[{columns:[{name:"(my)sql",dataType:{type:16}}],rows:[{"(my)sql":"(my)sql"}],executionInfo:{type:1,text:"Warning execution info"}}]},defaultHeight:100},{start:9,end:9,language:"sql"},{start:10,end:11,language:"python",result:{type:"text",text:[{type:2,content:"python"}],executionInfo:{type:2,text:"Success execution info"}}},{start:12,end:12,language:"python"}],bi="/assets/close-98fd885b.svg",vi="/assets/image-0ec26428.svg",Si=[{id:"1",name:"Jennifer Davis",role:"CEO",reports:"2",children:[{id:"2",name:"Joe Swank",role:"Director Development",reports:"4",children:[{id:"4",name:"Grace Mostel",role:"Database Administrator",reports:"0"},{id:"5",name:"Matthew Johannson",role:"Backend Developer",reports:"0"},{id:"6",name:"Zero Cage",role:"Frontend Developer",reports:"0"},{id:"7",name:"Karl Berry",role:"DevOps",reports:"0"}]},{id:"3",name:"Christian Gable",role:"Director Sales",reports:"4",children:[{id:"8",name:"Penelope Guiness",role:"Region North East",reports:"0"},{id:"9",name:"Nick Wahlberg",role:"Region South East",reports:"0"},{id:"10",name:"Ed Chase",role:"North East",reports:"0"},{id:"11",name:"Bette Nicholson",role:"North West",reports:"0"}]}]},{id:"12",name:"Elvis Marx",role:"Head of HR",reports:"0"}];var Ci=(e=>(e[e.Replace=0]="Replace",e[e.Update=1]="Update",e[e.Add=2]="Add",e[e.Set=3]="Set",e))(Ci||{});class TreeGrid extends ComponentBase{constructor(e){super(e),pe(this,"hostRef",ke()),pe(this,"tabulator"),pe(this,"tableReady",!1),pe(this,"timeoutId"),pe(this,"updateCount",0),pe(this,"handleRowExpanded",((e,t)=>{const{onRowExpanded:n}=this.mergedProps;e.getElement().classList.add("expanded"),null==n||n(e,t)})),pe(this,"handleRowCollapsed",((e,t)=>{const{onRowCollapsed:n}=this.mergedProps;e.getElement().classList.remove("expanded"),null==n||n(e,t)})),pe(this,"handleRowContext",((e,t)=>{const{onRowContext:n}=this.mergedProps;null==n||n(e,t)})),pe(this,"handleCellContext",((e,t)=>{const{onCellContext:n}=this.mergedProps;null==n||n(e,t)})),pe(this,"handleRowSelected",(e=>{var t,n;const{options:i}=this.mergedProps;if((null==i?void 0:i.treeColumn)&&e.treeToggle(),null==i?void 0:i.autoScrollOnSelect){const e=(null==(t=this.tabulator)?void 0:t.getSelectedRows())??[];e.length>0&&(null==(n=this.tabulator)||n.scrollToRow(e[0],"center",!1))}const{onRowSelected:o}=this.mergedProps;null==o||o(e)})),pe(this,"handleRowDeselected",(e=>{const{onRowDeselected:t}=this.mergedProps;null==t||t(e)})),pe(this,"handleColumnResized",(e=>{const{onColumnResized:t}=this.mergedProps;null==t||t(e)})),this.addHandledProperties("height","columns","tableData","options","selectedIds","rowContextMenu","onRowExpanded","onRowCollapsed","isRowExpanded","onFormatRow","onRowContext","onCellContext","onRowSelected","onRowDeselected","onVerticalScroll","onColumnResized")}static initialize(){Tt.registerModule([Rt,xt,Et,Mt,Pt,Lt,Ft,At,Bt,Nt,Ot,_t])}componentDidMount(){const{onVerticalScroll:e}=this.mergedProps;this.timeoutId=setTimeout((()=>{this.hostRef.current&&(this.timeoutId=null,this.tabulator=new Tt(this.hostRef.current,this.tabulatorOptions),this.tabulator.on("tableBuilt",(()=>{var e;const{selectedIds:t}=this.mergedProps;this.tabulator.off("tableBuilt"),t&&this.tabulator.selectRow(t),this.hostRef.current&&(null==(e=this.hostRef.current)?void 0:e.lastChild).classList.add("fixedScrollbar"),this.tableReady=!0})),this.tabulator.on("dataTreeRowExpanded",this.handleRowExpanded),this.tabulator.on("dataTreeRowCollapsed",this.handleRowCollapsed),this.tabulator.on("rowContext",this.handleRowContext),this.tabulator.on("cellContext",this.handleCellContext),this.tabulator.on("rowSelected",this.handleRowSelected),this.tabulator.on("rowDeselected",this.handleRowDeselected),this.tabulator.on("columnResized",this.handleColumnResized),e&&this.tabulator.on("scrollVertical",e))}),10)}componentWillUnmount(){this.timeoutId&&(clearTimeout(this.timeoutId),this.timeoutId=null)}componentDidUpdate(){if(this.tabulator&&this.tableReady){const{selectedIds:e,columns:t,tableData:n}=this.mergedProps,i=this.tabulator.rowManager.scrollTop;n?this.tabulator.replaceData(n).then((()=>{var n,o,s;t&&(null==(n=this.tabulator)||n.setColumns(t)),null==(o=this.tabulator)||o.redraw(),e&&(null==(s=this.tabulator)||s.selectRow(e)),this.tabulator.rowManager.scrollTop=i,this.tabulator.rowManager.element.scrollTop=i})):e&&(t&&this.tabulator.setColumns(t),this.tabulator.selectRow(e))}}render(){const{options:e}=this.mergedProps,t=this.getEffectiveClassNames(["treeGrid",this.classFromProperty(null==e?void 0:e.horizontalGridLines,"horizontalGrid"),this.classFromProperty(null==e?void 0:e.verticalGridLines,"verticalGrid"),this.classFromProperty(null==e?void 0:e.alternatingRowBackgrounds,"alternatingRows")]);return Ie("div",{ref:this.hostRef,className:t,...this.unhandledProperties})}get table(){return new Promise((e=>{(async(e,t)=>{for(;!t()&&e>0;)e-=100,await cn(100);return e>0})(1e3,(()=>this.tableReady)).then((t=>{e(t?this.tabulator:void 0)}))}))}setColumns(e){return new Promise(((t,n)=>{this.table.then((()=>{var n;null==(n=this.tabulator)||n.setColumns(e),t()})).catch((e=>{n(e)}))}))}async setData(e,t){const n=await this.table;switch(t){case 0:await(null==n?void 0:n.replaceData(e));break;case 1:await(null==n?void 0:n.updateData(e));break;case 3:await(null==n?void 0:n.setData(e));break;default:await(null==n?void 0:n.addData(e))}}getRows(){return this.tableReady&&this.tabulator?this.tabulator.getRows():[]}getSelectedRows(){return this.tableReady&&this.tabulator?this.tabulator.getSelectedRows():[]}beginUpdate(){this.tableReady&&this.tabulator&&(++this.updateCount,1===this.updateCount&&this.tabulator.blockRedraw())}endUpdate(){this.tableReady&&this.tabulator&&this.updateCount>0&&(--this.updateCount,0===this.updateCount&&this.tabulator.restoreRedraw())}get tabulatorOptions(){const{height:e="100%",columns:t=[],tableData:n=[],options:i,rowContextMenu:o,isRowExpanded:s,onFormatRow:r}=this.mergedProps;let a;switch(null==i?void 0:i.selectionType){case ii.Highlight:a="highlight";break;case ii.Single:a=1;break;case ii.Multi:a=!0;break;default:a=!1}const l={debugInvalidOptions:tn.inDevelopment,index:(null==i?void 0:i.index)??"id",columns:t,data:n,dataTree:null!=(null==i?void 0:i.treeColumn),dataTreeChildIndent:(null==i?void 0:i.treeChildIndent)??0,dataTreeChildField:(null==i?void 0:i.childKey)??"children",dataTreeElementColumn:null==i?void 0:i.treeColumn,dataTreeExpandElement:"<span class='treeToggle' />",dataTreeCollapseElement:"<span class='treeToggle expanded' />",dataTreeBranchElement:!0,dataTreeStartExpanded:(null==i?void 0:i.expandedLevels)??!1,rowFormatter:r,headerVisible:(null==i?void 0:i.showHeader)??!0,selectable:a,selectableRangeMode:"click",reactiveData:!1,rowContextMenu:o,autoResize:!0,layoutColumnsOnNewData:null==i?void 0:i.layoutColumnsOnNewData,resizableRows:null==i?void 0:i.resizableRows,height:e};return s&&(l.dataTreeStartExpanded=s),(null==i?void 0:i.layout)&&(l.layout=i.layout),l}}TreeGrid.initialize();class TablePreview extends ComponentBase{constructor(e){super(e),pe(this,"ref",ke()),this.state={data:Si,columnNames:Object.keys(Si[0]).filter((e=>"children"===e?void 0:e))}}componentDidMount(){var e;null==(e=this.ref.current)||e.table.then((e=>{const t=null==e?void 0:e.getRows();t&&t.length>0&&t[0].treeExpand(),null==e||e.selectRow([1,12])}))}render(){const{data:e,columnNames:t}=this.state,n=t.map(((e,t)=>({title:e,field:e,headerSort:t>0,editor:"role"===e||"reports"===e&&"number"}))),i={treeColumn:"name",childKey:"children",layout:"fitColumns",verticalGridLines:!0,horizontalGridLines:!0,alternatingRowBackgrounds:!1,selectionType:ii.Multi};return Ie(TreeGrid,{ref:this.ref,height:300,columns:n,tableData:e,options:i})}}const wi="/assets/close2-86dc683d.svg",yi=e=>De(e).filter((e=>void 0!==e.type));var ki=(e=>(e.Start="flex-start",e.Center="center",e.End="flex-end",e.Stretch="stretch",e.SpaceBetween="space-between",e.SpaceEvenly="space-evenly",e))(ki||{}),Ii=(e=>(e.NoWrap="nowrap",e.Wrap="wrap",e.WrapReverse="wrap-reverse",e))(Ii||{}),Di=(e=>(e.TopDown="column",e.BottomUp="column-reverse",e.LeftToRight="row",e.RightToLeft="row-reverse",e))(Di||{});class Container extends ComponentBase{constructor(e){super(e),this.addHandledProperties("style","orientation","mainAlignment","crossAlignment","wrap","scrollPosition","fixedScrollbars","innerRef")}componentDidUpdate(){var e;const{innerRef:t,scrollPosition:n}=this.mergedProps;void 0!==n&&(null==(e=null==t?void 0:t.current)||e.scrollTo({left:0,top:n}))}render(){const{children:e,style:t,orientation:n,mainAlignment:i,crossAlignment:o,data:s,wrap:r,fixedScrollbars:a=!0,innerRef:l}=this.mergedProps,d=this.getEffectiveClassNames(["container",this.classFromProperty(a,"fixedScrollbar")]),c={flexDirection:n,justifyContent:i,alignItems:o,flexWrap:r,...t};let u=e;if(s&&e){u=yi(e).map((e=>Te(e,{data:s})))}return Ie("div",{ref:l,style:c,className:d,...this.unhandledProperties,children:u})}}pe(Container,"defaultProps",{orientation:"row"});var Ti=(e=>(e[e.Undefined=0]="Undefined",e[e.Account=1]="Account",e[e.ActivateBreakpoints=2]="ActivateBreakpoints",e[e.Add=3]="Add",e[e.Alert=4]="Alert",e[e.Archive=5]="Archive",e[e.Array=6]="Array",e[e.ArrowBoth=7]="ArrowBoth",e[e.ArrowDown=8]="ArrowDown",e[e.ArrowLeft=9]="ArrowLeft",e[e.ArrowRight=10]="ArrowRight",e[e.ArrowSmallDown=11]="ArrowSmallDown",e[e.ArrowSmallLeft=12]="ArrowSmallLeft",e[e.ArrowSmallRight=13]="ArrowSmallRight",e[e.ArrowSmallUp=14]="ArrowSmallUp",e[e.ArrowUp=15]="ArrowUp",e[e.Beaker=16]="Beaker",e[e.Bell=17]="Bell",e[e.BellDot=18]="BellDot",e[e.Bold=19]="Bold",e[e.Book=20]="Book",e[e.Bookmark=21]="Bookmark",e[e.Briefcase=22]="Briefcase",e[e.Broadcast=23]="Broadcast",e[e.Browser=24]="Browser",e[e.Bug=25]="Bug",e[e.Calendar=26]="Calendar",e[e.CallIncoming=27]="CallIncoming",e[e.CaseSensitive=28]="CaseSensitive",e[e.Check=29]="Check",e[e.CheckAll=30]="CheckAll",e[e.Checklist=31]="Checklist",e[e.ChevronDown=32]="ChevronDown",e[e.ChevronLeft=33]="ChevronLeft",e[e.ChevronRight=34]="ChevronRight",e[e.ChevronUp=35]="ChevronUp",e[e.ChromeClose=36]="ChromeClose",e[e.ChromeMaximize=37]="ChromeMaximize",e[e.ChromeMinimize=38]="ChromeMinimize",e[e.ChromeRestore=39]="ChromeRestore",e[e.CircleFilled=40]="CircleFilled",e[e.CircleLargeFilled=41]="CircleLargeFilled",e[e.CircleLargeOutline=42]="CircleLargeOutline",e[e.CircleOutline=43]="CircleOutline",e[e.CircleSlash=44]="CircleSlash",e[e.CircuitBoard=45]="CircuitBoard",e[e.ClearAll=46]="ClearAll",e[e.Clippy=47]="Clippy",e[e.Clock=48]="Clock",e[e.Clone=49]="Clone",e[e.Close=50]="Close",e[e.CloseAll=51]="CloseAll",e[e.CloseDirty=52]="CloseDirty",e[e.Cloud=53]="Cloud",e[e.CloudDownload=54]="CloudDownload",e[e.CloudUpload=55]="CloudUpload",e[e.Code=56]="Code",e[e.CollapseAll=57]="CollapseAll",e[e.ColorMode=58]="ColorMode",e[e.Combine=59]="Combine",e[e.Comment=60]="Comment",e[e.CommentAdd=61]="CommentAdd",e[e.CommentDiscussion=62]="CommentDiscussion",e[e.CompareChanges=63]="CompareChanges",e[e.Console=64]="Console",e[e.Copy=65]="Copy",e[e.CreditCard=66]="CreditCard",e[e.Dash=67]="Dash",e[e.Dashboard=68]="Dashboard",e[e.Database=69]="Database",e[e.Debug=70]="Debug",e[e.DebugAlt=71]="DebugAlt",e[e.DebugAltSmall=72]="DebugAltSmall",e[e.DebugBreakpoint=73]="DebugBreakpoint",e[e.DebugBreakpointConditional=74]="DebugBreakpointConditional",e[e.DebugBreakpointConditionalDisabled=75]="DebugBreakpointConditionalDisabled",e[e.DebugBreakpointConditionalUnverified=76]="DebugBreakpointConditionalUnverified",e[e.DebugBreakpointData=77]="DebugBreakpointData",e[e.DebugBreakpointDataDisabled=78]="DebugBreakpointDataDisabled",e[e.DebugBreakpointDataUnverified=79]="DebugBreakpointDataUnverified",e[e.DebugBreakpointDisabled=80]="DebugBreakpointDisabled",e[e.DebugBreakpointFunction=81]="DebugBreakpointFunction",e[e.DebugBreakpointFunctionDisabled=82]="DebugBreakpointFunctionDisabled",e[e.DebugBreakpointFunctionUnverified=83]="DebugBreakpointFunctionUnverified",e[e.DebugBreakpointLog=84]="DebugBreakpointLog",e[e.DebugBreakpointLogDisabled=85]="DebugBreakpointLogDisabled",e[e.DebugBreakpointLogUnverified=86]="DebugBreakpointLogUnverified",e[e.DebugBreakpointUnsupported=87]="DebugBreakpointUnsupported",e[e.DebugBreakpointUnverified=88]="DebugBreakpointUnverified",e[e.DebugConsole=89]="DebugConsole",e[e.DebugContinue=90]="DebugContinue",e[e.DebugDisconnect=91]="DebugDisconnect",e[e.DebugHint=92]="DebugHint",e[e.DebugPause=93]="DebugPause",e[e.DebugRestart=94]="DebugRestart",e[e.DebugRestartFrame=95]="DebugRestartFrame",e[e.DebugReverseContinue=96]="DebugReverseContinue",e[e.DebugStackframe=97]="DebugStackframe",e[e.DebugStackframeActive=98]="DebugStackframeActive",e[e.DebugStackframeDot=99]="DebugStackframeDot",e[e.DebugStackframeFocused=100]="DebugStackframeFocused",e[e.DebugStart=101]="DebugStart",e[e.DebugStepBack=102]="DebugStepBack",e[e.DebugStepInto=103]="DebugStepInto",e[e.DebugStepOut=104]="DebugStepOut",e[e.DebugStepOver=105]="DebugStepOver",e[e.DebugStop=106]="DebugStop",e[e.DesktopDownload=107]="DesktopDownload",e[e.DeviceCamera=108]="DeviceCamera",e[e.DeviceCameraVideo=109]="DeviceCameraVideo",e[e.DeviceDesktop=110]="DeviceDesktop",e[e.DeviceMobile=111]="DeviceMobile",e[e.Diff=112]="Diff",e[e.DiffAdded=113]="DiffAdded",e[e.DiffIgnored=114]="DiffIgnored",e[e.DiffModified=115]="DiffModified",e[e.DiffRemoved=116]="DiffRemoved",e[e.DiffRenamed=117]="DiffRenamed",e[e.Discard=118]="Discard",e[e.DropDownButton=119]="DropDownButton",e[e.Edit=120]="Edit",e[e.EditorLayout=121]="EditorLayout",e[e.Ellipsis=122]="Ellipsis",e[e.EmptyWindow=123]="EmptyWindow",e[e.Error=124]="Error",e[e.Exclude=125]="Exclude",e[e.ExpandAll=126]="ExpandAll",e[e.Export=127]="Export",e[e.Extensions=128]="Extensions",e[e.Eye=129]="Eye",e[e.EyeClosed=130]="EyeClosed",e[e.EyeUnwatch=131]="EyeUnwatch",e[e.EyeWatch=132]="EyeWatch",e[e.Feedback=133]="Feedback",e[e.File=134]="File",e[e.FileAdd=135]="FileAdd",e[e.FileBinary=136]="FileBinary",e[e.FileCode=137]="FileCode",e[e.FileDirectory=138]="FileDirectory",e[e.FileDirectoryCreate=139]="FileDirectoryCreate",e[e.FileMedia=140]="FileMedia",e[e.FilePdf=141]="FilePdf",e[e.FileSubmodule=142]="FileSubmodule",e[e.FileSymlinkDirectory=143]="FileSymlinkDirectory",e[e.FileSymlinkFile=144]="FileSymlinkFile",e[e.FileText=145]="FileText",e[e.FileZip=146]="FileZip",e[e.Files=147]="Files",e[e.Filter=148]="Filter",e[e.Flame=149]="Flame",e[e.Fold=150]="Fold",e[e.FoldDown=151]="FoldDown",e[e.FoldUp=152]="FoldUp",e[e.Folder=153]="Folder",e[e.FolderActive=154]="FolderActive",e[e.FolderOpened=155]="FolderOpened",e[e.Gather=156]="Gather",e[e.Gear=157]="Gear",e[e.Gift=158]="Gift",e[e.Gist=159]="Gist",e[e.GistFork=160]="GistFork",e[e.GistNew=161]="GistNew",e[e.GistPrivate=162]="GistPrivate",e[e.GistSecret=163]="GistSecret",e[e.GitBranch=164]="GitBranch",e[e.GitBranchCreate=165]="GitBranchCreate",e[e.GitBranchDelete=166]="GitBranchDelete",e[e.GitCommit=167]="GitCommit",e[e.GitCompare=168]="GitCompare",e[e.GitForkPrivate=169]="GitForkPrivate",e[e.GitMerge=170]="GitMerge",e[e.GitPullRequest=171]="GitPullRequest",e[e.GitPullRequestAbandoned=172]="GitPullRequestAbandoned",e[e.Github=173]="Github",e[e.GithubAction=174]="GithubAction",e[e.GithubAlt=175]="GithubAlt",e[e.GithubInverted=176]="GithubInverted",e[e.Globe=177]="Globe",e[e.GoToFile=178]="GoToFile",e[e.Grabber=179]="Grabber",e[e.Graph=180]="Graph",e[e.GraphLeft=181]="GraphLeft",e[e.Gripper=182]="Gripper",e[e.GroupByRefType=183]="GroupByRefType",e[e.Heart=184]="Heart",e[e.History=185]="History",e[e.Home=186]="Home",e[e.HorizontalRule=187]="HorizontalRule",e[e.Hubot=188]="Hubot",e[e.Inbox=189]="Inbox",e[e.Info=190]="Info",e[e.IssueClosed=191]="IssueClosed",e[e.IssueOpened=192]="IssueOpened",e[e.IssueReopened=193]="IssueReopened",e[e.Issues=194]="Issues",e[e.Italic=195]="Italic",e[e.Jersey=196]="Jersey",e[e.Json=197]="Json",e[e.KebabHorizontal=198]="KebabHorizontal",e[e.KebabVertical=199]="KebabVertical",e[e.Key=200]="Key",e[e.Keyboard=201]="Keyboard",e[e.Law=202]="Law",e[e.Library=203]="Library",e[e.LightBulb=204]="LightBulb",e[e.Lightbulb=205]="Lightbulb",e[e.LightbulbAutofix=206]="LightbulbAutofix",e[e.Link=207]="Link",e[e.LinkExternal=208]="LinkExternal",e[e.ListFilter=209]="ListFilter",e[e.ListFlat=210]="ListFlat",e[e.ListOrdered=211]="ListOrdered",e[e.ListSelection=212]="ListSelection",e[e.ListTree=213]="ListTree",e[e.ListUnordered=214]="ListUnordered",e[e.LiveShare=215]="LiveShare",e[e.Loading=216]="Loading",e[e.Location=217]="Location",e[e.Lock=218]="Lock",e[e.LogIn=219]="LogIn",e[e.LogOut=220]="LogOut",e[e.LogoGithub=221]="LogoGithub",e[e.Magnet=222]="Magnet",e[e.Mail=223]="Mail",e[e.MailRead=224]="MailRead",e[e.MailReply=225]="MailReply",e[e.MarkGithub=226]="MarkGithub",e[e.Markdown=227]="Markdown",e[e.Megaphone=228]="Megaphone",e[e.Mention=229]="Mention",e[e.Menu=230]="Menu",e[e.Merge=231]="Merge",e[e.Microscope=232]="Microscope",e[e.Milestone=233]="Milestone",e[e.Mirror=234]="Mirror",e[e.MirrorPrivate=235]="MirrorPrivate",e[e.MirrorPublic=236]="MirrorPublic",e[e.More=237]="More",e[e.MortarBoard=238]="MortarBoard",e[e.Move=239]="Move",e[e.MultipleWindows=240]="MultipleWindows",e[e.Mute=241]="Mute",e[e.NewFile=242]="NewFile",e[e.NewFolder=243]="NewFolder",e[e.NoNewline=244]="NoNewline",e[e.Note=245]="Note",e[e.Notebook=246]="Notebook",e[e.Octoface=247]="Octoface",e[e.OpenPreview=248]="OpenPreview",e[e.Organization=249]="Organization",e[e.OrganizationFilled=250]="OrganizationFilled",e[e.OrganizationOutline=251]="OrganizationOutline",e[e.Output=252]="Output",e[e.Package=253]="Package",e[e.Paintcan=254]="Paintcan",e[e.Pass=255]="Pass",e[e.PassFilled=256]="PassFilled",e[e.Pencil=257]="Pencil",e[e.Person=258]="Person",e[e.PersonAdd=259]="PersonAdd",e[e.PersonFilled=260]="PersonFilled",e[e.PersonFollow=261]="PersonFollow",e[e.PersonOutline=262]="PersonOutline",e[e.Pin=263]="Pin",e[e.Pinned=264]="Pinned",e[e.PinnedDirty=265]="PinnedDirty",e[e.Play=266]="Play",e[e.PlayCircle=267]="PlayCircle",e[e.Plug=268]="Plug",e[e.Plus=269]="Plus",e[e.PreserveCase=270]="PreserveCase",e[e.Preview=271]="Preview",e[e.PrimitiveDot=272]="PrimitiveDot",e[e.PrimitiveSquare=273]="PrimitiveSquare",e[e.Project=274]="Project",e[e.Pulse=275]="Pulse",e[e.Question=276]="Question",e[e.Quote=277]="Quote",e[e.RadioTower=278]="RadioTower",e[e.Reactions=279]="Reactions",e[e.Record=280]="Record",e[e.RecordKeys=281]="RecordKeys",e[e.Redo=282]="Redo",e[e.References=283]="References",e[e.Refresh=284]="Refresh",e[e.Regex=285]="Regex",e[e.Remote=286]="Remote",e[e.RemoteExplorer=287]="RemoteExplorer",e[e.Remove=288]="Remove",e[e.RemoveClose=289]="RemoveClose",e[e.Repl=290]="Repl",e[e.Replace=291]="Replace",e[e.ReplaceAll=292]="ReplaceAll",e[e.Reply=293]="Reply",e[e.Repo=294]="Repo",e[e.RepoClone=295]="RepoClone",e[e.RepoCreate=296]="RepoCreate",e[e.RepoDelete=297]="RepoDelete",e[e.RepoForcePush=298]="RepoForcePush",e[e.RepoForked=299]="RepoForked",e[e.RepoPull=300]="RepoPull",e[e.RepoPush=301]="RepoPush",e[e.RepoSync=302]="RepoSync",e[e.Report=303]="Report",e[e.RequestChanges=304]="RequestChanges",e[e.Rocket=305]="Rocket",e[e.RootFolder=306]="RootFolder",e[e.RootFolderOpened=307]="RootFolderOpened",e[e.Rss=308]="Rss",e[e.Ruby=309]="Ruby",e[e.Run=310]="Run",e[e.RunAll=311]="RunAll",e[e.Save=312]="Save",e[e.SaveAll=313]="SaveAll",e[e.SaveAs=314]="SaveAs",e[e.ScreenFull=315]="ScreenFull",e[e.ScreenNormal=316]="ScreenNormal",e[e.Search=317]="Search",e[e.SearchSave=318]="SearchSave",e[e.SearchStop=319]="SearchStop",e[e.Selection=320]="Selection",e[e.Server=321]="Server",e[e.ServerEnvironment=322]="ServerEnvironment",e[e.ServerProcess=323]="ServerProcess",e[e.Settings=324]="Settings",e[e.SettingsGear=325]="SettingsGear",e[e.Shield=326]="Shield",e[e.SignIn=327]="SignIn",e[e.SignOut=328]="SignOut",e[e.Smiley=329]="Smiley",e[e.SortPrecedence=330]="SortPrecedence",e[e.SourceControl=331]="SourceControl",e[e.SplitHorizontal=332]="SplitHorizontal",e[e.SplitVertical=333]="SplitVertical",e[e.Squirrel=334]="Squirrel",e[e.Star=335]="Star",e[e.StarAdd=336]="StarAdd",e[e.StarDelete=337]="StarDelete",e[e.StarEmpty=338]="StarEmpty",e[e.StarFull=339]="StarFull",e[e.StarHalf=340]="StarHalf",e[e.Stop=341]="Stop",e[e.StopCircle=342]="StopCircle",e[e.SymbolArray=343]="SymbolArray",e[e.SymbolBoolean=344]="SymbolBoolean",e[e.SymbolClass=345]="SymbolClass",e[e.SymbolColor=346]="SymbolColor",e[e.SymbolConstant=347]="SymbolConstant",e[e.SymbolConstructor=348]="SymbolConstructor",e[e.SymbolEnum=349]="SymbolEnum",e[e.SymbolEnumMember=350]="SymbolEnumMember",e[e.SymbolEvent=351]="SymbolEvent",e[e.SymbolField=352]="SymbolField",e[e.SymbolFile=353]="SymbolFile",e[e.SymbolFolder=354]="SymbolFolder",e[e.SymbolFunction=355]="SymbolFunction",e[e.SymbolInterface=356]="SymbolInterface",e[e.SymbolKey=357]="SymbolKey",e[e.SymbolKeyword=358]="SymbolKeyword",e[e.SymbolMethod=359]="SymbolMethod",e[e.SymbolMisc=360]="SymbolMisc",e[e.SymbolModule=361]="SymbolModule",e[e.SymbolNamespace=362]="SymbolNamespace",e[e.SymbolNull=363]="SymbolNull",e[e.SymbolNumber=364]="SymbolNumber",e[e.SymbolNumeric=365]="SymbolNumeric",e[e.SymbolObject=366]="SymbolObject",e[e.SymbolOperator=367]="SymbolOperator",e[e.SymbolPackage=368]="SymbolPackage",e[e.SymbolParameter=369]="SymbolParameter",e[e.SymbolProperty=370]="SymbolProperty",e[e.SymbolReference=371]="SymbolReference",e[e.SymbolRuler=372]="SymbolRuler",e[e.SymbolSnippet=373]="SymbolSnippet",e[e.SymbolString=374]="SymbolString",e[e.SymbolStruct=375]="SymbolStruct",e[e.SymbolStructure=376]="SymbolStructure",e[e.SymbolText=377]="SymbolText",e[e.SymbolTypeParameter=378]="SymbolTypeParameter",e[e.SymbolUnit=379]="SymbolUnit",e[e.SymbolValue=380]="SymbolValue",e[e.SymbolVariable=381]="SymbolVariable",e[e.Sync=382]="Sync",e[e.SyncIgnored=383]="SyncIgnored",e[e.Tag=384]="Tag",e[e.TagAdd=385]="TagAdd",e[e.TagRemove=386]="TagRemove",e[e.Tasklist=387]="Tasklist",e[e.Telescope=388]="Telescope",e[e.Terminal=389]="Terminal",e[e.TextSize=390]="TextSize",e[e.ThreeBars=391]="ThreeBars",e[e.Thumbsdown=392]="Thumbsdown",e[e.Thumbsup=393]="Thumbsup",e[e.Tools=394]="Tools",e[e.Trash=395]="Trash",e[e.Trashcan=396]="Trashcan",e[e.TriangleDown=397]="TriangleDown",e[e.TriangleLeft=398]="TriangleLeft",e[e.TriangleRight=399]="TriangleRight",e[e.TriangleUp=400]="TriangleUp",e[e.Twitter=401]="Twitter",e[e.Unfold=402]="Unfold",e[e.UngroupByRefType=403]="UngroupByRefType",e[e.Unlock=404]="Unlock",e[e.Unmute=405]="Unmute",e[e.Unverified=406]="Unverified",e[e.Variable=407]="Variable",e[e.Verified=408]="Verified",e[e.Versions=409]="Versions",e[e.Vm=410]="Vm",e[e.VmActive=411]="VmActive",e[e.VmConnect=412]="VmConnect",e[e.VmOutline=413]="VmOutline",e[e.VmRunning=414]="VmRunning",e[e.Warning=415]="Warning",e[e.Watch=416]="Watch",e[e.Whitespace=417]="Whitespace",e[e.WholeWord=418]="WholeWord",e[e.Window=419]="Window",e[e.WordWrap=420]="WordWrap",e[e.Wrench=421]="Wrench",e[e.WrenchSubaction=422]="WrenchSubaction",e[e.X=423]="X",e[e.Zap=424]="Zap",e[e.ZoomIn=425]="ZoomIn",e[e.ZoomOut=426]="ZoomOut",e))(Ti||{});const Ri=new Map([[1,"account"],[2,"activate-breakpoints"],[3,"add"],[4,"alert"],[5,"archive"],[6,"array"],[7,"arrow-both"],[8,"arrow-down"],[9,"arrow-left"],[10,"arrow-right"],[11,"arrow-small-down"],[12,"arrow-small-left"],[13,"arrow-small-right"],[14,"arrow-small-up"],[15,"arrow-up"],[16,"beaker"],[17,"bell"],[18,"bell-dot"],[19,"bold"],[20,"book"],[21,"bookmark"],[22,"briefcase"],[23,"broadcast"],[24,"browser"],[25,"bug"],[26,"calendar"],[27,"call-incoming"],[28,"case-sensitive"],[29,"check"],[30,"check-all"],[31,"checklist"],[32,"chevron-down"],[33,"chevron-left"],[34,"chevron-right"],[35,"chevron-up"],[36,"chrome-close"],[37,"chrome-maximize"],[38,"chrome-minimize"],[39,"chrome-restore"],[40,"circle-filled"],[41,"circle-large-filled"],[42,"circle-large-outline"],[43,"circle-outline"],[44,"circle-slash"],[45,"circuit-board"],[46,"clear-all"],[47,"clippy"],[48,"clock"],[49,"clone"],[50,"close"],[51,"close-all"],[52,"close-dirty"],[53,"cloud"],[54,"cloud-download"],[55,"cloud-upload"],[56,"code"],[57,"collapse-all"],[58,"color-mode"],[59,"combine"],[60,"comment"],[61,"comment-add"],[62,"comment-discussion"],[63,"compare-changes"],[64,"console"],[65,"copy"],[66,"credit-card"],[67,"dash"],[68,"dashboard"],[69,"database"],[70,"debug"],[71,"debug-alt"],[72,"debugAlt-small"],[73,"debug-breakpoint"],[74,"debug-breakpoint-conditional"],[75,"debug-breakpoint-conditional-disabled"],[76,"debug-breakpoint-conditional-unverified"],[77,"debug-breakpoint-data"],[78,"debug-breakpoint-data-disabled"],[79,"debug-breakpoint-data-unverified"],[80,"debug-breakpoint-disabled"],[81,"debug-breakpoint-function"],[82,"debug-breakpoint-function-disabled"],[83,"debug-breakpoint-function-unverified"],[84,"debug-breakpoint-log"],[85,"debug-breakpoint-log-disabled"],[86,"debug-breakpoint-log-unverified"],[87,"debug-breakpoint-unsupported"],[88,"debug-breakpoint-unverified"],[89,"debug-console"],[90,"debug-continue"],[91,"debug-disconnect"],[92,"debug-hint"],[93,"debug-pause"],[94,"debug-restart"],[95,"debug-restart-frame"],[96,"debug-reverse-continue"],[97,"debug-stackframe"],[98,"debug-stackframe-active"],[99,"debug-stackframe-dot"],[100,"debug-stackframe-focused"],[101,"debug-start"],[102,"debug-step-back"],[103,"debug-step-into"],[104,"debug-step-out"],[105,"debug-step-over"],[106,"debug-stop"],[107,"desktop-download"],[108,"device-camera"],[109,"device-camera-video"],[110,"device-desktop"],[111,"device-mobile"],[112,"diff"],[113,"diff-added"],[114,"diff-ignored"],[115,"diff-modified"],[116,"diff-removed"],[117,"diff-renamed"],[118,"discard"],[119,"drop-down-button"],[120,"edit"],[121,"editor-layout"],[122,"ellipsis"],[123,"empty-window"],[124,"error"],[125,"exclude"],[126,"expand-all"],[127,"export"],[128,"extensions"],[129,"eye"],[130,"eye-closed"],[131,"eye-unwatch"],[132,"eye-watch"],[133,"feedback"],[134,"file"],[135,"file-add"],[136,"file-binary"],[137,"file-code"],[138,"file-directory"],[139,"file-directory-create"],[140,"file-media"],[141,"file-pdf"],[142,"file-submodule"],[143,"file-symlink-directory"],[144,"file-symlink-file"],[145,"file-text"],[146,"file-zip"],[147,"files"],[148,"filter"],[149,"flame"],[150,"fold"],[151,"fold-down"],[152,"fold-up"],[153,"folder"],[154,"folder-active"],[155,"folder-opened"],[156,"gather"],[157,"gear"],[158,"gift"],[159,"gist"],[160,"gist-fork"],[161,"gist-new"],[162,"gist-private"],[163,"gist-secret"],[164,"git-branch"],[165,"git-branch-create"],[166,"git-branch-delete"],[167,"git-commit"],[168,"git-compare"],[169,"git-fork-private"],[170,"git-merge"],[171,"git-pull-request"],[172,"git-pull-request-abandoned"],[173,"github"],[174,"github-action"],[175,"github-alt"],[176,"github-inverted"],[177,"globe"],[178,"go-to-file"],[179,"grabber"],[180,"graph"],[181,"graph-left"],[182,"gripper"],[183,"group-by-ref-type"],[184,"heart"],[185,"history"],[186,"home"],[187,"horizontal-rule"],[188,"hubot"],[189,"inbox"],[190,"info"],[191,"issue-closed"],[192,"issue-opened"],[193,"issue-reopened"],[194,"issues"],[195,"italic"],[196,"jersey"],[197,"json"],[198,"kebab-horizontal"],[199,"kebab-vertical"],[200,"key"],[201,"keyboard"],[202,"law"],[203,"library"],[204,"light-bulb"],[205,"lightbulb"],[206,"lightbulb-autofix"],[207,"link"],[208,"link-external"],[209,"list-filter"],[210,"list-flat"],[211,"list-ordered"],[212,"list-selection"],[213,"list-tree"],[214,"list-unordered"],[215,"live-share"],[216,"loading"],[217,"location"],[218,"lock"],[219,"log-in"],[220,"log-out"],[221,"logo-github"],[222,"magnet"],[223,"mail"],[224,"mail-read"],[225,"mail-reply"],[226,"mark-github"],[227,"markdown"],[228,"megaphone"],[229,"mention"],[230,"menu"],[231,"merge"],[232,"microscope"],[233,"milestone"],[234,"mirror"],[235,"mirror-private"],[236,"mirror-public"],[237,"more"],[238,"mortar-board"],[239,"move"],[240,"multiple-windows"],[241,"mute"],[242,"new-file"],[243,"new-folder"],[244,"no-newline"],[245,"note"],[246,"notebook"],[247,"octoface"],[248,"open-preview"],[249,"organization"],[250,"organization-filled"],[251,"organization-outline"],[252,"output"],[253,"package"],[254,"paintcan"],[255,"pass"],[256,"pass-filled"],[257,"pencil"],[258,"person"],[259,"person-add"],[260,"person-filled"],[261,"person-follow"],[262,"person-outline"],[263,"pin"],[264,"pinned"],[265,"pinned-dirty"],[266,"play"],[267,"play-circle"],[268,"plug"],[269,"plus"],[270,"preserve-case"],[271,"preview"],[272,"primitive-dot"],[273,"primitive-square"],[274,"project"],[275,"pulse"],[276,"question"],[277,"quote"],[278,"radio-tower"],[279,"reactions"],[280,"record"],[281,"record-keys"],[282,"redo"],[283,"references"],[284,"refresh"],[285,"regex"],[286,"remote"],[287,"remote-explorer"],[288,"remove"],[289,"remove-close"],[290,"repl"],[291,"replace"],[292,"replace-all"],[293,"reply"],[294,"repo"],[295,"repo-clone"],[296,"repo-create"],[297,"repo-delete"],[298,"repo-force-push"],[299,"repo-forked"],[300,"repo-pull"],[301,"repo-push"],[302,"repo-sync"],[303,"report"],[304,"request-changes"],[305,"rocket"],[306,"root-folder"],[307,"root-folder-opened"],[308,"rss"],[309,"ruby"],[310,"run"],[311,"run-all"],[312,"save"],[313,"save-all"],[314,"save-as"],[315,"screen-full"],[316,"screen-normal"],[317,"search"],[318,"search-save"],[319,"search-stop"],[320,"selection"],[321,"server"],[322,"server-environment"],[323,"server-process"],[324,"settings"],[325,"settings-gear"],[326,"shield"],[327,"sign-in"],[328,"sign-out"],[329,"smiley"],[330,"sort-precedence"],[331,"source-control"],[332,"split-horizontal"],[333,"split-vertical"],[334,"squirrel"],[335,"star"],[336,"star-add"],[337,"star-delete"],[338,"star-empty"],[339,"star-full"],[340,"star-half"],[341,"stop"],[342,"stop-circle"],[343,"symbol-array"],[344,"symbol-boolean"],[345,"symbol-class"],[346,"symbol-color"],[347,"symbol-constant"],[348,"symbol-constructor"],[349,"symbol-enum"],[350,"symbol-enum-member"],[351,"symbol-event"],[352,"symbol-field"],[353,"symbol-file"],[354,"symbol-folder"],[355,"symbol-function"],[356,"symbol-interface"],[357,"symbol-key"],[358,"symbol-keyword"],[359,"symbol-method"],[360,"symbol-misc"],[361,"symbol-module"],[362,"symbol-namespace"],[363,"symbol-null"],[364,"symbol-number"],[365,"symbol-numeric"],[366,"symbol-object"],[367,"symbol-operator"],[368,"symbol-package"],[369,"symbol-parameter"],[370,"symbol-property"],[371,"symbol-reference"],[372,"symbol-ruler"],[373,"symbol-snippet"],[374,"symbol-string"],[375,"symbol-struct"],[376,"symbol-structure"],[377,"symbol-text"],[378,"symbol-type-parameter"],[379,"symbol-unit"],[380,"symbol-value"],[381,"symbol-variable"],[382,"sync"],[383,"sync-ignored"],[384,"tag"],[385,"tag-add"],[386,"tag-remove"],[387,"tasklist"],[388,"telescope"],[389,"terminal"],[390,"text-size"],[391,"three-bars"],[392,"thumbsdown"],[393,"thumbsup"],[394,"tools"],[395,"trash"],[396,"trashcan"],[397,"triangle-down"],[398,"triangle-left"],[399,"triangle-right"],[400,"triangle-up"],[401,"twitter"],[402,"unfold"],[403,"ungroup-by-ref-type"],[404,"unlock"],[405,"unmute"],[406,"unverified"],[407,"variable"],[408,"verified"],[409,"versions"],[410,"vm"],[411,"vm-active"],[412,"vm-connect"],[413,"vm-outline"],[414,"vm-running"],[415,"warning"],[416,"watch"],[417,"whitespace"],[418,"whole-word"],[419,"window"],[420,"word-wrap"],[421,"wrench"],[422,"wrench-subaction"],[423,"x"],[424,"zap"],[425,"zoom-in"],[426,"zoom-out"]]);let xi=(pe(t=class extends ComponentBase{constructor(e){super(e),this.addHandledProperties("disabled","src","style","height","width","color")}render(){const{disabled:e,src:t,style:n,height:i,width:o,color:s}=this.mergedProps;let r,a=this.getEffectiveClassNames(["icon",this.classFromProperty(e,"disabled")]);return"string"==typeof t?r={maskImage:`url(${t})`,WebkitMaskImage:`url(${t})`,...n,width:En(o),height:En(i),backgroundColor:s}:t&&(r=n,a+=" codicon codicon-"+Ri.get(t)),Ie("div",{className:a,style:r,...this.unhandledProperties})}},"defaultProps",{disabled:!1}),t);class Button extends ComponentBase{constructor(e){super(e),pe(this,"buttonRef"),pe(this,"dragInsideCounter",0),this.addHandledProperties("innerRef","round","orientation","imageOnly","isDefault","requestType","disabled","focusOnClick"),e.requestType&&this.connectEvents("onClick"),this.connectEvents("onMouseDown"),e.draggable&&this.connectDragEvents(),this.buttonRef=e.innerRef??ke()}componentDidMount(){var e;const{isDefault:t}=this.props;t&&(null==(e=this.buttonRef)?void 0:e.current)&&this.buttonRef.current.focus()}render(){const{children:e,caption:t,style:n,orientation:i,round:o,imageOnly:s,disabled:r}=this.mergedProps,a=this.getEffectiveClassNames(["button",this.classFromProperty(o,"round"),this.classFromProperty(s,"imageOnly"),this.classFromProperty(r,"disabled")]),l=e??t,d={...n,flexDirection:i};return Ie("div",{ref:this.buttonRef,style:d,className:a,tabIndex:0,role:"button",...this.unhandledProperties,children:l})}handleMouseEvent(e){var t,n;switch(e){case ei.Down:{const{focusOnClick:e}=this.mergedProps;e&&(null==(n=null==(t=this.buttonRef)?void 0:t.current)||n.focus());break}case ei.Click:{const{requestType:e}=this.mergedProps;if(e)return nn.execute(e,void 0),!1;break}}return!0}handleDragEvent(e,t){const n=t.currentTarget;if(!t.dataTransfer)return!0;switch(e){case ni.Start:t.dataTransfer.setData(`sourceid:${t.target.id}`,""),t.dataTransfer.effectAllowed="move",t.stopPropagation();break;case ni.Over:t.preventDefault();break;case ni.Enter:0===this.dragInsideCounter&&n.classList.add("dropTarget"),++this.dragInsideCounter,t.stopPropagation();break;case ni.Leave:--this.dragInsideCounter,0===this.dragInsideCounter&&n.classList.remove("dropTarget"),t.stopPropagation();break;case ni.Drop:this.dragInsideCounter=0,n.classList.remove("dropTarget"),t.stopPropagation(),t.preventDefault()}return!0}}class DialogContent extends ComponentBase{constructor(e){super(e),fe(this,n,ke()),pe(this,"handleCloseClick",(()=>{const{onCloseClick:e}=this.props;null==e||e()})),this.addHandledProperties("content","header","caption","actions","onCloseClick")}getSnapshotBeforeUpdate(){if(ge(this,n).current){const e=ge(this,n).current;return{scrollPosition:e.scrollHeight-e.scrollTop}}return null}componentDidUpdate(e,t,i){if(null!==i&&ge(this,n).current){const e=ge(this,n).current;e.scrollTop=e.scrollHeight-(i.scrollPosition??0)}}render(){const{children:e,content:t,header:i,caption:o,actions:s}=this.mergedProps,r=this.getEffectiveClassNames(["dialog","visible"]);let a;return a=null!=e?e:Ie(Re,{children:[o&&Ie("div",{className:"title verticalCenterContent",children:[o,Ie(Button,{id:"closeButton",imageOnly:!0,onClick:this.handleCloseClick,children:Ie(xi,{src:wi})})]}),i&&Ie("div",{className:"header",children:i}),t&&Ie("div",{ref:ge(this,n),className:"content fixedScrollbar",children:t}),s&&Ie("div",{className:"footer verticalCenterContent",children:[Ie(Container,{className:"leftItems",orientation:Di.LeftToRight,children:null==s?void 0:s.begin}),Ie(Container,{className:"rightItems",orientation:Di.RightToLeft,children:null==s?void 0:s.end})]})]}),Ie("div",{className:r,...this.unhandledProperties,children:a})}}n=new WeakMap;var Ei=(e=>(e.Start="start",e.Center="center",e.End="end",e))(Ei||{});class Label extends ComponentBase{constructor(e){super(e),pe(this,"labelRef"),this.state={},this.labelRef=e.innerRef??ke(),this.addHandledProperties("caption","textAlignment","quoted","code","heading","language","type","innerRef")}componentDidMount(){this.updateComputedOutput()}componentDidUpdate(e){const{caption:t,children:n}=this.mergedProps;t===e.caption&&n===e.children||this.updateComputedOutput()}render(){const{children:e,caption:t,textAlignment:n,quoted:i,code:o,heading:s,language:r,type:a,style:l}=this.mergedProps,{labelEntries:d}=this.state,c={...l};n&&(c.textAlign=n);const u=t||e;if("ansi"===r&&d){const e=this.getEffectiveClassNames(["resultText",this.classFromProperty(a,["error","warning","info","text","response"]),this.classFromProperty(i,"quote"),this.classFromProperty(o,"code"),this.classFromProperty(s,"heading")]);return Ie("label",{ref:this.labelRef,className:e,"data-tooltip":"expand",style:c,...this.unhandledProperties,children:d})}{const e=this.getEffectiveClassNames(["label",this.classFromProperty(i,"quote"),this.classFromProperty(o,"code"),this.classFromProperty(s,"heading")]);return Ie("label",{ref:this.labelRef,className:e,"data-tooltip":"expand","data-lang":r,style:c,...this.unhandledProperties,children:u})}}updateComputedOutput(){const{caption:e,children:t,language:n}=this.mergedProps;if("ansi"===n){const n=e||t,i=xe.ansiToJson(String(n)).map(((e,t)=>{const n={color:e.fg?`rgba(${e.fg})`:void 0,backgroundColor:e.bg?`rgba(${e.bg})`:void 0},i=new Set,o=new Set,s=new Set;e.decorations.forEach((e=>{switch(e){case"bold":n.fontWeight="bold",s.add("ansi-bold");break;case"italic":i.add("italic");break;case"underline":o.add("underline");break;case"hidden":n.display="none";break;case"strikethrough":o.add("line-through");break;case"reverse":{const e=n.color;n.color=n.backgroundColor,n.backgroundColor=e;break}case"blink":s.add("blink")}})),i.size>0&&(n.fontStyle=[...i].join(" ")),o.size>0&&(n.textDecoration=[...o].join(" "));let r="";return s.size>0&&(r=[...s].join(" ")),Ie("span",{className:r||void 0,style:n,children:e.content},t)}));this.setState({labelEntries:i})}else n&&"text"!==n&&this.labelRef.current&&Gt.colorizeElement(this.labelRef.current,{theme:mi.get.activeThemeSafe,tabSize:4})}}class SelectorItem extends ComponentBase{constructor(e){super(e),pe(this,"dragInsideCounter",0),this.addHandledProperties("selected","disabled","orientation","caption","image","auxillary","type","innerRef"),e.draggable&&this.connectDragEvents()}render(){const{selected:e,disabled:t,type:n,innerRef:i,orientation:o,image:s,caption:r,tooltip:a,auxillary:l}=this.mergedProps,d=this.getEffectiveClassNames(["selectorItem",this.classFromProperty(e,"selected"),this.classFromProperty(t,"disabled"),this.classFromProperty(null!=l,"hasAuxillary"),n]);return Ie(Container,{innerRef:i,className:d,orientation:o,mainAlignment:ki.Center,crossAlignment:ki.Center,"data-tooltip":a,...this.unhandledProperties,children:[s&&Ie(xi,{src:s,"data-tooltip":"inherit"}),r&&Ie(Label,{"data-tooltip":"inherit",children:r}),l&&Ie("span",{id:"auxillary",children:l})]})}handleDragEvent(e,t){var n;const i=t.currentTarget;switch(e){case ni.Start:null==(n=t.dataTransfer)||n.setData("sourceid",t.target.id),t.stopPropagation();break;case ni.Over:t.preventDefault();break;case ni.Enter:0===this.dragInsideCounter&&i.classList.add("dropTarget"),++this.dragInsideCounter,t.stopPropagation();break;case ni.Leave:--this.dragInsideCounter,0===this.dragInsideCounter&&i.classList.remove("dropTarget"),t.stopPropagation();break;case ni.Drop:this.dragInsideCounter=0,i.classList.remove("dropTarget"),t.stopPropagation(),t.preventDefault()}return!0}}pe(SelectorItem,"defaultProps",{disabled:!1,orientation:Di.LeftToRight,type:"normal"});class Selector extends ComponentBase{constructor(e){super(e),pe(this,"containerRef",ke()),pe(this,"stepUpRef",ke()),pe(this,"stepDownRef",ke()),pe(this,"activeItemRef",ke()),pe(this,"dragInsideCounter",0),pe(this,"handleItemClick",((e,t,n)=>{const{onSelect:i}=this.mergedProps;null==i||i(n.id??""),null==e||e(t,n)})),pe(this,"handleItemDrop",((e,t,n)=>{const{onDrop:i}=this.mergedProps;null==i||i(t,n),null==e||e(t,n)})),pe(this,"handleNavigationClick",((e,t)=>{var n,i,o,s;const{wrapNavigation:r,onSelect:a}=this.mergedProps;let l=e.currentTarget;l="stepDown"===t.type?!this.activeItemRef.current||this.firstItemActive&&r?null==(i=null==(n=l.parentElement)?void 0:n.lastElementChild)?void 0:i.previousElementSibling:this.activeItemRef.current.previousElementSibling:!this.activeItemRef.current||this.lastItemActive&&r?null==(s=null==(o=l.parentElement)?void 0:o.firstElementChild)?void 0:s.nextElementSibling:this.activeItemRef.current.nextElementSibling,l!==e.currentTarget&&(this.setState({activeItem:l}),null==a||a(null==l?void 0:l.id))})),pe(this,"handleResize",(()=>{this.scrollActiveItemIntoView(),this.autoHideNavButtons()})),this.addHandledProperties("orientation","entryOrientation","items","smoothScroll","wrapNavigation","activeItemId"),this.connectDragEvents()}componentDidMount(){this.handleResize()}componentDidUpdate(){this.scrollActiveItemIntoView(),this.autoHideNavButtons()}render(){const{id:e,children:t,smoothScroll:n,items:i,orientation:o,entryOrientation:s,activeItemId:r}=this.mergedProps,a=this.getEffectiveClassNames(["selector",this.classFromProperty(this.isHorizontal,["vertical","horizontal"]),this.classFromProperty(n,"smoothScroll")]),l=(e??"selector")+"Item";let d=t;if(null==d)d=null==i?void 0:i.map(((e,t)=>{const n=e.id??`${l}${t}`,i=r===n;return Ie(SelectorItem,{innerRef:i?this.activeItemRef:void 0,id:n,caption:e.caption,tooltip:e.tooltip,image:e.icon,auxillary:e.auxillary,selected:i,orientation:s,draggable:e.canReorder,onClick:this.handleItemClick.bind(this,void 0),onDrop:this.handleItemDrop.bind(this,void 0)},n)}));else{d=yi(t).map(((e,t)=>{const{id:n=`${l}${t}`,onClick:i,onDrop:o}=e.props;return Te(e,{id:n,key:n,onClick:this.handleItemClick.bind(this,i),onDrop:this.handleItemDrop.bind(this,o)})}))}return Ie(Container,{innerRef:this.containerRef,orientation:o,className:a,...this.unhandledProperties,children:[Ie(SelectorItem,{innerRef:this.stepDownRef,id:l+"stepDown",type:"stepDown",onClick:this.handleNavigationClick}),d,Ie(SelectorItem,{innerRef:this.stepUpRef,id:l+"stepUp",type:"stepUp",onClick:this.handleNavigationClick})]})}handleDragEvent(e,t){const n=t.currentTarget;switch(e){case ni.Over:t.preventDefault();break;case ni.Enter:0===this.dragInsideCounter&&n.classList.add("dropTarget"),++this.dragInsideCounter,t.stopPropagation();break;case ni.Leave:--this.dragInsideCounter,0===this.dragInsideCounter&&n.classList.remove("dropTarget"),t.stopPropagation();break;case ni.Drop:this.dragInsideCounter=0,n.classList.remove("dropTarget"),t.preventDefault()}return!0}get isHorizontal(){const{orientation:e}=this.mergedProps;return e===Di.LeftToRight||e===Di.RightToLeft}get requiresScrolling(){return!(!this.containerRef.current||this.containerRef.current.children.length<3)&&(this.isHorizontal?this.containerRef.current.scrollWidth>this.containerRef.current.clientWidth:this.containerRef.current.scrollHeight>this.containerRef.current.clientHeight)}scrollActiveItemIntoView(){var e;if(!this.requiresScrolling||!this.containerRef.current||!this.activeItemRef.current)return;const t="none"!==(null==(e=this.stepUpRef.current)?void 0:e.style.display)?this.stepUpRef.current:this.stepDownRef.current,n=this.isHorizontal?null==t?void 0:t.clientWidth:null==t?void 0:t.clientHeight,i=this.activeItemRef.current,o=i.parentElement;if(o&&n)if(this.isHorizontal){const e=null==i?void 0:i.offsetLeft,t=o.scrollLeft;e-t<n&&(o.scrollLeft+=e-t-n);const s=e+i.clientWidth-t,r=o.clientWidth;s>r-n&&(o.scrollLeft+=s-(r-n))}else{const e=null==i?void 0:i.offsetTop,t=o.scrollTop;e-t<n&&(o.scrollTop+=e-t-n);const s=e+i.clientHeight-t,r=o.clientHeight;s>r-n&&(o.scrollTop+=s-(r-n))}}get firstItemActive(){var e;if(!this.stepDownRef.current)return!1;const t=null==(e=this.stepDownRef.current)?void 0:e.nextElementSibling;return this.activeItemRef.current===t}get lastItemActive(){var e;if(!this.stepUpRef.current)return!1;const t=null==(e=this.stepUpRef.current)?void 0:e.previousElementSibling;return this.activeItemRef.current===t}autoHideNavButtons(){var e,t;if(!this.stepDownRef.current||!this.stepUpRef.current)return;const{wrapNavigation:n}=this.mergedProps;if(this.requiresScrolling){if(!n){const n=this.stepDownRef.current.parentElement,i=null==(e=this.stepDownRef.current)?void 0:e.nextElementSibling,o=null==(t=this.stepUpRef.current)?void 0:t.previousElementSibling;if(n)if(this.isHorizontal){const e=n.scrollLeft;let t=i.offsetLeft;this.stepDownRef.current.style.display=t-e>=0?"none":"inherit";const s=n.offsetWidth;t=o.offsetLeft;const r=o.offsetWidth;this.stepUpRef.current.style.display=t+r-e<=s?"none":"inherit"}else{const e=n.scrollTop;let t=i.offsetTop;this.stepDownRef.current.style.display=t-e>=0?"none":"inherit";const s=n.offsetHeight;t=o.offsetTop;const r=o.offsetHeight;this.stepUpRef.current.style.display=t+r-e<=s?"none":"inherit"}}}else this.stepDownRef.current.style.display="none",this.stepUpRef.current.style.display="none"}}pe(Selector,"defaultProps",{orientation:Di.LeftToRight,entryOrientation:Di.TopDown,smoothScroll:!1,wrapNavigation:!0,activeItemId:""});class ActivityBar extends ComponentBase{constructor(e){super(e),this.addHandledProperties("borderWidth","style")}render(){const{borderWidth:e,children:t,style:n}=this.mergedProps,i=this.getEffectiveClassNames(["activityBar"]),o={...n,"--borderWidth":`${e||0}px`};return Ie(Selector,{className:i,orientation:Di.TopDown,style:o,...this.unhandledProperties,children:t})}}class ActivityBarItem extends ComponentBase{constructor(e){super(e),this.addHandledProperties("active","expand","title","image")}render(){const{active:e,expand:t,caption:n,image:i}=this.mergedProps,o=this.getEffectiveClassNames(["activityBarItem",this.classFromProperty(e,"active"),this.classFromProperty(t,"expanded")]);return Ie(Container,{className:o,role:"button",orientation:Di.TopDown,crossAlignment:ki.Center,...this.unhandledProperties,children:[i&&Ie(xi,{src:i,"data-tooltip":"inherit"}),n&&Ie(Label,{"data-tooltip":"inherit",children:n})]})}}pe(ActivityBarItem,"defaultProps",{active:!1,disabled:!1,expand:!1});class Grid extends ComponentBase{constructor(e){super(e),this.addHandledProperties("rowGap","columnGap","equalHeight","columns","style","innerRef")}render(){const{children:e,rowGap:t,columnGap:n,equalHeight:i,columns:o,style:s,innerRef:r}=this.mergedProps,a=this.getEffectiveClassNames(["grid",this.classFromProperty(i,"equalHeight")]);let l;if("number"==typeof o)l=`repeat(${o}, 1fr)`;else{l=o.map((e=>En(e))).join(" ")}const d={...s,gridTemplateColumns:l,rowGap:En(t),columnGap:En(n)};return Ie("div",{ref:r,className:a,style:d,...this.unhandledProperties,children:e})}}class GridCell extends ComponentBase{constructor(e){super(e),this.addHandledProperties("columnSpan","rowSpan","orientation","mainAlignment","crossAlignment","style")}render(){const{style:e={},columnSpan:t,rowSpan:n,orientation:i,mainAlignment:o,crossAlignment:s,children:r}=this.mergedProps;n&&(e.gridRow=`span ${n}`),t&&(e.gridColumn=`span ${t}`);const a=this.getEffectiveClassNames(["gridCell"]),l={};return l.mainAlignment=o,l.crossAlignment=s,l.orientation=i,Ie(Container,{className:a,style:e,...l,...this.unhandledProperties,children:r})}}const Mi=class _SymbolGrid extends ComponentBase{render(){const e=_SymbolGrid.iconNames.map(((e,t)=>{let n=e;return"parameter"===e&&(n="type-parameter"),Ie(GridCell,{className:"symbol",orientation:Di.LeftToRight,children:[Ie("span",{className:"codicon codicon-symbol-"+n}),Ie(Label,{children:e})]},`symbol${t}`)}));return Ie(Grid,{id:"symbols",columns:5,rowGap:10,columnGap:10,children:e})}};pe(Mi,"iconNames",["array","boolean","class","color","constant","constructor","enum","enum-member","event","field","file","folder","function","interface","key","keyword","method","module","namespace","null","number","object","operator","package","property","reference","snippet","string","struct","text","parameter","unit","variable"]);let Pi=Mi;self.MonacoEnvironment={getWorker:(e,t)=>{switch(t){case"json":return new Ht;case"css":case"scss":case"less":return new zt;case"html":case"handlebars":case"razor":return new Vt;case"typescript":case"javascript":return new qt;default:return new Ut}}},jt.typescript.typescriptDefaults.setEagerModelSync(!0);var Li=(e=>(e[e.Standard=0]="Standard",e[e.Terminal=1]="Terminal",e))(Li||{});const Fi=["keyword","identifier","operator","delimiter","markup","number","string","comment","regexp","support","entity","type","operator","namespace","struct","class","interface","enum","typeParameter","function","member","macro","variable","parameter","property","label","command"],Ai=["other","bracket","square","parenthesis","float","hex","octal","binary","regexp","escape","invalid","control","line","block","doc","quoted","single","double","function","variable","user","system","entity","name","identifier","language","predefined","angle","sql","js","ts","py"];var Bi=(e=>(e.Unused="unused",e.DbEditor="dbModuleResultData",e.Shell="shellModuleResultData",e))(Bi||{});const Ni=class _ApplicationDB{static get db(){return _ApplicationDB.appDB}constructor(){}static async cleanUp(){await _ApplicationDB.loaded,_ApplicationDB.appDB.close(),Ee(_ApplicationDB.dbName)}static async removeDataByTabId(e,t){await _ApplicationDB.loaded;const n=_ApplicationDB.appDB.transaction(e,"readwrite").store.index("tabIndex");let i=await n.openCursor(IDBKeyRange.only(t));for(;i;)await i.delete(),i=await i.continue()}static async removeDataByResultIds(e,t){if(await _ApplicationDB.loaded,t.length>0){const n=_ApplicationDB.appDB.transaction(e,"readwrite");for(const e of t)if(e){const t=n.store.index("resultIndex");let i=await t.openCursor(IDBKeyRange.only(e));for(;i;)await i.delete(),i=await i.continue()}}}static async initialize(e=!0){return new Promise(((t,n)=>{Me(_ApplicationDB.dbName,_ApplicationDB.dbVersion,{upgrade:e=>{e.objectStoreNames.contains("dbModuleResultData")&&e.deleteObjectStore("dbModuleResultData"),e.objectStoreNames.contains("shellModuleResultData")&&e.deleteObjectStore("shellModuleResultData");const t=e.createObjectStore("dbModuleResultData",{autoIncrement:!0});t.createIndex("resultIndex","resultId",{unique:!1}),t.createIndex("tabIndex","tabId",{unique:!1});const n=e.createObjectStore("shellModuleResultData",{autoIncrement:!0});n.createIndex("resultIndex","resultId",{unique:!1}),n.createIndex("tabIndex","tabId",{unique:!1})}}).then((i=>{_ApplicationDB.appDB=i,e?Promise.all([i.clear("dbModuleResultData"),i.clear("shellModuleResultData")]).then((()=>{t()})).catch((e=>{n(e)})):t()})).catch((e=>{nn.execute("showError",["IndexedDB Error",String(e)]),n(e)}))}))}};pe(Ni,"loaded"),pe(Ni,"dbVersion",1),pe(Ni,"appDB"),pe(Ni,"dbName","msg:"+an());let Oi=Ni;Oi.loaded=Oi.initialize();const _i={maximumIdentifierLength:64,supportCatalogs:!1,characterSets:new Map,dataTypes:new Map},Gi={maximumIdentifierLength:64,supportCatalogs:!1,characterSets:new Map,dataTypes:new Map};var Ui=(e=>(e[e.Unknown=0]="Unknown",e[e.TinyInt=1]="TinyInt",e[e.SmallInt=2]="SmallInt",e[e.MediumInt=3]="MediumInt",e[e.Int=4]="Int",e[e.Bigint=5]="Bigint",e[e.UInteger=6]="UInteger",e[e.Float=7]="Float",e[e.Real=8]="Real",e[e.Double=9]="Double",e[e.Decimal=10]="Decimal",e[e.Binary=11]="Binary",e[e.Varbinary=12]="Varbinary",e[e.Char=13]="Char",e[e.Nchar=14]="Nchar",e[e.Varchar=15]="Varchar",e[e.Nvarchar=16]="Nvarchar",e[e.String=17]="String",e[e.TinyText=18]="TinyText",e[e.Text=19]="Text",e[e.MediumText=20]="MediumText",e[e.LongText=21]="LongText",e[e.TinyBlob=22]="TinyBlob",e[e.Blob=23]="Blob",e[e.MediumBlob=24]="MediumBlob",e[e.LongBlob=25]="LongBlob",e[e.DateTime=26]="DateTime",e[e.DateTime_f=27]="DateTime_f",e[e.Date=28]="Date",e[e.Time=29]="Time",e[e.Time_f=30]="Time_f",e[e.Year=31]="Year",e[e.Timestamp=32]="Timestamp",e[e.Timestamp_f=33]="Timestamp_f",e[e.Geometry=34]="Geometry",e[e.Point=35]="Point",e[e.LineString=36]="LineString",e[e.Polygon=37]="Polygon",e[e.GeometryCollection=38]="GeometryCollection",e[e.MultiPoint=39]="MultiPoint",e[e.MultiLineString=40]="MultiLineString",e[e.MultiPolygon=41]="MultiPolygon",e[e.Numeric=42]="Numeric",e[e.Json=43]="Json",e[e.Bit=44]="Bit",e[e.Boolean=45]="Boolean",e[e.Enum=46]="Enum",e[e.Set=47]="Set",e))(Ui||{}),qi=(e=>(e[e.None=0]="None",e[e.One=1]="One",e[e.OneOrZero=2]="OneOrZero",e[e.Two=3]="Two",e[e.TwoOrOne=4]="TwoOrOne",e[e.TwoOrZero=5]="TwoOrZero",e[e.TwoOrOneOrZero=6]="TwoOrOneOrZero",e[e.List=10]="List",e))(qi||{});const Vi=/((mysql(x)?):\/\/)?([\w.\-~!$&'()*+,;=%]+)(:([\w.\-~!$&'()*+,;=%]*))?(@)([\w.\-~!$&'()*+,;=]+)(:(\d+))?/g;var zi=(e=>(e[e.Error=0]="Error",e[e.Warning=1]="Warning",e[e.Info=2]="Info",e[e.Text=3]="Text",e[e.Response=4]="Response",e))(zi||{}),Hi=(e=>(e[e.Prompt=0]="Prompt",e[e.Confirm=1]="Confirm",e[e.Select=2]="Select",e))(Hi||{}),ji=(e=>(e[e.MrsService=10]="MrsService",e[e.MrsAuthenticationApp=11]="MrsAuthenticationApp",e[e.MrsUser=12]="MrsUser",e[e.MrsSchema=13]="MrsSchema",e[e.MrsDbObject=14]="MrsDbObject",e[e.MrsContentSet=15]="MrsContentSet",e[e.MrsSdkExport=16]="MrsSdkExport",e))(ji||{}),Wi=(e=>(e[e.MdsHeatWaveCluster=20]="MdsHeatWaveCluster",e[e.MdsHeatWaveLoadData=21]="MdsHeatWaveLoadData",e[e.MdsEndpoint=22]="MdsEndpoint",e))(Wi||{}),$i=(e=>(e[e.Accept=0]="Accept",e[e.Decline=1]="Decline",e[e.Alternative=2]="Alternative",e[e.Cancel=3]="Cancel",e))($i||{}),Ki=(e=>(e.MySQL="MySQL",e.Sqlite="Sqlite",e))(Ki||{});const Qi=(e,t,n)=>{if(!t)return[];const i=e===Ki.MySQL?_i.dataTypes:Gi.dataTypes;return t.map(((e,t)=>{let o;if("bytes"===e.type.toLowerCase())o=e.length<256?Ui.Binary:Ui.Blob;else{const t=i.get(e.type.toLowerCase());o=t?t.type:Ui.Unknown}return{title:e.name,field:n?e.name:String(t),dataType:{type:o}}}))},Yi=(e,t)=>{if(!t||0===t.length)return[];if(Array.isArray(t[0])){const n=[];return t.forEach((t=>{const i={},o=t;e.forEach(((e,t)=>{i[e.field]=o[t]})),n.push(i)})),n}return t};var Ji=(e=>(e[e.Unknown=0]="Unknown",e[e.Ambiguous=1]="Ambiguous",e[e.AlterDatabase=2]="AlterDatabase",e[e.AlterLogFileGroup=3]="AlterLogFileGroup",e[e.AlterFunction=4]="AlterFunction",e[e.AlterProcedure=5]="AlterProcedure",e[e.AlterServer=6]="AlterServer",e[e.AlterTable=7]="AlterTable",e[e.AlterTableSpace=8]="AlterTableSpace",e[e.AlterEvent=9]="AlterEvent",e[e.AlterView=10]="AlterView",e[e.CreateTable=11]="CreateTable",e[e.CreateVirtualTable=12]="CreateVirtualTable",e[e.CreateIndex=13]="CreateIndex",e[e.CreateDatabase=14]="CreateDatabase",e[e.CreateEvent=15]="CreateEvent",e[e.CreateView=16]="CreateView",e[e.CreateRoutine=17]="CreateRoutine",e[e.CreateProcedure=18]="CreateProcedure",e[e.CreateFunction=19]="CreateFunction",e[e.CreateUdf=20]="CreateUdf",e[e.CreateTrigger=21]="CreateTrigger",e[e.CreateLogFileGroup=22]="CreateLogFileGroup",e[e.CreateServer=23]="CreateServer",e[e.CreateTableSpace=24]="CreateTableSpace",e[e.DropDatabase=25]="DropDatabase",e[e.DropEvent=26]="DropEvent",e[e.DropFunction=27]="DropFunction",e[e.DropProcedure=28]="DropProcedure",e[e.DropIndex=29]="DropIndex",e[e.DropLogfileGroup=30]="DropLogfileGroup",e[e.DropServer=31]="DropServer",e[e.DropTable=32]="DropTable",e[e.DropTablespace=33]="DropTablespace",e[e.DropTrigger=34]="DropTrigger",e[e.DropView=35]="DropView",e[e.RenameTable=36]="RenameTable",e[e.TruncateTable=37]="TruncateTable",e[e.Call=38]="Call",e[e.Delete=39]="Delete",e[e.Do=40]="Do",e[e.Handler=41]="Handler",e[e.Insert=42]="Insert",e[e.LoadData=43]="LoadData",e[e.LoadXML=44]="LoadXML",e[e.Replace=45]="Replace",e[e.Select=46]="Select",e[e.Table=47]="Table",e[e.Values=48]="Values",e[e.Update=49]="Update",e[e.StartTransaction=50]="StartTransaction",e[e.BeginWork=51]="BeginWork",e[e.Commit=52]="Commit",e[e.RollbackWork=53]="RollbackWork",e[e.SetAutoCommit=54]="SetAutoCommit",e[e.SetTransaction=55]="SetTransaction",e[e.SavePoint=56]="SavePoint",e[e.ReleaseSavePoint=57]="ReleaseSavePoint",e[e.RollbackSavePoint=58]="RollbackSavePoint",e[e.Lock=59]="Lock",e[e.Unlock=60]="Unlock",e[e.XA=61]="XA",e[e.Purge=62]="Purge",e[e.ChangeMaster=63]="ChangeMaster",e[e.Reset=64]="Reset",e[e.ResetMaster=65]="ResetMaster",e[e.ResetSlave=66]="ResetSlave",e[e.StartSlave=67]="StartSlave",e[e.StopSlave=68]="StopSlave",e[e.LoadDataMaster=69]="LoadDataMaster",e[e.LoadTableMaster=70]="LoadTableMaster",e[e.Prepare=71]="Prepare",e[e.Execute=72]="Execute",e[e.Deallocate=73]="Deallocate",e[e.AlterUser=74]="AlterUser",e[e.CreateUser=75]="CreateUser",e[e.DropUser=76]="DropUser",e[e.GrantProxy=77]="GrantProxy",e[e.Grant=78]="Grant",e[e.RenameUser=79]="RenameUser",e[e.RevokeProxy=80]="RevokeProxy",e[e.Revoke=81]="Revoke",e[e.AnalyzeTable=82]="AnalyzeTable",e[e.CheckTable=83]="CheckTable",e[e.ChecksumTable=84]="ChecksumTable",e[e.OptimizeTable=85]="OptimizeTable",e[e.RepairTable=86]="RepairTable",e[e.BackUpTable=87]="BackUpTable",e[e.RestoreTable=88]="RestoreTable",e[e.InstallPlugin=89]="InstallPlugin",e[e.UninstallPlugin=90]="UninstallPlugin",e[e.Set=91]="Set",e[e.SetPassword=92]="SetPassword",e[e.Show=93]="Show",e[e.ShowBinaryLogs=94]="ShowBinaryLogs",e[e.ShowBinLogEvents=95]="ShowBinLogEvents",e[e.ShowRelayLogEvents=96]="ShowRelayLogEvents",e[e.ShowCharset=97]="ShowCharset",e[e.ShowCollation=98]="ShowCollation",e[e.ShowColumns=99]="ShowColumns",e[e.ShowCreateDatabase=100]="ShowCreateDatabase",e[e.ShowCreateEvent=101]="ShowCreateEvent",e[e.ShowCreateFunction=102]="ShowCreateFunction",e[e.ShowCreateProcedure=103]="ShowCreateProcedure",e[e.ShowCreateTable=104]="ShowCreateTable",e[e.ShowCreateTrigger=105]="ShowCreateTrigger",e[e.ShowCreateView=106]="ShowCreateView",e[e.ShowDatabases=107]="ShowDatabases",e[e.ShowEngineStatus=108]="ShowEngineStatus",e[e.ShowStorageEngines=109]="ShowStorageEngines",e[e.ShowErrors=110]="ShowErrors",e[e.ShowEvents=111]="ShowEvents",e[e.ShowFunctionCode=112]="ShowFunctionCode",e[e.ShowFunctionStatus=113]="ShowFunctionStatus",e[e.ShowGrants=114]="ShowGrants",e[e.ShowIndexes=115]="ShowIndexes",e[e.ShowMasterStatus=116]="ShowMasterStatus",e[e.ShowOpenTables=117]="ShowOpenTables",e[e.ShowPlugins=118]="ShowPlugins",e[e.ShowProcedureStatus=119]="ShowProcedureStatus",e[e.ShowProcedureCode=120]="ShowProcedureCode",e[e.ShowPrivileges=121]="ShowPrivileges",e[e.ShowProcessList=122]="ShowProcessList",e[e.ShowProfile=123]="ShowProfile",e[e.ShowProfiles=124]="ShowProfiles",e[e.ShowSlaveHosts=125]="ShowSlaveHosts",e[e.ShowSlaveStatus=126]="ShowSlaveStatus",e[e.ShowStatus=127]="ShowStatus",e[e.ShowVariables=128]="ShowVariables",e[e.ShowTableStatus=129]="ShowTableStatus",e[e.ShowTables=130]="ShowTables",e[e.ShowTriggers=131]="ShowTriggers",e[e.ShowWarnings=132]="ShowWarnings",e[e.CacheIndex=133]="CacheIndex",e[e.Flush=134]="Flush",e[e.Kill=135]="Kill",e[e.LoadIndex=136]="LoadIndex",e[e.Attach=137]="Attach",e[e.Detach=138]="Detach",e[e.Pragma=139]="Pragma",e[e.ReIndex=140]="ReIndex",e[e.Vacuum=141]="Vacuum",e[e.ExplainTable=142]="ExplainTable",e[e.ExplainStatement=143]="ExplainStatement",e[e.Help=144]="Help",e[e.Use=145]="Use",e[e.Sentinel=146]="Sentinel",e[e.Rest=147]="Rest",e[e.RestUse=148]="RestUse",e[e.RestShow=149]="RestShow",e))(Ji||{}),Xi=(e=>(e[e.Complete=0]="Complete",e[e.OpenComment=1]="OpenComment",e[e.OpenString=2]="OpenString",e[e.NoDelimiter=3]="NoDelimiter",e[e.DelimiterChange=4]="DelimiterChange",e))(Xi||{}),Zi=(e=>(e[e.Unknown=0]="Unknown",e[e.Catalog=1]="Catalog",e[e.Keyword=2]="Keyword",e[e.Schema=3]="Schema",e[e.Table=4]="Table",e[e.Procedure=5]="Procedure",e[e.Function=6]="Function",e[e.Udf=7]="Udf",e[e.View=8]="View",e[e.Column=9]="Column",e[e.PrimaryKey=10]="PrimaryKey",e[e.ForeignKey=11]="ForeignKey",e[e.Operator=12]="Operator",e[e.Engine=13]="Engine",e[e.Trigger=14]="Trigger",e[e.LogfileGroup=15]="LogfileGroup",e[e.UserVariable=16]="UserVariable",e[e.Tablespace=17]="Tablespace",e[e.Event=18]="Event",e[e.Index=19]="Index",e[e.User=20]="User",e[e.Charset=21]="Charset",e[e.Collation=22]="Collation",e[e.Plugin=23]="Plugin",e[e.SystemVariable=24]="SystemVariable",e[e.SystemFunction=25]="SystemFunction",e))(Zi||{}),eo=(e=>(e[e.Warning=0]="Warning",e[e.Error=1]="Error",e[e.Suggestion=2]="Suggestion",e[e.Message=3]="Message",e))(eo||{}),to=(e=>(e[e.MySQL=0]="MySQL",e[e.Sqlite=1]="Sqlite",e))(to||{}),no=(e=>(e[e.Keyword=0]="Keyword",e[e.Schema=1]="Schema",e[e.Table=2]="Table",e[e.View=3]="View",e[e.Index=4]="Index",e[e.Column=5]="Column",e[e.Label=6]="Label",e[e.SystemFunction=7]="SystemFunction",e[e.Function=8]="Function",e[e.Procedure=9]="Procedure",e[e.Udf=10]="Udf",e[e.Engine=11]="Engine",e[e.Tablespace=12]="Tablespace",e[e.UserVariable=13]="UserVariable",e[e.SystemVariable=14]="SystemVariable",e[e.Charset=15]="Charset",e[e.Collation=16]="Collation",e[e.Event=17]="Event",e[e.User=18]="User",e[e.Trigger=19]="Trigger",e[e.LogfileGroup=20]="LogfileGroup",e[e.Plugin=21]="Plugin",e))(no||{});class SchemaSymbol extends Be{async getAllSymbols(e){let t=await super.getAllSymbols(e,!0);if(0===t.length&&this.symbolTable instanceof oo){const n=oo.getKindFromSymbol(e);await this.symbolTable.loadSymbolsOfKind(this,n),t=await super.getAllSymbols(e,!0)}return t}}class TableSymbol extends Be{async getAllSymbols(e){let t=await super.getAllSymbols(e,!0);return 0===t.length&&this.symbolTable instanceof oo&&"ColumnSymbol"===e.name&&(await this.symbolTable.loadSymbolsOfKind(this,Zi.Column),t=await super.getAllSymbols(e,!0)),t}}class ViewSymbol extends Be{}class EventSymbol extends Be{}class ColumnSymbol extends Ne{}class UserSymbol extends Ne{}class IndexSymbol extends Le{}class ForeignKeySymbol extends Le{}class StoredProcedureSymbol extends Oe{}class StoredFunctionSymbol extends Oe{}class TriggerSymbol extends Be{}class UdfSymbol extends Le{}class EngineSymbol extends Le{}class LabelSymbol extends Le{}class PluginSymbol extends Le{}class TablespaceSymbol extends Le{}class LogfileGroupSymbol extends Le{}class CharsetSymbol extends Le{}class CollationSymbol extends Le{}class PrimaryKeySymbol extends Le{}class UserVariableSymbol extends _e{}class SystemVariableSymbol extends Le{constructor(e,t){super(e),this.description=t}}class SystemFunctionSymbol extends Le{constructor(e,t){super(e),this.description=t}}const io=class _DBSymbolTable extends Pe{constructor(){super(...arguments),pe(this,"tree"),pe(this,"symbolReferences",new Map)}static getKindFromSymbol(e){return this.symbolToKindMap.get(e)??Zi.Unknown}clear(){this.symbolReferences.clear(),super.clear()}symbolExists(e,t,n){return void 0!==this.getSymbolOfKind(e,t,n)}async contextForSymbol(e,t,n){const i=await this.getSymbolOfKind(e,t,n);if(i)return i.context}async getSymbolInfo(e){let t;if(e instanceof Le)t=e;else{const n=await this.resolve(e);if(!n)return;t=n}return{kind:_DBSymbolTable.getKindFromSymbol(t.constructor),name:t.name,source:"Embedded",definition:this.definitionForContext(t.context,!0),description:"description"in t?t.description:void 0}}definitionForContext(e,t){var n,i,o;if(!e)return;const s={text:"",span:{start:0,length:0}};if(e instanceof Fe?(s.span={start:e.start.start,length:e.stop.stop-e.stop.start+1},s.text=(null==(o=null==(i=null==(n=e.start)?void 0:n.getTokenSource())?void 0:i.inputStream)?void 0:o.getText(e.start.start,e.stop.stop))??""):e instanceof Ae&&(s.text=e.getText(),s.span={start:e.symbol.start,length:e.symbol.stop-e.symbol.start+1}),t||s.text.length<2)return s;const r=s.text[0];return'"'!==r&&"`"!==r&&"'"!==r||r!==s.text[s.text.length-1]||(s.text=s.text.substr(1,s.text.length-2)),s}loadSymbolsOfKind(e,t){return Promise.resolve()}getSymbolOfKind(e,t,n){return t===Zi.Unknown?Promise.resolve(void 0):this.resolve(e,n)}};pe(io,"symbolToKindMap",new Map([[class CatalogSymbol extends Be{},Zi.Catalog],[SchemaSymbol,Zi.Schema],[TableSymbol,Zi.Table],[ViewSymbol,Zi.View],[EventSymbol,Zi.Event],[ColumnSymbol,Zi.Column],[IndexSymbol,Zi.Index],[PrimaryKeySymbol,Zi.PrimaryKey],[ForeignKeySymbol,Zi.ForeignKey],[StoredProcedureSymbol,Zi.Procedure],[StoredFunctionSymbol,Zi.Function],[TriggerSymbol,Zi.Trigger],[UdfSymbol,Zi.Udf],[EngineSymbol,Zi.Engine],[TablespaceSymbol,Zi.Tablespace],[LogfileGroupSymbol,Zi.LogfileGroup],[CharsetSymbol,Zi.Charset],[CollationSymbol,Zi.Collation],[UserVariableSymbol,Zi.UserVariable],[UserSymbol,Zi.User],[PluginSymbol,Zi.Plugin],[SystemVariableSymbol,Zi.SystemVariable],[SystemFunctionSymbol,Zi.SystemFunction]]));let oo=io;const so=new Map([[no.Keyword,jt.CompletionItemKind.Keyword],[no.Schema,jt.CompletionItemKind.Struct],[no.Table,jt.CompletionItemKind.Constant],[no.View,jt.CompletionItemKind.Constant],[no.Index,jt.CompletionItemKind.Field],[no.Column,jt.CompletionItemKind.Field],[no.Label,jt.CompletionItemKind.Text],[no.SystemFunction,jt.CompletionItemKind.Function],[no.Function,jt.CompletionItemKind.Function],[no.Procedure,jt.CompletionItemKind.Function],[no.Udf,jt.CompletionItemKind.Function],[no.Engine,jt.CompletionItemKind.File],[no.Tablespace,jt.CompletionItemKind.File],[no.UserVariable,jt.CompletionItemKind.Variable],[no.SystemVariable,jt.CompletionItemKind.Variable],[no.Charset,jt.CompletionItemKind.Enum],[no.Collation,jt.CompletionItemKind.Enum],[no.Event,jt.CompletionItemKind.Event],[no.User,jt.CompletionItemKind.User],[no.Trigger,jt.CompletionItemKind.Interface],[no.LogfileGroup,jt.CompletionItemKind.File],[no.Plugin,jt.CompletionItemKind.Module]]);var ro=(e=>(e.Idle="idle",e.Pending="pending",e.Waiting="waiting",e.Loading="loading",e))(ro||{});const ao="schemas";class RdbmsLanguageService{constructor(e,t,n){pe(this,"localSymbols"),pe(this,"sortKeys",new Map([[no.Keyword,"01."],[no.Column,"02."],[no.UserVariable,"03."],[no.Label,"04."],[no.Table,"05."],[no.View,"06."],[no.Schema,"07."],[no.Function,"08."],[no.Procedure,"09."],[no.Udf,"10."],[no.Trigger,"11."],[no.Index,"12."],[no.Event,"13."],[no.User,"14."],[no.Engine,"15."],[no.Plugin,"16."],[no.LogfileGroup,"17."],[no.Tablespace,"18."],[no.Charset,"19."],[no.Collation,"20."],[no.SystemFunction,"21."],[no.SystemVariable,"22."]])),pe(this,"descriptionMap",new Map([[no.Keyword,"Keyword"],[no.Column,"Column"],[no.UserVariable,"User Variable"],[no.Label,"Label"],[no.Table,"Table"],[no.View,"View"],[no.Schema,"Schema"],[no.Function,"Stored Function"],[no.Procedure,"Stored Procedure"],[no.Udf,"User Defined Function"],[no.Trigger,"Trigger"],[no.Index,"Index"],[no.Event,"Event"],[no.User,"Uer"],[no.Engine,"Table Engine"],[no.Plugin,"Server Plugin"],[no.LogfileGroup,"Logfile Group"],[no.Tablespace,"Tablespace"],[no.Charset,"Charset"],[no.Collation,"Collation"],[no.SystemFunction,"System Function"],[no.SystemVariable,"System Variable"]])),pe(this,"loadedSchemaTables",new Set),pe(this,"transformCompletionItems",(async(e,t)=>{const n=[],i=hi.get("dbEditor.upperCaseKeywords",!0);let o=this.sortKeys.get(no.Keyword);e.keywords.forEach((e=>{i||(e=e.toLowerCase()),n.push({label:e,kind:so.get(no.Keyword),range:t,insertText:e,sortText:o+e,documentation:"Keyword"})})),o=this.sortKeys.get(no.Function),e.functions.forEach((e=>{e=e.toLowerCase(),n.push({label:e,kind:so.get(no.Keyword),range:t,insertText:e,sortText:o+e,documentation:"Function"})}));const s=[],r=e=>s.findIndex((t=>pn(t,e)))>-1;e.dbObjects.sort(((e,t)=>e.kind-t.kind));for await(const a of e.dbObjects)switch(a.kind){case no.Procedure:case no.Function:case no.Udf:case no.Trigger:case no.Table:case no.View:if(a.schemas&&!r(a)){s.push(a);const e=await this.collectItemsFromSchemas(a.kind,a.schemas,t);n.push(...e)}break;case no.Column:if(a.schemas&&a.tables&&!r(a)){s.push(a);const e=await this.collectColumns(a.schemas,a.tables,t);n.push(...e)}break;case no.SystemFunction:if(!r(a)){s.push(a);const e=await this.collectSystemFunctions(t);n.push(...e)}break;case no.UserVariable:if(!r(a)){s.push(a);const e=await this.collectUserVariables(t);n.push(...e)}break;case no.SystemVariable:if(!r(a)){s.push(a);const e=await this.collectSystemVariables(t);n.push(...e)}break;default:if(!r(a)){s.push(a);const e=await this.collectItems(this.localSymbols,a.kind,t);n.push(...e)}}return n})),pe(this,"collectItems",(async(e,t,n,i)=>{const o=[],s=t===no.Procedure||t===no.Function||t===no.Udf,r=this.sortKeys.get(t)||"";i||(i=this.descriptionMap.get(t)||"<no description available>");const a=await this.getSymbolsOfKind(e,t);for(const l of a){const e=l.name+(s?"()":"");o.push({label:e,kind:so.get(t),range:n,insertText:e,sortText:r+e,documentation:i})}return o})),pe(this,"collectItemsFromSchemas",(async(e,t,n,i)=>{const o=[];this.loadedSchemaTables.has(ao)||await this.getSymbolsOfKind(this.localSymbols,no.Schema);for(const s of t){const t=await this.localSymbols.resolve(s,!1);t&&o.push(...await this.collectItems(t,e,n,i))}return o})),pe(this,"collectColumns",(async(e,t,n)=>{const i=[];this.loadedSchemaTables.has(ao)||await this.getSymbolsOfKind(this.localSymbols,no.Schema);for(const o of e){const e=await this.localSymbols.resolve(o,!1);if(e){this.loadedSchemaTables.has(o)||await this.getSymbolsOfKind(this.localSymbols,no.Table);for(const o of t){const t=await e.resolve(o,!0);t&&i.push(...await this.collectItems(t,no.Column,n))}}}return i})),pe(this,"collectSystemFunctions",(async e=>{const t=[],n=this.sortKeys.get(no.SystemFunction),i=await this.localSymbols.getAllSymbols(SystemFunctionSymbol);for(const o of i){const i=o.name+"()";t.push({label:i,kind:so.get(no.SystemFunction),range:e,insertText:i,sortText:n+i,documentation:o.description[1]})}return t})),pe(this,"collectUserVariables",(async e=>{const t=[],n=await this.localSymbols.getAllSymbols(UserVariableSymbol),i=this.sortKeys.get(no.UserVariable);for(const o of n){const n="@"+o.name;t.push({label:n,kind:so.get(no.UserVariable),range:e,insertText:n,sortText:i+n,documentation:"User Variable"})}return t})),pe(this,"collectSystemVariables",(async e=>{const t=[],n=await this.localSymbols.getAllSymbols(SystemVariableSymbol),i=this.sortKeys.get(no.SystemVariable);for(const o of n){const n="@@"+o.name;t.push({label:n,kind:so.get(no.SystemVariable),range:{startColumn:e.startColumn-2,startLineNumber:e.startLineNumber,endColumn:e.endColumn,endLineNumber:e.endLineNumber},insertText:n,sortText:i+n,documentation:o.description[1]})}return t})),this.language=e,this.pool=t,this.globalSymbols=n,this.localSymbols=new oo("local",{allowDuplicateSymbols:!1}),this.localSymbols.addDependencies(this.globalSymbols)}async getCodeCompletionItems(e,t){const n=e.model;n.symbols&&this.localSymbols.addDependencies(n.symbols);const i=await e.getStatementAtPosition(t);if(i)return new Promise(((o,s)=>{const r={api:"suggestion",language:this.language,version:e.dbVersion,sql:i.text,offset:n.getOffsetAt(t)-i.offset,line:t.lineNumber-i.line+1,column:t.column-1,currentSchema:e.currentSchema};this.pool.runTask(r).then(((i,r)=>{if(!n.isDisposed()&&r.completions){const i=n.getLineContent(t.lineNumber);let a=t.column-1;for(;a>0&&!/[\s.]/.test(i[a-1]);)--a;const l=e.fromLocal({startLineNumber:t.lineNumber,startColumn:a+1,endLineNumber:t.lineNumber,endColumn:t.column});this.transformCompletionItems(r.completions,l).then((e=>{0===e.length&&e.push({label:"No Suggestions",kind:jt.CompletionItemKind.Text,range:l,insertText:""}),o({incomplete:!1,suggestions:e}),n.symbols&&this.localSymbols.removeDependency(n.symbols)})).catch((e=>{s(e)}))}else o(void 0)}))}))}getSymbolsOfKind(e,t){switch(t){case no.Schema:return this.loadedSchemaTables.add(ao),e.getAllSymbols(SchemaSymbol);case no.Table:return this.loadedSchemaTables.add(e.name),e.getAllSymbols(TableSymbol);case no.Index:return e.getAllSymbols(IndexSymbol);case no.Column:return e.getAllSymbols(ColumnSymbol);case no.View:return e.getAllSymbols(ViewSymbol);case no.Label:return e.getAllSymbols(LabelSymbol);case no.SystemFunction:return e.getAllSymbols(SystemFunctionSymbol);case no.Function:return e.getAllSymbols(StoredFunctionSymbol);case no.Procedure:return e.getAllSymbols(StoredProcedureSymbol);case no.Udf:return e.getAllSymbols(UdfSymbol);case no.Engine:return e.getAllSymbols(EngineSymbol);case no.Tablespace:return e.getAllSymbols(TablespaceSymbol);case no.UserVariable:return e.getAllSymbols(UserVariableSymbol);case no.SystemVariable:return e.getAllSymbols(SystemVariableSymbol);case no.Charset:return e.getAllSymbols(CharsetSymbol);case no.Collation:return e.getAllSymbols(CollationSymbol);case no.Event:return e.getAllSymbols(EventSymbol);case no.User:return e.getAllSymbols(UserSymbol);case no.Trigger:return e.getAllSymbols(TriggerSymbol);case no.LogfileGroup:return e.getAllSymbols(LogfileGroupSymbol);case no.Plugin:return e.getAllSymbols(PluginSymbol);default:return Promise.resolve([])}}}const lo=class _MySQLLanguageService extends RdbmsLanguageService{constructor(e){super(to.MySQL,e,_MySQLLanguageService.globalSymbols)}static init(){Wt((()=>import("./system-variables-c2298ea2.js")),[]).then((e=>{for(const[t,n]of Object.entries(e.default))_MySQLLanguageService.globalSymbols.addNewSymbolOfType(SystemVariableSymbol,void 0,"@@"+t,n)})),Wt((()=>import("./system-functions-010cb651.js")),[]).then((e=>{for(const[t,n]of Object.entries(e.default))_MySQLLanguageService.globalSymbols.addNewSymbolOfType(SystemFunctionSymbol,void 0,t,n)})),Wt((()=>import("./rdbms-info-039d9fb5.js")),[]).then((e=>{for(const[t,n]of Object.entries(e.default.characterSets))_MySQLLanguageService.globalSymbols.addNewSymbolOfType(CharsetSymbol,void 0,t),_i.characterSets.set(t.toLowerCase(),{collations:n.collations,description:n.description,defaultCollation:n.defaultCollation});Object.entries(e.default.dataTypes).forEach((([e,t])=>{_i.dataTypes.set(e.toLowerCase(),{type:Ui[Nn(e)],characterMaximumLength:t.characterMaximumLength,characterOctetLength:t.characterOctetLength,dateTimePrecision:t.dateTimePrecision,flags:t.flags,numericPrecision:t.numericPrecision,numericPrecisionRadix:t.numericPrecisionRadix,numericScale:t.numericScale,needsQuotes:t.needsQuotes,parameterFormatType:t.parameterFormatType?qi[t.parameterFormatType]:void 0,synonyms:t.synonyms})}))}))}};pe(lo,"globalSymbols",new oo("global",{}));let co=lo;co.init();const uo=class _SQLiteLanguageService extends RdbmsLanguageService{constructor(e){super(to.Sqlite,e,_SQLiteLanguageService.globalSymbols)}static init(){Wt((()=>import("./builtin-functions-2e096ef5.js")),[]).then((e=>{const t=e.default;for(const[n,i]of Object.entries(t))_SQLiteLanguageService.globalSymbols.addNewSymbolOfType(SystemFunctionSymbol,void 0,n,i)})),Wt((()=>import("./rdbms-info-d9c7415b.js")),[]).then((e=>{Object.entries(e.default.characterSets).forEach((([e,t])=>{_SQLiteLanguageService.globalSymbols.addNewSymbolOfType(CharsetSymbol,void 0,e),Gi.characterSets.set(e.toLowerCase(),{collations:t.collations,description:t.description,defaultCollation:t.defaultCollation})})),Object.entries(e.default.dataTypes).forEach((([e,t])=>{Gi.dataTypes.set(e.toLowerCase(),{type:Ui[Nn(e)],characterMaximumLength:t.characterMaximumLength,characterOctetLength:t.characterOctetLength,dateTimePrecision:t.dateTimePrecision,flags:t.flags,numericPrecision:t.numericPrecision,numericPrecisionRadix:t.numericPrecisionRadix,numericScale:t.numericScale,needsQuotes:t.needsQuotes,parameterFormatType:t.parameterFormatType?qi[t.parameterFormatType]:void 0,synonyms:t.synonyms})}))}))}};pe(uo,"globalSymbols",new oo("global",{}));let ho=uo;ho.init();class PythonLanguageService{constructor(e){this.pool=e}static init(){}}function po(){return new Worker("/assets/sql.worker-d79b18be.js",{type:"module"})}class WorkerCallback{constructor(e){pe(this,"onResultCallback"),pe(this,"onErrorCallback"),pe(this,"then",(e=>(this.onResultCallback=e,this))),pe(this,"catch",(e=>{this.onErrorCallback=e})),pe(this,"onResult",((e,t)=>{var n;null==(n=this.onResultCallback)||n.call(this,e,t)})),pe(this,"onError",((e,t)=>{var n;null==(n=this.onErrorCallback)||n.call(this,e,t)})),e(this.onResult,this.onError)}}class WorkerPool{constructor(){pe(this,"nextTaskId",0),pe(this,"idleWorkers",[]),pe(this,"runningTasks",new Map),pe(this,"pendingTasks",[]),pe(this,"timer"),pe(this,"minWorkerCount"),pe(this,"maxWorkerCount"),pe(this,"maxPendingTaskCount"),pe(this,"removeIdleTime"),pe(this,"settingsKeys",new Set(["workers.minWorkerCount","workers.maxWorkerCount","workers.maxPendingTaskCount","workers.removeIdleTime"])),pe(this,"settingsChanged",(e=>e&&this.settingsKeys.has(e.key)?(this.setup(),Promise.resolve(!0)):Promise.resolve(!1))),pe(this,"handleWorkerMessage",(e=>{var t,n;const{taskId:i,data:o}=e.data,s=this.runningTasks.get(i);s&&(o.error?null==(t=s.onError)||t.call(s,i,o.error):null==(n=s.onResult)||n.call(s,i,o),o.final&&this.releaseTask(i))})),this.setup(),nn.register("settingsChanged",this.settingsChanged)}dispose(){this.timer&&clearInterval(this.timer),nn.unregister("settingsChanged",this.settingsChanged),this.idleWorkers.forEach((e=>e.terminate())),this.idleWorkers=[],this.runningTasks.forEach((e=>{var t;return null==(t=e.assignedWorker)?void 0:t.terminate()})),this.runningTasks.clear()}runTask(e){return new WorkerCallback(((t,n)=>{this.scheduleTask({refCount:1,taskId:this.nextTaskId++,onResult:t,onError:n,data:e})}))}continueTask(e,t){const n=this.runningTasks.get(e);n&&(n.data=t,n.assignedWorker.postMessage({taskId:e,data:t}))}retainTask(e){const t=this.runningTasks.get(e);return!!t&&(++t.refCount,!0)}releaseTask(e){var t;const n=this.runningTasks.get(e);if(n){if(--n.refCount,n.refCount<=0){null==(t=n.assignedWorker)||t.postMessage({taskId:e,data:{api:"cleanup"}}),this.runningTasks.delete(e);const i=this.pendingTasks.shift();i?(i.assignedWorker=n.assignedWorker,this.runningTasks.set(i.taskId,i),i.assignedWorker.postMessage({taskId:i.taskId,data:i.data})):this.idleWorkers.push(n.assignedWorker)}return!0}return!1}scheduleTask(e){let t=this.idleWorkers.shift();if(!t)if(this.runningTasks.size>=this.maxWorkerCount){if(this.pendingTasks.length>=this.maxPendingTaskCount)throw new Error("Reached maximum number of pending tasks in worker pool");this.pendingTasks.push(e)}else t=this.setupNewWorker();t&&(e.assignedWorker=t,this.runningTasks.set(e.taskId,e),t.postMessage({taskId:e.taskId,data:e.data}))}setupNewWorker(){const e=this.createNewWorker();return e.addEventListener("message",this.handleWorkerMessage),e.addEventListener("error",(e=>{console.log("Worker error encountered:"),console.log(e)})),e}setup(){for(this.minWorkerCount=hi.get("workers.minWorkerCount",3),this.maxWorkerCount=hi.get("workers.maxWorkerCount",10),this.maxPendingTaskCount=hi.get("workers.maxPendingTaskCount",1e3),this.removeIdleTime=hi.get("workers.removeIdleTime",60),this.maxWorkerCount<1&&(this.maxWorkerCount=1),this.minWorkerCount>this.maxWorkerCount&&(this.minWorkerCount=this.maxWorkerCount),this.minWorkerCount<1&&(this.minWorkerCount=1);this.idleWorkers.length<this.minWorkerCount;){const e=this.setupNewWorker();this.idleWorkers.push(e)}this.timer&&clearInterval(this.timer),this.removeIdleTime>0&&(this.timer=setInterval((()=>{if(this.idleWorkers.length>this.minWorkerCount){const e=this.idleWorkers.shift();e&&e.terminate()}}),1e3*this.removeIdleTime))}}const mo=class _LanguageWorkerPool extends WorkerPool{createNewWorker(){const e=new po;return e.id="lw"+String(_LanguageWorkerPool.nextId++),e}};pe(mo,"nextId",0);let go=mo;const fo=class _ScriptingLanguageServices{constructor(){pe(this,"workerPool"),pe(this,"mysqlService"),pe(this,"sqliteService"),pe(this,"pythonService"),pe(this,"lastShellCompletions",[]),pe(this,"validate",(async(e,t,n)=>{const i=e;if(!i.isInternal)switch(i.language){case"javascript":case"typescript":{const e=i.model;if(e&&!e.isDisposed()){const t=await this.workerForLanguage(i.language),o=await t(e.uri);if(!e.isDisposed()){const t=[];(await o.getSyntacticDiagnostics(e.uri.toString())).forEach((e=>{t.push({span:{start:e.start||0,length:e.length||0},severity:e.category,source:"Shell GUI",message:Ge.flattenDiagnosticMessageText(e.messageText,"\n")})}));(await o.getSemanticDiagnostics(e.uri.toString())).forEach((e=>{t.push({span:{start:e.start||0,length:e.length||0},severity:e.category,source:"Shell GUI",message:Ge.flattenDiagnosticMessageText(e.messageText,"\n")})})),n(t)}}break}case"sql":case"mysql":{const e=i,o={language:"sql"===i.language?to.Sqlite:to.MySQL,api:"validate",version:e.dbVersion,sql:t,sqlMode:e.sqlMode,offset:0};this.workerPool.runTask(o).then(((e,t)=>{const i=t.content,o=[];i.forEach((e=>{o.push({span:{start:e.charOffset,length:e.length},severity:eo.Error,source:"Shell GUI",message:e.message})})),n(o)}));break}}})),pe(this,"tokenize",(async e=>{const t=e;if(t.isInternal)return Promise.resolve([[{line:0,column:0,length:t.code.length,type:"command"}]]);const n=t.model;if(!n)return Promise.resolve([]);switch(t.language){case"javascript":case"typescript":if(n&&!n.isDisposed()){const e=Gt.tokenize(n.getValue(),t.language),i=[];return e.forEach(((e,t)=>{const o=e.map(((e,i,o)=>{let s;return s=i<o.length-1?o[i+1].offset-e.offset:n.getLineLength(t+1)-e.offset,{line:t,column:e.offset,length:s,type:e.type}}));i.push(o)})),Promise.resolve(i)}break;case"sql":case"mysql":{const e=t,i=await e.getAllStatements();return new Promise((o=>{const s={language:"sql"===t.language?to.Sqlite:to.MySQL,api:"tokenize",version:e.dbVersion,statements:i,sqlMode:e.sqlMode};let r=-1;this.workerPool.runTask(s).then(((e,t)=>{const i=[];if(t.tokens){let e=[],o=0;for(;o<t.tokens.length;){const s=t.tokens[o],a=n.getPositionAt(s.offset);if(-1===r&&(r=a.lineNumber),a.lineNumber===r){const t=n.getPositionAt(s.offset+s.length);if(a.lineNumber===t.lineNumber)e.push({line:a.lineNumber-1,column:a.column-1,length:s.length,type:s.type});else{const i=t.lineNumber-a.lineNumber+1;for(let o=0;o<i;++o)0===o?e.push({line:a.lineNumber-1,column:a.column-1,length:n.getLineLength(a.lineNumber)-a.column+1,type:s.type}):o===i-1?e.push({line:t.lineNumber-1,column:0,length:t.column-1,type:s.type}):e.push({line:a.lineNumber+o-1,column:0,length:n.getLineLength(a.lineNumber+o),type:s.type})}++o}else i.push(e),e=[],r=a.lineNumber}e.length>0&&i.push(e)}o(i)}))}))}}return Promise.resolve([])})),pe(this,"determineStatementRanges",((e,t,n,i)=>{const o=e;switch(o.language){case"javascript":case"typescript":n([{delimiter:"",span:{start:0,length:i?i.length:o.codeLength},contentStart:0,state:Xi.Complete}]);break;case"sql":case"mysql":{const e=i??o.code,s={language:"sql"===o.language?to.Sqlite:to.MySQL,api:"split",sql:e,delimiter:t};this.workerPool.runTask(s).then(((e,t)=>{n(t.content)}));break}}})),pe(this,"determineQueryType",(async(e,t)=>new Promise((n=>{const i=e,o={language:"sql"===i.language?to.Sqlite:to.MySQL,api:"queryType",sql:t,version:i.dbVersion};this.workerPool.runTask(o).then(((e,t)=>{n(t.queryType||Ji.Unknown)}))})))),pe(this,"preprocessStatement",(async(e,t,n,i,o)=>new Promise(((s,r)=>{const a=e,l={language:"sql"===a.language?to.Sqlite:to.MySQL,api:"preprocessStatement",sql:t,offset:n,count:i,forceSecondaryEngine:o,version:a.dbVersion,sqlMode:a.sqlMode};this.workerPool.runTask(l).then(((e,n)=>{s([n.query??t,n.changed??!1])})).catch(((e,t)=>{r(t)}))})))),pe(this,"checkAndAddSemicolon",(async(e,t)=>new Promise(((n,i)=>{const o=e,s={language:"sql"===o.language?to.Sqlite:to.MySQL,api:"addSemicolon",sql:t,version:o.dbVersion,sqlMode:o.sqlMode};this.workerPool.runTask(s).then(((e,i)=>{n([i.query??t,i.changed??!1])})).catch(((e,t)=>{i(t)}))})))),pe(this,"extractQueryParameters",(async(e,t,n)=>new Promise((i=>{const o={language:to.MySQL,api:"parameters",version:t,sql:e,sqlMode:n};this.workerPool.runTask(o).then(((e,t)=>{i(t.parameters||[])}))})))),this.workerPool=new go,this.mysqlService=new co(this.workerPool),this.sqliteService=new ho(this.workerPool),this.pythonService=new PythonLanguageService(this.workerPool)}static get instance(){return _ScriptingLanguageServices.services||(_ScriptingLanguageServices.services=new _ScriptingLanguageServices),_ScriptingLanguageServices.services}async getCodeCompletionItems(e,t){const n=e,i=n.toLocal(t),o=n.model;switch(n.language){case"javascript":case"typescript":{const e=await this.workerForLanguage(n.language),s=await e(o.uri),r=o.getOffsetAt(i),a=await s.getCompletionsAtPosition(o.uri.toString(),r),l=[],d=o.getWordUntilPosition(i),c={startLineNumber:t.lineNumber,startColumn:d.startColumn,endLineNumber:t.lineNumber,endColumn:d.endColumn};if(a&&a.entries.forEach((e=>{l.push({label:e.name,kind:this.convertKind(e.kind),range:c,insertText:e.insertText||e.name})})),o.editorMode!==Li.Terminal)return{incomplete:!1,suggestions:l};if(d.word.length>1)return l.push(...this.lastShellCompletions),{incomplete:!1,suggestions:l};{const e=o.session;if(e){const t=o.getValue(),n=[];return(await e.getCompletionItems(t,r)).forEach((e=>{var t;null==(t=e.options)||t.forEach((e=>{let t=jt.CompletionItemKind.Field;e.endsWith("()")&&(t=jt.CompletionItemKind.Function),n.push({label:e,kind:t,range:c,insertText:e})}))})),this.lastShellCompletions=n,l.push(...n),{incomplete:!1,suggestions:l}}}break}case"sql":return this.sqliteService.getCodeCompletionItems(n,i);case"mysql":return this.mysqlService.getCodeCompletionItems(n,i)}}async resolve(e,t){const n=e,i=n.model;switch(n.language){case"javascript":case"typescript":{if(!i||i.isDisposed())return t;const e=await this.workerForLanguage(n.language),o=await e(i.uri),s=t.range,r=i.getOffsetAt({lineNumber:s.endLineNumber,column:s.endColumn}),a="string"==typeof t.label?t.label:t.label.label,l=await o.getCompletionEntryDetails(i.uri.toString(),r,a);return l&&(t.documentation={value:"```ts\n"+Ge.displayPartsToString(l.displayParts)+"\n```"},t.detail=Ge.displayPartsToString(l.documentation)),t}default:return t}}async getHover(e,t){const n=e;t=n.toLocal(t);const i=n.model;if(i&&!i.isDisposed())switch(n.language){case"javascript":case"typescript":{const e=await this.workerForLanguage(n.language),o=await e(i.uri),s=i.getOffsetAt(t),r=await o.getQuickInfoAtPosition(i.uri.toString(),s);return r?{range:n.fromLocal(r.textSpan),contents:[{value:"```ts\n"+Ge.displayPartsToString(r.displayParts)+"\n```"},{value:Ge.displayPartsToString(r.documentation)}]}:void 0}case"sql":case"mysql":{const e=n,o=await e.getStatementAtPosition(t);if(o){const s=i.getOffsetAt({lineNumber:o.line,column:o.column});return new Promise((r=>{const a={language:"sql"===n.language?to.Sqlite:to.MySQL,api:"info",version:e.dbVersion,sql:o.text,offset:i.getOffsetAt(t)-s};this.workerPool.runTask(a).then(((e,t)=>{const n=t.info;(null==n?void 0:n.description)&&(null==n?void 0:n.definition)?r({contents:n.description.map((e=>({value:e,isTrusted:!0,supportThemeIcons:!0})))}):r(void 0)}))}))}break}}}async getSignatureHelp(e,t){const n=e;t=n.toLocal(t);const i=n.model;if(i&&!i.isDisposed())switch(n.language){case"javascript":case"typescript":{const e=await this.workerForLanguage(n.language),o=await e(i.uri),s=i.getOffsetAt(t),r=await o.getSignatureHelpItems(i.uri.toString(),s,{});if(r){const e={activeSignature:r.selectedItemIndex,activeParameter:r.argumentIndex,signatures:[]};return r.items.forEach((t=>{const n={label:"",documentation:void 0,parameters:[]};n.label+=Ge.displayPartsToString(t.prefixDisplayParts),t.parameters.forEach(((e,i,o)=>{const s=Ge.displayPartsToString(e.displayParts),r={label:s,documentation:Ge.displayPartsToString(e.documentation)};n.label+=s,n.parameters.push(r),i<o.length-1&&(n.label+=Ge.displayPartsToString(t.separatorDisplayParts))})),n.label+=Ge.displayPartsToString(t.suffixDisplayParts),e.signatures.push(n)})),{value:e,dispose:()=>{}}}break}}}async findDocumentHighlight(e,t){const n=e;t=n.toLocal(t);const i=n.model;if(i&&!i.isDisposed())switch(n.language){case"javascript":case"typescript":{const e=await this.workerForLanguage(n.language),o=await e(i.uri),s=i.getOffsetAt(t),r=await o.getDocumentHighlights(i.uri.toString(),s,[i.uri.toString()]),a=[];for(const t of r||[])for(const e of t.highlightSpans){let t;switch(e.kind){case Ge.HighlightSpanKind.writtenReference:t=jt.DocumentHighlightKind.Write;break;case Ge.HighlightSpanKind.reference:t=jt.DocumentHighlightKind.Read;break;default:t=jt.DocumentHighlightKind.Text}a.push({range:n.fromLocal(e.textSpan),kind:t})}return a}}}async getRenameLocations(e,t,n){const i=e;t=i.toLocal(t);const o=i.model;if(o&&!o.isDisposed())switch(i.language){case"javascript":case"typescript":{const e=await this.workerForLanguage(i.language),s=await e(o.uri),r=o.getOffsetAt(t),a=await s.findRenameLocations(o.uri.toString(),r,!1,!0,!1),l=[];for(const t of a||[])l.push({resource:o.uri,versionId:o.getVersionId(),textEdit:{range:i.fromLocal(t.textSpan),text:n}});return{edits:l}}}}async findDefinition(e,t){const n=e;t=n.toLocal(t);const i=n.model;if(i&&!i.isDisposed())switch(n.language){case"javascript":case"typescript":{const e=await this.workerForLanguage(n.language),o=await e(i.uri),s=i.getOffsetAt(t),r=i.uri.toString(),a=await o.getDefinitionAtPosition(r,s);if(a)return a.filter((e=>e.fileName===r)).map((e=>({uri:i.uri,range:n.fromLocal(e.textSpan)})));break}}}async findReferences(e,t){const n=e;t=n.toLocal(t);const i=n.model;if(i&&!i.isDisposed())switch(n.language){case"javascript":case"typescript":{const e=await this.workerForLanguage(n.language),o=await e(i.uri),s=i.getOffsetAt(t),r=i.uri.toString(),a=await o.getReferencesAtPosition(r,s);if(a)return a.filter((e=>e.fileName===r)).map((e=>({uri:i.uri,range:n.fromLocal(e.textSpan)})));break}}}async format(e,t,n,i={}){const o=e,s=o.model;if(!s||s.isDisposed())return;const r=this.computeInitialIndent(s,t,n),a=this.convertOptions(n,i,r),l=s.getOffsetAt({lineNumber:t.startLineNumber,column:t.startColumn});let d,c=s.getOffsetAt({lineNumber:t.endLineNumber,column:t.endColumn});var u;switch(t.endLineNumber>t.startLineNumber&&(0===t.endColumn||(u=s.getValue().substr(c-t.endColumn,t.endColumn),/^\s+$/.test(u)))&&(c-=t.endColumn,d=new $t(t.endLineNumber,0,t.endLineNumber,t.endColumn)),o.language){case"javascript":case"typescript":{const e=await this.workerForLanguage(o.language),t=await e(s.uri),i=await t.getFormattingEditsForRange(s.uri.toString(),l,c,a);if(i){const e=[];for(const t of i)t.span.start>=l&&t.span.start+t.span.length<=c&&e.push({range:o.fromLocal(t.span),text:t.newText});return d&&e.push({range:d,text:this.generateIndent(r,n)}),e}break}}}convertKind(e){switch(e){case"primitive type":case"keyword":return jt.CompletionItemKind.Keyword;case"var":case"local var":return jt.CompletionItemKind.Variable;case"property":case"getter":case"setter":return jt.CompletionItemKind.Field;case"function":case"method":case"construct":case"call":case"index":return jt.CompletionItemKind.Function;case"enum":return jt.CompletionItemKind.Enum;case"module":return jt.CompletionItemKind.Module;case"class":return jt.CompletionItemKind.Class;case"interface":return jt.CompletionItemKind.Interface;case"warning":return jt.CompletionItemKind.File;default:return jt.CompletionItemKind.Property}}convertOptions(e,t,n){return{ConvertTabsToSpaces:e.insertSpaces,TabSize:e.tabSize,IndentSize:e.tabSize,IndentStyle:Ge.IndentStyle.Smart,NewLineCharacter:"\n",BaseIndentSize:e.tabSize*n,InsertSpaceAfterCommaDelimiter:Boolean(!t||t.insertSpaceAfterCommaDelimiter),InsertSpaceAfterSemicolonInForStatements:Boolean(!t||t.insertSpaceAfterSemicolonInForStatements),InsertSpaceBeforeAndAfterBinaryOperators:Boolean(!t||t.insertSpaceBeforeAndAfterBinaryOperators),InsertSpaceAfterKeywordsInControlFlowStatements:Boolean(!t||t.insertSpaceAfterKeywordsInControlFlowStatements),InsertSpaceAfterFunctionKeywordForAnonymousFunctions:Boolean(!t||t.insertSpaceAfterFunctionKeywordForAnonymousFunctions),InsertSpaceAfterOpeningAndBeforeClosingNonemptyParenthesis:Boolean(t&&t.insertSpaceAfterOpeningAndBeforeClosingNonemptyParenthesis),InsertSpaceAfterOpeningAndBeforeClosingNonemptyBrackets:Boolean(t&&t.insertSpaceAfterOpeningAndBeforeClosingNonemptyBrackets),InsertSpaceAfterOpeningAndBeforeClosingNonemptyBraces:Boolean(t&&t.insertSpaceAfterOpeningAndBeforeClosingNonemptyBraces),InsertSpaceAfterOpeningAndBeforeClosingTemplateStringBraces:Boolean(t&&t.insertSpaceAfterOpeningAndBeforeClosingTemplateStringBraces),PlaceOpenBraceOnNewLineForControlBlocks:Boolean(t&&t.placeOpenBraceOnNewLineForFunctions),PlaceOpenBraceOnNewLineForFunctions:Boolean(t&&t.placeOpenBraceOnNewLineForControlBlocks)}}computeInitialIndent(e,t,n){const i=e.getOffsetAt({lineNumber:t.startLineNumber,column:0}),o=e.getValue();let s=i,r=0;const a=n.tabSize||4;for(;s<o.length;){const e=o.charAt(s);if(" "===e)r++;else{if("\t"!==e)break;r+=a}s++}return Math.floor(r/a)}generateIndent(e,t){return t.insertSpaces?" ".repeat(e*t.tabSize):"\t".repeat(e)}async workerForLanguage(e){return"javascript"===e?jt.typescript.getJavaScriptWorker():jt.typescript.getTypeScriptWorker()}};pe(fo,"services");let bo=fo;const vo=class _ExecutionContext{constructor(e,t){pe(this,"disposed",!1),pe(this,"internalId"),pe(this,"decorationIDs",[]),fe(this,i,!1),fe(this,o,void 0),this.presentation=e,this.linkId=t,this.internalId="ec"+_ExecutionContext.nextId++,e.context=this}get tokenList(){return ge(this,o)}dispose(){this.presentation.dispose(),this.clearDecorations(),this.disposed=!0}get id(){return this.internalId}get code(){return this.presentation.code}get codeLength(){return this.presentation.codeLength}get language(){return this.presentation.language}set language(e){this.presentation.language=e,this.presentation.removeResult(),this.validateAll()}get isSQLLike(){return this.presentation.isSQLLike}get state(){var e;let t;const n=this.presentation.resultData;if(n)switch(n.type){case"resultSets":{const i=[];n.sets.forEach((e=>{i.push(e.resultId)})),null==(e=n.output)||e.forEach((e=>{e.resultId&&i.push(e.resultId)})),t={type:"resultIds",list:i};break}default:t=n}return{start:this.presentation.startLine,end:this.presentation.endLine,language:this.language,result:t,currentHeight:this.presentation.cachedHeight,currentSet:this.presentation.currentSet,maximizeResultPane:this.presentation.maximizedResult,statements:this.statementSpans}}get model(){return this.presentation.model}get startLine(){return this.presentation.startLine}set startLine(e){this.presentation.startLine=e,this.clearDecorations()}get endLine(){return this.presentation.endLine}set endLine(e){this.presentation.endLine=e,this.clearDecorations()}get isInternal(){return this.presentation.isInternal}get resultIds(){return this.presentation.resultIds}get fullRange(){var e;const t=null==(e=this.model)?void 0:e.getFullModelRange();if(t)return{startLine:t.startLineNumber,startColumn:t.startColumn,endLine:t.endLineNumber,endColumn:t.endColumn}}showNextResultMaximized(){be(this,i,!0)}selectStatement(e){throw new Error(`Cannot select individual statements (index ${e})`)}movePosition(e){this.presentation.movePosition(e)}toLocal(e){return{lineNumber:e.lineNumber-this.presentation.startLine+1,column:e.column}}fromLocal(e){if((e=>void 0!==e.start&&void 0!==e.length)(e)){const t=this.model,n=t?t.getPositionAt(e.start):new Kt(0,0),i=t?t.getPositionAt(e.start+(e.length||0)):new Kt(0,0);return{startLineNumber:n.lineNumber+this.startLine-1,startColumn:n.column,endLineNumber:i.lineNumber+this.startLine-1,endColumn:i.column}}return{startLineNumber:e.startLineNumber+this.startLine-1,startColumn:e.startColumn,endLineNumber:e.endLineNumber+this.startLine-1,endColumn:e.endColumn}}getOffsetAt(e){const t=this.model;return t?(e=t.validatePosition(e),t.getOffsetAt(e)):0}getPositionAt(e){const t=this.model;return t?t.getPositionAt(e):new Kt(1,1)}clearResult(){this.disposed||this.presentation.clearResult()}removeResult(){this.disposed||this.presentation.removeResult()}executionStarts(){this.disposed||this.presentation.executionStarts()}setResult(e,t){this.disposed||this.presentation.setResult(e,t)}async addResultData(e,t,n){if(!this.disposed){const o=n??{};return ge(this,i)&&(o.maximized=!0,be(this,i,!1)),this.presentation.addResultData(e,t,o)}}get loadingState(){return this.presentation.loadingState}applyEditorChanges(e){this.disposed||this.scheduleFullValidation()}validateAll(){if(!this.disposed){bo.instance.validate(this,"",(e=>{this.decorationIDs=this.presentation.updateDiagnosticsDecorations(this.decorationIDs,e)}))}}scheduleFullValidation(){this.isInternal||this.disposed||this.validateAll()}async updateTokenList(){const e=bo.instance,t=await e.tokenize(this);let n=0,i=0;const s=[];t.forEach((e=>{e.forEach((e=>{if(e.type.length>0){const t=e.type.split(".");if(t.length>0){const o=Fi.indexOf(t[0]);if(o>=0){t.shift();const r=(e=>{let t=0;for(const n of e){const e=Ai.indexOf(n);e>-1?t|=1<<e>>>0:console.log(`Unknown modifier: ${n}`)}return t})(t);s.push(e.line-n,n===e.line?e.column-i:e.column,e.length,o,r),n=e.line,i=e.column}}}}))})),be(this,o,new Uint32Array(s))}clearDecorations(){this.decorationIDs=this.presentation.updateDiagnosticsDecorations(this.decorationIDs,[])}get statementSpans(){return[]}};i=new WeakMap,o=new WeakMap,pe(vo,"nextId",1);let So=vo;const Co="/assets/toolbar-commit-1cfe18e5.svg",wo="/assets/toolbar-rollback-d0dbb9dd.svg",yo="/assets/toolbar-normalize-84b4f34b.svg",ko="/assets/toolbar-menu-60c3701d.svg",Io="/assets/null-bf895d71.svg";var Do=(e=>(e[e.Unchecked=0]="Unchecked",e[e.Checked=1]="Checked",e[e.Indeterminate=2]="Indeterminate",e))(Do||{});class Checkbox extends ComponentBase{constructor(e){super(e),pe(this,"handleKeyPress",(e=>{const{disabled:t}=this.mergedProps;t?e.preventDefault():e.key!==Sn&&e.key!==bn||(this.toggleCheckState(),e.preventDefault())})),this.addHandledProperties("checkState","caption","disabled","onChange","dataId"),this.connectEvents("onClick")}render(){const{children:e,caption:t,disabled:n,checkState:i}=this.mergedProps,o=this.getEffectiveClassNames(["checkbox",this.classFromProperty(i,["unchecked","checked","indeterminate"]),this.classFromProperty(n,"disabled")]),s=t||e;return Ie("label",{className:o,tabIndex:0,onKeyPress:this.handleKeyPress,...this.unhandledProperties,children:[Ie("span",{className:"checkMark"}),s]})}handleMouseEvent(e,t){const{disabled:n}=this.mergedProps;return n?(t.preventDefault(),!1):(e===ei.Click&&this.toggleCheckState(),!0)}toggleCheckState(){const{onChange:e,checkState:t}=this.mergedProps;let n;switch(t){case 0:case 2:n=1;break;default:n=0}null==e||e(n,this.mergedProps)}}pe(Checkbox,"defaultProps",{checkState:0,disabled:!1});const To=(e,t,n,i)=>{const o=t.getBoundingClientRect();let s=0,r=0;switch(e){case Zn.TopLeft:s=n.left,r=n.top-o.height-i;break;case Zn.TopCenter:s=(n.left+n.right)/2-o.width/2,r=n.top-o.height-i;break;case Zn.TopRight:s=n.right-o.width,r=n.top-o.height-i;break;case Zn.RightTop:r=n.top,s=n.left+n.width+i;break;case Zn.RightCenter:r=(n.top+n.bottom)/2-o.height/2,s=n.left+n.width+i;break;case Zn.RightBottom:r=n.top+n.height-o.height,s=n.left+n.width+i;break;case Zn.BottomLeft:s=n.left,r=n.top+n.height+i;break;case Zn.BottomCenter:s=(n.left+n.right)/2-o.width/2,r=n.top+n.height+i;break;case Zn.BottomRight:s=n.right-o.width,r=n.top+n.height+i;break;case Zn.LeftTop:r=n.top,s=n.left-o.width-i;break;case Zn.LeftCenter:r=(n.top+n.bottom)/2-o.height/2,s=n.left-o.width-i;break;case Zn.LeftBottom:r=n.top+n.height-o.height,s=n.left-o.width-i}return{left:s,top:r}},Ro=(e,t,n,i,o,s=document.body)=>{let{left:r,top:a}=To(e,t,n,i);const{width:l,height:d}=t.getBoundingClientRect(),c=s.getBoundingClientRect(),u=r+l,h=a+d;if(o){const o=e=>{if(a<0){const{top:o}=To(e,t,n,i);if(!(o+d>c.bottom))return a=o,!0;a=0}return!1},s=e=>{if(u>c.right){const{left:o}=To(e,t,n,i);if(!(o<0))return r=o,!0;r=c.right-l}return!1},p=e=>{if(h>c.bottom){const{top:o}=To(e,t,n,i);if(!(o<0))return a=o,!0;a=c.bottom-d}return!1},m=e=>{if(r<0){const{left:o}=To(e,t,n,i);if(!(o+l>c.right))return r=o,!0;r=c.right-l}return!1},g=(n,i,o,s,r)=>{if(n||i){let a="";a=n&&i?o:n?s:r,t.classList.remove(e),t.classList.add(a)}};switch(e){case Zn.TopLeft:g(s(Zn.TopRight),o(Zn.BottomLeft),Zn.BottomRight,Zn.TopRight,Zn.BottomLeft);break;case Zn.TopCenter:g(!1,o(Zn.BottomCenter),null,null,Zn.BottomCenter);break;case Zn.TopRight:g(m(Zn.TopLeft),o(Zn.BottomRight),Zn.BottomLeft,Zn.TopLeft,Zn.BottomRight);break;case Zn.RightTop:g(s(Zn.LeftTop),p(Zn.RightBottom),Zn.LeftBottom,Zn.LeftTop,Zn.RightBottom);break;case Zn.RightCenter:g(s(Zn.LeftCenter),!1,null,Zn.LeftCenter,null);break;case Zn.RightBottom:g(s(Zn.LeftBottom),o(Zn.RightTop),Zn.LeftTop,Zn.LeftBottom,Zn.RightTop);break;case Zn.BottomLeft:g(s(Zn.BottomRight),p(Zn.TopLeft),Zn.TopRight,Zn.BottomRight,Zn.TopLeft);break;case Zn.BottomCenter:g(!1,p(Zn.TopCenter),null,null,Zn.TopCenter);break;case Zn.BottomRight:g(m(Zn.BottomLeft),p(Zn.TopRight),Zn.TopLeft,Zn.BottomLeft,Zn.TopRight);break;case Zn.LeftTop:g(m(Zn.RightTop),p(Zn.LeftBottom),Zn.RightBottom,Zn.RightTop,Zn.LeftBottom);break;case Zn.LeftCenter:g(m(Zn.RightCenter),!1,null,Zn.RightCenter,null);break;case Zn.LeftBottom:g(m(Zn.RightBottom),o(Zn.LeftTop),Zn.RightTop,Zn.RightBottom,Zn.LeftTop)}}return{left:r,top:a}},xo=class _Portal extends ComponentBase{constructor(e){super(e),pe(this,"host"),pe(this,"open",(e=>{const{open:t}=this.state;if(!t){const t={closeOnEscape:!0,closeOnPortalClick:!1,blockMouseEvents:!0,...e};this.setState({open:!0,options:t},(()=>{_Portal.portalStack.push(this);const{onOpen:e}=this.mergedProps;null==e||e(this.mergedProps)}))}})),pe(this,"close",(e=>{const{open:t}=this.state;if(t){const{onClose:t}=this.mergedProps;null==t||t(e,this.mergedProps),this.setState({open:!1,options:{}},(()=>{const e=_Portal.portalStack.findIndex((e=>e===this));e>-1&&_Portal.portalStack.splice(e,1)}))}})),pe(this,"handlePortalMouseDown",(e=>{const{open:t,options:n}=this.state;t&&n.closeOnPortalClick&&e.target===this.host&&this.close(!0)})),pe(this,"handlePortalMouseWheel",(e=>{const{open:t,options:n}=this.state;t&&!n.blockMouseEvents&&(e.preventDefault(),e.stopPropagation())})),this.state={open:!1,options:{}},this.addHandledProperties("container")}componentDidUpdate(){var e;const{id:t,children:n,container:i=document.body}=this.mergedProps,{open:o,options:s}=this.state;if(o){if(!this.host){const e=s.blockMouseEvents??!0,n=this.getEffectiveClassNames(["portal",this.classFromProperty(e,["ignoreMouse",""])]);this.host=document.createElement("div"),t&&(this.host.id=t),this.host.className=n,this.host.style.setProperty("--background-opacity",String(s.backgroundOpacity??.5)),this.host.addEventListener("mousedown",this.handlePortalMouseDown),this.host.addEventListener("wheel",this.handlePortalMouseWheel),i.appendChild(this.host)}Ue(n,this.host)}else null==(e=this.host)||e.remove(),this.host=void 0}componentWillUnmount(){var e;null==(e=this.host)||e.remove(),this.host=void 0}render(){return null}get isOpen(){return this.state.open}};pe(xo,"portalStack",new class Stack extends Array{get empty(){return 0===this.length}get top(){if(!this.empty)return this[this.length-1]}}),document.body.addEventListener("keydown",(e=>{if(xo.portalStack.length>0&&e.key===In){const t=xo.portalStack.top;if(t){const{options:n}=t.state;n.closeOnEscape&&(e.stopImmediatePropagation(),e.stopPropagation(),t.close(!0))}}}));let Eo=xo;class Popup extends ComponentBase{constructor(e){super(e),pe(this,"portalRef",ke()),pe(this,"containerRef"),pe(this,"handleClose",(e=>{const{onClose:t}=this.mergedProps;null==t||t(e,this.mergedProps)})),pe(this,"handleOpen",(()=>{const{placement:e,pinned:t,showArrow:n,onOpen:i}=this.mergedProps,{currentTarget:o}=this.state;if(o&&(null==i||i(this.mergedProps),this.containerRef.current&&e)){const{left:i,top:s}=Ro(e,this.containerRef.current,o,n?10:0,!t);this.containerRef.current.style.left=`${i}px`,this.containerRef.current.style.top=`${s}px`}})),this.state={hidden:!1},this.containerRef=e.innerRef??ke(),this.addHandledProperties("header","placement","show","pinned","showArrow","orientation","innerRef")}render(){const{children:e,header:t,placement:n,showArrow:i,orientation:o}=this.mergedProps,s=this.getEffectiveClassNames(["popup","visible",n,this.classFromProperty(!i,"noArrow")]);return Ie(Eo,{ref:this.portalRef,className:"popupPortal",onClose:this.handleClose,onOpen:this.handleOpen,...this.unhandledProperties,children:Ie(Container,{className:s,innerRef:this.containerRef,orientation:o,children:[t,e]})})}get isOpen(){var e;return(null==(e=this.portalRef.current)?void 0:e.isOpen)||!1}open(e,t){this.setState({currentTarget:e},(()=>{var e;null==(e=this.portalRef.current)||e.open({closeOnEscape:!0,closeOnPortalClick:!0,backgroundOpacity:0,...t})}))}close(){var e;null==(e=this.portalRef.current)||e.close(!1)}get clientRect(){if(this.containerRef.current)return this.containerRef.current.getBoundingClientRect()}updatePosition(e){this.setState({currentTarget:e},this.handleOpen)}}pe(Popup,"defaultProps",{placement:Zn.TopLeft,pinned:!1,showArrow:!0,orientation:Di.TopDown});class Divider extends ComponentBase{constructor(e){super(e),pe(this,"hoverTimer"),this.addHandledProperties("vertical","thickness","innerRef","style"),this.connectEvents("onMouseEnter","onMouseLeave")}render(){const{vertical:e,thickness:t,style:n,innerRef:i}=this.mergedProps,o=this.getEffectiveClassNames(["divider",this.classFromProperty(e,["horizontal","vertical"])]),s={...n,"--thickness":`${t??4}px`};return Ie("div",{ref:i,className:o,style:s,...this.unhandledProperties})}handleMouseEvent(e,t){switch(e){case ei.Enter:this.hoverTimer&&clearTimeout(this.hoverTimer),this.hoverTimer=setTimeout((()=>{t.target.classList.add("hover"),this.hoverTimer=null}),300);break;case ei.Leave:this.hoverTimer&&(clearTimeout(this.hoverTimer),this.hoverTimer=null),t.target.classList.remove("hover")}return!0}}pe(Divider,"defaultProps",{vertical:!1,thickness:4});class MenuItem extends ComponentBase{constructor(e){super(e),pe(this,"menuRef",ke()),pe(this,"itemRef"),pe(this,"openSubMenu",(e=>{var t;this.itemRef.current&&(null==(t=this.menuRef.current)||t.open(this.itemRef.current.getBoundingClientRect(),e))})),pe(this,"closeSubMenu",(()=>{var e;null==(e=this.menuRef.current)||e.close()})),pe(this,"click",(e=>{this.handleItemClick(e)})),pe(this,"handleSubMenuClose",(()=>{const{onSubMenuClose:e}=this.mergedProps;null==e||e(this.mergedProps)})),pe(this,"handleSubMenuOpen",(()=>{const{onSubMenuOpen:e}=this.mergedProps;null==e||e(this.mergedProps)})),pe(this,"handleItemMouseEnter",(e=>{var t;const{subMenuShowOnClick:n,disabled:i,onMouseEnter:o}=this.mergedProps,s=e.currentTarget;s.classList.add("active"),i||n||null==(t=this.menuRef.current)||t.open(s.getBoundingClientRect(),!1),null==o||o(e,this.mergedProps)})),pe(this,"handleItemMouseLeave",(e=>{const{onMouseLeave:t}=this.mergedProps;e.currentTarget.classList.remove("active"),null==t||t(e,this.mergedProps)})),pe(this,"handleItemClick",(e=>{var t;const{subMenuShowOnClick:n,onClick:i}=this.mergedProps,o=e.currentTarget;e.stopPropagation(),n&&e&&(null==(t=this.menuRef.current)||t.open(o.getBoundingClientRect(),!1)),null==i||i(e,this.mergedProps)})),pe(this,"handleSubmenuItemClick",((e,t)=>{const{onClick:n}=this.mergedProps;return null==n||n(e,t),!0})),pe(this,"handleMenuBack",(()=>{this.closeSubMenu()})),this.itemRef=e.innerRef??ke(),this.addHandledProperties("caption","icon","active","subMenuPlacement","onSubMenuClose","onSubMenuOpen","subMenuShowOnClick","innerRef","title")}render(){const{children:e,id:t,caption:n,icon:i,disabled:o,active:s,subMenuPlacement:r,title:a}=this.mergedProps,l="-"===n,d=o instanceof Function?o(this.mergedProps):o,c=this.getEffectiveClassNames(["menuItem",this.classFromProperty(d||l,"disabled"),this.classFromProperty(s,"active")]),u=De(e).length>0;let h;return h=l?Ie(Divider,{id:t,className:c+" separator"}):Ie(Container,{innerRef:this.itemRef,id:t,className:u?c+" submenu":c,orientation:Di.LeftToRight,onMouseEnter:this.handleItemMouseEnter,onMouseLeave:this.handleItemMouseLeave,onClick:this.handleItemClick,title:a,children:[i&&Ie(xi,{src:i}),Ie(Label,{children:n})]}),u&&(h=Ie(Re,{children:[h,Ie(Po,{id:`${t??""}Submenu`,ref:this.menuRef,onItemClick:this.handleSubmenuItemClick,onMenuBack:this.handleMenuBack,onClose:this.handleSubMenuClose,onOpen:this.handleSubMenuOpen,placement:r,...this.unhandledProperties,children:e})]})),h}}pe(MenuItem,"defaultProps",{subMenuPlacement:Zn.RightTop});const Mo=class _Menu extends ComponentBase{constructor(e){super(e),pe(this,"itemRefs",[]),pe(this,"popupRef",ke()),pe(this,"handleItemMouseEnter",((e,t)=>{this.itemRefs.forEach(((e,n)=>{var i,o;(null==(i=e.current)?void 0:i.props)===t?this.setState({activeItemIndex:n}):null==(o=e.current)||o.closeSubMenu()}))})),pe(this,"handleItemClick",((e,t)=>{const{onItemClick:n}=this.mergedProps,{payload:i}=this.state;(null==n?void 0:n(e,t,i))&&setTimeout((()=>{this.close()}),0)})),pe(this,"handleOpen",(()=>{const{onOpen:e}=this.mergedProps;_Menu.menuStack.push(this),null==e||e(this.mergedProps)})),pe(this,"handleClose",((e,t)=>{const{onClose:n}=this.mergedProps;this.itemRefs.forEach((e=>{var n,i;(null==(n=e.current)?void 0:n.props)!==t&&(null==(i=e.current)||i.closeSubMenu())})),_Menu.menuStack.pop(),null==n||n(!0,this.mergedProps)})),this.state={activeItemIndex:-1,payload:void 0},this.addHandledProperties("title","icon","onMenuBack"),this.connectEvents("onKeyDown")}static initialize(){document.body.addEventListener("click",_Menu.handleDocumentClick),document.body.addEventListener("mousedown",_Menu.handleMouseDown),document.body.addEventListener("keydown",_Menu.handleDocumentKeyDown)}render(){const{children:e}=this.mergedProps,{activeItemIndex:t}=this.state,n=this.getEffectiveClassNames(["menu"]);this.itemRefs=[];let i=0;const o=yi(e).map((e=>{const{title:n,onClick:o}=e.props,s=ke();let r=!1;return e.type===MenuItem&&"-"!==n&&(this.itemRefs.push(s),r=i++===t),Te(e,{ref:s,onMouseEnter:this.handleItemMouseEnter,onClick:(e,t)=>{null==o||o(e,t),this.handleItemClick(e,t)},active:r})}));return Ie(Popup,{ref:this.popupRef,className:n,showArrow:!1,pinned:!1,onClose:this.handleClose,onOpen:this.handleOpen,...this.unhandledProperties,children:o})}open(e,t,n,i){var o,s;n?n.blockMouseEvents=!1:n={blockMouseEvents:!1},null==(s=null==(o=this.popupRef)?void 0:o.current)||s.open(e,n),t&&this.itemRefs.length>0?this.setState({activeItemIndex:0,payload:i}):this.setState({activeItemIndex:-1,payload:i})}close(){var e,t;null==(t=null==(e=this.popupRef)?void 0:e.current)||t.close()}get clientRect(){var e;return null==(e=this.popupRef.current)?void 0:e.clientRect}handleMenuKeyDown(e){var t,n;if(this.itemRefs.length>0){const{activeItemIndex:i}=this.state;switch(e.key){case Cn:{let t=i+1;t===this.itemRefs.length&&(t=0),this.setState({activeItemIndex:t}),e.stopPropagation(),e.preventDefault();break}case kn:{let t=i-1;t<0&&(t=this.itemRefs.length-1),this.setState({activeItemIndex:t}),e.stopPropagation(),e.preventDefault();break}case wn:{const{onMenuBack:t}=this.mergedProps;null==t||t(),e.stopPropagation(),e.preventDefault();break}case yn:-1===i?this.setState({activeItemIndex:0}):null==(t=this.itemRefs[i].current)||t.openSubMenu(!0),e.stopPropagation(),e.preventDefault();break;case Sn:case bn:i>-1&&(null==(n=this.itemRefs[i].current)||n.click(e))}}}};pe(Mo,"defaultProps",{placement:Zn.RightTop,orientation:Di.TopDown}),pe(Mo,"menuStack",[]),pe(Mo,"handleDocumentKeyDown",(e=>{if(Mo.menuStack.length>0)switch(e.key){case vn:Mo.menuStack[0].close();break;default:Mo.menuStack[Mo.menuStack.length-1].handleMenuKeyDown(e);break}})),pe(Mo,"handleDocumentClick",(e=>{if(Mo.menuStack.length>0){e.composedPath().some((e=>{var t,n,i,o;const s=e,r=null==(t=s.classList)?void 0:t.contains("menu"),a=null==(n=s.classList)?void 0:n.contains("menuItem"),l=null==(i=s.classList)?void 0:i.contains("submenu"),d=null==(o=s.classList)?void 0:o.contains("statusbarItem");return r||a||l||d}))||setTimeout((()=>{Mo.menuStack[0].close()}),0)}})),pe(Mo,"handleMouseDown",(e=>{if(Mo.menuStack.length>0){e.composedPath().some((e=>{var t,n,i;const o=e,s=null==(t=o.classList)?void 0:t.contains("menu"),r=null==(n=o.classList)?void 0:n.contains("menuItem"),a=null==(i=o.classList)?void 0:i.contains("submenu");return s||r||a}))||setTimeout((()=>{Mo.menuStack[0].close()}),0)}}));let Po=Mo;Po.initialize();class ResultView extends ComponentBase{constructor(e){super(e),pe(this,"gridRef",ke()),pe(this,"columnWidthCache",new Map),pe(this,"cellContextMenuRef",ke()),pe(this,"currentCell"),pe(this,"generateColumnDefinitions",(e=>e.map((e=>{let t;const n={dbDataType:e.dataType.type};let i=50;switch(e.dataType.type){case Ui.TinyInt:case Ui.SmallInt:case Ui.MediumInt:case Ui.Int:case Ui.Bigint:t="plaintext";break;case Ui.String:case Ui.Text:case Ui.MediumText:case Ui.LongText:case Ui.Json:case Ui.Enum:case Ui.Set:t=this.stringFormatter,i=150;break;case Ui.Binary:case Ui.Varbinary:t=this.binaryFormatter;break;case Ui.Geometry:case Ui.Point:case Ui.LineString:case Ui.Polygon:case Ui.GeometryCollection:case Ui.MultiPoint:case Ui.MultiLineString:case Ui.MultiPolygon:case Ui.TinyBlob:case Ui.Blob:case Ui.MediumBlob:case Ui.LongBlob:t=this.blobFormatter;break;case Ui.Date:case Ui.DateTime:case Ui.DateTime_f:case Ui.Time:case Ui.Time_f:case Ui.Year:t=this.dateFormatter,n.type=e.dataType.type;break;case Ui.Boolean:t=this.booleanFormatter;break;default:t="plaintext"}const o=this.columnWidthCache.get(e.title);return{title:e.title,field:e.field,formatter:t,formatterParams:n,formatterClipboard:t,width:o,minWidth:i,resizable:!0}})))),pe(this,"handleColumnResized",(e=>{const t=e.getDefinition().field;t&&this.columnWidthCache.set(t,e.getWidth())})),pe(this,"handleCellMenuItemDisabled",(e=>{if(!this.currentCell||!this.gridRef.current)return!0;const t=this.gridRef.current.getSelectedRows().length??0;switch(e.id){case"openValueMenuItem":case"setNullMenuItem":case"saveToFileMenuItem":case"loadFromFileMenuItem":case"pasteRowMenuItem":case"deleteRowMenuItem":case"capitalizeMenuItem":case"lowerCaseMenuItem":case"upperCaseMenuItem":default:return!0;case"copyRowMenuItem1":case"copyRowMenuItem2":case"copyRowMenuItem3":case"copyRowMenuItem4":case"copyRowMenuItem5":case"copyRowMenuItem6":case"copyFieldMenuItem":case"copyFieldUnquotedMenuItem":return t>1;case"copyRowsMenuItem1":case"copyRowsMenuItem2":case"copyRowsMenuItem3":case"copyRowsMenuItem4":case"copyRowsMenuItem5":case"copyRowsMenuItem6":return!1;case"copyRowsMenuItem7":case"copyRowsMenuItem8":return 0===t}})),pe(this,"handleCellContext",((e,t)=>{var n,i,o;this.currentCell&&this.currentCell.getElement().classList.remove("manualFocus"),null==(n=this.currentCell)||n.cancelEdit(),this.currentCell=t,t.getElement().classList.add("manualFocus");const s=e,r=new DOMRect(s.clientX,s.clientY,2,2);null==(i=this.cellContextMenuRef.current)||i.close(),null==(o=this.cellContextMenuRef.current)||o.open(r,!1,{})})),pe(this,"formatCell",((e,t=!1)=>{if(null===e.getValue())return"NULL";{const n=e.getColumn().getDefinition().formatterParams;if(!n||!("dbDataType"in n))return String(e.getValue());switch(n.dbDataType){case Ui.TinyBlob:case Ui.Blob:case Ui.MediumBlob:case Ui.LongBlob:case Ui.Binary:case Ui.Varbinary:return Ln(String(e.getValue()));case Ui.TinyInt:case Ui.SmallInt:case Ui.MediumInt:case Ui.Int:case Ui.Bigint:case Ui.Boolean:return String(e.getValue());default:return t?String(e.getValue()):"'"+String(e.getValue())+"'"}}})),pe(this,"handleCellContextMenuItemClick",((e,t)=>{if(this.currentCell)switch(t.id){case"openValueMenuItem":case"saveToFileMenuItem":case"loadFromFileMenuItem":case"pasteRowMenuItem":case"deleteRowMenuItem":break;case"setNullMenuItem":this.currentCell.setValue(null);break;case"copyRowMenuItem1":this.copyRows(!1,!1);break;case"copyRowMenuItem2":this.copyRows(!0,!1);break;case"copyRowMenuItem3":this.copyRows(!1,!0);break;case"copyRowMenuItem4":this.copyRows(!0,!0);break;case"copyRowMenuItem5":this.copyRows(!0,!1,"\t");break;case"copyRowMenuItem6":this.copyRows(!1,!1,"\t");break;case"copyRowsMenuItem1":this.copyRows(!1,!1,",",!0);break;case"copyRowsMenuItem2":this.copyRows(!0,!1,",",!0);break;case"copyRowsMenuItem3":this.copyRows(!1,!0,",",!0);break;case"copyRowsMenuItem4":this.copyRows(!0,!0,",",!0);break;case"copyRowsMenuItem5":case"copyRowsMenuItem7":this.copyRows(!0,!1,"\t",!0);break;case"copyRowsMenuItem6":case"copyRowsMenuItem8":this.copyRows(!1,!1,"\t",!0);break;case"copyFieldMenuItem":nn.writeToClipboard(this.formatCell(this.currentCell));break;case"copyFieldUnquotedMenuItem":nn.writeToClipboard(this.formatCell(this.currentCell,!0));break;case"capitalizeMenuItem":{const e=this.currentCell.getValue();this.currentCell.setValue(Nn(e));break}case"lowerCaseMenuItem":{const e=this.currentCell.getValue();this.currentCell.setValue(e.toLowerCase());break}case"upperCaseMenuItem":{const e=this.currentCell.getValue();this.currentCell.setValue(e.toUpperCase());break}}return!0})),pe(this,"copyRows",((e,t,n=", ",i=!1)=>{var o,s;let r;r=i?(null==(o=this.gridRef.current)?void 0:o.getRows())??[]:(null==(s=this.gridRef.current)?void 0:s.getSelectedRows())??[],0===r.length&&this.currentCell&&(r=[this.currentCell.getRow()]);let a="";e&&r.length>0&&(a+="# ",r[0].getCells().forEach((e=>{a+=e.getColumn().getDefinition().title+n})),a.endsWith(n)&&(a=a.substring(0,a.length-n.length)),a+="\n"),r.forEach((e=>{e.getCells().forEach((e=>{a+=this.formatCell(e,t)+n})),a.endsWith(n)&&(a=a.substring(0,a.length-n.length)),a+="\n"})),nn.writeToClipboard(a)})),pe(this,"stringFormatter",(e=>{let t;const n=e.getValue();if(null==n){const e=document.createElement("div");return e.className="iconHost",t=Ie(xi,{src:Io,width:30,height:11}),Ue(t,e),e}return n})),pe(this,"binaryFormatter",(e=>{let t;if(null===e.getValue()){const e=document.createElement("div");return e.className="iconHost",t=Ie(xi,{src:Io,width:30,height:11}),Ue(t,e),e}{const t=e.getValue();return t?Ln(t,64):""}})),pe(this,"blobFormatter",(e=>{const t=null===e.getValue()?Io:"/assets/blob-fb4f5001.svg",n=Ie(xi,{src:t,width:30,height:11}),i=document.createElement("div");return i.className="iconHost",Ue(n,i),i})),pe(this,"dateFormatter",((e,t)=>{const n=e.getValue(),i=Intl.DateTimeFormat().resolvedOptions().locale;if("type"in t){let e;const o={};switch(t.type){case Ui.Date:case Ui.DateTime:case Ui.DateTime_f:e=new Date(n),o.year="numeric",o.month="2-digit",o.day="2-digit";break;case Ui.Time:case Ui.Time_f:e=new Date(`1970-01-01T${n}`);return e.toLocaleTimeString(i);case Ui.Year:e=new Date(n),o.year="numeric";break;default:e=new Date(n)}return e.toLocaleDateString(i,o)}return n})),pe(this,"booleanFormatter",(e=>{const t=document.createElement("div");let n;return null===e.getValue()?(n=Ie(xi,{src:Io,width:30,height:11}),t.className="iconHost"):(n=Ie(Checkbox,{checkState:0===e.getValue()?Do.Unchecked:Do.Checked}),t.className="checkBoxHost"),Ue(n,t),t})),this.state={},this.addHandledProperties("resultSet","onEdit")}componentDidUpdate(){this.currentCell=void 0}render(){const{resultSet:e}=this.mergedProps,t=this.getEffectiveClassNames(["resultView"]),n={layout:"fitData",verticalGridLines:!0,horizontalGridLines:!0,alternatingRowBackgrounds:!1,selectionType:ii.Multi,resizableRows:!0},i=e.data.executionInfo,o=i&&i.type===zi.Error,s=i&&i.type===zi.Response;return Ie(Container,{className:t,orientation:Di.TopDown,...this.unhandledProperties,children:[!o&&!s&&Ie(TreeGrid,{ref:this.gridRef,options:n,columns:this.generateColumnDefinitions(e.columns),tableData:e.data.rows,onColumnResized:this.handleColumnResized,onCellContext:this.handleCellContext}),Ie(Po,{id:"cellContextMenu",ref:this.cellContextMenuRef,placement:Zn.BottomLeft,onItemClick:this.handleCellContextMenuItemClick,children:[Ie(MenuItem,{id:"openValueMenuItem",caption:"Open Value in Editor",disabled:this.handleCellMenuItemDisabled}),Ie(MenuItem,{id:"setNullMenuItem",caption:"Set Field to Null",disabled:this.handleCellMenuItemDisabled}),Ie(MenuItem,{caption:"-",disabled:!0}),Ie(MenuItem,{id:"saveToFileMenuItem",caption:"Save Value to File...",disabled:this.handleCellMenuItemDisabled}),Ie(MenuItem,{id:"loadFromFileMenuItem",caption:"Load Value from File...",disabled:this.handleCellMenuItemDisabled}),Ie(MenuItem,{caption:"-",disabled:!0}),Ie(MenuItem,{id:"copyRowSubmenu",caption:"Copy Single Row",children:[Ie(MenuItem,{id:"copyRowMenuItem1",caption:"Copy Row",disabled:this.handleCellMenuItemDisabled}),Ie(MenuItem,{id:"copyRowMenuItem2",caption:"Copy Row With Names",disabled:this.handleCellMenuItemDisabled}),Ie(MenuItem,{id:"copyRowMenuItem3",caption:"Copy Row Unquoted",disabled:this.handleCellMenuItemDisabled}),Ie(MenuItem,{id:"copyRowMenuItem4",caption:"Copy Row With Names, Unquoted",disabled:this.handleCellMenuItemDisabled}),Ie(MenuItem,{id:"copyRowMenuItem5",caption:"Copy Row With Names, Tab Separated",disabled:this.handleCellMenuItemDisabled}),Ie(MenuItem,{id:"copyRowMenuItem6",caption:"Copy Row Tab Separated",disabled:this.handleCellMenuItemDisabled})]}),Ie(MenuItem,{id:"copyRowsSubmenu",caption:"Copy Multiple Rows",children:[Ie(MenuItem,{id:"copyRowsMenuItem1",caption:"Copy All Rows",disabled:this.handleCellMenuItemDisabled}),Ie(MenuItem,{id:"copyRowsMenuItem2",caption:"Copy All Rows With Names",disabled:this.handleCellMenuItemDisabled}),Ie(MenuItem,{id:"copyRowsMenuItem3",caption:"Copy All Rows Unquoted",disabled:this.handleCellMenuItemDisabled}),Ie(MenuItem,{id:"copyRowsMenuItem4",caption:"Copy All Rows With Names, Unquoted",disabled:this.handleCellMenuItemDisabled}),Ie(MenuItem,{id:"copyRowsMenuItem5",caption:"Copy All Rows With Names, Tab Separated",disabled:this.handleCellMenuItemDisabled}),Ie(MenuItem,{id:"copyRowsMenuItem6",caption:"Copy All Rows Tab Separated",disabled:this.handleCellMenuItemDisabled}),Ie(MenuItem,{id:"copyRowsMenuItem7",caption:"Copy Selected Rows",disabled:this.handleCellMenuItemDisabled}),Ie(MenuItem,{id:"copyRowsMenuItem8",caption:"Copy All Selected Rows, Tab Separated",disabled:this.handleCellMenuItemDisabled})]}),Ie(MenuItem,{id:"copyFieldMenuItem",caption:"Copy Field",disabled:this.handleCellMenuItemDisabled}),Ie(MenuItem,{id:"copyFieldUnquotedMenuItem",caption:"Copy Field Unquoted",disabled:this.handleCellMenuItemDisabled}),Ie(MenuItem,{id:"pasteRowMenuItem",caption:"Paste Row",disabled:this.handleCellMenuItemDisabled}),Ie(MenuItem,{caption:"-",disabled:!0}),Ie(MenuItem,{id:"deleteRowMenuItem",caption:"Delete Row",disabled:this.handleCellMenuItemDisabled}),Ie(MenuItem,{caption:"-",disabled:!0}),Ie(MenuItem,{id:"capitalizeMenuItem",caption:"Capitalize Text",disabled:this.handleCellMenuItemDisabled}),Ie(MenuItem,{id:"lowerCaseMenuItem",caption:"Convert Text to Lower Case",disabled:this.handleCellMenuItemDisabled}),Ie(MenuItem,{id:"upperCaseMenuItem",caption:"Convert Text to Upper Case",disabled:this.handleCellMenuItemDisabled})]})]})}updateColumns(e){return this.gridRef.current?this.gridRef.current.setColumns(this.generateColumnDefinitions(e)):Promise.resolve()}async addData(e,t){this.gridRef.current&&(t?await this.gridRef.current.setData(e.rows,Ci.Replace):await this.gridRef.current.setData(e.rows,Ci.Add),e.executionInfo&&this.setState({dirty:!1}))}setFakeCell(e){this.currentCell=e}}const Lo=class _JsonView extends ComponentBase{constructor(e){super(e),fe(this,_,void 0),fe(this,G,ke()),pe(this,"createValueNode",((e,t)=>{const n=null===e?"null":Array.isArray(e)?"array":typeof e,i=ge(_JsonView,w).cloneNode(!1);i.addEventListener("click",ge(this,V));let o=0;"object"===n?o=Object.keys(e).length:"array"===n&&(o=e.length);let s,r,a=!1;if("object"===n||"array"===n){const t=e;for(const e in t)if(t.hasOwnProperty(e)){a=!0;break}a&&i.appendChild(ge(_JsonView,y).cloneNode(!1))}if(void 0!==t){i.classList.add("objProp");const e=ge(_JsonView,k).cloneNode(!1);e.textContent=JSON.stringify(t).slice(1,-1),i.appendChild(ge(_JsonView,O).cloneNode(!1)),i.appendChild(e),i.appendChild(ge(_JsonView,O).cloneNode(!1)),i.appendChild(ge(_JsonView,B).cloneNode(!0))}else i.classList.add("arrElem");switch(n){case"string":{const t=ge(_JsonView,I).cloneNode(!1),n=e;let o=JSON.stringify(n);if(o=o.substring(1,o.length-1),n.startsWith("https://")||n.startsWith("http://")||"/"===n[0]){const e=document.createElement("a");e.href=n,e.innerText=o,t.appendChild(e)}else t.innerText=o;i.appendChild(ge(_JsonView,O).cloneNode(!1)),i.appendChild(t),i.appendChild(ge(_JsonView,O).cloneNode(!1));break}case"number":{const t=ge(_JsonView,D).cloneNode(!1);t.innerText=String(e),i.appendChild(t);break}case"object":if(i.appendChild(ge(_JsonView,E).cloneNode(!0)),a){i.appendChild(ge(_JsonView,F).cloneNode(!1)),s=ge(_JsonView,A).cloneNode(!1);const t=e;let n,o;for(const e in t){o=this.createValueNode(t[e],e);const i=ge(_JsonView,N).cloneNode();o.appendChild(i),s.appendChild(o),n=i}void 0!==o&&void 0!==n&&o.removeChild(n),i.appendChild(s)}i.appendChild(ge(_JsonView,M).cloneNode(!0)),i.dataset.size=` // ${o} ${1===o?"item":"items"}`;break;case"boolean":e?i.appendChild(ge(_JsonView,R).cloneNode(!0)):i.appendChild(ge(_JsonView,x).cloneNode(!0));break;case"array":{const t=e;if(i.appendChild(ge(_JsonView,P).cloneNode(!0)),a){i.appendChild(ge(_JsonView,F).cloneNode(!1)),s=ge(_JsonView,A).cloneNode(!1);for(let e=0,n=t.length,i=n-1;e<n;e++){if(r=this.createValueNode(t[e]),e<i){const e=ge(_JsonView,N).cloneNode();r.appendChild(e)}s.appendChild(r)}i.appendChild(s)}i.appendChild(ge(_JsonView,L).cloneNode(!0)),i.dataset.size=` // ${o} ${1===o?"item":"items"}`;break}case"null":i.appendChild(ge(_JsonView,T).cloneNode(!0))}return i})),fe(this,V,(e=>{var t;const n=window.getSelection();if("Range"===(null==n?void 0:n.type))return;let i=e.target;if(i.classList.contains("entry")||(i=i.parentElement),i.classList.contains("entry")){if(i.classList.toggle("collapsed"),e.altKey){const e=null==(t=i.parentElement)?void 0:t.children;if(e)for(const t of e)t!==i&&t.classList.toggle("collapsed",i.classList.contains("collapsed"))}e.stopPropagation()}})),this.addHandledProperties("json","style");const t="string"==typeof e.json?JSON.parse(e.json):e.json;be(this,_,this.createValueNode(t))}componentDidMount(){const e=ge(this,G).current;null!==e&&e.appendChild(ge(this,_))}componentDidUpdate(e,t,n){if(e.json!==this.props.json){const{json:e}=this.props,t="string"==typeof e?JSON.parse(e):e;be(this,_,this.createValueNode(t));const n=ge(this,G).current;null!==n&&(n.innerHTML="",n.appendChild(ge(this,_)))}}render(){const{style:e}=this.props,t=this.getEffectiveClassNames(["jsonView"]),n=mi.get,i={...e,"--arrayDelimiterColor":`${n.getTokenForegroundColor("delimiter.array.json")??"#FF0000"}`,"--objectDelimiterColor":`${n.getTokenForegroundColor("delimiter.brackets.json")??"#FF0000"}`,"--colonDelimiterColor":`${n.getTokenForegroundColor("delimiter.colon.json")??"#FF0000"}`,"--commaDelimiterColor":`${n.getTokenForegroundColor("delimiter.comma.json")??"#FF0000"}`,"--keyColor":`${n.getTokenForegroundColor("string.key.json")??"#FF0000"}`,"--valueColor":`${n.getTokenForegroundColor("string.value.json")??"#FF0000"}`,"--keywordColor":`${n.getTokenForegroundColor("keyword.json")??"#FF0000"}`};return Ie("div",{ref:ge(this,G),className:t,style:i})}};C=new WeakMap,w=new WeakMap,y=new WeakMap,k=new WeakMap,I=new WeakMap,D=new WeakMap,T=new WeakMap,R=new WeakMap,x=new WeakMap,E=new WeakMap,M=new WeakMap,P=new WeakMap,L=new WeakMap,F=new WeakMap,A=new WeakMap,B=new WeakMap,N=new WeakMap,O=new WeakMap,_=new WeakMap,G=new WeakMap,U=new WeakSet,q=function(e,t){const n=ge(this,C).cloneNode(!1);return n.className=e,t&&(n.textContent=t),n},V=new WeakMap,fe(Lo,U),fe(Lo,C,document.createElement("span")),fe(Lo,w,ve(s=Lo,U,q).call(s,"entry")),fe(Lo,y,ve(r=Lo,U,q).call(r,"e")),fe(Lo,k,ve(a=Lo,U,q).call(a,"k")),fe(Lo,I,ve(l=Lo,U,q).call(l,"s")),fe(Lo,D,ve(d=Lo,U,q).call(d,"n")),fe(Lo,T,ve(c=Lo,U,q).call(c,"nl","null")),fe(Lo,R,ve(u=Lo,U,q).call(u,"bl","true")),fe(Lo,x,ve(h=Lo,U,q).call(h,"bl","false")),fe(Lo,E,ve(p=Lo,U,q).call(p,"o","{")),fe(Lo,M,ve(m=Lo,U,q).call(m,"o","}")),fe(Lo,P,ve(g=Lo,U,q).call(g,"a","[")),fe(Lo,L,ve(f=Lo,U,q).call(f,"a","]")),fe(Lo,F,ve(b=Lo,U,q).call(b,"ell")),fe(Lo,A,ve(v=Lo,U,q).call(v,"blockInner")),fe(Lo,B,ve(S=Lo,U,q).call(S,"del",": ")),fe(Lo,N,document.createTextNode(",")),fe(Lo,O,document.createTextNode('"'));let Fo=Lo;class ActionOutput extends ComponentBase{constructor(e){super(e),pe(this,"outputRef",ke()),pe(this,"trackingSelection",!1),pe(this,"handleLabelClick",(e=>{let t;for(const n of e.composedPath()){const e=n;if(e.classList.contains("actionLabel")){t=e;break}}if(t&&t.id){const{contextId:e}=this.props;nn.execute("editorSelectStatement",{contextId:e,statementIndex:parseInt(t.id,10)})}})),pe(this,"handlePointerDown",(e=>{if(1===e.buttons){const t=e.target;t.focus(),this.trackingSelection=!0;const n=this.getMouseEventCaretRange(e);null!==n&&(this.selectTextRange(n),t.setPointerCapture(e.pointerId))}})),pe(this,"handlePointerMove",(e=>{if(this.trackingSelection){const t=window.getSelection();if(t){const n=this.getMouseEventCaretRange(e);null!==n&&t.extend(n.startContainer,n.startOffset)}}})),pe(this,"handlePointerUp",(e=>{if(0===e.buttons){this.trackingSelection=!1;e.target.releasePointerCapture(e.pointerId)}})),pe(this,"getMouseEventCaretRange",(e=>{let t;const n=e.clientX,i=e.clientY;return t="caretPositionFromPoint"in document?document.caretPositionFromPoint(n,i):document.caretRangeFromPoint(n,i),t})),pe(this,"selectTextRange",(e=>{const t=window.getSelection();null==t||t.removeAllRanges(),null==t||t.addRange(e)})),pe(this,"copyToClipboard",(()=>{if(this.outputRef.current){const e=window.getSelection();let t=(null==e?void 0:e.toString())??"";""===t&&(t=this.outputRef.current.innerText??""),t.length>0&&nn.writeToClipboard(t)}})),this.addHandledProperties("output","contextId","showIndexes","onLabelClick")}componentDidUpdate(){var e;const t=null==(e=this.outputRef.current)?void 0:e.lastElementChild;t&&"scrollIntoView"in t&&t.scrollIntoView()}render(){const{output:e,showIndexes:t=!1}=this.props,n=this.getEffectiveClassNames(["actionOutput"]),i=[],o=t&&e&&e.length>1;return null==e||e.forEach((e=>{const t=void 0!==e.index&&e.index>=0?e.index:void 0,n=[];let s=1;void 0!==t&&o?n.push(Ie(Label,{className:"commandIndex",caption:`#${t+1}: `})):s=2;try{const t=JSON.parse(e.content);n.push(Ie(Fo,{json:t}))}catch(r){n.push(Ie(Label,{className:"actionLabel"+(void 0===t?"":" clickable"),id:null==t?void 0:t.toString(),language:e.language??"ansi",caption:e.content,type:e.type,style:{gridColumn:`span ${s}`},tabIndex:void 0===t?-1:0,"data-tooltip":void 0,onClick:this.handleLabelClick},e.resultId))}i.push(Ie("div",{style:{display:"flex",flex:"1",gap:"2px",flexDirection:"row"},children:n}))})),Ie(Re,{children:[Ie(Button,{className:"copyButton","data-tooltip":"Copy result to clipboard",imageOnly:!0,focusOnClick:!1,tabIndex:-1,onPointerDown:this.copyToClipboard,children:Ie(xi,{src:Ti.Copy,"data-tooltip":"inherit"})}),Ie(Container,{innerRef:this.outputRef,orientation:Di.TopDown,className:n,onPointerDown:this.handlePointerDown,onPointerMove:this.handlePointerMove,onPointerUp:this.handlePointerUp,children:i})]})}}class DropdownItem extends ComponentBase{constructor(e){super(e),this.addHandledProperties("caption","picture","description","checked")}render(){const{caption:e,picture:t,selected:n,checked:i,children:o}=this.mergedProps,s=this.getEffectiveClassNames(["dropdownItem","ellipsis","verticalCenterContent",this.classFromProperty(n,"selected")]);let r=o;return r||(r=null!=i?Ie(Checkbox,{checkState:i?Do.Checked:Do.Unchecked,caption:e}):t?Ie(Container,{orientation:Di.LeftToRight,crossAlignment:ki.Center,children:[t,e&&Ie(Label,{children:e})]}):Ie(Label,{children:e})),Ie(Container,{className:s,...this.unhandledProperties,children:r})}}class TagInput extends ComponentBase{constructor(e){super(e),pe(this,"handleCloseButtonClick",((e,t)=>{const{onRemove:n}=this.mergedProps;"msg icon"===e.target.className&&(e.stopPropagation(),null==n||n(t.id||"",this.mergedProps))})),this.addHandledProperties("tags","removable","onAdd","onRemove","orientation","canAdd","innerRef"),this.connectDragEvents()}render(){const{tags:e,removable:t,innerRef:n,orientation:i,children:o}=this.mergedProps,s=this.getEffectiveClassNames(["tagInput"]),r=null==e?void 0:e.map((e=>Ie(Label,{className:"tag",draggable:!0,children:[e.caption,t&&Ie(Button,{id:e.id,onClick:this.handleCloseButtonClick,children:Ie(xi,{src:bi})})]},e.id)));return Ie(Container,{innerRef:n,className:s,orientation:i,wrap:Ii.Wrap,...this.unhandledProperties,children:[r,o]})}handleDragEvent(e,t){const n=t.currentTarget;switch(e){case ni.Start:t.dataTransfer&&(t.dataTransfer.setData("text/tag",t.target.innerText),t.dataTransfer.effectAllowed="copy");break;case ni.Over:if(t.dataTransfer){const{canAdd:e}=this.mergedProps,n=t.dataTransfer.items;let i=!1;1===n.length&&"text/tag"===n[0].type&&(i=(null==e?void 0:e(this.mergedProps))??!0),t.dataTransfer.dropEffect=i?"copy":"none",t.preventDefault()}break;case ni.Enter:n.classList.add("dropTarget");break;case ni.Leave:n.classList.remove("dropTarget");break;case ni.Drop:if(t.preventDefault(),n.classList.remove("dropTarget"),t.dataTransfer){const{tags:e,onAdd:n}=this.mergedProps,i=t.dataTransfer.getData("text/tag");if(!e||0===e.length){null==n||n(i,this.mergedProps);break}-1===(null==e?void 0:e.findIndex((e=>e.caption===i)))&&(null==n||n(i,this.mergedProps))}}return!0}}class Dropdown extends ComponentBase{constructor(e){super(e),pe(this,"containerRef",ke()),pe(this,"listRef",ke()),pe(this,"popupRef",ke()),pe(this,"currentSelectionIndex",-1),pe(this,"selectionIndexBackup",-1),pe(this,"selectionBackup"),pe(this,"handleClick",(e=>{var t;const n=e.currentTarget;null==(t=this.popupRef.current)||t.open(n.getBoundingClientRect(),{backgroundOpacity:0})})),pe(this,"handleKeydown",(e=>{var t,n,i;const{children:o}=this.mergedProps,s=yi(o),r=e.currentTarget;switch(e.key){case bn:case Sn:if(null==(t=this.popupRef.current)?void 0:t.isOpen){this.saveSelection(),this.popupRef.current.close();const e=s[this.currentSelectionIndex].props.id;e&&this.toggleSelectedItem(e,!1)}else null==(n=this.popupRef.current)||n.open(r.getBoundingClientRect(),{backgroundOpacity:0});e.stopPropagation(),e.preventDefault();break;case Cn:{-1===this.currentSelectionIndex?this.currentSelectionIndex=this.indexOfFirstSelectedEntry+1:++this.currentSelectionIndex,this.currentSelectionIndex===s.length&&(this.currentSelectionIndex=0);const t=s[this.currentSelectionIndex].props.id;t&&this.toggleSelectedItem(t,!0),e.stopPropagation(),e.preventDefault();break}case kn:{-1===this.currentSelectionIndex?this.currentSelectionIndex=this.indexOfFirstSelectedEntry-1:--this.currentSelectionIndex,this.currentSelectionIndex<0&&(this.currentSelectionIndex=s.length-1);const t=s[this.currentSelectionIndex].props.id;t&&this.toggleSelectedItem(t,!0),e.stopPropagation(),e.preventDefault();break}case vn:this.saveSelection(),null==(i=this.popupRef.current)||i.close()}})),pe(this,"handleBlur",(()=>{var e;null==(e=this.containerRef.current)||e.classList.remove("manualFocus")})),pe(this,"handleItemMouseEnter",((e,t)=>{var n;const{showDescription:i}=this.mergedProps;i&&this.setState({hotId:t.id});const o=null==(n=e.currentTarget.parentElement)?void 0:n.children;[].forEach.call(o,(e=>{e.classList.remove("selected")}));e.currentTarget.classList.add("selected")})),pe(this,"handleItemMouseLeave",((e,t)=>{const{showDescription:n}=this.mergedProps;n&&this.setState({hotId:t.id});e.currentTarget.classList.remove("selected")})),pe(this,"handleItemClick",((e,t)=>{var n;const{multiSelect:i}=this.mergedProps;t.id&&this.toggleSelectedItem(t.id,!1),i||null==(n=this.popupRef.current)||n.close()})),pe(this,"toggleSelectedItem",((e,t)=>{const{selection:n,multiSelect:i,optional:o,onSelect:s}=this.mergedProps;let r;o&&"empty"===e?r=new Set:(r=new Set(t||!i?new Set:n),r.has(e)?r.delete(e):r.add(e)),null==s||s(r,this.props)})),pe(this,"handleOpen",(()=>{if(this.saveSelection(),null!=this.containerRef.current&&null!=this.listRef.current){const e=this.containerRef.current.getBoundingClientRect();this.listRef.current.style.width=En(e.width),this.containerRef.current.classList.add("manualFocus"),this.listRef.current.classList.add("manualFocus")}})),pe(this,"handleClose",(e=>{var t;const{multiSelect:n}=this.mergedProps;!n&&e&&this.restoreSelection(),null==(t=this.containerRef.current)||t.classList.remove("manualFocus")})),pe(this,"handleTagAdd",(e=>{const{children:t}=this.mergedProps;let n;yi(t).forEach((t=>{const{caption:i,id:o}=t.props;i===e&&(n=o)})),n&&this.toggleSelectedItem(n,!1)})),pe(this,"handleTagRemove",(e=>{this.toggleSelectedItem(e,!1)})),pe(this,"saveSelection",(()=>{const{selection:e}=this.mergedProps;this.selectionIndexBackup=this.currentSelectionIndex,this.selectionBackup="string"==typeof e?new Set([e]):e})),pe(this,"restoreSelection",(()=>{const{onSelect:e}=this.mergedProps;this.currentSelectionIndex=this.selectionIndexBackup,null==e||e(this.selectionBackup??new Set,this.props)})),this.state={},this.addHandledProperties("selection","defaultId","optional","showDescription","multiSelect","withoutArrow","autoFocus","onSelect")}componentDidMount(){const{autoFocus:e}=this.mergedProps;this.currentSelectionIndex=this.indexOfFirstSelectedEntry,null!=this.containerRef.current&&e&&this.containerRef.current.focus()}componentDidUpdate(){var e;if(this.popupRef.current&&this.popupRef.current.isOpen||null==this.containerRef.current){if(this.containerRef.current){const t=this.containerRef.current.getBoundingClientRect();null==(e=this.popupRef.current)||e.updatePosition(t)}}else this.containerRef.current.classList.contains("manualFocus")&&(this.containerRef.current.classList.remove("manualFocus"),this.containerRef.current.focus());this.currentSelectionIndex=this.indexOfFirstSelectedEntry}render(){const{children:e,id:t,defaultId:n,selection:i,optional:o,showDescription:s,withoutArrow:r,multiSelect:a,placeholder:l}=this.mergedProps,{hotId:d}=this.state,c="string"==typeof i?new Set([i]):i,u=this.descriptionFromId(d||(null==c?void 0:c.values().next().value)),h=this.getEffectiveClassNames(["dropdown",r?"withoutArrow":"",this.classFromProperty(a,"multiSelect")]),p=[];let m=null;let g;if(m=yi(e).map((e=>{let t="",i=!1;const{id:o,caption:s,picture:r}=e.props;return(null==c?void 0:c.has(o))&&(p.push({id:o??"",caption:s,picture:r}),i=!0),n&&o===n&&(t="default"),Te(e,{onMouseEnter:this.handleItemMouseEnter,onMouseLeave:this.handleItemMouseLeave,onClick:this.handleItemClick,className:t,selected:!a&&(null==c?void 0:c.has(o)),checked:a?i:void 0})})),o&&(null==m||m.splice(0,0,Ie(DropdownItem,{id:"empty",caption:"empty",selected:null==c?void 0:c.has("empty"),onMouseEnter:this.handleItemMouseEnter,onMouseLeave:this.handleItemMouseLeave,onClick:this.handleItemClick},"empty"))),a)g=Ie(TagInput,{innerRef:this.containerRef,className:h,tags:p,removable:!1,tabIndex:0,onAdd:this.handleTagAdd,onRemove:this.handleTagRemove,onClick:this.handleClick,onKeyDown:this.handleKeydown,...this.unhandledProperties});else{let e;p.length>0?e=p[0].picture?Ie(Container,{orientation:Di.LeftToRight,crossAlignment:ki.Center,children:[p[0].picture,p[0].caption&&Ie(Label,{children:p[0].caption})]}):Ie(Label,{className:"ellipsis",children:p[0].caption}):l&&(e=Ie(Label,{className:"placeholder","data-tooltip":"inherit",children:l})),g=Ie(Container,{innerRef:this.containerRef,className:h,tabIndex:0,onClick:this.handleClick,onKeyDown:this.handleKeydown,crossAlignment:ki.Center,onBlur:this.handleBlur,...this.unhandledProperties,children:e})}return Ie(Re,{children:[g,Ie(Popup,{ref:this.popupRef,innerRef:this.listRef,id:`${t||""}Popup`,showArrow:!1,placement:Zn.BottomRight,onOpen:this.handleOpen,onClose:this.handleClose,className:"dropdownList",children:[m,s&&Ie(Re,{children:[Ie(Divider,{className:"dropdownDivider",thickness:1}),Ie(Label,{className:"dropdownDescription",children:u})]})]})]})}descriptionFromId(e){let t="";if(e){const{children:n}=this.mergedProps;yi(n).forEach((n=>{n.props.id===e&&(t=n.props.description??"")}))}return t}get indexOfFirstSelectedEntry(){const{selection:e}=this.mergedProps,{children:t}=this.mergedProps,n=yi(t),i="string"==typeof e?new Set([e]):e;if(null!=i&&i.size>0){const e=i.keys().next().value;return n.findIndex((t=>t.props.id===e))}return-1}}pe(Dropdown,"Item",DropdownItem),pe(Dropdown,"defaultProps",{optional:!1,showDescription:!1,multiSelect:!1,withoutArrow:!1});var Ao=(e=>(e.Top="top",e.Right="right",e.Bottom="bottom",e.Left="left",e))(Ao||{});class Tabview extends ComponentBase{constructor(e){super(e),pe(this,"contentRef",ke()),pe(this,"sliderRef",ke()),pe(this,"tabAreaRef",ke()),pe(this,"trackingSliderMove",!1),pe(this,"lastSliderPosition"),pe(this,"resizeObserver"),pe(this,"handleTabviewDragEnter",(e=>{e.stopPropagation(),e.preventDefault(),e.currentTarget.classList.add("dropTarget")})),pe(this,"handleTabviewDragLeave",(e=>{e.stopPropagation(),e.preventDefault(),e.currentTarget.classList.remove("dropTarget")})),pe(this,"handleTabviewDragOver",(e=>{e.preventDefault(),e.stopPropagation()})),pe(this,"handleTabviewDrop",((e,t)=>{e.stopPropagation(),e.preventDefault(),e.currentTarget.classList.remove("dropTarget");const{onDrop:n}=this.mergedProps;null==n||n(e,t)})),pe(this,"selectTab",((e,t)=>{const{onSelectTab:n}=this.mergedProps;null==n||n(t.id)})),pe(this,"handleTabItemDragEnter",((e,t)=>{if(e.dataTransfer){const n=this.getDragSourceId(e);n&&n!==t.id?(e.dataTransfer.dropEffect="move",e.preventDefault(),e.stopPropagation()):e.dataTransfer.dropEffect="none"}})),pe(this,"handleTabItemDrop",((e,t)=>{var n,i;if(!e.dataTransfer)return;if(null==(n=e.dataTransfer)?void 0:n.items){const n=this.getDragSourceId(e);if(n){const{pages:e,onMoveTab:o}=this.mergedProps,s=e.findIndex((e=>e.id===n));if(s>-1){let r=e.length-1;if(t.id&&(null==(i=t.id)?void 0:i.length)>0&&(r=e.findIndex((e=>e.id===t.id))),r>-1&&s!==r){const t=e[s];e.splice(s,1),e.splice(r,0,t),null==o||o(n,s,r),this.setState({updated:!0})}}}}})),pe(this,"getDragSourceId",(e=>{var t;if(!e.dataTransfer)return;const n=null==(t=e.dataTransfer)?void 0:t.items;if(n&&n.length>0){const e=n[0];if("string"===e.kind&&e.type.startsWith("sourceid:"))return e.type.substring(9)}})),pe(this,"handleResize",(()=>{if(this.sliderRef.current&&this.tabAreaRef.current){const e=this.tabAreaRef.current.scrollWidth,t=this.tabAreaRef.current.clientWidth;if(e>t){const n=t*t/e;this.sliderRef.current.style.width=`${n}px`,this.sliderRef.current.style.display="block"}else this.sliderRef.current.style.display="none"}})),pe(this,"handleSliderDown",(e=>{var t;1===e.buttons&&(this.trackingSliderMove=!0,this.lastSliderPosition=e.clientX,null==(t=this.sliderRef.current)||t.setPointerCapture(e.pointerId))})),pe(this,"handleSliderMove",(e=>{var t;if(this.trackingSliderMove&&this.sliderRef.current&&this.tabAreaRef.current){const n=this.tabAreaRef.current.clientWidth,i=n-((null==(t=this.sliderRef.current)?void 0:t.clientWidth)??0),o=e.clientX-this.lastSliderPosition;let s=this.sliderRef.current.offsetLeft+o;s<0&&(s=0),s>i&&(s=i),this.sliderRef.current.style.left=`${s}px`,this.lastSliderPosition=e.clientX;const r=(this.tabAreaRef.current.scrollWidth-n)*s/i;this.tabAreaRef.current.scrollLeft=r}})),pe(this,"handleSliderUp",(e=>{var t;this.trackingSliderMove=!1,null==(t=this.sliderRef.current)||t.releasePointerCapture(e.pointerId)})),pe(this,"scrollActiveItemIntoView",(()=>{const{selectedId:e}=this.mergedProps;if(this.tabAreaRef.current&&e){const t=this.tabAreaRef.current,n=document.getElementById(`${e}`);if(n){const e=t.getBoundingClientRect(),i=n.getBoundingClientRect();i.left<e.left?t.scrollLeft-=e.left-i.left:i.right>e.right&&(t.scrollLeft+=i.right-e.right);const o=t.scrollLeft*t.clientWidth/t.scrollWidth;this.sliderRef.current.style.left=`${o}px`}}})),pe(this,"handleWheel",(e=>{if(this.tabAreaRef.current){const t=this.tabAreaRef.current;t.scrollLeft+=e.deltaX;const n=t.scrollLeft*t.clientWidth/t.scrollWidth;this.sliderRef.current.style.left=`${n}px`}})),this.addHandledProperties("tabPosition","selectedId","stretchTabs","hideSingleTab","showTabs","pages","onSelectTab","tabBorderWidth","style","canReorderTabs","contentSeparatorWidth","onMoveTab"),"undefined"!=typeof ResizeObserver&&(this.resizeObserver=new ResizeObserver(this.handleResize)),e.canReorderTabs&&this.connectDragEvents()}componentDidMount(){var e;null==(e=this.resizeObserver)||e.observe(this.contentRef.current)}componentDidUpdate(){this.scrollActiveItemIntoView(),this.handleResize()}render(){const{tabPosition:e,stretchTabs:t,hideSingleTab:n,pages:i,tabBorderWidth:o,style:s,contentSeparatorWidth:r,selectedId:a,showTabs:l,canReorderTabs:d,auxillary:c}=this.mergedProps,u=this.getEffectiveClassNames(["tabview",e]),h=i.map((e=>{let t="tabItem"+(e.auxillary?" hasAuxillary":"");return e.id===a&&(t+=" selected"),Ie(Button,{"data-tooltip":e.tooltip,id:e.id,tabIndex:-1,className:t,focusOnClick:!1,draggable:d,onClick:this.selectTab,onDragEnter:this.handleTabItemDragEnter,onDrop:this.handleTabItemDrop,children:[e.icon&&Ie(xi,{src:e.icon,"data-tooltip":"inherit"}),e.caption&&Ie(Label,{"data-tooltip":"inherit",children:e.caption}),e.auxillary&&Ie("span",{id:"auxillary",children:e.auxillary})]},e.id)}));let p;const m=i.findIndex((e=>e.id===a));let g,f;switch(m>-1&&(p=i[m].content),e){case"top":g=Di.TopDown,f=Di.LeftToRight;break;case"right":g=Di.RightToLeft,f=Di.TopDown;break;case"bottom":g=Di.BottomUp,f=Di.LeftToRight;break;default:g=Di.LeftToRight,f=Di.TopDown}const b={...s,"--tabItem-border-width":En(o??0),"--content-separator-width":En(r??0)},v="tabArea"+(t?" stretched":"");return Ie(Container,{orientation:g,className:u,style:b,...this.unhandledProperties,children:[l&&(!n||h.length>1)&&Ie(Container,{orientation:f,className:"tabAreaContainer",fixedScrollbars:!1,children:[Ie("div",{className:"scrollable",onWheel:this.handleWheel,children:[Ie(Container,{innerRef:this.tabAreaRef,className:v,orientation:f,fixedScrollbars:!1,onDragOver:this.handleTabviewDragOver,onDrop:this.handleTabItemDrop,children:h}),Ie("div",{className:"scrollbar",children:Ie("div",{className:"slider",ref:this.sliderRef,onPointerDown:this.handleSliderDown,onPointerMove:this.handleSliderMove,onPointerUp:this.handleSliderUp})})]}),c&&Ie("span",{className:"auxillary",children:c})]}),Ie(Container,{innerRef:this.contentRef,orientation:Di.TopDown,className:"content",onDrop:this.handleTabviewDrop,onDragEnter:this.handleTabviewDragEnter,onDragLeave:this.handleTabviewDragLeave,onDragOver:this.handleTabviewDragOver,children:p})]})}}pe(Tabview,"defaultProps",{tabPosition:"top",stretchTabs:!0,hideSingleTab:!1,showTabs:!0});class Toolbar extends ComponentBase{constructor(e){super(e),this.addHandledProperties("vibrant","dropShadow","innerRef")}render(){const{children:e,innerRef:t,vibrant:n,dropShadow:i}=this.mergedProps,o=this.getEffectiveClassNames(["toolbar",this.classFromProperty(i,"dropShadow"),"verticalCenterContent",this.classFromProperty(n,"vibrant")]);return Ie(Container,{innerRef:t,orientation:Di.LeftToRight,className:o,crossAlignment:ki.Center,...this.unhandledProperties,children:e})}}pe(Toolbar,"defaultProps",{vibrant:!1,dropShadow:!0});class Message extends ComponentBase{constructor(e){super(e),this.addHandledProperties("type")}render(){const{children:e,type:t}=this.mergedProps,n=this.getEffectiveClassNames(["message",this.classFromProperty(t,["error","warning","info","response","interactive"])]);return Ie("div",{className:n,...this.unhandledProperties,children:e})}}class ResultStatus extends ComponentBase{constructor(e){super(e),this.addHandledProperties("executionInfo")}render(){const{executionInfo:e,children:t}=this.props;if(!e.text&&!t)return;let n,i="";null!=e.type&&e.type!==zi.Response?(i="containsMessage",n=Ie(Message,{type:e.type,children:e.text})):n=Ie(Label,{children:e.text});const o=this.getEffectiveClassNames(["resultStatus",i]);return Ie(Container,{className:o,orientation:Di.LeftToRight,...this.unhandledProperties,children:[n,null==e.type&&t]})}}class ResultTabView extends ComponentBase{constructor(e){super(e),pe(this,"actionMenuRef",ke()),pe(this,"edited",new Set),pe(this,"viewRefs",new Map),pe(this,"handleTabSelection",(e=>{let t=0;if("output"===e)this.setState({currentResultSet:void 0,manualTab:!0});else{const{resultSets:n}=this.props,i=n.sets.find(((n,i)=>n.resultId===e&&(t=i+1,!0)));this.setState({currentResultSet:i,manualTab:!0})}const{onSelectTab:n}=this.props;null==n||n(t)})),pe(this,"showActionMenu",(e=>{var t,n;if(e.stopPropagation(),e instanceof MouseEvent){const i=new DOMRect(e.clientX,e.clientY,2,2);null==(t=this.actionMenuRef.current)||t.close(),null==(n=this.actionMenuRef.current)||n.open(i,!1)}})),pe(this,"handleActionMenuItemClick",((e,t)=>(t.id,!0))),pe(this,"previousPage",(()=>{const{currentResultSet:e}=this.state;if(e&&e.data.currentPage>0){const{onResultPageChange:t}=this.props;--e.data.currentPage,null==t||t(e.resultId,e.data.currentPage,e.sql)}})),pe(this,"nextPage",(()=>{const{currentResultSet:e}=this.state;if(e&&e.data.hasMoreRows){const{onResultPageChange:t}=this.props;++e.data.currentPage,null==t||t(e.resultId,e.data.currentPage,e.sql)}})),pe(this,"handleResultToggle",(()=>{const{onToggleResultPaneViewState:e,showMaximizeButton:t,showMaximized:n}=this.props,{currentResultSet:i}=this.state;if("statusBar"===t&&void 0===n){if(i){const e=i.sql,t=`Result #${(i.index??0)+1}`;if(e){const n={scriptId:an(),language:"mysql",name:t,content:e};nn.execute("job",[{requestType:"editorRunScript",parameter:n}])}}}else null==e||e()})),pe(this,"handleEdit",(e=>{this.edited.add(e.resultId)})),this.state={manualTab:!1,currentResultSet:e.resultSets.sets.length>0?e.resultSets.sets[0]:void 0},this.addHandledProperties("resultSets","contextId","currentSet","showMaximizeButton","hideTabs","showMaximized","onResultPageChange","onToggleResultPaneViewState","onSelectTab")}static getDerivedStateFromProps(e,t){const{currentSet:n,resultSets:i}=e,{manualTab:o,currentResultSet:s}=t;if(o)return{manualTab:!1};if(0===i.sets.length)return{currentResultSet:void 0};if(void 0!==n){let e;return n>0&&(e=n-1<i.sets.length?i.sets[n-1]:i.sets[i.sets.length-1]),{currentResultSet:e}}return i.sets.find((e=>e===s))?{}:{currentResultSet:i.sets.length>0?e.resultSets.sets[0]:void 0}}render(){const{resultSets:e,contextId:t,hideTabs:n,showMaximizeButton:i,showMaximized:o}=this.props,{currentResultSet:s}=this.state,r=this.getEffectiveClassNames(["resultHost"]);this.viewRefs.clear();const a=[];(null==e?void 0:e.output)&&e.output.length>0&&a.push({id:"output",caption:"Output",content:Ie(ActionOutput,{output:e.output,contextId:t,showIndexes:e.sets.length>0||e.output.length>1})});const l=Ie(Button,{id:"toggleStateButton",imageOnly:!0,"data-tooltip":"Maximize Result Tab",onClick:this.handleResultToggle,children:Ie(xi,{src:o?yo:"/assets/toolbar-maximize-ae86791f.svg","data-tooltip":"inherit"})});let d;e.sets.forEach(((e,t)=>{const n=ke();if(this.viewRefs.set(e.resultId,n),!o||e===s){let o;o=void 0!==e.index?`Result #${e.index+1}`:`Result #${t+1}`,void 0!==e.subIndex&&(o+=`.${e.subIndex+1}`),a.push({id:e.resultId,caption:o,auxillary:"tab"===i&&l,content:Ie(ResultView,{ref:n,resultSet:e,onEdit:this.handleEdit})})}}));let c=0,u=!1,h=!1;s&&(d=s.data.executionInfo,c=s.data.currentPage,u=s.data.hasMoreRows??!1,h=this.edited.has(s.resultId));const p=d&&d.type===zi.Error,m=d&&d.type===zi.Response;return Ie(Container,{className:r,orientation:Di.TopDown,children:[Ie(Tabview,{className:"resultTabview",stretchTabs:!1,hideSingleTab:"single"===n,showTabs:"always"!==n,selectedId:(null==s?void 0:s.resultId)??"output",tabPosition:Ao.Top,pages:a,canReorderTabs:!0,onSelectTab:this.handleTabSelection}),d&&Ie(ResultStatus,{executionInfo:d,children:!p&&!m&&Ie(Toolbar,{dropShadow:!1,children:[Ie(Button,{id:"previousPageButton",imageOnly:!0,disabled:0===c,"data-tooltip":"Previous Page",onClick:this.previousPage,children:Ie(xi,{src:"/assets/toolbar-page_previous-05050b5f.svg","data-tooltip":"inherit"})}),Ie(Button,{id:"nextPageButton",imageOnly:!0,disabled:!u,"data-tooltip":"Next Page",onClick:this.nextPage,children:Ie(xi,{src:"/assets/toolbar-page_next-a9839fb1.svg","data-tooltip":"inherit"})}),Ie(Divider,{vertical:!0}),Ie(Button,{id:"applyButton",imageOnly:!0,disabled:!h,"data-tooltip":"Apply Changes",children:Ie(xi,{src:Co,"data-tooltip":"inherit"})}),Ie(Button,{id:"revertButton",imageOnly:!0,disabled:!h,"data-tooltip":"Revert Changes",children:Ie(xi,{src:wo,"data-tooltip":"inherit"})}),Ie(Divider,{id:"editSeparator",vertical:!0}),"statusBar"===i&&l,"statusBar"===i&&Ie(Divider,{vertical:!0}),Ie(Dropdown,{id:"viewStyleDropDown",selection:"grid","data-tooltip":"Select a View Section for the Result Set",children:Ie(Dropdown.Item,{id:"grid",picture:Ie(xi,{src:"/assets/toolbar-grid-1f5a8f75.svg","data-tooltip":"inherit"})})}),Ie(Divider,{vertical:!0}),Ie(Button,{id:"showActionMenu",imageOnly:!0,"data-tooltip":"Show Action Menu",onClick:this.showActionMenu,children:Ie(xi,{src:ko,"data-tooltip":"inherit"})})]})}),Ie(Po,{id:"actionMenu",ref:this.actionMenuRef,placement:Zn.BottomLeft,onItemClick:this.handleActionMenuItemClick,children:[Ie(MenuItem,{id:"exportMenuItem",caption:"Export Result Set",disabled:!0}),Ie(MenuItem,{id:"importMenuItem",caption:"Import Result Set",disabled:!0})]})]})}async updateColumns(e,t){const n=this.viewRefs.get(e);n&&n.current&&await n.current.updateColumns(t)}async addData(e,t,n=!1){const i=this.viewRefs.get(t);i&&i.current&&await i.current.addData(e,n),e.executionInfo&&this.forceUpdate()}}class BarGraphRenderer{constructor(){pe(this,"colors"),pe(this,"dateFormatOptions",{weekday:"short",year:"numeric",month:"2-digit",day:"numeric"}),this.colors=qe(Ve)}render(e,t){var n,i,o,s,r;if(!t.data)return;const a=!t.animation||!t.animation.disabled,l=(null==(n=t.transformation)?void 0:n.width)??1200,d=(null==(i=t.transformation)?void 0:i.height)??900,c=(null==(o=t.transformation)?void 0:o.x)??"0",u=(null==(s=t.transformation)?void 0:s.y)??"0",h=t.marginTop??100,p=t.marginRight??0,m=t.marginBottom??30,g=t.marginLeft??0,f=t.xPadding??.1,b=ze(e);let v,S;try{v=b.select(`#${t.id}`)}catch(_){v=b.select("__invalid__")}let C=!1;v.empty()?(C=!0,v=b.append("svg").attr("id",t.id),S=v.append("g")):S=v.select("g"),v.attr("x",`${c}`).attr("y",`${u}`).attr("overflow","visible").attr("viewBox",`0 0 ${l} ${d}`);let w=[],y=[];const k=[];let I="string";if(t.data.length>0)if(this.isTabularData(t.data))w=He(t.data,(e=>e[0])),w.shift(),y=He(t.data,(e=>e[1])),k.push(String(y.shift())),y.length>0&&(I=typeof y[0]);else{const e=t.data[0],n=Object.keys(e),i=n.length>0?n[0]:"",o=n.length>1?n[1]:"";w=He(t.data,(e=>e[i])),y=He(t.data,(e=>e[o])),y.length>0&&(I=typeof y[0])}let D=t.yDomain;if(!D){const e=je(y,(e=>e)),t=We(y,(e=>e));D=[-1===t?y[0]:y[t],-1===e?y[y.length-1]:y[e]]}const T=new $e(t.xDomain??w),R=Ke(w.length).filter((e=>T.has(w[e]))),x=Qe(T,[g,l-p]).padding(f),E=Ye(x);E.tickFormat((e=>"object"==typeof e?e.toLocaleDateString(void 0,this.dateFormatOptions):String(e)));const M=[d-m,h];let P;P=t.xTitle?e=>t.xTitle(w[e],e,w):e=>`${w[e]?w[e].toLocaleString("en"):""}\n${y[e]?y[e].toLocaleString("en"):""}`;let L=S.select(".yAxis");L.empty()&&(L=S.append("g").classed("yAxis",!0));const F=C?0:(null==(r=t.animation)?void 0:r.duration)??500,A=S.transition().ease(Je).duration(F),B=S.selectAll("rect").data(R).join("rect").attr("fill",((e,n)=>t.colors?t.colors[n]:this.colors(n.toString()))).attr("data-tooltip",P);if("object"===I){const e=Xe(D,M),n=Ze(e).ticks(d/40,t.yFormat);a?L.transition(A).attr("transform",`translate(${g},0)`).call(n):L.attr("transform",`translate(${g},0)`).call(n),a?B.transition(A).attr("x",(e=>x(w[e])??0)).attr("width",x.bandwidth()).attr("y",(t=>e(y[t]))).attr("height",(t=>(e(0)??0)-(e(y[t])??0))):B.attr("x",(e=>x(w[e])??0)).attr("width",x.bandwidth()).attr("y",(t=>e(y[t]))).attr("height",(t=>(e(0)??0)-(e(y[t])??0)))}else if("number"===I){const e=et(D,M),n=Ze(e).ticks(d/40,t.yFormat);a?L.transition(A).attr("transform",`translate(${g},0)`).call(n):L.attr("transform",`translate(${g},0)`).call(n),a?B.transition(A).attr("x",(e=>x(w[e])??0)).attr("width",x.bandwidth()).attr("y",(t=>e(y[t]))).attr("height",(t=>(e(0)??0)-(e(y[t])??0))):B.attr("x",(e=>x(w[e])??0)).attr("width",x.bandwidth()).attr("y",(t=>e(y[t]))).attr("height",(t=>(e(0)??0)-(e(y[t])??0)))}else{const e=qe(D,M),n=Ze(e).ticks(d/40,t.yFormat);a?L.transition(A).attr("transform",`translate(${g},0)`).call(n):L.attr("transform",`translate(${g},0)`).call(n),a?B.transition(A).attr("x",(e=>x(w[e])??0)).attr("width",x.bandwidth()).attr("y",(t=>e(y[t]))).attr("height",(t=>(e(0)??0)-(e(y[t])??0))):B.attr("x",(e=>x(w[e])??0)).attr("width",x.bandwidth()).attr("y",(t=>e(y[t]))).attr("height",(t=>(e(0)??0)-(e(y[t])??0)))}let N=S.select(".xAxis");N.empty()&&(N=S.append("g").classed("xAxis",!0).attr("transform",`translate(0,${d-m})`).call(E)),a?N.transition(A).attr("transform",`translate(0,${d-m})`).call(E):N.attr("transform",`translate(0,${d-m})`).call(E),L.call((e=>{e.selectAll(".tick .gridLine").remove(),e.selectAll(".tick line").clone().classed("gridLine",!0).attr("stroke-opacity",.25).attr("stroke-width",1).attr("x2",l-g-p)}));let O=L.select(".yLabel");O.empty()&&(O=L.append("text").classed("yLabel",!0).attr("fill","currentColor").attr("text-anchor","center")),a?O.text(t.yLabel??"").transition(A).attr("x",-g):O.text(t.yLabel??"").attr("x",-g)}isTabularData(e){const t=e;return Array.isArray(t)&&Array.isArray(t[0])}}class LineGraphRenderer{constructor(){pe(this,"titleGenerator"),pe(this,"tooltipElement"),pe(this,"xScale"),pe(this,"xValues"),pe(this,"yScale"),pe(this,"yValues"),pe(this,"colors"),pe(this,"tooltip"),pe(this,"data"),pe(this,"curveMap",new Map([["Basis",tt],["Bundle",nt],["Linear",it],["Natural",ot],["Step",st],["StepBefore",rt],["StepAfter",at]])),pe(this,"pointerEnter",(e=>{this.tooltipElement.style("display",null).classed("tooltip",!0),this.pointerMoved(e)})),pe(this,"pointerMoved",(e=>{var t;const n=this.xValues,i=pt(n,this.xScale.invert(mt(e)[0])),o=this.tooltip?this.tooltip.format(this.data[i],i,this.data):this.titleGenerator(i);if(!o)return void this.tooltipElement.style("display","none");const s=this.tooltip&&this.tooltip.position?this.tooltip.position.left:this.xScale(this.xValues[i]),r=this.tooltip&&this.tooltip.position?this.tooltip.position.top:this.yScale(this.yValues[i]??0);this.tooltipElement.attr("transform",`translate(${s}, ${r})`).style("display",null);const a=`${o}`.split(/\n/),l=this.tooltipElement.selectAll("text").data([0]).join("text").call((e=>e.selectAll("tspan").data(a).join("tspan").style("fill","var(--tooltip-foreground)").attr("x",0).attr("y",((e,t)=>0===t?"0":`${t+1.01}em`)).attr("font-weight",((e,t)=>t?null:"bold")).text((e=>e)))),d=l.node();if(d){const e=d.getBoundingClientRect();e.width+=20,e.x-=10,l.attr("transform",`translate(${-e.width/2},25)`);const n=this.tooltipElement.selectAll("path");(null==(t=this.tooltip)?void 0:t.position)?n.attr("d",`M${-e.width/2-10},5H${e.width/2+10}v${e.height+30}h-${e.width+20}z`):n.attr("d",`M${-e.width/2-10},5H-5l5,-5l5,5H${e.width/2+10}v${e.height+30}h-${e.width+20}z`)}})),pe(this,"pointerLeft",(()=>{this.tooltipElement.style("display","none")})),this.colors=qe(Ve)}render(e,t){var n,i,o,s;if(!t.data)return;this.tooltip=t.tooltip,this.data=t.data;const r=(null==(n=t.transformation)?void 0:n.width)??1200,a=(null==(i=t.transformation)?void 0:i.height)??900,l=(null==(o=t.transformation)?void 0:o.x)??"0",d=(null==(s=t.transformation)?void 0:s.y)??"0",c=t.marginTop??20,u=t.marginRight??30,h=t.marginBottom??30,p=t.marginLeft??40,m=t.strokeWidth??1.5,g=t.strokeLinejoin??"round",f=t.strokeLinecap??"round";this.xValues=He(t.data,(e=>e.xValue)),this.yValues=He(t.data,(e=>e.yValue));const b=He(t.data,((e,t)=>void 0!==this.xValues[t]&&void 0!==this.yValues[t]));let v=t.xDomain;if(!v){const e=lt(this.xValues);v=void 0!==e[0]&&void 0!==e[1]?(e[0],Date,e):[0,0]}let S=t.yDomain;if(!S){const e=je(this.yValues);S=[0,this.yValues[e]??0]}const C=[p,r-u];this.xScale=dt(v,C),this.xScale.clamp(!0);const w=[a-h,c];this.yScale=et(S,w);let y=t.xTickCount??r/80;const k=Ye(this.xScale).ticks(y).tickSizeOuter(0);y=t.yTickCount??a/40;const I=Ze(this.yScale).ticks(y,t.yFormat);if(t.yFormat&&("string"==typeof t.yFormat?I.tickFormat(ct(t.yFormat)):I.tickFormat(t.yFormat)),t.xTitle){const e=He(t.data,(e=>e));this.titleGenerator=n=>t.xTitle(e[n],n,t.data)}else{const e=this.xScale.tickFormat(void 0,"%b %-d, %Y"),t=this.yScale.tickFormat(void 0,"0.2f");this.titleGenerator=n=>{const i=this.xValues[n];return this.yValues[n]?"number"==typeof i?`${t(i)}\n${t(this.yValues[n])}`:`${e(i)}\n${t(this.yValues[n])}`:""}}const D=ze(e);let T;try{T=D.select(`#${t.id}`)}catch(L){T=D.select("__invalid__")}T.remove(),T=D.append("svg").attr("id",t.id).style("pointer-events","bounding-box"),T.on("pointerenter",this.pointerEnter).on("pointermove",this.pointerMoved).on("pointerleave",this.pointerLeft).on("touchstart",(e=>e.preventDefault())),T.attr("x",`${l}`).attr("y",`${d}`).attr("overflow","visible").attr("width",r).attr("height",a),T.append("g").attr("transform",`translate(0,${a-h})`).attr("id","xAxis").call(k),T.append("g").attr("transform",`translate(${p},0)`).attr("id","yAxis").call(I).call((e=>e.select(".domain").remove())).call((e=>e.selectAll(".tick line").clone().attr("x2",r-p-u).attr("stroke-opacity",.1))).call((e=>e.append("text").attr("x",-p).attr("y",10).attr("fill","currentColor").attr("text-anchor","start").text(t.yLabel??"")));const R=t.curve?this.curveMap.get(t.curve)??tt:tt,x=ut().defined((e=>b[e])).curve(R).x((e=>this.xScale(this.xValues[e]))).y((e=>this.yScale(this.yValues[e]??0))),E=He(t.data,(e=>e.group)),M=new $e(E),P=Ke(this.xValues.length).filter((e=>M.has(E[e])));T.append("g").attr("fill","none").attr("stroke","currentColor").attr("stroke-width",m).attr("stroke-linejoin",g).attr("stroke-linecap",f).selectAll("path").data(ht(P,(e=>E[e]))).join("path").attr("stroke",((e,n)=>t.colors?t.colors[n]:this.colors(n.toString()))).attr("d",(([,e])=>x(e))),this.tooltipElement=T.append("g").style("pointer-events","none"),this.tooltipElement.append("path").attr("fill","var(--tooltip-background)").attr("stroke","var(--tooltip-border)").attr("color","var(--tooltip-foreground")}}class PieGraphRenderer{constructor(){pe(this,"format"),this.format=ct(".2f")}render(e,t){var n,i,o,s,r,a;if(!t.data)return;const l=!t.animation||!t.animation.disabled,d=(null==(n=t.transformation)?void 0:n.width)??666,c=(null==(i=t.transformation)?void 0:i.height)??500,u=(null==(o=t.transformation)?void 0:o.x)??"50%",h=(null==(s=t.transformation)?void 0:s.y)??"50%",p=(null==(r=t.radius)?void 0:r[0])??0,m=(null==(a=t.radius)?void 0:a[1])??450,g=ze(e);let f,b,v,S;try{S=g.select(`#${t.id}`)}catch(T){S=g.select("__invalid__")}if(S.empty()){S=g.append("svg").attr("id",t.id);const e=S.append("g");f=e.append("g").attr("class","slices"),b=e.append("g").attr("class","labels"),v=e.append("g").attr("class","lines")}else{const e=S.select("g");f=e.select(".slices"),b=e.select(".labels"),v=e.select(".lines")}S.attr("x",`${u}`).attr("y",`${h}`).attr("overflow","visible").attr("viewBox",`0 0 ${d} ${c}`);const C=t.data.length<=100?t.data:t.data.slice(0,100),w=gt().value((e=>e.value)).sort(null)(C),y=e=>e.data.name??"",k=ft().innerRadius(p).outerRadius(m);void 0!==t.borderRadius&&k.cornerRadius(t.borderRadius),void 0!==t.startAngle&&k.startAngle(t.startAngle),void 0!==t.endAngle&&k.endAngle(t.endAngle),void 0!==t.padAngle&&k.padAngle(t.padAngle),void 0!==t.padRadius&&k.padRadius(t.padRadius);const I=f.selectAll("path").data(w),D=t.colors&&t.colors.length>0?t.colors:Ve;if(I.join((e=>{const t=e.append("path");return t.attr("class","slice").attr("d",((e,t,n)=>(n[t].previous=e,k(e)))),t})).on("mouseover",(function(e,n){if(t.tooltip){const e=t.tooltip.format(n.data);return void this.setAttribute("data-tooltip",e)}let i="";n.data.name&&(i=`${n.data.name}: `),Number.isInteger(n.data.value)?i+=`${n.data.value.toLocaleString()}`:i+=`${n.data.value.toFixed(2)}`,this.setAttribute("data-tooltip",i)})).style("fill",((e,t)=>D[t%D.length])).style("stroke",(()=>t.borderColor??null)).style("stroke-width",(()=>t.borderWidth??null)),l&&I.transition().duration(500).attrTween("d",((e,t,n)=>{const i=n[t],o=bt(i.previous,e);return i.previous=o(0),e=>k(o(e))??""})).ease(vt),t.showValues??1){const e=ft().innerRadius(.75*m).outerRadius(1.5*m),t=m+30,n=e=>e.startAngle+(e.endAngle-e.startAngle)/2,i=b.selectAll("text").data(w,y);i.enter().append("text").attr("fill","currentColor").attr("dy",".35em").text((e=>e.data.name??this.format(e.data.value))).attr("transform",((i,o,s)=>{s[o].previous=i;const r=e.centroid(i);return r[0]=t*(n(i)<Math.PI?1:-1),`translate(${r[0]},${r[1]})`})).attr("text-anchor",((e,t,i)=>(i[t].previous=e,n(e)<Math.PI?"start":"end"))),l&&i.transition().duration(500).attrTween("transform",((i,o,s)=>{const r=s[o],a=bt(r.previous,i);return r.previous=a(0),i=>{const o=a(i),s=e.centroid(o);return s[0]=t*(n(o)<Math.PI?1:-1),`translate(${s[0]},${s[1]})`}})).styleTween("text-anchor",((e,t,i)=>{const o=i[t],s=bt(o.previous,e);return o.previous=s(0),e=>{const t=s(e);return n(t)<Math.PI?"start":"end"}})),i.exit().remove();const o=v.selectAll("polyline").data(w,y);o.enter().append("polyline").attr("points",((i,o,s)=>{s[o].previous=i;const r=e.centroid(i),a=.95*t*(n(i)<Math.PI?1:-1);return[k.centroid(i),r,[a,r[1]]].toString()})),l&&o.transition().duration(500).attrTween("points",((i,o,s)=>{const r=s[o],a=bt(r.previous,i);return r.previous=a(0),i=>{const o=a(i),s=e.centroid(o),r=.95*t*(n(o)<Math.PI?1:-1);return[k.centroid(o),s,[r,s[1]]].toString()}})),o.exit().remove()}}}class GraphHost extends ComponentBase{constructor(e){super(e),pe(this,"svgRef",ke()),pe(this,"update",(()=>{var e,t;const{options:n}=this.mergedProps;if(this.svgRef.current){const i=this.svgRef.current.getElementsByTagName("svg");for(let t=0;t<i.length;++t){const o=i.item(t);if(o&&o.id){-1===((null==(e=n.series)?void 0:e.findIndex((e=>e.id===o.id)))??-1)&&this.svgRef.current.removeChild(o)}}null==(t=n.series)||t.forEach((e=>{switch(e.type){case"pie":{const t=new PieGraphRenderer;e.colors||(e.colors=n.colors),t.render(this.svgRef.current,e);break}case"line":{const t=new LineGraphRenderer;e.colors||(e.colors=n.colors),t.render(this.svgRef.current,e);break}case"bar":{const t=new BarGraphRenderer;e.colors||(e.colors=n.colors),t.render(this.svgRef.current,e);break}}}))}})),this.addHandledProperties("options")}componentDidMount(){this.update()}componentDidUpdate(){this.update()}render(){var e,t,n,i;const{id:o,options:s}=this.mergedProps,r=this.getEffectiveClassNames(["graphHost"]),a=(null==(e=s.viewport)?void 0:e.left)??0,l=(null==(t=s.viewport)?void 0:t.top)??0,d=(null==(n=s.viewport)?void 0:n.width)??1200,c=(null==(i=s.viewport)?void 0:i.height)??900;return Ie("svg",{ref:this.svgRef,id:o,className:r,viewBox:`${a} ${l} ${d} ${c}`,preserveAspectRatio:"xMidYMid"})}}const Bo=class _PresentationInterface{constructor(e,t){pe(this,"currentHeight"),pe(this,"currentSet"),pe(this,"maximizedResult"),pe(this,"resultData"),pe(this,"loadingState",ro.Idle),pe(this,"backend"),pe(this,"context"),pe(this,"onRemoveResult"),pe(this,"renderTarget"),pe(this,"manuallyResized",!1),pe(this,"minHeight",180),pe(this,"alwaysShowTab",!1),pe(this,"zoneInfo"),pe(this,"marginDecorationIDs",[]),pe(this,"markedLines",new Set),pe(this,"markerClass",""),pe(this,"waitTimer"),pe(this,"resultRef",ke()),pe(this,"toggleResultPane",(()=>{void 0===this.maximizedResult?this.maximizedResult=!0:this.maximizedResult=!this.maximizedResult,this.renderResults(),this.updateRenderTarget(this.currentHeight)})),pe(this,"handleResultPageChange",((e,t,n)=>{this.context instanceof SQLExecutionContext&&nn.execute("sqlShowDataAtPage",{context:this.context,oldResultId:e,page:t,sql:n})})),pe(this,"handleSelectTab",(e=>{this.currentSet=e})),pe(this,"changeLoadingState",(e=>{this.loadingState=e,this.updateMarginDecorations(),this.context&&nn.execute("editorContextStateChanged",this.context.id)})),this.language=t,this.backend=e,this.prepareRenderTarget()}dispose(){var e,t,n;this.onRemoveResult=void 0;const i=null==(t=null==(e=this.backend)?void 0:e.getModel)?void 0:t.call(e);i&&(null==(n=i.deltaDecorations)||n.call(i,this.marginDecorationIDs,[])),this.marginDecorationIDs=[],this.removeResult()}get model(){var e,t;return this.backend?(null==(t=(e=this.backend).getModel)?void 0:t.call(e))??null:null}get code(){const e=this.model;return(null==e?void 0:e.getValue())??""}get codeLength(){const e=this.model;return e?e.getValueLength():0}get codeOffset(){return 0}get startLine(){return 1}set startLine(e){}get endLine(){return this.model?this.model.getLineCount():0}set endLine(e){}get resultIds(){var e,t;if("resultSets"===(null==(e=this.resultData)?void 0:e.type)){const e=this.resultData.sets.map((e=>e.resultId)),n=null==(t=this.resultData.output)?void 0:t.map((e=>e.resultId??""));return n?[...e,...n]:e}return[]}get viewZone(){var e;return null==(e=this.zoneInfo)?void 0:e.zone}set viewZoneId(e){this.zoneInfo&&(this.zoneInfo.zoneId=e)}get cachedHeight(){var e;return this.currentHeight??(null==(e=this.zoneInfo)?void 0:e.zone.heightInPx)??this.minHeight}movePosition(e){}clearResult(e){var t,n,i;if(this.waitTimer&&(clearTimeout(this.waitTimer),this.waitTimer=null),this.changeLoadingState(ro.Idle),this.resultData)if(e?null==(t=this.onRemoveResult)||t.call(this,[e]):null==(n=this.onRemoveResult)||n.call(this,this.resultIds),e){switch(this.resultData.type){case"text":if(this.resultData.text){const t=null==(i=this.resultData.text)?void 0:i.findIndex((t=>t.resultId===e));t>-1&&(this.resultData.text.splice(t,1),0===this.resultData.text.length&&(this.resultData=void 0))}else this.resultData=void 0;break;case"resultSets":{const t=this.resultData.sets.findIndex((t=>t.resultId===e));t>-1&&(this.resultData.sets.splice(t,1),0===this.resultData.sets.length&&(this.resultData=void 0));break}default:this.resultData=void 0}this.renderResults()}else this.resultData=void 0}removeResult(){this.clearResult(),this.removeRenderTarget()}executionStarts(){this.waitTimer||this.loadingState!==ro.Idle||(this.waitTimer=setTimeout((()=>{this.waitTimer=null,this.changeLoadingState(ro.Waiting)}),500),this.changeLoadingState(ro.Pending))}setResult(e,t){this.waitTimer&&(clearTimeout(this.waitTimer),this.waitTimer=null),this.resultData=e,this.renderResults(t)}async addResultData(e,t,n){var i,o;const s=e=>{var n,i,o,s,r,a;this.resultData&&"graphData"!==this.resultData.type?"text"===this.resultData.type?(this.resultData.text||(this.resultData.text=[]),this.resultData.text.push({type:(null==(o=e.executionInfo)?void 0:o.type)??zi.Info,index:t.index,resultId:t.resultId,content:(null==(s=e.executionInfo)?void 0:s.text)??"",subIndex:t.subIndex})):(this.resultData.output||(this.resultData.output=[]),this.resultData.output.push({type:(null==(r=e.executionInfo)?void 0:r.type)??zi.Info,index:t.index,resultId:t.resultId,content:(null==(a=e.executionInfo)?void 0:a.text)??"",subIndex:t.subIndex})):this.resultData={type:"text",text:[{type:(null==(n=e.executionInfo)?void 0:n.type)??zi.Info,index:t.index,resultId:t.resultId,content:(null==(i=e.executionInfo)?void 0:i.text)??"",subIndex:t.subIndex}]}};switch((this.waitTimer||this.loadingState===ro.Waiting)&&(this.waitTimer&&(clearTimeout(this.waitTimer),this.waitTimer=null),!this.resultData&&"executionInfo"in e?this.changeLoadingState(ro.Idle):this.changeLoadingState(ro.Loading)),e.type){case"text":if(this.resultData)if("resultSets"===this.resultData.type)this.resultData.output||(this.resultData.output=[]),e.text&&this.resultData.output.push(...e.text);else if("graphData"===this.resultData.type);else if(this.resultData.text){if(e.text){const t=this.resultData.text[this.resultData.text.length-1];for(;e.text.length>0&&e.text[0].index===t.index&&e.text[0].language===(null==t?void 0:t.language);)t.content+=e.text[0].content,e.text.shift();this.resultData.text.push(...e.text),e.executionInfo&&(this.resultData.executionInfo=e.executionInfo)}}else this.resultData.text=e.text;else this.resultData=e;break;case"resultSetRows":if(this.resultData){let n=!0;switch(this.resultData.type){case"resultSets":{const r=this.resultData.sets;let a=-1;const l=r.find(((e,n)=>e.resultId===t.resultId&&(a=n,!0)));l?(e.executionInfo?l.data.executionInfo=e.executionInfo:n=!1,t.replaceData?l.data.rows=e.rows:l.data.rows.push(...e.rows),e.columns&&e.columns.length>0&&(l.columns=e.columns),l.data.currentPage=e.currentPage,l.data.hasMoreRows=e.hasMoreRows,this.currentSet===a&&(e.columns&&e.columns.length>0&&await(null==(i=this.resultRef.current)?void 0:i.updateColumns(t.resultId,e.columns)),await(null==(o=this.resultRef.current)?void 0:o.addData(e,t.resultId,t.replaceData)))):0===e.rows.length?s(e):this.resultData.sets.push({type:"resultSet",index:t.index,subIndex:t.subIndex,resultId:null==t?void 0:t.resultId,sql:t.sql??"",columns:e.columns??[],data:e});break}case"text":0===e.rows.length?s(e):this.resultData={type:"resultSets",sets:[{type:"resultSet",index:t.index,resultId:null==t?void 0:t.resultId,sql:t.sql??"",columns:e.columns??[],data:e}],output:this.resultData.text};break;default:this.resultData={type:"resultSets",sets:[{type:"resultSet",index:t.index,resultId:null==t?void 0:t.resultId,sql:t.sql??"",columns:e.columns??[],data:e}]}}let r=!0;if("resultSets"===this.resultData.type&&(r=this.resultData.sets.every((e=>null!=e.data.executionInfo))),r&&this.loadingState!==ro.Idle&&this.changeLoadingState(ro.Idle),!n)return}else 0===e.rows.length?s(e):this.resultData={type:"resultSets",sets:[{type:"resultSet",index:t.index,subIndex:t.subIndex,resultId:null==t?void 0:t.resultId,sql:t.sql??"",columns:e.columns??[],data:e}]};break;case"graphData":this.resultData=e,this.minHeight=200}this.renderResults(n)}markLines(e,t){this.markedLines=e,this.markerClass=t,this.updateMarginDecorations()}updateMarginDecorations(){var e,t,n;const i=null==(t=null==(e=this.backend)?void 0:e.getModel)?void 0:t.call(e);if(i){const e=[];for(let t=this.startLine;t<=this.endLine;++t){const n=this.getMarginClass(t-this.startLine+1)+" ."+this.language;e.push({range:{startLineNumber:t,startColumn:1,endLineNumber:t,endColumn:1},options:{stickiness:Gt.TrackedRangeStickiness.GrowsOnlyWhenTypingBefore,isWholeLine:!1,linesDecorationsClassName:n}})}this.marginDecorationIDs=(null==(n=i.deltaDecorations)?void 0:n.call(i,this.marginDecorationIDs,e))??[]}}updateDiagnosticsDecorations(e,t){var n,i,o;const s=null==(i=null==(n=this.backend)?void 0:n.getModel)?void 0:i.call(n);if(s){const n=t.map((e=>{const t=s.getPositionAt(e.span.start+this.codeOffset),n=s.getPositionAt(e.span.start+this.codeOffset+e.span.length);return{range:{startLineNumber:t.lineNumber,startColumn:t.column,endLineNumber:n.lineNumber,endColumn:n.column},options:{stickiness:Gt.TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges,isWholeLine:!1,inlineClassName:_PresentationInterface.validationClass.get(e.severity),minimap:{position:Gt.MinimapPosition.Inline,color:"red"},hoverMessage:{value:e.message??""}}}}));return(null==(o=s.deltaDecorations)?void 0:o.call(s,e,n))??[]}return[]}get isInternal(){var e,t;let n=this.startLine;const i=null==(t=null==(e=this.backend)?void 0:e.getModel)?void 0:t.call(e);if(i){const e=Math.min(this.endLine,i.getLineCount());for(;n<=e;){const e=i.getLineContent(n).trim();if(e.length>0)return!!e.startsWith("\\");++n}}return!1}get isSQLLike(){return"sql"===this.language||"mysql"===this.language}selectRange(e){var t,n,i,o;if(this.context&&this.backend){const s=this.context.fromLocal(e);null==(n=(t=this.backend).setSelection)||n.call(t,s),null==(o=(i=this.backend).revealLines)||o.call(i,s.startLineNumber,s.endLineNumber)}}getMarginClass(e){return this.markedLines.has(e)?this.markerClass:""}get resultDivider(){}get hideTabs(){return this.maximizedResult?"always":"single"}removeRenderTarget(){this.renderTarget=void 0,this.currentHeight=void 0,this.maximizedResult=void 0,this.manuallyResized=!1}updateRenderTarget(e){}defineRenderTarget(){}showMaximizeButton(){return this.maximizedResult?"tab":"statusBar"}prepareRenderTarget(){}renderResults(e){if(!this.resultData||!this.context)return void this.removeRenderTarget();let t;e??(e={currentSet:this.currentSet,manualHeight:this.currentHeight,maximized:this.maximizedResult}),this.currentHeight=e.manualHeight,this.currentSet=e.currentSet,this.maximizedResult=e.maximized;const n=this.context.id;switch(this.resultData.type){case"text":if(this.alwaysShowTab){const i={type:"resultSets",output:this.resultData.text,sets:[]};t=Ie(ResultTabView,{ref:this.resultRef,resultSets:i,contextId:n,currentSet:null==e?void 0:e.currentSet,showMaximizeButton:this.showMaximizeButton(),hideTabs:this.hideTabs,onResultPageChange:this.handleResultPageChange,onToggleResultPaneViewState:this.toggleResultPane,onSelectTab:this.handleSelectTab}),this.minHeight=36}else t=Ie(Container,{className:"outputHost",orientation:Di.TopDown,fixedScrollbars:!1,children:[Ie(ActionOutput,{output:this.resultData.text,contextId:n,showIndexes:null==e?void 0:e.showIndexes}),this.resultData.executionInfo&&Ie(ResultStatus,{executionInfo:this.resultData.executionInfo})]}),this.minHeight=28;break;case"resultSets":t=Ie(ResultTabView,{ref:this.resultRef,resultSets:this.resultData,contextId:n,currentSet:null==e?void 0:e.currentSet,showMaximizeButton:this.showMaximizeButton(),hideTabs:this.hideTabs,showMaximized:this.maximizedResult,onResultPageChange:this.handleResultPageChange,onToggleResultPaneViewState:this.toggleResultPane,onSelectTab:this.handleSelectTab}),this.minHeight=36;break;case"graphData":t=Ie(GraphHost,{options:this.resultData.options??{}}),this.minHeight=200}this.renderTarget?t?Ue(Ie(Re,{children:[t,this.resultDivider]}),this.renderTarget):this.removeRenderTarget():t&&(this.renderTarget=this.defineRenderTarget(),this.renderTarget&&Ue(Ie(Re,{children:[t,this.resultDivider]}),this.renderTarget))}};pe(Bo,"validationClass",new Map([[eo.Error,"error"],[eo.Warning,"warning"],[eo.Message,"message"],[eo.Suggestion,"suggestion"]])),pe(Bo,"maxHeight",800),pe(Bo,"maxAutoHeight",{text:352,resultSets:352,graphData:300});let No=Bo;class Semaphore{constructor(){fe(this,z,[])}wait(e){const t={timeout:null,resolve:()=>{}};ge(this,z).push(t);const n=new Promise((e=>{let n=!1;t.resolve=(i,o)=>{if(!n){if(n=!0,t.timeout&&(clearTimeout(t.timeout),t.timeout=null),!i){const e=ge(this,z).indexOf(t);e>-1&&ge(this,z).splice(e,1)}e(void 0===o||o)}}}));return void 0!==e&&e>0&&isFinite(e)&&(t.timeout=setTimeout((()=>{t.timeout=null,t.resolve(!1)}),e)),n}notify(e){const t=ge(this,z).pop();null==t||t.resolve(!0,e)}notifyAll(e){const t=ge(this,z).reverse();let n;for(be(this,z,[]);void 0!==(n=t.pop());)n.resolve(!0,e)}}z=new WeakMap;class SQLExecutionContext extends So{constructor(e,t,n,i,o){if(super(e),pe(this,"statementDetails",[]),pe(this,"pendingSplitActions",new Set),pe(this,"splitActionsRunning",new Map),pe(this,"pendingValidations",new Set),pe(this,"validationsRunning",new Map),fe(this,H,void 0),this.dbVersion=t,this.sqlMode=n,this.currentSchema=i,o){this.statementDetails=o.map((e=>({...e,diagnosticDecorationIDs:[]}))),this.updateLineStartMarkers();for(let e=0;e<this.statementDetails.length;++e)this.pendingValidations.add(e);setTimeout((()=>this.validateNextStatement()),0)}else this.scheduleFullValidation()}dispose(){super.dispose(),this.splittingFinished(),this.pendingSplitActions.clear(),this.splitActionsRunning.clear(),this.pendingValidations.clear(),this.validationsRunning.clear()}applyEditorChanges(e){this.disposed||e.forEach((e=>{var t,n;if(0===this.statementDetails.length)this.statementDetails.push({delimiter:";",span:{start:0,length:(null==(t=this.model)?void 0:t.getValue().length)??0},contentStart:0,state:Xi.Complete,diagnosticDecorationIDs:[]}),this.pushSplitRequest(0);else{const t=e.text.length-e.rangeLength,i=e.rangeOffset-this.presentation.codeOffset;let o=dn(this.statementDetails,(e=>i<e.span.start?-1:i>=e.span.start+e.span.length?1:0)),s=!1;if(o<0){const e=this.statementDetails[this.statementDetails.length-1],t=(null==(n=this.model)?void 0:n.getValue().length)??0;e.span.length=t-e.span.start,this.pushSplitRequest(this.statementDetails.length-1),s=!0}if(!s){let n=this.statementDetails[o];o>0&&i===n.span.start&&this.statementDetails[o-1].state===Xi.DelimiterChange&&(--o,n=this.statementDetails[o]);const s=i+e.rangeLength;let r=dn(this.statementDetails,(e=>s<e.span.start?-1:s>=e.span.start+e.span.length?1:0));if(r<0)n.state===Xi.DelimiterChange&&(n.delimiter=o>0?this.statementDetails[o-1].delimiter:";"),r=this.statementDetails.length-1,this.clearDecorations(o+1,r),this.statementDetails.splice(o+1,r-o),n.span.length=this.presentation.codeLength-n.span.start;else{let i=o+1;for(;i<=r&&i!==this.statementDetails.length;)n.span.length+=this.statementDetails[i++].span.length;if(n.state===Xi.DelimiterChange||n.state===Xi.NoDelimiter||e.text.includes("delimiter ")){for(;i<this.statementDetails.length;){const e=this.statementDetails[i];if(e.state===Xi.DelimiterChange)break;n.span.length+=e.span.length,++i}r=i-1,n.delimiter=o>0?this.statementDetails[o-1].delimiter:";"}for(this.clearDecorations(o+1,r),this.statementDetails.splice(o+1,r-o),n.span.length+=t,i=o+1;i<this.statementDetails.length;){const e=this.statementDetails[i++];e.span.start+=t,e.contentStart+=t}}this.pushSplitRequest(o)}}}))}async splittingDone(){ge(this,H)&&await ge(this,H).wait()}async getExecutableStatements(){var e,t;const n=this.model;if(!n||n.isDisposed())return Promise.resolve([]);ge(this,H)&&await ge(this,H).wait();const i=[],o=null==(t=null==(e=this.presentation.backend)?void 0:e.getSelection)?void 0:t.call(e),s=o?n.getOffsetAt(o.getStartPosition())-this.presentation.codeOffset:0,r=o?n.getOffsetAt(o.getEndPosition())-this.presentation.codeOffset:0;if(s<r){const e=[];let t=-1;for(;++t<this.statementDetails.length;){const n=this.statementDetails[t];if(!(n.span.start+n.span.length<s)){if(n.span.start>r)break;e.push(t)}}for(const o of e){const e=this.statementDetails[o];if(e.state===Xi.DelimiterChange)continue;const t=n.getPositionAt(e.span.start),s=n.getPositionAt(e.span.start+e.span.length),r=n.getValueInRange({startLineNumber:t.lineNumber,startColumn:t.column,endLineNumber:s.lineNumber,endColumn:s.column},Gt.EndOfLinePreference.LF);i.push({index:o,text:r,offset:e.span.start,line:t.lineNumber,column:t.column})}}else for(let a=0;a<this.statementDetails.length;++a){const e=this.statementDetails[a];if(e.state===Xi.DelimiterChange)continue;const t=n.getPositionAt(e.span.start);let o=e.span.start+e.span.length;e.state===Xi.Complete&&(o-=e.delimiter.length);const s=n.getPositionAt(o),r=n.getValueInRange({startLineNumber:t.lineNumber,startColumn:t.column,endLineNumber:s.lineNumber,endColumn:s.column},Gt.EndOfLinePreference.LF);i.push({index:a,text:r,offset:e.span.start,line:t.lineNumber,column:t.column})}return i}async getAllStatements(){const e=this.model;if(!e||e.isDisposed())return[];ge(this,H)&&await ge(this,H).wait();const t=[];for(let n=0;n<this.statementDetails.length;++n){const i=this.statementDetails[n],o=e.getPositionAt(i.span.start);let s=i.span.start+i.span.length,r=0;i.state===Xi.Complete&&(r=i.delimiter.length,s-=i.delimiter.length);const a=e.getPositionAt(s),l=e.getValueInRange({startLineNumber:o.lineNumber,startColumn:o.column,endLineNumber:a.lineNumber,endColumn:a.column},Gt.EndOfLinePreference.LF);t.push({index:n,text:l,offset:i.span.start,line:o.lineNumber,column:o.column,delimiterLength:r})}return t}async getStatementAtPosition(e){if(this.disposed)return;ge(this,H)&&await ge(this,H).wait();const t=this.model;if(!t||t.isDisposed()||0===this.statementDetails.length)return;const n=t.getOffsetAt(e);let i=this.statementDetails.findIndex((e=>e.span.start<=n&&e.span.start+e.span.length>=n));i<0&&(i=this.statementDetails.length-1);const o=this.statementDetails[i],s=t.getPositionAt(o.span.start),r=t.getPositionAt(o.span.start+o.span.length);return{index:i,text:t.getValueInRange({startLineNumber:s.lineNumber,startColumn:s.column,endLineNumber:r.lineNumber,endColumn:r.column},Gt.EndOfLinePreference.LF),offset:o.span.start,line:s.lineNumber,column:s.column}}get model(){return this.presentation.model}validateAll(){this.disposed||(this.pendingValidations.clear(),this.validationsRunning.clear(),this.pendingSplitActions=new Set([0]),this.splitActionsRunning.clear(),this.statementDetails=[{delimiter:";",span:{start:0,length:this.codeLength},contentStart:0,state:Xi.Complete,diagnosticDecorationIDs:[]}],this.splittingFinished(),be(this,H,new Semaphore),this.splitNextStatement())}selectStatement(e){if(e<0||e>=this.statementDetails.length)return;const t=this.statementDetails[e],n={...t.span};n.length-=t.contentStart-n.start,n.start=t.contentStart,this.presentation.selectRange(n)}clearDecorations(e,t){var n,i,o;e=e??0,(t=t??this.statementDetails.length-1)>=this.statementDetails.length&&(t=this.statementDetails.length-1);const s=null==(i=null==(n=this.presentation.backend)?void 0:n.getModel)?void 0:i.call(n);if(s)for(;e<=t;){const t=this.statementDetails[e++];null==(o=s.deltaDecorations)||o.call(s,t.diagnosticDecorationIDs,[])}}get statementSpans(){return this.statementDetails}splitNextStatement(){var e,t;if(this.disposed)return;const n=this.presentation.backend,i=null==(e=null==n?void 0:n.getModel)?void 0:e.call(n);if(i&&this.pendingSplitActions.size>0){const[e]=this.pendingSplitActions;if(this.pendingSplitActions.delete(e),e>=this.statementDetails.length)return void this.updateLineStartMarkers();const n=bo.instance,o=this.statementDetails[e],s=o.span.start+this.presentation.codeOffset,r=i.getPositionAt(s),a=i.getPositionAt(s+o.span.length),l=i.getValueInRange({startLineNumber:r.lineNumber,startColumn:r.column,endLineNumber:a.lineNumber,endColumn:a.column},Gt.EndOfLinePreference.LF);if(""===l)return void this.splittingFinished();if(l.trimStart().startsWith("\\"))return this.splittingFinished(),null==(t=i.deltaDecorations)||t.call(i,o.diagnosticDecorationIDs,[]),void this.updateLineStartMarkers();const d=(new Date).getTime();this.splitActionsRunning.set(e,d),n.determineStatementRanges(this,o.delimiter??";",(t=>{const n=this.splitActionsRunning.get(e);if(!(void 0===n||n>d))if(this.splitActionsRunning.delete(e),1===t.length){const n=()=>{let n=t[0].delimiter;n||(n=e>0?this.statementDetails[e-1].delimiter:";"),o.delimiter=n,o.state=t[0].state,o.contentStart=o.span.start+t[0].contentStart,this.splittingFinished(),this.validateNextStatement(e),this.updateLineStartMarkers()};switch(t[0].state){case Xi.DelimiterChange:if(e+1<this.statementDetails.length){let t=e+1;for(;t<this.statementDetails.length;){const e=this.statementDetails[t];if(e.state===Xi.DelimiterChange)break;o.span.length+=e.span.length,++t}t>e+1&&(this.clearDecorations(e+1,t-1),this.statementDetails.splice(e+1,t-e-1)),this.pendingSplitActions.add(e),setTimeout((()=>this.splitNextStatement()),0)}else n();break;case Xi.OpenString:case Xi.OpenComment:if(e+1<this.statementDetails.length){this.clearDecorations(e+1,e+1);const t=this.statementDetails.splice(e+1,1);o.span.length+=t[0].span.length,this.pendingSplitActions.add(e),setTimeout((()=>this.splitNextStatement()),0)}else n();break;default:n()}}else if(e<this.statementDetails.length){const n=[];let i=";";t.forEach((e=>{n.push({delimiter:e.delimiter??i,span:{start:e.span.start+o.span.start,length:e.span.length},contentStart:e.contentStart+o.span.start,state:e.state,diagnosticDecorationIDs:[]}),e.delimiter&&(i=e.delimiter)})),this.clearDecorations(e,e),this.statementDetails.splice(e,1,...n),this.updateLineStartMarkers(),this.updateValidationIndices(e,t.length);for(let t=0,o=e;t<n.length;++t,++o)this.pendingValidations.add(o),this.validationsRunning.delete(o);this.validateNextStatement(),0===this.pendingSplitActions.size&&this.splittingFinished()}}),l)}else this.splittingFinished(),this.validateNextStatement()}validateNextStatement(e){var t,n;if(this.disposed)return;const i=this.presentation.backend,o=null==(t=null==i?void 0:i.getModel)?void 0:t.call(i);if(o&&(this.pendingValidations.size>0||void 0!==e)){let t;void 0!==e?t=e:[t]=this.pendingValidations,this.pendingValidations.delete(t);const i=bo.instance,s=this.statementDetails[t];if(s){if(s.state===Xi.DelimiterChange)return null==(n=o.deltaDecorations)||n.call(o,s.diagnosticDecorationIDs,[]),this.updateLineStartMarkers(),void setTimeout((()=>this.validateNextStatement()),0);const e=s.span.start+this.presentation.codeOffset,r=o.getPositionAt(e);let a=e+s.span.length;s.state===Xi.Complete&&(a-=s.delimiter.length);const l=o.getPositionAt(a);if(r.lineNumber<this.startLine||l.lineNumber>this.endLine)return void setTimeout((()=>this.validateNextStatement()),0);const d=o.getValueInRange({startLineNumber:r.lineNumber,startColumn:r.column,endLineNumber:l.lineNumber,endColumn:l.column},Gt.EndOfLinePreference.LF),c=(new Date).getTime();return this.validationsRunning.set(t,c),void i.validate(this,d,(n=>{var i;if(this.validationsRunning.get(t)===c){this.validationsRunning.delete(t);const r=n.map((t=>{const n=o.getPositionAt(t.span.start+e),i=o.getPositionAt(t.span.start+e+t.span.length);return{range:{startLineNumber:n.lineNumber,startColumn:n.column,endLineNumber:i.lineNumber,endColumn:i.column},options:{stickiness:Gt.TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges,isWholeLine:!1,inlineClassName:No.validationClass.get(t.severity),minimap:{position:Gt.MinimapPosition.Inline,color:"red"},hoverMessage:{value:t.message||""}}}}));t<this.statementDetails.length&&(s.diagnosticDecorationIDs=(null==(i=o.deltaDecorations)?void 0:i.call(o,s.diagnosticDecorationIDs,r))??[])}setTimeout((()=>this.validateNextStatement()),0)}))}}this.updateLineStartMarkers(),nn.execute("editorValidationDone",this.id)}updateValidationIndices(e,t){const n=Array.from(this.pendingValidations);n.forEach(((i,o)=>{i>=e&&(n[o]+=t)})),this.pendingSplitActions=new Set(n)}pushSplitRequest(e){if(!this.disposed){const t=this.pendingSplitActions.size;this.pendingValidations.delete(e),this.splitActionsRunning.delete(e),this.validationsRunning.delete(e),this.pendingSplitActions=new Set([e,...this.pendingSplitActions]),0===t&&(ge(this,H)||be(this,H,new Semaphore),this.splitNextStatement())}}updateLineStartMarkers(){if(!this.disposed){const e=this.model;if(e){const t=new Set,n=e.getLineCount();this.statementDetails.forEach((i=>{if(i.contentStart>=i.span.start){const o=e.getPositionAt(i.contentStart);o.lineNumber<=n&&t.add(o.lineNumber)}})),this.presentation.markLines(t,"statementStart")}}}splittingFinished(){var e;null==(e=ge(this,H))||e.notifyAll(),be(this,H,void 0)}}H=new WeakMap;class ExecutionContexts{constructor(e=Bi.Unused,t,n,i){pe(this,"cursorPosition",{lineNumber:1,column:1}),pe(this,"content",[]),pe(this,"onResultRemoval",(e=>{Oi.removeDataByResultIds(this.store,e)})),this.store=e,this.dbVersion=t,this.sqlMode=n,this.defaultSchema=i}[Symbol.iterator](){return this.content[Symbol.iterator]()}get count(){return this.content.length}contextAt(e){if(!(e<0||e>this.content.length-1))return this.content[e]}addContext(e){const t=this.createContext(e);return this.content.push(t),t}removeContexts(e){e.reverse().forEach((e=>{this.content[e].dispose(),this.content.splice(e,1)}))}insertContext(e,t){const n=this.createContext(t);return this.content.splice(e,0,n),n}cleanUpAndReturnState(){const e=[];return this.content.forEach((t=>{e.push(t.state),t.dispose()})),this.content=[],e}restoreFromStates(e,t,n){var i;if(0===n.length)return;this.content.forEach((e=>e.dispose())),this.content=[];const o=[];n.forEach((n=>{const i=t(e,n.language);i.startLine=n.start,i.endLine=n.end;const s=this.createContext(i,n.statements);this.content.push(s),o.push(i)})),null==(i=e.backend)||i.changeViewZones((e=>{for(let t=0;t<o.length;++t){const i=o[t],s=n[t];if(s.result){const t=i.viewZone;t&&(t.heightInPx=s.currentHeight,i.viewZoneId=e.addZone(t))}}}));for(let s=0;s<n.length;++s){const e=n[s],t=this.content[s];if(e.result)switch(e.result.type){case"resultIds":{const n={type:"resultSets",sets:[],output:[]};this.loadResultSets(e.result.list).then((i=>{n.sets=i,t.setResult(n,{manualHeight:e.currentHeight,currentSet:e.currentSet,maximized:e.maximizeResultPane})})).catch((()=>{}));break}default:t.setResult(e.result,{manualHeight:e.currentHeight})}}}contextIndexFromPosition(e){return e?this.content.findIndex((t=>t.startLine<=e.lineNumber&&e.lineNumber<=t.endLine)):-1}contextFromPosition(e){const t=this.contextIndexFromPosition(e);if(t>-1)return this.content[t]}contextWithId(e){const t=this.content.findIndex((t=>t.id===e));if(t>-1)return this.content[t]}contextIndicesFromRange(e){const t=[];return this.content.forEach(((n,i)=>{const o=e.startLine<=n.startLine&&n.startLine<=e.endLine,s=n.startLine<=e.startLine&&e.startLine<=n.endLine;(o||s)&&t.push(i)})),t}get first(){if(this.content.length>0)return this.content[0]}get last(){if(this.content.length>0)return this.content[this.content.length-1]}get language(){if(this.content.length>0)return this.content[this.content.length-1].language}set currentSchema(e){this.defaultSchema!==e&&(this.defaultSchema=e,this.content.forEach((t=>{t instanceof SQLExecutionContext&&(t.currentSchema=e)})))}async collectRawState(){const e=[];for(const t of this.content){const n=t.state,i={state:n,data:[]};if(n.result&&"resultIds"===n.result.type)for(const e of n.result.list){const t=await Oi.db.getAllFromIndex(this.store,"resultIndex",e);this.isDbModuleResultData(t)&&i.data.push(...t)}e.push(i)}return e}switchContextLanguage(e,t){if(e<0||e>=this.content.length)return;const n=this.content[e];if(n.language===t)return;n.dispose();const i=n.presentation;i.language=t,i.removeResult();const o=this.createContext(i);this.content[e]=o,i.isSQLLike||o.scheduleFullValidation()}removeAllResults(){this.content.forEach((e=>{e.removeResult()}))}createContext(e,t){return e.onRemoveResult=this.onResultRemoval,e.isSQLLike?new SQLExecutionContext(e,this.dbVersion,this.sqlMode,this.defaultSchema,t):new So(e)}async loadResultSets(e){const t=[];for await(const n of e){const e=await Oi.db.getAllFromIndex(this.store,"resultIndex",n),i={type:"resultSet",resultId:n,sql:"",columns:[],data:{rows:[],hasMoreRows:!1,currentPage:0}};t.push(i),this.isDbModuleResultData(e)&&e.forEach((e=>{i.index=e.index,e.sql&&(i.sql=e.sql),i.columns.push(...e.columns??[]),i.data.rows.push(...e.rows),e.executionInfo&&(i.data.executionInfo=e.executionInfo),e.hasMoreRows&&(i.data.hasMoreRows=!0,i.data.currentPage=e.currentPage)}))}return t}isDbModuleResultData(e){const t=e;return t.length>0&&void 0!==t[0].tabId}}class CodeCompletionProvider{constructor(){pe(this,"triggerCharacters","abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ.\\@(".split(""))}provideCompletionItems(e,t){var n;const i=bo.instance,o=null==(n=e.executionContexts)?void 0:n.contextFromPosition(t);if(o){if(o.isInternal){const n=e.getWordUntilPosition(t),i={startLineNumber:t.lineNumber,startColumn:n.startColumn-1,endLineNumber:t.lineNumber,endColumn:n.endColumn-1};return{incomplete:!1,suggestions:this.createInternalCompletionItems(i,e.editorMode)}}return i.getCodeCompletionItems(o,t)}}createInternalCompletionItems(e,t){return t===Li.Terminal?[{label:"\\about",kind:jt.CompletionItemKind.Keyword,range:e,insertText:"\\about",detail:"Shows some general information."},{label:"\\sql",kind:jt.CompletionItemKind.Keyword,range:e,insertText:"\\sql",detail:"Executes SQL statement or switches to SQL processing mode when no statement is given."},{label:"\\js",kind:jt.CompletionItemKind.Keyword,range:e,insertText:"\\js",detail:"Command to switch the session to JavaScript mode"},{label:"\\py",kind:jt.CompletionItemKind.Keyword,range:e,insertText:"\\py",detail:"Command to switch the session to Python mode"},{label:"\\?",kind:jt.CompletionItemKind.Keyword,range:e,insertText:"\\?",detail:"Prints help information about a specific topic"},{label:"\\help",kind:jt.CompletionItemKind.Keyword,range:e,insertText:"\\help",detail:"Prints help information about a specific topic"},{label:"\\h",kind:jt.CompletionItemKind.Keyword,range:e,insertText:"\\h",detail:"Prints help information about a specific topic"},{label:"\\connect",kind:jt.CompletionItemKind.Keyword,range:e,insertText:"\\connect",detail:"Connects the shell to a MySQL server and assigns the global session."},{label:"\\c",kind:jt.CompletionItemKind.Keyword,range:e,insertText:"\\c",detail:"Connects the shell to a MySQL server and assigns the global session."},{label:"\\disconnect",kind:jt.CompletionItemKind.Keyword,range:e,insertText:"\\disconnect",detail:"Disconnects the current MySQL connection."},{label:"\\exit",kind:jt.CompletionItemKind.Keyword,range:e,insertText:"\\exit",detail:"Closes the session and the session tab, same as \\quit."},{label:"\\option",kind:jt.CompletionItemKind.Keyword,range:e,insertText:"\\option",detail:"Allows working with the available shell options."},{label:"\\quit",kind:jt.CompletionItemKind.Keyword,range:e,insertText:"\\quit",detail:"Closes the session and the session tab"},{label:"\\q",kind:jt.CompletionItemKind.Keyword,range:e,insertText:"\\q",detail:"Closes the session and the session tab"},{label:"\\reconnect",kind:jt.CompletionItemKind.Keyword,range:e,insertText:"\\reconnect",detail:"Reconnects the current MySQL connection"},{label:"\\show",kind:jt.CompletionItemKind.Keyword,range:e,insertText:"\\show",detail:"Executes the given report with provided options and arguments"},{label:"\\status",kind:jt.CompletionItemKind.Keyword,range:e,insertText:"\\status",detail:"Print information about the current session"},{label:"\\s",kind:jt.CompletionItemKind.Keyword,range:e,insertText:"\\s",detail:"Print information about the current session"},{label:"\\use",kind:jt.CompletionItemKind.Keyword,range:e,insertText:"\\use",detail:"Sets the active schema"},{label:"\\u",kind:jt.CompletionItemKind.Keyword,range:e,insertText:"\\u",detail:"Sets the active schema"}]:[{label:"\\about",kind:jt.CompletionItemKind.Keyword,range:e,insertText:"\\about",detail:"Shows some general information."},{label:"\\reconnect",kind:jt.CompletionItemKind.Keyword,range:e,insertText:"\\reconnect",detail:"Reconnects the current MySQL connection."}]}}class DefinitionProvider{provideDefinition(e,t){var n;const i=bo.instance,o=null==(n=e.executionContexts)?void 0:n.contextFromPosition(t);if(o){if(o.isInternal)return;return i.findDefinition(o,t)}}}class DocumentHighlightProvider{provideDocumentHighlights(e,t){var n;const i=bo.instance,o=null==(n=e.executionContexts)?void 0:n.contextFromPosition(t);if(o){if(o.isInternal)return;return i.findDocumentHighlight(o,t)}}}class FormattingProvider{provideDocumentFormattingEdits(e,t){var n;const i=bo.instance,o=null==(n=e.executionContexts)?void 0:n.contextFromPosition(e.executionContexts.cursorPosition);if(!o)return null;{const e=o.fullRange;if(e){const n={startLineNumber:e.startLine,startColumn:e.startColumn,endLineNumber:e.endLine,endColumn:e.endColumn};if(o.isInternal){return[{range:n,text:o.code.split(" ").join(" "),eol:Gt.EndOfLineSequence.LF}]}return i.format(o,n,t)}}}}class HoverProvider{provideHover(e,t){var n;const i=bo.instance,o=null==(n=e.executionContexts)?void 0:n.contextFromPosition(t);return o?o.isInternal?void 0:i.getHover(o,t):null}}const Oo={id:"msg",extensions:[".msg"],aliases:["MSG"],mimetypes:["text/msg"],loader:()=>Wt((()=>import("./msg-65038ebe.js")),["assets/msg-65038ebe.js","assets/monaco-editor-3ec5f4cc.js","assets/dependencies-a10b35e1.js","assets/monaco-editor-007911e0.css"])};class ReferencesProvider{provideReferences(e,t){var n;const i=bo.instance,o=null==(n=e.executionContexts)?void 0:n.contextFromPosition(t);if(o){if(o.isInternal)return;return i.findReferences(o,t)}}}class RenameProvider{provideRenameEdits(e,t,n){var i;const o=bo.instance,s=null==(i=e.executionContexts)?void 0:i.contextFromPosition(t);if(s){if(s.isInternal)return;return o.getRenameLocations(s,t,n)}}}class SignatureHelpProvider{provideSignatureHelp(e,t){var n;const i=bo.instance,o=null==(n=e.executionContexts)?void 0:n.contextFromPosition(t);if(o){if(o.isInternal)return;return i.getSignatureHelp(o,t)}}}class MsgSemanticTokensProvider{constructor(){fe(this,j,new Map)}getLegend(){return{tokenTypes:Fi,tokenModifiers:Ai}}async provideDocumentSemanticTokens(e,t,n){var i;if(!e.executionContexts||n.isCancellationRequested)return{data:new Uint32Array(0)};let o=ge(this,j).get(e.id);o||(o={disposables:[],firstLine:1,lastLine:e.getLineCount()},o.disposables.push(e.onDidChangeContent((e=>{e.changes.forEach((e=>{(-1===o.firstLine||e.range.startLineNumber<o.firstLine)&&(o.firstLine=e.range.startLineNumber);const t=e.text.split("\n").length+e.range.endLineNumber-1;(-1===o.lastLine||t>o.lastLine)&&(o.lastLine=t)}))}))),o.disposables.push(e.onWillDispose((()=>{const t=ge(this,j).get(e.id);t&&t.disposables.forEach((e=>e.dispose())),ge(this,j).delete(e.id)}))),ge(this,j).set(e.id,o)),-1!==o.firstLine&&-1!==o.lastLine||(o.firstLine=1,o.lastLine=e.getLineCount());const s=e.executionContexts.contextIndicesFromRange({startLine:o.firstLine,startColumn:0,endLine:o.lastLine,endColumn:0});o.firstLine=-1,o.lastLine=-1;for(const c of s)if(await(null==(i=e.executionContexts.contextAt(c))?void 0:i.updateTokenList()),n.isCancellationRequested)return{data:new Uint32Array(0)};const r=[];for(const c of e.executionContexts){const e=c.tokenList;e?r.push(e.slice()):r.push(new Uint32Array(0))}let a=0;for(let c=0;c<r.length;c++){const t=r[c];if(0===t.length)continue;const n=e.executionContexts.contextAt(c);t[0]+=n.startLine-a-1;for(let e=0;e<t.length;e+=5)a+=t[e]}const l=new Uint32Array(r.reduce(((e,t)=>e+t.length),0));let d=0;for(const c of r)l.set(c,d),d+=c.length;return{data:l}}releaseDocumentSemanticTokens(e){}}j=new WeakMap;const _o=class _CodeEditor extends ComponentBase{constructor(e){super(e),pe(this,"hostRef",ke()),pe(this,"editor"),pe(this,"addingNewContext",!1),pe(this,"scrolling",!1),pe(this,"scrollingTimer"),pe(this,"keyboardTimer"),pe(this,"resizeObserver"),pe(this,"disposables",[]),pe(this,"templateCodeBlocks",[]),pe(this,"templatePastePosition"),pe(this,"isScrolling",(()=>this.scrolling)),pe(this,"clear",(()=>{const e=this.model;e&&e.setValue("")})),pe(this,"handleSettingsChanged",(e=>{if(e)switch(e.key){case"editor.wordWrap":{const{allowSoftWrap:t}=this.mergedProps;if(t){const t=this.backend;null==t||t.updateOptions({wordWrap:e.value})}break}case"editor.showHidden":{const t=this.backend,n=e.value?"all":"none",i=e.value;null==t||t.updateOptions({renderWhitespace:n,renderControlCharacters:i});break}case"editor.showMinimap":case"dbEditor.useMinimap":{const{minimap:e}=this.mergedProps,t=hi.get("editor.showMinimap",!0),n=hi.get("dbEditor.useMinimap",!1),i=e??{enabled:!0};i.enabled=t&&n;const o=this.backend;null==o||o.updateOptions({minimap:i});break}}else this.forceUpdate();return Promise.resolve(!0)})),pe(this,"handleBackspace",(()=>{const e=this.backend,t=this.model;if(e&&t){const n=e.getSelections();null==n||n.forEach((n=>{var i;if(n.isEmpty()){const o=null==(i=t.executionContexts)?void 0:i.contextFromPosition({lineNumber:n.startLineNumber,column:n.startColumn});if(o)if(o.startLine===n.startLineNumber&&1===n.startColumn);else{const i={startLineNumber:0,startColumn:0,endLineNumber:0,endColumn:0};if(n.startColumn>1)i.startLineNumber=n.startLineNumber,i.startColumn=n.startColumn-1,i.endLineNumber=n.startLineNumber,i.endColumn=n.startColumn;else if(n.startLineNumber>1){const e=t.getLineMaxColumn(n.startLineNumber-1);i.startLineNumber=n.startLineNumber,i.startColumn=n.startColumn,i.endLineNumber=n.startLineNumber-1,i.endColumn=e}const o={range:i,text:"",forceMoveMarkers:!0};e.executeEdits("backspace",[o])}}else{const t={range:n,text:"",forceMoveMarkers:!0};e.executeEdits("delete",[t])}}))}})),pe(this,"handleDelete",(()=>{const e=this.backend,t=this.model;if(e&&t){const n=e.getSelections();null==n||n.forEach((n=>{var i;if(n.isEmpty()){const o=null==(i=t.executionContexts)?void 0:i.contextFromPosition({lineNumber:n.startLineNumber,column:n.startColumn});if(o){let i=t.getLineMaxColumn(o.endLine??0);if(o.endLine===n.startLineNumber&&n.startColumn===i);else{const o={startLineNumber:0,startColumn:0,endLineNumber:0,endColumn:0};i=t.getLineMaxColumn(n.startLineNumber),n.startColumn===i?(o.startLineNumber=n.startLineNumber,o.startColumn=i,o.endLineNumber=n.startLineNumber+1,o.endColumn=1):(o.startLineNumber=n.startLineNumber,o.startColumn=n.startColumn,o.endLineNumber=n.startLineNumber,o.endColumn=n.startColumn+1);const s={range:o,text:"",forceMoveMarkers:!0};e.executeEdits("delete",[s])}}}else{const t={range:n,text:"",forceMoveMarkers:!0};e.executeEdits("delete",[t])}}))}})),pe(this,"handleSelectAll",(()=>{var e;const t=this.backend,n=this.model;if(t&&n){const i=t.getPosition();if(i&&!this.keyboardTimer){const o=null==(e=n.executionContexts)?void 0:e.contextFromPosition(i);if(o)return t.setSelection({startLineNumber:o.startLine,startColumn:1,endLineNumber:o.endLine,endColumn:n.getLineMaxColumn(o.endLine)}),void(this.keyboardTimer=setTimeout((()=>{this.keyboardTimer=null}),500))}const o=n.getLineCount();t.setSelection({startLineNumber:1,startColumn:1,endLineNumber:o,endColumn:n.getLineMaxColumn(o)})}})),pe(this,"jumpToBlockStart",(()=>{const e=this.backend,t=this.model;if(e&&t){const n=e.getPosition();if(n){const i=t.executionContexts;let o=null==i?void 0:i.contextFromPosition(n);o&&(o.startLine<n.lineNumber?e.setPosition({lineNumber:o.startLine,column:1}):(o=null==i?void 0:i.contextFromPosition({lineNumber:o.startLine-1,column:1}),o&&e.setPosition({lineNumber:o.startLine,column:1})))}}})),pe(this,"jumpToBlockEnd",(()=>{const e=this.backend,t=this.model;if(e&&t){const n=e.getPosition();if(n){const i=t.executionContexts;let o=null==i?void 0:i.contextFromPosition(n);o&&(o.endLine>n.lineNumber?e.setPosition({lineNumber:o.endLine,column:t.getLineMaxColumn(o.endLine)}):(o=null==i?void 0:i.contextFromPosition({lineNumber:o.endLine+1,column:1}),o&&e.setPosition({lineNumber:o.endLine,column:t.getLineMaxColumn(o.endLine)})))}}})),pe(this,"handleSelectStatement",(e=>new Promise((t=>{const n=this.model;if(n){const i=n.executionContexts,o=null==i?void 0:i.contextWithId(e.contextId);if(o)return o.selectStatement(e.statementIndex),void t(!0)}t(!1)})))),pe(this,"handleModelChange",(e=>{nn.executeRemote("editorChanged",void 0);const t=this.model;if(t){const n=t.executionContexts;switch(t.getLanguageId()){case"msg":this.updateExecutionContexts(e.changes);break;case"mysql":case"sql":{const t=null==n?void 0:n.first;null==t||t.applyEditorChanges(e.changes);break}}const{onModelChange:i}=this.mergedProps;null==i||i()}})),pe(this,"handlePaste",(e=>{const t=$t.lift(e.range),n={startLine:t.startLineNumber,startColumn:t.startColumn,endLine:t.endLineNumber,endColumn:t.endColumn};this.scanForLanguageSwitches(n)})),pe(this,"generateExecutionBlocksFromContent",(()=>{const{createResultPresentation:e}=this.mergedProps,t=this.backend,n=this.model;if(n&&t&&n.executionContexts&&e){n.executionContexts.cleanUpAndReturnState();this.determineTextBlocks(n.getValue()).forEach((t=>{const i=e(this,t.language);i.startLine=t.startLine+1,i.endLine=t.endLine+1,n.executionContexts.addContext(i)}))}})),pe(this,"determineTextBlocks",(e=>{var t;const{language:n,allowedLanguages:i=[],startLanguage:o,sqlDialect:s}=this.mergedProps;let r,a="javascript";"string"==typeof e?(r=(e=>{const t=[];let n=0,i=0;for(;i<e.length;)switch(e[i]){case"'":case"`":case'"':{const t=e[i];for(;i<e.length;){if("\\"===e[i])++i;else if(e[i]===t){++i;break}++i}break}case"\n":t.push(e.slice(n,++i)),n=i;break;case"/":if(i+1<e.length&&"*"===e[i+1]){for(i+=2;i<e.length;)if("*"===e[i++]&&i<e.length&&"/"===e[i]){++i;break}}else++i;break;default:++i}return t})(e),a=("msg"===n?o:n)??"javascript",a&&i.length>0&&(i.includes(a)||(a=i[0]))):(r=(null==(t=e.model)?void 0:t.getLinesContent())??[],a=e.language),"sql"===a&&s&&(a=s);const l=[];let d={language:a,startLine:0,endLine:0===r.length?0:-1,contentStartLine:0},c=!1;for(const u of r){let e=u.trim();if(e.length>0&&e.startsWith("\\")){e=e.slice(1);let t=_CodeEditor.languageMap.get(e);if(t&&i.includes(t)){if("sql"===t&&s&&(t=s),a=t,c){c=!1;const e=d.endLine+1;l.push(d),d={language:a,startLine:e,endLine:e,contentStartLine:e}}else d.language=a,++d.endLine;continue}}++d.endLine,c||(d.contentStartLine=d.endLine),c=!0}return l.push(d),l})),pe(this,"handleEditorResize",(e=>{if(e.length>0&&this.editor){const t=e[0].contentRect;this.editor.layout({width:t.width,height:t.height}),this.resizeViewZones()}})),pe(this,"resizeViewZones",(()=>{var e;if(this.editor){const t=null==(e=this.editor.getDomNode())?void 0:e.getElementsByClassName("view-zones");if(t&&t.length>0){const e=this.editor.getLayoutInfo();t[0].style.width=e.contentWidth-1+"px"}}})),pe(this,"executeSelectedOrAll",(e=>{const{language:t}=this.mergedProps,n=this.backend,i=this.model,o=(null==i?void 0:i.editorMode)===Li.Terminal,s="msg"===t&&e.advance;return this.executeCurrentContext({advance:s||o,forceSecondaryEngine:e.forceSecondaryEngine,asText:e.asText}),null==n||n.focus(),Promise.resolve(!0)})),pe(this,"executeCurrent",(e=>{const{language:t}=this.mergedProps,n=this.backend,i=this.model,o=(null==i?void 0:i.editorMode)===Li.Terminal,s="msg"===t&&e.advance;return this.executeCurrentContext({atCaret:!0,advance:s||o,forceSecondaryEngine:e.forceSecondaryEngine,asText:e.asText}),null==n||n.focus(),Promise.resolve(!0)})),pe(this,"executeFind",(()=>{const e=this.backend;null==e||e.focus();const t=null==e?void 0:e.getAction("actions.find");return t?new Promise((e=>{t.run().then((()=>{e(!0)}))})):Promise.resolve(!1)})),pe(this,"executeFormat",(()=>{const e=this.backend;null==e||e.focus();const t=null==e?void 0:e.getAction("editor.action.formatDocument");return t?new Promise((e=>{t.run().then((()=>{e(!0)}))})):Promise.resolve(!1)})),pe(this,"switchCurrentLanguage",((e,t=!1)=>{var n,i;const{sqlDialect:o}=this.mergedProps,s=this.backend,r=this.model;if(s&&r){"sql"===e&&o&&(e=o),null==(n=r.executionContexts)||n.switchContextLanguage(this.currentBlockIndex,e);const s=null==(i=r.executionContexts)?void 0:i.contextAt(this.currentBlockIndex);if(s){const e=r.getLineLength(s.endLine),n=t?"":r.getValueInRange({startLineNumber:s.startLine,startColumn:1,endLineNumber:s.endLine,endColumn:e+1});r.applyEdits([{range:{startLineNumber:s.startLine,startColumn:1,endLineNumber:s.endLine,endColumn:e+1},text:n,forceMoveMarkers:!1}],!1)}}})),pe(this,"useNotebookAsTemplate",(()=>{const e=this.model;if(e&&e.executionContexts){this.templateCodeBlocks=[],this.templatePastePosition=0;for(let t=0;t<e.executionContexts.count;t++){const n=e.executionContexts.contextAt(t);this.templateCodeBlocks.push({code:(null==n?void 0:n.code)??"",language:(null==n?void 0:n.language)??"sql"})}this.clear()}})),pe(this,"appendFromTemplate",(()=>{if(void 0!==this.templatePastePosition&&this.templatePastePosition<this.templateCodeBlocks.length){const e=this.templateCodeBlocks[this.templatePastePosition];this.appendText(e.code),this.switchCurrentLanguage(e.language,!1),this.templatePastePosition++,this.templatePastePosition>=this.templateCodeBlocks.length&&(this.templatePastePosition=void 0,this.templateCodeBlocks=[])}})),this.addHandledProperties("initialContent","executeInitialContent","language","allowedLanguages","sqlDialect","readonly","detectLinks","showHidden","useTabStops","showHidden","autoFocus","allowSoftWrap","typeDefinitions","componentMinWidth","lineDecorationsWidth","lineDecorationsWidth","renderLineHighlight","showIndentGuides","lineNumbers","minimap","suggest","font","scrollbar","onScriptExecution","onHelpCommand","onCursorChange","onOptionsChanged","createResultPresentation"),"undefined"!=typeof ResizeObserver&&(this.resizeObserver=new ResizeObserver(this.handleEditorResize))}static updateTheme(e,t,n){Gt.remeasureFonts();const i={};for(const[s,r]of Object.entries(n.colors||{}))i[s]=new ye(r).hexa();const o=[];(n.tokenColors||[]).forEach((e=>{const t=e.scope||[];(Array.isArray(t)?t:t.split(",")).forEach((t=>{o.push({token:t,foreground:new ye(e.settings.foreground).hexa(),background:new ye(e.settings.background).hexa(),fontStyle:e.settings.fontStyle})}))})),Gt.defineTheme(e,{base:"light"===t?"vs":"vs-dark",inherit:!1,rules:o,colors:i}),Gt.setTheme(e)}static configureMonaco(){if(_CodeEditor.monacoConfigured)return;_CodeEditor.monacoConfigured=!0,jt.onLanguage(Oo.id,(()=>{Oo.loader().then((e=>{jt.setMonarchTokensProvider(Oo.id,e.language),jt.setLanguageConfiguration(Oo.id,e.languageConfiguration)}))})),jt.onLanguage("mysql",(()=>{Oo.loader().then((e=>{jt.setMonarchTokensProvider("mysql",e.language),jt.setLanguageConfiguration("mysql",e.languageConfiguration)}))}));const e=["msg","javascript","typescript","sql","mysql","python"];if(jt.registerDocumentSemanticTokensProvider(e,new MsgSemanticTokensProvider),jt.registerCompletionItemProvider(e,new CodeCompletionProvider),jt.registerHoverProvider(e,new HoverProvider),jt.registerSignatureHelpProvider(e,new SignatureHelpProvider),jt.registerDocumentHighlightProvider(e,new DocumentHighlightProvider),jt.registerDefinitionProvider(e,new DefinitionProvider),jt.registerReferenceProvider(e,new ReferencesProvider),jt.registerDocumentFormattingEditProvider(e,new FormattingProvider),jt.registerRenameProvider(e,new RenameProvider),jt.register(Oo),Gt.createModel("","typescript").dispose(),Gt.createModel("","javascript").dispose(),jt.typescript){const e={allowNonTsExtensions:!0,target:jt.typescript.ScriptTarget.ESNext,module:jt.typescript.ModuleKind.ESNext,strictNullChecks:!0};jt.typescript.javascriptDefaults.setCompilerOptions(e),jt.typescript.typescriptDefaults.setCompilerOptions(e),jt.typescript.typescriptDefaults.setDiagnosticsOptions({diagnosticCodesToIgnore:[1375]}),jt.typescript.javascriptDefaults.setDiagnosticsOptions({diagnosticCodesToIgnore:[1375]})}}componentDidMount(){var e,t;if(!this.hostRef.current)return;const{language:n,initialContent:i,savedState:o,autoFocus:s,createResultPresentation:r,readonly:a,minimap:l,detectLinks:d,suggest:c,showIndentGuides:u,renderLineHighlight:h,useTabStops:p,font:m,scrollbar:g,lineNumbers:f,lineDecorationsWidth:b,allowSoftWrap:v,extraLibs:S}=this.mergedProps,C=this.getEffectiveClassNames(["codeEditor",`decorationSet-${hi.get("editor.theming.decorationSet","standard")}`]),w=hi.get("editor.showHidden",!1),y=v?hi.get("editor.wordWrap","off"):"off",k=hi.get("editor.wordWrapColumn",120),I={indentation:u},D=hi.get("editor.showMinimap",!0),T=hi.get("dbEditor.useMinimap",!1),R=l??{enabled:!0};let x,E;R.enabled=D&&T,o&&!o.model.isDisposed()?(E=o.model,x="msg"===E.getLanguageId()):(x="msg"===n,E=Object.assign(Gt.createModel(i??"",n),{executionContexts:new ExecutionContexts(void 0,hi.get("editor.dbVersion",80024),hi.get("editor.sqlMode",""),""),symbols:new Pe("default",{allowDuplicateSymbols:!0}),editorMode:Li.Standard}),E.getEndOfLineSequence()!==Gt.EndOfLineSequence.LF?E.setEOL(Gt.EndOfLineSequence.LF):E.setValue(i??""));const M={extraEditorClassName:C,rulers:[],cursorSurroundingLines:2,readOnly:a,minimap:R,find:{seedSearchStringFromSelection:"selection",autoFindInSelection:"never",addExtraSpaceOnTop:!1},cursorSmoothCaretAnimation:"off",fontLigatures:!0,wordWrap:y,wordWrapColumn:k,wrappingIndent:"indent",wrappingStrategy:"advanced",hover:{enabled:!0},links:d,colorDecorators:!0,contextmenu:(null==E?void 0:E.editorMode)!==Li.Terminal,suggest:c??{preview:!0},inlineSuggest:{enabled:!0},quickSuggestions:!0,emptySelectionClipboard:!1,copyWithSyntaxHighlighting:!0,codeLens:!x,folding:!x,foldingStrategy:"auto",glyphMargin:!x,showFoldingControls:"always",lightbulb:{enabled:!1},renderWhitespace:w?"all":"none",renderControlCharacters:w,guides:I,renderLineHighlight:h,useTabStops:p,fontFamily:null==m?void 0:m.fontFamily,fontWeight:null==m?void 0:m.fontWeight,fontSize:null==m?void 0:m.fontSize,lineHeight:null==m?void 0:m.lineHeight,letterSpacing:null==m?void 0:m.letterSpacing,showUnused:!0,scrollbar:g,lineNumbers:f,scrollBeyondLastLine:!1,lineDecorationsWidth:b??(x?49:20),"semanticHighlighting.enabled":!0,model:E};this.editor=Gt.create(this.hostRef.current,M),E&&(o&&o.contextStates&&o.contextStates.length>0&&r?null==(e=E.executionContexts)||e.restoreFromStates(this,r,o.contextStates):"msg"===E.getLanguageId()&&E.getLineCount()>1?this.generateExecutionBlocksFromContent():this.addInitialBlock(E)),this.editor.layout(),s&&this.editor.focus(),null==(t=this.resizeObserver)||t.observe(this.hostRef.current),this.prepareUse(),jt.typescript&&(null==S||S.forEach((e=>{this.disposables.push(jt.typescript.typescriptDefaults.addExtraLib(e.code,e.path))}))),Gt.remeasureFonts(),setTimeout((()=>{this.resizeViewZones()}),0),(null==o?void 0:o.viewState)&&this.editor.restoreViewState(o.viewState)}componentWillUnmount(){var e,t;this.scrollingTimer&&(clearTimeout(this.scrollingTimer),this.scrollingTimer=null);const{savedState:n}=this.mergedProps;nn.unregister("settingsChanged",this.handleSettingsChanged),nn.unregister("editorExecuteSelectedOrAll",this.executeSelectedOrAll),nn.unregister("editorExecuteCurrent",this.executeCurrent),nn.unregister("editorFind",this.executeFind),nn.unregister("editorFormat",this.executeFormat),nn.unregister("editorSelectStatement",this.handleSelectStatement);const i=this.backend;n&&i&&(n.viewState=i.saveViewState(),n.contextStates=null==(e=n.model.executionContexts)?void 0:e.cleanUpAndReturnState(),n.options=this.options),this.disposables.forEach((e=>e.dispose())),this.disposables=[],null==(t=this.resizeObserver)||t.unobserve(this.hostRef.current)}componentDidUpdate(e){var t,n,i,o;const{initialContent:s,language:r,savedState:a,autoFocus:l,createResultPresentation:d}=this.mergedProps,c=this.backend;if((null==a?void 0:a.model)!==(null==c?void 0:c.getModel())){e.savedState&&c&&(e.savedState.viewState=c.saveViewState(),e.savedState.contextStates=null==(t=e.savedState.model.executionContexts)?void 0:t.cleanUpAndReturnState(),e.savedState.options=this.options),a&&(a.model.isDisposed()||null==c||c.setModel(a.model),a.viewState&&(null==c||c.restoreViewState(a.viewState)),this.options=a.options);const i=this.model;i&&(!a&&r&&Gt.setModelLanguage(i,r),a&&a.contextStates&&a.contextStates.length>0&&d?null==(n=i.executionContexts)||n.restoreFromStates(this,d,a.contextStates):(a||i.setValue(s??""),"msg"===i.getLanguageId()&&i.getLineCount()>0?this.generateExecutionBlocksFromContent():this.addInitialBlock(i)))}null==(i=this.editor)||i.layout(),Gt.remeasureFonts(),l&&(null==(o=this.editor)||o.focus())}render(){return Ie("div",{className:"msg editorHost",ref:this.hostRef})}focus(){var e;null==(e=this.editor)||e.focus()}get options(){var e;const t=null==(e=this.model)?void 0:e.getOptions();return t?{tabSize:t.tabSize,insertSpaces:t.insertSpaces,indentSize:t.indentSize,defaultEOL:t.defaultEOL===Gt.DefaultEndOfLine.LF?"LF":"CRLF",trimAutoWhitespace:t.trimAutoWhitespace}:{}}set options(e){const t=this.model;t&&(t.updateOptions({tabSize:e.tabSize,insertSpaces:e.insertSpaces,indentSize:e.indentSize,trimAutoWhitespace:e.trimAutoWhitespace}),e.defaultEOL&&t.setEOL("LF"===e.defaultEOL?Gt.EndOfLineSequence.LF:Gt.EndOfLineSequence.CRLF))}addOrUpdateExtraLib(e,t){if(jt.typescript){this.disposables.push(jt.typescript.typescriptDefaults.addExtraLib(e,t));const n=jt.typescript.typescriptDefaults.getExtraLibs()[t];if(n)return n.version}return 0}appendText(e=""){const t=this.model,n=this.backend;if(t&&n){const i=t.getLineCount(),o=t.getLineMaxColumn(i),s=new $t(i,o,i,o);n.executeEdits("",[{range:s,text:e}],(()=>[new Qt(i+1,1,i+1,1)])),n.setScrollPosition({scrollTop:n.getScrollHeight()},Gt.ScrollType.Smooth)}}insertText(e=""){const t=this.model,n=this.backend;if(t&&n){const t={identifier:{major:1,minor:1},range:n.getSelection()||new $t(0,0,0,0),text:e,forceMoveMarkers:!0};n.executeEdits("",[t])}}addExecutionBlock(e,t){var n;const{createResultPresentation:i}=this.mergedProps,o=this.backend,s=this.model;if(o&&s&&i){const r=i(this,t);r.startLine=e,r.endLine=e;const a=null==(n=s.executionContexts)?void 0:n.addContext(r);return o.setPosition({lineNumber:e,column:1}),setTimeout((()=>{o.setScrollPosition({scrollTop:o.getScrollHeight()},Gt.ScrollType.Smooth)}),0),a}}prepareNextExecutionBlock(e=-1,t){let n;const i=this.model;if(i&&i.executionContexts)if(-1===e||e===i.executionContexts.count-1){this.addingNewContext=!0;try{this.appendText("\n"),n=this.addExecutionBlock(i.getLineCount(),t??i.executionContexts.language??"typescript")}finally{this.addingNewContext=!1}}else{n=i.executionContexts.contextAt(e+1);const t=this.backend;t&&n&&(t.setPosition({lineNumber:n.endLine,column:i.getLineMaxColumn(n.endLine)}),n.endLine+1<i.getLineCount()?t.revealLine(n.endLine+1,Gt.ScrollType.Smooth):t.setScrollPosition({scrollTop:t.getScrollHeight()},Gt.ScrollType.Smooth))}return n}get lastExecutionBlock(){var e;const t=this.model;return null==(e=null==t?void 0:t.executionContexts)?void 0:e.last}get currentBlockIndex(){const e=this.backend,t=this.model;return e&&t&&t.executionContexts?t.executionContexts.contextIndexFromPosition(e.getPosition()):-1}get backend(){return this.editor}get content(){const e=this.model;return e?e.getValue():""}executeText(e){this.appendText(e),this.executeCurrentContext({advance:!0})}prepareUse(){const{language:e,allowedLanguages:t=[]}=this.mergedProps,n=this.backend,i="editorTextFocus && !suggestWidgetVisible && !renameInputVisible && !inSnippetMode && !quickFixWidgetVisible",o="msg"===e;this.disposables.push(n.addAction({id:"executeCurrentAndAdvance",label:o?"Execute Block and Advance":"Execute Script",keybindings:[Yt.CtrlCmd|Jt.Enter],contextMenuGroupId:"2_execution",contextMenuOrder:1,precondition:i,run:()=>{this.executeCurrentContext({advance:!0})}})),this.disposables.push(n.addAction({id:"executeCurrent",label:o?"Execute Block":"Execute Script and Move Cursor",keybindings:[Yt.Shift|Jt.Enter],contextMenuGroupId:"2_execution",contextMenuOrder:2,precondition:i,run:()=>this.executeCurrentContext({})})),this.disposables.push(n.addAction({id:"executeCurrentStatement",label:"Execute Current Statement",keybindings:[Yt.Shift|Yt.CtrlCmd|Jt.Enter],contextMenuGroupId:"2_execution",contextMenuOrder:3,precondition:i,run:()=>this.executeCurrentContext({atCaret:!0})})),this.disposables.push(n.addAction({id:"executeToText",label:"Execute and Print as Text",keybindings:[Yt.Alt|Jt.Enter],contextMenuGroupId:"2_execution",contextMenuOrder:4,precondition:i,run:()=>this.executeCurrentContext({atCaret:!0,advance:!0,asText:!0})})),tn.embedded&&(this.disposables.push(n.addAction({id:"executeOnHost",label:"Execute on all visible DB Notebooks",keybindings:[Yt.Alt|Yt.CtrlCmd|Jt.Enter],contextMenuGroupId:"2_execution",contextMenuOrder:5,precondition:i,run:()=>{const e={atCaret:!1,advance:!0,asText:!1};this.executeCurrentContextOnHost(e),this.executeCurrentContext(e)}})),this.disposables.push(n.addAction({id:"paste",label:"Paste",keybindings:[Yt.CtrlCmd|Jt.KeyV],run:()=>{n.trigger("source","editor.action.clipboardPasteAction",null)}})),this.disposables.push(n.addAction({id:"copy",label:"Copy",keybindings:[Yt.CtrlCmd|Jt.KeyC],precondition:i,run:()=>{n.trigger("source","editor.action.clipboardCopyAction",null)}})),this.disposables.push(n.addAction({id:"cut",label:"Cut",keybindings:[Yt.CtrlCmd|Jt.KeyX],precondition:i,run:()=>{n.trigger("source","editor.action.clipboardCutAction",null)}}))),o&&(t.includes("sql")&&this.disposables.push(n.addAction({id:"switchToSQL",label:"Switch Language of Current Block to SQL",contextMenuGroupId:"3_language",contextMenuOrder:1,precondition:i,run:this.switchCurrentLanguage.bind(this,"sql",!1)})),t.includes("typescript")&&this.disposables.push(n.addAction({id:"switchToTypeScript",label:"Switch Language of Current Block to TypeScript",contextMenuGroupId:"3_language",contextMenuOrder:2,precondition:i,run:this.switchCurrentLanguage.bind(this,"typescript",!1)})),t.includes("javascript")&&this.disposables.push(n.addAction({id:"switchToJavaScript",label:"Switch Language of Current Block to JavaScript",contextMenuGroupId:"3_language",contextMenuOrder:3,precondition:i,run:this.switchCurrentLanguage.bind(this,"javascript",!1)})),tn.embedded&&this.disposables.push(n.addAction({id:"sendBlockUpdates",label:"Update SQL in Original Source File",keybindings:[Yt.CtrlCmd|Yt.Alt|Jt.KeyU],contextMenuGroupId:"4_linked",precondition:i,run:()=>{this.runContextCommand("sendBlockUpdates")}})),this.disposables.push(n.addAction({id:"deleteBackwards",label:"Delete Backwards",keybindings:[Jt.Backspace],run:()=>{this.handleBackspace()},precondition:i})),this.disposables.push(n.addAction({id:"deleteForward",label:"Delete Forward",keybindings:[Jt.Delete],run:()=>{this.handleDelete()},precondition:i})),this.disposables.push(n.addAction({id:"jumpToBlockStart",label:"Move Cursor to the Start of the Current Statement Block",keybindings:[Yt.WinCtrl|Yt.CtrlCmd|Jt.UpArrow],contextMenuGroupId:"navigation",precondition:i,run:()=>{this.jumpToBlockStart()}})),this.disposables.push(n.addAction({id:"jumpToBlockEnd",label:"Move Cursor to the End of the Current Statement Block",keybindings:[Yt.WinCtrl|Yt.CtrlCmd|Jt.DownArrow],contextMenuGroupId:"navigation",precondition:i,run:()=>{this.jumpToBlockEnd()}}))),this.disposables.push(n.addAction({id:"selectAll",label:"Select All",contextMenuGroupId:"9_cutcopypaste",keybindings:[Yt.CtrlCmd|Jt.KeyA],run:()=>{this.handleSelectAll()},precondition:i})),this.disposables.push(n.addAction({id:"saveAs",label:"Save As ...",contextMenuGroupId:"10_save",keybindings:[Yt.Shift|Yt.CtrlCmd|Jt.KeyS],run:()=>{nn.execute("editorSaveNotebook",void 0)},precondition:i})),this.disposables.push(n.addAction({id:"save",label:"Save",contextMenuGroupId:"10_save",keybindings:[Yt.CtrlCmd|Jt.KeyS],run:()=>{nn.execute("editorSaveNotebook","viaKeyboardShortcut")},precondition:i})),this.disposables.push(n.addAction({id:"acceptSuggestion",label:"Accept Selected Suggestion",keybindings:[Yt.CtrlCmd|Jt.Enter],precondition:"suggestWidgetVisible",run:()=>{n.trigger("source","acceptSelectedSuggestion",null)}})),this.disposables.push(n.addAction({id:"removeAllResults",label:"Remove All Results",contextMenuGroupId:"3_results",contextMenuOrder:1,precondition:i,run:()=>this.removeAllResults()})),this.disposables.push(n.addAction({id:"useNotebookAsTemplate",label:"Use Notebook as Template",contextMenuGroupId:"9_cutcopypaste",contextMenuOrder:5,precondition:i,run:()=>this.useNotebookAsTemplate()})),this.disposables.push(n.addAction({id:"appendFromTemplate",label:"Append Codeblock from Template",keybindings:[Yt.CtrlCmd|Yt.Alt|Jt.KeyP],contextMenuGroupId:"9_cutcopypaste",contextMenuOrder:6,precondition:i,run:()=>this.appendFromTemplate()})),this.disposables.push(n),this.disposables.push(n.onDidChangeCursorPosition((t=>{if("msg"===e){const e=this.model;e&&e.executionContexts&&(e.executionContexts.cursorPosition=t.position)}const{onCursorChange:n}=this.mergedProps;null==n||n(t.position)}))),this.disposables.push(n.onDidChangeModelContent(this.handleModelChange)),this.disposables.push(n.onDidPaste(this.handlePaste)),this.disposables.push(n.onDidScrollChange((e=>{var t;if(e.scrollTopChanged&&(this.scrolling=!0,this.scrollingTimer&&clearTimeout(this.scrollingTimer),this.scrollingTimer=setTimeout((()=>{this.scrolling=!1,this.scrollingTimer&&clearTimeout(this.scrollingTimer),this.scrollingTimer=null}),500)),e.scrollLeftChanged){const i=null==(t=n.getDomNode())?void 0:t.getElementsByClassName("view-zones");i&&i.length>0&&(i[0].style.left=`${e.scrollLeft}px`)}e.scrollWidthChanged&&setTimeout((()=>{this.resizeViewZones()}),0)}))),this.disposables.push(n.onDidChangeModelOptions((()=>{const{onOptionsChanged:e}=this.mergedProps;null==e||e()}))),nn.register("settingsChanged",this.handleSettingsChanged),nn.register("editorExecuteSelectedOrAll",this.executeSelectedOrAll),nn.register("editorExecuteCurrent",this.executeCurrent),nn.register("editorFind",this.executeFind),nn.register("editorFormat",this.executeFormat),nn.register("editorSelectStatement",this.handleSelectStatement)}get model(){var e;return null==(e=this.editor)?void 0:e.getModel()}executeCurrentContext(e){var t;const n=this.backend,i=this.model;if(n&&i){const o=this.currentBlockIndex;if(o>-1){const s=null==(t=i.executionContexts)?void 0:t.contextAt(o);if(s&&(nn.executeRemote("editorChanged",void 0),"unhandled"===this.handleInternalCommand(o))){const{onScriptExecution:t}=this.mergedProps;let i=e.atCaret?n.getPosition()??void 0:void 0;i&&(i=s.toLocal(i));const r={forceSecondaryEngine:e.forceSecondaryEngine,source:i,asText:e.asText};null==t||t(s,r).then((()=>{n.focus()})),e.advance&&this.prepareNextExecutionBlock(o)}}}}executeCurrentContextOnHost(e){var t;const n=this.backend,i=this.model;if(n&&i){const n=this.currentBlockIndex;if(n>-1){const o=null==(t=i.executionContexts)?void 0:t.contextAt(n);if(o){const t={...e,code:o.code,language:o.language};nn.executeRemote("editorExecuteOnHost",t)}}}}runContextCommand(e){var t;const n=this.model;if(n){const i=this.currentBlockIndex;if(i>-1){const o=null==(t=n.executionContexts)?void 0:t.contextAt(i);o&&nn.execute("editorRunCommand",{command:e,context:o})}}}updateExecutionContexts(e){const t=this.model;if(t&&t.executionContexts){const n=t.executionContexts,i=new Map;e.forEach((e=>{var t;const o=n.contextIndicesFromRange({startLine:(s=e.range).startLineNumber,startColumn:s.startColumn,endLine:s.endLineNumber,endColumn:s.endColumn});var s;if(o.length>0){const s=o.shift(),r=n.contextAt(s);i.has(s)||i.set(s,{changes:[],changedLineCount:0,lastEndLine:0});const a=i.get(s);a.changes.push(e),a.changedLineCount+=e.range.startLineNumber-e.range.endLineNumber;for(const t of e.text)"\n"===t&&++a.changedLineCount;if(o.length>0){const e=o[o.length-1],s=i.get(e);s?(a.changedLineCount+=s.changedLineCount,a.lastEndLine=s.lastEndLine,i.delete(e)):a.lastEndLine=(null==(t=n.contextAt(e))?void 0:t.endLine)??0}else a.lastEndLine=(null==r?void 0:r.endLine)??0;o.length>0&&(null==r||r.removeResult()),n.removeContexts(o)}})),i.forEach(((e,t)=>{var i;for(let s=t+1;s<n.count;++s)null==(i=n.contextAt(s))||i.movePosition(e.changedLineCount);const o=n.contextAt(t);o&&(this.addingNewContext||(o.endLine=e.lastEndLine+e.changedLineCount),o.applyEditorChanges(e.changes))}))}}scanForLanguageSwitches(e){const t=this.model;if(t&&t.executionContexts){const n=this.contextIndicesFromRange(e);if(n.length>0){const{createResultPresentation:e}=this.mergedProps,i=n[0],o=t.executionContexts.contextAt(i),s=this.determineTextBlocks(o),r=o.startLine,a=s.shift();if(!a)return;const l=[];for(let t=0;t<a.contentStartLine;++t)l.push(t+r);if(o.endLine=a.endLine+r,t.executionContexts.switchContextLanguage(i,a.language),e){let n=i+1;s.forEach((i=>{for(let e=i.startLine;e<i.contentStartLine;++e)l.push(e+r);const o=e(this,i.language),s=t.executionContexts.insertContext(n++,o);s.startLine=i.startLine+r,s.endLine=i.endLine+r,s.scheduleFullValidation()}))}this.backend.executeEdits("removeLanguageSwitches",l.map((e=>({range:{startLineNumber:e,startColumn:1,endLineNumber:e,endColumn:t.getLineLength(e)+1},text:null}))))}}}contextIndicesFromRange(e){const t=this.model;return t&&t.executionContexts?t.executionContexts.contextIndicesFromRange(e):[]}addInitialBlock(e){const{sqlDialect:t,allowedLanguages:n=[],startLanguage:i}=this.mergedProps;let o;"msg"===e.getLanguageId()?(o=i??"javascript",n.length>0&&(n.includes(o)||(o=n[0])),"sql"===o&&t&&(o=t)):o=e.getLanguageId(),this.addExecutionBlock(1,o)}handleInternalCommand(e){const{allowedLanguages:t=[]}=this.mergedProps,n=this.model;if(n&&n.executionContexts){const i=n.editorMode===Li.Terminal,o=n.executionContexts.contextAt(e);if(o.isInternal){let s=o.code.trim();if(i&&e<n.executionContexts.count-1)return"unhandled";if(s=s.slice(1),!i&&("?"===s||"h"===s||"help"===s)){const{onHelpCommand:t}=this.mergedProps,n=null==t?void 0:t(s,o.language);return n?(o.addResultData({type:"text",text:[{type:zi.Info,content:n,language:"markdown"}]},{resultId:"0"}),this.prepareNextExecutionBlock(e)):o.addResultData({type:"text",text:[{type:zi.Error,content:"No help available"}]},{resultId:"0"}),"handled"}const r=_CodeEditor.languageMap.get(s);if(r===o.language)return"ignore";if(!r||0===t.length||!t.includes(r))return"unhandled";switch(r){case"sql":{const{sqlDialect:t="sql"}=this.mergedProps;if(!i)return this.switchCurrentLanguage(t,!0),"handled";this.prepareNextExecutionBlock(e,t);break}case"javascript":if(!i)return this.switchCurrentLanguage("javascript",!0),"handled";this.prepareNextExecutionBlock(e,"javascript");break;case"typescript":if(!i)return this.switchCurrentLanguage("typescript",!0),"handled";this.prepareNextExecutionBlock(e,"typescript");break;case"python":this.prepareNextExecutionBlock(e,"python")}}}return"unhandled"}removeAllResults(){var e;const t=this.model;t&&(null==(e=t.executionContexts)||e.removeAllResults())}};pe(_o,"defaultProps",{detectLinks:!1,useTabStops:!1,componentMinWidth:200,lineNumbers:"on",allowSoftWrap:!1}),pe(_o,"languageMap",new Map([["typescript","typescript"],["ts","typescript"],["javascript","javascript"],["js","javascript"],["sql","sql"],["json","json"],["python","python"],["py","python"]])),pe(_o,"sqlUiStringMap",new Map([["sql","SQLite"],["mysql","MySQL"]])),pe(_o,"monacoConfigured",!1),_o.configureMonaco(),nn.register("themeChanged",(e=>(_o.updateTheme(e.safeName,e.type,e.values),Promise.resolve(!0))));let Go=_o;const Uo="/assets/toolbar-execute-4dc63f9a.svg";class DBEditorToolbar extends ComponentBase{constructor(e){super(e),pe(this,"stateChangeTimer"),pe(this,"editorInfoUpdated",(()=>(setTimeout((()=>{this.updateState()}),0),Promise.resolve(!1)))),pe(this,"toggleHidden",(()=>{const e=hi.get("editor.showHidden",!1);hi.set("editor.showHidden",!e)})),pe(this,"settingsChanged",(e=>{if(e)switch(e.key){case"editor.showHidden":case"editor.wordWrap":this.forceUpdate();break;default:return Promise.resolve(!1)}else this.forceUpdate();return Promise.resolve(!0)})),pe(this,"contextStateChanged",(e=>{const{currentContext:t}=this.state;return t&&e===t.id?(t.loadingState!==ro.Idle&&(this.setState({canExecute:!1,canStop:!0}),this.startStateChangeTimer()),Promise.resolve(!0)):Promise.resolve(!1)})),pe(this,"startStateChangeTimer",(()=>{this.stateChangeTimer&&clearTimeout(this.stateChangeTimer),this.stateChangeTimer=setTimeout((()=>{const{currentContext:e}=this.state;(null==e?void 0:e.loadingState)===ro.Idle?(this.setState({canExecute:!0,canStop:!1}),this.stateChangeTimer=null):this.startStateChangeTimer()}),500)})),pe(this,"toggleStopExecutionOnError",(e=>(hi.set("editor.stopOnErrors",!e),this.forceUpdate(),Promise.resolve(!0)))),pe(this,"toggleAutoCommit",(async()=>{const{backend:e}=this.props,{autoCommit:t}=this.state;try{await(null==e?void 0:e.setAutoCommit(!t)),await this.queryAutoCommit()}catch(n){nn.execute("showError",["Execution Error","Cannot Switch Auto Commit Mode.",String(n)])}return this.updateState(),!0})),pe(this,"transactionEnded",(async()=>(await this.queryAutoCommit(),this.updateState(),!0))),pe(this,"queryAutoCommit",(()=>new Promise(((e,t)=>{const{backend:n}=this.props;null==n||n.getAutoCommit().then((t=>{this.setState({autoCommit:t??!1},(()=>{e()}))})).catch((e=>{t(e)}))}))));const t=e.editors.find((t=>t.id===e.activeEditor));this.state={editorId:e.activeEditor,currentEditor:t,canExecute:!0,canStop:!1,canExecuteSubparts:!1,autoCommit:!0},this.addHandledProperties("toolbarItems","activeEditor","heatWaveEnabled","editors","language","backend")}componentDidUpdate(e){var t;const{activeEditor:n,editors:i}=this.props;if(n!==e.activeEditor){const e=i.find((e=>e.id===n)),o=null==(t=null==e?void 0:e.state)?void 0:t.model.executionContexts;if(o){const t=o.contextFromPosition(o.cursorPosition);t?this.setState({currentEditor:e,currentContext:t,canExecute:t.loadingState===ro.Idle,canStop:t.loadingState!==ro.Idle,canExecuteSubparts:t.isSQLLike}):this.setState({currentEditor:e})}}}componentDidMount(){nn.register("editorInfoUpdated",this.editorInfoUpdated),nn.register("editorContextStateChanged",this.contextStateChanged),nn.register("editorToggleStopExecutionOnError",this.toggleStopExecutionOnError),nn.register("editorToggleAutoCommit",this.toggleAutoCommit),nn.register("sqlTransactionEnded",this.transactionEnded),nn.register("settingsChanged",this.settingsChanged)}componentWillUnmount(){this.stateChangeTimer&&(clearTimeout(this.stateChangeTimer),this.stateChangeTimer=null),nn.unregister("editorInfoUpdated",this.editorInfoUpdated),nn.unregister("editorContextStateChanged",this.contextStateChanged),nn.unregister("editorToggleStopExecutionOnError",this.toggleStopExecutionOnError),nn.unregister("editorToggleAutoCommit",this.toggleAutoCommit),nn.unregister("sqlTransactionEnded",this.transactionEnded),nn.unregister("settingsChanged",this.settingsChanged)}render(){const{toolbarItems:e,language:t,heatWaveEnabled:n}=this.props,{autoCommit:i,canExecute:o,canStop:s,canExecuteSubparts:r}=this.state,a="msg"===t?"block":"script",l=r?"the selection or ":"",d=hi.get("editor.stopOnErrors",!0),c=d?"/assets/toolbar-stop_on_error-active-f0fd9524.svg":"/assets/toolbar-stop_on_error-inactive-707d2b01.svg",u=i?"/assets/toolbar-auto_commit-active-ca7db97b.svg":"/assets/toolbar-auto_commit-inactive-a4e65432.svg",h=hi.get("editor.showHidden",!1)?"/assets/toolbar-show_hidden-active-64aba43d.svg":"/assets/toolbar-show_hidden-inactive-398f0526.svg",p=hi.get("editor.wordWrap","off"),m="on"===p?"/assets/toolbar-word_wrap-active-ad8e3da9.svg":"/assets/toolbar-word_wrap-inactive-3f307b88.svg",g=e.execution.slice();"msg"===t?g.push(Ie(Button,{"data-tooltip":`Execute ${l}everything in the current block and create a new block`,imageOnly:!0,disabled:!o,onClick:()=>{nn.execute("editorExecuteSelectedOrAll",{advance:!0,forceSecondaryEngine:!1,asText:!1})},children:Ie(xi,{src:Uo,"data-tooltip":"inherit"})},"executeFullBlock")):g.push(Ie(Button,{"data-tooltip":"Execute full script",imageOnly:!0,disabled:!o,onClick:()=>{nn.execute("editorExecuteSelectedOrAll",{advance:!1,forceSecondaryEngine:!1,asText:!1})},children:Ie(xi,{src:Uo,"data-tooltip":"inherit"})},"executeFullBlock")),r&&(g.push(Ie(Button,{"data-tooltip":"Execute the statement at the caret position",imageOnly:!0,disabled:!o,onClick:()=>{nn.execute("editorExecuteCurrent",{advance:!1,forceSecondaryEngine:!1,asText:!1})},children:Ie(xi,{src:"/assets/toolbar-execute_caret-d1c566e6.svg","data-tooltip":"inherit"})},"executeFromCaret")),g.push(Ie(Button,{"data-tooltip":`Execute the ${a} and print the result as text`,imageOnly:!0,disabled:!o,onClick:()=>{nn.execute("editorExecuteSelectedOrAll",{advance:!0,forceSecondaryEngine:!1,asText:!0})},children:Ie(xi,{src:"/assets/toolbar-execute_print_text-29bde145.svg","data-tooltip":"inherit"})},"executeToText")),n&&g.push(Ie(Button,{"data-tooltip":`Execute ${l}full ${a} on HeatWave and create a new block`,imageOnly:!0,disabled:!o,onClick:()=>{nn.execute("editorExecuteSelectedOrAll",{advance:!0,forceSecondaryEngine:!0,asText:!1})},children:Ie(xi,{src:"/assets/toolbar-execute_heatwave-33bfe5cb.svg","data-tooltip":"inherit"})},"executeFullBlockHeatWave"),Ie(Button,{"data-tooltip":"Execute statement at current position on HeatWave",imageOnly:!0,disabled:!o,onClick:()=>{nn.execute("editorExecuteCurrent",{advance:!1,forceSecondaryEngine:!0,asText:!1})},children:Ie(xi,{src:"/assets/toolbar-execute_caret_heatwave-26f87c03.svg","data-tooltip":"inherit"})},"executeFromCaretHeatWave")),g.push(Ie(Button,{"data-tooltip":"Stop execution of the current statement/script",requestType:"editorStopExecution",imageOnly:!0,disabled:!s,children:Ie(xi,{src:"/assets/toolbar-stop_execution-ee97c536.svg","data-tooltip":"inherit"})},"editorStpExecutionButton"),Ie(Button,{"data-tooltip":"Stop execution of the current statement/script in case of errors",imageOnly:!0,onClick:()=>{nn.execute("editorToggleStopExecutionOnError",d)},children:Ie(xi,{src:c,"data-tooltip":"inherit"})},"editorStpExecutionOnErrorButton"))),r&&g.push(Ie(Divider,{vertical:!0,thickness:1},"divider2"),Ie(Button,{"data-tooltip":"Commit DB changes",requestType:"editorCommit",imageOnly:!0,disabled:i,children:Ie(xi,{src:Co,"data-tooltip":"inherit"})},"commitButton"),Ie(Button,{"data-tooltip":"Rollback DB changes",requestType:"editorRollback",imageOnly:!0,disabled:i,children:Ie(xi,{src:wo,"data-tooltip":"inherit"})},"rollbackButton"),Ie(Button,{"data-tooltip":"Auto commit DB changes",requestType:"editorToggleAutoCommit",imageOnly:!0,children:Ie(xi,{src:u,"data-tooltip":"inherit"})},"autoCommitButton"));const f=e.editor.slice();return f.push(Ie(Button,{"data-tooltip":"Format current block or script",requestType:"editorFormat",imageOnly:!0,children:Ie(xi,{src:"/assets/toolbar-format-a6316373.svg","data-tooltip":"inherit"})},"editorFormatButton"),Ie(Divider,{vertical:!0,thickness:1},"formatDivider"),Ie(Button,{"data-tooltip":"Find",requestType:"editorFind",imageOnly:!0,children:Ie(xi,{src:"/assets/toolbar-search-31d43d01.svg","data-tooltip":"inherit"})},"editorFindButton"),Ie(Button,{"data-tooltip":"Show hidden characters",imageOnly:!0,onClick:this.toggleHidden,children:Ie(xi,{src:h,"data-tooltip":"inherit"})},"editorShowHiddenButton"),Ie(Button,{"data-tooltip":"Soft wrap lines",imageOnly:!0,onClick:()=>{hi.set("editor.wordWrap","on"===p?"off":"on")},children:Ie(xi,{src:m,"data-tooltip":"inherit"})},"editorToggleSoftWrapButton")),Ie(Toolbar,{id:"dbEditorToolbar",dropShadow:!1,children:[e.navigation,e.navigation.length>0&&Ie(Divider,{vertical:!0,thickness:1}),g,g.length>0&&Ie(Divider,{vertical:!0,thickness:1}),f,Ie("div",{className:"expander"}),e.auxillary]})}updateState(){var e,t;const{currentEditor:n,currentContext:i}=this.state;if(null==(t=null==(e=null==n?void 0:n.state)?void 0:e.model)?void 0:t.executionContexts){const e=n.state.model.executionContexts.contextFromPosition(n.state.model.executionContexts.cursorPosition);e&&e!==i&&this.setState({currentContext:e,canExecute:e.loadingState===ro.Idle,canStop:e.loadingState!==ro.Idle,canExecuteSubparts:e.isSQLLike})}}}class EmbeddedPresentationInterface extends No{constructor(e,t,n){super(e,n),pe(this,"internalModel"),pe(this,"modelNeedsUpdate",!0),pe(this,"promptFirstDecorationID",""),pe(this,"promptOtherDecorationID",""),pe(this,"startLineNumber"),pe(this,"endLineNumber"),pe(this,"resizingZone",!1),pe(this,"lastMouseY",0),pe(this,"dividerRef",ke()),pe(this,"resizeObserver"),pe(this,"handleDividerPointerDown",(e=>{this.resizingZone=!0,this.lastMouseY=e.screenY,e.currentTarget.setPointerCapture(e.pointerId)})),pe(this,"handleDividerPointerUp",(e=>{e.currentTarget.releasePointerCapture(e.pointerId),this.zoneInfo&&(this.manuallyResized=!0,this.currentHeight=this.zoneInfo.zone.heightInPx),this.resizingZone=!1})),pe(this,"handleDividerPointerMove",(e=>{var t,n,i,o,s,r,a,l;if(this.resizingZone){const d=e.screenY-this.lastMouseY;if(!this.currentHeight){const e=No.maxAutoHeight[(null==(t=this.resultData)?void 0:t.type)??"text"];this.currentHeight=(null==(n=this.renderTarget)?void 0:n.getBoundingClientRect().height)??e}if(this.zoneInfo){null==(i=this.dividerRef.current)||i.classList.remove("minimum"),null==(o=this.dividerRef.current)||o.classList.remove("maximum");const e=(this.currentHeight??0)+d,t=this.minHeight??0;e>=t&&e<=No.maxHeight?(this.zoneInfo.zone.heightInPx=e,this.renderTarget.style.height=`${e}px`,null==(r=null==(s=this.backend)?void 0:s.changeViewZones)||r.call(s,(t=>{this.zoneInfo&&(this.zoneInfo.zone.heightInPx=e,t.layoutZone(this.zoneInfo.zoneId))}))):e<this.minHeight?null==(a=this.dividerRef.current)||a.classList.add("minimum"):null==(l=this.dividerRef.current)||l.classList.add("maximum")}}})),this.isScrolling=t}dispose(){var e,t;super.dispose();const n=null==(t=null==(e=this.backend)?void 0:e.getModel)?void 0:t.call(e);n&&(n.deltaDecorations([this.promptFirstDecorationID],[]),n.deltaDecorations([this.promptOtherDecorationID],[])),this.internalModel&&(this.internalModel.dispose(),this.internalModel=void 0,this.modelNeedsUpdate=!0)}get model(){const e=super.model;if(!this.internalModel||this.internalModel.isDisposed()){const t=Object.assign(Gt.createModel("",this.language),{symbols:e.symbols,editorMode:Li.Standard});"session"in e&&(t.session=e.session),t.getEndOfLineSequence()!==Gt.EndOfLineSequence.LF?t.setEOL(Gt.EndOfLineSequence.LF):t.setValue(""),this.internalModel=t}if(e&&this.modelNeedsUpdate){this.modelNeedsUpdate=!1;const t=e.getValueInRange({startLineNumber:this.startLine,startColumn:1,endLineNumber:this.endLine,endColumn:e.getLineMaxColumn(this.endLine)},Gt.EndOfLinePreference.LF);this.internalModel.setValue(t+("typescript"!==this.language&&"javascript"!==this.language||!t.includes("await ")?"":"\nexport{}\n"))}return this.internalModel}get startLine(){return this.startLineNumber}set startLine(e){this.modelNeedsUpdate=!0,this.startLineNumber!==e&&(this.startLineNumber=e)}get endLine(){return this.endLineNumber}set endLine(e){this.modelNeedsUpdate=!0,this.endLineNumber!==e&&(this.endLineNumber=e,this.updateMarginDecorations())}get codeOffset(){var e,t;const n=null==(t=null==(e=this.backend)?void 0:e.getModel)?void 0:t.call(e);return n?n.getOffsetAt({lineNumber:this.startLineNumber,column:1}):0}movePosition(e){var t,n;this.startLineNumber+=e,this.endLineNumber+=e,this.zoneInfo&&(this.zoneInfo.zone.afterLineNumber=this.endLineNumber,null==(n=null==(t=this.backend)?void 0:t.changeViewZones)||n.call(t,(e=>{this.zoneInfo&&e.layoutZone(this.zoneInfo.zoneId)})))}updateMarginDecorations(){var e,t,n,i,o,s,r;super.updateMarginDecorations();const a=this.endLine-this.startLine+1,l=null==(t=null==(e=this.backend)?void 0:e.getModel)?void 0:t.call(e);if(this.backend&&l&&l.getLineCount()>=this.endLine){let e=""===this.promptFirstDecorationID?[]:[this.promptFirstDecorationID],t=(null==(n=l.deltaDecorations)?void 0:n.call(l,e,[{range:new $t(this.startLine,1,this.startLine,2),options:{stickiness:Gt.TrackedRangeStickiness.GrowsOnlyWhenTypingBefore,isWholeLine:!1,linesDecorationsClassName:`editorPromptFirst.${this.language}.${this.loadingState}`}}]))??[];this.promptFirstDecorationID=t[0],a>=2?(e=""===this.promptOtherDecorationID?[]:[this.promptOtherDecorationID],t=(null==(i=l.deltaDecorations)?void 0:i.call(l,e,[{range:new $t(this.startLine+1,1,this.endLine,l.getLineLength(this.endLine)),options:{stickiness:Gt.TrackedRangeStickiness.GrowsOnlyWhenTypingBefore,isWholeLine:!1,linesDecorationsClassName:"editorPrompt ."+this.language}}]))??[],this.promptOtherDecorationID=t[0]):1===a&&(null==(o=l.deltaDecorations)||o.call(l,[this.promptOtherDecorationID],[]),this.promptOtherDecorationID="")}this.zoneInfo&&this.zoneInfo.zone.afterLineNumber!==this.endLineNumber&&(this.zoneInfo.zone.afterLineNumber=this.endLineNumber,null==(r=null==(s=this.backend)?void 0:s.changeViewZones)||r.call(s,(e=>{this.zoneInfo&&e.layoutZone(this.zoneInfo.zoneId)})))}get resultDivider(){return Ie(Divider,{innerRef:this.dividerRef,thickness:4,onPointerDown:this.handleDividerPointerDown,onPointerUp:this.handleDividerPointerUp,onPointerMove:this.handleDividerPointerMove})}removeRenderTarget(){var e,t;this.resizeObserver&&(this.resizeObserver.disconnect(),this.resizeObserver=void 0),null==(t=null==(e=this.backend)?void 0:e.changeViewZones)||t.call(e,(e=>{this.zoneInfo&&(e.removeZone(this.zoneInfo.zoneId),this.zoneInfo=void 0)})),super.removeRenderTarget()}updateRenderTarget(e){var t,n;super.updateRenderTarget(e),void 0!==e&&(null==(n=null==(t=this.backend)?void 0:t.changeViewZones)||n.call(t,(t=>{this.zoneInfo&&this.renderTarget&&(this.zoneInfo.zone.heightInPx=Math.max(e,this.minHeight),t.layoutZone(this.zoneInfo.zoneId))})))}defineRenderTarget(){var e,t,n;this.zoneInfo||this.prepareRenderTarget();const i=this.zoneInfo.zone.domNode.firstChild;return i.addEventListener("wheel",(e=>{this.isScrolling()||(e.currentTarget.scrollLeft+=2*Math.sign(e.deltaX),e.currentTarget.scrollTop+=2*Math.sign(e.deltaY),e.stopPropagation())}),{passive:!0}),""===(null==(e=this.zoneInfo)?void 0:e.zoneId)&&(null==(n=null==(t=this.backend)?void 0:t.changeViewZones)||n.call(t,(e=>{this.zoneInfo.zoneId=e.addZone(this.zoneInfo.zone)}))),this.currentHeight&&(i.style.height=`${this.currentHeight}px`),"undefined"!=typeof ResizeObserver&&(this.resizeObserver=new ResizeObserver((e=>{var t;const n=e.pop();if(n&&!this.currentHeight){const e=No.maxAutoHeight[(null==(t=this.resultData)?void 0:t.type)??"text"],o=Math.min(n.borderBoxSize[0].blockSize,e);i.clientHeight>e&&(i.style.height=`${o}px`),this.updateRenderTarget(o)}})),this.resizeObserver.observe(i)),i}showMaximizeButton(){return"statusBar"}prepareRenderTarget(){const e=document.createElement("div");e.className="zoneHost";const t=document.createElement("div");t.className="renderTarget",t.style.maxHeight=`${No.maxHeight}px`,e.appendChild(t);const n=document.createElement("div");n.className="zoneMargin",this.zoneInfo={zoneId:"",zone:{afterLineNumber:this.endLine,domNode:e,marginDomNode:n,suppressMouseDown:!1,heightInPx:this.currentHeight}}}}class Notebook extends ComponentBase{constructor(e){super(e),pe(this,"editorRef",ke()),pe(this,"handleCursorChange",(e=>{const{savedState:t}=this.props,n=t.editors.find((e=>e.id===t.activeEntry));if(n&&n.state){const t=n.state.model.executionContexts,i=null==t?void 0:t.contextFromPosition({lineNumber:e.lineNumber,column:1}),o={line:void 0!==i?e.lineNumber-(i.startLine-1):1,column:e.column};nn.execute("editorInfoUpdated",o)}})),pe(this,"explorerDoubleClick",(e=>{var t,n;return null==(t=this.editorRef.current)||t.insertText(e.caption),null==(n=this.editorRef.current)||n.focus(),Promise.resolve(!0)})),pe(this,"handleOptionsChanged",(()=>{if(this.editorRef.current){const e=this.editorRef.current.options,t={insertSpaces:e.insertSpaces,indentSize:e.indentSize??4,tabSize:e.tabSize??4};nn.execute("editorInfoUpdated",t)}})),pe(this,"sendStatusInfo",(()=>{var e;if(this.editorRef.current){const{dbType:t}=this.props,n=this.getActiveEditorState();if(n){const i=null==(e=n.viewState)?void 0:e.cursorState[0].position;let o=n.model.getLanguageId();"msg"===o&&(o=`mixed/${this.dialectFromDbType(t)}`);const s={insertSpaces:n.options.insertSpaces,indentSize:n.options.indentSize??4,tabSize:n.options.tabSize??4,line:(null==i?void 0:i.lineNumber)??1,column:(null==i?void 0:i.column)??1,language:o,eol:n.options.defaultEOL||"LF"};nn.execute("editorInfoUpdated",s)}}})),pe(this,"createPresentation",((e,t)=>new EmbeddedPresentationInterface(e.backend,e.isScrolling,t))),pe(this,"contextRelativeLineNumbers",(e=>{const t=this.getActiveEditorState();if(t){const n=t.model.executionContexts,i=null==n?void 0:n.contextFromPosition({lineNumber:e,column:1});return i?i.endLine-i.startLine>0?(e-i.startLine+1).toString():"":e.toString()}return""})),this.addHandledProperties("standaloneMode","toolbarItemsTemplate","savedState","backend","dbType","readOnly","showAbout","extraLibs","onScriptExecution","onHelpCommand")}componentDidMount(){nn.register("explorerDoubleClick",this.explorerDoubleClick),this.initialSetup(),this.sendStatusInfo()}componentDidUpdate(){this.initialSetup(),this.sendStatusInfo()}componentWillUnmount(){nn.execute("updateStatusbar",[{id:"editorLanguage",visible:!1},{id:"editorIndent",visible:!1},{id:"editorPosition",visible:!1},{id:"editorEOL",visible:!1}]),nn.unregister("explorerDoubleClick",this.explorerDoubleClick)}render(){const{standaloneMode:e,toolbarItemsTemplate:t,savedState:n,backend:i,dbType:o,readOnly:s,extraLibs:r,fontSize:a,onScriptExecution:l,onHelpCommand:d}=this.props,c=this.dialectFromDbType(o);let u=n.editors.find((e=>e.id===n.activeEntry));u||(u=n.editors[0]);const h={navigation:t.navigation.slice(),execution:t.execution,editor:t.editor,auxillary:t.auxillary.slice()};return e&&(h.navigation=[]),h.navigation.push(Ie(Button,{"data-tooltip":"Save this Notebook",requestType:"editorSaveNotebook",imageOnly:!0,style:{marginLeft:"4px"},children:Ie(xi,{src:"/assets/toolbar-save-editor-f10d45f1.svg","data-tooltip":"inherit"})},"editorSaveNotebookButton"),Ie(Button,{"data-tooltip":"Replace this Notebook With Content from a file",requestType:"editorLoadNotebook",imageOnly:!0,children:Ie(xi,{src:"/assets/toolbar-load-editor-8efa9a5a.svg","data-tooltip":"inherit"})},"editorLoadNotebookButton")),e&&(h.auxillary=[]),Ie(Container,{orientation:Di.TopDown,style:{flex:"1 1 auto"},mainAlignment:ki.Stretch,children:[Ie(DBEditorToolbar,{toolbarItems:h,language:"msg",activeEditor:n.activeEntry,heatWaveEnabled:n.heatWaveEnabled,editors:n.editors,backend:i}),Ie(Go,{ref:this.editorRef,savedState:u.state,extraLibs:r,language:"msg",allowedLanguages:["javascript","typescript","sql"],sqlDialect:c,startLanguage:hi.get("dbEditor.startLanguage","sql"),readonly:s,allowSoftWrap:!0,autoFocus:!0,className:"scriptingConsole",minimap:{enabled:!0},font:{fontFamily:"SourceCodePro+Powerline+Awesome+MySQL",fontSize:a??15,lineHeight:24},scrollbar:{useShadows:!0,verticalHasArrows:!1,horizontalHasArrows:!1,vertical:"auto",horizontal:"auto",verticalScrollbarSize:16,horizontalScrollbarSize:16},lineNumbers:this.contextRelativeLineNumbers,onScriptExecution:l,onHelpCommand:d,onCursorChange:this.handleCursorChange,onOptionsChanged:this.handleOptionsChanged,createResultPresentation:this.createPresentation})]})}addOrUpdateExtraLib(e,t){var n;return(null==(n=this.editorRef.current)?void 0:n.addOrUpdateExtraLib(e,t))??0}focus(){var e;null==(e=this.editorRef.current)||e.focus()}async executeQueries(e,t,n){if(this.editorRef.current){const{dbType:i}=this.props,o=this.editorRef.current.lastExecutionBlock;let s;if(s=!o||o.codeLength>0||!o.isSQLLike?this.editorRef.current.prepareNextExecutionBlock(-1,i===Ki.MySQL?"mysql":"sql"):o,s instanceof SQLExecutionContext){this.editorRef.current.appendText(t),s.linkId=n,await s.splittingDone();const{onScriptExecution:i}=this.props;null==i||i(s,e).then((e=>{e&&this.editorRef.current&&(this.editorRef.current.prepareNextExecutionBlock(-1,null==o?void 0:o.language),this.editorRef.current.focus())}))}}}insertScriptText(e,t){if(this.editorRef.current){const n=this.editorRef.current.lastExecutionBlock;(!n||n.codeLength>0||n.language!==e)&&this.editorRef.current.prepareNextExecutionBlock(-1,e),this.editorRef.current.appendText(t),this.editorRef.current.focus()}}getViewState(){var e;return this.editorRef.current?(null==(e=this.editorRef.current.backend)?void 0:e.saveViewState())??null:null}restoreNotebook(e){var t;if(this.editorRef.current){const n=this.getActiveEditorState();(null==n?void 0:n.model.executionContexts)&&n.model.executionContexts.restoreFromStates(this.editorRef.current,this.createPresentation,e.contexts.map((e=>e.state))),null==(t=this.editorRef.current.backend)||t.restoreViewState(e.viewState)}}initialSetup(){var e;const{showAbout:t}=this.props,n=this.getActiveEditorState();if(n){2===n.model.getVersionId()&&t&&(null==(e=this.editorRef.current)||e.executeText("\\about"))}}dialectFromDbType(e){let t="sql";switch(e){case Ki.MySQL:t="mysql";break;case Ki.Sqlite:t="sql"}return t}getActiveEditorState(){const{savedState:e}=this.props;let t=e.editors.find((t=>t.id===e.activeEntry));return t||(t=e.editors[0]),t.state}}var qo=(e=>(e.MySQL="mysql",e.MySQLx="mysqlx",e))(qo||{}),Vo=(e=>(e.Disabled="DISABLED",e.Preferred="PREFERRED",e.Required="REQUIRED",e.VerifyCA="VERIFY_CA",e.VerifyIdentity="VERIFY_IDENTITY",e))(Vo||{}),zo=(e=>(e.Ansi="ANSI",e.Traditional="TRADITIONAL",e.AllowInvalidDates="ALLOW_INVALID_DATES",e.AnsiQuotes="ANSI_QUOTES",e.ErrorForDivisionByZero="ERROR_FOR_DIVISION_BY_ZERO",e.HighNotPrecedence="HIGH_NOT_PRECEDENCE",e.IgnoreSpace="IGNORE_SPACE",e.NoAutoValueOnZero="NO_AUTO_VALUE_ON_ZERO",e.NoUnsignedSubtraction="NO_UNSIGNED_SUBTRACTION",e.NoZeroDate="NO_ZERO_DATE",e.NoZeroInDate="NO_ZERO_IN_DATE",e.OnlyFullGroupBy="ONLY_FULL_GROUP_BY",e.PadCharToFullLength="PAD_CHAR_TO_FULL_LENGTH",e.PipesAsConcat="PIPES_AS_CONCAT",e.RealAsFloat="REAL_AS_FLOAT",e.StrictAllTables="STRICT_ALL_TABLES",e.StrictTransTables="STRICT_TRANS_TABLES",e.TimeTruncateFractional="TIME_TRUNCATE_FRACTIONAL",e))(zo||{}),Ho=(e=>(e.Required="REQUIRED",e.Preferred="PREFERRED",e.Disabled="DISABLED",e))(Ho||{});const jo=e=>{const t=e.options;let n=String(t.scheme);return e.useSSH?n+="+ssh://":e.useMDS&&(n+="+mds://"),t.user&&(n+=`${t.user}@`),n+=t.host,t.port&&(n+=":"+String(t.port)),n},Wo="Lorem ipsum dolor sit amet, consectetur adipisci elit, sed eiusmod tempor incidunt ut labore et dolore magna aliqua.";class Image extends ComponentBase{constructor(e){super(e),this.addHandledProperties("disabled","src","alt","width","height","innerRef")}render(){const{disabled:e,src:t,alt:n,width:i,height:o,innerRef:s}=this.mergedProps,r=this.getEffectiveClassNames(["image",this.classFromProperty(e,"disabled")]);return Ie("img",{ref:s,className:r,src:t,alt:n,width:i,height:o,...this.unhandledProperties})}}pe(Image,"defaultProps",{disabled:!1});class AccordionSection extends ComponentBase{constructor(e){super(e),pe(this,"sectionRef",ke()),pe(this,"handleClick",(()=>{this.toggleExpandState()})),pe(this,"handleKeyPress",(e=>{e.key!==Sn&&e.key!==bn||this.toggleExpandState()})),pe(this,"toggleExpandState",(()=>{const{onToggleExpandState:e}=this.props;null==e||e(this.props)})),pe(this,"handleActionClick",((e,t)=>{e.stopPropagation();const{onAction:n}=this.props;null==n||n(t.id||"",this.props)})),pe(this,"handleActionKeyPress",((e,t)=>{if(e.key===Sn||e.key===bn){e.stopPropagation();const{onAction:n}=this.props;null==n||n(t.id||"",this.props)}})),pe(this,"handleActionMenuClick",((e,t)=>{const{onAction:n}=this.props;null==n||n(t.id||"",this.props)})),pe(this,"handleActionMenuOpen",(()=>{var e;(null==(e=this.sectionRef)?void 0:e.current)&&this.sectionRef.current.classList.add("nohide")})),pe(this,"handleActionMenuClose",(()=>{var e;(null==(e=this.sectionRef)?void 0:e.current)&&this.sectionRef.current.classList.remove("nohide")})),this.addHandledProperties("caption","dimmed","expanded","actions","onToggleExpandState","onAction")}render(){const{children:e,caption:t,actions:n,dimmed:i,expanded:o}=this.props,s=this.getEffectiveClassNames(["section",this.classFromProperty(o,"expanded")]),r=we(["content",this.classFromProperty(i,"dimmed")]);return Ie(Container,{orientation:Di.TopDown,className:s,innerRef:this.sectionRef,children:[Ie(Container,{orientation:Di.LeftToRight,className:"title",onClick:this.handleClick,onKeyPress:this.handleKeyPress,tabIndex:0,crossAlignment:ki.Center,children:[Ie(Label,{caption:t}),Ie(Container,{className:"actions",mainAlignment:ki.End,crossAlignment:ki.Center,children:null==n?void 0:n.map((e=>{var t;return null==e.choices?Ie(xi,{src:e.icon,id:e.id,"data-tooltip":e.tooltip,tabIndex:0,onKeyPress:this.handleActionKeyPress,onClick:this.handleActionClick},e.id):Ie(MenuItem,{id:e.id,icon:e.icon,subMenuShowOnClick:!0,onSubMenuOpen:this.handleActionMenuOpen,onSubMenuClose:this.handleActionMenuClose,children:null==(t=e.choices)?void 0:t.map((e=>Ie(MenuItem,{id:e.id,caption:e.caption,icon:e.icon,onClick:this.handleActionMenuClick},e.id)))},e.id)}))})]}),Ie(Container,{className:r,orientation:Di.TopDown,tabIndex:0,children:e})]})}}class SplitContainer extends ComponentBase{constructor(e){super(e),pe(this,"sashContainerRef",ke()),pe(this,"contentContainerRef",ke()),pe(this,"paneData",[]),pe(this,"currentSashIndex",-1),pe(this,"stretchCount",0),pe(this,"resizeObserver"),pe(this,"lastMouseX"),pe(this,"lastMouseY"),pe(this,"containerRef"),pe(this,"resizeTimer"),pe(this,"handleSplitterPointerDown",(e=>{if(this.sashContainerRef.current){this.sashContainerRef.current.childNodes.forEach(((t,n)=>{const i=t;t===e.target&&(this.currentSashIndex=n,this.lastMouseX=e.x,this.lastMouseY=e.y,i.setPointerCapture(e.pointerId))}))}document.addEventListener("pointerup",this.handleSplitterPointerUp)})),pe(this,"handleSplitterPointerUp",(e=>{if(this.sashContainerRef.current&&this.currentSashIndex>-1){this.sashContainerRef.current.childNodes[this.currentSashIndex].releasePointerCapture(e.pointerId),this.paneData.forEach((e=>{e.startSize=e.currentSize}));const{onPaneResized:t}=this.mergedProps;null==t||t(this.paneData)}this.currentSashIndex=-1,document.removeEventListener("pointerup",this.handleSplitterPointerUp)})),pe(this,"handleSplitterPointerMove",(e=>{if(this.currentSashIndex>-1&&this.sashContainerRef.current&&this.contentContainerRef.current){this.markResizing();const t=this.isHorizontal?e.x-this.lastMouseX:e.y-this.lastMouseY;this.runChangeDistribution(this.currentSashIndex,t)}})),pe(this,"distributeChangeBefore",((e,t,n)=>{const i=this.paneData[e];let o=t,s=0;const r=i.startSize+t;return r>=i.minSize&&r<=i.maxSize?n||(i.currentSize=r,r===i.minSize?i.className="minimum":r===i.maxSize?i.className="maximum":i.className="",e>0&&this.distributeChangeBefore(e-1,s,n)):(r<i.minSize?(o=i.minSize-i.startSize,s=t-o,n||(i.currentSize=i.minSize,i.className="minimum")):(o=i.maxSize-i.startSize,s=t-o,n||(i.currentSize=i.maxSize,i.className="maximum")),e>0&&(o+=this.distributeChangeBefore(e-1,s,n))),o})),pe(this,"distributeChangeAfter",((e,t,n)=>{const i=this.paneData[e];let o=t,s=0;const r=i.startSize-t;return r>=i.minSize&&r<=i.maxSize?n||(i.currentSize=r,r===i.minSize?i.className="minimum":r===i.maxSize?i.className="maximum":i.className="",e<this.paneData.length-1&&this.distributeChangeAfter(e+1,s,n)):(r<i.minSize?(o=i.startSize-i.minSize,s=t-o,n||(i.currentSize=i.minSize,i.className="minimum")):(o=i.startSize-i.maxSize,s=t-o,n||(i.currentSize=i.maxSize,i.className="maximum")),e<this.paneData.length-1&&(o+=this.distributeChangeAfter(e+1,s,n))),o})),pe(this,"handleTargetResize",(()=>{this.markResizing(),this.computeLayout()})),pe(this,"runChangeDistribution",((e,t)=>{const n=this.distributeChangeBefore(e,t,!0);if(e<this.paneData.length-1){const i=this.distributeChangeAfter(e+1,t,!0);t=Math.abs(n)<Math.abs(i)?n:i}else t=n;this.distributeChangeBefore(e,t,!1),e<this.paneData.length-1&&this.distributeChangeAfter(e+1,t,!1),this.applyLayout()})),pe(this,"computeLayout",(()=>{if(this.contentContainerRef.current){const e=this.isHorizontal?this.contentContainerRef.current.clientWidth:this.contentContainerRef.current.clientHeight,t=[];if(this.stretchCount>0){let n=0;this.paneData.forEach((e=>{if(-1===e.startSize){let t=0;t=null!=e.initialSize?Math.max(Math.min(e.initialSize,e.maxSize??1e100),e.minSize??0):Math.max(Math.min(200,e.maxSize??1e100),e.minSize??0),e.startSize=t,e.currentSize=t}else e.initialSize=void 0;n+=e.startSize,t.push(e.startSize)}));let i=e-n,o=this.stretchCount,s=0;for(;0!==i&&o>0;){let e=0;for(;e<this.paneData.length&&o>0;){const n=i/o,r=this.paneData[e];if(r.stretch){const a=t[e]+n;n<0?t[e]>r.minSize&&(a<r.minSize?(i-=r.minSize-t[e],t[e]=r.minSize):(t[e]=a,i-=n,++s)):t[e]<r.maxSize&&(a>r.maxSize?(i-=r.maxSize-t[e],t[e]=r.maxSize):(t[e]=a,i-=n,++s)),--o}++e}o=s,s=0}}else{let n=0,i=0;this.paneData.forEach((e=>{if(-1===e.startSize){let t=0;e.initialSize?(t=Math.max(Math.min(e.initialSize,e.maxSize??1e100),e.minSize??0),e.startSize=t,e.currentSize=t,e.initialSize=void 0):++i,n+=e.startSize>-1?e.startSize:0}t.push(e.startSize)}));let o=e-n,s=i,r=0;for(;0!==o&&s>0;){let e=0;for(;e<this.paneData.length;){const n=o/s,i=this.paneData[e];if(-1===t[e]){const a=t[e]=n;n<0?a<i.minSize?(o-=i.minSize-t[e],t[e]=i.minSize):(t[e]=a,o-=n,++r):a>i.maxSize?(o-=i.maxSize-t[e],t[e]=i.maxSize):(t[e]=a,o-=n,++r),--s}++e}s=r,r=0}}t.forEach(((e,t)=>{this.paneData[t].currentSize=e,this.paneData[t].startSize=e})),this.applyLayout()}})),pe(this,"applyLayout",(()=>{if(this.sashContainerRef.current&&this.contentContainerRef.current){const e=this.sashContainerRef.current.childNodes,t=this.contentContainerRef.current.childNodes;let n=0;t.forEach(((t,i)=>{let o;i<e.length&&(o=e[i]);const s=t,r=this.paneData[i];o&&(o.classList.remove("minimum"),o.classList.remove("maximum"),r.className.length>0&&o.classList.add(r.className)),this.isHorizontal?(s.style.width=En(r.currentSize),s.style.left=En(n),n+=r.currentSize,o&&(o.style.left=En(n-3))):(s.style.height=En(r.currentSize),s.style.top=En(n),n+=r.currentSize,o&&(o.style.top=En(n-3)))}))}})),pe(this,"updatePaneData",(()=>{const{panes:e}=this.mergedProps;this.paneData=[],this.stretchCount=0,e.forEach((e=>{this.paneData.push({id:e.id??"",minSize:e.minSize??0,maxSize:e.maxSize??1e101,startSize:e.collapsed?0:-1,currentSize:-1,initialSize:e.initialSize,snap:e.snap??!1,resizable:e.resizable??!1,stretch:e.stretch??!1,className:""}),e.stretch&&++this.stretchCount}))})),pe(this,"markResizing",(()=>{this.containerRef.current&&(this.containerRef.current.classList.add("resizing"),this.resizeTimer&&clearTimeout(this.resizeTimer),this.resizeTimer=setTimeout((()=>{this.containerRef.current&&this.containerRef.current.classList.remove("resizing")}),500))})),this.containerRef=e.innerRef??ke(),this.updatePaneData(),"undefined"!=typeof ResizeObserver&&(this.resizeObserver=new ResizeObserver(this.handleTargetResize)),this.addHandledProperties("panes","orientation","splitterSize","firstPanelDetails","secondPanelDetails","collapse","onCollapseChange","innerRef","onPaneResized")}componentDidUpdate(){this.updatePaneData(),this.computeLayout()}componentDidMount(){var e;if(this.markResizing(),document.addEventListener("pointerup",this.handleSplitterPointerUp),this.sashContainerRef.current&&this.contentContainerRef.current){this.computeLayout();this.sashContainerRef.current.childNodes.forEach((e=>{const t=e;t.addEventListener("pointerdown",this.handleSplitterPointerDown),t.addEventListener("pointerup",this.handleSplitterPointerUp),t.addEventListener("pointermove",this.handleSplitterPointerMove)})),this.lastMouseX=this.contentContainerRef.current.clientWidth,this.lastMouseY=this.contentContainerRef.current.clientHeight,null==(e=this.resizeObserver)||e.observe(this.contentContainerRef.current)}}componentWillUnmount(){var e;if(this.resizeTimer&&clearTimeout(this.resizeTimer),this.sashContainerRef.current&&this.contentContainerRef.current){this.sashContainerRef.current.childNodes.forEach((e=>{const t=e;t.removeEventListener("pointerdown",this.handleSplitterPointerDown),t.removeEventListener("pointerup",this.handleSplitterPointerUp),t.removeEventListener("pointermove",this.handleSplitterPointerMove)}))}document.removeEventListener("pointerup",this.handleSplitterPointerUp),this.contentContainerRef.current&&(null==(e=this.resizeObserver)||e.unobserve(this.contentContainerRef.current))}render(){const{panes:e,orientation:t,splitterSize:n}=this.mergedProps,i=this.getEffectiveClassNames(["splitContainer"]),o=[],s=e.map(((i,s)=>{const r=i.id??`pane${s}`;return s<e.length-1&&o.push(Ie(Divider,{id:r+"Sash",className:"sash"+(i.resizable?"":" disabled"),vertical:this.isHorizontal,thickness:n},r+"Sash")),Ie(Container,{id:r+"Host",className:"splitHost"+(i.stretch?" stretch":""),orientation:t,mainAlignment:ki.Stretch,children:i.content},r+"Host")}));return Ie("div",{ref:this.containerRef,className:i,...this.unhandledProperties,children:[Ie("div",{ref:this.sashContainerRef,className:"sashContainer",children:o}),Ie("div",{ref:this.contentContainerRef,className:"splitContentContainer",children:s})]})}getPaneSize(e){const t=this.paneData.find((t=>t.id===e));return null==t?void 0:t.currentSize}get isHorizontal(){const{orientation:e}=this.mergedProps;return e===Di.LeftToRight||e===Di.RightToLeft}}pe(SplitContainer,"defaultProps",{orientation:Di.LeftToRight,splitterSize:4});class Accordion extends ComponentBase{constructor(e){super(e),pe(this,"containerRef",ke()),pe(this,"toggleSectionExpandState",(e=>{const{onSectionExpand:t}=this.mergedProps;null==t||t(this.mergedProps,e.id||"",!e.expanded)})),pe(this,"handleSectionAction",((e,t)=>{const{onSectionAction:n}=this.mergedProps;null==n||n(this.mergedProps,t.id||"",e)})),pe(this,"handleSectionResize",(e=>{const{onSectionResize:t}=this.mergedProps;null==t||t(this.mergedProps,e)})),this.addHandledProperties("caption","footer","singleExpand","sections","onSectionExpand","onSectionAction","onSectionResize")}render(){const{caption:e,footer:t,sections:n}=this.mergedProps,i=this.getEffectiveClassNames(["accordion"]),o=n.map((e=>{const t={id:e.id,initialSize:e.initialSize,minSize:e.minSize??28,maxSize:e.maxSize,snap:!0,stretch:e.stretch??!1,resizable:e.resizable??!1,expanded:e.expanded??!0,content:Ie(AccordionSection,{id:e.id,caption:e.caption,dimmed:e.dimmed??!1,expanded:e.expanded??!0,actions:e.actions,onToggleExpandState:this.toggleSectionExpandState,onAction:this.handleSectionAction,children:e.content})};return t.expanded||(t.minSize=28,t.maxSize=28),t}));return Ie(Container,{className:i,orientation:Di.TopDown,mainAlignment:ki.Start,...this.unhandledProperties,children:[e&&Ie(Label,{className:"title",children:e}),Ie(SplitContainer,{ref:this.containerRef,className:"accordionContent",orientation:Di.TopDown,panes:o,onPaneResized:this.handleSectionResize}),t&&Ie(Label,{className:"footer",children:t})]})}}pe(Accordion,"Item",class AccordionItem extends ComponentBase{constructor(e){super(e),pe(this,"handleCloseKeyPress",(e=>{const t=e.key;if(t===Sn||t===bn){e.stopPropagation();const{onClose:t}=this.props;null==t||t(e,this.props.id)}})),pe(this,"handleCloseClick",(e=>{e.stopPropagation();const{onClose:t}=this.props;null==t||t(e,this.props.id)})),this.state={active:!1},this.addHandledProperties("caption","icon","active","closable","onClose")}render(){const{caption:e,picture:t,active:n,closable:i}=this.props,o=this.getEffectiveClassNames(["accordionItem",this.classFromProperty(n,"selected"),this.classFromProperty(i,"closable")]);let s;return t&&(s="string"==typeof t?Ie(Image,{src:t,width:"20px",height:"20px"}):"number"==typeof t?Ie(xi,{src:t,width:"20px",height:"20px"}):t),Ie(Container,{className:o,tabIndex:0,crossAlignment:ki.Center,...this.unhandledProperties,children:[i&&Ie("span",{className:"codicon codicon-close",role:"button",tabIndex:0,"data-tooltip":"Close Editor",onKeyPress:this.handleCloseKeyPress,onClick:this.handleCloseClick}),s,Ie(Label,{children:e})]})}});class Breadcrumb extends ComponentBase{constructor(e){super(e),pe(this,"handleButtonClick",((e,t)=>{const n=e.currentTarget.parentElement;if(n){const e=[],i=Array.from(n.getElementsByTagName("button"));for(const n of i)if(e.push(n.id),n.id===t.id)break;const{onSelect:o}=this.mergedProps;null==o||o(e)}})),this.addHandledProperties("path","separator","selected","onSelect")}render(){const{id:e,children:t,path:n,separator:i,selected:o}=this.mergedProps,s=this.getEffectiveClassNames(["breadcrumb","verticalCenterContent"]),r=e||"breadcrumb";let a;if(null!=t)a=t;else{const e="string"==typeof i?Ie(Label,{className:"separator",caption:i}):i;a=null==n?void 0:n.map(((t,n)=>{const i=`${r}${n}`;return Ie(Re,{children:[Ie(Button,{id:t,className:"breadcrumbItem"+(n===o?" selected":""),onClick:this.handleButtonClick,children:t}),e]},i)})),a&&a.push(Ie(Button,{className:"picker",caption:"..."},"picker"))}return Ie(Container,{orientation:Di.LeftToRight,className:s,...this.unhandledProperties,children:a})}}pe(Breadcrumb,"defaultProps",{path:[""],separator:"❯"});var $o=(e=>(e[e.Open=0]="Open",e[e.CreateNew=1]="CreateNew",e))($o||{});class BrowserTile extends ComponentBase{constructor(e){super(e),pe(this,"actionsRef",ke()),pe(this,"handleDragEvent",((e,t)=>{if(!t.dataTransfer)return!1;const n=t.currentTarget;switch(e){case ni.Start:return t.dataTransfer.effectAllowed="move",t.dataTransfer.setData("browser/tile",n.id),!0;case ni.Enter:return t.stopPropagation(),t.preventDefault(),n.contains(t.relatedTarget)&&n.classList.add("dropTarget"),!0;case ni.Leave:return t.stopPropagation(),t.preventDefault(),n.contains(t.relatedTarget)||n.classList.remove("dropTarget"),!0;case ni.Drop:{n.classList.remove("dropTarget");const e=An(t.dataTransfer.getData("browser/tile"));if(!isNaN(e)){const{onTileReorder:t}=this.mergedProps;null==t||t(e,this.mergedProps)}return!0}default:return!1}})),pe(this,"handleClick",(e=>{const{onAction:t,type:n}=this.mergedProps,i=e,o=i.currentTarget;o.disabled=!0,setTimeout((()=>{o.disabled=!1}),200),e.stopPropagation(),0===n?null==t||t("open",this.mergedProps,{newTab:i.metaKey||i.altKey}):null==t||t("new",this.mergedProps,{})})),pe(this,"handleKeydown",(e=>{var t;if(e.key===Dn){e.stopPropagation();const{type:n,onAction:i}=this.mergedProps;0===n&&(null==(t=this.actionsRef.current)||t.focus(),null==i||i("menu",this.mergedProps,{target:this.actionsRef.current}))}})),this.addHandledProperties("innerRef","tileId","caption","description","type","icon","onAction","onTileReorder"),this.connectDragEvents()}render(){const{innerRef:e,tileId:t,type:n,icon:i,caption:o,description:s}=this.mergedProps,r=this.getEffectiveClassNames(["browserTile",this.classFromProperty(1===n,"secondary")]);return Ie(Button,{innerRef:e,id:t.toString(),className:r,onClick:this.handleClick,onKeyPress:this.handleKeydown,...this.unhandledProperties,children:[Ie(xi,{src:i}),Ie(Container,{orientation:Di.TopDown,className:"textHost",children:[Ie(Label,{className:"tileCaption",children:o}),Ie(Label,{className:"tileDescription",children:s})]}),0===n&&Ie(Re,{children:[Ie(Container,{id:"actionsBackground"}),Ie(Container,{id:"actions",orientation:Di.TopDown,mainAlignment:ki.Center,crossAlignment:ki.Center,innerRef:this.actionsRef,children:this.renderTileActionUI()})]})]})}}const Ko="/assets/newNotebook-614a32ff.svg";class ConnectionTile extends BrowserTile{constructor(e){super(e),pe(this,"renderTileActionUI",(()=>Ie(Re,{children:[Ie(Button,{id:"tileMoreActionsAction","data-tooltip":"More Actions",imageOnly:!0,onClick:this.handleActionClick,children:Ie(xi,{src:ko,"data-tooltip":"inherit"})}),Ie(Button,{id:"tileNewNotebookAction","data-tooltip":"Create New Notebook",imageOnly:!0,onClick:this.handleActionClick,children:Ie(xi,{src:Ko,"data-tooltip":"inherit"})}),Ie(Button,{id:"tileNewScriptAction","data-tooltip":"Create New Script",imageOnly:!0,onClick:this.handleActionClick,children:Ie(xi,{src:"/assets/newScript-7dfb3066.svg","data-tooltip":"inherit"})})]}))),pe(this,"handleActionClick",(e=>{const{onAction:t}=this.mergedProps;e.stopPropagation();switch(e.currentTarget.id){case"tileMoreActionsAction":null==t||t("menu",this.mergedProps,{target:e.currentTarget});break;case"tileNewNotebookAction":null==t||t("open",this.mergedProps,{newTab:e.metaKey||e.altKey,editor:"notebook"});break;case"tileNewScriptAction":null==t||t("open",this.mergedProps,{newTab:e.metaKey||e.altKey,editor:"script"})}})),this.addHandledProperties("details")}render(){return super.render()}}pe(ConnectionTile,"defaultProps",{className:"connectionTile"});class Input extends ComponentBase{constructor(e){super(e),pe(this,"inputRef"),pe(this,"handleInput",(e=>{const{onChange:t}=this.mergedProps,n=e.target;null==t||t(e,{...this.mergedProps,value:n.value})})),pe(this,"handleKeyDown",(e=>{const{multiLine:t,onConfirm:n,onCancel:i}=this.mergedProps;switch(e.key){case bn:if(!t){const t=e.target;null==n||n(e,{...this.mergedProps,value:t.value})}break;case Dn:e.metaKey&&this.inputRef.current instanceof HTMLInputElement&&this.inputRef.current.select();break;case In:null==i||i(e,this.mergedProps);break;case wn:case yn:case kn:case Cn:t&&e.stopPropagation()}})),this.inputRef=e.innerRef??ke(),this.addHandledProperties("password","autoFocus","value","textAlignment","multiLine","multiLineCount","innerRef")}componentDidMount(){const{autoFocus:e}=this.mergedProps;if(this.inputRef.current&&e){const e=this.inputRef.current;e.focus(),e instanceof HTMLInputElement&&e.setSelectionRange(0,e.value.length)}}render(){const{password:e,textAlignment:t,value:n,multiLine:i,multiLineCount:o,spellCheck:s}=this.mergedProps,r=this.getEffectiveClassNames(["input"]);return i?Ie("textarea",{ref:this.inputRef,onInput:this.handleInput,onKeyDown:this.handleKeyDown,className:r,type:e?"password":"text",value:n,spellCheck:s,rows:o,style:{textAlign:t},...this.unhandledProperties}):Ie("input",{ref:this.inputRef,onInput:this.handleInput,onKeyDown:this.handleKeyDown,className:r,type:e?"password":"text",value:n,spellCheck:s,style:{textAlign:t},...this.unhandledProperties})}}pe(Input,"defaultProps",{spellCheck:!0});class MenuBar extends ComponentBase{constructor(e){super(e),pe(this,"itemRefs",[]),pe(this,"handleSubMenuClose",(()=>{this.setState({activeMenuId:""})})),pe(this,"handleSubMenuOpen",(e=>{this.setState({activeMenuId:e.id||"",trackItems:!0})})),pe(this,"handleItemMouseEnter",((e,t)=>{this.itemRefs.forEach((e=>{var n,i;(null==(n=e.current)?void 0:n.props)!==t&&(null==(i=e.current)||i.closeSubMenu())}))})),pe(this,"handleItemClick",((e,t)=>{const{onItemClick:n}=this.mergedProps;null==n||n(e,t)})),this.state={activeMenuId:"",trackItems:!1},this.connectEvents("onMouseEnter","onMouseLeave")}render(){const{children:e}=this.mergedProps,{activeMenuId:t,trackItems:n}=this.state,i=this.getEffectiveClassNames(["menubar"]),o=yi(e).map((e=>{const i=ke();e.type===MenuItem&&this.itemRefs.push(i);const{id:o}=e.props;let s="";return""===t?s="nohover":t===o&&(s="active"),Te(e,{ref:i,subMenuPlacement:Zn.BottomLeft,subMenuShowOnClick:!n,className:s,onMouseEnter:this.handleItemMouseEnter,onSubMenuClose:this.handleSubMenuClose,onSubMenuOpen:this.handleSubMenuOpen,onClick:this.handleItemClick})}));return Ie(Container,{className:i,crossAlignment:ki.Center,...this.unhandledProperties,children:o})}handleMouseEvent(e){if(e===ei.Leave)""===this.state.activeMenuId&&this.setState({trackItems:!1});return!0}}pe(MenuBar,"defaultProps",{orientation:Di.LeftToRight});class ProgressIndicator extends ComponentBase{render(){const{id:e,backgroundOpacity:t=1,linear:n=!1,position:i,indicatorWidth:o,indicatorHeight:s,style:r,stroke:a}=this.mergedProps,l=this.getEffectiveClassNames(["progressIndicatorHost"]),d=a??5;let c,u=o??400,h=s??10;if(n){c=Ie("div",{className:"linearBackground",children:Ie("div",{className:null==i?"linear animated":"linear"})})}else{u=o??80,h=s??80;const e=(u-2*d)/2,t=(u-d)/2;c=Ie("svg",{className:null==i?"circleBackground animated":"circleBackground",children:[Ie("circle",{cx:t,cy:t,r:e}),Ie("circle",{cx:t,cy:t,r:e})]})}const p={opacity:t,"--position":i??0,"--width":u,"--height":h,"--strokeWidth":d,...r};return Ie(Container,{id:e,className:l,orientation:Di.TopDown,mainAlignment:ki.Center,crossAlignment:ki.Center,style:p,children:c})}}class Radiobutton extends ComponentBase{constructor(e){super(e),pe(this,"inputRef",ke()),pe(this,"handleKeyPress",(e=>{const{disabled:t}=this.mergedProps;t?e.preventDefault():e.key!==Sn&&e.key!==bn||(this.setChecked(),e.preventDefault())})),this.addHandledProperties("checkState","caption","name","disabled"),this.connectEvents("onClick")}componentDidMount(){if(this.inputRef.current){const{checkState:e}=this.mergedProps;this.inputRef.current.checked=e===Do.Checked}}render(){const{children:e,id:t,caption:n,name:i,disabled:o}=this.mergedProps,s=this.getEffectiveClassNames(["radioButton",this.classFromProperty(o,"disabled")]),r=e??n;return Ie("label",{htmlFor:t,className:s,tabIndex:0,onKeyPress:this.handleKeyPress,...this.unhandledProperties,children:[Ie("input",{type:"radio",ref:this.inputRef,readOnly:!0,tabIndex:-1,name:i}),Ie("span",{className:"checkMark"}),r]})}handleMouseEvent(e,t){const{disabled:n}=this.mergedProps;return n?(t.preventDefault(),!1):(e===ei.Click&&this.setChecked(),!0)}setChecked(){const{name:e,onChange:t}=this.mergedProps;if(e){document.getElementsByName(e).forEach((e=>{e instanceof HTMLInputElement&&(e.checked=!1)}))}this.inputRef.current&&(this.inputRef.current.checked=!0),null==t||t(Do.Checked,this.mergedProps)}}pe(Radiobutton,"defaultProps",{checkState:null==Do?void 0:Do.Unchecked,disabled:!1,caption:"Radiobutton"});class Search extends ComponentBase{constructor(e){super(e),pe(this,"inputRef",ke()),pe(this,"handleChange",(e=>{const{values:t}=this.mergedProps,n=e.target.value;this.sendChange(e,{value:n,matchCase:null==t?void 0:t.matchCase,matchWholeWord:null==t?void 0:t.matchWholeWord,useRegExp:null==t?void 0:t.useRegExp})})),pe(this,"handleConfirm",(e=>{this.sendChange(e)})),pe(this,"handleButtonClick",(e=>{var t;const{values:n}=this.mergedProps;if(e.currentTarget&&"id"in e.currentTarget)switch(null==(t=e.currentTarget)?void 0:t.id){case"toggleCase":this.sendChange(e,{matchCase:!(null==n?void 0:n.matchCase)});break;case"toggleWhole":this.sendChange(e,{matchWholeWord:!(null==n?void 0:n.matchWholeWord)});break;case"toggleRegExp":this.sendChange(e,{useRegExp:!(null==n?void 0:n.useRegExp)});break;case"clearAll":this.sendChange(e,{value:""})}})),pe(this,"sendChange",((e,t)=>{const{values:n,onChange:i,onConfirm:o}=this.mergedProps;t?null==i||i(e,this.mergedProps,{value:t.value??(null==n?void 0:n.value),matchCase:void 0===t.matchCase?null==n?void 0:n.matchCase:t.matchCase,matchWholeWord:void 0===t.matchWholeWord?null==n?void 0:n.matchWholeWord:t.matchWholeWord,useRegExp:void 0===t.useRegExp?null==n?void 0:n.useRegExp:t.useRegExp}):null==o||o(e,this.mergedProps,n??{})})),this.addHandledProperties("placeholder","autoFocus","result","buttons","values","onChange","onConfirm")}componentDidUpdate(){const{autoFocus:e}=this.mergedProps;e&&this.inputRef.current&&this.inputRef.current.focus()}render(){const{placeholder:e="Search",values:t,autoFocus:n,result:i,buttons:o}=this.mergedProps,s=this.getEffectiveClassNames(["search"]);return Ie(Container,{className:"searchContainer",orientation:Di.LeftToRight,...this.unhandledProperties,children:[Ie(Input,{id:"search",className:s,placeholder:e,value:null==t?void 0:t.value,autoFocus:n,onChange:this.handleChange,onConfirm:this.handleConfirm}),i&&Ie(Label,{id:"searchResult","data-tooltip":"Search Result",children:i}),(null==o?void 0:o.matchChase)&&Ie(Button,{id:"toggleCase",className:(null==t?void 0:t.matchCase)?"active":void 0,"search-type":"option","data-tooltip":"Match Case",onClick:this.handleButtonClick,children:Ie(xi,{src:Ti.CaseSensitive})}),(null==o?void 0:o.matchWholeWord)&&Ie(Button,{id:"toggleWhole",className:(null==t?void 0:t.matchWholeWord)?"active":void 0,"search-type":"option","data-tooltip":"Match Whole Word",imageOnly:!0,onClick:this.handleButtonClick,children:Ie(xi,{src:Ti.WholeWord})}),(null==o?void 0:o.useRegExp)&&Ie(Button,{id:"toggleRegExp",className:(null==t?void 0:t.useRegExp)?"active":void 0,"search-type":"option","data-tooltip":"Use Regular Expression",onClick:this.handleButtonClick,children:Ie(xi,{src:Ti.Regex})}),(null==o?void 0:o.clearAll)&&Ie(Button,{id:"clearAll",disabled:0===((null==t?void 0:t.value)??"").length,"data-tooltip":"Clear Search Input",onClick:this.handleButtonClick,children:Ie(xi,{src:Ti.ClearAll})})]})}}class ThemePreview extends ComponentBase{constructor(e){super(e),fe(this,W,void 0);const t=/(<< ([a-z]+) >>)+/g;let n=t.exec(gi),i=t.lastIndex,o=n?n[2]:"";const s={};let r=gi;for(;;){if(n=t.exec(r),!n){s[o]=r.substring(i,r.length-1);break}s[o]=r.substring(i,t.lastIndex-n[1].length),i=t.lastIndex+1,o=n[2]}this.state={editorLanguage:"javascript",codeExamples:s};let a='\nprint("typescript");\n\\js\n';a+='\nprint("javascript");\n\\sql\n',a+='\nselect "(my)sql" from dual;\n\\py\n',a+='\nprint("python");\n';const l=Object.assign(Gt.createModel(a,"javascript"),{executionContexts:new ExecutionContexts(void 0,80024,"",""),editorMode:Li.Standard});l.getEndOfLineSequence()!==Gt.EndOfLineSequence.LF?l.setEOL(Gt.EndOfLineSequence.LF):l.setValue(a),l.setValue(a);const d={model:l,contextStates:fi.map((e=>({start:e.start,end:e.end,language:e.language,defaultHeight:e.defaultHeight??0,statements:[]}))),viewState:null,options:{tabSize:4,indentSize:4,insertSpaces:!0,defaultEOL:"LF",trimAutoWhitespace:!0}};be(this,W,{editors:[{type:jn.Notebook,id:"1",caption:"Test",currentVersion:1,state:d}],activeEntry:"1",heatWaveEnabled:!1,connectionId:-1})}render(){const{editorLanguage:e,codeExamples:t}=this.state,n=t[e];return Ie(Container,{id:"previewRoot",orientation:Di.TopDown,children:[Ie(Label,{id:"previewTitle","data-tooltip":"",children:"THEME PREVIEW"}),Ie("p",{children:"Base Colors"}),Ie(Grid,{columns:2,columnGap:"20px",rowGap:"20px",children:[Ie(GridCell,{children:Ie(Label,{className:"manualFocus",style:{padding:"15px",flex:"0 0 300px"},children:"Text with manual focus border"})}),Ie(GridCell,{children:Ie(Input,{placeholder:"Select to view real focus border",style:{flex:"0 0 300px"}})}),Ie(GridCell,{children:[Ie("div",{style:{width:"60px"},children:Ie(Label,{className:"rotated",children:"Description"})}),Ie(Label,{className:"description",children:Wo})]}),Ie(GridCell,{children:[Ie("div",{style:{width:"30px"},children:Ie(Label,{className:"rotated",children:"Icon"})}),Ie(xi,{src:Xt,width:64,height:64,style:{marginLeft:"20px"}})]})]}),Ie("p",{children:"Window / Dialog"}),Ie(Container,{id:"dialogHost",children:Ie(DialogContent,{caption:Ie(Re,{children:[Ie(xi,{src:Xt}),Ie(Label,{children:"Window Title"})]}),header:Ie(Re,{children:[Ie(Label,{children:"A Standalone Modal Window"}),Ie(Label,{children:"The window's sub title goes here and also allows for longer descriptions."})]}),content:Ie(Label,{children:"All the main content of the window/dialog goes here."}),actions:{begin:[Ie(Checkbox,{caption:"Show Advanced Entries",id:"test",checkState:Do.Unchecked},"text")],end:[Ie(Button,{caption:"Cancel",id:"cancel"},"cancel"),Ie(Button,{caption:"OK",id:"ok"},"ok")]}})}),Ie("p",{children:"Plain Text / Label"}),Ie(Grid,{columns:2,columnGap:"20px",rowGap:"30px",children:[Ie(GridCell,{children:[Ie("div",{style:{width:"60px"},children:Ie(Label,{className:"rotated",children:"Block Quote"})}),Ie(Label,{quoted:!0,size:Xn.Big,children:"Mark this text quote as something important."})]}),Ie(GridCell,{children:[Ie("div",{style:{width:"60px"},children:Ie(Label,{className:"rotated",children:"Inline Code"})}),Ie(Label,{code:!0,style:{flex:"1"},children:"var a = 1 + 2;"})]}),Ie(GridCell,{children:[Ie("div",{style:{width:"60px"},children:Ie(Label,{className:"rotated",children:"Link"})}),Ie(Label,{children:["Text with a ",Ie("a",{href:"https://www.mysql.com",children:"link"})]})]}),Ie(GridCell,{children:[Ie("div",{style:{width:"60px",height:"60px"},children:Ie(Label,{className:"rotated",children:"Separator"})}),Ie(Container,{orientation:Di.TopDown,children:Ie(Label,{id:"separated",children:Wo})})]}),Ie(GridCell,{children:[Ie("div",{style:{width:"60px"},children:Ie(Label,{className:"rotated",children:"Caption"})}),Ie(Label,{heading:!0,children:"Lorem ipsum dolor sit amet"})]}),Ie(GridCell,{children:[Ie("div",{style:{width:"60px",height:"60px"},children:Ie(Label,{className:"rotated",children:"Disabled"})}),Ie(Label,{disabled:!0,children:"Lorem ipsum dolor sit amet"})]})]}),Ie("p",{children:"Button"}),Ie(Grid,{columns:2,columnGap:"20px",rowGap:"30px",children:[Ie(GridCell,{orientation:Di.TopDown,children:[Ie("div",{style:{width:"60px"},children:Ie(Label,{className:"rotated",children:"Normal"})}),Ie(Button,{id:"button1",caption:"Enabled Button"}),Ie(Checkbox,{checkState:Do.Checked,children:"Enabled Checkbox   "}),Ie(Radiobutton,{checkState:Do.Checked,children:"Enabled Radiobutton"})]}),Ie(GridCell,{orientation:Di.TopDown,children:[Ie("div",{style:{width:"60px"},children:Ie(Label,{className:"rotated",children:"Disabled"})}),Ie(Button,{id:"button1",caption:"Disabled Button",disabled:!0}),Ie(Checkbox,{checkState:Do.Checked,disabled:!0,children:"Disabled Checkbox   "}),Ie(Radiobutton,{checkState:Do.Checked,disabled:!0,children:"Disabled Radiobutton"})]})]}),Ie("p",{children:"Dropdown"}),Ie(Dropdown,{selection:"tesla",optional:!1,style:{maxWidth:"300px"},children:[Ie(Dropdown.Item,{id:"tesla",caption:"Tesla"}),Ie(Dropdown.Item,{id:"volvo",caption:"Volvo"}),Ie(Dropdown.Item,{id:"bmw",caption:"BMW"}),Ie(Dropdown.Item,{id:"renault",caption:"Renault"})]}),Ie("p",{children:"Input"}),Ie(Grid,{columns:3,columnGap:20,children:[Ie(GridCell,{children:Ie(Input,{className:"fill",placeholder:"Enter something"})}),Ie(GridCell,{children:Ie(Input,{className:"fill",disabled:!0,placeholder:"Disabled input"})}),Ie(GridCell,{children:Ie(Search,{})})]}),Ie("p",{children:"Tag List"}),Ie(TagInput,{tags:[{id:"tag1",caption:"Einstein"},{id:"tag2",caption:"Boole"},{id:"tag3",caption:"Aristotle"},{id:"tag4",caption:"Archimedes"},{id:"tag5",caption:"Newton"},{id:"tag6",caption:"Plato"},{id:"tag7",caption:"Bohr"},{id:"tag8",caption:"Curie"},{id:"tag9",caption:"Euclid from Alexandria"}],removable:!1,style:{maxWidth:"300px"}}),Ie("p",{children:"Progress Indicator"}),Ie(Grid,{id:"progress",columns:2,columnGap:20,rowGap:30,children:[Ie(GridCell,{orientation:Di.TopDown,children:[Ie(Label,{children:"Linear determinate (75%)"}),Ie(ProgressIndicator,{linear:!0,position:.75,indicatorWidth:180})]}),Ie(GridCell,{orientation:Di.TopDown,children:[Ie(Label,{children:"Linear indeterminate"}),Ie(ProgressIndicator,{linear:!0,indicatorWidth:180})]}),Ie(GridCell,{orientation:Di.TopDown,children:[Ie(Label,{children:"Circular determinate (33%)"}),Ie(ProgressIndicator,{linear:!1,position:.33})]}),Ie(GridCell,{orientation:Di.TopDown,children:[Ie(Label,{children:"Circular indeterminate"}),Ie(ProgressIndicator,{linear:!1,indicatorWidth:100,indicatorHeight:100})]})]}),Ie("p",{children:"Grid / Table"}),Ie(Container,{orientation:Di.TopDown,children:Ie(TablePreview,{})}),Ie("p",{children:"Activity Bar + Side Bar"}),Ie(Grid,{columns:["140px","auto"],columnGap:20,id:"activityBarHost",children:[Ie(ActivityBar,{id:"activityBar",borderWidth:2,children:[Ie(ActivityBarItem,{image:Xt,caption:"Section 1"}),Ie(ActivityBarItem,{image:Xt,active:!0,caption:"Section 2"}),Ie(ActivityBarItem,{image:Xt,expand:!0,caption:"Section 4"})]}),Ie(Accordion,{id:"sidebar1",style:{borderWidth:"1px",borderStyle:"solid"},caption:"SIDEBAR TITLE",footer:Wo,singleExpand:!0,sections:[{caption:"FIRST SECTION",id:"first",expanded:!1,content:[Ie(Accordion.Item,{id:"item1",caption:"Item 1"},"item1"),Ie(Accordion.Item,{id:"item2",caption:"Item 2"},"item2"),Ie(Accordion.Item,{id:"item3",caption:"Item 3"},"item3")]},{caption:"SECOND SECTION",id:"second",content:[Ie(Accordion.Item,{id:"item5",caption:"Item 5",picture:vi},"item5"),Ie(Accordion.Item,{id:"item6",caption:"Item 6",picture:vi},"item6"),Ie(Accordion.Item,{id:"item7",caption:"Item 7",picture:vi},"item7")]},{caption:"THIRD SECTION",id:"third",content:[Ie(Accordion.Item,{id:"item9",caption:"Item 9"},"item9"),Ie(Accordion.Item,{id:"item10",caption:"Item 10"},"item10"),Ie(Accordion.Item,{id:"item11",caption:"Item 11"},"item11")]}]})]}),Ie("p",{children:"Tabview"}),Ie(Container,{orientation:Di.TopDown,children:Ie(Tabview,{id:"tabview1",tabPosition:Ao.Top,tabBorderWidth:1,contentSeparatorWidth:2,pages:[{caption:"Tab 1",id:"page1",content:Ie(Label,{children:Wo}),icon:Xt,auxillary:Ie(Button,{id:"page1",className:"closeButton",round:!0,children:Ie(xi,{src:bi})})},{caption:"Tab 2",id:"page2",content:Ie(Label,{children:"Content"}),icon:Xt,auxillary:Ie(Button,{id:"page2",className:"closeButton",round:!0,children:Ie(xi,{src:bi})})}],selectedId:"page1",stretchTabs:!1,canReorderTabs:!0})}),Ie("p",{children:"JSON View"}),Ie(Fo,{json:t.json}),Ie("p",{children:"Code Editor"}),Ie(Container,{orientation:Di.TopDown,style:{height:"500px",marginTop:"10px"},children:[Ie(Container,{orientation:Di.LeftToRight,crossAlignment:ki.Center,id:"editorControlHost",children:[Ie(Label,{caption:"Select Editor Language: "}),Ie(Dropdown,{id:"editorLanguagePicker",selection:e,onSelect:e=>{this.setState({editorLanguage:[...e][0]})},children:[Ie(Dropdown.Item,{id:"javascript",caption:"JavaScript"}),Ie(Dropdown.Item,{id:"typescript",caption:"TypeScript"}),Ie(Dropdown.Item,{id:"mysql",caption:"MySQL"}),Ie(Dropdown.Item,{id:"json",caption:"JSON"}),Ie(Dropdown.Item,{id:"markdown",caption:"Markdown"}),Ie(Dropdown.Item,{id:"ini",caption:"Ini"}),Ie(Dropdown.Item,{id:"xml",caption:"XML"})]})]}),Ie(Go,{language:e,minimap:{enabled:!0},font:{fontFamily:"SourceCodePro+Powerline+Awesome+MySQL",fontSize:15,lineHeight:24},scrollbar:{useShadows:!0,verticalHasArrows:!1,horizontalHasArrows:!1,vertical:"auto",horizontal:"auto",verticalScrollbarSize:12,horizontalScrollbarSize:12},lineNumbers:"on",initialContent:n,showIndentGuides:!0})]}),Ie("p",{children:"Mixed Language Code Editor with Embedded Results"}),Ie(Container,{orientation:Di.TopDown,children:Ie(Notebook,{savedState:ge(this,W),dbType:Ki.MySQL,readOnly:!0,showAbout:!0,standaloneMode:!1,toolbarItemsTemplate:{navigation:[],execution:[],editor:[],auxillary:[]}})}),Ie("p",{children:"Browser Tiles"}),Ie(Container,{children:[Ie(ConnectionTile,{tileId:1,details:{id:1,dbType:Ki.MySQL,version:0,useSSH:!1,useMDS:!1,caption:"First Tile",description:Wo,options:{scheme:qo.MySQL,user:"root",host:"localhost"}},caption:"First Tile",description:Wo,type:$o.Open,icon:Xt}),Ie(ConnectionTile,{type:$o.CreateNew,tileId:2,details:{id:2,dbType:Ki.MySQL,version:0,useSSH:!1,useMDS:!1,caption:"Second Tile",description:"A description for this tile",options:{scheme:qo.MySQL,user:"root",host:"localhost"}},caption:"Second Tile",description:"A description for this tile",icon:Xt})]}),Ie("p",{children:"Title Bar"}),Ie(Container,{orientation:Di.TopDown,children:Ie(Toolbar,{id:"toolbar1",vibrant:!0,dropShadow:!0,children:[Ie(Label,{children:"Title Bar"}),Ie(Divider,{vertical:!0}),Ie(Search,{}),Ie(Dropdown,{selection:"English",children:[Ie(Dropdown.Item,{id:"English",caption:"English"}),Ie(Dropdown.Item,{id:"Polish",caption:"Polish"}),Ie(Dropdown.Item,{id:"Portuguese",caption:"Portuguese"}),Ie(Dropdown.Item,{id:"German",caption:"German"})]}),Ie(Button,{children:"LOGIN"}),Ie(xi,{src:Xt})]})}),Ie("p",{children:"Menu + Menubar"}),Ie(Container,{orientation:Di.TopDown,children:Ie(MenuBar,{children:[Ie(MenuItem,{id:"fileMenu",caption:"File",children:[Ie(MenuItem,{id:"item80",caption:"Item 1"}),Ie(MenuItem,{id:"item81",caption:"Item 2"}),Ie(MenuItem,{id:"item82",caption:"Item 3"}),Ie(MenuItem,{id:"item83",caption:"-"}),Ie(MenuItem,{id:"item84",caption:"Item 4"}),Ie(MenuItem,{id:"item65",icon:Xt,caption:"Sub Menu 2",children:[Ie(MenuItem,{id:"item70",caption:"Item 1"}),Ie(MenuItem,{id:"item71",caption:"Item 2"}),Ie(MenuItem,{id:"item72",caption:"Item 3"}),Ie(MenuItem,{id:"item73",caption:"-"}),Ie(MenuItem,{id:"item74",caption:"Item 4"}),Ie(MenuItem,{id:"item75",icon:Xt,caption:"Sub Menu 2",children:[Ie(MenuItem,{id:"item80",caption:"Item 1"}),Ie(MenuItem,{id:"item81",caption:"Item 2"}),Ie(MenuItem,{id:"item82",caption:"Item 3"}),Ie(MenuItem,{id:"item83",caption:"-"}),Ie(MenuItem,{id:"item84",caption:"Item 4"}),Ie(MenuItem,{id:"item85",icon:Xt,caption:"Item 5"})]})]})]}),Ie(MenuItem,{id:"editMenu",caption:"Edit",children:[Ie(MenuItem,{id:"item80",caption:"Item 1"}),Ie(MenuItem,{id:"item81",caption:"Item 2"}),Ie(MenuItem,{id:"item82",caption:"Item 3"}),Ie(MenuItem,{id:"item83",caption:"-"}),Ie(MenuItem,{id:"item84",caption:"Item 4"})]}),Ie(MenuItem,{id:"selectionMenu",caption:"Selection",children:[Ie(MenuItem,{id:"item80",caption:"Item 1"}),Ie(MenuItem,{id:"item81",caption:"Item 2"}),Ie(MenuItem,{id:"item82",caption:"Item 3"}),Ie(MenuItem,{id:"item83",caption:"-"}),Ie(MenuItem,{id:"item84",caption:"Item 4"})]})]})}),Ie("p",{children:"Terminal Colors"}),Ie(Label,{caption:"Foreground",id:"terminalPreviewCaption"}),Ie(Container,{id:"terminalPreview",orientation:Di.LeftToRight,wrap:Ii.Wrap,children:[Ie("span",{className:"ansi-bold",children:"bold"}),Ie("span",{className:"ansi-black-fg",children:"black"}),Ie("span",{className:"ansi-red-fg",children:"red"}),Ie("span",{className:"ansi-green-fg",children:"green"}),Ie("span",{className:"ansi-yellow-fg",children:"yellow"}),Ie("span",{className:"ansi-blue-fg",children:"blue"}),Ie("span",{className:"ansi-magenta-fg",children:"magenta"}),Ie("span",{className:"ansi-cyan-fg",children:"cyan"}),Ie("span",{className:"ansi-white-fg",children:"white"}),Ie("span",{className:"ansi-bright-black-fg",children:"bright-black"}),Ie("span",{className:"ansi-bright-red-fg",children:"bright-red"}),Ie("span",{className:"ansi-bright-green-fg",children:"bright-green"}),Ie("span",{className:"ansi-bright-yellow-fg",children:"bright-yellow"}),Ie("span",{className:"ansi-bright-blue-fg",children:"bright-blue"}),Ie("span",{className:"ansi-bright-magenta-fg",children:"bright-magenta"}),Ie("span",{className:"ansi-bright-cyan-fg",children:"bright-cyan"}),Ie("span",{className:"ansi-bright-white-fg",children:"bright-white"}),Ie("span",{id:"cursor",children:Ie("span",{id:"inner"})})]}),Ie(Label,{caption:"Background",id:"terminalPreviewCaption"}),Ie(Container,{id:"terminalPreview",orientation:Di.LeftToRight,wrap:Ii.Wrap,children:[Ie("span",{className:"ansi-black-bg",children:"black"}),Ie("span",{className:"ansi-red-bg",children:"red"}),Ie("span",{className:"ansi-green-bg",children:"green"}),Ie("span",{className:"ansi-yellow-bg",children:"yellow"}),Ie("span",{className:"ansi-blue-bg",children:"blue"}),Ie("span",{className:"ansi-magenta-bg",children:"magenta"}),Ie("span",{className:"ansi-cyan-bg",children:"cyan"}),Ie("span",{className:"ansi-white-bg",children:"white"})]}),Ie("p",{children:"ANSI Escapes Output Rendering"}),Ie(Container,{id:"ansiPreview",orientation:Di.LeftToRight,wrap:Ii.Wrap,children:Ie(Label,{language:"ansi",code:!0,children:"[1mBold[0m [38;5;201mHello[39m[48;5;214m[38;5;0mWorld\n[38;2;55;155;0mRGB Color[49m, [9mStrike Through[29m, [4m[38;2;155;55;0mUnderline, [7mInverse[27m[24m, [38;5;68m[5mBlinking"})}),Ie("p",{children:"Breadcrumb"}),Ie(Container,{orientation:Di.TopDown,children:Ie(Breadcrumb,{id:"breadcrumb1",path:["base","folder","sub-folder","another folder"],selected:2})}),Ie("p",{children:"Symbols"}),Ie(Pi,{}),Ie("div",{style:{width:"100%",minHeight:"100px"}})]})}}W=new WeakMap;const Qo="/assets/add-37cc77c4.svg",Yo="/assets/remove-899a6ae3.svg";class Dialog extends ComponentBase{constructor(e){super(e),pe(this,"portalRef",ke()),pe(this,"handleClose",(e=>{const{onClose:t}=this.mergedProps;null==t||t(e,this.mergedProps),this.setState({open:!1})})),pe(this,"handleOpen",(()=>{const{onOpen:e}=this.mergedProps;null==e||e(this.mergedProps)})),pe(this,"handleCloseClick",(()=>{this.close(!0)})),this.addHandledProperties("content","header","caption","container","actions")}render(){const{children:e,caption:t,header:n,content:i,actions:o,container:s}=this.mergedProps,r=this.getEffectiveClassNames([]);return Ie(Eo,{ref:this.portalRef,container:s,onClose:this.handleClose,onOpen:this.handleOpen,...this.unhandledProperties,children:Ie(DialogContent,{className:r,caption:t,header:n,content:i,actions:o,onCloseClick:this.handleCloseClick,children:e})})}open(e){var t;null==(t=this.portalRef.current)||t.open({backgroundOpacity:.5,...e})}close(e){var t;null==(t=this.portalRef.current)||t.close(e)}}pe(Dialog,"defaultProps",{container:document.body});class ParamDialog extends ComponentBase{constructor(e){super(e),pe(this,"dialogRef",ke()),pe(this,"show",(()=>{var e;return null==(e=this.dialogRef.current)?void 0:e.open()})),pe(this,"handleNameChange",((e,t)=>{this.setState({name:t.value})})),pe(this,"handleValueChange",((e,t)=>{this.setState({value:t.value})})),pe(this,"handleButtonClick",((e,t)=>{var n;null==(n=this.dialogRef.current)||n.close("ok"!==t.id)})),pe(this,"closeDialog",(e=>{const{onClose:t}=this.props,{name:n,value:i}=this.state;null==t||t(e,{name:n,value:i})})),this.state={name:"",value:""},this.addHandledProperties("caption","onClose")}render(){const{caption:e}=this.props,{name:t,value:n}=this.state,i=this.getEffectiveClassNames(["paramDialog"]),o=e??"Please enter name/vale pair:";return Ie(Dialog,{ref:this.dialogRef,className:i,onClose:this.closeDialog,caption:Ie(Re,{children:[Ie(xi,{src:Ti.PassFilled}),Ie(Label,{children:"Parameters"})]}),content:Ie(Grid,{columns:["128px","auto","auto"],columnGap:8,children:[Ie(GridCell,{rowSpan:4,children:Ie(xi,{src:"/assets/parameters-66a1b484.svg",width:128,height:128})}),Ie(GridCell,{columnSpan:2,crossAlignment:ki.Center,children:Ie(Label,{id:"caption",caption:o})}),Ie(GridCell,{className:"left",crossAlignment:ki.Center,children:"Parameter name:"}),Ie(GridCell,{className:"right",crossAlignment:ki.Center,children:Ie(Input,{id:"name",value:t,onChange:this.handleNameChange})}),Ie(GridCell,{className:"left",crossAlignment:ki.Center,children:"Parameter value:"}),Ie(GridCell,{className:"right",crossAlignment:ki.Center,children:Ie(Input,{id:"value",value:n,onChange:this.handleValueChange})})]}),actions:{end:[Ie(Button,{id:"ok",caption:"OK",onClick:this.handleButtonClick},"ok"),Ie(Button,{id:"cancel",caption:"Cancel",onClick:this.handleButtonClick},"cancel")]}})}}class FileSelector extends ComponentBase{constructor(e){super(e),pe(this,"selectFile",(e=>{const{id:t,onChange:n}=this.mergedProps;if(t!==e.resourceId)return Promise.resolve(!1);const i=e.path.map((e=>decodeURI(e.startsWith("file://")?e.substring(7):e)));return null==n||n(i,this.mergedProps),Promise.resolve(!0)})),pe(this,"handleButtonClick",(()=>{const{path:e,title:t,openLabel:n,canSelectFiles:i=!0,canSelectFolders:o,filters:s,multiSelection:r=!1,onChange:a,id:l}=this.mergedProps;if(tn.embedded){const a={id:l,default:e,title:t,canSelectFiles:i,canSelectFolders:o,canSelectMany:r,filters:s,openLabel:n};nn.executeRemote("showOpenDialog",a)}else{const e=[];s&&Object.values(s).forEach((t=>{e.push(...t.map((e=>`.${e}`)))})),on(e,r).then((e=>{e?null==a||a(e.map((e=>e.name)),this.mergedProps):null==a||a([],this.mergedProps)}))}})),pe(this,"handleInputChange",((e,t)=>{const{onChange:n}=this.mergedProps;null==n||n([t.value],this.mergedProps)})),pe(this,"handleInputConfirm",(e=>{const{onConfirm:t}=this.mergedProps;null==t||t(e,this.mergedProps)})),pe(this,"handleInputCancel",(e=>{const{onCancel:t}=this.mergedProps;null==t||t(e,this.mergedProps)})),this.addHandledProperties("value","placeholder","title","openLabel","filters","canSelectFiles","canSelectFolder","canCreateNew","multiSelection","content","onChange","onConfirm","onSelect")}componentDidMount(){nn.register("selectFile",this.selectFile)}componentWillUnmount(){nn.unregister("selectFile",this.selectFile)}render(){const{path:e,placeholder:t,id:n,canSelectFolders:i}=this.mergedProps,o=this.getEffectiveClassNames(["fileSelector"]);return Ie(Container,{className:o,orientation:Di.LeftToRight,children:[Ie(Input,{id:n,value:e,placeholder:t,onChange:this.handleInputChange,onConfirm:this.handleInputConfirm,onCancel:this.handleInputCancel}),(!i||tn.embedded)&&Ie(Button,{id:n&&`${n}Btn`,caption:"...",onClick:this.handleButtonClick})]})}}pe(FileSelector,"defaultProps",{canSelectFiles:!0,canSelectFolder:!1,canCreateNew:!1,multiSelection:!1});class DynamicList extends ComponentBase{constructor(e){super(e),pe(this,"cellFormatter",(e=>{const{template:t,rowHeight:n}=this.mergedProps,{columnField:i}=this.state,o=document.createElement("div");o.classList.add("dynamicListEntry"),n&&(o.style.height=`${n}px`);const s=Te(t,{data:{[i]:e.getValue()},tabIndex:0});return Ue(s,o),o})),this.state={columnField:this.columnField},this.addHandledProperties("height","rowHeight","template","elements")}componentDidUpdate(e){const{elements:t}=this.mergedProps;e.elements===t&&e.elements.length===t.length||this.setState({columnField:this.columnField})}render(){const{height:e,elements:t}=this.mergedProps,{columnField:n}=this.state,i=this.getEffectiveClassNames(["dynamicList"]),o=[{title:"",field:n,formatter:this.cellFormatter}],s={layout:"fitColumns",verticalGridLines:!1,horizontalGridLines:!1,alternatingRowBackgrounds:!1,selectionType:ii.Highlight,showHeader:!1};return Ie(TreeGrid,{height:e,className:i,tableData:t,columns:o,options:s,...this.unhandledProperties})}get columnField(){const{elements:e}=this.mergedProps;if(e.length>0){const t=Object.keys(e[0]);if(t.length>0)return t[0]}return"data"}}class UpDown extends ComponentBase{constructor(e){super(e),pe(this,"innerListRef",ke()),pe(this,"containerRef"),pe(this,"handleButtonClick",((e,t)=>{const{step:n}=this.state;this.stepValue("up"===t.id?n:-n)})),pe(this,"stepValue",(e=>{var t;const{onChange:n}=this.mergedProps,{currentValue:i,min:o,max:s,useNumeric:r}=this.state,a=rn(i+e,o,s);if(null==n||n(a,this.props),this.setState({currentValue:a}),!r&&this.innerListRef.current){const e=(null==(t=this.containerRef.current)?void 0:t.clientHeight)||0;this.innerListRef.current.style.top=En(-a*e-1)}})),pe(this,"handleInputChange",((e,t)=>{const{onChange:n}=this.mergedProps,{min:i,max:o}=this.state;let s=parseInt(t.value,10);isNaN(s)&&(s=0),null==n||n(s,this.props),this.setState({currentValue:rn(s,i,o)})})),pe(this,"handleInputConfirm",(()=>{const{onConfirm:e}=this.mergedProps,{currentValue:t}=this.state;null==e||e(t,this.props)})),pe(this,"handleInputCancel",(()=>{const{onCancel:e}=this.mergedProps;null==e||e(this.props)})),this.containerRef=e.innerRef??ke();const t=null!=e.min||null!=e.max||null!=e.step;let n=e.min;if(null!=n&&null!=e.max&&(n=Math.min(n,e.max)),t||!e.items){const t="string"==typeof e.value?parseInt(e.value,10):e.value||0;this.state={currentValue:rn(t,e.min,e.max),useNumeric:!0,min:n,max:e.max,step:e.step||1}}else{const t=e.value||e.items[0],n=e.items.findIndex((e=>e===t));this.state={currentValue:n,useNumeric:!1,min:0,max:e.items.length-1,step:1}}this.addHandledProperties("items","min","max","onChange","initialValue","textAlignment","innerRef")}componentDidMount(){this.containerRef.current&&this.containerRef.current.style.setProperty("--item-height",En(this.containerRef.current.clientHeight))}render(){const{items:e=[],textAlignment:t}=this.mergedProps,{currentValue:n,useNumeric:i}=this.state,o=this.getEffectiveClassNames(["upDown"]);let s;if(i)s=Ie(Input,{value:n.toString(),onChange:this.handleInputChange,onConfirm:this.handleInputConfirm,onCancel:this.handleInputCancel,textAlignment:t},"upDownInput");else{const t=e.map((e=>Ie(Container,{mainAlignment:ki.Center,crossAlignment:ki.Center,children:e},e)));s=Ie(Container,{id:"outerList",tabIndex:0,children:Ie(Container,{innerRef:this.innerListRef,id:"innerList",orientation:Di.TopDown,children:t},"innerList")},"outerList")}return Ie(Grid,{innerRef:this.containerRef,className:o,columns:["auto",16],...this.unhandledProperties,children:[Ie(GridCell,{id:"content",rowSpan:2,children:s},"upDownContent"),Ie(GridCell,{children:Ie(Button,{id:"up",onClick:this.handleButtonClick,tabIndex:-1},"upButton")}),Ie(GridCell,{children:Ie(Button,{id:"down",onClick:this.handleButtonClick,tabIndex:-1},"downButton")})]},"upDownMain")}}pe(UpDown,"defaultProps",{textAlignment:Ei.End});var Jo=(e=>(e[e.ReadOnly=0]="ReadOnly",e[e.Disabled=1]="Disabled",e[e.AutoFocus=2]="AutoFocus",e[e.Grouped=3]="Grouped",e[e.NewGroup=4]="NewGroup",e[e.Hidden=5]="Hidden",e))(Jo||{});class ValueEditDialog extends ComponentBase{constructor(e){super(e),pe(this,"dialogRef",ke()),pe(this,"paramDialogRef",ke()),pe(this,"relationListContextMenuRef",ke()),pe(this,"relationListCounter",-1),pe(this,"show",((e,t,n)=>{const i=new Set(null==t?void 0:t.contexts);this.state.activeContexts.has("advanced")&&i.add("advanced"),this.setState({title:null==t?void 0:t.title,heading:null==t?void 0:t.heading,description:null==t?void 0:t.description,values:e,activeContexts:i,validations:{messages:{}},data:n,autoResize:null==t?void 0:t.autoResize},(()=>{var e;return null==(e=this.dialogRef.current)?void 0:e.open(null==t?void 0:t.options)}))})),pe(this,"updateActiveContexts",(e=>{var t,n;const{activeContexts:i}=this.state;null==(t=e.add)||t.forEach((e=>{i.add(e)})),null==(n=e.remove)||n.forEach((e=>{i.delete(e)})),this.setState({activeContexts:i})})),pe(this,"updateInputValue",((e,t)=>{const{values:n,data:i}=this.state;n.sections.forEach((o=>{const s=o.values[t];if(!s||"text"!==s.type&&"choice"!==s.type);else{s.value=e,"text"===s.type&&(s.showLoading=!1);const{onValidate:t}=this.props,o=(null==t?void 0:t(!1,n,i))||{messages:{}};this.setState({values:n,validations:o})}}))})),pe(this,"changeAdvActionText",(e=>{this.setState({actionText:e})})),pe(this,"updateDropdownValue",((e,t,n)=>{const{values:i,data:o}=this.state;i.sections.forEach((s=>{const r=s.values[n];if("choice"!==(null==r?void 0:r.type));else{r.choices=e,r.value=t;const{onValidate:n}=this.props,s=(null==n?void 0:n(!1,i,o))||{messages:{}};this.setState({values:i,validations:s})}}))})),pe(this,"beginValueUpdating",((e,t)=>{const{values:n,data:i}=this.state;n.sections.forEach((o=>{const s=o.values[t];if("text"===(null==s?void 0:s.type)){s.value=e,s.showLoading=!0;const{onValidate:t}=this.props,o=(null==t?void 0:t(!1,n,i))||{messages:{}};this.setState({values:n,validations:o})}}))})),pe(this,"preventConfirm",(e=>{this.setState({preventConfirm:e})})),pe(this,"renderGroups",(()=>{const{onSelectTab:e}=this.props,{values:t,activeContexts:n}=this.state,i=[];let o="";t.sections.forEach(((e,t)=>{if((e.contexts||[]).filter((e=>!n.has(e))).length>0)return;const s=this.renderSection(t,e);if(e.groupName&&0!==e.groupName.length)if(e.groupName===o){const t=i[i.length-1];t.nodes.push({caption:e.caption,node:s,section:e}),e.active&&(t.active="page"+(t.nodes.length-1)),e.expand&&(t.expand=!0)}else{let t;e.active&&(t="page0"),i.push({nodes:[{caption:e.caption,node:s,section:e}],active:t}),o=e.groupName}else i.push({nodes:[{caption:e.caption,node:s,section:e}]}),o=""}));return i.map(((t,n)=>{var i;if(1===t.nodes.length)return t.nodes[0].node;const o=((null==(i=t.active)?void 0:i.length)??0)>0?t.active:"page0",s=t.nodes.map(((e,t)=>({id:`page${t}`,caption:e.caption??"No Title",content:Ie(Grid,{columns:8,rowGap:16,columnGap:16,className:this.classFromProperty(e.section.expand,"expand"),children:e.node})})));return Ie(GridCell,{columnSpan:8,children:Ie(Tabview,{pages:s,selectedId:o,onSelectTab:n=>{let i="";t.nodes.forEach(((e,t)=>{`page${t}`===n?(e.section.active=!0,i=e.caption??""):e.section.active=!1})),null==e||e(i),this.forceUpdate()}})},`group${n}`)}))})),pe(this,"renderSection",((e,t)=>{var n,i,o;const s=[];!t.caption||t.groupName&&0!==t.groupName.length||s.push(Ie(GridCell,{columnSpan:8,children:Ie(Label,{className:"sectionTitle",caption:t.caption})},t.caption));const r=Object.keys(t.values),a={source:"",relations:new Map};r.forEach((e=>{const n=t.values[e];if("relation"===n.type&&n.value&&n.value.length>0){const t=n.value,i=n.active??t[0].id,o=t.find((e=>e.id===i));if(o){a.source=e;for(const e of Object.entries(n.relations))a.relations.set(e[1],[o[e[0]],e[0]])}}}));let l=0;for(;l<r.length;){const d=[];let c=r[l++],u=t.values[c];if(d.push({key:c,value:u}),null==(n=u.options)?void 0:n.includes(3))for(;l<r.length&&(c=r[l],u=t.values[c],(null==(i=u.options)?void 0:i.includes(3))&&!(null==(o=u.options)?void 0:o.includes(4)));)++l,d.push({key:c,value:u});s.push(this.renderDialogValueGroup(l,d,e,a))}return s})),pe(this,"renderDialogValueGroup",((e,t,n,i)=>{const{validations:o}=this.state,s=[];let r,a;t.forEach((e=>{r?e.value.horizontalSpan&&e.value.horizontalSpan>r&&(r=e.value.horizontalSpan):r=e.value.horizontalSpan,a?e.value.verticalSpan&&e.value.verticalSpan>a&&(a=e.value.verticalSpan):a=e.value.verticalSpan})),r=Math.max(Math.round(r??4),1);const l=1===t.length&&"boolean"!=typeof t[0].value.type||"description"===t[0].value.type?t[0].value.caption:void 0;l&&t.length>1&&t.shift();const d=[];t.forEach((e=>{const t=o.messages[e.key];t&&d.push(t)}));const c=this.renderEdits(t,n,i),u=St.count(c);return s.push(Ie(GridCell,{orientation:Di.TopDown,mainAlignment:ki.Start,crossAlignment:ki.Stretch,columnSpan:r,rowSpan:a,children:[u>0&&l&&Ie(Label,{className:"valueTitle",caption:l}),u>0&&c,d.map(((t,n)=>Ie(Message,{type:zi.Error,children:t},`leftError${e}${n}`)))]},`valueCell${e}`)),s})),pe(this,"renderEdits",((e,t,n)=>{var i,o,s,r;const a=[];for(const l of e){const e=l.value.options;if(!(null==e?void 0:e.includes(5))){if("description"===l.value.type){const e=l.value.value??l.value.caption;a.push(Ie(Label,{className:"description",caption:null==e?void 0:e.toLocaleString()},l.key))}else{let d=l.value.value,c=l.key;if(n.relations.has(c)){const e=n.relations.get(c);if(void 0===e||void 0===e[0])continue;d=e[0],c=n.source+"."+e[1]}switch(l.value.type){case"button":{const e=d??l.value.caption;a.push(Ie(Button,{className:"valueEditor",caption:null==e?void 0:e.toLocaleString(),id:c,onClick:this.btnClick.bind(this,t)},c));break}case"boolean":a.push(Ie(Checkbox,{id:c,caption:l.value.label??l.value.caption,className:"valueEditor",checkState:d?Do.Checked:Do.Unchecked,onChange:this.checkboxChange.bind(this,t)},c));break;case"number":a.push(Ie(UpDown,{id:c,className:"valueEditor",value:d,step:1,min:l.value.min,max:l.value.max,onChange:this.upDownChange.bind(this,t)},c));break;case"resource":a.push(Ie(FileSelector,{className:"valueEditor",id:c,path:d,filters:l.value.filters,multiSelection:l.value.multiSelection??!1,canSelectFiles:l.value.canSelectFiles??!0,canSelectFolders:l.value.canSelectFolders??!1,placeholder:l.value.placeholder,onChange:this.fileChange.bind(this,t),onConfirm:this.acceptOnConfirm},c));break;case"choice":{const n=null==(o=null==(i=l.value)?void 0:i.choices)?void 0:o.map(((e,t)=>Ie(Dropdown.Item,{caption:e,id:e},t)));a.push(Ie(Dropdown,{id:c,className:"valueEditor",selection:d,optional:l.value.optional,onSelect:this.handleChoiceChange.bind(this,t),disabled:null==e?void 0:e.includes(1),autoFocus:null==e?void 0:e.includes(2),children:n},c));break}case"checkList":{const e=Ie(Container,{id:"listContainer",className:"verticalCenterContent",children:Ie(Checkbox,{dataId:"data",className:"stretch",checkState:Do.Unchecked,onChange:this.checkListCheckboxChange.bind(this,t,c)})});a.push(Ie(DynamicList,{id:c,height:150,rowHeight:29,template:e,elements:l.value.checkList??[]},c));break}case"set":{const n=null==(s=l.value.tagSet)?void 0:s.map(((e,t)=>Ie(Dropdown.Item,{caption:e,id:e},t))),i=new Set(d);a.push(Ie(Dropdown,{id:c,multiSelect:!0,selection:i,onSelect:this.handleSetChange.bind(this,t),disabled:null==e?void 0:e.includes(1),autoFocus:null==e?void 0:e.includes(2),children:n},c));break}case"relation":{const e=(null==(r=l.value.listItemCaptionFields)?void 0:r.map((e=>({title:"",field:e,resizable:!1}))))??[{title:"",field:"caption",resizable:!1}],n={showHeader:!1,selectionType:ii.Single,verticalGridLines:!0,horizontalGridLines:!1,layout:"fitDataStretch",autoScrollOnSelect:!0},i=Ie(TreeGrid,{className:"relationalList",columns:e,tableData:l.value.value,options:n,selectedIds:[String(l.value.active)??""],height:"12em",onRowSelected:this.handleRelationalListRowSelection.bind(this,t,l.value),onRowContext:this.handleRelationListRowContext.bind(this,t,l.value)});a.push(i);break}case"matrix":{const e=[{title:"Option",field:"key",resizable:!0},{title:"Value",field:"value",resizable:!0}],t={showHeader:!0,selectionType:ii.Multi,verticalGridLines:!0,horizontalGridLines:!1,layout:"fitColumns"},n=Ie(Container,{className:"matrixContainer",orientation:Di.LeftToRight,children:[Ie(ParamDialog,{ref:this.paramDialogRef,id:"paramDialog",caption:"Add parameters"}),Ie(TreeGrid,{id:"valueGrid",columns:e,tableData:d,options:t}),Ie(Container,{id:"matrixActions",children:[Ie(Button,{id:"buttonAddEntry","data-tooltip":"Add new property entry",onClick:this.handleAddProperty,children:Ie(xi,{src:Qo,"data-tooltip":"inherit"})}),Ie(Button,{id:"buttonRemoveEntry","data-tooltip":"Remove selected entries",onClick:this.handleRemoveProperty,children:Ie(xi,{src:Yo,"data-tooltip":"inherit"})})]})]});a.push(n);break}case"custom":{let e;e="function"==typeof l.value.component?l.value.component():l.value.component;const n=Te(e,{key:"customControl",values:l.value.value,onDataChange:this.handleCustomControlChange.bind(this,t,c)});a.push(n);break}default:{const n=this.getEffectiveClassNames(["inputWithProgress"]);let i;l.value.showLoading&&(i=Ie(ProgressIndicator,{backgroundOpacity:.95,indicatorWidth:40,indicatorHeight:7,linear:!0})),a.push(Ie(Container,{className:n,orientation:Di.LeftToRight,children:[Ie(Input,{id:c,className:"valueEditor",value:d,onChange:this.handleInputChange.bind(this,t),onConfirm:this.acceptOnConfirm,onBlur:this.onBlur.bind(this,t),placeholder:l.value.placeholder,disabled:null==e?void 0:e.includes(1),multiLine:l.value.multiLine,multiLineCount:l.value.multiLineCount,password:l.value.obfuscated,autoFocus:null==e?void 0:e.includes(2)},c),i]}));break}}}l.value.description&&a.push(Ie(Label,{className:"cellDescription",caption:l.value.description},l.key+"CellDescription"))}}return a})),pe(this,"handleAddProperty",(()=>{this.paramDialogRef.current&&this.paramDialogRef.current.show()})),pe(this,"handleRemoveProperty",(()=>{})),pe(this,"handleActionClick",((e,t)=>{var n;const{onClose:i}=this.props,{values:o,data:s}=this.state;let r=!1;if("ok"===t.id){if(!this.inputIsValid())return;r=!0,null==i||i($i.Accept,o,s)}null==(n=this.dialogRef.current)||n.close(!r)})),pe(this,"handleInputChange",((e,t,n)=>{var i;const{onValidate:o}=this.props,{values:s,data:r}=this.state,a=s.sections.get(e);if(a&&n.id){const e=this.setValue(n.id,n.value,a);if(e){const t=(null==o?void 0:o(!1,s,r))||{messages:{}};this.setState({values:s,validations:t}),null==(i=e.onChange)||i.call(e,n.value,this)}}})),pe(this,"handleCustomControlChange",((e,t,n,i)=>{const{onValidate:o}=this.props,{values:s,data:r}=this.state,a=s.sections.get(e);if(a&&t){if(this.setValue(t,n,a)){const e=(null==o?void 0:o(!1,s,r))||{messages:{}};this.setState({values:s,validations:e},i)}}})),pe(this,"fileChange",((e,t,n)=>{var i;const{onValidate:o}=this.props,{values:s,data:r}=this.state;if(t.length>0){const a=s.sections.get(e);if(a&&n.id){const e=this.setValue(n.id,t[0],a);if(e){const n=(null==o?void 0:o(!1,s,r))||{messages:{}};this.setState({values:s,validations:n}),null==(i=e.onChange)||i.call(e,t[0],this)}}}})),pe(this,"checkboxChange",((e,t,n)=>{var i;const{onValidate:o}=this.props,{values:s,data:r}=this.state,a=s.sections.get(e);if(a&&n.id){const e=t===Do.Checked,l=this.setValue(n.id,e,a);if(l){const t=(null==o?void 0:o(!1,s,r))||{messages:{}};this.setState({values:s,validations:t}),null==(i=l.onChange)||i.call(l,e,this)}}})),pe(this,"checkListCheckboxChange",((e,t,n,i)=>{var o,s;const{onValidate:r}=this.props,{values:a,data:l}=this.state,d=i.id,c=i.data&&i.dataId?i.data[i.dataId]:void 0;if(!d)return;const u=a.sections.get(e);if(u){const e=u.values[t];if(e){if(c){const t=null==(o=e.checkList)?void 0:o.find((e=>e.data.id===c.id));t&&(t.data.checkState=n)}const t=(null==r?void 0:r(!1,a,l))||{messages:{}};this.setState({values:a,validations:t}),null==(s=e.onChange)||s.call(e,n===Do.Checked,this)}}})),pe(this,"btnClick",((e,t,n)=>{var i;const{values:o}=this.state,s=o.sections.get(e);if(s&&n.id){const e=s.values[n.id];e&&(null==(i=e.onClick)||i.call(e,n.id,o,this))}})),pe(this,"advancedBtnClick",((e,t)=>{const{advancedAction:n}=this.props,{values:i}=this.state;null==n||n(i,t)})),pe(this,"upDownChange",((e,t,n)=>{var i;const{onValidate:o}=this.props,{values:s,data:r}=this.state,a=s.sections.get(e);if(a&&n.id){const e=this.setValue(n.id,t,a);if(e){const n=(null==o?void 0:o(!1,s,r))||{messages:{}};this.setState({values:s,validations:n}),null==(i=e.onChange)||i.call(e,t,this)}}})),pe(this,"handleChoiceChange",((e,t,n)=>{var i;const{onValidate:o}=this.props,{values:s,data:r}=this.state,a=t.size>0?[...t][0]:"",l=s.sections.get(e);if(l&&n.id){const e=this.setValue(n.id,a,l);if(e){const t=(null==o?void 0:o(!1,s,r))||{messages:{}};this.setState({values:s,validations:t}),null==(i=e.onChange)||i.call(e,a,this)}}})),pe(this,"handleSetChange",((e,t,n)=>{var i;const{onValidate:o}=this.props,{values:s,data:r}=this.state,a=[...t],l=s.sections.get(e);if(l&&n.id){const e=this.setValue(n.id,a,l);if(e){const t=(null==o?void 0:o(!1,s,r))||{messages:{}};this.setState({values:s,validations:t}),null==(i=e.onChange)||i.call(e,a,this)}}})),pe(this,"handleRelationalListRowSelection",((e,t,n)=>{const{onValidate:i}=this.props,{values:o,data:s}=this.state,r=n.getData();if(o.sections.get(e)&&t.active!==r.id){const e=(null==i?void 0:i(!1,o,s))||{messages:{}};0===Object.keys(e.messages).length&&(t.active=r[t.listItemId??"id"]),this.setState({values:o,validations:e})}})),pe(this,"advancedCheckboxChange",(e=>{const{activeContexts:t}=this.state,{onToggleAdvanced:n}=this.props;e===Do.Checked?t.add("advanced"):t.delete("advanced"),null==n||n(e===Do.Checked),this.setState({activeContexts:t})})),pe(this,"acceptOnConfirm",(()=>{var e;if(this.inputIsValid()){const{onClose:t}=this.props,{values:n,data:i}=this.state;null==(e=this.dialogRef.current)||e.close(!1),null==t||t($i.Accept,n,i)}})),pe(this,"onBlur",((e,t,n)=>{var i;const{values:o}=this.state,s=o.sections.get(e);if(s&&n.id){const e=s.values[n.id];"text"!==(null==e?void 0:e.type)&&"number"!==(null==e?void 0:e.type)||null==(i=e.onFocusLost)||i.call(e,n.value??"",this)}})),pe(this,"handleClose",(e=>{if(e){const{onClose:e}=this.props,{values:t,data:n}=this.state;null==e||e($i.Decline,t,n)}})),pe(this,"handleRelationListRowContext",((e,t,n,i)=>{var o;const s=n,r=new DOMRect(s.clientX,s.clientY,2,2),a=i.getData();a&&a.id&&(t.active=String(a.id)),null==(o=this.relationListContextMenuRef.current)||o.open(r,!1,{},{sectionId:e,value:t})})),pe(this,"handleRelationListContextMenuItemClick",((e,t,n)=>{var i,o,s,r;const a=n,l=a.value.listItemId??"id";if("addEntry"===t.id){const e=(a.value.listItemCaptionFields??["title"])[0];null==(i=a.value.value)||i.push({[l]:this.relationListCounter,[e]:"New Item "+-this.relationListCounter}),a.value.active=String(this.relationListCounter--),this.forceUpdate()}else if((a.value.value??[]).length>1){const e=(null==(o=a.value.value)?void 0:o.findIndex((e=>String(e[l])===String(a.value.active))))??-1;if(e>-1&&e<(a.value.value??[]).length-1){const{onValidate:t}=this.props,{values:n,data:i}=this.state,o=(null==t?void 0:t(!1,n,i))||{messages:{}};if(0===Object.keys(o.messages).length){null==(s=a.value.value)||s.splice(e,1);const t=null==(r=a.value.value)?void 0:r[e===(a.value.value??[]).length-1?e-1:e];a.value.active=t?String(t[l]):void 0,this.setState({values:n,validations:o})}}}return!0})),this.state={validations:{messages:{}},values:{id:"",sections:new Map},activeContexts:new Set,preventConfirm:!1},this.addHandledProperties("container","advancedAction","advancedActionCaption","customFooter","onClose","onValidate","onToggleAdvanced")}render(){const{container:e,advancedActionCaption:t,advancedAction:n,customFooter:i}=this.props,{title:o,heading:s,actionText:r,description:a,validations:l,activeContexts:d,values:c,preventConfirm:u,autoResize:h}=this.state;l.requiredContexts&&l.requiredContexts.length>0&&(l.requiredContexts.forEach((e=>{d.add(e)})),l.requiredContexts=void 0);const p=this.getEffectiveClassNames(["valueEditDialog",h?"autoResize":void 0]),m=this.renderGroups(),g=[];t&&t.length>0&&(n?g.push(Ie(Button,{caption:r??t,id:"advanced-btn",onClick:this.advancedBtnClick})):g.push(Ie(Checkbox,{id:"show-advanced",caption:t,checkState:d.has("advanced")?Do.Checked:Do.Unchecked,onChange:this.advancedCheckboxChange}))),i&&g.push(i);const f=[];null==a||a.forEach(((e,t)=>{f.push(Ie(Label,{id:`caption${t}`,language:"text",caption:e}))}));const b=a?Ie(Container,{orientation:Di.TopDown,children:Ie(Container,{orientation:Di.TopDown,className:"dialogDescription",children:f})}):void 0;let v;return s&&(v=Ie(Container,{orientation:Di.TopDown,children:Ie(Label,{id:"dialogHeading",caption:s})})),Ie(Re,{children:[Ie(Dialog,{ref:this.dialogRef,container:e,id:c.id,className:p,caption:Ie(Re,{children:[Ie(xi,{src:Ti.Terminal}),Ie(Label,{children:o})]}),header:v,actions:{begin:g,end:[Ie(Button,{caption:"OK",id:"ok",disabled:Object.keys(l.messages).length>0||u,onClick:this.handleActionClick},"ok"),Ie(Button,{caption:"Cancel",id:"cancel",onClick:this.handleActionClick},"cancel")]},content:Ie(Grid,{columns:8,rowGap:16,columnGap:16,id:"contentGrid",children:[b&&Ie(GridCell,{columnSpan:8,className:"dialogDescriptionCell",children:b}),m]}),onClose:this.handleClose,...this.unhandledProperties}),Ie(Po,{ref:this.relationListContextMenuRef,onItemClick:this.handleRelationListContextMenuItemClick,children:Ie(MenuItem,{id:"removeEntry",caption:"Remove Selected Entry"})})]})}inputIsValid(){const{onValidate:e}=this.props,{values:t,data:n}=this.state,i=(null==e?void 0:e(!0,t,n))??{messages:{}};return this.setState({validations:i}),0===Object.keys(i.messages).length}setValue(e,t,n){var i;const o=e.split(".");let s;if(1===o.length)s=n.values[e],s&&(s.value=t);else{if(o.length<2)return;if(s=n.values[o[0]],!s||"relation"!==s.type||void 0===s.active)return;const e=null==(i=s.value)?void 0:i.find((e=>e.id===s.active));if(!e)return;e[o[1]]=t}return s}}const Xo="/assets/clone-8ecae357.svg";class Slider extends ComponentBase{constructor(e){super(e),pe(this,"sliderRef",ke()),pe(this,"handleItemPointerMove",(e=>{if(this.sliderRef.current){const{vertical:t,onChange:n}=this.mergedProps,i=this.sliderRef.current.getBoundingClientRect();let o;o=rn(t?(e.clientY-i.y)/i.height:(e.clientX-i.x)/i.width,0,1),this.sliderRef.current.style.setProperty("--current-value",100*o+"%"),null==n||n(o)}})),this.addHandledProperties("value","vertical","handleSize"),this.connectEvents("onPointerDown","onPointerUp")}set value(e){var t;const{onChange:n}=this.mergedProps;e=rn(e,0,1),this.setState({currentValue:e}),(null==(t=this.sliderRef)?void 0:t.current)&&this.sliderRef.current.style.setProperty("--current-value",100*e+"%"),null==n||n(e)}componentDidUpdate(){const{value:e,handleSize:t}=this.mergedProps;this.sliderRef.current&&(this.sliderRef.current.style.setProperty("--current-value",100*e+"%"),this.sliderRef.current.style.setProperty("--handle-size",`${t??0}px`))}render(){const{vertical:e}=this.mergedProps,t=this.getEffectiveClassNames(["slider",this.classFromProperty(e,"vertical")]);return Ie("div",{ref:this.sliderRef,className:t,...this.unhandledProperties,children:Ie(Container,{className:"body",orientation:e?Di.TopDown:Di.LeftToRight,children:Ie("div",{className:"handle"})})})}handlePointerEvent(e,t){switch(e){case ti.Down:{this.handleItemPointerMove(t);const e=t.currentTarget;e.onpointermove=this.handleItemPointerMove,e.setPointerCapture(t.pointerId);break}case ti.Up:{const e=t.currentTarget;e.onpointermove=null,e.releasePointerCapture(t.pointerId);break}}return!0}}pe(Slider,"defaultProps",{disabled:!1,vertical:!1,handleSize:20});const Zo=class _ColorPopup extends ComponentBase{constructor(e){super(e),pe(this,"popupRef",ke()),pe(this,"handleRef",ke()),pe(this,"hueRingRef",ke()),pe(this,"saturationSliderRef",ke()),pe(this,"luminanceSliderRef",ke()),pe(this,"alphaSliderRef",ke()),pe(this,"updating",!1),pe(this,"open",((e,t,n)=>{this.setState({currentColor:t||new ye("#00000000"),isValid:null!=t,cssColorString:void 0,callback:n},(()=>{var t;null==(t=this.popupRef.current)||t.open(e.getBoundingClientRect(),{closeOnPortalClick:!0})}))})),pe(this,"handlePopupOpen",(()=>{this.updateControls()})),pe(this,"handleHuePointerDown",(e=>{this.handleHueChange(e);const t=e.currentTarget;t.onpointermove=this.handleHuePointerMove,t.setPointerCapture(e.pointerId)})),pe(this,"handleHuePointerUp",(e=>{const t=e.currentTarget;t.onpointermove=null,t.releasePointerCapture(e.pointerId)})),pe(this,"handleHuePointerMove",(e=>{this.handleHueChange(e)})),pe(this,"handleAlphaChange",(e=>{if(this.updating||!this.hueRingRef.current)return;const t=this.state.currentColor.hsl().array();t[3]=e;const n=ye.hsl(t);this.hueRingRef.current.style.setProperty("--current-color",n.hsl().toString());const{callback:i}=this.state,o=null==i?void 0:i(n);this.setState({currentColor:o||n,isValid:!0,cssColorString:void 0})})),pe(this,"handleSaturationChange",(e=>{if(this.updating||!this.hueRingRef.current)return;const t=this.state.currentColor.hsl().array();t[1]=100*e;const n=ye.hsl(t);this.hueRingRef.current.style.setProperty("--current-color",n.hsl().toString());const{callback:i}=this.state,o=null==i?void 0:i(n);this.setState({currentColor:o||n,isValid:!0,cssColorString:void 0})})),pe(this,"handleInputChange",((e,t)=>{let n=parseInt(t.value,10);switch(isNaN(n)&&(n=0),t.id){case"hueInput":break;case"saturationInput":this.handleSaturationChange(n/100);break;case"luminanceInput":this.handleLuminanceChange(n/100);break;case"alphaInput":this.handleAlphaChange(n/100)}})),pe(this,"handleLuminanceChange",(e=>{if(this.updating||!this.hueRingRef.current)return;const t=this.state.currentColor.hsl().array();t[2]=100*e;const n=ye.hsl(t);this.hueRingRef.current.style.setProperty("--current-color",n.hsl().toString());const{callback:i}=this.state,o=null==i?void 0:i(n);this.setState({currentColor:o||n,isValid:!0,cssColorString:void 0})})),pe(this,"handleHueChange",(e=>{if(this.updating||!this.hueRingRef.current||!this.handleRef.current)return;const t=this.hueRingRef.current.getBoundingClientRect(),n=(t.left+t.right)/2,i=(t.top+t.bottom)/2,o=e.clientX-n,s=i-e.clientY,r=Math.atan2(s,o),a=35*Math.cos(r),l=-35*Math.sin(r);this.handleRef.current.style.transform=`translate(${a}px, ${l}px)`;const d=360*r/2/Math.PI,c=this.state.currentColor.hsl().array();c[0]=d;const u=ye.hsl(c);this.hueRingRef.current.style.setProperty("--current-color",u.hsl().toString());const{callback:h}=this.state,p=null==h?void 0:h(u);this.setState({currentColor:p||u,isValid:!0,cssColorString:void 0})})),pe(this,"handleCSSColorInput",((e,t)=>{this.setState({cssColorString:t.value||""})})),pe(this,"onConfirmCSSColorInput",((e,t)=>{this.setColorString(t.value)})),this.state={currentColor:new ye,isValid:!1},this.addHandledProperties("initialColor"),_ColorPopup.singleton=this}static get instance(){return _ColorPopup.singleton}render(){const{currentColor:e,cssColorString:t}=this.state,n=this.getEffectiveClassNames(["colorPopup"]),i=null!=t,o=e.hsl().array();o.length<4&&o.push(1);const s={"--start-color":ye.hsl([o[0],0,o[2]]).hsl().toString(),"--end-color":ye.hsl([o[0],100,o[2]]).hsl().toString()},r={"--mid-color":ye.hsl([o[0],o[1],50]).hsl().toString()},a={"--start-color":ye.hsl([o[0],o[1],o[2],0]).hsl().toString(),"--end-color":ye.hsl([o[0],o[1],o[2],1]).hsl().toString()};return Ie(Popup,{ref:this.popupRef,className:n,placement:Zn.BottomCenter,onOpen:this.handlePopupOpen,children:[Ie(Container,{className:"actions",orientation:Di.TopDown,crossAlignment:ki.Center,children:Ie(xi,{src:"/assets/reset-b11f99ec.svg",onClick:()=>this.color=void 0})}),Ie(Container,{id:"hue",orientation:Di.LeftToRight,children:[Ie(Label,{id:"hueLabel","data-tooltip":"",children:"Hue"}),Ie(Container,{className:"hueSlider",innerRef:this.hueRingRef,onPointerDown:this.handleHuePointerDown,onPointerUp:this.handleHuePointerUp,children:Ie("div",{ref:this.handleRef,className:"handle"})}),Ie(Label,{id:"hueDataLabel",children:o[0].toFixed()+"°"})]}),Ie(Container,{id:"saturation",orientation:Di.TopDown,children:Ie(Grid,{columns:["auto","40px"],children:[Ie(GridCell,{columnSpan:2,children:Ie(Label,{caption:"Saturation"})}),Ie(GridCell,{children:Ie(Slider,{ref:this.saturationSliderRef,handleSize:14,value:o[1]/100,style:s,onChange:this.handleSaturationChange})}),Ie(GridCell,{className:"verticalCenterContent",children:[Ie(Input,{id:"saturationInput",value:o[1].toFixed(0),onChange:this.handleInputChange}),Ie(Label,{caption:"%"})]})]})}),Ie(Container,{id:"luminance",orientation:Di.TopDown,children:Ie(Grid,{columns:["auto","40px"],children:[Ie(GridCell,{columnSpan:2,children:Ie(Label,{caption:"Luminance"})}),Ie(GridCell,{children:Ie(Slider,{ref:this.luminanceSliderRef,handleSize:14,value:o[2]/100,style:r,onChange:this.handleLuminanceChange})}),Ie(GridCell,{className:"verticalCenterContent",children:[Ie(Input,{id:"luminanceInput",value:o[2].toFixed(0),onChange:this.handleInputChange}),Ie(Label,{caption:"%"})]})]})}),Ie(Container,{id:"alpha",orientation:Di.TopDown,children:Ie(Grid,{columns:["auto","40px"],children:[Ie(GridCell,{columnSpan:2,children:Ie(Label,{caption:"Alpha"})}),Ie(GridCell,{children:Ie(Slider,{ref:this.alphaSliderRef,handleSize:14,value:o[3],style:a,onChange:this.handleAlphaChange})}),Ie(GridCell,{orientation:Di.LeftToRight,className:"verticalCenterContent",children:[Ie(Input,{id:"alphaInput",value:(100*o[3]).toFixed(0),onChange:this.handleInputChange}),Ie(Label,{caption:"%"})]})]})}),Ie(Container,{id:"hexValueHost",orientation:Di.LeftToRight,children:[Ie(Label,{id:"hexTitle",caption:"CSS Color:"}),Ie(Input,{id:"hexValueInput",value:i?t:e.hexa(),"data-tooltip":"You can enter CSS color strings here in any valid format (names, RGB, HSL etc.).",onChange:this.handleCSSColorInput,onBlur:this.onConfirmCSSColorInput,onConfirm:this.onConfirmCSSColorInput})]})]})}get color(){const{currentColor:e,isValid:t}=this.state;return t?e:void 0}set color(e){const{callback:t}=this.state,n=null!=(e=null==t?void 0:t(e));this.setState({currentColor:e||new ye("#00000000"),isValid:n,cssColorString:void 0},(()=>{this.updateHueRing()}))}setColorString(e){const t=e?e.trim():"";if(0===t.length)this.color=void 0;else try{this.color=new ye(t)}catch(n){this.color=new ye("orangered")}}updateHueRing(){const{currentColor:e,isValid:t}=this.state;if(this.hueRingRef.current&&this.handleRef.current){const n=2*(t?e.hsl().array():[0,0,0,0])[0]*Math.PI/360,i=35*Math.cos(n),o=-35*Math.sin(n);this.handleRef.current.style.transform=`translate(${i}px, ${o}px)`,this.hueRingRef.current.style.setProperty("--current-color",e.hsl().toString())}}updateControls(){this.updateHueRing(),this.updating=!0;const{currentColor:e,isValid:t}=this.state;if(this.saturationSliderRef.current&&this.luminanceSliderRef.current&&this.alphaSliderRef.current){const n=t?e.hsl().array():[0,0,0,0];this.saturationSliderRef.current.value=n[1]/100,this.luminanceSliderRef.current.value=n[2]/100,this.alphaSliderRef.current.value=null==n[3]?1:n[3]}this.updating=!1}};pe(Zo,"singleton");let es=Zo;class ColorField extends ComponentBase{constructor(e){super(e),pe(this,"handleFieldKeyDown",(e=>{})),pe(this,"handleClick",(e=>{if(0===e.button){const{currentColor:t,originalColor:n}=this.state;es.instance.open(e.currentTarget,t,(e=>(e||(e=n),this.setState({currentColor:e},(()=>{var t,n;null==(n=(t=this.props).onChange)||n.call(t,e,this.props)})),e)))}})),this.state={},this.addHandledProperties("initialColor"),this.connectDragEvents()}static getDerivedStateFromProps(e,t){var n,i;const o=(null==(n=e.initialColor)?void 0:n.unitArray())||[],s=(null==(i=t.originalColor)?void 0:i.unitArray())||[];return pn(o,s)?{}:{originalColor:e.initialColor,currentColor:e.initialColor}}render(){const{id:e}=this.mergedProps,{currentColor:t}=this.state,n=this.getEffectiveClassNames(["colorField",t?"":" invalid"]),i={"--current-color":null==t?void 0:t.hsl().toString()};let o;return o=t?Ie("div",{className:"inner",style:i}):Ie(Image,{className:"inner",src:"/assets/empty-hatch-4e59ae41.svg"}),Ie("div",{id:e,role:"button",className:n,tabIndex:0,draggable:!0,onKeyDown:this.handleFieldKeyDown,onClick:this.handleClick,...this.unhandledProperties,children:o})}handleDragEvent(e,t){var n,i,o,s,r,a,l;const d=t.currentTarget;switch(e){case ni.Start:{const{currentColor:e}=this.state;e?null==(n=t.dataTransfer)||n.setData("text",e.hsl().toString()):null==(i=t.dataTransfer)||i.setData("text",""),t.stopPropagation();break}case ni.Over:t.stopPropagation(),t.preventDefault();break;case ni.Enter:d.classList.add("dropTarget");break;case ni.Leave:d.classList.remove("dropTarget");break;case ni.Drop:{t.preventDefault(),d.classList.remove("dropTarget");const e=null==(o=t.dataTransfer)?void 0:o.getData("text");if(e&&e.length>0){const t=new ye(e);this.setState({currentColor:t}),null==(r=(s=this.props).onChange)||r.call(s,t,this.props)}else this.setState({currentColor:void 0}),null==(l=(a=this.props).onChange)||l.call(a,void 0,this.props);break}}return!0}}class TokenEditor extends ComponentBase{constructor(e){super(e),pe(this,"handleDeleteTokenClick",(()=>{const{id:e,token:t,onRemove:n}=this.props;n(e,t)})),pe(this,"handleCloneTokenClick",(()=>{const{id:e,token:t,onDuplicate:n}=this.props;n(e,t)})),pe(this,"addScopeToTokenEntry",(e=>{const{onChange:t,token:n}=this.props,i=Array.isArray(n.scope)?n.scope:[n.scope];n.scope=[...new Set(i).add(e)].sort(),this.forceUpdate(),t(e,n)})),pe(this,"removeScopeFromTokenEntry",(e=>{const{onChange:t,token:n}=this.props,i=Array.isArray(n.scope)?n.scope:[n.scope],o=new Set(i);o.delete(e),n.scope=[...o].sort(),this.forceUpdate(),t(e,n)})),pe(this,"handleCheckChange",((e,t)=>{var n;const{onChange:i,token:o}=this.props,s=new Set((null==(n=o.settings.fontStyle)?void 0:n.split(" "))||[]);switch(t.id){case"bold":e===Do.Checked?s.add("bold"):s.delete("bold");break;case"italic":e===Do.Checked?s.add("italic"):s.delete("italic");break;case"underline":e===Do.Checked?s.add("underline"):s.delete("underline")}o.settings.fontStyle=Array.from(s).join(" "),this.forceUpdate(),i(t.id,o)})),pe(this,"handleColorChange",((e,t)=>{const{onChange:n,token:i}=this.props,o="foreground"===t.id,s=null==e?void 0:e.hexa();o?i.settings.foreground=s:i.settings.background=s,this.forceUpdate(),n(t.id,i)})),pe(this,"handleNameChange",((e,t)=>{const{onChange:n,token:i}=this.props;i.name=t.value,this.forceUpdate(),n(t.id,i)})),this.addHandledProperties("onScopeListClick","onRemove")}render(){var e;const{id:t,token:n,onScopeListClick:i}=this.props,o=(null==(e=n.settings.fontStyle)?void 0:e.split(" "))||[],s=n.name||"",r=Array.isArray(n.scope)?n.scope:[n.scope],a=o.includes("bold")?Do.Checked:Do.Unchecked,l=o.includes("italic")?Do.Checked:Do.Unchecked,d=o.includes("underline")?Do.Checked:Do.Unchecked,c=n.settings.foreground?new ye(n.settings.foreground):void 0,u=n.settings.background?new ye(n.settings.background):void 0,h=r.map((e=>({id:e,caption:e})));return Ie(Container,{className:"syntaxStyleEntry",orientation:Di.TopDown,children:[Ie(Button,{round:!0,id:t,className:"styleEntryDeleteButton","data-tooltip":"Delete this syntax entry",onClick:this.handleDeleteTokenClick,children:Ie(xi,{src:wi,"data-tooltip":"inherit"})}),Ie(Button,{round:!0,id:t,className:"styleEntryCloneButton","data-tooltip":"Clone this syntax entry",onClick:this.handleCloneTokenClick,children:Ie(xi,{src:Xo,"data-tooltip":"inherit"})}),Ie(Grid,{columns:2,rowGap:4,columnGap:16,children:[Ie(GridCell,{children:Ie(Label,{caption:"Name:"})}),Ie(GridCell,{children:Ie(Input,{id:t,placeholder:"<no name assigned>",value:s,onChange:this.handleNameChange})}),Ie(GridCell,{columnSpan:2,children:Ie(TagInput,{id:t,tags:h,orientation:Di.LeftToRight,removable:!0,className:"scopeList","data-tooltip":"Click here to add more tags",style:{flex:"1 1 auto"},onClick:i,onAdd:this.addScopeToTokenEntry,onRemove:this.removeScopeFromTokenEntry})}),Ie(GridCell,{orientation:Di.TopDown,style:{overflow:"visible"},children:[Ie(Container,{className:"syntaxColor",children:[Ie(Label,{caption:"Foreground",style:{flexGrow:1}}),Ie(ColorField,{id:"foreground",initialColor:c,onChange:this.handleColorChange})]}),Ie(Container,{className:"syntaxColor",children:[Ie(Label,{caption:"Background",style:{flexGrow:1}}),Ie(ColorField,{id:"background",initialColor:u,onChange:this.handleColorChange})]})]}),Ie(GridCell,{orientation:Di.TopDown,children:[Ie(Checkbox,{id:"bold",caption:"bold",checkState:a,onChange:this.handleCheckChange}),Ie(Checkbox,{id:"italic",caption:"italic",checkState:l,onChange:this.handleCheckChange}),Ie(Checkbox,{id:"underline",caption:"underline",checkState:d,onChange:this.handleCheckChange})]})]})]})}}class ScopeSelector extends ComponentBase{constructor(e){super(e),pe(this,"newScopeDialogRef",ke()),pe(this,"popupRef",ke()),pe(this,"open",(e=>{var t;null==(t=this.popupRef.current)||t.open(e.getBoundingClientRect())})),pe(this,"validateScopeName",((e,t)=>{const{currentCustomScopes:n}=this.state,i={messages:{}},[o]=t.sections;let s=o[1].values.scopeName.value||"";return"string"==typeof s&&(s=s.trim(),0===s.length?i.messages.scopeName="The new scope name cannot be empty.":n.includes(s)&&(i.messages.scopeName="A scope with this name exists already.")),i})),pe(this,"defineNewScope",((e,t)=>{if(e===$i.Accept){const{currentCustomScopes:e}=this.state,[n]=t.sections,i=n[1].values;this.setState({currentCustomScopes:[i.scopeName.value,...e].sort()})}})),pe(this,"triggerNewScope",(()=>{var e;null==(e=this.newScopeDialogRef.current)||e.show({id:"",sections:new Map([["",{values:{scopeName:{type:"text",caption:"Name",value:""}}}]])},{title:"Enter a name for the new scope"})})),this.state={defaultTags:e.defaultScopes.map((e=>({id:e,caption:e}))),currentCustomScopes:e.customScopes}}componentDidUpdate(e){const{customScopes:t}=this.props;t!==e.customScopes&&this.setState({currentCustomScopes:t})}render(){const{defaultTags:e,currentCustomScopes:t}=this.state,n=[];return t.forEach((e=>{ns.defaultScopes.includes(e)||n.push({id:e,caption:e})})),Ie(Popup,{ref:this.popupRef,placement:Zn.RightCenter,className:"scopeSelector",children:[Ie(Label,{caption:"Scope Selector",id:"title"}),Ie(Label,{caption:"Use the collections to assign scopes to each color entry, by dragging a scope tag with the mouse into the associated scope field.",id:"description"}),Ie(Label,{caption:"Default Scopes",id:"subTitle"}),Ie(TagInput,{tags:e,orientation:Di.TopDown}),Ie(Label,{caption:"Defined Scopes",id:"subTitle"}),Ie(Label,{caption:"Unused scopes are automatically removed on next load of the theme, so make sure you use a scope at least once to keep it in this list.",id:"description"}),Ie(TagInput,{tags:n,orientation:Di.TopDown}),Ie("div",{className:"footer verticalCenterContent",children:[Ie(ValueEditDialog,{ref:this.newScopeDialogRef,onValidate:this.validateScopeName,onClose:this.defineNewScope}),Ie(Button,{caption:"Define New Scope",onClick:this.triggerNewScope})]})]})}}const ts=class _ThemeEditorLists extends ComponentBase{constructor(e){super(e),pe(this,"expandedRowKeys",[]),pe(this,"scopeSelectorRef",ke()),pe(this,"themeNode"),pe(this,"unfilteredColors"),pe(this,"filteredColors"),pe(this,"tokens"),pe(this,"tokenListCellFormatter",(e=>{const t=e.getData(),n=Ie(TokenEditor,{token:t.value,id:t.index.toString(),onScopeListClick:this.openScopeSelector,onChange:this.tokenChanged,onRemove:this.removeToken,onDuplicate:this.duplicateToken}),i=document.createElement("div");return i.className="syntaxEntryHost",Ue(n,i),i})),pe(this,"colorTreeCellFormatter",(e=>{const t=e.getData();let n;switch(e.getColumn().getField()){case"description":if(t.id.startsWith("#"))n=Ie(Label,{children:t.description});else{const e=t.id;n=Ie("div",{className:"colorEntry",children:[Ie(Label,{className:"description",children:t.description}),Ie(Label,{className:"colorIdLabel",children:`➠ ${e}`})]})}break;case"color":if(!t.id.startsWith("#")){let i;try{i=new ye(e.getValue().trim())}catch(o){i=void 0}n=Ie(ColorField,{id:t.variable,initialColor:i,onChange:this.colorChanged})}break;default:t.preview||(n=Ie(xi,{src:"/assets/no-preview-5ae5dd08.svg",id:"previewIcon","data-tooltip":"No preview is available for this color. It's not used in this application."}))}const i=document.createElement("div");return i.className="colorTreeEntryHost",n&&Ue(n,i),i})),pe(this,"colorChanged",((e,t)=>{var n;null==(n=this.themeNode)||n.setProperty(t.id,e?e.hsl().toString():null),this.props.onThemeChange()})),pe(this,"openScopeSelector",(e=>{this.scopeSelectorRef.current&&this.scopeSelectorRef.current.open(e.currentTarget)})),pe(this,"tokenChanged",(()=>{this.props.onThemeChange()})),pe(this,"removeToken",(e=>{const t=parseInt(e,10);this.tokens.splice(t,1),this.forceUpdate(),this.props.onThemeChange()})),pe(this,"duplicateToken",((e,t)=>{const n=parseInt(e,10);this.tokens.splice(n+1,0,un(t)),this.forceUpdate(),this.props.onThemeChange()})),this.themeNode=mi.get.themeStyleNode,this.state={selectedPage:"uiColors"}}get renderUiColorsPage(){const{showUnusedColors:e}=this.props,t=[{title:"",field:"description",width:300,resizable:!0,formatter:this.colorTreeCellFormatter},{title:"",field:"color",width:40,resizable:!1,hozAlign:"center",formatter:this.colorTreeCellFormatter},{title:"",field:"preview",width:32,resizable:!1,hozAlign:"center",formatter:this.colorTreeCellFormatter}],n={treeColumn:"description",selectionType:ii.Single,showHeader:!1,layout:"fitColumns"};return{id:"uiColors",caption:"UI Colors",content:Ie(TreeGrid,{options:n,columns:t,tableData:e?this.unfilteredColors:this.filteredColors})}}get renderSyntaxColorsPage(){const e=this.tokens.map(((e,t)=>({index:t,value:e}))),t=[{title:"",field:"index",formatter:this.tokenListCellFormatter}],n={selectionType:ii.None,showHeader:!1,layout:"fitColumns"};return{id:"syntaxColors",caption:"Syntax Colors",content:Ie(Re,{children:[Ie(ScopeSelector,{ref:this.scopeSelectorRef,defaultScopes:_ThemeEditorLists.defaultScopes,customScopes:this.collectCustomScopes()}),Ie(Container,{orientation:Di.TopDown,children:Ie(TreeGrid,{options:n,columns:t,tableData:e})})]})}}render(){const{selectedPage:e}=this.state;return this.readData(),Ie(Tabview,{id:"themeTabview",tabPosition:Ao.Top,selectedId:e,pages:[this.renderUiColorsPage,this.renderSyntaxColorsPage],onSelectTab:e=>{this.setState({selectedPage:e})}})}readData(){this.themeNode=mi.get.themeStyleNode;const e=mi.get.activeThemeValues;e&&e.tokenColors&&e.tokenColors.length>0?this.tokens=e.tokenColors:(this.tokens=[],_ThemeEditorLists.defaultScopes.forEach((e=>{this.tokens.push({name:e,scope:[e],settings:{}})})),e&&(e.tokenColors=this.tokens)),this.unfilteredColors=this.collectColors(oi,!0)??[],this.filteredColors=this.collectColors(oi,!1)??[]}collectCustomScopes(){const e=new Set,t=mi.get.activeThemeValues;return(null==t?void 0:t.tokenColors)&&t.tokenColors.forEach((t=>{const n=t.scope||[];(Array.isArray(n)?n:n.split(",")).forEach((t=>{e.add(t)}))})),[...e].sort()}collectColors(e,t){let n;const i=this.themeNode;return e&&i&&(n=[],e.forEach((e=>{if(e.preview||t){const o=mi.get.themeValueNameToCssVariable(e.name),s=i.getPropertyValue(o);n.push({id:e.name,description:e.description,preview:e.preview,color:s,variable:o,children:this.collectColors(e.children,t)})}}))),n}};pe(ts,"defaultScopes",["comment","comment.line","comment.line.double-slash","comment.line.double-dash","comment.line.number-sign","comment.line.percentage","comment.block","comment.block.documentation","constant","constant.numeric","constant.character","constant.character.escape","constant.language","constant.other","entity","entity.name","entity.name.function","entity.name.type","entity.name.tag","entity.name.section","entity.other","entity.other.inherited-class","entity.other.attribute-name","invalid","invalid.illegal","invalid.deprecated","keyword","keyword.control","keyword.operator","keyword.other","markup","markup.underline","markup.underline.link","markup.bold","markup.heading","markup.italic","markup.list","markup.list.numbered","markup.list.unnumbered","markup.quote","markup.raw","markup.other","meta","storage","storage.type","storage.modifier","string","string.quoted","string.quoted.single","string.quoted.double","string.quoted.triple","string.quoted.other","string.unquoted","string.interpolated","string.regexp","string.other","support","support.function","support.class","support.type","support.constant","support.variable","support.other","variable","variable.parameter","variable.language","variable.other"]);let ns=ts;class ThemeEditorCore extends ComponentBase{constructor(e){super(e),pe(this,"colorPadColors",[]),pe(this,"themeDropdownRef",ke()),pe(this,"themeNameDialogRef",ke()),pe(this,"themeManager"),pe(this,"handleThemeChange",(()=>(setTimeout((()=>{this.setState({themes:this.themeManager.installedThemes})}),500),Promise.resolve(!0)))),pe(this,"settingsChanged",(e=>!e||""===e.key||e.key.startsWith("theming.")?(this.initializeColorPad(),Promise.resolve(!0)):Promise.resolve(!1))),pe(this,"handleColorPadChange",((e,t)=>{const n=t.id?parseInt(t.id,10):0;this.colorPadColors[n]=(null==e?void 0:e.hexa())??"",hi.set("theming.colorPadColors",this.colorPadColors),hi.saveSettings()})),pe(this,"handleThemeSwitch",(e=>{const t=document.getElementsByTagName("html");t[0].classList.add("themeSwitch"),setTimeout((()=>{t[0].classList.remove("themeSwitch")}),500),this.themeManager.activeTheme=[...e][0]})),pe(this,"importTheme",(()=>{on([".json"],!1).then((e=>{const t=new FileReader;t.onload=()=>{const e=t.result;if(e)try{const t=e.replace(/\/\/\s*[^"\n\r]*$/gm,""),n=JSON.parse(t),i=this.themeManager.loadThemeDetails(n,!0);this.themeManager.activeTheme=i,this.forceUpdate()}catch(n){if(n instanceof Error){const e=n.toString()||"";alert(`Error while parsing JSON data: \n${e}`)}}else alert("Cannot read theme file")},e instanceof File&&t.readAsText(e,"utf-8")}))})),pe(this,"exportCurrentTheme",(()=>{this.themeManager.saveTheme();const e=this.themeManager.currentThemeAsText;sn(e,this.themeManager.activeTheme+".json")})),pe(this,"removeCurrentTheme",(()=>{this.themeManager.removeCurrentTheme(),this.handleThemeSwitch(new Set(this.themeManager.activeTheme))})),pe(this,"handleThemeDuplication",(()=>{var e;const t={values:{themeName:{type:"text",caption:"Enter a new theme name",value:this.themeManager.activeTheme+"X",horizontalSpan:8}}};null==(e=this.themeNameDialogRef.current)||e.show({id:"themeNameDialog",sections:new Map([["name",t]])},{title:"Enter a name for the new theme"})})),pe(this,"validateThemeName",((e,t)=>{const n={messages:{}},i=t.sections.get("name").values.themeName.value.trim(),o=this.themeManager.installedThemes;return 0===i.length&&(n.messages.themeName="The new theme name cannot be empty."),o.includes(i)&&(n.messages.themeName="A theme with this name exists already."),n})),pe(this,"executeThemeDuplication",((e,t)=>{const n=t.sections.get("name").values.themeName.value.trim();e===$i.Accept&&(this.themeManager.saveTheme(),this.themeManager.duplicateCurrentTheme(n),this.handleThemeSwitch(new Set(n)))})),this.themeManager=mi.get,this.state={showUnusedColors:!1,themes:this.themeManager.installedThemes},this.initializeColorPad()}componentDidMount(){nn.register("settingsChanged",this.settingsChanged),nn.register("themeChanged",this.handleThemeChange)}componentWillUnmount(){nn.unregister("settingsChanged",this.settingsChanged),nn.unregister("themeChanged",this.handleThemeChange)}render(){const{showUnusedColors:e,themes:t}=this.state,n=this.getEffectiveClassNames(["themeEditor"]),i=t.map((e=>Ie(Dropdown.Item,{caption:e,id:e},e)));return Ie(Container,{className:n,orientation:Di.TopDown,children:[Ie(Label,{className:"title","data-tooltip":"",children:"THEME EDITOR"}),Ie(Label,{className:"description",children:["Here you can modify any visually related aspects of your application. Define complex color themes for the user interface and set your preferred colors for editor syntax highlighting.",Ie("br",{}),Ie("br",{}),Ie("b",{children:"Note:"})," You can import and export Visual Studio Code color themes, but keep in mind that some of the colors needed here may not be defined in the theme."]}),Ie(Grid,{id:"themeSelectorContainer",className:"verticalCenterContent",columns:[120,"auto",64],rowGap:10,children:[Ie(GridCell,{children:Ie(Label,{children:"Theme"})}),Ie(GridCell,{orientation:Di.LeftToRight,crossAlignment:ki.Center,children:Ie(Dropdown,{ref:this.themeDropdownRef,className:"themeSelector",selection:this.themeManager.activeTheme,onSelect:this.handleThemeSwitch,children:i})}),this.renderThemeActionsCell(),this.renderColorPad(),Ie(GridCell,{}),Ie(GridCell,{columnSpan:3,children:Ie(Checkbox,{caption:"Show theme colors not used in the application",id:"showUnusedColors",checkState:e?Do.Checked:Do.Unchecked,onChange:e=>{this.setState({showUnusedColors:e===Do.Checked})}})})]}),Ie(ns,{showUnusedColors:e,onThemeChange:()=>{this.props.onThemeChange()}})]})}renderThemeActionsCell(){const e="Default Dark"===this.themeManager.activeTheme||"Default Light"===this.themeManager.activeTheme;return Ie(GridCell,{id:"themeActions",children:Ie(Grid,{columns:2,rowGap:2,columnGap:2,children:[Ie(GridCell,{children:Ie(Button,{id:"button1","data-tooltip":"Import Visual Studio Code theme file",onClick:this.importTheme,children:Ie(xi,{src:"/assets/import-a4511062.svg","data-tooltip":"inherit"})})}),Ie(GridCell,{children:Ie(Button,{id:"button2","data-tooltip":"Export current theme as Visual Studio Code theme file",onClick:this.exportCurrentTheme,children:Ie(xi,{src:"/assets/export-dd406c03.svg","data-tooltip":"inherit"})})}),Ie(GridCell,{children:[Ie(ValueEditDialog,{ref:this.themeNameDialogRef,onValidate:this.validateThemeName,onClose:this.executeThemeDuplication}),Ie(Button,{id:"button3","data-tooltip":"Duplicate current theme",onClick:this.handleThemeDuplication,children:Ie(xi,{src:Qo,"data-tooltip":"inherit"})})]}),Ie(GridCell,{children:Ie(Button,{id:"button4","data-tooltip":"Delete current theme",onClick:this.removeCurrentTheme,disabled:e,children:Ie(xi,{src:Yo,"data-tooltip":"inherit"})})})]})})}renderColorPad(){const e=this.colorPadColors.map(((e,t)=>Ie(ColorField,{id:t.toString(),initialColor:e.length>0?new ye(e):void 0,onChange:this.handleColorPadChange},`field${t}`)));return Ie(Re,{children:[Ie(GridCell,{children:Ie(Label,{children:"Color Pad"})}),Ie(GridCell,{id:"colorPadCell",orientation:Di.LeftToRight,children:e})]})}initializeColorPad(){const e=hi.get("theming.colorPadColors");Array.isArray(e)?this.colorPadColors=e:this.colorPadColors=["#E91E63","#9C27B0","#3F51B5","#2196F3","#009688","#4CAF50","","","","","","","#8BC34A","#CDDC39","#FFC107","#FF9800","#FF5722","#607D8B"]}}class ThemeEditor extends ComponentBase{constructor(){super(...arguments),pe(this,"themeHasChanged",!1),pe(this,"changeTimer"),pe(this,"handleThemeChange",(()=>{this.themeHasChanged=!0,clearTimeout(this.changeTimer),this.changeTimer=setTimeout((()=>{this.themeHasChanged=!1,mi.get.saveTheme()}),1e3)}))}render(){const e={host:this.getEffectiveClassNames(["themeEditorHost"]),editor:this.getEffectiveClassNames(["themeEditor"])};return Ie(Container,{orientation:Di.LeftToRight,className:e.host,children:[Ie(ThemeEditorCore,{onThemeChange:this.handleThemeChange}),Ie(ThemePreview,{})]})}}class SettingsEditorList extends ComponentBase{constructor(e){super(e),pe(this,"gridRef",ke()),pe(this,"lastScrollPos",0),pe(this,"saveTimer"),pe(this,"handleSettingsChanged",(()=>{var e;this.saveTimer&&clearTimeout(this.saveTimer),this.saveTimer=setTimeout((()=>{hi.saveSettings()}),1e3);const t=(null==(e=this.gridRef.current)?void 0:e.getSelectedRows())??[];if(t.length>0){const e=t[0];e.reformat();let n=e.getCells()[0].getElement().getElementsByClassName("settingValue");if(n.length>0){let e=n[0];e.classList.contains("upDown")&&(n=e.getElementsByClassName("input"),e=n[0]),e.focus()}}return Promise.resolve(!0)})),pe(this,"handleVerticalScrolling",(e=>{var t;null==(t=this.gridRef.current)||t.table.then((t=>{const{onListScroll:n}=this.props,i=null==t?void 0:t.getRows();let o;if(null==i||i.forEach((t=>{!o&&t.getElement().offsetTop>e&&(o=t)})),o){const t=e>this.lastScrollPos?"up":"down";this.lastScrollPos=e,n(o.getData().id,t)}}))})),pe(this,"formatSettingsListCell",(e=>{let t,n=!0;if(e.getData().valueType){const i=e.getData();let o,s,r=hi.get(i.id);n=null==r||r===i.defaultValue,n&&(r=i.defaultValue);let a=!0;const l=ke();switch(i.valueType){case"string":o=Ie(Label,{innerRef:l,caption:i.description,className:"settingValueDescription"}),s=Ie(Input,{id:i.id,value:r,className:"settingValue",onChange:this.handleInputChange},i.id);break;case"boolean":{const e=r?Do.Checked:Do.Unchecked;s=Ie(Checkbox,{id:i.id,caption:i.description,checkState:e,className:"settingValue",onChange:this.handleCheckboxChange},i.id);break}case"number":{let e,t;i.parameters.range&&(e=i.parameters.range[0],t=i.parameters.range[1]),o=Ie(Label,{innerRef:l,caption:i.description,className:"settingValueDescription"}),s=Ie(UpDown,{id:i.id,value:r,min:e,max:t,className:"settingValue",onChange:this.handleUpDownChange},i.id);break}case"choice":if(o=Ie(Label,{innerRef:l,caption:i.description,className:"settingValueDescription"}),i.id.endsWith(".currentTheme")){const e=mi.get.installedThemes;e.unshift("Auto"),i.parameters.choices=e.map((e=>{let t="3rd party Theme";return"Auto"===e?t="Pseudo theme to match the current system theme":"Default Dark"!==e&&"Default Light"!==e||(t="Built-in Theme"),[e,e,t]}))}if(i.parameters.choices){let e=!1;const t=i.parameters.choices.map((t=>(t[1]&&t[1].length>0&&(e=!0),Ie(Dropdown.Item,{caption:t[0],id:t[1],description:t[2]},t[1]))));s=Ie(Dropdown,{id:i.id,className:"settingValue",selection:r,showDescription:e,onSelect:this.handleDropDownChange,children:t},i.id)}break;case"action":a=!1,n=!0,o=Ie(Label,{innerRef:l,caption:i.description,className:"settingValueDescription"}),s=Ie(Button,{requestType:i.parameters.action,caption:i.defaultValue,className:"settingValue"},i.id)}t=Ie(Re,{children:[a&&Ie(Label,{caption:i.title,className:"settingValueName"}),o,s]})}else{const n=e.getData();t=Ie(Label,{caption:n.title,className:"settingTitle"})}const i=document.createElement("div");return i.classList.add("settingsListCell"),n||(i.classList.add("nonDefault"),i.title="Modified"),Ue(t,i),i})),pe(this,"handleInputChange",((e,t)=>{hi.set(t.id,t.value)})),pe(this,"handleCheckboxChange",((e,t)=>{hi.set(t.id,e===Do.Checked)})),pe(this,"handleUpDownChange",((e,t)=>{hi.set(t.id,e)})),pe(this,"handleDropDownChange",((e,t)=>{hi.set(t.id,[...e][0])})),this.state={selectedId:"",settingsList:this.collectSettingsValues()}}componentDidMount(){nn.register("settingsChanged",this.handleSettingsChanged)}componentWillUnmount(){nn.unregister("settingsChanged",this.handleSettingsChanged)}componentDidUpdate(e){const t=()=>{var e;null==(e=this.gridRef.current)||e.table.then((e=>{const{selectedId:t}=this.state;if(t.length>0){const n=null==e?void 0:e.getRow(t);n&&(n.scrollTo(),n.select())}}))},{settingsTree:n}=this.props;e.settingsTree!==n?this.setState({selectedId:"",settingsList:this.collectSettingsValues()},(()=>{t()})):setTimeout((()=>{t()}),0)}render(){const{settingsList:e}=this.state,t=[{title:"",field:"title",resizable:!1,variableHeight:!0,formatter:this.formatSettingsListCell}],n={showHeader:!1,selectionType:ii.Single,layout:"fitColumns"};return Ie(TreeGrid,{id:"settingsValueList",ref:this.gridRef,columns:t,tableData:e,options:n,onVerticalScroll:this.handleVerticalScrolling})}scrollToId(e){var t;null==(t=this.gridRef.current)||t.table.then((t=>{null==t||t.scrollToRow(e,"top")}))}collectSettingsValues(){const{settingsTree:e}=this.props,t=[],n=e=>{e.forEach((e=>{t.push(e),e.values.forEach((e=>{""!==e.description&&t.push(e)})),e.children&&n(e.children)}))};return n(e),t}}const is="/assets/module-shell-d3fd661c.svg";class AboutBox extends ComponentBase{constructor(e){super(e),this.state={},Kn.core.backendInformation.then((e=>{this.setState({data:e})})).catch((e=>{nn.execute("showError",["Backend Error",String(e)])}))}render(){var e;const{data:t}=this.state,n=this.getEffectiveClassNames(["aboutBox"]),i=new Map;i.set("Learn More >","http://localhost:3001/#"),i.set("Browse Tutorial >","http://localhost:3001/#"),i.set("Read Docs >","http://localhost:3001/#");const o=[];for(const a of i)o.push(Ie("a",{href:a[1],children:a[0]},a[0]));const s=(null==(e={SOURCE_MAPS:"",WASMER_CACHE_DIR:"/Users/mzinner/.wasmer/cache",TERM_PROGRAM:"vscode",NODE:"/usr/local/bin/node",WASMER_DIR:"/Users/mzinner/.wasmer",INIT_CWD:"/Users/mzinner/git/shell-plugins/gui/frontend",SHELL:"/bin/zsh",TERM:"xterm-256color",TMPDIR:"/var/folders/tt/6ybm2lp556qg3_6gm4r93ndw0000gn/T/",npm_config_global_prefix:"/usr/local",TERM_PROGRAM_VERSION:"1.84.2",NODE_OPTIONS:"--max-old-space-size=16000",MallocNanoZone:"0",ORIGINAL_XDG_CURRENT_DESKTOP:"undefined",COLOR:"1",npm_config_noproxy:"",LC_ALL:"en_US.UTF-8",npm_config_local_prefix:"/Users/mzinner/git/shell-plugins/gui/frontend",USER:"mzinner",GOOGLE_DEFAULT_CLIENT_ID:"550135929089-tnk1us9e9580gbnuo899ucnhen7s35n7.apps.googleusercontent.com",GOOGLE_DEFAULT_CLIENT_SECRET:"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",COMMAND_MODE:"unix2003",npm_config_globalconfig:"/usr/local/etc/npmrc",SSH_AUTH_SOCK:"/private/tmp/com.apple.launchd.uzQ1FEBr0D/Listeners",__CF_USER_TEXT_ENCODING:"0x1F5:0x0:0x0",npm_execpath:"/usr/local/lib/node_modules/npm/bin/npm-cli.js",DBUSERNAME:"dba",GOOGLE_API_KEY:"AIzaSyAYrgMCZmdaW73BhOzbMSF02DBVhUE0mCk",PATH:"/Users/mzinner/git/shell-plugins/gui/frontend/node_modules/.bin:/Users/mzinner/git/shell-plugins/gui/node_modules/.bin:/Users/mzinner/git/shell-plugins/node_modules/.bin:/Users/mzinner/git/node_modules/.bin:/Users/mzinner/node_modules/.bin:/Users/node_modules/.bin:/node_modules/.bin:/usr/local/lib/node_modules/npm/node_modules/@npmcli/run-script/lib/node-gyp-bin:/usr/local/bin:/System/Cryptexes/App/usr/bin:/usr/bin:/bin:/usr/sbin:/sbin:/Applications/Little Snitch.app/Contents/Components:/var/run/com.apple.security.cryptexd/codex.system/bootstrap/usr/local/bin:/var/run/com.apple.security.cryptexd/codex.system/bootstrap/usr/bin:/var/run/com.apple.security.cryptexd/codex.system/bootstrap/usr/appleinternal/bin:/Users/mzinner/.wasmer/bin:/opt/homebrew/bin:/Users/mzinner/Library/Python/3.9/bin:/Users/mzinner/.wasmer/globals/wapm_packages/.bin",npm_package_json:"/Users/mzinner/git/shell-plugins/gui/frontend/package.json",__CFBundleIdentifier:"com.microsoft.VSCode",npm_config_init_module:"/Users/mzinner/.npm-init.js",npm_config_userconfig:"/Users/mzinner/.npmrc",PWD:"/Users/mzinner/git/shell-plugins/gui/frontend",npm_command:"run-script",EDITOR:"vi",npm_lifecycle_event:"build",LANG:"en_US.UTF-8",npm_package_name:"mysql-shell-gui",XPC_FLAGS:"0x0",DBPORT:"3306",VSCODE_GIT_ASKPASS_EXTRA_ARGS:"--ms-enable-electron-run-as-node",npm_config_npm_version:"10.1.0",npm_config_node_gyp:"/usr/local/lib/node_modules/npm/node_modules/node-gyp/bin/node-gyp.js",XPC_SERVICE_NAME:"0",npm_package_version:"1.14.2",HOME:"/Users/mzinner",SHLVL:"2",VSCODE_GIT_ASKPASS_MAIN:"/Applications/Visual Studio Code.app/Contents/Resources/app/extensions/git/dist/askpass-main.js",LOGNAME:"mzinner",npm_config_cache:"/Users/mzinner/.npm",npm_lifecycle_script:"bash ./scripts/production-build.sh",LC_CTYPE:"en_US.UTF-8",VSCODE_GIT_IPC_HANDLE:"/var/folders/tt/6ybm2lp556qg3_6gm4r93ndw0000gn/T/vscode-git-d5ee20e761.sock",npm_config_user_agent:"npm/10.1.0 node/v20.9.0 darwin arm64 workspaces/false",GIT_ASKPASS:"/Applications/Visual Studio Code.app/Contents/Resources/app/extensions/git/dist/askpass.sh",VSCODE_GIT_ASKPASS_NODE:"/Applications/Visual Studio Code.app/Contents/Frameworks/Code Helper (Plugin).app/Contents/MacOS/Code Helper (Plugin)",DBPASSWORD:"rootroot",COLORTERM:"truecolor",npm_config_prefix:"/usr/local",npm_node_execpath:"/usr/local/bin/node",_:"node_modules/.bin/vite",NODE_ENV:"production"}.versionNumber)?void 0:e.split("."))??[];0===s.length&&s.push("1","0","0"),1===s.length&&s.push("0");const r=[];return t&&r.push(Ie(GridCell,{className:"heading",columnSpan:2,orientation:Di.TopDown,children:Ie(Label,{caption:"Shell Build Information"})},"cell5"),Ie(GridCell,{columnSpan:2,orientation:Di.TopDown,crossAlignment:ki.Center,children:Ie(Divider,{})},"cell6"),Ie(GridCell,{className:"left",children:"Version:"},"cell7"),Ie(GridCell,{className:"right",children:`${t.major}.${t.minor}.${t.patch}`},"cell8"),Ie(GridCell,{className:"left",children:"Architecture:"},"cell9"),Ie(GridCell,{className:"right",children:t.architecture},"cell10"),Ie(GridCell,{className:"left",children:"Platform:"},"cell11"),Ie(GridCell,{className:"right",children:t.platform},"cell12"),Ie(GridCell,{className:"left",children:"Server Distribution:"},"cell13"),Ie(GridCell,{className:"right",children:t.serverDistribution},"cell14"),Ie(GridCell,{className:"left",children:"Server Version:"},"cell15"),Ie(GridCell,{className:"right",children:`${t.serverMajor}.${t.serverMinor}.${t.serverPatch}`},"cell16"),Ie(GridCell,{className:"heading",columnSpan:2,orientation:Di.TopDown,children:Ie(Label,{caption:"Frontend Information"})},"cell1"),Ie(GridCell,{columnSpan:2,orientation:Di.TopDown,crossAlignment:ki.Center,children:Ie(Divider,{})},"cell2"),Ie(GridCell,{className:"left",children:"Version:"},"cell3"),Ie(GridCell,{className:"right",children:`${s.join(".")} (${{SOURCE_MAPS:"",WASMER_CACHE_DIR:"/Users/mzinner/.wasmer/cache",TERM_PROGRAM:"vscode",NODE:"/usr/local/bin/node",WASMER_DIR:"/Users/mzinner/.wasmer",INIT_CWD:"/Users/mzinner/git/shell-plugins/gui/frontend",SHELL:"/bin/zsh",TERM:"xterm-256color",TMPDIR:"/var/folders/tt/6ybm2lp556qg3_6gm4r93ndw0000gn/T/",npm_config_global_prefix:"/usr/local",TERM_PROGRAM_VERSION:"1.84.2",NODE_OPTIONS:"--max-old-space-size=16000",MallocNanoZone:"0",ORIGINAL_XDG_CURRENT_DESKTOP:"undefined",COLOR:"1",npm_config_noproxy:"",LC_ALL:"en_US.UTF-8",npm_config_local_prefix:"/Users/mzinner/git/shell-plugins/gui/frontend",USER:"mzinner",GOOGLE_DEFAULT_CLIENT_ID:"550135929089-tnk1us9e9580gbnuo899ucnhen7s35n7.apps.googleusercontent.com",GOOGLE_DEFAULT_CLIENT_SECRET:"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",COMMAND_MODE:"unix2003",npm_config_globalconfig:"/usr/local/etc/npmrc",SSH_AUTH_SOCK:"/private/tmp/com.apple.launchd.uzQ1FEBr0D/Listeners",__CF_USER_TEXT_ENCODING:"0x1F5:0x0:0x0",npm_execpath:"/usr/local/lib/node_modules/npm/bin/npm-cli.js",DBUSERNAME:"dba",GOOGLE_API_KEY:"AIzaSyAYrgMCZmdaW73BhOzbMSF02DBVhUE0mCk",PATH:"/Users/mzinner/git/shell-plugins/gui/frontend/node_modules/.bin:/Users/mzinner/git/shell-plugins/gui/node_modules/.bin:/Users/mzinner/git/shell-plugins/node_modules/.bin:/Users/mzinner/git/node_modules/.bin:/Users/mzinner/node_modules/.bin:/Users/node_modules/.bin:/node_modules/.bin:/usr/local/lib/node_modules/npm/node_modules/@npmcli/run-script/lib/node-gyp-bin:/usr/local/bin:/System/Cryptexes/App/usr/bin:/usr/bin:/bin:/usr/sbin:/sbin:/Applications/Little Snitch.app/Contents/Components:/var/run/com.apple.security.cryptexd/codex.system/bootstrap/usr/local/bin:/var/run/com.apple.security.cryptexd/codex.system/bootstrap/usr/bin:/var/run/com.apple.security.cryptexd/codex.system/bootstrap/usr/appleinternal/bin:/Users/mzinner/.wasmer/bin:/opt/homebrew/bin:/Users/mzinner/Library/Python/3.9/bin:/Users/mzinner/.wasmer/globals/wapm_packages/.bin",npm_package_json:"/Users/mzinner/git/shell-plugins/gui/frontend/package.json",__CFBundleIdentifier:"com.microsoft.VSCode",npm_config_init_module:"/Users/mzinner/.npm-init.js",npm_config_userconfig:"/Users/mzinner/.npmrc",PWD:"/Users/mzinner/git/shell-plugins/gui/frontend",npm_command:"run-script",EDITOR:"vi",npm_lifecycle_event:"build",LANG:"en_US.UTF-8",npm_package_name:"mysql-shell-gui",XPC_FLAGS:"0x0",DBPORT:"3306",VSCODE_GIT_ASKPASS_EXTRA_ARGS:"--ms-enable-electron-run-as-node",npm_config_npm_version:"10.1.0",npm_config_node_gyp:"/usr/local/lib/node_modules/npm/node_modules/node-gyp/bin/node-gyp.js",XPC_SERVICE_NAME:"0",npm_package_version:"1.14.2",HOME:"/Users/mzinner",SHLVL:"2",VSCODE_GIT_ASKPASS_MAIN:"/Applications/Visual Studio Code.app/Contents/Resources/app/extensions/git/dist/askpass-main.js",LOGNAME:"mzinner",npm_config_cache:"/Users/mzinner/.npm",npm_lifecycle_script:"bash ./scripts/production-build.sh",LC_CTYPE:"en_US.UTF-8",VSCODE_GIT_IPC_HANDLE:"/var/folders/tt/6ybm2lp556qg3_6gm4r93ndw0000gn/T/vscode-git-d5ee20e761.sock",npm_config_user_agent:"npm/10.1.0 node/v20.9.0 darwin arm64 workspaces/false",GIT_ASKPASS:"/Applications/Visual Studio Code.app/Contents/Resources/app/extensions/git/dist/askpass.sh",VSCODE_GIT_ASKPASS_NODE:"/Applications/Visual Studio Code.app/Contents/Frameworks/Code Helper (Plugin).app/Contents/MacOS/Code Helper (Plugin)",DBPASSWORD:"rootroot",COLORTERM:"truecolor",npm_config_prefix:"/usr/local",npm_node_execpath:"/usr/local/bin/node",_:"node_modules/.bin/vite",NODE_ENV:"production"}.buildNumber})`},"cell4")),Ie(Container,{className:n,orientation:Di.TopDown,mainAlignment:ki.Center,crossAlignment:ki.Center,children:[Ie(xi,{src:is,id:"sakilaLogo"}),Ie(Container,{id:"heading",orientation:Di.TopDown,children:Ie(Label,{id:"headingLabel",children:"About MySQL Shell"})}),Ie(Container,{id:"aboutBoxLinks",orientation:Di.LeftToRight,mainAlignment:ki.Center,wrap:Ii.Wrap,children:o}),Ie(Grid,{columns:2,rowGap:12,columnGap:12,children:r}),Ie("div",{className:"copyright"})]})}}class SettingsEditor extends ComponentBase{constructor(e){super(e),pe(this,"treeRef",ke()),pe(this,"valueListRef",ke()),pe(this,"scrolling"),pe(this,"filterTimer"),pe(this,"renderSettings",(()=>{const{selectedTreeEntry:e,searchValues:t,filteredTree:n,foundEntries:i,showAdvancedSettings:o}=this.state,s=[{title:"",field:"title",resizable:!1,formatter:this.formatSettingsTreeCell}],r={showHeader:!1,selectionType:ii.Single,treeColumn:"title",expandedLevels:i>-1?[!0,!0]:void 0},a=[e.key];return Ie(Container,{orientation:Di.TopDown,id:"settingsHost",children:[Ie(Container,{id:"optionsHost",orientation:Di.LeftToRight,crossAlignment:ki.Center,children:[Ie(Search,{autoFocus:!0,placeholder:"Search settings",result:i>-1?`${i} Settings Found`:void 0,buttons:{matchChase:!0,clearAll:!0},values:t,onChange:this.handleSearchChange}),Ie(Checkbox,{id:"advancedSettings",caption:"Show Advanced Settings",checkState:o?Do.Checked:Do.Unchecked,onChange:this.handleAdvanceSettingsChange})]}),Ie(Container,{orientation:Di.LeftToRight,id:"settingsTreeHost",children:[Ie(TreeGrid,{id:"settingsTree",ref:this.treeRef,columns:s,tableData:n,selectedIds:a,options:r,tabIndex:0,onRowSelected:this.handleSettingTreeRowSelected}),Ie(SettingsEditorList,{id:"settingsValueList",ref:this.valueListRef,settingsTree:n,onListScroll:this.handleValueListScroll})]})]})})),pe(this,"showThemeEditor",(()=>new Promise((e=>{this.setState({selectedTab:"themeEditor"},(()=>{e(!0)}))})))),pe(this,"handleSelectTab",(e=>{this.setState({selectedTab:e})})),pe(this,"formatSettingsTreeCell",(e=>{const t=e.getData(),n=Ie(Label,{caption:t.title}),i=document.createElement("span");return i.classList.add("settingsTreeCell"),Ue(n,i),i})),pe(this,"handleAdvanceSettingsChange",((e,t)=>{"advancedSettings"===t.id&&(this.filterTimer&&(clearTimeout(this.filterTimer),this.filterTimer=null),this.setState({showAdvancedSettings:e===Do.Checked},(()=>{this.runFilterTimer()})))})),pe(this,"handleSettingTreeRowSelected",(e=>{if(!this.scrolling&&this.valueListRef.current){this.scrolling=!0;try{const t=e.getData();this.valueListRef.current.scrollToId(t.id)}finally{setTimeout((()=>{this.scrolling=!1}),0)}}})),pe(this,"handleValueListScroll",((e,t)=>{var n;if(!this.scrolling&&this.treeRef.current){this.scrolling=!0;const i=e.split(".");i.length>1&&(i.pop(),e=i.join(".")),null==(n=this.treeRef.current)||n.table.then((n=>{var i;null==(i=this.treeRef.current)||i.getSelectedRows().forEach((n=>{if(!e.startsWith(n.getData().id)){let e=n;for(;e;)e.treeCollapse(),e=e.getTreeParent()}if(n.deselect(),"down"===t){const e=n.getPrevRow();e&&e.treeExpand()}}));const o=((null==n?void 0:n.getRows("visible"))??[]).find((t=>t.getData().id===e));o&&("up"===t&&o.treeExpand(),o.scrollTo(),o.select()),this.scrolling=!1}))}})),pe(this,"handleSearchChange",((e,t,n)=>{this.filterTimer&&(clearTimeout(this.filterTimer),this.filterTimer=null),this.setState({searchValues:n},(()=>{this.runFilterTimer()}))})),pe(this,"generateSearchFilter",(e=>{let t;if((e.value??"").length>0)if(e.useRegExp)t=new RegExp(e.value??"",e.matchCase?void 0:"i");else{let n=`${e.value??""}`;e.matchWholeWord&&(n=`\\b${n}\\b`),t=new RegExp(n,e.matchCase?void 0:"i")}return t}));const t=ai.children,[,n]=this.filterSettingsTree(t,!1);this.state={selectedTab:e.page,settingsTree:t,filteredTree:n,selectedTreeEntry:t[0],searchValues:{value:""},foundEntries:-1,showAdvancedSettings:!1}}componentDidMount(){nn.register("showThemeEditor",this.showThemeEditor)}componentWillUnmount(){this.filterTimer&&clearTimeout(this.filterTimer),nn.unregister("showThemeEditor",this.showThemeEditor)}componentDidUpdate(e){const{page:t}=this.props;e.page!==t&&this.setState({selectedTab:t})}render(){const{selectedTab:e}=this.state,t=this.getEffectiveClassNames(["settingsEditor"]),n=[{icon:Xt,caption:"Settings",id:"settings",content:this.renderSettings()},{icon:Xt,caption:"Theme Editor",id:"themeEditor",content:Ie(ThemeEditor,{})},{icon:Xt,caption:"About",id:"about",content:Ie(AboutBox,{})}];return Ie(Tabview,{className:t,pages:n,selectedId:e,onSelectTab:this.handleSelectTab,stretchTabs:!1})}filterSettingsTree(e,t,n){let i=-1;const o=[];i=0;const s=e=>{var o,r;const a={...e,values:[],children:[]};if(null==(o=e.children)||o.forEach((e=>{var t;const n=s(e);n&&(null==(t=a.children)||t.push(n))})),0===(null==(r=a.children)?void 0:r.length)&&(a.children=void 0),e.values.forEach((e=>{e.advanced&&!t||(!n||e.title.match(n)||e.description.match(n))&&(++i,a.values.push(e))})),a.values.length>0||a.children)return a};return e.forEach((e=>{const t=s(e);t&&o.push(t)})),[i,o]}runFilterTimer(){this.filterTimer=setTimeout((()=>{const{settingsTree:e,searchValues:t,showAdvancedSettings:n}=this.state,i=this.generateSearchFilter(t),[o,s]=this.filterSettingsTree(e,n,i);this.setState({foundEntries:i?o:-1,filteredTree:s})}),200)}}class ConfirmDialog extends ComponentBase{constructor(e){super(e),pe(this,"dialogRef",ke()),pe(this,"show",((e,t,n,i,o)=>{this.setState({title:n,message:e,buttons:t,values:o,description:i},(()=>{var e;return null==(e=this.dialogRef.current)?void 0:e.open({closeOnEscape:!0})}))})),pe(this,"handleActionClick",((e,t)=>{var n;const{onClose:i}=this.props,{values:o}=this.state;let s;switch(t.id){case"accept":s=$i.Accept;break;case"alternative":s=$i.Alternative;break;default:s=$i.Decline}null==(n=this.dialogRef.current)||n.close(!1),null==i||i(s,o)})),pe(this,"handleClose",(e=>{if(e){const{onClose:e}=this.mergedProps,{values:t}=this.state;null==e||e($i.Cancel,t)}})),this.state={message:"",buttons:{}},this.addHandledProperties("onClose")}render(){const{title:e,message:t,buttons:n,description:i}=this.state,o=this.getEffectiveClassNames(["confirmDialog"]);let s=null;if(void 0!==t.key)s=t;else{const e=[];null==i||i.forEach(((t,n)=>{e.push(Ie(Label,{id:`caption${n}`,language:"text",caption:t}))})),s=Ie(Container,{orientation:Di.TopDown,children:[t&&Ie(Label,{id:"dialogMessage",caption:t}),Ie(Container,{orientation:Di.TopDown,className:"description",children:e})]})}const r=[];return n.alternative&&r.push(Ie(Button,{caption:n.alternative.replace(/&/g,""),id:"alternative",isDefault:n.alternative===n.default,onClick:this.handleActionClick},"alternative")),n.accept&&r.push(Ie(Button,{caption:n.accept.replace(/&/g,""),id:"accept",isDefault:n.accept===n.default,onClick:this.handleActionClick},"accept")),n.refuse&&r.push(Ie(Button,{caption:n.refuse.replace(/&/g,""),id:"refuse",isDefault:n.refuse===n.default,onClick:this.handleActionClick},"refuse")),Ie(Dialog,{ref:this.dialogRef,className:o,caption:Ie(Re,{children:[Ie(xi,{src:Ti.Question}),Ie(Label,{children:e??"Confirm"})]}),content:s,actions:{end:r},onClose:this.handleClose})}}class PasswordDialog extends ComponentBase{constructor(e){super(e),pe(this,"dialogRef",ke()),pe(this,"handlePasswordChange",((e,t)=>{this.setState({password:t.value})})),pe(this,"handlePasswordConfirm",(()=>{var e;null==(e=this.dialogRef.current)||e.close(!1)})),pe(this,"requestPassword",(e=>new Promise((t=>{this.setState({request:e,password:""},(()=>{var e;null==(e=this.dialogRef.current)||e.open(),t(!0)}))})))),pe(this,"handleButtonClick",((e,t)=>{var n;null==(n=this.dialogRef.current)||n.close("ok"!==t.id)})),pe(this,"closeDialog",(e=>{const{request:t,password:n}=this.state;t&&(e?nn.execute("cancelPassword",t):nn.execute("acceptPassword",{request:t,password:n}))})),this.state={password:""}}componentDidMount(){nn.register("requestPassword",this.requestPassword)}componentWillUnmount(){nn.unregister("requestPassword",this.requestPassword)}render(){var e;const{request:t,password:n}=this.state;if(!t)return null;const i=this.getEffectiveClassNames(["passwordDialog"]),o=t.caption??"Enter Password",s=[];return null==(e=t.description)||e.forEach((e=>{s.push(Ie(GridCell,{columnSpan:2,crossAlignment:ki.Start,children:Ie(Label,{id:"caption",language:"ansi",caption:e})}))})),Ie(Dialog,{ref:this.dialogRef,className:i,onClose:this.closeDialog,caption:Ie(Re,{children:[Ie(xi,{src:Ti.Lock}),Ie(Label,{children:o})]}),content:Ie(Grid,{columns:["30%","auto"],columnGap:8,rowGap:8,children:[s,t.service&&Ie(Re,{children:[Ie(GridCell,{className:"left",crossAlignment:ki.Center,children:"Service:"}),Ie(GridCell,{className:"right",crossAlignment:ki.Center,children:Ie(Label,{language:"ansi",caption:t.service})})]}),t.user&&Ie(Re,{children:[Ie(GridCell,{className:"left",crossAlignment:ki.Center,children:"User Name:"}),Ie(GridCell,{className:"right",crossAlignment:ki.Center,children:Ie(Label,{language:"ansi",caption:t.user})})]}),Ie(GridCell,{className:"left",crossAlignment:ki.Center,children:"Password:"}),Ie(GridCell,{className:"right",crossAlignment:ki.Center,children:Ie(Input,{autoFocus:!0,password:!0,value:n,onChange:this.handlePasswordChange,onConfirm:this.handlePasswordConfirm})})]}),actions:{end:[Ie(Button,{id:"ok",caption:"OK",onClick:this.handleButtonClick},"ok"),Ie(Button,{id:"cancel",caption:"Cancel",onClick:this.handleButtonClick},"cancel")]}})}}class MrsBaseSession{constructor(e,t="/authentication",n=8e3){pe(this,"accessToken"),pe(this,"authApp"),pe(this,"loginState",{}),pe(this,"doFetch",(async(e,t,n,i,o=!0,s)=>{"object"==typeof e&&null!==e?(t=(null==e?void 0:e.errorMsg)??"Failed to fetch data.",n=(null==e?void 0:e.method)??"GET",i=null==e?void 0:e.body,s=null==e?void 0:e.timeout,e=null==e?void 0:e.input):(t=t??"Failed to fetch data.",n=n??"GET");const r=new AbortController,a=setTimeout((()=>{r.abort()}),s??this.defaultTimeout);let l;try{l=await fetch(`${this.serviceUrl??""}${e}`,{method:n,headers:void 0!==this.accessToken?{Authorization:"Bearer "+this.accessToken}:void 0,body:void 0!==i?JSON.stringify(i):void 0,signal:r.signal})}catch(d){throw new Error(`${t}\n\nPlease check if MySQL Router is running and the REST endpoint ${this.serviceUrl??""}${e} does exist.`)}finally{clearTimeout(a)}if(!l.ok&&o){if(401===l.status)throw new Error(`Not authenticated. Please authenticate first before accessing the path ${this.serviceUrl??""}${e}.`);let n;try{n=await l.json()}catch(d){throw new Error(`${l.status}. ${t} (${l.statusText})`)}throw"string"==typeof n.message?new Error(String(n.message)):new Error(`${l.status}. ${t} (${l.statusText})${void 0!==n?"\n\n"+JSON.stringify(n,null,4)+"\n":""}`)}return l})),pe(this,"verifyUserName",(async(e,t)=>{this.authApp=e;const n=this.hex(crypto.getRandomValues(new Uint8Array(10))),i=await(await this.doFetch({input:`${this.authPath}/login?app=${e}`,method:"POST",body:{user:t,nonce:n}})).json();i.salt=new Uint8Array(i.salt),this.loginState={clientFirst:`n=${t},r=${n}`,clientFinal:`r=${i.nonce}`,serverFirst:this.buildServerFirst(i),challenge:i,loginError:void 0}})),pe(this,"verifyPassword",(async e=>{const{challenge:t,clientFirst:n,serverFirst:i,clientFinal:o}=this.loginState;if(void 0===e||""===e||void 0===this.authApp||void 0===n||void 0===i||void 0===t||void 0===o)return{authApp:this.authApp,errorCode:1,errorMessage:"No password given."};{const r=new TextEncoder,a=`${n},${i},${o}`,l=Array.from(await this.calculateClientProof(e,t.salt,t.iterations,r.encode(a)));try{const e=await this.doFetch({input:`${this.authPath}/login?app=${this.authApp}&sessionType=bearer`+(void 0!==t.session?"&session="+t.session:""),method:"POST",body:{clientProof:l,nonce:t.nonce,state:"response"}},void 0,void 0,void 0,!1);if(e.ok){const t=await e.json();return{authApp:this.authApp,jwt:String(t.accessToken)}}return{authApp:this.authApp,errorCode:e.status,errorMessage:401===e.status?"The sign in failed. Please check your username and password.":`The sign in failed. Error code: ${String(e.status)}`}}catch(s){return{authApp:this.authApp,errorCode:2,errorMessage:`The sign in failed. Server Error: ${String(s)}`}}}})),pe(this,"hex",(e=>Array.from(new Uint8Array(e)).map((e=>e.toString(16).padStart(2,"0"))).join(""))),pe(this,"buildServerFirst",(e=>{const t=window.btoa(String.fromCharCode.apply(null,Array.from(e.salt)));return`r=${e.nonce},s=${t},i=${String(e.iterations)}`})),pe(this,"calculatePbkdf2",(async(e,t,n)=>{const i=await crypto.subtle.importKey("raw",e,{name:"PBKDF2"},!1,["deriveKey","deriveBits"]);return new Uint8Array(await crypto.subtle.deriveBits({name:"PBKDF2",hash:"SHA-256",salt:t,iterations:n},i,256))})),pe(this,"calculateSha256",(async e=>new Uint8Array(await crypto.subtle.digest("SHA-256",e)))),pe(this,"calculateHmac",(async(e,t)=>{const n=await window.crypto.subtle.importKey("raw",e,{name:"HMAC",hash:{name:"SHA-256"}},!0,["sign","verify"]),i=await window.crypto.subtle.sign("HMAC",n,t);return new Uint8Array(i)})),pe(this,"calculateXor",((e,t)=>{const n=e.length,i=t.length;let o,s,r;n>i?(o=new Uint8Array(e),s=t,r=i):(o=new Uint8Array(t),s=e,r=n);for(let a=0;a<r;++a)o[a]^=s[a];return o})),pe(this,"calculateClientProof",(async(e,t,n,i)=>{const o=new TextEncoder,s=await this.calculatePbkdf2(o.encode(e),t,n),r=await this.calculateHmac(s,o.encode("Client Key")),a=await this.calculateSha256(r),l=await this.calculateHmac(a,i);return this.calculateXor(l,r)})),this.serviceUrl=e,this.authPath=t,this.defaultTimeout=n;try{this.accessToken=null==mrsLoginResult?void 0:mrsLoginResult.jwt,this.authApp=null==mrsLoginResult?void 0:mrsLoginResult.authApp}catch(i){}}}class MrsBaseService{constructor(e,t="/authentication",n=8e3){pe(this,"session"),pe(this,"getAuthApps",(async()=>{const e=await this.session.doFetch({input:`${this.authPath}/authApps`,timeout:3e3,errorMsg:"Failed to fetch Authentication Apps."});if(e.ok){return await e.json()}{let n=null;try{n=await e.json()}catch(t){}const i=`Failed to fetch Authentication Apps.\n\nPlease ensure MySQL Router is running and the REST endpoint ${String(this.serviceUrl)}${this.authPath}/authApps is accessible. `;throw new Error(i+`(${e.status}:${e.statusText})${void 0!==n?"\n\n"+JSON.stringify(n,null,4)+"\n":""}`)}})),this.serviceUrl=e,this.authPath=t,this.defaultTimeout=n,this.session=new MrsBaseSession(e,t,n)}}class MrsAuthDialog extends ComponentBase{constructor(e){super(e),pe(this,"dialogRef",ke()),pe(this,"loginResult",{}),pe(this,"requestPassword",(e=>new Promise((t=>{this.setState({request:e},(()=>{var e;this.getAuthApps().then((e=>{this.setState({authAppList:e,error:void 0,errorCode:void 0})})).catch((e=>{this.setState({error:String(e)})})),null==(e=this.dialogRef.current)||e.open(),t(!0)}))})))),pe(this,"handleUserNameChange",((e,t)=>{this.setState({userName:t.value,error:void 0})})),pe(this,"handleUserNameConfirm",(()=>{var e;null==(e=document.getElementById("mrsPasswordInput"))||e.focus()})),pe(this,"handlePasswordChange",((e,t)=>{this.setState({password:t.value,error:void 0})})),pe(this,"handlePasswordConfirm",(()=>{this.startAuthentication()})),pe(this,"handleButtonClick",((e,t)=>{var n;"ok"===t.id?this.startAuthentication():null==(n=this.dialogRef.current)||n.close(!0)})),pe(this,"closeDialog",(e=>{const{request:t,password:n}=this.state;t&&(e?nn.execute("cancelMrsAuthentication",t):(void 0===t.payload&&(t.payload={}),t.payload.loginResult=this.loginResult,nn.execute("acceptMrsAuthentication",{request:t,password:n})))})),pe(this,"startAuthentication",(()=>{this.doAuthenticate().then((e=>{var t;e?null==(t=this.dialogRef.current)||t.close(!1):this.setState({error:this.loginResult.errorMessage})})).catch((e=>{this.setState({error:String(e)})}))})),pe(this,"doAuthenticate",(async()=>{const{request:e,userName:t,password:n}=this.state,i=null==e?void 0:e.payload;if(e&&e.service&&i.authApp&&t){const o=new MrsBaseService(e.service);this.setState({authenticating:!0});try{await o.session.verifyUserName(i.authApp,t),this.loginResult=await o.session.verifyPassword(n)}finally{this.setState({authenticating:!1})}e.user=t}else t||(this.loginResult.errorMessage="No user name given.");return void 0===this.loginResult.errorMessage})),pe(this,"getAuthApps",(async()=>{const{request:e}=this.state;if(e&&e.service){const t=new MrsBaseService(e.service,e.payload&&"string"==typeof e.payload.authPath?e.payload.authPath:void 0);let n=await t.getAuthApps();if(0===(null==n?void 0:n.length))throw new Error("No Authentication Apps have been defined for this service. Please add an MRS or MySQL Internal Authentication App to the service first.");if(n=null==n?void 0:n.filter((e=>"0x30000000000000000000000000000000"===e.vendorId||"0x31000000000000000000000000000000"===e.vendorId)),0===(null==n?void 0:n.length))throw new Error("The embedded MRS SDK only supports MRS or MySQL Internal Authentication Apps. Please add a MRS or MySQL Internal Authentication App to the service first.");return n}})),pe(this,"selectAuthApp",(e=>{const{request:t}=this.state;(null==t?void 0:t.payload).authApp=[...e][0],this.setState({request:t})})),this.state={userName:"",password:"",authenticating:!1}}componentDidMount(){nn.register("requestMrsAuthentication",this.requestPassword)}componentWillUnmount(){nn.unregister("requestMrsAuthentication",this.requestPassword)}render(){const{request:e,userName:t,password:n,error:i,authAppList:o,authenticating:s}=this.state;if(!e)return null;const r=this.getEffectiveClassNames(["mrsAuthDialog"]),a=e.payload,l=null==o?void 0:o.map(((e,t)=>Ie(Dropdown.Item,{caption:e.name,id:e.name},t)));return Ie(Dialog,{ref:this.dialogRef,className:r,onClose:this.closeDialog,caption:Ie(Re,{children:[Ie(xi,{src:Ti.Lock}),Ie(Label,{children:"MySQL REST Service Authentication"})]}),content:Ie(Re,{children:[Ie(Grid,{columns:["30%","auto"],columnGap:8,rowGap:8,children:[e.service&&Ie(Re,{children:[Ie(GridCell,{className:"left",crossAlignment:ki.Center,children:"Service:"}),Ie(GridCell,{className:"right",crossAlignment:ki.Center,children:Ie(Label,{language:"ansi",caption:e.service})})]}),a.authApp&&Ie(Re,{children:[Ie(GridCell,{className:"left",crossAlignment:ki.Center,children:"Sign in with:"}),Ie(GridCell,{className:"right",crossAlignment:ki.Center,children:Ie(Dropdown,{id:"authAppDropdown",className:"authApp loginControl",selection:a.authApp,optional:!1,onSelect:this.selectAuthApp,children:[!o&&a.authApp&&Ie(Dropdown.Item,{caption:a.authApp,id:a.authApp},a.authApp),l]},"authAppDropdown")})]}),Ie(GridCell,{className:"left",crossAlignment:ki.Center,children:"User Name:"}),Ie(GridCell,{className:"right",crossAlignment:ki.Center,children:Ie(Input,{autoFocus:""===t,value:t,onChange:this.handleUserNameChange,onConfirm:this.handleUserNameConfirm,className:"loginControl"})}),Ie(GridCell,{className:"left",crossAlignment:ki.Center,children:"Password:"}),Ie(GridCell,{className:"right",crossAlignment:ki.Center,children:Ie(Input,{id:"mrsPasswordInput",autoFocus:""!==t,password:!0,value:n,onChange:this.handlePasswordChange,onConfirm:this.handlePasswordConfirm,className:"loginControl"})})]}),s&&Ie(Re,{children:Ie("div",{className:"authenticatingDiv",children:[Ie(Label,{className:"authenticatingLbl",language:"ansi",caption:"Authenticating ..."}),Ie("div",{className:"authenticatingAnim"})]})}),i&&Ie(Re,{children:Ie("div",{className:"errorDiv",children:Ie(Label,{className:"errorLbl",language:"ansi",caption:i})})})]}),actions:{end:[Ie(Button,{id:"ok",caption:"OK",onClick:this.handleButtonClick,disabled:void 0!==i||""===t||""===n||s},"ok"),Ie(Button,{id:"cancel",caption:"Cancel",onClick:this.handleButtonClick},"cancel")]}})}}class ValueDialogBase extends ComponentBase{render(){return null}}class MdsHWClusterDialog extends ValueDialogBase{constructor(){super(...arguments),pe(this,"dialogRef",ke()),pe(this,"handleCloseDialog",((e,t,n)=>{const{onClose:i}=this.props;if(e===$i.Accept&&n){const n=t.sections.get("mainSection");if(n){const t={};t.clusterSize=n.values.clusterSize.value,t.shapeName=n.values.shapeName.value,i(e,t)}}else i(e)})),pe(this,"validateInput",((e,t)=>{const n={messages:{},requiredContexts:[]};if(e){const e=t.sections.get("mainSection");e&&(e.values.clusterSize.value||(n.messages.name="The cluster size must be specified."))}return n}))}render(){return Ie(ValueEditDialog,{ref:this.dialogRef,id:"mdsHWClusterDialog",onClose:this.handleCloseDialog,onValidate:this.validateInput})}show(e,t){var n,i;const o=null==(n=e.parameters)?void 0:n.shapes;null==(i=this.dialogRef.current)||i.show(this.dialogValues(e,t,o),{title:"MySQL HeatWave Cluster"},{shapes:o})}dialogValues(e,t,n){var i;let o=n.find((t=>{var n;return(null==(n=e.values)?void 0:n.shapeName)===t.name}));n.length>0&&!o&&(o=n[0]);const s={caption:t,values:{clusterSize:{type:"number",caption:"Cluster Size",value:null==(i=e.values)?void 0:i.clusterSize,horizontalSpan:4,options:[Jo.AutoFocus]},shapeName:{type:"choice",caption:"Shape Name",value:null==o?void 0:o.name,choices:n.map((e=>e.name)),horizontalSpan:4}}};return{id:"mainSection",sections:new Map([["mainSection",s]])}}}class MdsHWLoadDataDialog extends ValueDialogBase{constructor(){super(...arguments),pe(this,"dialogRef",ke()),pe(this,"handleCloseDialog",((e,t)=>{const{onClose:n}=this.props;if(e===$i.Accept){const i=t.sections.get("mainSection");if(i){const t={};t.schemas=i.values.schemas.value,t.mode=i.values.mode.value,t.output=i.values.output.value,t.disableUnsupportedColumns=i.values.disableUnsupportedColumns.value,t.optimizeLoadParallelism=i.values.optimizeLoadParallelism.value,t.enableMemoryCheck=i.values.enableMemoryCheck.value,t.sqlMode=i.values.sqlMode.value,t.excludeList=i.values.excludeList.value,n(e,t)}}else n(e)})),pe(this,"validateInput",((e,t)=>{const n={messages:{},requiredContexts:[]};if(e){const e=t.sections.get("mainSection");if(e){e.values.schemas.value.length<1&&(n.messages.schemas="At least one schema needs to be selected.");const t=/^(".*?"\s*,\s*)*$/gm,i=e.values.excludeList.value;""===i||t.test(i+",")||(n.messages.excludeList='The Exclude List needs to contain a list of quoted object names, e.g."mySchema.myTable", "myOtherSchema.myOtherTable"')}}return n}))}render(){return Ie(ValueEditDialog,{ref:this.dialogRef,id:"mdsHWLoadDataDialog",onClose:this.handleCloseDialog,onValidate:this.validateInput})}show(e,t){var n;null==(n=this.dialogRef.current)||n.show(this.dialogValues(e,t),{title:"MySQL HeatWave Cluster"})}dialogValues(e,t){var n,i;const o={caption:t,values:{schemas:{type:"set",caption:"Database Schemas to Load",tagSet:null==(n=e.values)?void 0:n.allSchemas,value:null==(i=e.values)?void 0:i.selectedSchemas,horizontalSpan:8,options:[Jo.AutoFocus]},mode:{type:"choice",caption:"Operational Mode",value:"normal",choices:["normal","dryrun"],horizontalSpan:4},output:{type:"choice",caption:"Output",value:"normal",choices:["normal","compact","silent","help"],horizontalSpan:4},optionsTitle:{type:"description",caption:"Options",horizontalSpan:4,options:[Jo.Grouped]},disableUnsupportedColumns:{type:"boolean",caption:"Disable unsupported columns",value:!0,horizontalSpan:4,options:[Jo.Grouped]},optimizeLoadParallelism:{type:"boolean",caption:"Optimize load parallelism",value:!0,horizontalSpan:4,options:[Jo.Grouped]},enableMemoryCheck:{type:"boolean",caption:"Enable memory check",value:!0,horizontalSpan:4,options:[Jo.Grouped]},sqlMode:{type:"text",caption:"SQL Mode",value:"",horizontalSpan:4,multiLine:!0},excludeList:{type:"text",caption:"Exclude List",value:"",horizontalSpan:8,multiLine:!0}}};return{id:"mainSection",sections:new Map([["mainSection",o]])}}}class MdsEndpointDialog extends ValueDialogBase{constructor(){super(...arguments),pe(this,"dialogRef",ke()),pe(this,"handleCloseDialog",((e,t,n)=>{const{onClose:i}=this.props;if(e===$i.Accept&&n){const n=t.sections.get("mainSection"),o=t.sections.get("featuresSection"),s=t.sections.get("mrsSection");if(n&&o&&s){const t={};t.instanceName=n.values.instanceName.value,t.shapeName=n.values.shapeName.value,t.cpuCount=n.values.cpuCount.value,t.memorySize=n.values.memorySize.value,t.mysqlUserName=n.values.mysqlUserName.value,t.mysqlUserPassword=n.values.mysqlUserPassword.value,t.createDbConnection=n.values.createDbConnection.value,t.publicIp=n.values.publicIp.value,t.domainName=n.values.domainName.value,t.sslCertificate=n.values.sslCertificate.value,t.portForwarding=o.values.portForwarding.value,t.mrs=o.values.mrs.value,t.jwtSecret=s.values.jwtSecret.value,i(e,t)}}else i(e)})),pe(this,"validateInput",((e,t)=>{const n={messages:{},requiredContexts:[]},i=t.sections.get("mainSection"),o=t.sections.get("featuresSection");if(i&&o&&e){i.values.instanceName.value||(n.messages.instanceName="The instance name must be specified.");const e=i.values.cpuCount.value;(e<0||e>512)&&(n.messages.cpuCount="The number of CPUs must be between 1 and 512.");const t=i.values.memorySize.value;(t<0||t>1024)&&(n.messages.memorySize="The memory size must be between 1 and 1024 GB."),i.values.mysqlUserName.value||(n.messages.mysqlUserName="The MySQL user name must be specified."),i.values.mysqlUserPassword.value||(n.messages.mysqlUserPassword="The MySQL password must be specified."),o.values.portForwarding.value||o.values.mrs.value||(n.messages.portForwarding="At least one feature needs to be selected."),i.values.sslCertificate.value&&!o.values.mrs.value&&(n.messages.sslCertificate="The MRS feature needs to be enabled."),i.values.domainName.value.includes(".")||(n.messages.domainName="A valid domain name needs at least one dot."),i.values.domainName.value&&!i.values.publicIp.value&&(n.messages.domainName="A public IP needs to be assigned."),i.values.sslCertificate.value&&!i.values.publicIp.value&&(n.messages.sslCertificate="A public IP needs to be assigned."),i.values.sslCertificate.value&&!i.values.domainName.value&&(n.messages.sslCertificate="A domain name needs to be assigned."),i.values.createDbConnection.value&&!o.values.portForwarding.value&&(n.messages.createDbConnection="The Port Forwarding feature needs to be enabled.")}return n}))}render(){return Ie(ValueEditDialog,{ref:this.dialogRef,id:"mdsEndpointDialog",onClose:this.handleCloseDialog,onValidate:this.validateInput})}show(e,t){var n,i;const o=null==(n=e.parameters)?void 0:n.shapes;null==(i=this.dialogRef.current)||i.show(this.dialogValues(e,o),{title:t},{shapes:o})}dialogValues(e,t){var n,i,o,s,r;let a=t.find((t=>{var n;return(null==(n=e.values)?void 0:n.shapeName)===t}));t.length>0&&!a&&(a=t[0]);const l={caption:"",values:{instanceName:{type:"text",caption:"Compute Instance Name:",description:"The name of the compute instance.",value:null==(n=e.values)?void 0:n.instanceName,horizontalSpan:3,options:[Jo.AutoFocus]},shapeName:{type:"choice",caption:"Compute Shape",description:"The shape of the compute instance to use.",value:a,choices:t,horizontalSpan:3},cpuCount:{type:"number",caption:"OCPUs ",description:"Number of OCPUs.",value:null==(i=e.values)?void 0:i.cpuCount,horizontalSpan:1},memorySize:{type:"number",caption:"Memory",description:"Memory Size (in GB).",value:null==(o=e.values)?void 0:o.memorySize,horizontalSpan:1},mysqlUserName:{type:"text",caption:"MySQL User Name",description:"Used for bootstrapping.",value:null==(s=e.values)?void 0:s.mysqlUserName,horizontalSpan:3},mysqlUserPassword:{type:"text",caption:"MySQL Password",description:"Used for bootstrapping.",value:null==(r=e.values)?void 0:r.mysqlUserPassword,horizontalSpan:2,obfuscated:!0},createDbConnection:{type:"boolean",caption:"MySQL Shell GUI",label:"Create DB Connection",description:"Create a DB Connection using this endpoint.",value:!0,horizontalSpan:3},domainName:{type:"text",caption:"Domain Name",description:"NOTE: The corresponding DNS A record needs to be created manually.",value:"",horizontalSpan:3},publicIp:{type:"boolean",caption:"Public IP",label:"Assign Public IP",description:"Assign a public IP Address.",value:!0,horizontalSpan:2},sslCertificate:{type:"boolean",caption:"SSL Certificate",label:"Create SSL Certificate",description:"Create a SSL certificate for this instance. ",value:!0,horizontalSpan:3}}},d={caption:"Features",groupName:"features",values:{portForwarding:{type:"boolean",caption:"MySQL Port Forwarding",description:"Enable MySQL TCP port forwarding on the public endpoint.",value:!0,horizontalSpan:4,options:[Jo.Grouped]},mrs:{type:"boolean",caption:"MySQL REST Service",description:"Enable the MySQL REST Service and serve MRS REST endpoints.",value:!0,horizontalSpan:4,options:[Jo.Grouped]}}};return{id:"mainSection",sections:new Map([["mainSection",l],["featuresSection",d],["mrsSection",{caption:"MySQL REST Service Settings",groupName:"features",values:{jwtSecret:{type:"text",caption:"MRS JWT Secret:",description:"The same secret needs to be used on all instances.",value:"",horizontalSpan:4}}}]])}}}const os=class _DialogHost extends ComponentBase{constructor(e){if(ge(_DialogHost,$))return ge(_DialogHost,$);super(e),fe(this,K,[]),fe(this,Q,ke()),fe(this,Y,void 0),fe(this,J,ke()),fe(this,X,void 0),fe(this,Z,ke()),fe(this,ee,ke()),fe(this,te,ke()),pe(this,"showDialogNoWait",(e=>{switch(e.type){case Hi.Prompt:if(void 0===ge(this,Y))return be(this,Y,null),this.runPromptDialog(e),Promise.resolve(!0);break;case Hi.Confirm:if(void 0===ge(this,X))return be(this,X,null),this.runConfirmDialog(e),Promise.resolve(!0);break;case Hi.Select:if(void 0===ge(this,Y))return be(this,Y,null),this.runSelectDialog(e),Promise.resolve(!0);break;case Wi.MdsHeatWaveCluster:if(ge(this,K).push(document.activeElement),ge(this,Z).current)return ge(this,Z).current.show(e,e.title??""),Promise.resolve(!0);break;case Wi.MdsHeatWaveLoadData:if(ge(this,K).push(document.activeElement),ge(this,ee).current)return ge(this,ee).current.show(e,e.title??""),Promise.resolve(!0);break;case Wi.MdsEndpoint:if(ge(this,K).push(document.activeElement),ge(this,te).current)return ge(this,te).current.show(e,e.title??""),Promise.resolve(!0)}return Promise.resolve(!1)})),pe(this,"runPromptDialog",(e=>{var t,n;ge(this,K).push(document.activeElement);const i={values:{input:{type:"text",caption:null==(t=e.values)?void 0:t.prompt,value:"",horizontalSpan:8,options:[Jo.AutoFocus]}}};null==(n=ge(this,Q).current)||n.show({id:e.id,sections:new Map([["prompt",i]])},{options:{backgroundOpacity:.5},title:e.title??"Feedback Requested",description:e.description},{id:e.id,...e.data,type:e.type})})),pe(this,"runConfirmDialog",(e=>{var t,n,i,o,s,r,a;ge(this,K).push(document.activeElement),null==(a=ge(this,J).current)||a.show((null==(t=e.parameters)?void 0:t.prompt)??"",{accept:(null==(n=e.parameters)?void 0:n.accept)??"",refuse:(null==(i=e.parameters)?void 0:i.refuse)??"",alternative:null==(o=e.parameters)?void 0:o.alternative,default:null==(s=e.parameters)?void 0:s.default},null==(r=e.parameters)?void 0:r.title,e.description,{id:e.id,...e.data,type:e.type})})),pe(this,"runSelectDialog",(e=>{var t,n,i,o,s;ge(this,K).push(document.activeElement);const r={values:{}};null==(t=e.description)||t.forEach(((e,t)=>{r.values[`description${t}`]={type:"description",value:e,horizontalSpan:8}}));const a=null==(n=e.parameters)?void 0:n.options,l=null==(i=e.parameters)?void 0:i.default;r.values.input={type:"choice",caption:null==(o=e.parameters)?void 0:o.prompt,value:void 0===l?"":a[l-1],horizontalSpan:8,choices:a,options:[Jo.AutoFocus]},null==(s=ge(this,Q).current)||s.show({id:e.id,sections:new Map([["prompt",r]])},{options:{backgroundOpacity:.5},title:e.title??"Feedback Requested"},{id:e.id,...e.data,type:e.type})})),pe(this,"handleConfirmDialogClose",((e,t,n)=>{const i=ge(this,K).pop(),o={id:(null==n?void 0:n.id)??"",type:e,closure:t,data:n};ge(this,X)?ge(this,X).notifyAll(o):nn.execute("dialogResponse",o),be(this,X,void 0),(i instanceof HTMLTextAreaElement||i instanceof HTMLInputElement)&&i.focus()})),pe(this,"handlePromptDialogClose",((e,t,n)=>{var i;const o=(null==n?void 0:n.type)??Hi.Prompt,s=ge(this,K).pop(),r=t.sections.get("prompt");if(r){const t=r.values.input;let s=r.values.input.value;if(o===Hi.Select){const e=(null==(i=t.choices)?void 0:i.findIndex((e=>e===s)))??-1;e>-1&&(s=String(e+1))}const a={type:null==n?void 0:n.type,id:(null==n?void 0:n.id)??"",closure:e,values:{input:t.value},data:n};ge(this,Y)?ge(this,Y).notifyAll(a):nn.execute("dialogResponse",a),be(this,Y,void 0)}(s instanceof HTMLTextAreaElement||s instanceof HTMLInputElement)&&s.focus()})),pe(this,"handleDialogClose",((e,t,n)=>{const i=ge(this,K).pop(),o={id:(null==n?void 0:n.id)??"",type:e,closure:t,data:n};nn.execute("dialogResponse",o),(i instanceof HTMLTextAreaElement||i instanceof HTMLInputElement)&&i.focus()})),be(_DialogHost,$,this),nn.register("showDialog",this.showDialogNoWait)}render(){const e=[Ie(PasswordDialog,{},"passwordDialog"),Ie(MrsAuthDialog,{},"mrsAuthDialog"),Ie(ValueEditDialog,{ref:ge(this,Q),onClose:this.handlePromptDialogClose},"promptDialog"),Ie(ConfirmDialog,{ref:ge(this,J),onClose:this.handleConfirmDialogClose.bind(this,Hi.Confirm)},"confirmDialog")];return be(this,Z,ke()),e.push(Ie(MdsHWClusterDialog,{ref:ge(this,Z),onClose:this.handleDialogClose.bind(this,Wi.MdsHeatWaveCluster)})),be(this,ee,ke()),e.push(Ie(MdsHWLoadDataDialog,{ref:ge(this,ee),onClose:this.handleDialogClose.bind(this,Wi.MdsHeatWaveLoadData)})),be(this,te,ke()),e.push(Ie(MdsEndpointDialog,{ref:ge(this,te),onClose:this.handleDialogClose.bind(this,Wi.MdsEndpoint)})),Ie(Re,{children:e})}};$=new WeakMap,K=new WeakMap,Q=new WeakMap,Y=new WeakMap,J=new WeakMap,X=new WeakMap,Z=new WeakMap,ee=new WeakMap,te=new WeakMap,fe(os,$,void 0),pe(os,"showDialog",(async e=>{switch(e.type){case Hi.Prompt:if(void 0!==ge(ge(os,$),Y))throw new Error("Prompt dialog already active.");return be(ge(os,$),Y,new Semaphore),ge(os,$).runPromptDialog(e),ge(ge(os,$),Y).wait();case Hi.Confirm:if(void 0!==ge(ge(os,$),X))throw new Error("Confirm dialog already active.");return be(ge(os,$),X,new Semaphore),ge(os,$).runConfirmDialog(e),ge(ge(os,$),X).wait();case Hi.Select:if(void 0!==ge(ge(os,$),Y))throw new Error("Select dialog already active.");return be(ge(os,$),Y,new Semaphore),ge(os,$).runSelectDialog(e),ge(ge(os,$),Y).wait();default:throw new Error(`Unknown dialog type: ${e.type}`)}}));let ss=os;class CommunicationDebuggerEnvironment{constructor(e){pe(this,"tokens",{}),pe(this,"lastGeneratedId"),pe(this,"lastReceivedModuleSessionId"),pe(this,"lastReceivedResponse"),this.loadedScripts=e}get lastGeneratedRequestId(){return this.lastGeneratedId}set lastGeneratedRequestId(e){this.lastGeneratedId=e}get lastModuleSessionId(){return this.lastReceivedModuleSessionId}get lastResponse(){return this.lastReceivedResponse}set lastResponse(e){this.lastReceivedResponse=e,e.module_session_id&&(this.lastReceivedModuleSessionId=e.module_session_id)}clearState(){this.tokens={},this.lastGeneratedId="",this.lastReceivedModuleSessionId="",this.lastReceivedResponse=void 0}async send(e){let t;try{Hn.get.inDebugCall=!0,t=await this.doSend(e)}finally{Hn.get.inDebugCall=!1}return t}generateRequestId(){return this.lastGeneratedId=an(),this.lastGeneratedId}log(e){const t="string"==typeof e?e:JSON.stringify(e,void 0,4);nn.execute("message",t)}validateResponse(e,t,n){const i=void 0!==n?` (response ${n})`:"";return pn(t,e)?(this.log(`/* Validation successful${i}. */`),!0):(this.log(`/* WARNING: values differ${i}.\nActual:\n${JSON.stringify(e,void 0,4)}\nExpected:\n${JSON.stringify(t,void 0,4)}\n*/`),!1)}validateLastResponse(e,t){return this.validateResponse(this.lastReceivedResponse,e,t)}async sendAndValidate(e,t){if(e)if(t&&0!==t.length){Hn.get.inDebugCall=!0;try{let i=0;this.lastReceivedResponse=void 0;let o=!1;try{const n=await Hn.get.sendRawRequest(e,(e=>{i<t.length&&(o=o||!this.validateResponse(e,t[i],i++))}));i<t.length&&(o=o||!this.validateResponse(n,t[i],i++))}catch(n){o=!0}o?this.log("/* WARNING: At least one validation failed. */"):i<t.length?this.log("/* WARNING: Validation incomplete. Not enough responses came in during the timeout of 3 seconds. */"):this.log("/* All validations succeeded. */")}finally{Hn.get.inDebugCall=!1}}else this.log("/* WARNING: No expectations where given. */");else this.log("/* WARNING: No request data was given. */")}async execute(e){const t=this.loadedScripts.get(e);if(t)try{await mn(`(async () => {${t}})()`)}catch(n){throw new Error(String(n)+" ("+e+")")}else this.log("/* ERROR: Code of "+e+" not found. */")}get ignore(){return{symbol:Symbol("ignore")}}matchRegexp(e){return{symbol:Symbol("regex"),parameters:e}}matchList(e,t=!0){return{symbol:Symbol("list"),parameters:{list:e,full:t}}}async doSend(e){return Hn.get.sendRawRequest(e)}}const rs={tabSize:4,indentSize:4,insertSpaces:!0,defaultEOL:"LF",trimAutoWhitespace:!0};class CommunicationDebugger extends ComponentBase{constructor(e){super(e),pe(this,"environment"),pe(this,"messageOutputRef",ke()),pe(this,"inputRef",ke()),pe(this,"scriptTreeRef",ke()),pe(this,"outputState"),pe(this,"inputState"),pe(this,"scriptContent",new Map),pe(this,"sidebarWidth",250),pe(this,"inputAreaHeight",400),pe(this,"handlePaneResized",(e=>{e.forEach((e=>{"scriptTree"===e.id?this.sidebarWidth=e.currentSize:"inputArea"===e.id&&(this.inputAreaHeight=e.currentSize)}))})),pe(this,"renderInputScriptTab",((e,t,n)=>Ie(Container,{className:"stretch",orientation:Di.TopDown,children:[Ie(Toolbar,{children:[Ie(Button,{id:e.model.id,onClick:this.executeScript,children:[Ie(xi,{src:Ti.SymbolEvent}),Ie(Label,{caption:"Execute Script"})]}),t&&Ie(Button,{id:e.model.id,onClick:this.clearScript,children:[Ie(xi,{src:Ti.ClearAll}),Ie(Label,{caption:"Clear Script"})]}),Ie(Button,{className:"rightAlign",onClick:this.connect,children:[Ie(xi,{src:"/assets/connected-22680bfe.svg","data-tooltip":"inherit"}),Ie(Label,{caption:"Connect"})]}),Ie(Button,{onClick:this.disconnect,children:[Ie(xi,{src:"/assets/disconnected-2d90daf1.svg","data-tooltip":"inherit"}),Ie(Label,{caption:"Disconnect"})]}),Ie(Button,{onClick:this.clearContext,children:[Ie(xi,{src:Ti.Debug,"data-tooltip":"inherit"}),Ie(Label,{caption:"Clear Context"})]})]}),Ie(Go,{ref:this.inputRef,savedState:e,lineDecorationsWidth:10,readonly:n,extraLibs:[{code:"/*\n * Copyright (c) 2021, 2022, Oracle and/or its affiliates.\n *\n * This program is free software; you can redistribute it and/or modify\n * it under the terms of the GNU General Public License, version 2.0,\n * as published by the Free Software Foundation.\n *\n * This program is also distributed with certain software (including\n * but not limited to OpenSSL) that is licensed under separate terms, as\n * designated in a particular file or component or in included license\n * documentation.  The authors of MySQL hereby grant you an additional\n * permission to link the program and your derivative works with the\n * separately licensed software that they have included with MySQL.\n * This program is distributed in the hope that it will be useful,  but\n * WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See\n * the GNU General Public License, version 2.0, for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software Foundation, Inc.,\n * 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA\n */\n\n/* eslint-disable @typescript-eslint/naming-convention */\n\ndeclare interface INativeShellDictionary {\n    [key: string]: string | number | boolean | undefined | INativeShellDictionary[] | INativeShellDictionary;\n}\n\n/** A data record for requests sent to the backend. */\ndeclare interface INativeShellRequest extends INativeShellDictionary {\n    /** A unique ID to identify this request. It's used for all responses. */\n    request_id: string;\n\n    /** The request to be executed. */\n    request: string;\n\n    /** Optional field to carry the command if this is an execution request. */\n    command?: string;\n\n    /** Optional arguments for the command. */\n    args?: INativeShellDictionary;\n}\n\ndeclare interface INativeShellResponse extends INativeShellDictionary {\n    /** A unique ID to identify this request. It's used for all responses. */\n    request_id: string;\n\n    /** Information about the request (success or error, with a short response message). */\n    request_state: {\n        type: string;\n        msg: string;\n    };\n}\n\ndeclare class DebuggerWebSocket {\n    /** Indicates if a connection is currently being established. */\n    public readonly isConnecting: boolean;\n\n    /** Indicates if a connection is currently active. */\n    public readonly isConnected: boolean;\n\n    /**\n     * Returns the last unique ID which was generated by calling `generateRequestId()`.\n     *\n     * @returns The generated id or an empty string if no id was generated since the last execution of the script.\n     */\n    public readonly lastGeneratedRequestId: string;\n\n    /**\n     * A field to store script data in. Variables are not kept alive between script calls, so use this member\n     * for storing temporary data.\n     */\n    public readonly tokens: object;\n\n    /** Returns the module session ID of the last server response that returned such an ID (usually start_session). */\n    public get lastModuleSessionId(): string | undefined;\n\n    /** The full response last received for a given request (if any). */\n    public get lastResponse(): INativeShellResponse | undefined;\n\n    /** The last returned backend error (if any). */\n    public get lastError(): INativeShellResponse | undefined;\n\n    /**\n     * @returns a special value which indicates that the member in an object or array should be ignored\n     * when comparing the owning object/array to another object/array.\n     */\n    public get ignore(): Symbol;\n\n    /** Opens the web socket connection to the backend (ignored if already connected). */\n    public connect(): void;\n\n    /** Closes the web socket connection to the backend (ignored if no connection exists). */\n    public disconnect(): void;\n\n    /** A disconnect call followed by a connect call. */\n    public reconnect(): void;\n\n    /**\n     * Resets all state fields to their initial value (tokens, lastGeneratedRequestId, lastModuleSessionId,\n     * lastResponse, lastError).\n     * This is usually called each time a script is executed in the debugger, but can also be used in the script itself.\n     */\n    public clearState(): void;\n\n    /**\n     * Allows to send a request to the backend.\n     *\n     * @param data A record containing the request details (like what to execute and the request ID).\n     *\n     * @returns A promise with the data of the first response from the server for this request. All further responses\n     *          are ignored.\n     */\n    public send(data: INativeShellRequest): Promise<INativeShellResponse>;\n\n    /**\n     * Generates a new unique identifier (uuid) which can be used to identify requests to the backend.\n     * The value is also stored and can be retrieved with `lastGeneratedRequestId`.\n     */\n    public generateRequestId(): string;\n\n    /** Prints the given value to the output console. Objects are formatted as human readable JSON text. */\n    public log(output: unknown): void;\n\n    /**\n     * Validation (test) function to determine if two responses are equal. The comparison is recursively done on a\n     * field-by-field basis, so that the order of the fields doesn't matter. Additionally, special values are supported\n     * to guide and enhance the comparison process. See the fields/functions: `ignore` and `matchRegexp`.\n     *\n     * The function will send the comparison result to the log as comments.\n     *\n     * @param actual A single response received from the backend.\n     * @param expected A structure describing the expected values in the actual response.\n     * @param responseIndex An optional index which, when given, adds the number to the output.\n     *\n     * @returns True if both values are semantically equal, otherwise false.\n     */\n    public validateResponse(actual: unknown, expected: unknown, responseIndex?: number): boolean;\n\n    /**\n     * Convenience function to validate the last received response. It uses `validateResponse` to do the actual work.\n     *\n     * @param expected A structure describing the expected values in the actual response.\n     * @param responseIndex An optional index which, when given, adds the number to the output.\n     *\n     * @returns True if both values are semantically equal, otherwise false.\n     */\n    public validateLastResponse(expected: unknown, responseIndex?: number): boolean;\n\n    /**\n     * Sends the specified request to the backend and waits for the responses. Fulfills the returned promise when all\n     * responses arrived or a timeout of 3 seconds happened, whatever comes first.\n     *\n     * @param data The request to send.\n     * @param expected A list of responses to compare to. The function will not fulfill the promise until the same\n     *                 number of responses have been received, as there are items in this list. If not enough responses\n     *                 come in during a specific time frame (3 secs currently) the validation will fail.\n     *                 Any extraneous response is ignore, once all items in the expected list have been processed.\n     */\n    public sendAndValidate(data: INativeShellRequest, expected: INativeShellResponse[]): Promise<void>;\n\n    /**\n     * Loads the script at the given path and executes it.\n     *\n     * @param path The path to the script to execute.\n     */\n    public execute(path: string): Promise<void>;\n\n    /**\n     * @returns a special value which indicates that the member in an object or array should be matched against\n     * the given pattern, when comparing the owning object/array to another object/array.\n     *\n     * @param pattern The pattern to match.\n     */\n    public matchRegexp(pattern: string): Symbol;\n}\n\ndeclare const ws: DebuggerWebSocket;\n",path:"debugger"}]})]}))),pe(this,"scriptTreeCellFormatter",(e=>{const t=e.getData();let n;switch(t.type){case 1:n=Ie(xi,{src:Ti.FileCode,width:20,height:20});break;case 0:{const t=e.getRow();n=Ie(xi,{src:t.isTreeExpanded()?Ti.FolderOpened:Ti.Folder,width:20,height:20});break}default:n=""}const i=document.createElement("span");i.className="scriptTreeEntry";const o=Ie(Re,{children:[n,Ie(Label,{caption:t.name})]});return Ue(o,i),i})),pe(this,"handleSectionAction",(()=>{this.loadScripts()})),pe(this,"handleScriptTreeDoubleClick",((e,t)=>{const n=t.getData();if(!n.fullPath)return;const{scriptTabs:i}=this.state,o=n.name;i.find((e=>e.id===o))?this.setState({activeInputTab:o}):this.loadScript(n.fullPath).then((e=>{const t=this.createEditorState(e);i.push({id:o,caption:o,tooltip:n.fullPath,auxillary:Ie(Button,{id:o,className:"closeButton",round:!0,onClick:this.closeScriptTab,children:Ie(xi,{src:wi})}),content:this.renderInputScriptTab(t,!1,!0)}),this.setState({activeInputTab:o,scriptTabs:i})})).catch((e=>{nn.execute("showError",["Internal Error",String(e)])}))})),pe(this,"selectScriptTab",(e=>{this.setState({activeInputTab:e})})),pe(this,"closeScriptTab",((e,t)=>{e.stopPropagation(),e.preventDefault();const{scriptTabs:n,activeInputTab:i}=this.state;let o=n.findIndex((e=>e.id===t.id));if(o>-1){n.splice(o,1);let e=i;i===t.id&&(e="interactiveTab",--o>-1&&(e=n[o].id)),this.setState({scriptTabs:n,activeInputTab:e})}})),pe(this,"clearOutput",(()=>{this.messageOutputRef.current&&this.messageOutputRef.current.clear()})),pe(this,"changeTrace",(e=>{Hn.get.traceEnabled=e===Do.Checked,this.forceUpdate()})),pe(this,"printOutput",((e,t=0)=>{var n;if(this.messageOutputRef.current){const i=this.outputState.model.getLineCount();this.messageOutputRef.current.appendText(e+"\n");let o="",s="";switch(t){case 2:o="debuggerErrorOutput",s="debuggerErrorMargin";break;case 1:o="debuggerCommandOutput",s="debuggerCommandMargin"}if(o.length>0){null==(n=this.messageOutputRef.current.backend.getModel())||n.deltaDecorations([],[{range:{startLineNumber:i,startColumn:1,endLineNumber:this.outputState.model.getLineCount()-2,endColumn:1},options:{isWholeLine:!0,className:o,glyphMarginClassName:s}}])}}})),pe(this,"executeScript",((e,t)=>{const n=Gt.getModels().find((e=>e.id===t.id));if(n){window.ws=this.environment;const t=n.getValue();this.loadReferencedScripts(t,new Set).then((()=>{this.printOutput(t+"\n",1);try{mn("(async () => {"+t+"})()")}catch(n){n.message?this.printOutput(`/* ERROR: ${n.message} */\n`,2):this.printOutput(`/* ERROR: ${JSON.stringify(e,void 0,4)} */\n`,2)}finally{window.ws=void 0}}))}})),pe(this,"loadReferencedScripts",(async(e,t)=>{const n=e.matchAll(/ws\.execute\("(.+)"\)/g);for(const i of n)if(!t.has(i[1])){t.add(i[1]);const e=await this.loadScript(i[1]);await this.loadReferencedScripts(e,t)}})),pe(this,"clearScript",(()=>{this.inputRef.current&&this.inputRef.current.clear()})),pe(this,"connect",(()=>{Hn.get.isConnected?this.printOutput("/* ERROR: You are already connected */\n\n",2):Hn.get.connect({url:new URL(window.location.href)})})),pe(this,"disconnect",(()=>{Hn.get.isConnected?Hn.get.disconnect():this.printOutput("/* ERROR: There's no connection open */\n\n",2)})),pe(this,"clearContext",(()=>{})),pe(this,"connectionStateChanged",(e=>(e?this.printOutput("ws.isConnected = true;\n"):this.printOutput("ws.isConnected = false;\n"),Promise.resolve(!1)))),pe(this,"webSessionStarted",(()=>(this.loadScripts(),Promise.resolve(!1)))),pe(this,"handleTraceEvent",(e=>{if(e.request&&this.printOutput(`ws.send(${JSON.stringify(e.request,void 0,4)});\n`,1),e.response){this.environment.lastResponse=e.response;const t="ERROR"===e.response.request_state.type?2:0;this.printOutput(`ws.lastResponse = ${JSON.stringify(e.response,void 0,4)};`,t)}return Promise.resolve(!0)})),pe(this,"logMessage",(e=>(this.printOutput(e+"\n"),Promise.resolve(!0)))),this.state={activeInputTab:"interactiveTab",scriptTabs:[]},Hn.get.traceEnabled=!1,nn.register("socketStateChanged",this.connectionStateChanged),nn.register("webSessionStarted",this.webSessionStarted),nn.register("debugger",this.handleTraceEvent),nn.register("message",this.logMessage),this.outputState=this.createEditorState(""),this.inputState=this.createEditorState(""),this.environment=new CommunicationDebuggerEnvironment(this.scriptContent)}componentDidMount(){Hn.get.isConnected&&this.loadScripts()}render(){const e=this.getEffectiveClassNames(["debugger"]),t={treeColumn:"name",selectionType:ii.Single,showHeader:!1,layout:"fitColumns",expandedLevels:[!0,!1,!0]},n=Ie(TreeGrid,{className:"scriptTree",ref:this.scriptTreeRef,options:t});return Ie(SplitContainer,{className:e,orientation:Di.LeftToRight,panes:[{id:"scriptTree",content:Ie(Accordion,{className:"stretch",sections:[{id:"scriptSection",caption:"SCRIPTS",expanded:!0,stretch:!0,minSize:100,content:n,actions:[{icon:Ti.Refresh,tooltip:"Reload the scripts",id:"refreshScriptList"}]}],onSectionAction:this.handleSectionAction}),minSize:200,maxSize:600,initialSize:this.sidebarWidth,snap:!0,resizable:!0,stretch:!1},{id:"outputPane",content:Ie(SplitContainer,{id:"debuggerContent",className:"stretch",orientation:Di.TopDown,panes:[this.outputPane,this.inputPane],onPaneResized:this.handlePaneResized}),minSize:500,snap:!1,resizable:!0,stretch:!0}],onPaneResized:this.handlePaneResized})}get outputPane(){const{toggleDisplayMode:e}=this.props;return{id:"messageOutput",content:Ie(Container,{className:"stretch",orientation:Di.TopDown,children:[Ie(Toolbar,{children:[Ie(xi,{src:Ti.ListSelection,"data-tooltip":"Messages from shell backend and validation"}),Ie(Label,{caption:"Message"}),Ie(Divider,{vertical:!0}),Ie(Label,{caption:"Tools:",style:{marginRight:"4px"}}),Ie(Checkbox,{checkState:Hn.get.traceEnabled?Do.Checked:Do.Unchecked,onChange:this.changeTrace,caption:"Enable Trace","data-tooltip":"Enables logging all traffic"}),Ie(Button,{onClick:this.clearOutput,children:[Ie(xi,{src:Ti.ClearAll}),Ie(Label,{caption:"Clear Output"})]}),Ie(Button,{className:"rightAlign",imageOnly:!0,"data-tooltip":"Toggle maximized/embedded mode",onClick:e,children:Ie(xi,{src:Ti.ChromeRestore,"data-tooltip":"inherit"})})]}),Ie(Go,{ref:this.messageOutputRef,savedState:this.outputState,language:"typescript",lineNumbers:"off",lineDecorationsWidth:10})]}),minSize:200,resizable:!0,stretch:!0}}get inputPane(){const{activeInputTab:e,scriptTabs:t}=this.state,n=[{id:"interactiveTab",caption:"INPUT CONSOLE",tooltip:"REPL tab",content:this.renderInputScriptTab(this.inputState,!0,!1)},...t];return{id:"inputArea",content:Ie(Tabview,{pages:n,selectedId:e,stretchTabs:!1,onSelectTab:this.selectScriptTab}),minSize:200,initialSize:this.inputAreaHeight,resizable:!0,stretch:!1}}createEditorState(e){const t={model:Object.assign(Gt.createModel(e,"javascript"),{executionContexts:new ExecutionContexts(void 0,80024,"",""),editorMode:Li.Standard}),viewState:null,options:rs};return t.model.getEndOfLineSequence()!==Gt.EndOfLineSequence.LF?t.model.setEOL(Gt.EndOfLineSequence.LF):t.model.setValue(e),t.model.executionContexts=new ExecutionContexts(void 0,80024,"",""),t.model.editorMode=Li.Standard,t}loadScripts(){Kn.core.getDebuggerScriptNames().then((e=>{var t;const n=[],i=(e,t,n)=>{const o=e.shift();if(o){let s=n.find((e=>e.name===o));if(!s){const i=0===e.length;s={type:i?1:0,id:o,name:o,fullPath:i?t:void 0,children:[]},n.push(s)}e.length>0?i(e,t,s.children):delete s.children}};e.forEach((e=>{const t=e.split("/");t.length>0&&i(t,e,n)})),null==(t=this.scriptTreeRef.current)||t.setColumns([{title:"",field:"name",resizable:!1,hozAlign:"left",cellDblClick:this.handleScriptTreeDoubleClick,formatter:this.scriptTreeCellFormatter}]).then((()=>{var e;null==(e=this.scriptTreeRef.current)||e.setData(n,Ci.Set)}))})).catch((e=>{nn.execute("showError",["Loading Debugger Scripts",String(e.message)])}))}async loadScript(e){const t=this.scriptContent.get(e);if(t)return t;{const t=await Kn.core.getDebuggerScriptContent(e);return this.scriptContent.set(e,t),t}}}class ApplicationHost extends ComponentBase{constructor(e){super(e),pe(this,"lastEmbeddedDebuggerSplitPosition",500),pe(this,"loadedModules",new Map),pe(this,"showAbout",(()=>new Promise((e=>{this.setState({settingsVisible:!0,settingsPage:"about"},(()=>{this.updateActiveHost(),e(!0)}))})))),pe(this,"showPreferences",(()=>new Promise((e=>{this.setState({settingsVisible:!0,settingsPage:"settings"},(()=>{this.updateActiveHost(),e(!0)}))})))),pe(this,"showModule",(e=>new Promise((t=>{0===this.loadedModules.size?t(!1):this.setState({activeModule:e},(()=>{t(!0)}))})))),pe(this,"handleActivityItemClick",((e,t)=>{switch(t.id){case"settings":{const{settingsVisible:e}=this.state;this.setState({debuggerVisible:!1,settingsVisible:!e},(()=>{this.updateActiveHost()}));break}case"debugger":{const{debuggerVisible:e}=this.state;this.setState({debuggerVisible:!e,settingsVisible:!1},(()=>{this.updateActiveHost()}));break}default:{const{activeModule:e,debuggerVisible:n,debuggerMaximized:i}=this.state;this.setState({activeModule:t.id||"",debuggerVisible:n&&!i,settingsVisible:!1},(()=>{this.updateActiveHost()})),t.id&&e===t.id&&nn.execute("moduleToggle",t.id);break}}})),pe(this,"embeddedDebuggerSplitterResize",(e=>{e.forEach((e=>{"appHostPane"===e.id&&(this.lastEmbeddedDebuggerSplitPosition=e.currentSize)}))})),pe(this,"toggleDebuggerDisplayMode",(()=>{const{debuggerMaximized:e}=this.state;this.setState({debuggerMaximized:!e},(()=>{this.updateActiveHost()}))})),this.state={settingsVisible:!1,settingsPage:"settings",debuggerVisible:!1,debuggerMaximized:!0},nn.register("showAbout",this.showAbout),nn.register("showPreferences",this.showPreferences),nn.register("showModule",this.showModule)}componentDidMount(){const e=Jn.enabledModules;e.size>0&&this.setState({activeModule:e.keys().next().value},(()=>{this.updateActiveHost()})),nn.execute("applicationDidStart",void 0),nn.executeRemote("applicationDidStart",void 0)}componentWillUnmount(){nn.unregister("showAbout",this.showAbout),nn.unregister("showPreferences",this.showPreferences),nn.unregister("showModule",this.showModule)}componentDidUpdate(e,t){const{activeModule:n}=this.state;n!==t.activeModule&&this.updateActiveHost()}render(){const{activeModule:e,settingsVisible:t,settingsPage:n,debuggerVisible:i,debuggerMaximized:o}=this.state,s=[],r=[],a=!(t||i&&o);Jn.enabledModules.forEach(((t,n)=>{const i=e===n;s.push(Ie(ActivityBarItem,{id:n,active:a&&i,onClick:this.handleActivityItemClick,image:t.moduleClass.info.icon,expand:!1},n));const o=this.loadedModules.get(n);if(o)r.push(o[0]);else if(i){const e=ke(),i=Ct(t.moduleClass,{innerRef:e,key:n});this.loadedModules.set(n,[i,e]),r.push(i)}})),t&&r.push(Ie(SettingsEditor,{page:n},"settingsEditor"));let l=r,d=!1;return!Qn.localUserMode||tn.embedded||tn.testsRunning&&!tn.launchWithDebugger||(d=!0,l=[Ie(SplitContainer,{id:"appHostSplitter",orientation:Di.TopDown,panes:[{id:"appHostPane",content:r,minSize:o?0:500,initialSize:i?o?0:this.lastEmbeddedDebuggerSplitPosition:void 0,resizable:i&&!o,stretch:!i},d&&{id:"debuggerPane",content:Ie(CommunicationDebugger,{toggleDisplayMode:this.toggleDebuggerDisplayMode}),minSize:i&&!o?200:0,initialSize:i?void 0:0,snap:!0,resizable:i&&!o,stretch:i&&o}],onPaneResized:this.embeddedDebuggerSplitterResize},"appHostSplitter")]),Ie(Container,{className:"applicationHost",children:[!tn.embedded&&Ie(ActivityBar,{id:"mainActivityBar",children:Ie(Re,{children:[s,d&&Ie(ActivityBarItem,{id:"debugger",active:i&&o,image:"/assets/debugger-3155c42e.svg",expand:!0,onClick:this.handleActivityItemClick},"debugger"),Ie(ActivityBarItem,{id:"settings",active:t,image:Xt,expand:!d,onClick:this.handleActivityItemClick},"settings")]})}),l,Ie(ss,{})]})}updateActiveHost(){const{activeModule:e,settingsVisible:t}=this.state;this.loadedModules.forEach(((n,i)=>{n[1].current&&(t||i!==e?n[1].current.classList.remove("active"):n[1].current.classList.add("active"))}))}}const as="/assets/chevron-right-be1b0b8b.svg";class LoginPage extends ComponentBase{constructor(e){super(e),pe(this,"login",(()=>{const{userName:e,password:t}=this.state;Kn.users.authenticate(e,t).then((e=>{this.setState({errorMessage:""}),e&&nn.execute("userAuthenticated",e)})).catch((e=>{e instanceof ResponseError?this.setState({errorMessage:e.message}):this.setState({errorMessage:e})}))})),pe(this,"handleInput",((e,t)=>{"loginUsername"===t.id?this.setState({userName:t.value}):this.setState({password:t.value})})),this.state={userName:"",password:"",errorMessage:""}}render(){const{userName:e,password:t,errorMessage:n}=this.state,i=new Map([["Learn More >","http://localhost:3001/#"],["Browse Tutorial >","http://localhost:3001/#"],["Read Docs >","http://localhost:3001/#"]]),o=[];for(const s of i)o.push(Ie("a",{href:s[1],children:s[0]},s[0]));return Ie(Container,{id:"loginDialog",orientation:Di.TopDown,children:[Ie(xi,{src:is,id:"loginDialogSakilaLogo"}),Ie(Container,{id:"heading",orientation:Di.TopDown,children:[Ie(Label,{id:"headingLabel",children:"MySQL Shell"}),Ie(Label,{id:"headingSubLabel",children:["Welcome to the MySQL Shell GUI.",Ie("br",{}),"Please provide your MySQL Shell GUI credentials to log into the shell interface."]})]}),Ie(Container,{id:"loginDialogLinks",orientation:Di.LeftToRight,mainAlignment:ki.Center,wrap:Ii.Wrap,children:o}),Ie(Grid,{id:"loginDialogControls",columns:[220,40],columnGap:8,children:[Ie(GridCell,{orientation:Di.TopDown,children:Ie(Input,{id:"loginUsername",placeholder:"Username",spellCheck:!1,value:e,onChange:this.handleInput,onConfirm:this.login})}),Ie(GridCell,{}),Ie(GridCell,{orientation:Di.TopDown,children:Ie(Input,{password:!0,id:"loginPassword",placeholder:"Password",value:t,onChange:this.handleInput,onConfirm:this.login})}),Ie(GridCell,{orientation:Di.TopDown,mainAlignment:ki.Center,children:Ie(Button,{id:"loginButton",round:!0,onClick:this.login,children:Ie(xi,{src:as})})})]}),n&&Ie(Message,{type:zi.Error,children:n}),Ie(Label,{id:"loginDialogSubtext",children:["If you do not have an MySQL Shell GUI account yet, please",Ie("br",{}),"ask your administrator to have one created for you."]}),Ie("div",{className:"copyright"})]})}}class ErrorBoundary extends ComponentBase{constructor(e){super(e),this.state={error:"",stack:""}}static getDerivedStateFromError(e){return{error:e.message,stack:e.stack}}componentDidCatch(e,t){}render(){const{children:e}=this.props,{error:t}=this.state;return t.length>0?Ie(Container,{className:"errorBoundary",style:{padding:"30px"},orientation:Di.TopDown,children:[Ie(Label,{className:"heading",children:"An unexpected error occurred:"}),Ie("br",{}),Ie(Message,{type:zi.Error,children:this.state.error}),Ie("br",{}),Ie(Message,{className:"stack",type:zi.Info,children:this.state.stack}),Ie("br",{}),Ie("span",{children:["If you think this is a bug in the application then please file a bug report at  ",Ie("a",{href:"https://bugs.mysql.com",children:"https://bugs.mysql.com"}),"."]})]}):e}}class TooltipProvider extends ComponentBase{constructor(e){super(e),pe(this,"tooltipTimer"),pe(this,"innerRef",ke()),pe(this,"elementMouseOver",(e=>{clearTimeout(this.tooltipTimer);let t,n=e.target;if(!n.classList||!n.classList.contains("tooltip")){for(const i of e.composedPath()){n=i;const e=n.getAttribute("data-tooltip");if(!e)break;if("inherit"!==e){t=e;break}}if(t){const{showDelay:i}=this.mergedProps;this.tooltipTimer=setTimeout((()=>{this.setState({target:n,tooltip:t,mouse:new DOMPoint(e.clientX,e.clientY)})}),i)}else this.setState({target:void 0})}})),pe(this,"handleDocumentKeyUp",(e=>{this.state.target&&e.key===In&&this.setState({target:void 0})})),this.state={mouse:new DOMPoint},this.addHandledProperties("showDelay","style")}componentDidMount(){document.body.addEventListener("mouseover",this.elementMouseOver,!1),document.body.addEventListener("keyup",this.handleDocumentKeyUp)}componentWillUnmount(){clearTimeout(this.tooltipTimer),clearTimeout(this.tooltipTimer),document.body.removeEventListener("keyup",this.handleDocumentKeyUp),document.body.removeEventListener("mouseover",this.elementMouseOver)}componentDidUpdate(){const{tooltip:e,target:t,mouse:n}=this.state;if(this.innerRef.current&&t){let i=0,o=0;if("expand"===e){const e=t.getBoundingClientRect();i=e.left-7,o=e.top-4}else{const{left:e,top:t}=Ro(Zn.BottomLeft,this.innerRef.current,new DOMRect(n.x,n.y,1,1),0,!0);i=e+16,o=t+16}this.innerRef.current.style.transform=`translate(${i}px, ${o}px)`}}render(){const{style:e}=this.mergedProps,{target:t,tooltip:n}=this.state;if(!t)return null;let i=n;const o={...e};if("expand"===n){const e=t.getBoundingClientRect();if(t.scrollWidth<=Math.ceil(e.width)&&t.scrollHeight<=Math.ceil(e.height))return null;i=t.innerHTML;const n=window.getComputedStyle(t);o.font=n.font,o.fontSize=n.fontSize,o.fontWeight=n.fontWeight,o.lineHeight=n.lineHeight}const s=this.getEffectiveClassNames(["tooltip",this.classFromProperty("expand"===n,"expand")]);return wt(Ie(Container,{className:s,style:o,innerRef:this.innerRef,...this.unhandledProperties,children:i}),document.body)}}pe(TooltipProvider,"defaultProps",{showDelay:200});const ls="/assets/edit-2b4787e5.svg",ds="/assets/overviewPage-d9b37193.svg";class List extends ComponentBase{constructor(e){super(e),this.addHandledProperties("template","elements")}render(){const{id:e,template:t,elements:n}=this.props,i=[],o=e??"list";let s=0;n.forEach((e=>{const n=`${o}${s++}`,r=Te(t,{id:n,key:n,data:e});i.push(Ie("li",{children:r},n))}));const r=this.getEffectiveClassNames(["list"]);return Ie("ul",{className:r,...this.unhandledProperties,children:i})}}class ProfileSelector extends ComponentBase{constructor(e){super(e),pe(this,"profileDialogRef",ke()),pe(this,"confirmDialogRef",ke()),pe(this,"actionMenuRef",ke()),pe(this,"profileName",""),pe(this,"deleteList",[]),pe(this,"activeProfiles",[]),pe(this,"defaultProfile"),pe(this,"handleProfileAction",((e,t)=>{switch(e){case"current":Kn.users.getProfile(parseInt(t,10)).then((e=>{e&&Qn.loadProfile(e)}));break;case"edit":this.editProfile();break;case"add":this.addProfile();break;case"delete":this.deleteProfile()}})),pe(this,"profileLoaded",(async()=>(this.defaultProfile=await Kn.users.getDefaultProfile(Qn.userId)??Qn.profile,await this.getProfileList(Qn.userId),this.generatePopupMenuEntries(),this.sendUpdateProfileInfoMsg(),Promise.resolve(!0)))),pe(this,"getProfileList",(async e=>{const t=await Kn.users.listProfiles(e);this.activeProfiles=t.map((t=>({id:t.id,userId:e,name:t.name,description:"",options:{}})))})),pe(this,"generatePopupMenuEntries",(()=>{var e;const t=[];null==(e=this.activeProfiles)||e.forEach(((e,n)=>{let i;e.id===Qn.currentProfileId&&(i=ds),e.id===this.defaultProfile.id&&(i=as);const o=Ie(MenuItem,{id:e.id.toString(),caption:e.name,icon:i,title:e.description},`profile${n}`);t.push(o)})),this.setState({menuItems:t})})),pe(this,"addProfile",(()=>{this.profileDialogRef.current&&this.profileDialogRef.current.show(this.generateEditorConfig(),{contexts:["add"],title:"Add New Profile"},{saveProfile:!0,section:"add"})})),pe(this,"editProfile",(()=>{this.profileDialogRef.current&&this.profileDialogRef.current.show(this.generateEditorConfig(),{contexts:["edit"],title:"Edit Profile"},{saveProfile:!0,section:"edit"})})),pe(this,"deleteProfile",(()=>{this.profileDialogRef.current&&this.profileDialogRef.current.show(this.generateEditorConfig(),{contexts:["delete"],title:"Delete Profile"},{saveProfile:!0,section:"delete"})})),pe(this,"validateProfileValues",((e,t,n)=>{const i={requiredContexts:[],messages:{}},o=n,s=o.section??"add",r=t.sections.get(s).values;switch(s){case"add":{const t=r.copyProfile.value;if(r.definedProfiles.options=t?[]:[Jo.ReadOnly],t&&null==r.definedProfiles.value&&(i.messages.databaseType="Select one of the existing profile"),r.profileName.value){this.activeProfiles.find((e=>e.name===r.profileName.value))&&o.saveProfile&&(i.messages.profileName="A profile with that name exists already")}else e&&(i.messages.profileName="The profile name cannot be empty");break}case"edit":{const t=this.activeProfiles.find((e=>e.name===r.definedProfilesToEdit.value));if(this.profileName!==(null==t?void 0:t.name)&&(this.profileName=(null==t?void 0:t.name)??"",r.profileNewName.value=null==t?void 0:t.name),this.defaultProfile.id===(null==t?void 0:t.id)?(r.setAsDefaultProfile.options=[Jo.ReadOnly],r.setAsDefaultProfile.value=!0):r.setAsDefaultProfile.options=[],r.profileNewName.value){this.activeProfiles.find((e=>e.name===r.profileNewName.value&&e.id!==(null==t?void 0:t.id)))&&o.saveProfile&&(i.messages.profileNewName="A profile with that name exists already")}else e&&(i.messages.profileNewName="The profile name cannot be empty");break}case"delete":{const e=r.profileActivateDeactivate.checkList;null==e||e.forEach((e=>{const t=e.data;String(this.defaultProfile.id)===t.id&&t.checkState===Do.Checked&&(i.messages.profileActivateDeactivate="Default profile cannot be deleted"),String(Qn.currentProfileId)===t.id&&t.checkState===Do.Checked&&(i.messages.profileActivateDeactivate="Active profile cannot be deleted")}));break}}return i})),pe(this,"handleProfileChanges",((e,t,n)=>{if(e===$i.Accept){const e=n;if(e.saveProfile){const n=e.section,i=t.sections.get(n).values;switch(n){case"add":{const e=i.profileName.value;let t;if(i.copyProfile.value){const e=i.definedProfiles.value;t=this.activeProfiles.find((t=>t.name===e))}this.insertProfile(e,t);break}case"edit":{const e=this.activeProfiles.find((e=>e.name===i.definedProfilesToEdit.value)),t=Object.assign({},e);t.name=i.profileNewName.value;const n=i.setAsDefaultProfile.value;this.updateProfile(t,n);break}case"delete":{const e=i.profileActivateDeactivate.checkList;this.deleteList=[],null==e||e.forEach((e=>{const t=e.data;if(1===t.checkState){const e=this.activeProfiles.find((e=>String(e.id)===t.id));e&&this.deleteList.push(e)}})),this.deleteProfileConfirm();break}}}}})),pe(this,"updateProfile",(async(e,t)=>{const n=await Kn.users.updateProfile(e);if(n){const i=this.activeProfiles.findIndex((e=>e.id===n.id));i>-1&&Object.assign(this.activeProfiles[i],e),t&&(await Kn.users.setDefaultProfile(Qn.userId,n.id),this.defaultProfile=this.activeProfiles.find((e=>e.id===n.id))??this.defaultProfile),this.sendUpdateProfileInfoMsg(),this.generatePopupMenuEntries()}})),pe(this,"deleteProfileConfirm",(()=>{const e=Ie(Label,{dataId:"data"}),t=this.deleteList.map((e=>({data:{caption:e.name}}))),n="Are you sure you want to delete the selected profile"+(this.deleteList.length>1?"s":""),i=Ie(Container,{orientation:Di.TopDown,children:[Ie(Label,{caption:n}),Ie(List,{template:e,elements:t})]});this.confirmDialogRef.current&&this.confirmDialogRef.current.show(i,{refuse:"No",accept:"Yes"},"Delete Profile")})),pe(this,"handleProfileDelete",(e=>{e===$i.Accept&&this.doProfileDelete()})),pe(this,"doProfileDelete",(async()=>{for(const e of this.deleteList){await Kn.users.deleteProfile(e);const t=this.activeProfiles.findIndex((t=>t.id===e.id));t>-1&&this.activeProfiles.splice(t,1)}this.sendUpdateProfileInfoMsg(),this.generatePopupMenuEntries()})),pe(this,"insertProfile",((e,t)=>{if(t)Kn.users.getProfile(t.id).then((t=>{if(t){const n={...t,name:e,id:-1};Kn.users.addProfile(n).then((e=>{e&&(n.id=e,this.activeProfiles.push(n),Qn.loadProfile(n))}))}}));else{const t={id:-1,userId:Qn.userId,name:e,description:"",options:Qn.profile.options};Kn.users.addProfile(t).then((e=>{e&&(t.id=e,this.activeProfiles.push(t),this.sendUpdateProfileInfoMsg(),this.generatePopupMenuEntries())}))}})),pe(this,"generateEditorConfig",(()=>{var e,t;const n={caption:"Profile editor",contexts:["add"],values:{profileName:{type:"text",caption:"New profile name:",value:"",placeholder:"<enter a unique profile name>",horizontalSpan:8},copyProfile:{type:"boolean",caption:"Copy values from exiting profile",value:!1,horizontalSpan:8},definedProfiles:{type:"choice",caption:"Existing profiles",value:this.activeProfiles.length>0?this.activeProfiles[0].name:"",choices:this.activeProfiles.map((e=>e.name)),options:[Jo.Disabled],horizontalSpan:8}}},i={caption:"Profile editor",contexts:["edit"],values:{profileNewName:{type:"text",caption:"Profile name:",placeholder:(null==(e=this.activeProfiles.find((e=>e.id===Qn.currentProfileId)))?void 0:e.name)??this.activeProfiles[0].name,horizontalSpan:8},setAsDefaultProfile:{type:"boolean",caption:"default profile",value:(null==(t=this.activeProfiles.find((e=>e.id===Qn.currentProfileId)))?void 0:t.id)===this.defaultProfile.id,horizontalSpan:8}}},o={caption:"Profile editor",contexts:["delete"],values:{profileActivateDeactivate:{type:"checkList",caption:"Select profile from the list to activate or deactivate",checkList:this.activeProfiles.map((e=>({data:{id:e.id.toString(),caption:e.name,checkState:Do.Unchecked}}))),horizontalSpan:8}}};return{id:"newProfileDialog",sections:new Map([["add",n],["edit",i],["delete",o]])}})),pe(this,"sendUpdateProfileInfoMsg",(()=>{var e;if(0===this.activeProfiles.length)return;let t="";t=Qn.currentProfileId<0?this.activeProfiles[0].name:(null==(e=this.activeProfiles.find((e=>e.id===Qn.currentProfileId)))?void 0:e.name)??this.activeProfiles[0].name,nn.execute("updateStatusbar",[{id:"profileTitle",visible:!0},{id:"profileChoice",visible:!0,text:t,choices:this.activeProfiles.map((e=>({label:e.name,data:{...e}})))},{id:"profileManage",visible:!0}])})),pe(this,"handleMenuItemClick",((e,t)=>{if(!t.children||0===St.count(t.children)){const e=parseInt(t.id??"",10),n=isNaN(e)?t.id:"current";return this.handleProfileAction(n||"",t.id||""),!0}return!1})),this.state={menuItems:[]}}componentDidMount(){nn.register("profileLoaded",this.profileLoaded)}open(e){var t,n;null==(n=null==(t=this.actionMenuRef)?void 0:t.current)||n.open(e,!1)}render(){const{menuItems:e}=this.state;return Ie(Re,{children:[Ie(ValueEditDialog,{ref:this.profileDialogRef,id:"profileCreating",onValidate:this.validateProfileValues,onClose:this.handleProfileChanges}),Ie(ConfirmDialog,{ref:this.confirmDialogRef,id:"confirmDeleteDialog",onClose:this.handleProfileDelete}),Ie(Po,{id:"tileActionMenu",ref:this.actionMenuRef,placement:Zn.TopLeft,onItemClick:this.handleMenuItemClick,children:[e,Ie(MenuItem,{id:"-",caption:"-"},"separator1"),Ie(MenuItem,{id:"add",caption:"Add Profile",icon:Qo},"add"),Ie(MenuItem,{id:"edit",caption:"Edit Profile",icon:ls},"edit"),Ie(MenuItem,{id:"delete",caption:"Delete Profile",icon:wi},"delete")]})]})}}const cs="/assets/terminal-c98d157c.svg";class ModuleBase extends Ce{static get info(){return{id:"base-module",caption:"Base Module",icon:""}}render(){return null}setStatePromise(e){return new Promise((t=>{super.setState(e,(()=>{t()}))}))}}const us="/assets/plus-df6bed98.svg",hs="gui.sqleditor",ps="gui.shell";class ShellInterfaceDb{constructor(){pe(this,"moduleSessionLookupId","")}async startSession(e,t){this.moduleSessionLookupId=`dbSession.${e}`;const n=await Hn.get.sendRequest({requestType:Vn.GuiDbStartSession,parameters:{args:{connection:t}}});Qn.setModuleSessionId(this.moduleSessionLookupId,n.result.moduleSessionId)}async closeSession(){this.moduleSessionId&&(await Hn.get.sendRequest({requestType:Vn.GuiDbCloseSession,parameters:{args:{moduleSessionId:this.moduleSessionId}}}),Qn.setModuleSessionId(this.moduleSessionLookupId))}async getCatalogObjects(e,t){if(!this.moduleSessionId)return[];const n=await Hn.get.sendRequest({requestType:Vn.GuiDbGetCatalogObjectNames,parameters:{args:{type:e,filter:t,moduleSessionId:this.moduleSessionId}}}),i=[];return n.forEach((e=>{i.push(...e.result)})),i}async getSchemaObjects(e,t,n,i){if(!this.moduleSessionId)return[];const o=await Hn.get.sendRequest({requestType:Vn.GuiDbGetSchemaObjectNames,parameters:{args:{type:t,filter:i,schemaName:e,routineType:n,moduleSessionId:this.moduleSessionId}}}),s=[];return o.forEach((e=>{s.push(...e.result)})),s}async getTableObjects(e,t,n,i){if(!this.moduleSessionId)return[];const o=await Hn.get.sendRequest({requestType:Vn.GuiDbGetTableObjectNames,parameters:{args:{type:n,filter:i,schemaName:e,tableName:t,moduleSessionId:this.moduleSessionId}}}),s=[];return o.forEach((e=>{s.push(...e.result)})),s}get moduleSessionId(){return Qn.moduleSessionId(this.moduleSessionLookupId)}}var ms=(e=>(e.MdsGetRegions="mds.get.regions",e.MdsListConfigProfiles="mds.list.config_profiles",e.MdsSetDefaultConfigProfile="mds.set.default_config_profile",e.MdsGetDefaultConfigProfile="mds.get.default_config_profile",e.MdsSetCurrentCompartment="mds.set.current_compartment",e.MdsGetCurrentCompartmentId="mds.get.current_compartment_id",e.MdsSetCurrentBastion="mds.set.current_bastion",e.MdsGetAvailabilityDomain="mds.get.availability_domain",e.MdsListCompartments="mds.list.compartments",e.MdsGetCompartment="mds.get.compartment",e.MdsListComputeInstances="mds.list.compute_instances",e.MdsGetComputeInstance="mds.get.compute_instance",e.MdsListComputeShapes="mds.list.compute_shapes",e.MdsDeleteComputeInstance="mds.delete.compute_instance",e.MdsUtilHeatWaveLoadData="mds.util.heat_wave_load_data",e.MdsUtilCreateEndpoint="mds.util.create_endpoint",e.MdsGetDbSystemConfiguration="mds.get.db_system_configuration",e.MdsListDbSystemShapes="mds.list.db_system_shapes",e.MdsListDbSystems="mds.list.db_systems",e.MdsGetDbSystem="mds.get.db_system",e.MdsGetDbSystemId="mds.get.db_system_id",e.MdsUpdateDbSystem="mds.update.db_system",e.MdsCreateDbSystem="mds.create.db_system",e.MdsDeleteDbSystem="mds.delete.db_system",e.MdsStopDbSystem="mds.stop.db_system",e.MdsStartDbSystem="mds.start.db_system",e.MdsRestartDbSystem="mds.restart.db_system",e.MdsStopHeatWaveCluster="mds.stop.heat_wave_cluster",e.MdsStartHeatWaveCluster="mds.start.heat_wave_cluster",e.MdsRestartHeatWaveCluster="mds.restart.heat_wave_cluster",e.MdsCreateHeatWaveCluster="mds.create.heat_wave_cluster",e.MdsUpdateHeatWaveCluster="mds.update.heat_wave_cluster",e.MdsDeleteHeatWaveCluster="mds.delete.heat_wave_cluster",e.MdsListLoadBalancers="mds.list.load_balancers",e.MdsListBastions="mds.list.bastions",e.MdsGetBastion="mds.get.bastion",e.MdsCreateBastion="mds.create.bastion",e.MdsDeleteBastion="mds.delete.bastion",e.MdsListBastionSessions="mds.list.bastion_sessions",e.MdsGetBastionSession="mds.get.bastion_session",e.MdsCreateBastionSession="mds.create.bastion_session",e.MdsDeleteBastionSession="mds.delete.bastion_session",e))(ms||{});class ShellInterfaceMds{async getMdsConfigProfiles(e){return(await Hn.get.sendRequest({requestType:ms.MdsListConfigProfiles,parameters:{kwargs:{configFilePath:e}}})).result}async setDefaultConfigProfile(e){await Hn.get.sendRequest({requestType:ms.MdsSetDefaultConfigProfile,parameters:{args:{profileName:e}}})}async getMdsCompartments(e,t){return(await Hn.get.sendRequest({requestType:ms.MdsListCompartments,parameters:{kwargs:{configProfile:e,compartmentId:t}}})).result}async getMdsMySQLDbSystems(e,t){return(await Hn.get.sendRequest({requestType:ms.MdsListDbSystems,parameters:{kwargs:{configProfile:e,compartmentId:t}}})).result}async getMdsMySQLDbSystem(e,t){return(await Hn.get.sendRequest({requestType:ms.MdsGetDbSystem,parameters:{kwargs:{configProfile:e,dbSystemId:t}}})).result}async getMdsComputeInstances(e,t){return(await Hn.get.sendRequest({requestType:ms.MdsListComputeInstances,parameters:{kwargs:{configProfile:e,compartmentId:t}}})).result}async getMdsBastions(e,t,n){return(await Hn.get.sendRequest({requestType:ms.MdsListBastions,parameters:{kwargs:{configProfile:e,compartmentId:t,validForDbSystemId:n}}})).result}async getMdsBastion(e,t){return(await Hn.get.sendRequest({requestType:ms.MdsGetBastion,parameters:{kwargs:{configProfile:e,bastionId:t}}})).result}async createBastion(e,t,n){return(await Hn.get.sendRequest({requestType:ms.MdsCreateBastion,parameters:{kwargs:{configProfile:e,dbSystemId:t,awaitActiveState:n}}})).result}async createBastionSession(e,t,n,i,o,s){return(await Hn.get.sendRequest({requestType:ms.MdsCreateBastionSession,parameters:{kwargs:{configProfile:e,targetId:t,sessionType:n,compartmentId:i,awaitCreation:o}},onData:s})).result}async listLoadBalancers(e,t){return(await Hn.get.sendRequest({requestType:ms.MdsListLoadBalancers,parameters:{kwargs:{configProfile:e,compartmentId:t}}})).result}async setCurrentCompartment(e){await Hn.get.sendRequest({requestType:ms.MdsSetCurrentCompartment,parameters:{kwargs:e}})}async setCurrentBastion(e){await Hn.get.sendRequest({requestType:ms.MdsSetCurrentBastion,parameters:{kwargs:e}})}async listDbSystemShapes(e,t,n){return(await Hn.get.sendRequest({requestType:ms.MdsListDbSystemShapes,parameters:{kwargs:{configProfile:t,isSupportedFor:e,compartmentId:n}}})).result}async listComputeShapes(e,t){return(await Hn.get.sendRequest({requestType:ms.MdsListComputeShapes,parameters:{kwargs:{configProfile:e,compartmentId:t}}})).result}}var gs=(e=>(e.MrsInfo="mrs.info",e.MrsVersion="mrs.version",e.MrsLs="mrs.ls",e.MrsConfigure="mrs.configure",e.MrsStatus="mrs.status",e.MrsAddService="mrs.add.service",e.MrsGetService="mrs.get.service",e.MrsListServices="mrs.list.services",e.MrsEnableService="mrs.enable.service",e.MrsDisableService="mrs.disable.service",e.MrsDeleteService="mrs.delete.service",e.MrsSetServiceContextPath="mrs.set.service.context_path",e.MrsSetServiceProtocol="mrs.set.service.protocol",e.MrsSetServiceComments="mrs.set.service.comments",e.MrsSetServiceOptions="mrs.set.service.options",e.MrsUpdateService="mrs.update.service",e.MrsGetServiceRequestPathAvailability="mrs.get.service_request_path_availability",e.MrsGetCurrentServiceMetadata="mrs.get.current_service_metadata",e.MrsSetCurrentService="mrs.set.current_service",e.MrsGetSdkBaseClasses="mrs.get.sdk_base_classes",e.MrsGetSdkServiceClasses="mrs.get.sdk_service_classes",e.MrsDumpSdkServiceFiles="mrs.dump.sdk_service_files",e.MrsGetSdkOptions="mrs.get.sdk_options",e.MrsGetRuntimeManagementCode="mrs.get.runtime_management_code",e.MrsAddSchema="mrs.add.schema",e.MrsGetSchema="mrs.get.schema",e.MrsListSchemas="mrs.list.schemas",e.MrsEnableSchema="mrs.enable.schema",e.MrsDisableSchema="mrs.disable.schema",e.MrsDeleteSchema="mrs.delete.schema",e.MrsSetSchemaName="mrs.set.schema.name",e.MrsSetSchemaRequestPath="mrs.set.schema.request_path",e.MrsSetSchemaRequiresAuth="mrs.set.schema.requires_auth",e.MrsSetSchemaItemsPerPage="mrs.set.schema.items_per_page",e.MrsSetSchemaComments="mrs.set.schema.comments",e.MrsUpdateSchema="mrs.update.schema",e.MrsGetAuthenticationVendors="mrs.get.authentication_vendors",e.MrsAddAuthenticationApp="mrs.add.authentication_app",e.MrsGetAuthenticationApp="mrs.get.authentication_app",e.MrsListAuthenticationApps="mrs.list.authentication_apps",e.MrsDeleteAuthenticationApp="mrs.delete.authentication_app",e.MrsUpdateAuthenticationApp="mrs.update.authentication_app",e.MrsAddDbObject="mrs.add.db_object",e.MrsGetDbObject="mrs.get.db_object",e.MrsListDbObjects="mrs.list.db_objects",e.MrsGetDbObjectParameters="mrs.get.db_object_parameters",e.MrsGetDbFunctionReturnType="mrs.get.db_function_return_type",e.MrsSetDbObjectRequestPath="mrs.set.dbObject.request_path",e.MrsSetDbObjectCrudOperations="mrs.set.dbObject.crud_operations",e.MrsEnableDbObject="mrs.enable.db_object",e.MrsDisableDbObject="mrs.disable.db_object",e.MrsDeleteDbObject="mrs.delete.db_object",e.MrsUpdateDbObject="mrs.update.db_object",e.MrsGetTableColumnsWithReferences="mrs.get.table_columns_with_references",e.MrsGetObjects="mrs.get.objects",e.MrsGetObjectFieldsWithReferences="mrs.get.object_fields_with_references",e.MrsAddContentSet="mrs.add.content_set",e.MrsListContentSets="mrs.list.content_sets",e.MrsGetContentSet="mrs.get.content_set",e.MrsEnableContentSet="mrs.enable.content_set",e.MrsDisableContentSet="mrs.disable.content_set",e.MrsDeleteContentSet="mrs.delete.content_set",e.MrsListContentFiles="mrs.list.content_files",e.MrsDumpService="mrs.dump.service",e.MrsDumpSchema="mrs.dump.schema",e.MrsDumpObject="mrs.dump.object",e.MrsLoadSchema="mrs.load.schema",e.MrsLoadObject="mrs.load.object",e.MrsListUsers="mrs.list.users",e.MrsGetUser="mrs.get.user",e.MrsAddUser="mrs.add.user",e.MrsDeleteUser="mrs.delete.user",e.MrsUpdateUser="mrs.update.user",e.MrsListUserRoles="mrs.list.user_roles",e.MrsAddUserRole="mrs.add.user_role",e.MrsDeleteUserRoles="mrs.delete.user_roles",e.MrsListRoles="mrs.list.roles",e.MrsAddRole="mrs.add.role",e.MrsListRouterIds="mrs.list.router_ids",e.MrsListRouters="mrs.list.routers",e.MrsDeleteRouter="mrs.delete.router",e.MrsRunScript="mrs.run.script",e))(gs||{});class ShellInterfaceMrs{constructor(){pe(this,"moduleSessionLookupId","")}async configure(e,t,n,i){await Hn.get.sendRequest({requestType:gs.MrsConfigure,parameters:{args:{moduleSessionId:this.moduleSessionId,enableMrs:e,updateIfAvailable:n,options:i,allowRecreationOnMajorUpgrade:t}}})}async status(){return(await Hn.get.sendRequest({requestType:gs.MrsStatus,parameters:{args:{moduleSessionId:this.moduleSessionId}}})).result}async listServices(){return(await Hn.get.sendRequest({requestType:gs.MrsListServices,parameters:{kwargs:{moduleSessionId:this.moduleSessionId}}})).result}async addService(e,t,n,i,o,s,r,a,l,d,c){return(await Hn.get.sendRequest({requestType:gs.MrsAddService,parameters:{kwargs:{urlContextRoot:e,urlHostName:n,enabled:o,moduleSessionId:this.moduleSessionId,urlProtocol:t,authPath:r,comments:i,options:s,authCompletedUrl:a,authCompletedUrlValidation:l,authCompletedPageContent:d,authApps:c}}},!0,["options"])).result}async updateService(e,t,n,i){await Hn.get.sendRequest({requestType:gs.MrsUpdateService,parameters:{kwargs:{serviceId:e,urlContextRoot:t,urlHostName:n,value:i,moduleSessionId:this.moduleSessionId}}},!0,["options"])}async deleteService(e){await Hn.get.sendRequest({requestType:gs.MrsDeleteService,parameters:{kwargs:{serviceId:e,urlContextRoot:null,urlHostName:null,moduleSessionId:this.moduleSessionId}}})}async getService(e,t,n,i,o){return(await Hn.get.sendRequest({requestType:gs.MrsGetService,parameters:{kwargs:{serviceId:e,urlContextRoot:t,urlHostName:n,getDefault:i,autoSelectSingle:o,moduleSessionId:this.moduleSessionId}}})).result}async setCurrentService(e){await Hn.get.sendRequest({requestType:gs.MrsSetCurrentService,parameters:{kwargs:{serviceId:e,moduleSessionId:this.moduleSessionId}}})}async getCurrentServiceMetadata(){return(await Hn.get.sendRequest({requestType:gs.MrsGetCurrentServiceMetadata,parameters:{kwargs:{moduleSessionId:this.moduleSessionId}}})).result}async getAuthVendors(){return(await Hn.get.sendRequest({requestType:gs.MrsGetAuthenticationVendors,parameters:{kwargs:{moduleSessionId:this.moduleSessionId}}})).result}async addAuthApp(e,t,n){return(await Hn.get.sendRequest({requestType:gs.MrsAddAuthenticationApp,parameters:{args:{serviceId:e,appName:t.name},kwargs:{authVendorId:t.authVendorId,description:t.description,url:t.url,urlDirectAuth:t.urlDirectAuth,accessToken:t.accessToken,appId:t.appId,limitToRegisteredUsers:t.limitToRegisteredUsers,registeredUsers:n,defaultRoleId:t.defaultRoleId,moduleSessionId:this.moduleSessionId}}})).result}async getAuthApps(e){return(await Hn.get.sendRequest({requestType:gs.MrsListAuthenticationApps,parameters:{args:{serviceId:e},kwargs:{moduleSessionId:this.moduleSessionId}}})).result}async getAuthApp(e){return(await Hn.get.sendRequest({requestType:gs.MrsGetAuthenticationApp,parameters:{args:{appId:e,moduleSessionId:this.moduleSessionId}}})).result}async deleteAuthApp(e){await Hn.get.sendRequest({requestType:gs.MrsDeleteAuthenticationApp,parameters:{kwargs:{appId:e,moduleSessionId:this.moduleSessionId}}})}async updateAuthApp(e,t){await Hn.get.sendRequest({requestType:gs.MrsUpdateAuthenticationApp,parameters:{kwargs:{appId:e,value:t,moduleSessionId:this.moduleSessionId}}})}async listUsers(e,t){return(await Hn.get.sendRequest({requestType:gs.MrsListUsers,parameters:{kwargs:{serviceId:e,authAppId:t,moduleSessionId:this.moduleSessionId}}})).result}async deleteUser(e){await Hn.get.sendRequest({requestType:gs.MrsDeleteUser,parameters:{args:{userId:e,moduleSessionId:this.moduleSessionId}}})}async addUser(e,t,n,i,o,s,r,a,l){await Hn.get.sendRequest({requestType:gs.MrsAddUser,parameters:{kwargs:{authAppId:e,name:t,email:n,vendorUserId:i,loginPermitted:o,mappedUserId:s,appOptions:r,authString:a,userRoles:l,moduleSessionId:this.moduleSessionId}}})}async updateUser(e,t,n){await Hn.get.sendRequest({requestType:gs.MrsUpdateUser,parameters:{kwargs:{userId:e,value:t,userRoles:n,moduleSessionId:this.moduleSessionId}}})}async listSchemas(e){return(await Hn.get.sendRequest({requestType:gs.MrsListSchemas,parameters:{args:{serviceId:e},kwargs:{moduleSessionId:this.moduleSessionId}}})).result}async getSchema(e,t,n,i,o){return(await Hn.get.sendRequest({requestType:gs.MrsGetSchema,parameters:{kwargs:{schemaId:e??null,serviceId:t??null,requestPath:n??null,schemaName:i??null,autoSelectSingle:o??null,moduleSessionId:this.moduleSessionId}}})).result}async deleteSchema(e,t){await Hn.get.sendRequest({requestType:gs.MrsDeleteSchema,parameters:{kwargs:{schemaId:e,serviceId:t,schemaName:null,moduleSessionId:this.moduleSessionId}}})}async addSchema(e,t,n,i,o,s,r){return(await Hn.get.sendRequest({requestType:gs.MrsAddSchema,parameters:{kwargs:{serviceId:e,schemaName:t,requestPath:n,requiresAuth:i,enabled:!0,itemsPerPage:s,comments:r,options:o,moduleSessionId:this.moduleSessionId}}})).result}async updateSchema(e,t,n,i,o,s,r,a,l){await Hn.get.sendRequest({requestType:gs.MrsUpdateSchema,parameters:{kwargs:{moduleSessionId:this.moduleSessionId,schemaId:e,value:{serviceId:t,schemaName:n,requestPath:i,requiresAuth:o,enabled:s,itemsPerPage:r,comments:a,options:l}}}})}async addDbObject(e,t,n,i,o,s,r,a,l,d,c,u,h,p,m,g,f,b,v){return(await Hn.get.sendRequest({requestType:gs.MrsAddDbObject,parameters:{kwargs:{moduleSessionId:this.moduleSessionId,dbObjectName:e,dbObjectType:t,schemaId:p,schemaName:m,autoAddSchema:n,requestPath:i,enabled:o,crudOperations:s,crudOperationFormat:r,requiresAuth:a,itemsPerPage:null===u?void 0:u,rowUserOwnershipEnforced:l,rowUserOwnershipColumn:h,comments:g,mediaType:f,autoDetectMediaType:d,authStoredProcedure:b,options:c,objects:v}}})).result}async updateDbObject(e,t,n,i,o){await Hn.get.sendRequest({requestType:gs.MrsUpdateDbObject,parameters:{kwargs:{moduleSessionId:this.moduleSessionId,dbObjectId:e,schemaId:i,dbObjectName:t,requestPath:n,value:o}}})}async listDbObjects(e){return(await Hn.get.sendRequest({requestType:gs.MrsListDbObjects,parameters:{kwargs:{schemaId:e,moduleSessionId:this.moduleSessionId}}})).result}async deleteDbObject(e){await Hn.get.sendRequest({requestType:gs.MrsDeleteDbObject,parameters:{args:{},kwargs:{dbObjectId:e,moduleSessionId:this.moduleSessionId}}})}async addContentSet(e,t,n,i,o,s,r,a,l){return(await Hn.get.sendRequest({requestType:gs.MrsAddContentSet,parameters:{args:{serviceId:o,contentDir:e},kwargs:{moduleSessionId:this.moduleSessionId,requestPath:t,requiresAuth:n,comments:s,options:i,enabled:r,replaceExisting:a}},onData:e=>{l&&e.result.info&&l(e.result.info)}})).result}async getServiceRequestPathAvailability(e,t){return(await Hn.get.sendRequest({requestType:gs.MrsGetServiceRequestPathAvailability,parameters:{kwargs:{moduleSessionId:this.moduleSessionId,serviceId:e,requestPath:t}}})).result}async listContentSets(e,t){return(await Hn.get.sendRequest({requestType:gs.MrsListContentSets,parameters:{args:{serviceId:e},kwargs:{moduleSessionId:this.moduleSessionId,requestPath:t}}})).result}async listContentFiles(e,t){return(await Hn.get.sendRequest({requestType:gs.MrsListContentFiles,parameters:{args:{contentSetId:e},kwargs:{moduleSessionId:this.moduleSessionId,includeEnableState:t}}})).result}async deleteContentSet(e){await Hn.get.sendRequest({requestType:gs.MrsDeleteContentSet,parameters:{kwargs:{moduleSessionId:this.moduleSessionId,contentSetId:e}}})}get moduleSessionId(){return Qn.moduleSessionId(this.moduleSessionLookupId)}async dumpSchema(e,t,n,i,o){await Hn.get.sendRequest({requestType:gs.MrsDumpSchema,parameters:{args:{path:e},kwargs:{moduleSessionId:this.moduleSessionId,serviceId:t,serviceName:n,schemaId:i,schemaName:o}}})}async dumpObject(e,t,n,i,o,s,r){await Hn.get.sendRequest({requestType:gs.MrsDumpObject,parameters:{args:{path:e},kwargs:{moduleSessionId:this.moduleSessionId,serviceId:t,serviceName:n,schemaId:i,schemaName:o,objectId:s,objectName:r}}})}async loadSchema(e,t,n){await Hn.get.sendRequest({requestType:gs.MrsLoadSchema,parameters:{args:{path:e},kwargs:{moduleSessionId:this.moduleSessionId,serviceId:t,serviceName:n}}})}async loadObject(e,t,n,i,o){await Hn.get.sendRequest({requestType:gs.MrsLoadObject,parameters:{args:{path:e},kwargs:{moduleSessionId:this.moduleSessionId,serviceId:t,serviceName:n,schemaId:i,schemaName:o}}})}async listRoles(e){return(await Hn.get.sendRequest({requestType:gs.MrsListRoles,parameters:{args:{serviceId:e,moduleSessionId:this.moduleSessionId}}})).result}async listUserRoles(e){return(await Hn.get.sendRequest({requestType:gs.MrsListUserRoles,parameters:{args:{userId:e,moduleSessionId:this.moduleSessionId}}})).result}async listRouterIds(e){return(await Hn.get.sendRequest({requestType:gs.MrsListRouterIds,parameters:{args:{seenWithin:e,moduleSessionId:this.moduleSessionId}}})).result}async listRouters(e){return(await Hn.get.sendRequest({requestType:gs.MrsListRouters,parameters:{args:{activeWhenSeenWithin:e,moduleSessionId:this.moduleSessionId}}})).result}async deleteRouter(e){await Hn.get.sendRequest({requestType:gs.MrsDeleteRouter,parameters:{args:{routerId:e,moduleSessionId:this.moduleSessionId}}})}async getSdkBaseClasses(e,t){return(await Hn.get.sendRequest({requestType:gs.MrsGetSdkBaseClasses,parameters:{kwargs:{sdkLanguage:e,prepareForRuntime:t,moduleSessionId:this.moduleSessionId}}})).result}async getSdkServiceClasses(e,t,n,i){return(await Hn.get.sendRequest({requestType:gs.MrsGetSdkServiceClasses,parameters:{kwargs:{serviceId:e,serviceUrl:i,sdkLanguage:t,prepareForRuntime:n,moduleSessionId:this.moduleSessionId}}})).result}async getRuntimeManagementCode(){return(await Hn.get.sendRequest({requestType:gs.MrsGetRuntimeManagementCode,parameters:{kwargs:{moduleSessionId:this.moduleSessionId}}})).result}async dumpSdkServiceFiles(e,t){return(await Hn.get.sendRequest({requestType:gs.MrsDumpSdkServiceFiles,parameters:{kwargs:{directory:e,options:t,moduleSessionId:this.moduleSessionId}}})).result}async getSdkOptions(e){return(await Hn.get.sendRequest({requestType:gs.MrsGetSdkOptions,parameters:{args:{directory:e}}})).result}async getTableColumnsWithReferences(e,t,n,i,o,s){return(await Hn.get.sendRequest({requestType:gs.MrsGetTableColumnsWithReferences,parameters:{args:{dbObjectId:n,schemaId:i,requestPath:e,dbObjectName:t},kwargs:{moduleSessionId:this.moduleSessionId,schemaName:o,dbObjectType:s}}})).result}async getDbObjectParameters(e,t,n,i){return(await Hn.get.sendRequest({requestType:gs.MrsGetDbObjectParameters,parameters:{args:{},kwargs:{dbObjectId:n,dbSchemaName:t,dbObjectName:e,dbType:i,moduleSessionId:this.moduleSessionId}}})).result}async getDbFunctionReturnType(e,t){return(await Hn.get.sendRequest({requestType:gs.MrsGetDbFunctionReturnType,parameters:{args:{dbSchemaName:t,dbObjectName:e},kwargs:{moduleSessionId:this.moduleSessionId}}})).result}async getDbObject(e,t,n,i){return(await Hn.get.sendRequest({requestType:gs.MrsGetDbObject,parameters:{args:{},kwargs:{dbObjectId:e,schemaId:t,schemaName:n,absoluteRequestPath:i,moduleSessionId:this.moduleSessionId}}})).result}async getObjects(e){return(await Hn.get.sendRequest({requestType:gs.MrsGetObjects,parameters:{args:{dbObjectId:e},kwargs:{moduleSessionId:this.moduleSessionId}}})).result}async getObjectFieldsWithReferences(e){return(await Hn.get.sendRequest({requestType:gs.MrsGetObjectFieldsWithReferences,parameters:{args:{objectId:e},kwargs:{moduleSessionId:this.moduleSessionId}}})).result}}class ShellInterfaceSqlEditor extends ShellInterfaceDb{constructor(){super(...arguments),pe(this,"mds",new ShellInterfaceMds),pe(this,"mrs",new ShellInterfaceMrs)}get hasSession(){return void 0!==this.moduleSessionId}async startSession(e){var t;if(this.moduleSessionLookupId=`sqlEditor.${e}`,this.mrs.moduleSessionLookupId=this.moduleSessionLookupId,!this.hasSession){const e=await Hn.get.sendRequest({requestType:Vn.GuiSqleditorStartSession,parameters:{args:{}}});(null==(t=e.result)?void 0:t.moduleSessionId)&&Qn.setModuleSessionId(this.moduleSessionLookupId,e.result.moduleSessionId)}}async closeSession(){const e=this.moduleSessionId;e&&(await Hn.get.sendRequest({requestType:Vn.GuiSqleditorCloseSession,parameters:{args:{moduleSessionId:e}}}),Qn.setModuleSessionId(this.moduleSessionLookupId))}async getGuiModuleDisplayInfo(){await Hn.get.sendRequest({requestType:Vn.GuiSqleditorGetGuiModuleDisplayInfo,parameters:{args:{}}})}async isGuiModuleBackend(){return(await Hn.get.sendRequest({requestType:Vn.GuiSqleditorIsGuiModuleBackend,parameters:{args:{}}})).result}async openConnection(e,t,n){const i=this.moduleSessionId;if(i){return(await Hn.get.sendRequest({requestId:t,requestType:Vn.GuiSqleditorOpenConnection,parameters:{args:{moduleSessionId:i,dbConnectionId:e}},onData:n})).result}}async execute(e,t,n,i){const o=this.moduleSessionId;if(o){const s=await Hn.get.sendRequest({requestType:Vn.GuiSqleditorExecute,requestId:n,parameters:{args:{moduleSessionId:o,sql:e,params:void 0!==t&&t.length>0?t:void 0,options:{rowPacketSize:hi.get("sql.rowPacketSize",1e3)}}},onData:i}),r={};return s.forEach((e=>{e.result.executionTime&&(r.executionTime=e.result.executionTime),e.result.rows&&(r.rows||(r.rows=[]),r.rows.push(...e.result.rows)),e.result.columns&&(r.columns||(r.columns=[]),r.columns.push(...e.result.columns)),e.result.totalRowCount&&(r.totalRowCount=e.result.totalRowCount)})),r}}async reconnect(){const e=this.moduleSessionId;e&&await Hn.get.sendRequest({requestType:Vn.GuiSqleditorReconnect,parameters:{args:{moduleSessionId:e}}})}async killQuery(){const e=this.moduleSessionId;e&&await Hn.get.sendRequest({requestType:Vn.GuiSqleditorKillQuery,parameters:{args:{moduleSessionId:e}}})}async setAutoCommit(e){const t=this.moduleSessionId;t&&await Hn.get.sendRequest({requestType:Vn.GuiSqleditorSetAutoCommit,parameters:{args:{moduleSessionId:t,state:e}}})}async getAutoCommit(){const e=this.moduleSessionId;if(e){return(await Hn.get.sendRequest({requestType:Vn.GuiSqleditorGetAutoCommit,parameters:{args:{moduleSessionId:e}}})).result}}async getCurrentSchema(){const e=this.moduleSessionId;if(e){return(await Hn.get.sendRequest({requestType:Vn.GuiSqleditorGetCurrentSchema,parameters:{args:{moduleSessionId:e}}})).result}}async setCurrentSchema(e){const t=this.moduleSessionId;t&&await Hn.get.sendRequest({requestType:Vn.GuiSqleditorSetCurrentSchema,parameters:{args:{moduleSessionId:t,schemaName:e}}})}async sendReply(e,t,n,i){(i=i??this.moduleSessionId)&&await Hn.get.sendRequest({requestType:qn.PromptReply,parameters:{moduleSessionId:i,requestId:e,type:t,reply:n}},!1)}}class FrontPage extends ComponentBase{constructor(e){super(e),pe(this,"handleCloseClick",(()=>{const{onCloseGreeting:e}=this.props;e()})),pe(this,"handleHelpClick",(e=>{tn.get("module")?(e.stopPropagation(),e.preventDefault()):(e.stopPropagation(),e.preventDefault(),this.openMrsDbObjectDlg())})),pe(this,"openMrsDbObjectDlg",(async()=>{const e=await Kn.dbConnections.listDbConnections(Qn.currentProfileId,"");if(e.length>0){const n=e[0],i=new ShellInterfaceSqlEditor;await i.startSession(String(n.id));try{const e=an();await i.openConnection(n.id,e);const t=await i.mrs.listSchemas();if(t.length>0){const e=await i.mrs.listDbObjects(t[0].id);if((null==e?void 0:e.length)>0){const t={dbObject:e[0],createObject:!1};nn.execute("job",[{requestType:"showModule",parameter:hs},{requestType:"showPage",parameter:{module:hs,page:String(n.id)}},{requestType:"showMrsDbObjectDialog",parameter:t}])}}}catch(t){console.log(t)}finally{await i.closeSession()}}})),this.state={showGreeting:e.showGreeting}}render(){const{showGreeting:e,caption:t,description:n,helpUrls:i,children:o,logo:s}=this.mergedProps,r=this.getEffectiveClassNames(["frontPage",this.classFromProperty(tn.get("module"),"embedded")]),a=[];for(const l of i)a.push(Ie("a",{href:l[1],tabIndex:0,target:"_blank",rel:"noopener noreferrer",onClick:this.handleHelpClick,children:l[0]},l[0]));return Ie(Container,{orientation:Di.TopDown,className:r,children:[e&&Ie(Re,{children:[s,Ie(Label,{id:"title",textAlignment:Ei.Center,children:t}),Ie(Label,{id:"description",textAlignment:Ei.Center,children:n}),Ie(Container,{id:"linksHost",orientation:Di.LeftToRight,mainAlignment:ki.Center,wrap:Ii.Wrap,children:a}),Ie(Button,{round:!0,id:"closeButton","data-tooltip":"Close Greeting",onClick:this.handleCloseClick,children:Ie(xi,{src:wi,"data-tooltip":"inherit"})})]}),Ie(Container,{orientation:Di.TopDown,children:o})]})}}class SessionTile extends BrowserTile{constructor(e){super(e),pe(this,"renderTileActionUI",(()=>Ie(xi,{src:wi,onClick:this.handleActionClick}))),pe(this,"handleActionClick",(e=>{const{onAction:t}=this.mergedProps;e.stopPropagation(),null==t||t("remove",this.mergedProps,{})})),this.addHandledProperties("details")}render(){return super.render()}}pe(SessionTile,"defaultProps",{className:"sessionTile"});class SessionBrowser extends ComponentBase{constructor(){super(...arguments),pe(this,"newSessionTileRef",ke()),pe(this,"settingsChanged",(e=>"shellSession.sessionBrowser.showGreeting"===(null==e?void 0:e.key)?(this.forceUpdate(),Promise.resolve(!0)):Promise.resolve(!1))),pe(this,"handleCloseGreeting",(()=>{hi.set("shellSession.sessionBrowser.showGreeting",!1)})),pe(this,"handleTileAction",((e,t)=>{this.doHandleTileAction(e,null==t?void 0:t.details)})),pe(this,"doHandleTileAction",((e,t)=>{switch(e){case"new":nn.execute("newSession",{sessionId:-1});break;case"open":t&&nn.execute("openSession",t);break;case"remove":t&&nn.execute("removeSession",t)}})),pe(this,"handleTileReorder",((e,t)=>{}))}componentDidMount(){nn.register("settingsChanged",this.settingsChanged),setTimeout((()=>{var e;null==(e=this.newSessionTileRef.current)||e.focus()}),200)}componentWillUnmount(){nn.unregister("settingsChanged",this.settingsChanged)}render(){const{openSessions:e}=this.props,t=this.getEffectiveClassNames(["sessionBrowser"]),n=[];e.forEach((e=>{const t={sessionId:e.sessionId,caption:e.caption,description:e.description};n.push(Ie(SessionTile,{tileId:t.sessionId,caption:t.caption??"",description:t.description??"",details:t,icon:is,type:$o.Open,onAction:this.handleTileAction},t.caption))}));const i={sessionId:-1,caption:"New Shell Session",description:"Opens a new Shell instance tab"};n.push(Ie(SessionTile,{innerRef:this.newSessionTileRef,tileId:i.sessionId,caption:i.caption??"",description:i.description??"",details:i,icon:us,type:$o.CreateNew,onAction:this.handleTileAction},i.caption));const o=new Map;return o.set("Learn More >","https://blogs.oracle.com/mysql/post/introducing-mysql-shell-for-vs-code"),o.set("Browse Tutorial >","https://www.mysql.com"),o.set("Read Docs >","https://www.mysql.com"),Ie(Container,{className:t,orientation:Di.TopDown,wrap:Ii.Wrap,children:Ie(FrontPage,{showGreeting:hi.get("shellSession.sessionBrowser.showGreeting",!0),caption:"MySQL Shell - GUI Console",description:"The GUI Console combines the advantages of MySQL Shell running in a classic terminal with the power of the interactive command editor of the MySQL Shell GUI.",helpUrls:o,onCloseGreeting:this.handleCloseGreeting,children:[Ie(Label,{id:"contentTitle",caption:"MySQL Shell Sessions"}),Ie(Container,{id:"tilesHost",orientation:Di.LeftToRight,wrap:Ii.Wrap,children:n})]})})}}class ShellConsole extends ComponentBase{constructor(e){super(e),pe(this,"editorRef",ke()),pe(this,"executeCommand",(e=>{var t;null==(t=this.editorRef.current)||t.executeText(e)})),pe(this,"handleCursorChange",(e=>{const t={line:e.lineNumber,column:e.column};nn.execute("editorInfoUpdated",t)})),pe(this,"handleOptionsChanged",(()=>{if(this.editorRef.current){const e=this.editorRef.current.options,t={insertSpaces:e.insertSpaces,indentSize:e.indentSize??4,tabSize:e.tabSize??4};nn.execute("editorInfoUpdated",t)}})),pe(this,"sendStatusInfo",(()=>{var e;if(this.editorRef.current){const{editorState:t}=this.props,n=null==(e=t.viewState)?void 0:e.cursorState[0].position,i=t.model.getLanguageId(),o={insertSpaces:t.options.insertSpaces,indentSize:t.options.indentSize??4,tabSize:t.options.tabSize??4,line:(null==n?void 0:n.lineNumber)??1,column:(null==n?void 0:n.column)??1,language:i,eol:t.options.defaultEOL||"LF"};nn.execute("editorInfoUpdated",o)}})),pe(this,"createPresentation",((e,t)=>new EmbeddedPresentationInterface(e.backend,e.isScrolling,t))),pe(this,"contextRelativeLineNumbers",(e=>{const{editorState:t}=this.props,n=t.model.executionContexts,i=null==n?void 0:n.contextFromPosition({lineNumber:e,column:1});return i?i.endLine-i.startLine>0?(e-i.startLine+1).toString():"":e.toString()})),this.addHandledProperties("editorState","onScriptExecution","onHelpCommand")}componentDidMount(){this.sendStatusInfo()}componentDidUpdate(){this.sendStatusInfo()}componentWillUnmount(){nn.execute("updateStatusbar",[{id:"editorLanguage",visible:!1},{id:"editorIndent",visible:!1},{id:"editorPosition",visible:!1},{id:"editorEOL",visible:!1}])}render(){const{editorState:e,onScriptExecution:t,onHelpCommand:n}=this.props;return Ie(Go,{ref:this.editorRef,savedState:e,language:"msg",allowedLanguages:["javascript","python","sql"],startLanguage:hi.get("shellSession.startLanguage","javascript"),sqlDialect:"mysql",className:"shellConsole",minimap:{enabled:!0},font:{fontFamily:"SourceCodePro+Powerline+Awesome+MySQL",fontSize:15,lineHeight:24},scrollbar:{useShadows:!0,verticalHasArrows:!1,horizontalHasArrows:!1,vertical:"auto",horizontal:"auto",verticalScrollbarSize:16,horizontalScrollbarSize:16},lineNumbers:this.contextRelativeLineNumbers,onScriptExecution:t,onHelpCommand:n,onCursorChange:this.handleCursorChange,onOptionsChanged:this.handleOptionsChanged,createResultPresentation:this.createPresentation,autoFocus:!0})}}class ShellPrompt extends ComponentBase{constructor(e){super(e),pe(this,"schemaMenuRef",ke()),pe(this,"updateShellPrompt",(e=>new Promise((t=>{this.setState({values:e},(()=>{t(!0)}))})))),pe(this,"handleSchemaSectionClick",(e=>{const{getSchemas:t}=this.props;e.stopPropagation(),null==t||t().then((t=>{this.setState({schemaNames:t},(()=>{var t;const n=e.target.getBoundingClientRect(),i=new DOMRect(n.x,n.y+n.height,1,1);null==(t=this.schemaMenuRef.current)||t.open(i,!1)}))}))})),pe(this,"handleSchemaItemClick",((e,t)=>{var n;const{onSelectSchema:i}=this.props;return null==i||i((null==(n=t.caption)?void 0:n.substr(2))??""),!0})),this.state={values:e.values,schemaNames:[]}}static getDerivedStateFromProps(e){return{values:e.values}}componentDidMount(){nn.register("updateShellPrompt",this.updateShellPrompt)}componentWillUnmount(){nn.unregister("updateShellPrompt",this.updateShellPrompt)}render(){const{values:e,schemaNames:t}=this.state,n=this.getEffectiveClassNames(["shellPrompt"]),i=[];if(e.promptDescriptor)if(e.promptDescriptor.host){let t=e.promptDescriptor.host,n="Connection to server "+e.promptDescriptor.host;e.promptDescriptor.socket&&(t="localhost"),e.promptDescriptor.port&&(t+=`:${e.promptDescriptor.port}`,n+=` at port ${e.promptDescriptor.port}`),"x"===e.promptDescriptor.session?(t+="+",n+=", using the X protocol"):n+=", using the classic protocol","SSL"===e.promptDescriptor.ssl&&(t+=" ",n+=" (encrypted)"),i.push(Ie(Label,{id:"server",className:"shellPromptItem",caption:` ${t}`,"data-tooltip":n},"server"));const o=e.promptDescriptor.schema??"no schema selected";i.push(Ie(Label,{id:"schema",className:"shellPromptItem",caption:` ${o}`,onClick:this.handleSchemaSectionClick},"schema"))}else i.push(Ie(Label,{id:"server",className:"shellPromptItem",caption:"not connected","data-tooltip":"The session is not connected to a MySQL server"},"server"));const o=t.map((e=>Ie(MenuItem,{caption:" "+e},e)));return Ie(Re,{children:[Ie(Breadcrumb,{className:n,children:i}),Ie(Po,{className:"shellPromptSchemaMenu",ref:this.schemaMenuRef,onItemClick:this.handleSchemaItemClick,children:o})]})}}const fs=class _ShellPromptHandler{static handleShellPrompt(e,t,n,i,o){if(this.isShellPromptResult(e)){switch(e.type){case"password":{const i=_ShellPromptHandler.splitAndBuildPasswdRequest(e,t,{...o,backend:n},e.title,e.description);nn.execute("requestPassword",i);break}case"confirm":{const i=e.yes??"Yes",s=e.no??"No",r=e.alt,a=new Map([[$i.Accept,i],[$i.Decline,s],[$i.Alternative,r??""]]),l={type:Hi.Confirm,title:e.title,description:e.description,id:"shellConfirm",parameters:{title:e.title,prompt:e.prompt,accept:i,refuse:s,alternative:r,default:e.defaultValue},data:{...o,requestId:t,backend:n,replies:a,moduleSessionId:e.moduleSessionId}};nn.execute("showDialog",l);break}case"select":{const i={type:Hi.Select,title:e.title,description:e.description,id:"shellSelect",parameters:{prompt:e.prompt,default:e.defaultValue,options:e.options},data:{...o,requestId:t,backend:n,moduleSessionId:e.moduleSessionId}};nn.execute("showDialog",i);break}default:{const i={type:Hi.Prompt,id:"shellText",title:e.title,description:e.description,values:{prompt:e.prompt},data:{...o,requestId:t,backend:n,moduleSessionId:e.moduleSessionId}};nn.execute("showDialog",i);break}}return!0}return!1}static isShellPromptResult(e){return!!e&&void 0!==e.prompt}};pe(fs,"acceptPassword",(e=>new Promise((t=>{var n,i;const o=null==(n=e.request.payload)?void 0:n.backend;o?o.sendReply(e.request.requestId,Un.Ok,e.password,null==(i=e.request.payload)?void 0:i.moduleSessionId).then((()=>{t(!0)})).catch((()=>{t(!1)})):t(!1)})))),pe(fs,"cancelPassword",(e=>new Promise((t=>{var n,i;const o=null==(n=e.payload)?void 0:n.backend;o?o.sendReply(e.requestId,Un.Cancel,"",null==(i=e.payload)?void 0:i.moduleSessionId).then((()=>{t(!0)})).catch((()=>{t(!1)})):t(!1)})))),pe(fs,"handleDialogResponse",(e=>"shellConfirm"!==e.id&&"shellSelect"!==e.id&&"shellText"!==e.id?Promise.resolve(!1):new Promise((t=>{var n,i,o,s,r,a;const l=null==(n=e.data)?void 0:n.backend,d=null==(i=e.data)?void 0:i.requestId,c=null==(o=e.data)?void 0:o.moduleSessionId,u=(e,n)=>{l.sendReply(d,e,n,c).then((()=>{t(!0)})).catch((()=>{t(!1)}))};if(l&&d)switch(e.type){case Hi.Confirm:{const t=null==(s=e.data)?void 0:s.replies;if(t){const n=t.get(e.closure);n?u(Un.Ok,n):u(Un.Cancel,"")}break}case Hi.Select:if(e.closure===$i.Decline)u(Un.Cancel,"");else{const t=null==(r=e.values)?void 0:r.input;u(Un.Ok,t)}break;case Hi.Prompt:if(e.closure===$i.Decline)u(Un.Cancel,"");else{const t=null==(a=e.values)?void 0:a.input;u(Un.Ok,t)}break;default:t(!1)}else t(!1)})))),pe(fs,"splitAndBuildPasswdRequest",((e,t,n,i,o)=>{n.moduleSessionId=e.moduleSessionId;const s={requestId:t,caption:i??"Open MySQL Connection",description:o,payload:n,service:"",user:""};let r=e.prompt.split("'");if(r.length>=3){const e=r[1].split("@");s.service=r[1],s.user=e[0]}else if(r=e.prompt.split("ssh://"),r.length>=2){s.caption=i??"Open SSH tunnel in Shell Session";const e=r[1].split("@");s.service=`ssh://${r[1]}`.trim(),s.service.endsWith(":")&&(s.service=s.service.slice(0,-1)),s.user=e[0]}else s.caption=e.prompt;return s}));let bs=fs;nn.register("acceptPassword",bs.acceptPassword),nn.register("cancelPassword",bs.cancelPassword),nn.register("dialogResponse",bs.handleDialogResponse);const vs=class _ShellTab extends ComponentBase{constructor(){super(...arguments),pe(this,"consoleRef",ke()),pe(this,"currentLanguage","text"),pe(this,"resultTimers",new Map),pe(this,"handleExecution",(async(e,t)=>{const{savedState:n}=this.props,i=e.code.trim();if(0===i.length)return Promise.resolve(!1);const o=i.split(" ");if(o.length>0){switch(o[0].toLowerCase()){case"\\quit":case"\\exit":case"\\q":case"\\e":return setTimeout((()=>{const{id:e,onQuit:t}=this.props;t(e??"")}),0),!0;case"\\about":{const t=navigator.userAgent.includes("Macintosh"),n=_ShellTab.aboutMessage.replace("%modifier%",t?"Cmd":"Ctrl");return await(null==e?void 0:e.addResultData({type:"text",text:[{type:zi.Info,content:n,language:"ansi"}]},{resultId:""})),!0}case"\\js":this.currentLanguage="javascript";break;case"\\py":this.currentLanguage="python";break;case"\\sql":1===o.length&&(this.currentLanguage="sql");break;default:{const o="mysql"===e.language?"sql":e.language;if(o!==this.currentLanguage){const s=_ShellTab.languageMap.get(e.language);if(s)return new Promise((r=>{n.backend.execute(s).then((()=>{this.currentLanguage=o,this.processCommand(i,e,t.params).then((()=>{r(!0)}))})).catch((e=>{nn.execute("showError",["Shell Language Switch Error",String(e)]),r(!1)}))}))}}}}return await this.processCommand(i,e,t.params),!0})),pe(this,"executeQuery",(async(e,t,n,i)=>{if(0===t.trim().length)return;const o=bo.instance,[s]=await o.checkAndAddSemicolon(e,t);await this.doExecution(s,e,n,i)})),pe(this,"closeDbSession",(e=>{const{savedState:t}=this.props;t.dbSession&&t.dbSession.closeSession().then((()=>{t.dbSession=void 0})),t.lastPassword=void 0,t.lastUserName=void 0,t.lastHost=void 0,t.lastPort=void 0,t.schemaList=void 0;const n=e.match(/^[^']+('.+')/);let i=null==n?void 0:n[1];if(i){i=xn(i);try{const e=i.toLowerCase().match(/^(mysql(x)?:\/\/)/);(null==e?void 0:e[0])?(i.replace("mysql://","http://"),i.replace("mysqlx://","http://")):i="http://"+i;const n=new URL(i);t.lastUserName=""===n.username?void 0:n.username,t.lastHost=n.hostname,t.lastPassword=""===n.password?void 0:n.password,t.lastPort=""===n.port?void 0:parseInt(n.port,10)}catch(o){}}})),pe(this,"openDbSession",(async()=>{var e;const{savedState:t}=this.props;try{t.dbSession&&await t.dbSession.closeSession(),t.dbSession=new ShellInterfaceDb;const n="x"===(null==(e=t.promptDescriptor)?void 0:e.session);await t.dbSession.startSession("shellTab",{dbType:Ki.MySQL,caption:"Shell Tab DB Session",description:"",options:{scheme:n?qo.MySQLx:qo.MySQL,user:t.lastUserName,password:t.lastPassword,host:t.lastHost,port:t.lastPort}})}catch(n){nn.execute("showError",["Shell DB Session Error",n])}})),pe(this,"acceptPassword",(e=>{nn.unregister("acceptPassword",this.acceptPassword);const{savedState:t}=this.props;return t.lastPassword=e.password,Promise.resolve(!1)})),pe(this,"getPasswordFromLastCommand",(()=>{const{savedState:e}=this.props;if(e.lastCommand){const t=[...e.lastCommand.matchAll(Vi)];if(t[0]&&t[0][4]&&t[0][6]&&t[0][8])return decodeURIComponent(t[0][6])}})),pe(this,"listSchemas",(()=>new Promise((e=>{const{savedState:t}=this.props;t.dbSession?t.schemaList?e(t.schemaList):t.dbSession.getCatalogObjects("Schema").then((n=>{t.schemaList=n,e(n)})):e([])})))),pe(this,"activateSchema",(e=>{var t;null==(t=this.consoleRef.current)||t.executeCommand(`\\u ${e}`)}))}componentDidMount(){this.initialSetup()}componentWillUnmount(){this.closeDbSession("")}componentDidUpdate(){this.initialSetup()}render(){const{savedState:e}=this.props;return Ie(Re,{children:Ie(Container,{id:"shellEditorHost",orientation:Di.TopDown,mainAlignment:ki.Stretch,children:[Ie(ShellPrompt,{id:"shellPrompt",values:e,getSchemas:this.listSchemas,onSelectSchema:this.activateSchema}),Ie(ShellConsole,{id:"shellEditor",ref:this.consoleRef,editorState:e.state,onScriptExecution:this.handleExecution})]})})}initialSetup(){var e;const{savedState:t}=this.props;if(2===t.state.model.getVersionId()){null==(e=this.consoleRef.current)||e.executeCommand("\\about");const n=hi.get("shellSession.startLanguage","javascript").toLowerCase(),i=_ShellTab.languageMap.get(n)??"\\js";this.currentLanguage=n,t.backend.execute(i).then((e=>{e&&this.hasPromptDescriptor(e)&&(t.promptDescriptor=e.promptDescriptor,nn.execute("updateShellPrompt",e))})).catch((e=>{nn.execute("showError",["Shell Language Switch Error",String(e.message)])}))}}async processCommand(e,t,n){if(t.clearResult(),!e.startsWith("\\")&&t.isSQLLike){const e=await t.getExecutableStatements();let i=0;for(;;){const o=e.shift();if(!o)break;await this.executeQuery(t,o.text,i++,n)}}else this.doExecution(e,t,-1,n)}async doExecution(e,t,n,i){var o,s,r,a,l,d,c,u,h,p,m;const{savedState:g}=this.props;g.lastCommand=e;try{const{id:i=""}=this.props;let f=[],b=an();const v=await g.backend.execute(e,void 0,((e,o)=>{if(!e.result)return;const s=e.result;if(this.isShellShellDocumentData(s))if(s.hasData){const e=1===s.documents.length?"document":"documents",i={type:zi.Info,text:`${s.documents.length} ${e} in set (${s.executionTime})`};s.warningCount>0&&(i.type=zi.Warning,i.text+=`, ${s.warningCount} ${1===s.warningCount?"warning":"warnings"}`);const o=[{type:zi.Info,index:n,content:JSON.stringify(s.documents,void 0,"\t"),language:"json"}];s.warnings.forEach((e=>{o.push({type:zi.Warning,index:n,content:`\n${e.message}`})})),this.addTimedResult(t,{type:"text",text:o,executionInfo:i},b)}else this.addTimedResult(t,{type:"text",text:[{type:zi.Info,index:n,content:s.info,language:"ansi"}],executionInfo:{text:""}},b);else if(this.isShellShellColumnsMetaData(s)){const e=Object.values(s).map((e=>({name:xn(e.Name),type:e.Type,length:e.Length})));f.push(...Qi("mysql"===t.language?Ki.MySQL:Ki.Sqlite,e,!0))}else if(this.isShellShellRowData(s)){if(0===f.length){let e=`Query ${s.warningCount>0?`finished with warnings (${s.warningCount})`:"OK"}, ${s.affectedRowCount||s.rows.length} rows affected`;if(s.executionTime&&(e+=` (${s.executionTime})`),s.rows.length>0){const i=JSON.stringify(s.rows,void 0,"\t")+"\n";this.addTimedResult(t,{type:"text",text:[{type:zi.Info,index:n,content:i,language:"json"}],executionInfo:{type:zi.Response,text:e}},b)}else this.addTimedResult(t,{type:"text",executionInfo:{type:zi.Info,text:e}},b)}else{const e=1===s.rows.length?"row":"rows",o={type:zi.Info,text:`${s.rows.length} ${e} in set (${s.executionTime})`};s.warningCount>0&&(o.type=zi.Warning,o.text+=`, ${s.warningCount} ${1===s.warningCount?"warning":"warnings"}`),s.rows.forEach((e=>{(e=>{for(const[t,n]of Object.entries(e))if("object"==typeof n){let i=JSON.stringify(n,void 0," ");i=i.replace(/\n/g," "),i=i.replace(/ +/g," "),i=i.replace(/\[ /g,"["),i=i.replace(/ ]/g,"]"),e[t]=i}})(e)}));const r=Yi(f,s.rows);Oi.db.add("shellModuleResultData",{tabId:i,resultId:b,rows:r,columns:f,executionInfo:o,index:n}),this.addTimedResult(t,{type:"resultSetRows",rows:r,columns:f,currentPage:0,executionInfo:o},b)}b=an(),f=[]}else if(this.isShellShellData(s))this.addTimedResult(t,{type:"text",text:[{type:zi.Info,index:n,content:s.info,language:"ansi"}],executionInfo:{text:""}},b);else if(this.isShellObjectListResult(s)){let e="[\n";s.forEach((t=>{e+="\t<"+t.class,t.name&&(e+=":"+t.name),e+=">\n"})),e+="]",this.addTimedResult(t,{type:"text",text:[{type:zi.Info,index:n,content:e,language:"xml"}]},b)}else if(this.isShellSimpleResult(s)){if(s.error){const e="string"==typeof s.error?s.error:s.error.message;this.addTimedResult(t,{type:"text",text:[{type:zi.Error,index:n,content:e,language:"ansi"}],executionInfo:{type:zi.Error,text:""}},b)}else if(s.warning)this.addTimedResult(t,{type:"text",text:[{type:zi.Info,index:n,content:s.warning,language:"ansi"}],executionInfo:{type:zi.Warning,text:""}},b);else{s.info&&s.info.startsWith("Creating a session to")&&this.closeDbSession(s.info);const e=s.info??s.note??s.status;this.addTimedResult(t,{type:"text",text:[{type:zi.Info,index:n,content:e,language:"ansi"}],executionInfo:{type:zi.Info,text:""}},b)}b=an(),f=[]}else if(this.isShellValueResult(s))this.addTimedResult(t,{type:"text",text:[{type:zi.Info,index:n,content:String(s.value),language:"ansi"}]},b);else if(nn.register("acceptPassword",this.acceptPassword),!bs.handleShellPrompt(s,o,g.backend))if(nn.unregister("acceptPassword",this.acceptPassword),this.isShellObjectResult(s)){let e="<"+s.class;s.name&&(e+=":"+s.name),e+=">",this.addTimedResult(t,{type:"text",text:[{type:zi.Info,index:n,content:e,language:"xml"}]},b)}else{const e={text:s?"":JSON.stringify(s,void 0,"\t")},i=s?[{type:zi.Info,index:n,content:JSON.stringify(s,void 0,"\t"),language:"json"}]:[];this.addTimedResult(t,{type:"text",text:i,executionInfo:e},b)}}));if(v&&this.hasPromptDescriptor(v)){const e=void 0!==g.dbSession,t=void 0!==(null==(o=v.promptDescriptor)?void 0:o.host)||void 0!==(null==(s=v.promptDescriptor)?void 0:s.socket),n=g.promptDescriptor;let i=!e&&t;i||(i=(null==n?void 0:n.user)!==(null==(r=v.promptDescriptor)?void 0:r.user)||(null==n?void 0:n.host)!==(null==(a=v.promptDescriptor)?void 0:a.host)||(null==n?void 0:n.port)!==(null==(l=v.promptDescriptor)?void 0:l.port)||(null==n?void 0:n.socket)!==(null==(d=v.promptDescriptor)?void 0:d.socket)||(null==n?void 0:n.ssl)!==(null==(c=v.promptDescriptor)?void 0:c.ssl)||(null==n?void 0:n.session)!==(null==(u=v.promptDescriptor)?void 0:u.session));let f=!g.promptDescriptor||i||e!==t;f||(f=(null==n?void 0:n.isProduction)!==(null==(h=v.promptDescriptor)?void 0:h.isProduction)||(null==n?void 0:n.mode)!==(null==(p=v.promptDescriptor)?void 0:p.mode)||(null==n?void 0:n.schema)!==(null==(m=v.promptDescriptor)?void 0:m.schema)),g.promptDescriptor=v.promptDescriptor,e&&!t?(this.closeDbSession(""),nn.execute("updateShellPrompt",v)):i?(void 0===g.lastPassword&&(g.lastPassword=this.getPasswordFromLastCommand()),void 0!==g.lastPassword&&await this.openDbSession(),await nn.execute("updateShellPrompt",v)):f&&await nn.execute("updateShellPrompt",v)}}catch(f){throw nn.execute("showError",["Shell Execution Error",String(f)]),f}}addTimedResult(e,t,n){const i=this.resultTimers.get(n);if(i)i.results.push(t);else{const i={timer:yt.setIntervalAsync((async t=>{const n=this.resultTimers.get(t);if(n){const i=n.results.shift();i?await e.addResultData(i,{resultId:t}):kt(n.timer).then((()=>{this.resultTimers.delete(t)}))}}),50,n),results:[t]};this.resultTimers.set(n,i)}}isShellObjectListResult(e){return Array.isArray(e)}isShellObjectResult(e){return void 0!==e.class}isShellValueResult(e){return void 0!==e.value}isShellSimpleResult(e){const t=e;return(void 0!==t.error||void 0!==t.info||void 0!==t.note||void 0!==t.status||void 0!==t.warning)&&1===Object.keys(t).length}isShellShellDocumentData(e){return void 0!==e.documents}isShellShellColumnsMetaData(e){return"Field 1"in e}isShellShellRowData(e){return void 0!==e.rows}isShellShellData(e){return void 0!==e.hasData}hasPromptDescriptor(e){return void 0!==e.promptDescriptor}};pe(vs,"aboutMessage","Welcome to the MySQL Shell - GUI Console.\n\nPress %modifier%+Enter to execute the current statement.\n\nExecute \\sql to switch to SQL, \\js to JavaScript and \\py to Python mode.\nExecute \\help or \\? for help; \\quit to close the session."),pe(vs,"languageMap",new Map([["javascript","\\js"],["python","\\py"],["sql","\\sql"],["mysql","\\sql"]]));let Ss=vs;class ShellInterfaceShellSession{constructor(e){pe(this,"mds",new ShellInterfaceMds),pe(this,"moduleSessionLookupId",""),e&&(this.moduleSessionLookupId="shellSession.temporary",Qn.setModuleSessionId(this.moduleSessionLookupId,e))}get hasSession(){return void 0!==this.moduleSessionId}async startShellSession(e,t,n,i,o){var s;if(this.moduleSessionLookupId=`shellSession.${e}`,this.hasSession)return;const r=await Hn.get.sendRequest({requestType:Vn.GuiShellStartSession,requestId:i,parameters:{args:{dbConnectionId:t,shellArgs:n}},onData:o});return(null==(s=r.result)?void 0:s.moduleSessionId)&&Qn.setModuleSessionId(this.moduleSessionLookupId,r.result.moduleSessionId),r.result}async closeShellSession(){const e=this.moduleSessionId;e&&(await Hn.get.sendRequest({requestType:Vn.GuiShellCloseSession,parameters:{args:{moduleSessionId:e}}}),Qn.setModuleSessionId(this.moduleSessionLookupId))}async execute(e,t,n){const i=this.moduleSessionId;if(i){return(await Hn.get.sendRequest({requestType:Vn.GuiShellExecute,requestId:t,parameters:{args:{command:e,moduleSessionId:i}},onData:n})).result}}async sendReply(e,t,n,i){(i=i??this.moduleSessionId)&&await Hn.get.sendRequest({requestType:qn.PromptReply,parameters:{moduleSessionId:i,requestId:e,type:t,reply:n}},!1)}async getCompletionItems(e,t){const n=this.moduleSessionId;if(n){const i=await Hn.get.sendRequest({requestType:Vn.GuiShellComplete,parameters:{args:{data:e,offset:t,moduleSessionId:n}}}),o=[];return i.forEach((e=>{e.result&&o.push(e.result)})),o}return[]}get moduleSessionId(){return Qn.moduleSessionId(this.moduleSessionLookupId)}}class DynamicSymbolTable extends oo{constructor(e,t,n){super(t,n),this.backend=e}async getAllSymbols(e,t){let n=await super.getAllSymbols(e,t);return 0===n.length&&(await this.loadSymbolsOfKind(this,oo.getKindFromSymbol(e)),n=await super.getAllSymbols(e,t)),n}async loadSymbolsOfKind(e,t){if(this.backend)switch(t){case Zi.Schema:{const t=await this.backend.getCatalogObjects("Schema");this.handleResults(t,e,SchemaSymbol);break}case Zi.Table:{const t=await this.backend.getSchemaObjects(e.name,"Table");this.handleResults(t,e,TableSymbol);break}case Zi.Column:if(e.parent){const t=await this.backend.getTableObjects(e.parent.name,e.name,"Column");this.handleResults(t,e,ColumnSymbol)}break;case Zi.Procedure:{const t=await this.backend.getSchemaObjects(e.name,"Routine","procedure");this.handleResults(t,e,StoredProcedureSymbol);break}case Zi.Function:{const t=await this.backend.getSchemaObjects(e.name,"Routine","function");this.handleResults(t,e,StoredFunctionSymbol);break}case Zi.Udf:{const t=await this.backend.getSchemaObjects(e.name,"Routine");this.handleResults(t,e,UdfSymbol);break}case Zi.View:{const t=await this.backend.getSchemaObjects(e.name,"View");this.handleResults(t,e,ViewSymbol);break}case Zi.PrimaryKey:if(e.parent){const t=await this.backend.getTableObjects(e.parent.name,e.name,"Primary Key");this.handleResults(t,e,PrimaryKeySymbol)}break;case Zi.ForeignKey:if(e.parent){const t=await this.backend.getTableObjects(e.parent.name,e.name,"Foreign Key");this.handleResults(t,e,ForeignKeySymbol)}break;case Zi.Operator:break;case Zi.Engine:{const t=await this.backend.getCatalogObjects("Engine");this.handleResults(t,e,EngineSymbol);break}case Zi.Trigger:{const t=await this.backend.getSchemaObjects(e.name,"Trigger");this.handleResults(t,e,TriggerSymbol);break}case Zi.LogfileGroup:{const t=await this.backend.getSchemaObjects(e.name,"Routine");this.handleResults(t,e,LogfileGroupSymbol);break}case Zi.UserVariable:{const t=await this.backend.getCatalogObjects("User Variable");this.handleResults(t,e,UserVariableSymbol);break}case Zi.Tablespace:{const t=await this.backend.getSchemaObjects(e.name,"Tablespace");this.handleResults(t,e,TablespaceSymbol);break}case Zi.Event:{const t=await this.backend.getSchemaObjects(e.name,"Event");this.handleResults(t,e,EventSymbol);break}case Zi.Index:if(e.parent){const t=await this.backend.getTableObjects(e.parent.name,e.name,"Index");this.handleResults(t,e,IndexSymbol)}break;case Zi.User:{const t=await this.backend.getCatalogObjects("User");this.handleResults(t,e,UserSymbol);break}case Zi.Charset:{const t=await this.backend.getCatalogObjects("Character Set");this.handleResults(t,e,CharsetSymbol);break}case Zi.Collation:{const t=await this.backend.getCatalogObjects("Collation");this.handleResults(t,e,CollationSymbol);break}case Zi.Plugin:{const t=await this.backend.getCatalogObjects("Plugin");this.handleResults(t,e,PluginSymbol);break}}}handleResults(e,t,n){e.forEach((e=>{this.addNewSymbolOfType(n,t,e)}))}}const Cs={tabSize:4,indentSize:4,insertSpaces:!0,defaultEOL:"LF",trimAutoWhitespace:!0},ws=e=>{const t=e.trim().split(".");let n=0;return t.length>0&&t[0].length>0&&(n+=1e4*An(t[0]),t.length>1&&(n+=100*An(t[1]),t.length>2&&(n+=An(t[2])))),n},ys=class _ShellModule extends ModuleBase{constructor(e){super(e),pe(this,"sessionState",new Map),pe(this,"pendingProgress"),pe(this,"showPage",(e=>new Promise((t=>{e.module!==ps?t(!1):"sessions"===e.page&&this.setState({selectedTab:e.page},(()=>{t(!0)}))})))),pe(this,"newSession",(async e=>(await this.addTabForNewSession(e),!0))),pe(this,"openSession",(async e=>(await this.addShellTab(e),!0))),pe(this,"removeSession",(async e=>{const{shellTabs:t}=this.state,n=t.find((t=>t.details.sessionId===e.sessionId));return n&&await this.doCloseTab(n.id),!0})),pe(this,"webSessionStarted",(async()=>{const{shellTabs:e}=this.state;for(const t of e){this.sessionState.get(t.id)&&await this.restartShellSession(t.id,t.details)}return!0})),pe(this,"addShellTab",(async e=>{const{shellTabs:t}=this.state,n=`session_${e.sessionId}`,i=t.find((t=>t.details.sessionId===e.sessionId));if(i)this.setState({selectedTab:i.id,pendingConnectionProgress:"inactive"});else{this.setState({pendingConnectionProgress:"inProgress"});let i,s=1;e.dbConnectionId&&t.forEach((t=>{t.details.dbConnectionId===e.dbConnectionId&&++s})),s>1?(i=`${e.caption} (${s})`,e.caption=i):i=e.caption??"<untitled>";if(this.sessionState.get(n))t.push({details:e,id:n,caption:e.caption??"Shell"}),this.setState({shellTabs:t,selectedTab:n,pendingConnectionProgress:"inactive"});else{this.showProgress();const s=new ShellInterfaceShellSession;this.setProgressMessage("Starting shell session...");const r=an();try{await s.startShellSession(n,e.dbConnectionId,void 0,r,(e=>{bs.handleShellPrompt(e.result,r,s)||this.setProgressMessage("Loading ...")}));const o="",a=hi.get("editor.dbVersion","8.0.24"),l=ws(a),d="",c=hi.get("editor.sqlMode",""),u={state:{model:this.createEditorModel(s,"","msg",l,c,o),viewState:null,options:Cs},backend:s,serverVersion:l,serverEdition:d,sqlMode:c};this.sessionState.set(n,u),t.push({details:e,id:n,caption:i}),this.setState({shellTabs:t,pendingConnectionProgress:"inactive"}),nn.executeRemote("sessionAdded",e),this.hideProgress(n)}catch(o){nn.execute("showError",["Shell Session Error",String(o)]),this.hideProgress("sessions")}}}})),pe(this,"restartShellSession",(async(e,t)=>{const n=this.sessionState.get(e).backend;this.showProgress(),this.setProgressMessage("Starting shell session...");try{const i=an();await n.startShellSession(e,t.dbConnectionId,void 0,i,(e=>{e&&e.result&&(bs.handleShellPrompt(e.result,i,n)||this.setProgressMessage("Loading ..."))})),this.hideProgress(e)}catch(i){nn.execute("showError",["Shell Session Error",String(i)]),this.hideProgress("sessions")}})),pe(this,"handleQuit",(e=>{this.doCloseTab(e)})),pe(this,"closeTab",(e=>{e.stopPropagation();const t=e.currentTarget.id;this.doCloseTab(t)})),pe(this,"doCloseTab",(async e=>{const{selectedTab:t,shellTabs:n}=this.state;Oi.removeDataByTabId(Bi.Shell,e);const i=n.findIndex((t=>t.id===e));if(i>-1){const o=this.sessionState.get(e);o&&(this.sessionState.delete(e),await o.backend.closeShellSession());const s=n.splice(i,1);nn.executeRemote("sessionRemoved",s[0].details);let r=t;e===r&&(r=i>0?n[i-1].id:i>=n.length-1?"sessions":n[i+1].id),this.setState({selectedTab:r,shellTabs:n})}})),pe(this,"handleSelectTabFromDropdown",(e=>{this.setState({selectedTab:[...e][0]})})),pe(this,"handleSelectTab",(e=>{this.setState({selectedTab:e})})),pe(this,"setProgressMessage",(e=>{this.setState({progressMessage:e})})),pe(this,"showProgress",(()=>{this.pendingProgress=setTimeout((()=>{this.setState({selectedTab:"waitPage"})}),250)})),pe(this,"hideProgress",(e=>{clearTimeout(this.pendingProgress),this.setState({selectedTab:e,progressMessage:""})})),this.state={shellTabs:[],showTabs:!tn.embedded,progressMessage:"",pendingConnectionProgress:"inactive"}}static get info(){return{id:ps,caption:"Shell",icon:is}}static getDerivedStateFromProps(e,t){const{selectedTab:n,pendingConnectionProgress:i}=t;let o=n;o||(o="inactive"!==i||tn.embedded?"waitPage":"sessions");return{selectedTab:o}}componentDidMount(){nn.register("showPage",this.showPage),nn.register("newSession",this.newSession),nn.register("openSession",this.openSession),nn.register("removeSession",this.removeSession),nn.register("webSessionStarted",this.webSessionStarted);const{pendingSession:e}=this.state;e&&this.addTabForSessionId(e)}componentWillUnmount(){nn.unregister("showPage",this.showPage),nn.unregister("newSession",this.newSession),nn.unregister("openSession",this.openSession),nn.unregister("removeSession",this.removeSession),nn.unregister("webSessionStarted",this.webSessionStarted)}componentDidUpdate(){const{pendingSession:e}=this.state;e&&this.addTabForSessionId(e)}render(){const{innerRef:e}=this.props,{selectedTab:t,shellTabs:n,showTabs:i,progressMessage:o}=this.state,s=n.map((e=>e.details)),r=[];if("waitPage"===t){const e=Ie(Re,{children:[Ie(ProgressIndicator,{id:"loadingProgressIndicator",backgroundOpacity:.95,linear:!1}),Ie(Label,{id:"progressMessageId",caption:o})]});r.push({caption:"In Progress...",id:"waitPage",content:e})}else r.push({icon:is,caption:"GUI Console",id:"sessions",content:Ie(SessionBrowser,{openSessions:s})}),n.forEach((e=>{const t=this.sessionState.get(e.id);r.push({icon:cs,caption:e.caption,id:e.id,content:Ie(Ss,{id:e.id,savedState:t,onQuit:this.handleQuit}),auxillary:Ie(Button,{id:e.id,className:"closeButton",round:!0,onClick:this.closeTab,children:Ie(xi,{src:wi})})})}));let a;if(tn.embedded&&"waitPage"!==t){const e=[Ie(Dropdown.Item,{id:"sessions",caption:"MySQL Shell Consoles",picture:Ie(xi,{src:cs})},"sessions")];n.forEach((t=>{e.push(Ie(Dropdown.Item,{id:t.id,caption:t.caption,picture:Ie(xi,{src:cs})},t.id))})),a=Ie(Re,{children:[Ie(Label,{style:{paddingRight:"8px"},children:"GUI Console:"}),Ie(Dropdown,{id:"sessionSelector",selection:t,onSelect:this.handleSelectTabFromDropdown,children:e}),Ie(Divider,{vertical:!0,thickness:1})]})}return Ie(Container,{id:"shellModuleHost",className:"msg moduleHost",innerRef:e,orientation:Di.TopDown,children:[a&&Ie(Toolbar,{id:"embeddedSessionToolbar",dropShadow:!1,children:a}),Ie(Tabview,{id:"shellModuleTabview",tabPosition:Ao.Top,selectedId:t,stretchTabs:!1,showTabs:i&&"waitPage"!==t,canReorderTabs:!0,pages:r,onSelectTab:this.handleSelectTab})]})}addTabForSessionId(e){const{shellTabs:t,pendingConnectionProgress:n}=this.state;if("inProgress"!==n)if(-1===e);else{const n=t.find((t=>t.details.sessionId===e));n&&this.addShellTab(n.details)}}async addTabForNewSession(e){const t=e??{sessionId:-1};return t.sessionId=_ShellModule.counter++,t.caption||(t.caption=`Session ${t.sessionId}`),this.addShellTab(t)}createEditorModel(e,t,n,i,o,s){const r=Object.assign(Gt.createModel(t,n),{executionContexts:new ExecutionContexts(Bi.Shell,i,o,s),symbols:new DynamicSymbolTable(void 0,"db symbols",{allowDuplicateSymbols:!0}),editorMode:Li.Terminal,session:e});return r.getEndOfLineSequence()!==Gt.EndOfLineSequence.LF?r.setEOL(Gt.EndOfLineSequence.LF):r.setValue(t),r}};pe(ys,"counter",1);let ks=ys;const Is="/assets/default-ae118fa8.svg",Ds="/assets/connectionMysql-81b13c66.svg",Ts="/assets/connectionSqlite-0c8d89eb.svg",Rs="/assets/scriptJs-fef226f5.svg",xs="/assets/scriptSqlite-b32aa0d9.svg",Es="/assets/scriptMysql-6aab8399.svg",Ms="/assets/scriptTs-bebd1acb.svg",Ps="Database Connection Configuration",Ls=["Select a database type and enter database specific connection data."],Fs=class _ConnectionEditor extends ComponentBase{constructor(e){super(e),pe(this,"editorRef",ke()),pe(this,"confirmClearPasswordDialogRef",ke()),pe(this,"confirmNewBastionDialogRef",ke()),pe(this,"knowDbTypes",[]),pe(this,"liveUpdateFields",{bastionId:{value:"",loading:!1},bastionName:{value:"",loading:!1},mdsDatabaseName:{value:"",loading:!1},profileName:"",dbSystemId:""}),pe(this,"shellSession",new ShellInterfaceShellSession),pe(this,"ociProfileNames"),pe(this,"activeOciProfileName"),pe(this,"validateConnectionValues",((e,t,n)=>{const i={requiredContexts:[],messages:{}},o=t.sections.get("general").values,s=t.sections.get("information").values,r=t.sections.get("sqliteDetails").values,a=t.sections.get("mysqlDetails").values,l=t.sections.get("mysqlAdvanced").values,d="Sqlite"===o.databaseType.value,c="MySQL"===o.databaseType.value;if(d||c||(i.messages.databaseType="Select one of the database types for your connection"),s.caption.value){const{connections:e}=this.props,o=e.find((e=>e.caption===s.caption.value));o&&(String(o.id)!==t.id||(null==n?void 0:n.createNew))&&(i.messages.caption="A connection with that caption exists already")}else e&&(i.messages.caption="The caption cannot be empty");if(d){if(e&&!r.dbFilePath.value)i.messages.dbFilePath="Specify the path to an existing Sqlite DB file";else if(r.dbFilePath.value){const e=r.dbFilePath.value;try{new URL("file:///"+e)}catch(u){i.messages.dbFilePath="Invalid file path"}}}else if(c){if(e){const e=a.hostName.value;e&&0!==e.length||(i.messages.hostName="Specify a valid host name or IP address");const t=a.userName.value;t&&0!==t.length||(i.messages.userName="The user name must not be empty")}if("number"==typeof a.port.value){const e=this.checkValidInt(a.port.value);(void 0===e||isNaN(e)||e<0)&&(i.messages.timeout="The port must be a valid integer >= 0")}if("number"==typeof l.timeout.value){const e=this.checkValidInt(l.timeout.value);(void 0===e||isNaN(e)||e<0)&&(i.messages.timeout="The timeout must be a valid integer >= 0")}}return i})),pe(this,"handleOptionsDialogClose",((e,t,n)=>{if(e===$i.Accept){const e=t.sections.get("general").values,i=t.sections.get("information").values,o=t.sections.get("sqliteDetails").values,s=t.sections.get("sqliteAdvanced").values,r=t.sections.get("mysqlDetails").values,a=t.sections.get("mdsAdvanced").values,l=t.sections.get("ssh").values,d=t.sections.get("mysqlAdvanced").values,c=t.sections.get("ssl").values,u="Sqlite"===e.databaseType.value,h="MySQL"===e.databaseType.value;let p=null==n?void 0:n.details;const m=e.databaseType.value;if((null==n?void 0:n.createNew)&&(p={id:0,dbType:m,caption:i.caption.value,description:i.description.value,useSSH:!1,useMDS:!1,options:{}},u?p.options={dbFile:"",otherParameters:s.otherParameters.value}:h&&(p.options={scheme:qo.MySQL,host:"localhost"})),p){if(p.dbType=m,p.useMDS=r.useMDS.value,p.useSSH=r.useSSH.value,p.caption=i.caption.value,p.description=i.description.value,u)p.options={dbFile:o.dbFilePath.value,otherParameters:s.otherParameters.value};else if(h){let e,t;p.useSSH&&""!==l.sshKeyFile.value&&(e=l.sshKeyFile.value),p.useMDS&&""!==a.sshKeyFile.value&&(e=a.sshKeyFile.value),p.useMDS&&""!==a.sshPublicKeyFile.value&&(t=a.sshPublicKeyFile.value);let n;c.sslMode.value!==Vo.Disabled&&ge(_ConnectionEditor,ne).forEach(((e,t)=>{e===c.sslMode.value&&(n=t)}));const i=Array.isArray(d.compressionAlgorithms.value)?d.compressionAlgorithms.value.join(","):void 0;p.options={scheme:r.scheme.value,host:r.hostName.value,port:r.port.value,user:r.userName.value,schema:r.defaultSchema.value,"ssl-mode":n??void 0,"ssl-ca":c.sslCaFile.value,"ssl-cert":c.sslCertFile.value,"ssl-key":c.sslKeyFile.value,"ssl-cipher":c.sslCipher.value,compression:""!==d.compression.value?d.compression.value:void 0,"compression-algorithms":i,"compression-level":d.compressionLevel.value,"connection-timeout":d.timeout.value,ssh:p.useSSH?l.ssh.value:void 0,"ssh-identity-file":e,"ssh-config-file":p.useSSH?l.sshConfigFilePath.value:void 0,"ssh-public-identity-file":t,"profile-name":p.useMDS?a.profileName.value:void 0,"bastion-id":p.useMDS?a.bastionId.value:void 0,"mysql-db-system-id":p.useMDS?a.mysqlDbSystemId.value:void 0,"disable-heat-wave-check":d.disableHeatwaveCheck.value}}if(null==n?void 0:n.createNew){const{onAddConnection:e}=this.props;e(p)}else{const{onUpdateConnection:e}=this.props;e(p)}}}})),pe(this,"generateEditorConfig",(e=>{var t;const{connections:n}=this.props,i=`New Connection ${n.length+1}`,o=(e=e??{id:-1,dbType:Ki.MySQL,caption:i,description:"A new Database Connection",useSSH:!1,useMDS:!1,options:{host:"localhost",port:3306,scheme:qo.MySQL}}).dbType===Ki.Sqlite,s=e.dbType===Ki.MySQL;let r,a;o?(a=e.options,a.dbName&&""!==a.dbName.trim()||(a.dbFile.endsWith(".sqlite3")?a.dbName=_n(a.dbFile,".sqlite3"):a.dbName=_n(a.dbFile,".sqlite")),r={scheme:qo.MySQL,host:"localhost"}):s?(a={dbFile:"",dbName:""},r=e.options,e.useMDS=void 0!==r["mysql-db-system-id"],e.useSSH=void 0!==r.ssh):(a={dbFile:"",dbName:""},r={scheme:qo.MySQL,host:"localhost"});const l={values:{databaseType:{type:"choice",caption:"Database Type:",value:e.dbType,choices:this.knowDbTypes,onChange:(e,t)=>{const n=[...this.knowDbTypes],i=n.findIndex((t=>t===e));n.splice(i,1),t.updateActiveContexts({add:[e],remove:n})}},databaseTypeDescription:{type:"description",caption:" ",value:"Choose a type for this database connection"}}},d={values:{caption:{type:"text",caption:"Caption:",value:e.caption,placeholder:"<enter a unique caption>",options:[Jo.AutoFocus]},description:{type:"text",caption:"Description:",value:e.description,placeholder:"<describe the connection>"}}},c={contexts:["Sqlite"],caption:"Basic",groupName:"groupSqlite",values:{dbFilePath:{type:"resource",caption:"Database Path:",value:a.dbFile,filters:{"SQLite 3":["sqlite3","sqlite"]},placeholder:"<Enter the DB file location>",horizontalSpan:8},dbName:{type:"text",caption:"Database Name:",value:a.dbName,placeholder:"<enter a database name>"}}},u={contexts:["Sqlite"],caption:"Advanced",groupName:"groupSqlite",values:{otherParameters:{type:"text",caption:"Other Parameters:",value:a.otherParameters,horizontalSpan:8,multiLine:!0}}},h={contexts:["MySQL"],caption:"Basic",groupName:"group1",values:{hostName:{type:"text",caption:"Host Name or IP Address",value:r.host,horizontalSpan:4},scheme:{type:"choice",caption:"Protocol",value:r.scheme,choices:[qo.MySQL,qo.MySQLx],horizontalSpan:2},port:{type:"number",caption:"Port",value:r.port??3306,horizontalSpan:2},userName:{type:"text",caption:"User Name",value:r.user,horizontalSpan:4},storePassword:{type:"button",value:"Store Password",onClick:this.storePassword,horizontalSpan:2},clearPassword:{type:"button",value:"Clear Password",onClick:this.clearPassword,horizontalSpan:2},defaultSchema:{type:"text",caption:"Default Schema",value:r.schema,horizontalSpan:4},connectionTunnelingTitle:{type:"description",caption:"Tunneling Options",horizontalSpan:4,options:[Jo.Grouped,Jo.NewGroup]},useSSH:{type:"boolean",caption:"Connect using SSH Tunnel",value:!0===e.useSSH,horizontalSpan:4,onChange:(e,t)=>{const n={add:e?["useSSH"]:[],remove:e?[]:["useSSH"]};t.updateActiveContexts(n)},options:[Jo.Grouped]},useMDS:{type:"boolean",caption:"Connect using OCI Bastion service",value:!0===e.useMDS,onChange:(e,t)=>{const n={add:e?["useMDS"]:[],remove:e?[]:["useMDS"]};t.updateActiveContexts(n),e&&this.shellSession.mds.getMdsConfigProfiles().then((e=>{this.fillProfileDropdown(e)})).catch((e=>{nn.execute("showError",["Error while loading OCI profiles",String(e.message)])}))},horizontalSpan:4,options:[Jo.Grouped]}}},p={contexts:["MySQL"],caption:"SSL",groupName:"group1",values:{sslMode:{type:"choice",caption:"SSL Mode",value:ge(_ConnectionEditor,ne).get(r["ssl-mode"]??Vo.Preferred),choices:Array.from(ge(_ConnectionEditor,ne).values()),horizontalSpan:3},sslCipher:{type:"text",caption:"Permitted ciphers (optional, comma separated list)",value:r["ssl-cipher"],horizontalSpan:5},sslCaFile:{type:"resource",caption:"Path to Certificate Authority file for SSL",value:r["ssl-ca"],horizontalSpan:8},sslCertFile:{type:"resource",caption:"Path to Client Certificate file for SSL",value:r["ssl-cert"],horizontalSpan:8},sslKeyFile:{type:"resource",caption:"Path to Client Key file for SSL",value:r["ssl-key"],horizontalSpan:8}}},m={contexts:["MySQL","useSSH"],caption:"SSH Tunnel",groupName:"group1",values:{ssh:{type:"text",caption:"SSH URI (<user>@<host>:22)",value:r.ssh,horizontalSpan:4},sshKeyFile:{type:"resource",caption:"SSH Private Key File",value:r["ssh-identity-file"]??"id_rsa",horizontalSpan:4},sshConfigFilePath:{type:"resource",caption:"Custom Path for the SSH Configuration File",value:r["ssh-config-file"],horizontalSpan:8}}},g={contexts:["MySQL"],caption:"Advanced",groupName:"group1",values:{sqlMode:{type:"checkList",caption:"SQL Mode",value:r["sql-mode"],checkList:Object.entries(zo).map((([e,t])=>({data:{id:e,caption:t,checkState:Do.Unchecked}}))),horizontalSpan:4,verticalSpan:3},timeout:{type:"number",caption:"Connection Timeout",value:r["connect-timeout"],horizontalSpan:4},compression:{type:"choice",caption:"Compression",value:r.compression,choices:Object.keys(Ho),horizontalSpan:2,optional:!0},compressionLevel:{type:"number",caption:"Compression Level",value:r["compression-level"]??3,horizontalSpan:2},compressionAlgorithms:{type:"set",caption:"Compression Algorithms",value:null==(t=r["compression-algorithms"])?void 0:t.split(","),tagSet:["zstd","zlib","lz4","uncompressed"],horizontalSpan:4},disableHeatwaveCheckTitle:{type:"description",caption:"Connection Startup Checks",horizontalSpan:4,options:[Jo.Grouped,Jo.NewGroup]},disableHeatwaveCheck:{type:"boolean",caption:"Disable HeatWave Check",value:r["disable-heat-wave-check"]??!1,horizontalSpan:4,options:[Jo.Grouped]},others:{type:"matrix",caption:"Other Connection Options",value:this.parseConnectionAttributes(r["connection-attributes"]??{}),horizontalSpan:8}}};this.activeOciProfileName=r["profile-name"];const f={contexts:["MySQL","useMDS"],caption:"MDS/Bastion Service",groupName:"group1",values:{profileName:{type:"choice",caption:"Profile Name",value:this.activeOciProfileName,horizontalSpan:4,choices:this.ociProfileNames?this.ociProfileNames.map((e=>e.profile)):[],onChange:this.handleProfileNameChange},databaseTypeDescription:{type:"description",caption:" ",value:""},sshKeyFile:{type:"resource",caption:"SSH Private Key File",value:r["ssh-identity-file"]??"id_rsa_mysql_shell",horizontalSpan:4},sshPublicKeyFile:{type:"resource",caption:"SSH Public Key File",value:e.useMDS?r["ssh-public-identity-file"]??"id_rsa_mysql_shell.pub":"",horizontalSpan:4,options:e.useMDS?[]:[Jo.Disabled]},mysqlDbSystemId:{type:"text",caption:"MySQL DB System OCID",value:r["mysql-db-system-id"],horizontalSpan:8,onFocusLost:this.handleDbSystemIdChange},bastionId:{type:"text",caption:"Bastion OCID",value:this.liveUpdateFields.bastionId.value,horizontalSpan:8,showLoading:this.liveUpdateFields.bastionId.loading,onFocusLost:this.handleBastionIdChange},mysqlDbSystemName:{type:"text",caption:"MySQL DB System Name",value:this.liveUpdateFields.mdsDatabaseName.value,showLoading:this.liveUpdateFields.mdsDatabaseName.loading,options:[Jo.Disabled],horizontalSpan:4},bastionName:{type:"text",caption:"Bastion Name",value:this.liveUpdateFields.bastionName.value,showLoading:this.liveUpdateFields.mdsDatabaseName.loading,options:[Jo.Disabled],horizontalSpan:4}}};return{id:String(e.id),sections:new Map([["general",l],["information",d],["detailsHeaderSection",{caption:"Connection Details",values:{}}],["sqliteDetails",c],["sqliteAdvanced",u],["mysqlDetails",h],["ssl",p],["mysqlAdvanced",g],["ssh",m],["mdsAdvanced",f]])}})),pe(this,"storePassword",((e,t)=>{const n=t.sections.get("mysqlDetails").values,i=n.userName.value,o=n.hostName.value,s=n.port.value;if(i&&o){const e={requestId:"userInput",caption:"Open MySQL Connection",service:`${i}@${o}:${s}`,user:i};nn.execute("requestPassword",e)}else nn.execute("showError",["Missing Mandatory Fields","User, Host and port cannot be empty."])})),pe(this,"clearPassword",((e,t)=>{const n=t.sections.get("mysqlDetails").values,i=n.userName.value,o=n.hostName.value,s=n.port.value;i&&o&&Kn.users.clearPassword(`${i}@${o}:${s}`).then((()=>{this.confirmClearPasswordDialogRef.current&&this.confirmClearPasswordDialogRef.current.show(Ie(Container,{orientation:Di.TopDown,children:Ie(Grid,{columns:["auto"],columnGap:5,children:Ie(GridCell,{crossAlignment:ki.Stretch,children:"Password was cleared."})})}),{accept:"OK"},"Password Cleared")})).catch((e=>{nn.execute("showError",["Clear Password Error",String(e.message)])}))})),pe(this,"loadMdsAdditionalDataAndShowConnectionDlg",((e,t,n)=>{var i;const o=[e];(null==n?void 0:n.useMDS)&&o.push("useMDS"),(null==n?void 0:n.useSSH)&&o.push("useSSH"),this.beginValueUpdating("Loading...","bastionName"),this.beginValueUpdating("Loading...","mysqlDbSystemName"),null==(i=this.editorRef.current)||i.show(this.generateEditorConfig(n),{contexts:o,title:Ps,description:Ls},{createNew:t,details:n}),this.shellSession.mds.getMdsBastion(this.liveUpdateFields.profileName,this.liveUpdateFields.bastionId.value).then((e=>{e&&this.updateInputValue(e.name,"bastionName")})).catch((()=>{this.updateInputValue("<error loading bastion name data>","bastionName")})),this.shellSession.mds.getMdsMySQLDbSystem(this.liveUpdateFields.profileName,this.liveUpdateFields.dbSystemId).then((e=>{e&&this.updateInputValue(e.displayName,"mysqlDbSystemName")})).catch((()=>{this.updateInputValue("<error loading database OCI name data>","mysqlDbSystemName")}))})),pe(this,"handleBastionIdChange",((e,t,n=!1)=>{(e!==this.liveUpdateFields.bastionId.value||n)&&(this.liveUpdateFields.bastionId.value=e,this.beginValueUpdating("Loading...","bastionName"),this.shellSession.mds.getMdsBastion(this.liveUpdateFields.profileName,e).then((e=>{e&&this.updateInputValue(e.name,"bastionName")})).catch((e=>{this.updateInputValue(e,"bastionName")})))})),pe(this,"handleDbSystemIdChange",((e,t,n=!1)=>{(e!==this.liveUpdateFields.dbSystemId||n)&&(this.liveUpdateFields.dbSystemId=e,this.beginValueUpdating("Loading...","mysqlDbSystemName"),this.shellSession.mds.getMdsMySQLDbSystem(this.liveUpdateFields.profileName,e).then((e=>{e&&this.updateInputValue(e.displayName,"mysqlDbSystemName")})).catch((e=>{nn.execute("showError",["Get Mds Database Error",e]),this.updateInputValue("<error loading mds database info>","mysqlDbSystemName")})))})),pe(this,"handleProfileNameChange",((e,t)=>{const n=e;this.liveUpdateFields.profileName!==n&&(this.liveUpdateFields.profileName=n,this.handleBastionIdChange(this.liveUpdateFields.bastionId.value,t,!0),this.handleDbSystemIdChange(this.liveUpdateFields.dbSystemId,t,!0))})),pe(this,"handleTabSelect",(e=>{"MDS/Bastion Service"===e&&this.shellSession.mds.getMdsConfigProfiles().then((e=>{this.fillProfileDropdown(e)})).catch((e=>{nn.execute("showError",["Error when loading OCI profiles",String(e)])}))})),pe(this,"beginValueUpdating",((e,t)=>{var n;switch(t){case"bastionName":this.liveUpdateFields.bastionName.loading=!0,this.liveUpdateFields.bastionName.value=e;break;case"bastionId":this.liveUpdateFields.bastionId.loading=!0,this.liveUpdateFields.bastionId.value=e;break;case"mysqlDbSystemName":this.liveUpdateFields.mdsDatabaseName.loading=!0,this.liveUpdateFields.mdsDatabaseName.value=e}null==(n=this.editorRef.current)||n.beginValueUpdating(e,t)})),pe(this,"updateInputValue",((e,t)=>{var n;switch(t){case"bastionName":this.liveUpdateFields.bastionName.loading=!1,this.liveUpdateFields.bastionName.value=e;break;case"bastionId":this.liveUpdateFields.bastionId.loading=!1,this.liveUpdateFields.bastionId.value=e;break;case"mysqlDbSystemName":this.liveUpdateFields.mdsDatabaseName.loading=!1,this.liveUpdateFields.mdsDatabaseName.value=e}null==(n=this.editorRef.current)||n.updateInputValue(e,t)})),pe(this,"confirmBastionCreation",(e=>{this.confirmNewBastionDialogRef.current&&this.confirmNewBastionDialogRef.current.show(Ie(Container,{orientation:Di.TopDown,children:Ie(Grid,{columns:["auto"],columnGap:5,children:[Ie(GridCell,{crossAlignment:ki.Stretch,children:["There is no Bastion in the compartment of this MySQL DB System that can be used.",Ie("br",{}),Ie("br",{})]}),Ie(GridCell,{className:"right",crossAlignment:ki.Stretch,children:"Do you want to create a new Bastion in the compartment of the MySQL DB System?"})]})}),{refuse:"Cancel",accept:"Create New Bastion"},"Create New Bastion",void 0,{connection:e})})),pe(this,"handleCreateNewBastion",((e,t)=>{var n,i;if(e===$i.Accept&&t){const e=t.connection,o=[Ki.MySQL];e.useSSH&&o.push("useSSH"),o.push("useMDS"),this.beginValueUpdating("Loading...","bastionName"),this.beginValueUpdating("Loading...","mysqlDbSystemName"),this.beginValueUpdating("Loading...","bastionId"),null==(n=this.editorRef.current)||n.show(this.generateEditorConfig(e),{contexts:o,title:Ps,description:Ls},{createNew:!(e.id>0),details:e}),null==(i=this.editorRef.current)||i.preventConfirm(!0),this.setProgressMessage("Waiting up to 5 minutes for the bastion to be created."),this.showProgress(),setTimeout((()=>{nn.executeRemote("refreshOciTree",void 0)}),8e3),this.createBastion().then((e=>{var t;e&&(nn.executeRemote("refreshOciTree",void 0),this.updateInputValue(e.id,"bastionId"),this.updateInputValue(e.name,"bastionName"),this.hideProgress(),null==(t=this.editorRef.current)||t.preventConfirm(!1))})).catch((()=>{var e;nn.executeRemote("refreshOciTree",void 0),this.updateInputValue("<error loading bastion name data>","bastionName"),this.hideProgress(),null==(e=this.editorRef.current)||e.preventConfirm(!0)})),this.shellSession.mds.getMdsMySQLDbSystem(this.liveUpdateFields.profileName,this.liveUpdateFields.dbSystemId).then((e=>{e&&this.updateInputValue(e.displayName,"mysqlDbSystemName")})).catch((()=>{var e;null==(e=this.editorRef.current)||e.updateInputValue("<error loading database OCI name data>","mysqlDbSystemName")}))}})),pe(this,"setProgressMessage",(e=>{this.setState({progressMessage:e})})),pe(this,"showProgress",(()=>{this.setState({loading:!0})})),pe(this,"hideProgress",(()=>{this.setState({loading:!1,progressMessage:""})})),this.state={loading:!1,progressMessage:""}}render(){const{loading:e,progressMessage:t}=this.state,n=e?Ie(Re,{children:Ie(Container,{id:"connectionEditorProgressContainer",orientation:Di.LeftToRight,wrap:Ii.NoWrap,children:[Ie(ProgressIndicator,{id:"loadingProgressIndicator",backgroundOpacity:.95,indicatorWidth:25,indicatorHeight:25,stroke:1,linear:!1}),Ie(Label,{id:"progressMessageId",caption:t})]})}):void 0;return Ie(Re,{children:[Ie(ValueEditDialog,{ref:this.editorRef,id:"connectionEditor",onValidate:this.validateConnectionValues,onClose:this.handleOptionsDialogClose,onSelectTab:this.handleTabSelect,customFooter:n}),Ie(ConfirmDialog,{ref:this.confirmClearPasswordDialogRef,id:"confirmClearPasswordDlg"}),Ie(ConfirmDialog,{ref:this.confirmNewBastionDialogRef,id:"confirmNewBastionDialog",onClose:this.handleCreateNewBastion})]})}async show(e,t,n){if(0===this.knowDbTypes.length&&(this.knowDbTypes=await Kn.core.getDbTypes()),this.liveUpdateFields.bastionName.value="",this.liveUpdateFields.mdsDatabaseName.value="",this.liveUpdateFields.profileName="",this.liveUpdateFields.bastionId.value="",this.liveUpdateFields.dbSystemId="",(null==n?void 0:n.dbType)===Ki.MySQL){const e=n.options;n.useMDS=void 0!==e["mysql-db-system-id"],n.useSSH=void 0!==e.ssh}if(this.editorRef.current){const i=n&&"bastion-id"in n.options?n.options["bastion-id"]:void 0,o=n&&"profile-name"in n.options?n.options["profile-name"]:void 0,s=n&&"mysql-db-system-id"in n.options?n.options["mysql-db-system-id"]:void 0;if(i&&o&&s)this.liveUpdateFields.profileName=o,this.liveUpdateFields.bastionId.value=i,this.liveUpdateFields.dbSystemId=s,this.loadMdsAdditionalDataAndShowConnectionDlg(e,t,n);else if(n&&!i&&o&&s){let i="";"compartment-id"in n.options&&(i=n.options["compartment-id"],delete n.options["compartment-id"]),this.liveUpdateFields.profileName=o,this.liveUpdateFields.dbSystemId=s;const r=await this.shellSession.mds.getMdsBastions(o,i,s);r.length>0?(n.options["bastion-id"]=r[0].id,this.liveUpdateFields.bastionId.value=n.options["bastion-id"],this.loadMdsAdditionalDataAndShowConnectionDlg(e,t,n)):this.confirmBastionCreation(n)}else{const i=[e];(null==n?void 0:n.useSSH)&&i.push("useSSH"),(null==n?void 0:n.useMDS)&&i.push("useMDS"),this.editorRef.current.show(this.generateEditorConfig(n),{contexts:i,title:Ps,description:Ls},{createNew:t,details:n})}}}checkValidInt(e){if("number"==typeof e){if(Math.trunc(e)!==e)return}else{const t=An(null==e?void 0:e.toString());if(isNaN(t)||t<0)return}return e}fillProfileDropdown(e){var t,n,i;this.ociProfileNames=e;const o=(null==(t=this.ociProfileNames)?void 0:t.map((e=>e.profile)))??[],s=null==(n=this.ociProfileNames)?void 0:n.find((e=>!0===e.isCurrent));if(this.activeOciProfileName){o.find((e=>e===this.activeOciProfileName))||o.unshift(this.activeOciProfileName)}else this.activeOciProfileName=null==s?void 0:s.profile,this.liveUpdateFields.profileName=this.activeOciProfileName??"";o.unshift(" "),null==(i=this.editorRef.current)||i.updateDropdownValue(o,this.activeOciProfileName??"","profileName")}async createBastion(){var e;try{return await this.shellSession.mds.createBastion(this.liveUpdateFields.profileName,this.liveUpdateFields.dbSystemId,!0)}catch(t){throw nn.execute("showError",["Create Bastion Error",String(t)]),this.updateInputValue("<failed to create default bastion>","bastionName"),null==(e=this.editorRef.current)||e.updateInputValue("<failed to create default bastion>","bastionId"),t}}parseConnectionAttributes(e){return Object.entries(e).map((e=>({key:e[0],value:e[1]})))}};ne=new WeakMap,fe(Fs,ne,new Map([[Vo.Disabled,"Disable"],[Vo.Preferred,"Preferred"],[Vo.Required,"Require"],[Vo.VerifyCA,"Require and Verify CA"],[Vo.VerifyIdentity,"Require and Verify Identity"]]));let As=Fs;const Bs=class _ConnectionBrowser extends ComponentBase{constructor(e){super(e),pe(this,"editorRef",ke()),pe(this,"actionMenuRef",ke()),pe(this,"hostRef",ke()),pe(this,"currentTileDetails"),pe(this,"addNewConnection",(e=>{const t=e.mdsData;return t&&(t.profileName=e.profileName),this.doHandleTileAction("new",void 0,t),Promise.resolve(!0)})),pe(this,"editConnection",(e=>{const{connections:t}=this.props,n=t.find((t=>t.id===e));return n?(this.doHandleTileAction("edit",n,void 0),Promise.resolve(!0)):Promise.resolve(!1)})),pe(this,"removeConnection",(e=>{const{connections:t}=this.props,n=t.find((t=>t.id===e));return n?(this.doHandleTileAction("remove",n,void 0),Promise.resolve(!0)):Promise.resolve(!1)})),pe(this,"duplicateConnection",(e=>{const{connections:t}=this.props,n=t.find((t=>t.id===e));return n?(this.doHandleTileAction("duplicate",n,void 0),Promise.resolve(!0)):Promise.resolve(!1)})),pe(this,"handleSettingsChanged",(e=>"dbEditor.connectionBrowser.showGreeting"===(null==e?void 0:e.key)?(this.forceUpdate(),Promise.resolve(!0)):Promise.resolve(!1))),pe(this,"handleCloseGreeting",(()=>{hi.set("dbEditor.connectionBrowser.showGreeting",!1)})),pe(this,"dbFileDropped",(e=>{var t;this.hostRef.current&&this.hostRef.current.classList.remove("dropTarget");const{connections:n}=this.props,i=`New Connection ${n.length}`;return null==(t=this.editorRef.current)||t.show(Ki.Sqlite,!0,{id:-1,dbType:Ki.Sqlite,caption:i,description:"A new Database Connection",useMDS:!1,useSSH:!1,options:{dbFile:e}}),Promise.resolve(!0)})),pe(this,"handleDrop",(e=>{e.preventDefault(),e.stopPropagation(),e.currentTarget.classList.remove("dropTarget")})),pe(this,"handleDragOver",(e=>{if(e.preventDefault(),e.stopPropagation(),e.dataTransfer){const t=e.dataTransfer.types.includes("Files");e.dataTransfer.dropEffect=t?"link":"move"}})),pe(this,"handleDragEnter",(e=>{if(e.preventDefault(),e.stopPropagation(),e.dataTransfer){e.dataTransfer.effectAllowed="linkMove";e.dataTransfer.types.includes("Files")&&e.currentTarget.classList.add("dropTarget")}})),pe(this,"handleDragLeave",(e=>{e.preventDefault(),e.stopPropagation(),e.currentTarget.classList.remove("dropTarget")})),pe(this,"handleMenuItemClick",((e,t)=>(!t.children||0===St.count(t.children))&&(this.doHandleTileAction(t.id||"",this.currentTileDetails,{}),!0))),pe(this,"handleTileAction",((e,t,n)=>{const i=t;this.doHandleTileAction(e,null==i?void 0:i.details,n)})),pe(this,"doHandleTileAction",((e,t,n)=>{var i,o,s,r,a;const l=(null==t?void 0:t.dbType)??Ki.MySQL;switch(e){case"menu":if(this.currentTileDetails=t,n&&n.target instanceof HTMLElement){const e=n.target.getBoundingClientRect();null==(i=this.actionMenuRef.current)||i.open(e,!1)}break;case"edit":null==(o=this.editorRef.current)||o.show(l,!1,t);break;case"new":if(n&&void 0!==n.id){let e;n.endpoints&&Array.isArray(n.endpoints)&&n.endpoints.length>0&&(e=n.endpoints[0].ipAddress);const t={id:-1,caption:n.displayName??"",dbType:Ki.MySQL,description:n.description??"",useMDS:!0,useSSH:!1,options:{"compartment-id":n.compartmentId,"mysql-db-system-id":n.id,"profile-name":n.profileName??"DEFAULT",host:e,scheme:qo.MySQL}};null==(s=this.editorRef.current)||s.show(l,!0,t)}else null==(r=this.editorRef.current)||r.show(l,!0);break;case"duplicate":null==(a=this.editorRef.current)||a.show(l,!0,t);break;case"remove":t&&this.confirmTileRemoval(t);break;case"open":t&&(nn.execute("openConnectionTab",{details:t,force:(null==n?void 0:n.newTab)??!1,initialEditor:null==n?void 0:n.editor}),nn.executeRemote("selectConnectionTab",{connectionId:null==t?void 0:t.id,page:""}))}})),pe(this,"confirmTileRemoval",(e=>{setTimeout((()=>{nn.execute("showDialog",{type:Hi.Confirm,id:"deleteConnection",parameters:{prompt:`You are about to remove the connection "${e.caption}" from the list.`,refuse:"Cancel",accept:"Confirm",default:"Cancel"},data:{connection:e}})}),0)})),pe(this,"acceptPassword",(async e=>{if(e.request.service){try{await Kn.users.storePassword(e.request.service,e.password)}catch(t){nn.execute("showError",["Accept Password Error",String(t)])}return!0}return!1})),pe(this,"dialogResponse",(e=>{var t;if("deleteConnection"===e.id){const n=null==(t=e.data)?void 0:t.connection;if(n&&e.closure===$i.Accept){const{onDropConnection:e}=this.props;e(n.id)}return Promise.resolve(!0)}return Promise.resolve(!1)})),this.addHandledProperties("connections","toolbarItems","onAddConnection","onUpdateConnection","onDropConnection","onPushSavedConnection")}componentDidMount(){nn.register("settingsChanged",this.handleSettingsChanged),nn.register("dbFileDropped",this.dbFileDropped),nn.register("addNewConnection",this.addNewConnection),nn.register("editConnection",this.editConnection),nn.register("removeConnection",this.removeConnection),nn.register("duplicateConnection",this.duplicateConnection),nn.register("acceptPassword",this.acceptPassword),nn.register("dialogResponse",this.dialogResponse)}componentWillUnmount(){nn.unregister("settingsChanged",this.handleSettingsChanged),nn.unregister("dbFileDropped",this.dbFileDropped),nn.unregister("addNewConnection",this.addNewConnection),nn.unregister("editConnection",this.editConnection),nn.unregister("removeConnection",this.removeConnection),nn.unregister("duplicateConnection",this.duplicateConnection),nn.unregister("acceptPassword",this.acceptPassword),nn.unregister("dialogResponse",this.dialogResponse)}render(){const{connections:e,toolbarItems:t,onAddConnection:n,onUpdateConnection:i}=this.props,o=this.getEffectiveClassNames(["connectionBrowser"]),s=[];e.forEach((e=>{e&&s.push(Ie(ConnectionTile,{tileId:e.id,details:e,caption:e.caption,description:e.description,icon:_ConnectionBrowser.dbTypeToIconMap.get(e.dbType),type:$o.Open,draggable:!0,onAction:this.handleTileAction},e.id))})),s.push(Ie(ConnectionTile,{tileId:-1,details:{id:-1,dbType:Ki.MySQL,useSSH:!1,useMDS:!1,caption:"New Connection",description:"Add a new database connection",options:{dbFile:"",dbName:""}},caption:"New Connection",description:"Add a new database connection",icon:us,type:$o.CreateNew,onAction:this.handleTileAction},-1));const r=new Map;r.set("Learn More >","https://blogs.oracle.com/mysql/post/introducing-mysql-shell-for-vs-code"),r.set("Browse Tutorial >","https://www.mysql.com"),r.set("Read Docs >","https://www.mysql.com");const a=Ie(Toolbar,{id:"connectionOverviewToolbar",dropShadow:!1,children:[t.navigation,Ie("div",{className:"expander"}),t.auxillary]});return Ie(Container,{className:o,orientation:Di.TopDown,wrap:Ii.NoWrap,children:[a,Ie(As,{ref:this.editorRef,id:"connectionEditor",connections:e,onAddConnection:n,onUpdateConnection:i}),Ie(Po,{id:"tileActionMenu",ref:this.actionMenuRef,placement:Zn.BottomLeft,onItemClick:this.handleMenuItemClick,children:[Ie(MenuItem,{id:"edit",caption:"Edit Connection…",icon:ls}),Ie(MenuItem,{id:"duplicate",caption:"Duplicate Connection…",icon:Xo}),Ie(MenuItem,{caption:"-"}),Ie(MenuItem,{id:"shareConnection",caption:"Share Connection",icon:Xo,disabled:!0,children:[Ie(MenuItem,{id:"shareWithUser",caption:"With User...",icon:Xo}),Ie(MenuItem,{caption:"-"}),Ie(MenuItem,{id:"profile1",caption:"Profile 1",icon:Xo}),Ie(MenuItem,{id:"profile2",caption:"Profile 2",icon:Xo}),Ie(MenuItem,{id:"profile3",caption:"Profile 3",icon:Xo})]}),Ie(MenuItem,{id:"copyConnection",caption:"Copy Connection to Profile",icon:Xo,disabled:!0,children:Ie(MenuItem,{id:"profile1",caption:"Profile 1",icon:Xo})}),Ie(MenuItem,{caption:"-"}),Ie(MenuItem,{id:"remove",caption:"Remove Connection…"})]}),Ie(FrontPage,{showGreeting:hi.get("dbEditor.connectionBrowser.showGreeting",!0),caption:"MySQL Shell - DB Connections",description:"Welcome to the MySQL Shell for VS Code extension.\n\nClick the [New Connection] tile to add a new database connection. Click a [Database Connection] tile to open a new DB Notebook.\n\nDB Notebooks are modern editors for working with databases. You can use them to create and manage databases schema objects, write SQL queries and scripts, and work with data.",helpUrls:r,onCloseGreeting:this.handleCloseGreeting,children:[Ie(Label,{id:"contentTitle",caption:"Database Connections"}),Ie(Container,{innerRef:this.hostRef,id:"tilesHost",orientation:Di.LeftToRight,wrap:Ii.Wrap,onDrop:this.handleDrop,onDragOver:this.handleDragOver,onDragEnter:this.handleDragEnter,onDragLeave:this.handleDragLeave,children:s})]})]})}};pe(Bs,"dbTypeToIconMap",new Map([[Ki.Sqlite,Ts],[Ki.MySQL,Ds]]));let Ns=Bs;const Os="/assets/schemaTable-f36fcb01.svg",_s="/assets/schemaTableColumn-d651c689.svg",Gs="/assets/schemaRoutine-45a9de46.svg",Us="/assets/schemaView-573cfd09.svg",qs="/assets/schemaTableForeignKey-ee00398b.svg",Vs="/assets/adminPerformanceDashboard-e3059d5a.svg",zs="/assets/adminServerStatus-f3fdceff.svg",Hs="/assets/clientConnections-3590a866.svg",js=new Map([["javascript",Rs],["mysql",Es],["sql",xs],["python","/assets/scriptPy-5e3fe0e6.svg"],["msg","/assets/notebook-6ffe906a.svg"],["typescript",Ms]]),Ws=new Map([[jn.Status,zs],[jn.Connections,Hs],[jn.Dashboard,Vs]]);class Explorer extends ComponentBase{constructor(e){super(e),pe(this,"tableRef",ke()),pe(this,"schemaContextMenuRef",ke()),pe(this,"tableContextMenuRef",ke()),pe(this,"columnContextMenuRef",ke()),pe(this,"viewContextMenuRef",ke()),pe(this,"triggerContextMenuRef",ke()),pe(this,"indexContextMenuRef",ke()),pe(this,"fkContextMenuRef",ke()),pe(this,"eventContextMenuRef",ke()),pe(this,"routineContextMenuRef",ke()),pe(this,"folderContextMenuRef",ke()),pe(this,"scriptContextMenuRef",ke()),pe(this,"showSchemaTreeContextMenu",((e,t)=>{var n,i,o,s,r,a,l,d,c;const u=new DOMRect(t.clientX,t.clientY,2,2);switch(e.type){case Wn.Schema:null==(n=this.schemaContextMenuRef.current)||n.open(u,!1,{},e);break;case Wn.Table:null==(i=this.tableContextMenuRef.current)||i.open(u,!1,{},e);break;case Wn.Index:null==(o=this.indexContextMenuRef.current)||o.open(u,!1,{},e);break;case Wn.Column:null==(s=this.columnContextMenuRef.current)||s.open(u,!1,{},e);break;case Wn.StoredProcedure:case Wn.StoredFunction:null==(r=this.routineContextMenuRef.current)||r.open(u,!1,{},e);break;case Wn.Event:null==(a=this.eventContextMenuRef.current)||a.open(u,!1,{},e);break;case Wn.ForeignKey:null==(l=this.fkContextMenuRef.current)||l.open(u,!1,{},e);break;case Wn.View:null==(d=this.viewContextMenuRef.current)||d.open(u,!1,{},e);break;case Wn.Trigger:null==(c=this.triggerContextMenuRef.current)||c.open(u,!1,{},e)}return!0})),pe(this,"handleSchemaTreeContextMenuItemClick",((e,t,n)=>{const{id:i,onContextMenuItemClick:o}=this.props,s=n;switch(t.id){case"selectRowsMenuItem":{const e=s.qualifiedName.schema,t=s.qualifiedName.table;let n;const i=`${Rn(e)}.${Rn(t??"")}`,o=hi.get("dbEditor.upperCaseKeywords",!0),r=o?"SELECT":"select",a=o?"FROM":"from";n=s.type===Wn.Column?`${r} ${i}.${Rn(s.qualifiedName.name??"")} ${a} ${i}`:`${r} * ${a} ${i}`;const l={code:n,language:"mysql"};nn.execute("job",[{requestType:"editorRunCode",parameter:l}]);break}default:null==o||o(i??"",t.id,s)}return!0})),pe(this,"loadSchemaList",(()=>{const{backend:e}=this.props,t=[];e.getCatalogObjects("Schema").then((e=>{e.forEach((e=>{const n={type:Wn.Schema,expanded:!1,expandedOnce:!1,qualifiedName:{schema:e},id:e,caption:e,details:null,children:[this.generateGroupNode("Tables","Table",e),this.generateGroupNode("Views","View",e),this.generateGroupNode("Routines","Routine",e),this.generateGroupNode("Events","Event",e)]};t.push(n)})),this.setState({schemaList:t})})).catch((e=>{nn.execute("showError",["Backend Error",String(e)])}))})),pe(this,"schemaTreeCellFormatter",(e=>{const t=e.getData();let n="";switch(t.type){case Wn.Schema:n="/assets/schema-01406b44.svg";break;case Wn.Table:n=Os;break;case Wn.Column:n=_s;break;case Wn.StoredFunction:case Wn.StoredProcedure:n=Gs;break;case Wn.Event:n="/assets/schemaEvent-02b28cd6.svg";break;case Wn.Trigger:n="/assets/schemaTableTrigger-0644f24f.svg";break;case Wn.View:n=Us;break;case Wn.Index:n="/assets/schemaTableIndex-55c59dec.svg";break;case Wn.ForeignKey:n=qs;break;case Wn.GroupNode:switch(t.caption){case"Tables":n="/assets/schemaTables-d9bfd1ca.svg";break;case"Columns":n="/assets/schemaTableColumns-831030d4.svg";break;case"Events":n="/assets/schemaEvents-3b83d159.svg";break;case"Triggers":n="/assets/schemaTableTriggers-2d6296fe.svg";break;case"Foreign Keys":n=qs;break;case"Indexes":n="/assets/schemaTableIndexes-9dd0c561.svg";break;case"Views":n="/assets/schemaViews-6055b1d9.svg";break;case"Routines":n="/assets/schemaRoutines-6e8bf511.svg"}}const i=document.createElement("div");i.className="schemaTreeEntry";const o=Ie(Re,{children:[n&&Ie(xi,{src:n,width:16,height:16}),Ie(Label,{caption:t.caption})]});return Ue(o,i),i})),pe(this,"scriptTreeCellFormatter",(e=>{const t=e.getData();let n;switch(t.type){case jn.Script:{const e=t.language,i=js.get(e);i&&(n=Ie(Image,{src:i,width:16,height:16}));break}case jn.Folder:{const t=e.getRow();n=Ie(xi,{src:t.isTreeExpanded()?Ti.FolderOpened:Ti.Folder,width:20,height:20});break}}const i=document.createElement("div");i.className="schemaTreeEntry";const o=Ie(Re,{children:[n,Ie(Label,{caption:t.caption})]});return Ue(o,i),i})),pe(this,"removeDummyNode",(e=>{const t=e.getTreeChildren();if(t.length>0){"loading..."===t[0].getData().caption&&t[0].delete()}})),pe(this,"handleRowExpanded",(e=>{var t;const n=e.getData();if(n.expanded=!0,n.expanded&&!n.expandedOnce){n.expandedOnce=!0;const i=n.qualifiedName.schema,o=n.qualifiedName.table??"";null==(t=this.tableRef.current)||t.table.then((t=>{if(n.type===Wn.GroupNode)switch(n.id){case"groupNode.Tables":this.renderTablesOrViews(i,!0,e,t);break;case"groupNode.Views":this.renderTablesOrViews(i,!1,e,t);break;case"groupNode.Routines":case"groupNode.Events":this.renderSchemaObjects(i,n.qualifiedName.name??"",e,t);break;case"groupNode.Triggers":case"groupNode.Foreign Keys":case"groupNode.Indexes":case"groupNode.Columns":this.renderTableObjects(i,o,n.qualifiedName.name??"",e,t)}}))}})),pe(this,"groupNodeToSchemaTreeTypeName",(e=>{let t=Wn.GroupNode;switch(e){case"groupNode.Tables":t=Wn.Table;break;case"groupNode.Views":t=Wn.View;break;case"groupNode.Routines":t=Wn.StoredProcedure;break;case"groupNode.Events":t=Wn.Event;break;case"groupNode.Triggers":t=Wn.Trigger;break;case"groupNode.Foreign Keys":t=Wn.ForeignKey;break;case"groupNode.Indexes":t=Wn.Index;break;case"groupNode.Columns":t=Wn.Column}return t})),pe(this,"handleRowCollapsed",(e=>{e.getData().expanded=!1})),pe(this,"isRowExpanded",(e=>{const{markedSchema:t}=this.props,n=e.getData();return n.id===t&&!n.expandedOnce||n.expanded})),pe(this,"handleFormatSchemaRow",(e=>{const{markedSchema:t}=this.props;e.getData().caption===t?e.getElement().classList.add("marked"):e.getElement().classList.remove("marked")})),pe(this,"handleSchemaTreeRowContext",((e,t)=>{const n=t.getData();this.showSchemaTreeContextMenu(n,e)})),pe(this,"handleSchemaTreeDoubleClick",((e,t)=>{nn.execute("explorerDoubleClick",t.getData())})),pe(this,"handleAccordionItemClick",((e,t)=>{var n;const{onSelectItem:i}=this.props;if(t.id){const e=t;null==i||i(t.id,null==(n=e.payload)?void 0:n.type,e.caption)}})),pe(this,"handleScriptItemClick",((e,t)=>{const{onSelectItem:n}=this.props,i=t.getData();i.type===jn.Script&&i.id&&(null==n||n(i.id,jn.Script,i.caption))})),pe(this,"handleKeyPress",((e,t)=>{if(e.key===bn){const{editors:e}=this.props,n=e.find((e=>e.id===t.id));n&&this.setState({editing:t.id,tempCaption:n.caption})}})),pe(this,"handleEditorClose",((e,t)=>{const{onCloseItem:n}=this.props;null==n||n(t||"")})),pe(this,"handleSectionAction",((e,t,n)=>{switch(n){case"addConsole":{const{onAddItem:e,editors:t}=this.props,n=null==e?void 0:e();if(n){const e=t.find((e=>e.id===n));setTimeout((()=>{this.setState({editing:n,tempCaption:null==e?void 0:e.caption})}),200)}break}case"addTSScript":{const{onAddScript:e}=this.props;null==e||e("typescript");break}case"addJSScript":{const{onAddScript:e}=this.props;null==e||e("javascript");break}case"addSQLScript":{const{onAddScript:e}=this.props;null==e||e("sql");break}}})),pe(this,"handleSectionExpand",((e,t,n)=>{const{id:i,onSaveExplorerState:o,savedState:s}=this.props,r=s?new Map(s):new Map,a=r.get(t)??{};a.expanded=n,r.set(t,a),null==o||o(i??"",r)})),pe(this,"handleSectionResize",((e,t)=>{const{id:n,onSaveExplorerState:i,savedState:o}=this.props,s=o?new Map(o):new Map;t.forEach((e=>{const t=s.get(e.id)??{};t.size=e.currentSize,s.set(e.id,t)})),null==i||i(n??"",s)})),pe(this,"handleEditingDone",(()=>{const{onChangeItem:e}=this.props,{editing:t,tempCaption:n}=this.state;t&&n&&e&&(null==e||e(t,n)),this.setState({editing:void 0,tempCaption:void 0})})),pe(this,"renderEditorEntries",(()=>{const{editors:e,selectedEntry:t}=this.props,{editing:n,tempCaption:i}=this.state;return e.map((e=>{if(e.id===n)return Ie(Input,{value:i,autoFocus:!0,onBlur:this.handleEditingDone,onChange:(e,t)=>this.setState({tempCaption:t.value}),onConfirm:this.handleEditingDone,onCancel:()=>this.setState({editing:void 0,tempCaption:void 0})},e.id);{let n;if(e.state){const t=e.state.model.getLanguageId();n=js.get(t)??Is,"msg"===t&&(n=Ie(xi,{src:n,width:"20px",height:"20px"}))}else{const t=Ws.get(e.type)||Is;n=Ie(xi,{src:t,width:"20px",height:"20px"})}return Ie(Accordion.Item,{id:e.id,caption:e.caption,active:e.id===t,picture:n,closable:!0,payload:{type:e.type},onClose:this.handleEditorClose,onClick:this.handleAccordionItemClick,onKeyPress:this.handleKeyPress},e.id)}}))})),pe(this,"renderScriptEntries",(()=>{const{scripts:e,selectedEntry:t}=this.props;if(0===e.length)return Ie(Accordion.Item,{caption:"<no scripts>"});const n=[{title:"",field:"caption",resizable:!1,editable:e=>e.getRow().getElement().classList.contains("tabulator-selected"),hozAlign:"left",formatter:this.scriptTreeCellFormatter,cellClick:this.handleScriptItemClick,editor:"input",cellEdited:this.handleCellEdited}],i={treeColumn:"caption",selectionType:ii.Single,showHeader:!1,layout:"fitColumns",expandedLevels:[!0,!1,!0]};return Ie(TreeGrid,{ref:this.tableRef,options:i,columns:n,tableData:e,selectedIds:[t],onRowContext:this.handleScriptTreeRowContext})})),pe(this,"handleCellEdited",(e=>{const{onChangeItem:t}=this.props,n=e.getData();null==t||t(n.id,e.getValue())})),pe(this,"handleScriptTreeRowContext",((e,t)=>{const n=t.getData();this.showScriptTreeContextMenu(n,e)})),pe(this,"showScriptTreeContextMenu",((e,t)=>{var n,i;const o=new DOMRect(t.clientX,t.clientY,2,2);switch(e.type){case jn.Folder:null==(n=this.folderContextMenuRef.current)||n.open(o,!1,{},e);break;case jn.Script:null==(i=this.scriptContextMenuRef.current)||i.open(o,!1,{},e)}return!0})),pe(this,"handleScriptTreeContextMenuItemClick",((e,t,n)=>{const{id:i,onContextMenuItemClick:o}=this.props,s=n;return t.id,null==o||o(i??"",t.id,s),!0})),pe(this,"renderTableObjects",(async(e,t,n,i,o,s)=>{const{backend:r}=this.props;null==o||o.blockRedraw(),this.removeDummyNode(i);const a=i.getData();try{(await r.getTableObjects(e,t,n,s)).forEach((n=>{const o={type:this.groupNodeToSchemaTreeTypeName(a.id),expanded:!1,expandedOnce:!1,qualifiedName:{schema:e,table:t,name:n},id:`${e}.${t}.${n}`,caption:n,details:null};i.addTreeChild(o)}))}catch(l){nn.execute("showError",["Backend Error","Could not get column information.",l])}i.treeExpand(),null==o||o.restoreRedraw()})),pe(this,"renderSchemaObjects",(async(e,t,n,i,o)=>{const{backend:s}=this.props;null==i||i.blockRedraw();try{if("Routine"===t){let i=await s.getSchemaObjects(e,t,"function",o);this.addTreeChildren(n,i,e,Wn.StoredFunction),i=await s.getSchemaObjects(e,t,"procedure",o),this.addTreeChildren(n,i,e,Wn.StoredProcedure)}else{const i=n.getData(),r=await s.getSchemaObjects(e,t,void 0,o);this.addTreeChildren(n,r,e,this.groupNodeToSchemaTreeTypeName(i.id))}}catch(r){nn.execute("showError",["Backend Error","Retrieving schema objects failed:",r])}null==i||i.restoreRedraw()})),this.state={},this.addHandledProperties("schemaTree","editors","scripts","selectedEntry","markedSchema","backend","onSelectItem","dbType","onDoubleClickItem","onCloseItem","onAddItem","onChangeItem","onAddScript","onSaveSchemaTree","onSaveExplorerState","onContextMenuItemClick")}componentDidMount(){this.updateSchemaList()}componentWillUnmount(){const{id:e,onSaveSchemaTree:t}=this.props,{schemaList:n}=this.state;null==t||t(e??"",n??[])}componentDidUpdate(e,t){var n;const{id:i,markedSchema:o,onSaveSchemaTree:s}=this.props;if(i!==e.id){const{schemaList:n}=t;null==s||s(e.id,n||[]),this.updateSchemaList()}o!==e.markedSchema&&(null==(n=this.tableRef.current)||n.table.then((t=>{if(t){let n=t.searchRows("caption","=",o);n.forEach((e=>{e.reformat()})),n=t.searchRows("caption","=",e.markedSchema),n.forEach((e=>{e.reformat()}))}})))}render(){const{savedState:e,dbType:t}=this.props,{editing:n,schemaList:i}=this.state,o=this.getEffectiveClassNames(["scriptingExplorer"]),s=[{title:"",field:"caption",resizable:!1,hozAlign:"left",formatter:this.schemaTreeCellFormatter,cellDblClick:this.handleSchemaTreeDoubleClick}],r={treeColumn:"caption",selectionType:ii.Single,showHeader:!1,layout:"fitColumns"},a=i&&i.length>0?Ie(TreeGrid,{ref:this.tableRef,options:r,columns:s,tableData:i,onRowExpanded:this.handleRowExpanded,onRowCollapsed:this.handleRowCollapsed,isRowExpanded:this.isRowExpanded,onFormatRow:this.handleFormatSchemaRow,onRowContext:this.handleSchemaTreeRowContext}):Ie(Accordion.Item,{caption:"<no schemas>"}),l=(null==e?void 0:e.get("editorSection"))??{},d=(null==e?void 0:e.get("schemaSection"))??{},c=(null==e?void 0:e.get("adminSection"))??{},u=(null==e?void 0:e.get("scriptSection"))??{},h=t===Ki.MySQL?Es:xs;return Ie(Re,{children:[Ie(Accordion,{className:o,caption:"Explorer",sections:[{id:"editorSection",caption:"OPEN EDITORS",stretch:!1,minSize:56,maxSize:150,expanded:l.expanded,initialSize:l.size,dimmed:null!=n,actions:[{id:"addConsole",icon:Ti.NewFile,tooltip:"Add new console"}],content:this.renderEditorEntries()},{id:"schemaSection",caption:"SCHEMAS",stretch:!0,expanded:d.expanded,initialSize:d.size,resizable:!0,minSize:100,content:a},{id:"adminSection",caption:"ADMINISTRATION",stretch:!0,expanded:c.expanded,initialSize:c.size,resizable:!0,minSize:100,content:[Ie(Accordion.Item,{id:an(),caption:"Server Status",picture:Ie(xi,{src:zs,width:"20px",height:"20px"}),payload:{type:jn.Status},onClick:this.handleAccordionItemClick},"serverStatus"),Ie(Accordion.Item,{id:an(),caption:"Client Connections",picture:Ie(xi,{src:Hs,width:"20px",height:"20px"}),payload:{type:jn.Connections},onClick:this.handleAccordionItemClick},"clientConnections"),Ie(Accordion.Item,{id:an(),caption:"Performance Dashboard",picture:Ie(xi,{src:Vs,width:"20px",height:"20px"}),payload:{type:jn.Dashboard},onClick:this.handleAccordionItemClick},"performanceDashboard")]},{id:"scriptSection",caption:"SCRIPTS",dimmed:null!=n,expanded:u.expanded,initialSize:u.size,stretch:!0,minSize:100,actions:[{id:"addFolder",icon:Ti.FileDirectoryCreate},{id:"addScript",icon:Ti.KebabVertical,tooltip:"Add new Script",choices:[{id:"addTSScript",icon:Ms,caption:"Add TS Script"},{id:"addJSScript",icon:Rs,caption:"Add JS Script"},{id:"addSQLScript",icon:h,caption:"Add SQL Script"}]}],content:this.renderScriptEntries()}],onSectionAction:this.handleSectionAction,onSectionExpand:this.handleSectionExpand,onSectionResize:this.handleSectionResize,...this.unhandledProperties}),Ie(Po,{id:"schemaContextMenu",ref:this.schemaContextMenuRef,placement:Zn.BottomLeft,onItemClick:this.handleSchemaTreeContextMenuItemClick,children:[Ie(MenuItem,{id:"setCurrentSchemaMenuItem",caption:"Set as Current Schema"}),Ie(MenuItem,{id:"filterMenuItem",caption:"Filter to this Schema",disabled:!0}),Ie(MenuItem,{id:"inspectorMenuItem",caption:"Show Schema Inspector",disabled:!0}),Ie(MenuItem,{caption:"-",disabled:!0}),Ie(MenuItem,{id:"clipboardMenu",caption:"Copy to Clipboard",children:[Ie(MenuItem,{id:"clipboardNameMenuItem",caption:"Name"}),Ie(MenuItem,{id:"clipboardCreateStatementMenuItem",caption:"Create Statement"})]}),Ie(MenuItem,{id:"sendToEditorMenu",caption:"Send to SQL Editor",children:[Ie(MenuItem,{id:"editorNameMenuItem",caption:"Name"}),Ie(MenuItem,{id:"editorCreateStatementMenuItem",caption:"Create Statement"})]}),Ie(MenuItem,{caption:"-",disabled:!0}),Ie(MenuItem,{id:"createSchemaMenuItem",caption:"Create Schema...",disabled:!0}),Ie(MenuItem,{id:"alterSchemaMenuItem",caption:"Alter Schema...",disabled:!0}),Ie(MenuItem,{caption:"-",disabled:!0}),Ie(MenuItem,{id:"dropSchemaMenuItem",caption:"Drop Schema...",disabled:!0}),Ie(MenuItem,{caption:"-",disabled:!0}),Ie(MenuItem,{id:"refreshMenuItem",caption:"Refresh All",disabled:!0})]}),Ie(Po,{id:"tableContextMenu",ref:this.tableContextMenuRef,placement:Zn.BottomLeft,onItemClick:this.handleSchemaTreeContextMenuItemClick,children:[Ie(MenuItem,{id:"selectRowsMenuItem",caption:"Select Rows"}),Ie(MenuItem,{id:"tableInspectorMenuItem",caption:"Table Inspector",disabled:!0}),Ie(MenuItem,{id:"tableDataExportMenuItem",caption:"Table Data Export Wizard",disabled:!0}),Ie(MenuItem,{id:"tableDataImportMenuItem",caption:"Table Data Import Wizard",disabled:!0}),Ie(MenuItem,{caption:"-",disabled:!0}),Ie(MenuItem,{id:"clipboardMenu",caption:"Copy to Clipboard",children:[Ie(MenuItem,{id:"clipboardNameMenuItem",caption:"Name"}),Ie(MenuItem,{id:"clipboardCreateStatementMenuItem",caption:"Create Statement"})]}),Ie(MenuItem,{id:"sendToEditorMenu",caption:"Send to SQL Editor",children:[Ie(MenuItem,{id:"editorNameMenuItem",caption:"Name"}),Ie(MenuItem,{id:"editorCreateStatementMenuItem",caption:"Create Statement"})]}),Ie(MenuItem,{caption:"-",disabled:!0}),Ie(MenuItem,{id:"createTableMenuItem",caption:"Create Table...",disabled:!0}),Ie(MenuItem,{id:"createTableLikeMenu",caption:"Create Table Like",children:[Ie(MenuItem,{id:"template1",caption:"Template 1",disabled:!0}),Ie(MenuItem,{id:"template2",caption:"Template 2",disabled:!0})]}),Ie(MenuItem,{id:"alterTableMenuItem",caption:"Alter Table...",disabled:!0}),Ie(MenuItem,{id:"tableMaintenanceMenuItem",caption:"Table Maintenance...",disabled:!0}),Ie(MenuItem,{caption:"-",disabled:!0}),Ie(MenuItem,{id:"dropTableMenuItem",caption:"Drop Table...",disabled:!0}),Ie(MenuItem,{id:"dropTableMenuItem",caption:"Truncate Table...",disabled:!0}),Ie(MenuItem,{caption:"-",disabled:!0}),Ie(MenuItem,{id:"searchMenuItem",caption:"Search Table Data...",disabled:!0}),Ie(MenuItem,{caption:"-",disabled:!0}),Ie(MenuItem,{id:"refreshMenuItem",caption:"Refresh All",disabled:!0})]}),Ie(Po,{id:"columnContextMenu",ref:this.columnContextMenuRef,placement:Zn.BottomLeft,onItemClick:this.handleSchemaTreeContextMenuItemClick,children:[Ie(MenuItem,{id:"selectRowsMenuItem",caption:"Select Rows"}),Ie(MenuItem,{id:"clipboardMenu",caption:"Copy to Clipboard",children:[Ie(MenuItem,{id:"clipboardNameMenuItem",caption:"Name"}),Ie(MenuItem,{id:"clipboardInsertStatementMenuItem",caption:"Insert Statement",disabled:!0}),Ie(MenuItem,{id:"clipboardUpdateStatementMenuItem",caption:"Update Statement",disabled:!0})]}),Ie(MenuItem,{id:"sendToEditorMenu",caption:"Send to SQL Editor",children:[Ie(MenuItem,{id:"editorNameMenuItem",caption:"Name",disabled:!0}),Ie(MenuItem,{id:"editorInsertStatementMenuItem",caption:"Insert Statement",disabled:!0}),Ie(MenuItem,{id:"editorUpdateStatementMenuItem",caption:"Update Statement",disabled:!0})]}),Ie(MenuItem,{id:"createIndex",caption:"Create index",disabled:!0}),Ie(MenuItem,{id:"refreshMenuItem",caption:"Refresh All",disabled:!0})]}),Ie(Po,{id:"viewContextMenu",ref:this.viewContextMenuRef,placement:Zn.BottomLeft,onItemClick:this.handleSchemaTreeContextMenuItemClick,children:[Ie(MenuItem,{id:"selectRowsMenuItem",caption:"Select Rows"}),Ie(MenuItem,{caption:"-",disabled:!0}),Ie(MenuItem,{id:"clipboardMenu",caption:"Copy to Clipboard",children:[Ie(MenuItem,{id:"clipboardNameMenuItem",caption:"Name"}),Ie(MenuItem,{id:"clipboardCreateStatementMenuItem",caption:"Create Statement"})]}),Ie(MenuItem,{id:"sendToEditorMenu",caption:"Send to SQL Editor",children:[Ie(MenuItem,{id:"editorNameMenuItem",caption:"Name"}),Ie(MenuItem,{id:"editorCreateStatementMenuItem",caption:"Create Statement"})]}),Ie(MenuItem,{caption:"-",disabled:!0}),Ie(MenuItem,{id:"createViewMenuItem",caption:"Create View ...",disabled:!0}),Ie(MenuItem,{id:"alterViewMenuItem",caption:"Alter View ...",disabled:!0}),Ie(MenuItem,{id:"dropViewMenuItem",caption:"Drop View ...",disabled:!0}),Ie(MenuItem,{caption:"-",disabled:!0}),Ie(MenuItem,{id:"refreshMenuItem",caption:"Refresh All",disabled:!0})]}),Ie(Po,{id:"eventContextMenu",ref:this.eventContextMenuRef,placement:Zn.BottomLeft,onItemClick:this.handleSchemaTreeContextMenuItemClick,children:[Ie(MenuItem,{caption:"-",disabled:!0}),Ie(MenuItem,{id:"clipboardMenu",caption:"Copy to Clipboard",children:[Ie(MenuItem,{id:"clipboardNameMenuItem",caption:"Name"}),Ie(MenuItem,{id:"clipboardCreateStatementMenuItem",caption:"Create Statement"})]}),Ie(MenuItem,{id:"sendToEditorMenu",caption:"Send to SQL Editor",children:[Ie(MenuItem,{id:"editorNameMenuItem",caption:"Name"}),Ie(MenuItem,{id:"editorCreateStatementMenuItem",caption:"Create Statement"})]}),Ie(MenuItem,{caption:"-",disabled:!0}),Ie(MenuItem,{id:"createViewMenuItem",caption:"Create Event ...",disabled:!0}),Ie(MenuItem,{id:"alterViewMenuItem",caption:"Alter Event ...",disabled:!0}),Ie(MenuItem,{id:"dropViewMenuItem",caption:"Drop Event ...",disabled:!0}),Ie(MenuItem,{caption:"-",disabled:!0}),Ie(MenuItem,{id:"refreshMenuItem",caption:"Refresh All",disabled:!0})]}),Ie(Po,{id:"routineContextMenu",ref:this.routineContextMenuRef,placement:Zn.BottomLeft,onItemClick:this.handleSchemaTreeContextMenuItemClick,children:[Ie(MenuItem,{id:"clipboardMenu",caption:"Copy to Clipboard",children:[Ie(MenuItem,{id:"clipboardNameMenuItem",caption:"Name",disabled:!0}),Ie(MenuItem,{id:"clipboardCreateStatementMenuItem",caption:"Create Statement"})]}),Ie(MenuItem,{id:"sendToEditorMenu",caption:"Send to SQL Editor",children:[Ie(MenuItem,{id:"editorNameMenuItem",caption:"Name"}),Ie(MenuItem,{id:"editorCreateStatementMenuItem",caption:"Create Statement"})]}),Ie(MenuItem,{caption:"-",disabled:!0}),Ie(MenuItem,{id:"createViewMenuItem",caption:"Create Routine ...",disabled:!0}),Ie(MenuItem,{id:"alterViewMenuItem",caption:"Alter Routine ...",disabled:!0}),Ie(MenuItem,{id:"dropViewMenuItem",caption:"Drop Routine ...",disabled:!0}),Ie(MenuItem,{caption:"-",disabled:!0}),Ie(MenuItem,{id:"refreshMenuItem",caption:"Refresh All",disabled:!0})]}),Ie(Po,{id:"indexContextMenu",ref:this.indexContextMenuRef,placement:Zn.BottomLeft,onItemClick:this.handleSchemaTreeContextMenuItemClick,children:[Ie(MenuItem,{caption:"-",disabled:!0}),Ie(MenuItem,{id:"clipboardMenu",caption:"Copy to Clipboard",children:[Ie(MenuItem,{id:"clipboardNameMenuItem",caption:"Name"}),Ie(MenuItem,{id:"clipboardCreateStatementMenuItem",caption:"Create Statement"})]}),Ie(MenuItem,{id:"sendToEditorMenu",caption:"Send to SQL Editor",children:Ie(MenuItem,{id:"editorNameMenuItem",caption:"Name"})}),Ie(MenuItem,{caption:"-",disabled:!0}),Ie(MenuItem,{id:"refreshMenuItem",caption:"Refresh All",disabled:!0})]}),Ie(Po,{id:"triggerContextMenu",ref:this.triggerContextMenuRef,placement:Zn.BottomLeft,onItemClick:this.handleSchemaTreeContextMenuItemClick,children:[Ie(MenuItem,{id:"createSchemaMenuItem",caption:"Create Schema",disabled:!0}),Ie(MenuItem,{caption:"-",disabled:!0}),Ie(MenuItem,{id:"refreshMenuItem",caption:"Refresh All",disabled:!0})]}),Ie(Po,{id:"fkContextMenu",ref:this.fkContextMenuRef,placement:Zn.BottomLeft,onItemClick:this.handleSchemaTreeContextMenuItemClick,children:[Ie(MenuItem,{id:"createSchemaMenuItem",caption:"Create Schema",disabled:!0}),Ie(MenuItem,{caption:"-",disabled:!0}),Ie(MenuItem,{id:"refreshMenuItem",caption:"Refresh All",disabled:!0})]}),Ie(Po,{id:"folderContextMenu",ref:this.folderContextMenuRef,placement:Zn.BottomLeft,onItemClick:this.handleScriptTreeContextMenuItemClick,children:[Ie(MenuItem,{id:"removeFolder",caption:"Remove Folder",disabled:!0}),Ie(MenuItem,{caption:"-",disabled:!0}),Ie(MenuItem,{id:"refreshMenuItem",caption:"Refresh All",disabled:!0})]}),Ie(Po,{id:"scriptContextMenu",ref:this.scriptContextMenuRef,placement:Zn.BottomLeft,onItemClick:this.handleScriptTreeContextMenuItemClick,children:[Ie(MenuItem,{id:"openScriptItem",caption:"Open Script in Editor",disabled:!0}),Ie(MenuItem,{caption:"-",disabled:!0}),Ie(MenuItem,{id:"cutScriptMenuItem",caption:"Cut",disabled:!0}),Ie(MenuItem,{id:"copyScriptMenuItem",caption:"Copy",disabled:!0}),Ie(MenuItem,{id:"copyScriptPathMenuItem",caption:"Copy Path",disabled:!0}),Ie(MenuItem,{id:"pasteScriptMenuItem",caption:"Paste",disabled:!0}),Ie(MenuItem,{caption:"-",disabled:!0}),Ie(MenuItem,{id:"renameScriptMenuItem",caption:"Rename Script",disabled:!0}),Ie(MenuItem,{id:"deleteScriptMenuItem",caption:"Delete Script"})]})]})}updateSchemaList(){const{schemaTree:e}=this.props;if(0===e.length)this.loadSchemaList();else{const t=e=>{e.forEach((e=>{t(e.children??[])}))};t(e),this.setState({schemaList:e})}}async renderTablesOrViews(e,t,n,i){const{backend:o}=this.props;null==i||i.blockRedraw(),this.removeDummyNode(n);try{const i=await o.getSchemaObjects(e,t?"Table":"View");for(const t of i){const i={type:Wn.Table,expanded:!1,expandedOnce:!1,qualifiedName:{schema:e,table:t},id:e+"."+t,caption:t,details:null,children:[this.generateGroupNode("Columns","Column",e,t)]};t&&i.children.push(this.generateGroupNode("Triggers","Trigger",e,t),this.generateGroupNode("Foreign Keys","Foreign Key",e,t),this.generateGroupNode("Indexes","Index",e,t)),n.addTreeChild(i)}}catch(s){nn.execute("showError",["Backend Error","Could not get column information.",s])}n.treeExpand(),null==i||i.restoreRedraw()}addTreeChildren(e,t,n,i){this.removeDummyNode(e);for(const o of t){const t={type:i,expanded:!1,expandedOnce:!1,qualifiedName:{schema:n,name:o},id:`${n}..${o}`,caption:o,details:null};e.addTreeChild(t)}e.treeExpand()}generateGroupNode(e,t,n,i){return{type:Wn.GroupNode,expanded:!1,expandedOnce:!1,qualifiedName:{schema:n,table:i,name:t},id:"groupNode."+e,caption:e,details:null,children:[{type:Wn.GroupNode,expanded:!1,expandedOnce:!1,qualifiedName:{schema:n,table:i},id:e+"<loading>",caption:"loading...",details:null}]}}}class StandalonePresentationInterface extends No{constructor(e,t,n,i){super(t,n),pe(this,"resizeObserver"),this.host=e,this.target=i,this.alwaysShowTab=!0}get resultDivider(){}removeRenderTarget(){super.removeRenderTarget(),this.resizeObserver&&(this.resizeObserver.disconnect(),this.resizeObserver=void 0),this.host.setState({showResultPane:!1})}updateRenderTarget(e){super.updateRenderTarget(e),void 0!==e&&(this.currentHeight=e),this.host.setState({showResultPane:!0,maximizeResultPane:this.maximizedResult??!1})}defineRenderTarget(){const e=this.target.current;return e?("undefined"!=typeof ResizeObserver&&(this.resizeObserver=new ResizeObserver((t=>{var n;const i=t.pop();if(i&&!this.currentHeight){const t=No.maxAutoHeight[(null==(n=this.resultData)?void 0:n.type)??"text"],o=Math.min(i.borderBoxSize[0].blockSize,t);e.clientHeight>t&&(e.style.height=`${o}px`),this.currentHeight=o}})),this.resizeObserver.observe(e)),this.host.setState({showResultPane:!0,maximizeResultPane:this.maximizedResult??!1}),this.target.current):document.createElement("div")}get hideTabs(){return this.maximizedResult?"always":"never"}}class ScriptEditor extends ComponentBase{constructor(e){super(e),pe(this,"editorRef",ke()),pe(this,"resultRef",ke()),pe(this,"presentationInterface"),pe(this,"handleCursorChange",(e=>{nn.execute("updateStatusbar",[{id:"editorPosition",visible:!0,text:`Ln ${e.lineNumber||1}, Col ${e.column||1}`}])})),pe(this,"handleModelChange",(()=>{const{id:e,onEdit:t}=this.props;null==t||t(e)})),pe(this,"handleExplorerDoubleClick",(e=>{var t,n;return null==(t=this.editorRef.current)||t.insertText(e.caption),null==(n=this.editorRef.current)||n.focus(),Promise.resolve(!0)})),pe(this,"sendStatusInfo",(()=>{var e;if(this.editorRef.current){const t=this.getActiveEditorState().state;if(t){const n=null==(e=t.viewState)?void 0:e.cursorState[0].position,i=t.model.getLanguageId(),o={insertSpaces:t.options.insertSpaces,indentSize:t.options.indentSize??4,tabSize:t.options.tabSize??4,line:(null==n?void 0:n.lineNumber)??1,column:(null==n?void 0:n.column)??1,language:i,eol:t.options.defaultEOL||"LF"};nn.execute("editorInfoUpdated",o)}}})),pe(this,"createPresentation",((e,t)=>(this.presentationInterface=new StandalonePresentationInterface(this,e.backend,t,this.resultRef),this.presentationInterface))),pe(this,"handlePaneResized",(e=>{e.forEach((e=>{"resultPane"===e.id&&this.presentationInterface&&(this.presentationInterface.currentHeight=e.currentSize)}))})),pe(this,"toggleMaximizeResultPane",(()=>{var e;null==(e=this.presentationInterface)||e.toggleResultPane()})),pe(this,"closeEditor",(()=>{const{savedState:e}=this.props;nn.execute("editorClose",{connectionId:e.connectionId,editorId:e.activeEntry})})),pe(this,"handleEditorLoad",(()=>{const{lastId:e}=this.state,t=this.getActiveEditorState().state;if(t){const n={scriptId:e,content:"",language:t.model.getLanguageId()};nn.executeRemote("editorLoadScript",n)}})),pe(this,"handleEditorSave",(()=>{const{lastId:e}=this.state,t=this.getActiveEditorState().state;if(t){const n=t.model,i={scriptId:e,content:n.getValue(),language:n.getLanguageId()};nn.executeRemote("editorSaveScript",i)}})),this.state={lastId:"",showResultPane:!1,maximizeResultPane:!1},this.addHandledProperties("standaloneMode","toolbarItems","extraLibs","backend","onScriptExecution","onEdit")}static getDerivedStateFromProps(e,t){const{savedState:n}=e,{lastId:i}=t;return n.activeEntry!==i?{lastId:n.activeEntry,showResultPane:!1,maximizeResultPane:!1}:{}}componentDidMount(){nn.register("explorerDoubleClick",this.handleExplorerDoubleClick),this.sendStatusInfo()}componentDidUpdate(){this.sendStatusInfo()}componentWillUnmount(){nn.execute("updateStatusbar",[{id:"editorLanguage",visible:!1},{id:"editorIndent",visible:!1},{id:"editorPosition",visible:!1},{id:"editorEOL",visible:!1}]),nn.unregister("explorerDoubleClick",this.handleExplorerDoubleClick)}render(){var e,t;const{standaloneMode:n,savedState:i,toolbarItemsTemplate:o,backend:s,extraLibs:r,fontSize:a,onScriptExecution:l}=this.props,{showResultPane:d,maximizeResultPane:c}=this.state,u=this.getEffectiveClassNames(["standaloneScriptHost"]),h=(null==(e=this.presentationInterface)?void 0:e.currentHeight)??300,p=this.getActiveEditorState(),m=(null==(t=p.state)?void 0:t.model.getLanguageId())??"";let g;if(c)g=Ie(Toolbar,n?{id:"dbEditorToolbar",dropShadow:!1,children:[o.execution,Ie("div",{className:"expander"}),Ie(Button,{id:"normalizeResultStateButton",imageOnly:!0,"data-tooltip":"Return to embedded results",onClick:this.closeEditor,children:Ie(xi,{src:yo,"data-tooltip":"inherit"})})]}:{id:"dbEditorToolbar",dropShadow:!1,children:[o.navigation,o.execution,o.editor,Ie("div",{className:"expander"}),Ie(Button,{id:"normalizeResultStateButton",imageOnly:!0,"data-tooltip":"Normalize Result Tab",onClick:this.toggleMaximizeResultPane,children:Ie(xi,{src:yo,"data-tooltip":"inherit"})}),o.auxillary]});else{const e={navigation:o.navigation.slice(),execution:o.execution,editor:o.editor,auxillary:o.auxillary};e.navigation.push(Ie(Button,{id:"itemSaveButton",imageOnly:!0,"data-tooltip":"Save Script To File",style:{marginLeft:"4px"},onClick:this.handleEditorSave,children:Ie(xi,{src:"/assets/toolbar-save-e0a58868.svg","data-tooltip":"inherit"})},"itemSaveButton")),e.navigation.push(Ie(Button,{id:"itemLoadButton",imageOnly:!0,"data-tooltip":"Load Script From File",onClick:this.handleEditorLoad,children:Ie(xi,{src:"/assets/toolbar-load-5c98d609.svg","data-tooltip":"inherit"})},"itemLoadButton")),g=Ie(DBEditorToolbar,{toolbarItems:e,language:m,activeEditor:i.activeEntry,heatWaveEnabled:i.heatWaveEnabled,editors:i.editors,backend:s})}return Ie(Container,{orientation:Di.TopDown,style:{flex:"1 1 auto"},mainAlignment:ki.Stretch,children:[g,Ie(SplitContainer,{orientation:Di.TopDown,className:u,panes:[{id:"editorPane",minSize:c?0:200,initialSize:c?0:void 0,stretch:!c,resizable:d&&!c,content:Ie(Go,{ref:this.editorRef,savedState:p.state,extraLibs:r,minimap:{enabled:!0},allowSoftWrap:!0,autoFocus:!0,font:{fontFamily:"SourceCodePro+Powerline+Awesome+MySQL",fontSize:a??15,lineHeight:24},scrollbar:{useShadows:!0,verticalHasArrows:!1,horizontalHasArrows:!1,vertical:"auto",horizontal:"auto",verticalScrollbarSize:16,horizontalScrollbarSize:16},onCursorChange:this.handleCursorChange,onScriptExecution:l,onModelChange:this.handleModelChange,createResultPresentation:this.createPresentation})},{id:"resultPane",minSize:d?200:0,initialSize:d?h:0,stretch:c,content:Ie(Container,{innerRef:this.resultRef,className:"renderTarget",orientation:Di.TopDown})}],onPaneResized:this.handlePaneResized})]})}addOrUpdateExtraLib(e,t){var n;return(null==(n=this.editorRef.current)?void 0:n.addOrUpdateExtraLib(e,t))??0}executeWithMaximizedResult(e,t){return new Promise((n=>{var i;if(this.editorRef.current){const o=null==(i=this.editorRef.current)?void 0:i.lastExecutionBlock;if(o instanceof SQLExecutionContext){const i=e=>{if(e===o.id){if(nn.unregister("editorValidationDone",i),this.editorRef.current){const{onScriptExecution:e}=this.props;o.showNextResultMaximized(),null==e||e(o,{forceSecondaryEngine:t}).then((()=>{n(!0)}))}else n(!0);return Promise.resolve(!0)}return n(!1),Promise.resolve(!1)};this.editorRef.current.clear(),setTimeout((()=>{nn.register("editorValidationDone",i),this.editorRef.current.appendText(e)}),0)}else n(!1)}else n(!1)}))}insertScriptText(e,t){if(this.editorRef.current){const n=this.editorRef.current.lastExecutionBlock;(!n||n.codeLength>0||n.language!==e)&&this.editorRef.current.prepareNextExecutionBlock(-1,e),this.editorRef.current.appendText(t),this.editorRef.current.focus()}}getActiveEditorState(){const{savedState:e}=this.props;let t=e.editors.find((t=>t.id===e.activeEntry));return t||(t=e.editors[0]),t}}var $s=(e=>(e[e.Request=0]="Request",e[e.QueryStatus=1]="QueryStatus",e[e.Print=2]="Print",e[e.SetGlobalObjectProperty=3]="SetGlobalObjectProperty",e[e.QueryType=4]="QueryType",e[e.Result=5]="Result",e[e.RunSqlIterative=6]="RunSqlIterative",e[e.RunSql=7]="RunSql",e[e.Graph=8]="Graph",e[e.MrsPrintSdkCode=9]="MrsPrintSdkCode",e[e.MrsSetCurrentService=10]="MrsSetCurrentService",e[e.MrsEditService=11]="MrsEditService",e[e.MrsSetServiceUrl=12]="MrsSetServiceUrl",e[e.MrsAuthenticate=13]="MrsAuthenticate",e[e.MrsEditSchema=14]="MrsEditSchema",e[e.MrsEditDbObject=15]="MrsEditDbObject",e[e.MrsExportServiceSdk=16]="MrsExportServiceSdk",e[e.Done=17]="Done",e))($s||{});const Ks="/assets/module-sql-371330e5.svg";class StatusMark extends ComponentBase{constructor(e){super(e),this.addHandledProperties("statusState","text")}render(){const{statusState:e,text:t}=this.mergedProps,n=this.getEffectiveClassNames(["statusmark"]);return Ie(Checkbox,{className:n,checkState:e,disabled:!0,children:t})}}class ServerStatus extends ComponentBase{constructor(e){super(e),pe(this,"showWindowsAuth",!1),pe(this,"serverStatus",(()=>{const{rowGap:e}=this.props,{serverStatus:t}=this.state;return Ie(Grid,{columns:["minmax(min-content,max-content)","1fr"],rowGap:e,columnGap:12,children:[Ie(GridCell,{className:"heading",columnSpan:2,orientation:Di.TopDown,children:Ie(Label,{caption:"Main Settings"})},"cell1"),Ie(GridCell,{columnSpan:2,orientation:Di.TopDown,crossAlignment:ki.Center,children:Ie(Divider,{})},"cell2"),Ie(GridCell,{className:"left",children:"Host:"},"cell5"),Ie(GridCell,{children:t.host??"none"},"cell6"),Ie(GridCell,{className:"left",children:"Socket:"},"cell7"),Ie(GridCell,{children:t.socket??"none"},"cell8"),Ie(GridCell,{className:"left",children:"Port:"},"cell9"),Ie(GridCell,{children:t.port??"none"},"cell10"),Ie(GridCell,{className:"left",children:"Version:"},"cell11"),Ie(GridCell,{children:t.version??"none"},"cell12"),Ie(GridCell,{className:"left",children:"Compiled For:"},"cell13"),Ie(GridCell,{children:t.compiledFor??"none"},"cell14"),Ie(GridCell,{className:"left",children:"Configuration File:"},"cell15"),Ie(GridCell,{children:t.configFile??"none"},"cell16"),Ie(GridCell,{className:"left",children:"Running Since:"},"cell17"),Ie(GridCell,{children:(null==t?void 0:t.runningSince)??"none"},"cell18")]})})),pe(this,"serverFeatures",(()=>{const{rowGap:e}=this.props,{serverFeatures:t}=this.state;return Ie(Grid,{columns:["minmax(min-content,max-content)","1fr"],rowGap:e,columnGap:12,children:[Ie(GridCell,{className:"heading",columnSpan:2,orientation:Di.TopDown,children:Ie(Label,{caption:"Server Features"})},"cell16"),Ie(GridCell,{columnSpan:2,orientation:Di.TopDown,crossAlignment:ki.Center,children:Ie(Divider,{})},"cell17"),Ie(GridCell,{className:"left",children:"Performance Schema:"},"cell18"),Ie(GridCell,{children:[this.drawBoolean(t.performanceSchema),t.performanceSchema]},"cell19"),Ie(GridCell,{className:"left",children:"Thread Pool:"},"cell20"),Ie(GridCell,{children:[this.drawBoolean(t.threadPool),t.threadPool]},"cell21"),Ie(GridCell,{className:"left",children:"Memcached Plugin:"},"cell22"),Ie(GridCell,{children:t.memCachePlugin??"none"},"cell23"),Ie(GridCell,{className:"left",children:"Semisync Replication Plugin:"},"cell24"),Ie(GridCell,{children:t.semisync??"none"},"cell25"),this.authenticationOutput(),Ie(GridCell,{className:"left",children:"Password Validation:"},"cell28"),Ie(GridCell,{children:[this.drawBoolean(t.passwordValidation),t.passwordValidationValue]},"cell29"),Ie(GridCell,{className:"left",children:"Audit Log:"},"cell30"),Ie(GridCell,{children:[this.drawBoolean(t.auditLog),t.auditLogValue]},"cell31"),Ie(GridCell,{className:"left",children:"Firewall:"},"cell32"),Ie(GridCell,{children:(null==t?void 0:t.firewall)??"none"},"cell33"),Ie(GridCell,{className:"left",children:"Firewall Trace:"},"cell34"),Ie(GridCell,{children:(null==t?void 0:t.firewallTrace)??"none"},"cell35")]})})),pe(this,"authenticationOutput",(()=>{const{serverFeatures:e}=this.state;return this.showWindowsAuth?Ie(Re,{children:[Ie(GridCell,{className:"left",children:"Windows Authentication:"},"cell90"),Ie(GridCell,{children:this.drawBoolean(e.windowsAuth)},"cell91")]}):Ie(Re,{children:[Ie(GridCell,{className:"left",children:"PAM Authentication:"},"cell90"),Ie(GridCell,{children:this.drawBoolean(e.pamAuth)},"cell91")]})})),pe(this,"serverDirectories",(()=>{const{rowGap:e}=this.props,{serverDirectories:t}=this.state;return Ie(Grid,{columns:["minmax(min-content,max-content)","1fr"],rowGap:e,columnGap:12,children:[Ie(GridCell,{className:"heading",columnSpan:2,orientation:Di.TopDown,children:Ie(Label,{caption:"Server Directories"})},"cell36"),Ie(GridCell,{columnSpan:2,orientation:Di.TopDown,crossAlignment:ki.Center,children:Ie(Divider,{})},"cell37"),Ie(GridCell,{className:"left",children:"Base Directory:"},"cell38"),Ie(GridCell,{children:t.baseDirectory},"cell39"),Ie(GridCell,{className:"left",children:"Data Directory:"},"cell40"),Ie(GridCell,{children:t.dataDirectory},"cell41"),Ie(GridCell,{className:"left",children:"Plugins directory:"},"cell42"),Ie(GridCell,{children:t.pluginDirectory},"cell43"),Ie(GridCell,{className:"left",children:"Tmp Directory:"},"cell44"),Ie(GridCell,{children:t.tmpDirectory},"cell45"),Ie(GridCell,{className:"left",children:"Error Log:"},"cell48"),Ie(GridCell,{children:[this.drawBoolean(t.errorLog),t.errorLogValue]},"cell49"),Ie(GridCell,{className:"left",children:"General Log:"},"cell50"),Ie(GridCell,{children:[this.drawBoolean(t.generalLog),t.generalLogFile]},"cell51"),Ie(GridCell,{className:"left",children:"Slow Query Log:"},"cell52"),Ie(GridCell,{children:[this.drawBoolean(t.slowQueryLog),t.slowQueryLogValue]},"cell53")]})})),pe(this,"serverAuthentication",(()=>{const{rowGap:e}=this.props,{serverAuthentication:t}=this.state;return Ie(Grid,{columns:["minmax(min-content,max-content)","1fr"],rowGap:e,columnGap:12,children:[Ie(GridCell,{className:"heading",columnSpan:2,orientation:Di.TopDown,children:Ie(Label,{caption:"Server Authentication"})},"cell54"),Ie(GridCell,{columnSpan:2,orientation:Di.TopDown,crossAlignment:ki.Center,children:Ie(Divider,{})},"cell55"),Ie(GridCell,{className:"left",children:"SHA256 Private Key:"},"cell56"),Ie(GridCell,{children:t.privateKeyPath},"cell57"),Ie(GridCell,{className:"left",children:"SHA256 Public Key:"},"cell58"),Ie(GridCell,{children:t.publicKeyPath},"cell59")]})})),pe(this,"firewall",(()=>{const{rowGap:e}=this.props,{serverFeatures:t,firewall:n}=this.state;if(t.firewall)return Ie(Grid,{columns:["minmax(min-content,max-content)","1fr"],rowGap:e,columnGap:12,children:[Ie(GridCell,{className:"heading",columnSpan:2,orientation:Di.TopDown,children:Ie(Label,{caption:"Firewall"})},"cell60"),Ie(GridCell,{columnSpan:2,orientation:Di.TopDown,crossAlignment:ki.Center,children:Ie(Divider,{})},"cell61"),Ie(GridCell,{className:"left",children:"Access Denied:"},"cell62"),Ie(GridCell,{children:n.accessDenied},"cell63"),Ie(GridCell,{className:"left",children:"Access Granted:"},"cell64"),Ie(GridCell,{children:n.accessGranted},"cell65"),Ie(GridCell,{className:"left",children:"Access Suspicious:"},"cell66"),Ie(GridCell,{children:n.accessSuspicious},"cell67"),Ie(GridCell,{className:"left",children:"Cached Entries:"},"cell68"),Ie(GridCell,{children:n.cachedEntries},"cell69")]})})),pe(this,"serverSsl",(()=>{const{rowGap:e}=this.props,{serverSsl:t}=this.state;return Ie(Grid,{columns:["minmax(min-content,max-content)","1fr"],rowGap:e,columnGap:12,children:[Ie(GridCell,{className:"heading",columnSpan:2,orientation:Di.TopDown,children:Ie(Label,{caption:"Server SSL"})},"cell70"),Ie(GridCell,{columnSpan:2,orientation:Di.TopDown,crossAlignment:ki.Center,children:Ie(Divider,{})},"cell71"),Ie(GridCell,{className:"left",children:"SSL CA:"},"cell72"),Ie(GridCell,{children:t.sslCa},"cell73"),Ie(GridCell,{className:"left",children:"SSL CA Path:"},"cell74"),Ie(GridCell,{children:t.sslCaPath},"cell75"),Ie(GridCell,{className:"left",children:"SSL Cert:"},"cell76"),Ie(GridCell,{children:t.sslCert},"cell77"),Ie(GridCell,{className:"left",children:"SSL Cipher:"},"cell78"),Ie(GridCell,{children:t.sslCipher},"cell79"),Ie(GridCell,{className:"left",children:"SSL CRL:"},"cell80"),Ie(GridCell,{children:t.sslClr},"cell81"),Ie(GridCell,{className:"left",children:"SSL CRL Path:"},"cell82"),Ie(GridCell,{children:t.sslClrPath},"cell83"),Ie(GridCell,{className:"left",children:"SSL Key:"},"cell84"),Ie(GridCell,{children:t.sslKey},"cell85")]})})),pe(this,"drawBoolean",(e=>Ie(StatusMark,void 0===e?{statusState:Do.Indeterminate,text:"none"}:e?{statusState:Do.Checked,text:"on"}:{statusState:Do.Unchecked,text:"off"}))),pe(this,"formatDuration",(e=>{const t=e/86400|0;let n=`${t} day${t>0?"s":""}, `;return n+=`${(e/3600|0)%24} hours, ${(e/60|0)%60} minutes`,n})),pe(this,"checkTriState",((e="",t)=>!(!t||e!==t)||"OFF"!==e&&"NO"!==e&&(e.length>0&&!t||void 0))),this.state={runStatus:"stopped",dataVersion:0,serverStatus:{},serverDirectories:{},serverFeatures:{},serverAuthentication:{},serverSsl:{},firewall:{}},this.addHandledProperties("backend","rowGap","toolbarItems"),this.showWindowsAuth="function"==typeof It.platform&&"win32"===It.platform()&&void 0==={SOURCE_MAPS:"",WASMER_CACHE_DIR:"/Users/mzinner/.wasmer/cache",TERM_PROGRAM:"vscode",NODE:"/usr/local/bin/node",WASMER_DIR:"/Users/mzinner/.wasmer",INIT_CWD:"/Users/mzinner/git/shell-plugins/gui/frontend",SHELL:"/bin/zsh",TERM:"xterm-256color",TMPDIR:"/var/folders/tt/6ybm2lp556qg3_6gm4r93ndw0000gn/T/",npm_config_global_prefix:"/usr/local",TERM_PROGRAM_VERSION:"1.84.2",NODE_OPTIONS:"--max-old-space-size=16000",MallocNanoZone:"0",ORIGINAL_XDG_CURRENT_DESKTOP:"undefined",COLOR:"1",npm_config_noproxy:"",LC_ALL:"en_US.UTF-8",npm_config_local_prefix:"/Users/mzinner/git/shell-plugins/gui/frontend",USER:"mzinner",GOOGLE_DEFAULT_CLIENT_ID:"550135929089-tnk1us9e9580gbnuo899ucnhen7s35n7.apps.googleusercontent.com",GOOGLE_DEFAULT_CLIENT_SECRET:"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",COMMAND_MODE:"unix2003",npm_config_globalconfig:"/usr/local/etc/npmrc",SSH_AUTH_SOCK:"/private/tmp/com.apple.launchd.uzQ1FEBr0D/Listeners",__CF_USER_TEXT_ENCODING:"0x1F5:0x0:0x0",npm_execpath:"/usr/local/lib/node_modules/npm/bin/npm-cli.js",DBUSERNAME:"dba",GOOGLE_API_KEY:"AIzaSyAYrgMCZmdaW73BhOzbMSF02DBVhUE0mCk",PATH:"/Users/mzinner/git/shell-plugins/gui/frontend/node_modules/.bin:/Users/mzinner/git/shell-plugins/gui/node_modules/.bin:/Users/mzinner/git/shell-plugins/node_modules/.bin:/Users/mzinner/git/node_modules/.bin:/Users/mzinner/node_modules/.bin:/Users/node_modules/.bin:/node_modules/.bin:/usr/local/lib/node_modules/npm/node_modules/@npmcli/run-script/lib/node-gyp-bin:/usr/local/bin:/System/Cryptexes/App/usr/bin:/usr/bin:/bin:/usr/sbin:/sbin:/Applications/Little Snitch.app/Contents/Components:/var/run/com.apple.security.cryptexd/codex.system/bootstrap/usr/local/bin:/var/run/com.apple.security.cryptexd/codex.system/bootstrap/usr/bin:/var/run/com.apple.security.cryptexd/codex.system/bootstrap/usr/appleinternal/bin:/Users/mzinner/.wasmer/bin:/opt/homebrew/bin:/Users/mzinner/Library/Python/3.9/bin:/Users/mzinner/.wasmer/globals/wapm_packages/.bin",npm_package_json:"/Users/mzinner/git/shell-plugins/gui/frontend/package.json",__CFBundleIdentifier:"com.microsoft.VSCode",npm_config_init_module:"/Users/mzinner/.npm-init.js",npm_config_userconfig:"/Users/mzinner/.npmrc",PWD:"/Users/mzinner/git/shell-plugins/gui/frontend",npm_command:"run-script",EDITOR:"vi",npm_lifecycle_event:"build",LANG:"en_US.UTF-8",npm_package_name:"mysql-shell-gui",XPC_FLAGS:"0x0",DBPORT:"3306",VSCODE_GIT_ASKPASS_EXTRA_ARGS:"--ms-enable-electron-run-as-node",npm_config_npm_version:"10.1.0",npm_config_node_gyp:"/usr/local/lib/node_modules/npm/node_modules/node-gyp/bin/node-gyp.js",XPC_SERVICE_NAME:"0",npm_package_version:"1.14.2",HOME:"/Users/mzinner",SHLVL:"2",VSCODE_GIT_ASKPASS_MAIN:"/Applications/Visual Studio Code.app/Contents/Resources/app/extensions/git/dist/askpass-main.js",LOGNAME:"mzinner",npm_config_cache:"/Users/mzinner/.npm",npm_lifecycle_script:"bash ./scripts/production-build.sh",LC_CTYPE:"en_US.UTF-8",VSCODE_GIT_IPC_HANDLE:"/var/folders/tt/6ybm2lp556qg3_6gm4r93ndw0000gn/T/vscode-git-d5ee20e761.sock",npm_config_user_agent:"npm/10.1.0 node/v20.9.0 darwin arm64 workspaces/false",GIT_ASKPASS:"/Applications/Visual Studio Code.app/Contents/Resources/app/extensions/git/dist/askpass.sh",VSCODE_GIT_ASKPASS_NODE:"/Applications/Visual Studio Code.app/Contents/Frameworks/Code Helper (Plugin).app/Contents/MacOS/Code Helper (Plugin)",DBPASSWORD:"rootroot",COLORTERM:"truecolor",npm_config_prefix:"/usr/local",npm_node_execpath:"/usr/local/bin/node",_:"node_modules/.bin/vite",NODE_ENV:"production"}.JEST_WORKER_ID}componentDidMount(){this.updateValues()}componentDidUpdate(e,t){const{backend:n}=this.props;n!==e.backend&&this.updateValues()}render(){const{toolbarItems:e}=this.props,{serverStatus:t}=this.state,n=[],i=this.getEffectiveClassNames(["serverStatus"]);n.push(this.serverStatus()),n.push(this.serverDirectories()),n.push(this.serverFeatures()),n.push(this.serverSsl()),n.push(this.serverAuthentication()),n.push(this.firewall());const o=Ie(Toolbar,{id:"serverStatusToolbar",dropShadow:!1,children:[e.navigation,Ie("div",{className:"expander"}),e.auxillary]});return Ie(Container,{className:"serverStatusHost",orientation:Di.TopDown,children:[o,Ie(Container,{className:i,orientation:Di.TopDown,mainAlignment:ki.Start,crossAlignment:ki.Center,children:[Ie(Grid,{columns:2,rowGap:15,columnGap:12,id:"header",children:[Ie(GridCell,{rowSpan:2,children:Ie(xi,{src:Ks,id:"mysqlLogo"})}),Ie(GridCell,{orientation:Di.TopDown,children:[Ie("h1",{children:"Server status"}),Ie("h2",{children:t.shortVersion})]},"serverInfo")]}),Ie(Container,{id:"statusBoxHost",orientation:Di.LeftToRight,mainAlignment:ki.SpaceEvenly,crossAlignment:ki.Start,wrap:Ii.Wrap,children:n})]})]})}async updateValues(){const{backend:e}=this.props,{serverStatus:t,serverDirectories:n,serverFeatures:i,serverAuthentication:o,serverSsl:s,firewall:r}=this.state;e.execute("select 1").then((()=>{this.setState({runStatus:"running"})})).catch((()=>{this.setState({runStatus:"stopped"})}));try{let a=await e.execute("show variables");if(a&&a.rows){const e=new Map(a.rows);t.host=e.get("hostname")??"none",t.socket=e.get("socket")??"none",t.port=e.get("port")??"none",t.compiledFor=e.get("version_compile_os")??"none",t.version=`${e.get("version_comment")??"none"}(${e.get("version")??"none"})`,t.shortVersion=`${e.get("version_comment")??"none"}`,n.baseDirectory=e.get("basedir")??"none",n.dataDirectory=e.get("datadir")??"none",n.tmpDirectory=e.get("tmpdir")??"none",n.pluginDirectory=e.get("plugin_dir")??"none";const l=e.get("log_output")??"FILE";n.generalLog="OFF"!==e.get("general_log")&&"NONE"!==l,n.generalLogFile="OFF"!==e.get("general_log")&&"NONE"!==l?e.get("general_log_file")??"none":"[Stored in database]",n.errorLog="OFF"!==e.get("log_error"),n.errorLogValue=e.get("log_error")??"none",n.slowQueryLog="OFF"!==e.get("slow_query_log")&&"NONE"!==l,n.slowQueryLogValue="OFF"!==e.get("slow_query_log")&&"NONE"!==l?e.get("slow_query_log")??"none":"[Stored in database]",i.performanceSchema=this.checkTriState(e.get("performance_schema")),i.threadPool=this.checkTriState(e.get("thread_handling"),"loaded-dynamically"),i.auditLog=this.checkTriState(e.get("audit_log_policy")),i.auditLogValue=e.get("audit_log_policy")??"",i.firewall=this.checkTriState(e.get("mysql_firewall_mode")),i.firewallTrace=this.checkTriState(e.get("mysql_firewall_trace")),i.passwordValidation=this.checkTriState(e.get("mysql_firewall_mode"));const d=e.get("mysql_firewall_mode");i.passwordValidationValue=d?`(Policy: ${d})`:"",i.sslAvailability="YES"===e.get("have_openssl")||"YES"===e.get("have_ssl");const c=this.checkTriState(e.get("rpl_semi_sync_master_enabled")),u=this.checkTriState(e.get("rpl_semi_sync_slave_enabled"));if(i.semisync="none",c||u){const t=[];"master"===e.get("rpl_semi_sync_master_enabled")&&t.push("master"),"slave"===e.get("rpl_semi_sync_slave_enabled")&&t.push("slave"),i.semisync=`(${t.join(", ")})`}o.privateKeyPath=e.get("sha256_password_private_key_path")??"none",o.publicKeyPath=e.get("sha256_password_public_key_path")??"none",s.sslCa=e.get("ssl_ca")??"none",s.sslCaPath=e.get("ssl_capath")??"none",s.sslCert=e.get("ssl_cert")??"none",s.sslCipher=e.get("ssl_cipher")??"none",s.sslClr=e.get("ssl_crl")??"none",s.sslClrPath=e.get("ssl_crlpath")??"none",s.sslKey=e.get("ssl_key")??"none",i.firewall&&(r.accessDenied=e.get("Firewall_access_denied")??"none",r.accessGranted=e.get("Firewall_access_granted")??"none",r.accessSuspicious=e.get("Firewall_access_suspicious")??"none",r.cachedEntries=e.get("Firewall_cached_entries")??"none"),this.setState({serverStatus:t,serverDirectories:n,serverFeatures:i,serverAuthentication:o,serverSsl:s,firewall:r})}if(a=await e.execute("show global status"),a&&a.rows){const e=new Map(a.rows),n=Number(e.get("Uptime")??0);if(n>0){const e=new Date(n);t.runningSince=`${this.formatDuration(e.getTime())}`}else t.runningSince="none";this.setState({serverStatus:t})}if(a=await e.execute("show plugins"),a&&a.rows){const e=new Map(a.rows);i.memCachePlugin=this.checkTriState(e.get("daemon_memcached"),"ACTIVE"),i.windowsAuth=this.checkTriState(e.get("authentication_windows"),"ACTIVE"),i.pamAuth=this.checkTriState(e.get("authentication_pam"),"ACTIVE"),this.setState({serverFeatures:i})}}catch(a){this.setState({runStatus:"stopped"})}}}pe(ServerStatus,"defaultProps",{rowGap:3});const Qs=new Map([["PROCESSLIST_ID","Id"],["PROCESSLIST_USER","User"],["PROCESSLIST_HOST","Host"],["PROCESSLIST_DB","Database"],["PROCESSLIST_COMMAND","Command"],["PROCESSLIST_TIME","Time"],["PROCESSLIST_STATE","State"],["THREAD_ID","Thread ID"],["TYPE","Type"],["NAME","Name"],["PARENT_THREAD_ID","Parent Thread ID"],["INSTRUMENTED","Instrumented"],["PROCESSLIST_INFO","Info"]]),Ys=class _ClientConnections extends ComponentBase{constructor(e){super(e),pe(this,"refreshTimer"),pe(this,"gridRef",ke()),pe(this,"interval",_ClientConnections.sampleInterval),pe(this,"selectedRow"),pe(this,"columns",[]),pe(this,"attrColumns",[]),pe(this,"hideSleepingConnections",!0),pe(this,"noFullInfo",!1),pe(this,"hideBackgroundThreads",!0),pe(this,"gotPerformanceSchema",!1),pe(this,"getClientConnectionDetails",(()=>this.selectedRow&&Ie(Grid,{id:"clientConnectionDetails",columns:2,rowGap:5,columnGap:12,children:[Ie(GridCell,{children:"Processlist Id"}),Ie(GridCell,{children:this.getSelectedRowValue("PROCESSLIST_ID")}),Ie(GridCell,{children:"Thread Id "}),Ie(GridCell,{children:this.getSelectedRowValue("THREAD_ID")}),Ie(GridCell,{children:"Name"}),Ie(GridCell,{children:this.getSelectedRowValue("NAME")}),Ie(GridCell,{children:"Type"}),Ie(GridCell,{children:this.getSelectedRowValue("TYPE")}),Ie(GridCell,{children:"User"}),Ie(GridCell,{children:this.getSelectedRowValue("PROCESSLIST_USER")}),Ie(GridCell,{children:"Host"}),Ie(GridCell,{children:this.getSelectedRowValue("PROCESSLIST_HOST")}),Ie(GridCell,{children:"Schema"}),Ie(GridCell,{children:this.getSelectedRowValue("PROCESSLIST_DB")}),Ie(GridCell,{children:"Command"}),Ie(GridCell,{children:this.getSelectedRowValue("PROCESSLIST_COMMAND")}),Ie(GridCell,{children:"Time"}),Ie(GridCell,{children:this.getSelectedRowValue("PROCESSLIST_TIME")}),Ie(GridCell,{children:"State"}),Ie(GridCell,{children:this.getSelectedRowValue("PROCESSLIST_STATE")}),Ie(GridCell,{children:"Role"}),Ie(GridCell,{children:this.getSelectedRowValue("ROLE")}),Ie(GridCell,{children:"Instrumented"}),Ie(GridCell,{children:this.getSelectedRowValue("INSTRUMENTED")}),Ie(GridCell,{children:"Parent Thread Id"}),Ie(GridCell,{children:this.getSelectedRowValue("PARENT_THREAD_ID")})]}))),pe(this,"getClientConnectionLocks",(()=>{const{waitingText:e,grantedLocks:t}=this.state,n={selectionType:ii.None,showHeader:!0},i=Ie(TreeGrid,{id:"clientConnectionLocks",style:{fontSize:"10pt"},options:n,columns:[{title:"Thread Id",field:"threadId"},{title:"Type",field:"type"},{title:"Duration",field:"duration"}],tableData:null==t?void 0:t.data.rows});return this.selectedRow&&Ie(Container,{id:"locksInfoContainer",orientation:Di.TopDown,children:[Ie(Label,{children:"Metadata locks (MDL) protect concurrent access to\\nobject metadata (not table row/data locks)"}),Ie(Label,{id:"grantedInfo",children:"Granted Locks (and threads waiting on them)"}),Ie(Label,{children:"Locks this connection currently owns and\\nconnections that are waiting for them."}),i,Ie(Label,{id:"pendingInfo",children:"Pending Locks"}),Ie(Label,{children:e})]})})),pe(this,"getClientConnectionAttributes",(()=>{const{attributes:e}=this.state,t=this.attrColumns.find((e=>"ATTR_NAME"===e.title)),n=this.attrColumns.find((e=>"ATTR_VALUE"===e.title)),i=[{title:"Name",field:(null==t?void 0:t.field)??"1"},{title:"Value",field:(null==n?void 0:n.field)??"2"}],o={selectionType:ii.None,showHeader:!0};return e&&Ie(TreeGrid,{id:"clientConnectionAttributes",style:{fontSize:"10pt"},options:o,columns:i,tableData:null==e?void 0:e.data.rows})})),pe(this,"getClientConnectionInfo",(()=>{const{globalStatus:e}=this.state;return[Ie(Label,{children:["Threads Connected: ",e.threadConnected]},"threadConnectedLabel"),Ie(Label,{children:["Threads Running: ",e.threadRunning]},"threadRunningLabel"),Ie(Label,{children:["Threads Created: ",e.threadsCreated]},"threadsCreatedLabel"),Ie(Label,{children:["Threads Cached: ",e.threadsCached]},"threadsCachedLabel"),Ie(Label,{children:["Rejected (over limit): ",e.rejected]},"rejectedLabel"),Ie(Label,{children:["Total Connections: ",e.totalConnections]},"totalConnectionsLabel"),Ie(Label,{children:["Connection Limit: ",e.connectionLimit]},"connectionsLimitLabel"),Ie(Label,{children:["Aborted Clients: ",e.abortedClients]},"abortedClientsLabel"),Ie(Label,{children:["Aborted Connections: ",e.abortedConnections]},"abortedConnectionsLabel"),Ie(Label,{children:["Errors: ",e.errors]},"errorsLabel")]})),pe(this,"toolbarContent",(()=>{const{showDetails:e}=this.state,t=e?"/assets/toolbar-show_details-active-fdf0c0db.svg":"/assets/toolbar-show_details-inactive-78203a75.svg",n=this.hideSleepingConnections?"/assets/toolbar-sleeping_conns-active-16437ba0.svg":"/assets/toolbar-sleeping_conns-inactive-da80d6d7.svg",i=this.noFullInfo?"/assets/toolbar-info-active-fb65f6e8.svg":"/assets/toolbar-info-inactive-8c7c4088.svg",o=this.hideBackgroundThreads?"/assets/toolbar-background_threads-active-591e2d1e.svg":"/assets/toolbar-background_threads-inactive-8aa6fa04.svg",s=[];return[.5,1,2,3,4,5,10,15,30,0].forEach((e=>{s.push(Ie(Dropdown.Item,{id:`${e}`,caption:e>0?`${e} seconds`:"no refresh"}))})),[Ie(Label,{style:{marginLeft:"8px"},children:"Refresh Rate:"},"mainLabel"),Ie(Dropdown,{id:"refreshSelector",onSelect:void this.handleTimeRangeSelection,selection:""+this.interval/1e3,children:s},"selector"),Ie(Divider,{vertical:!0,thickness:1},"refreshSeparator"),Ie(Button,{"data-tooltip":"Hide sleeping connections",imageOnly:!0,onClick:this.handleHideSleepConn,children:Ie(xi,{src:n,"data-tooltip":"inherit"})},"hideSleepConn"),Ie(Button,{"data-tooltip":"Hide background threads",imageOnly:!0,onClick:this.handleHideBkgThreads,children:Ie(xi,{src:o,"data-tooltip":"inherit"})},"hideBkgThreads"),Ie(Divider,{vertical:!0,thickness:1},"filterSeparator"),Ie(Button,{"data-tooltip":"Don't load full thread info",imageOnly:!0,onClick:this.handleNoFullInfo,children:Ie(xi,{src:i,"data-tooltip":"inherit"})},"noFullInfo"),Ie(Button,{"data-tooltip":"Show/Hide Details",imageOnly:!0,onClick:this.handleShowDetails,children:Ie(xi,{src:t,"data-tooltip":"inherit"})},"showDetails"),Ie(Divider,{vertical:!0,thickness:1},"actionSeparator"),Ie(Button,{disabled:!this.selectedRow,"data-tooltip":"Kill Query",imageOnly:!0,onClick:this.handleKillQuery,children:Ie(xi,{src:"/assets/toolbar-kill_query-0d4280e1.svg","data-tooltip":"inherit"})},"killQuery"),Ie(Button,{disabled:!this.selectedRow,"data-tooltip":"Kill Connection",imageOnly:!0,onClick:this.handleKillConnection,children:Ie(xi,{src:"/assets/toolbar-kill_connection-966f1571.svg","data-tooltip":"inherit"})},"killCOnnection")]})),pe(this,"generateColumnDefinitions",(e=>e.map((e=>{let t,n={},i=50;switch(e.dataType.type){case Ui.String:case Ui.Text:case Ui.MediumText:case Ui.LongText:case Ui.Geometry:case Ui.Point:case Ui.LineString:case Ui.Polygon:case Ui.GeometryCollection:case Ui.MultiPoint:case Ui.MultiLineString:case Ui.MultiPolygon:case Ui.Json:case Ui.Enum:case Ui.Set:t=this.stringFormatter,i=150;break;case Ui.Date:case Ui.DateTime:case Ui.DateTime_f:t="datetime";break;case Ui.Time:case Ui.Time_f:t="datetime",n={outputFormat:"HH:mm:ss"};break;case Ui.Year:t="datetime",n={outputFormat:"YYYY"};break;default:t="plaintext"}return{title:Qs.get(e.title)??e.title,field:e.field,formatter:t,formatterParams:n,minWidth:i,resizable:!0}})))),pe(this,"stringFormatter",(e=>{let t;if(null===e.getValue()){const e=document.createElement("div");return e.className="iconHost",t=Ie(xi,{src:Io,width:30,height:11}),Ue(t,e),e}return e.getValue()})),pe(this,"updateValues",(async()=>{this.gotPerformanceSchema&&await this.updateProcessList()})),pe(this,"checkIsPsAvailable",(async()=>{const{backend:e}=this.props,t=await e.execute("select @@performance_schema");return!!t&&(void 0!==t.rows&&t.rows.length>0&&void 0!==t.rows[0])})),pe(this,"updateProcessList",(async()=>{const{backend:e}=this.props,{globalStatus:t,version:n}=this.state;if(!n){const t=await e.execute("show variables where VARIABLE_NAME like '%version_comment%'");if(t){const e=`${new Map(t.rows).get("version_comment")??"none"}`;this.setState({version:e})}}const i=[];Qs.forEach(((e,t)=>{"PROCESSLIST_USER"===t?i.push("IF (NAME = 'thread/sql/event_scheduler','event_scheduler',t.PROCESSLIST_USER) PROCESSLIST_USER"):"INFO"===t&&this.noFullInfo?i.push("SUBSTR(t.INFO, 0, 255) INFO"):"ATTR_VALUE"===t?i.push(`a.${t}`):i.push(`t.${t}`)}));const o=`WHERE 1 = 1${this.hideBackgroundThreads?" AND t.TYPE <> 'BACKGROUND'":""}${this.hideSleepingConnections?" AND t.PROCESSLIST_COMMAND NOT LIKE 'Sleep%'":""}`,s=`SELECT ${i.join(", ")} FROM performance_schema.threads t LEFT OUTER JOIN performance_schema.session_connect_attrs a ON t.processlist_id = a.processlist_id AND (a.attr_name IS NULL OR a.attr_name = 'program_name') ${o}`,r=an(),a=await e.execute(s,void 0,r);if(a){this.columns=Qi(Ki.MySQL,a.columns);const e=Yi(this.columns,a.rows),t={type:"resultSet",resultId:r,sql:s,columns:this.columns,data:{currentPage:1,rows:e}};this.setState({resultSet:t,gotResponse:!0})}const l=await e.execute("show global status");if(l){const e=new Map(l.rows);t.abortedClients=parseInt(`${e.get("Aborted_clients")??"0"}`,10),t.abortedConnections=parseInt(`${e.get("Aborted_connects")??"0"}`,10),t.threadConnected=parseInt(`${e.get("Threads_connected")??"0"}`,10),t.threadsCached=parseInt(`${e.get("Threads_cached")??"0"}`,10),t.threadRunning=parseInt(`${e.get("Threads_running")??"0"}`,10),t.threadsCreated=parseInt(`${e.get("Threads_created")??"0"}`,10),t.abortedConnections=parseInt(`${e.get("Connection_errors_max_connections")??"0"}`,10),t.totalConnections=parseInt(`${e.get("Connections")??"0"}`,10),t.connectionLimit=0,t.errors=0,this.setState({globalStatus:t})}})),pe(this,"handleHideSleepConn",(()=>{this.hideSleepingConnections=!this.hideSleepingConnections,this.updateValues()})),pe(this,"handleHideBkgThreads",(()=>{this.hideBackgroundThreads=!this.hideBackgroundThreads,this.updateValues()})),pe(this,"handleNoFullInfo",(()=>{this.noFullInfo=!this.noFullInfo,this.updateValues()})),pe(this,"handleShowDetails",(()=>{const{showDetails:e}=this.state;this.setState({showDetails:!e})})),pe(this,"handleKillConnection",(()=>{var e;"BACKGROUND"!==(null==(e=this.selectedRow)?void 0:e.TYPE)?this.showDialog("killConnection","MySQL Client Connections","Do you want to kill selected connection?"):nn.execute("showError",["Error Killing Connection",`Connection ${this.getSelectedRowValue("PROCESSLIST_ID")} cannot be killed`])})),pe(this,"handleKillQuery",(()=>{var e;"BACKGROUND"!==(null==(e=this.selectedRow)?void 0:e.TYPE)?this.showDialog("killQuery","MySQL Client Connections","Do you want to kill selected query?"):nn.execute("showError",["Error Killing Query",`Thread ${this.getSelectedRowValue("THREAD_ID")} cannot be killed`])})),pe(this,"showDialog",((e,t,n)=>{const{backend:i}=this.props,o="Cancel",s="Kill",r={id:e},a=new Map([[$i.Accept,s],[$i.Decline,o]]),l={id:"clientConnectionsConfirmDialog",type:Hi.Confirm,title:t,description:[n],parameters:{accept:s,refuse:o},data:{...r,backend:i,replies:a}};nn.execute("showDialog",l)})),pe(this,"killConnection",(async()=>{const{backend:e}=this.props,t=this.getSelectedRowValue("PROCESSLIST_ID");if(t)try{await e.execute(`KILL CONNECTION ${t}`),await this.updateValues()}catch(n){nn.execute("showError",["Error Killing Query",`Error executing KILL CONNECTION on connectionId: ${t}, error: ${String(n)}`])}})),pe(this,"killQuery",(async()=>{var e;const{backend:t}=this.props,n=this.getSelectedRowValue("PROCESSLIST_ID");if(n)try{await t.execute(`KILL QUERY ${n}`),await this.updateValues()}catch(i){nn.execute("showError",["Error Killing Query",`Error executing KILL QUERY on threadId:${null==(e=this.selectedRow)?void 0:e.THREAD_ID}, error: ${String(i)}`])}})),pe(this,"handleTimeRangeSelection",(async e=>{clearInterval(this.refreshTimer),this.interval=1e3*parseInt([...e][0],10),await this.updateValues(),this.interval>0&&(this.refreshTimer=setInterval((()=>{this.updateValues()}),this.interval))})),pe(this,"getSelectedRowValue",(e=>{if(e&&this.selectedRow){const t=this.columns.find((t=>t.title===e));if(t)return this.selectedRow[t.field]??""}return""})),pe(this,"handleClientConnectionTreeRowSelected",(e=>{const t=this.getSelectedRowValue("PROCESSLIST_ID");this.selectedRow=e.getData(),t!==this.getSelectedRowValue("PROCESSLIST_ID")&&this.setState({selectedTab:"propsTab"})})),pe(this,"updateAttributes",(async e=>{const{backend:t}=this.props,n=an(),i=`SELECT * FROM performance_schema.session_connect_attrs WHERE processlist_id = ${e} ORDER BY ORDINAL_POSITION`,o=await t.execute(i,void 0,n);if(o){this.attrColumns=Qi(Ki.MySQL,o.columns);const e=Yi(this.attrColumns,o.rows),t={type:"resultSet",resultId:n,sql:i,columns:this.attrColumns,data:{currentPage:1,rows:e}};this.setState({attributes:t})}})),pe(this,"updateLocks",(async e=>{const{backend:t}=this.props,n=`SELECT * FROM performance_schema.metadata_locks WHERE owner_thread_id = ${e}`,i=await t.execute(n);if(i){const e=Qi(Ki.MySQL,i.columns),t=Yi(e,i.rows),n=e.find((e=>"LOCK_STATUS"===e.title)),o=e.find((e=>"OBJECT_TYPE"===e.title)),s=e.find((e=>"OBJECT_SCHEMA"===e.title)),r=e.find((e=>"OBJECT_NAME"===e.title)),a=e.find((e=>"LOCK_DURATION"===e.title));t.forEach((e=>{const t=e[(null==n?void 0:n.field)??0],i=e[(null==o?void 0:o.field)??0],l=e[(null==s?void 0:s.field)??0],d=e[(null==r?void 0:r.field)??3],c=e[(null==a?void 0:a.field)??0];let u="";u="GLOBAL"===i?"<global>":[l,d].filter(Boolean).join(".");let h=`OBJECT_TYPE = '${i}'`;switch(l&&(h+=` AND OBJECT_SCHEMA = '${this.escapeSqlString(l)}'`),d&&(h+=` AND OBJECT_NAME = '${d}'`),t){case"PENDING":this.generatePendingLocksInfo(h,i,c,u);break;case"GRANTED":this.generateGrantedLocksInfo(h,i,c,u)}}))}})),pe(this,"generatePendingLocksInfo",((e,t,n,i)=>{const{backend:o}=this.props,s=`SELECT OWNER_THREAD_ID as ownerThreadId FROM performance_schema.metadata_locksWHERE ${e} AND LOCK_STATUS = 'GRANTED'`;o.execute(s).then((e=>{if(e){const o=Qi(Ki.MySQL,e.columns),s=Yi(o,e.rows),r=[];s.forEach((e=>{r.push(e.ownerThreadId)}));const a=`The connection is waiting for a lock on\n${t.toLowerCase()} ${i},\nheld by thread(s) ${r.join(", ")}.\nType: ${t}\nDuration: ${n}`;this.setState({waitingText:a})}})).catch((e=>{nn.execute("showError",["Lookup Metadata Locks",`Error looking up metadata lock information error: ${String(e)}`])}))})),pe(this,"generateGrantedLocksInfo",((e,t,n,i)=>{const{backend:o}=this.props,s=an(),r=`SELECT OWNER_THREAD_ID as threadId, LOCK_TYPE as type, LOCK_DURATION as duration FROM performance_schema.metadata_locks WHERE ${e} AND LOCK_STATUS = 'PENDING'`;o.execute(r,void 0,s).then((e=>{if(e){const o=Qi(Ki.MySQL,e.columns),a=Yi(o,e.rows);a.unshift({threadId:i,type:t,duration:n});const l={type:"resultSet",resultId:s,sql:r,columns:o,data:{currentPage:1,rows:a}};this.setState({grantedLocks:l})}})).catch((e=>{nn.execute("showError",["Lookup Metadata Locks",`Error looking up metadata lock information error: ${e.message}`])}))})),pe(this,"escapeSqlString",(e=>e.replace(/[\0\x08\x09\x1a\n\r"'\\%]/g,(e=>{switch(e){case"\0":return"\\0";case"\b":return"\\b";case"\t":return"\\t";case"":return"\\z";case"\n":return"\\n";case"\r":return"\\r";case'"':case"'":case"\\":case"%":return"\\"+e;default:return e}})))),pe(this,"handleDialogResponse",(async e=>{var t,n,i;if("clientConnectionsConfirmDialog"!==(null==e?void 0:e.id))return Promise.resolve(!1);if((null==(t=e.data)?void 0:t.backend)&&e.type===Hi.Confirm)if(e.closure===$i.Accept){if("killConnection"===(null==(n=e.data)?void 0:n.id))return await this.killConnection(),!0;if("killQuery"===(null==(i=e.data)?void 0:i.id))return await this.killQuery(),!0}return!1})),pe(this,"handleSelectTab",(async e=>{const{attributes:t,grantedLocks:n}=this.state,i=this.getSelectedRowValue("PROCESSLIST_ID"),o=this.getSelectedRowValue("THREAD_ID");if("attrTab"===e){const e=null==t?void 0:t.columns.find((e=>"PROCESSLIST_ID"===e.title));(!t||!e||e&&(null==t?void 0:t.data.rows[0][e.field])!==i)&&await this.updateAttributes(i)}else if("locksTab"===e){const e=null==n?void 0:n.columns.find((e=>"THREAD_ID"===e.title));(!n||!e||e&&(null==n?void 0:n.data.rows[0][e.field])!==o)&&await this.updateLocks(parseInt(o,10))}this.setState({selectedTab:e})})),this.state={resultSet:{type:"resultSet",resultId:"",columns:[],data:{currentPage:1,rows:[]},sql:""},gotResponse:!1,gotError:!1,globalStatus:{},showDetails:!1,selectedTab:"propsTab",waitingText:"This connection is not waiting for any locks."},this.checkIsPsAvailable().then((e=>{e&&(this.gotPerformanceSchema=!0,this.updateValues())})).catch((e=>{nn.execute("showError",["Loading Error","Cannot load performance schema:",String(e)])})),this.addHandledProperties("backend","toolbarItems")}componentDidUpdate(e,t){const{backend:n}=this.props;n!==e.backend&&this.updateValues()}componentDidMount(){this.refreshTimer=setInterval((()=>{this.updateValues()}),_ClientConnections.sampleInterval),nn.register("dialogResponse",this.handleDialogResponse)}componentWillUnmount(){clearInterval(this.refreshTimer),nn.unregister("dialogResponse",this.handleDialogResponse)}render(){const{toolbarItems:e}=this.props,{resultSet:t,gotResponse:n,showDetails:i,selectedTab:o}=this.state,s=this.getEffectiveClassNames(["clientConnections"]),r=this.columns.find((e=>"PROCESSLIST_ID"===e.title)),a={layout:"fitColumns",verticalGridLines:!0,horizontalGridLines:!0,alternatingRowBackgrounds:!0,selectionType:ii.Single,resizableRows:!0,index:(null==r?void 0:r.field)??"0"},l=this.getClientConnectionInfo(),d=[...e.navigation],c=[...e.auxillary],u=Ie(Toolbar,{id:"clientConnectionToolbar",dropShadow:!1,children:[d,this.toolbarContent(),Ie("div",{className:"expander"}),c]});return Ie(Container,{className:s,orientation:Di.TopDown,mainAlignment:ki.Start,children:[u,Ie(Container,{id:"contentHost",orientation:Di.TopDown,children:[Ie(Container,{id:"connectionProps",orientation:Di.LeftToRight,crossAlignment:ki.Start,wrap:Ii.Wrap,children:l}),Ie(Container,{id:"connectionListTitle",orientation:Di.TopDown,children:[Ie(Divider,{}),Ie(Label,{children:"Client Connection List"})]}),Ie(Container,{id:"connectionList",orientation:Di.LeftToRight,children:[n&&Ie(TreeGrid,{ref:this.gridRef,style:{fontSize:"10pt"},options:a,columns:this.generateColumnDefinitions(t.columns),tableData:t.data.rows,selectedIds:[this.getSelectedRowValue("PROCESSLIST_ID")],onRowSelected:this.handleClientConnectionTreeRowSelected}),i&&Ie(Container,{id:"connectionDetails",orientation:Di.TopDown,children:Ie(Tabview,{id:"detailsTabView",tabPosition:Ao.Top,tabBorderWidth:1,contentSeparatorWidth:2,onSelectTab:void this.handleSelectTab,pages:[{caption:"Details",id:"propsTab",content:this.getClientConnectionDetails(),icon:Ks},{caption:"Locks",id:"locksTab",content:this.getClientConnectionLocks(),icon:Ks},{caption:"Attributes",id:"attrTab",content:this.getClientConnectionAttributes(),icon:Ks}],selectedId:o,stretchTabs:!1,canReorderTabs:!1})})]})]})]})}};pe(Ys,"sampleInterval",5e3);let Js=Ys;const Xs=new Map([["classic",["#42BECC","#FF8C00","#6CC190","#7CC150","#666666","#FFC300","#546FC6","#C178CD"]],["delectable",["#334858","#cd595a","#94938f","#a3a7a6","#dbc5b0","#f8dfc2","#f9ebdf","#ffd4b0"]],["trello",["#0079bf","#70b500","#ff9f1a","#eb5a46","#f2d600","#c377e0","#ff78cb","#00c2e0"]],["brewing",["#E40C2B","#11ABC1","#DF3062","#F5B935","#4BAC3F","#8DB48E","#4D724D","#44449B"]],["light",["#A8E6CE","#DCEDC2","#FFD3B5","#FFAAA6","#FF8C94","#A8FFCE","#FFC380","#A6AAFF"]],["lively",["#A7226E","#EC2049","#F26B38","#2F9599","#F7DB4F","#45ADA8","#547980","#C8C8A9"]],["grays",["#FFFF","#E7E7E7","#D1D1D1","#B6B6B6","#9B9B9B","#767676","#6C6C6C","#515151"]]]),Zs=class _PerformanceDashboard extends ComponentBase{constructor(e){super(e),pe(this,"refreshTimer"),pe(this,"hasPSAccess",!1),pe(this,"updates",0),pe(this,"variableNames",["Bytes_received","Bytes_sent","Threads_cached","Threads_connected","Threads_created","Threads_running","Table_open_cache_hits","Table_open_cache_hits","Table_open_cache_misses","Open_files","Open_streams","Open_table_definitions","Open_tables","Opened_table_definitions","Opened_tables","Innodb_buffer_pool_read_requests","Innodb_buffer_pool_write_requests","Innodb_buffer_pool_reads","Innodb_buffer_pool_bytes_data","Innodb_page_size","Innodb_buffer_pool_pages_total","Innodb_os_log_written","Innodb_log_writes","Innodb_dblwr_writes","Innodb_data_written","Innodb_data_read","innodb_log_file_size","Innodb_log_files_in_group","Com_select","Com_insert","Com_update","Com_delete","Com_create_db","Com_create_event","Com_create_function","Com_create_index","Com_create_procedure","Com_create_server","Com_create_table","Com_create_trigger","Com_create_udf","Com_create_user","Com_create_view","Com_alter_db","Com_alter_db_upgrade","Com_alter_event","Com_alter_function","Com_alter_procedure","Com_alter_server","Com_alter_table","Com_alter_tablespace","Com_alter_user","Com_drop_db","Com_drop_event","Com_drop_function","Com_drop_index","Com_drop_procedure","Com_drop_server","Com_drop_table","Com_drop_trigger","Com_drop_user","Com_drop_view","Com_begin","Com_commit","Com_release_savepoint","Com_rollback","Com_rollback_to_savepoint","Com_savepoint"]),pe(this,"formatTrafficValue",(e=>{return((t=e.valueOf())<1024?`${t.toFixed(2)} B`:(t/=1024)<1014?`${t.toFixed(2)} KB`:(t/=1024)<1024?`${t.toFixed(2)} MB`:`${(t/=1024).toFixed(2)} GB`)+"/s";var t})),pe(this,"formatTimeDifference",(e=>{if(e<1e3)return"now";let t=Math.floor(e/1e3);if(t<120)return`${t}s ago`;let n=Math.floor(t/60);if(t%=60,n<60)return 0===t?`${n}m ago`:`${n}m ${t}s ago`;const i=Math.floor(n/60);return n%=60,0===n?`${i}h ago`:`${i}h ${n}m ago`})),pe(this,"handleColorsSelection",(e=>{const{onGraphDataChange:t,graphData:n}=this.props;null==t||t({...n,activeColorScheme:[...e][0]})})),pe(this,"handleTimeRangeSelection",(e=>{const{onGraphDataChange:t,graphData:n}=this.props;null==t||t({...n,displayInterval:parseInt([...e][0],10)})})),this.state={graphData:{timestamp:(new Date).getTime(),activeColorScheme:"classic",displayInterval:50,currentValues:new Map,computedValues:{},series:new Map}},e.backend.execute("select * from performance_schema.log_status").then((()=>{this.hasPSAccess=!0,this.queryAndUpdate()})).catch((()=>{this.queryAndUpdate()}))}static getDerivedStateFromProps(e){const{graphData:t}=e;if(0===t.series.size){const e=200;let n=(new Date).getTime()-e*_PerformanceDashboard.sampleInterval;const i=[],o=[];for(let t=0;t<e;++t)i.push({xValue:n}),o.push({xValue:n,group:"select"}),o.push({xValue:n,group:"dml"}),o.push({xValue:n,group:"ddl"}),n+=_PerformanceDashboard.sampleInterval;t.computedValues={tableCacheEfficiency:0,threadsCached:0,threadsConnected:0,threadsCreated:0,threadsRunning:0,openFiles:0,openStreams:0,openTableDefinitions:0,openTables:0,openedTableDefinitions:0,openedTables:0,trxBegin:0,trxCommit:0,trxReleaseSavepoint:0,trxRollback:0,trxRollbackToSavepoint:0,trxSavepoint:0,selects:0,creates:0,inserts:0,updates:0,deletes:0,alters:0,drops:0,totalStatements:0,innoDBBufferPoolUsage:-1,innoDBBufferReads:0,innoDBBufferWrites:0,innoDBBufferDiskReads:0,innoDBRedoLogDataWritten:0,innoDBRedoLogWrites:0,innoDBDoubleWriteBufferWrites:0,innoDBDataWritten:0,innoDBDataRead:0,innoDBBufferReadRatio:-1,checkpointAge:-1},t.series=new Map([["incomingNetworkData",[...i]],["outgoingNetworkData",[...i]],["clientConnectionsData",[...i]],["sqlStatementsData",o],["innoDBDiskWritesData",[...i]],["innoDBDiskReadsData",[...i]]])}return{graphData:t}}componentDidMount(){this.refreshTimer=setInterval((()=>{const{stopAfter:e}=this.props;++this.updates,e&&this.updates>=e&&clearInterval(this.refreshTimer),this.queryAndUpdate()}),_PerformanceDashboard.sampleInterval)}componentWillUnmount(){const{onGraphDataChange:e}=this.props,{graphData:t}=this.state;clearInterval(this.refreshTimer),null==e||e({...t,series:new Map})}render(){const{toolbarItems:e,graphData:t}=this.props,n=Ie(Toolbar,{id:"dashboardToolbar",dropShadow:!1,children:[null==e?void 0:e.navigation,Ie(Label,{caption:"Graph Colors:",style:{marginLeft:"8px"}}),Ie(Dropdown,{id:"graphColorsDropdown",selection:t.activeColorScheme,onSelect:this.handleColorsSelection,children:[Ie(DropdownItem,{caption:"Classic",id:"classic"}),Ie(DropdownItem,{caption:"Light",id:"light"}),Ie(DropdownItem,{caption:"Lively",id:"lively"}),Ie(DropdownItem,{caption:"Delectable",id:"delectable"}),Ie(DropdownItem,{caption:"Trello",id:"trello"}),Ie(DropdownItem,{caption:"Brewing",id:"brewing"}),Ie(DropdownItem,{caption:"Gray Tones",id:"grays"})]}),Ie(Label,{caption:"Time Range:"}),Ie(Dropdown,{id:"timeRangeDropdown",selection:String(t.displayInterval),onSelect:this.handleTimeRangeSelection,children:[Ie(DropdownItem,{caption:"150 sec",id:"50"}),Ie(DropdownItem,{caption:"5 min",id:"100"}),Ie(DropdownItem,{caption:"10 min",id:"200"})]}),Ie("div",{className:"expander"}),null==e?void 0:e.auxillary]}),i=this.getEffectiveClassNames(["performanceDashboard"]);return Ie(Container,{className:i,orientation:Di.TopDown,children:[n,Ie(Grid,{id:"dashboardGrid",columns:["33%","33%","33%"],equalHeight:!1,columnGap:12,rowGap:30,children:[this.renderNetworkStatus(1),this.renderMySQLStatus(2),this.renderInnoDBStatus(3)]})]})}renderNetworkStatus(e){const{graphData:t}=this.state,n=Xs.get(t.activeColorScheme),i=t.series.get("incomingNetworkData")??[],o=t.series.get("outgoingNetworkData")??[],s=t.series.get("clientConnectionsData")??[],r=(new Date).getTime(),a=[r-_PerformanceDashboard.sampleInterval*t.displayInterval,r];let l=this.findYDomainValues(i,0);const d={viewport:{left:0,top:0,width:400,height:300},series:[{id:"networkStatus1",type:"line",strokeWidth:2,colors:[n[0]],marginLeft:80,xDomain:a,yDomain:l,yFormat:this.formatTrafficValue,curve:"Linear",yTickCount:6,tooltip:this.trafficTooltip,transformation:{x:0,y:0,width:400,height:300},data:i}]};l=this.findYDomainValues(o,0);const c={viewport:{left:0,top:0,width:400,height:300},series:[{id:"networkStatus2",type:"line",strokeWidth:2,colors:[n[1]],marginLeft:80,xDomain:a,yDomain:l,yFormat:this.formatTrafficValue,curve:"Linear",yTickCount:6,tooltip:this.trafficTooltip,transformation:{x:0,y:0,width:400,height:300},data:o}]},u={viewport:{left:0,top:0,width:400,height:300},series:[{id:"networkStatus3",type:"line",strokeWidth:2,colors:[n[2]],marginLeft:80,xDomain:a,curve:"StepBefore",yTickCount:6,tooltip:this.connectionsTooltip,transformation:{x:0,y:0,width:400,height:300},data:s}]},h=i[i.length-1].yValue??0,p=o[o.length-1].yValue??0,m=[];return m.push(Ie(GridCell,{className:"title",orientation:Di.TopDown,style:{gridColumn:e,gridRow:1},crossAlignment:ki.Center,children:[Ie(xi,{className:"sectionIcon",src:Hs}),Ie(Label,{children:"Network Status"}),Ie(Label,{children:"Statistics for network traffic sent and received by the MySQL server over the client connections."})]}),Ie(GridCell,{className:"separated",orientation:Di.TopDown,style:{gridColumn:e,gridRow:2},children:[Ie(Label,{className:"subTitle",children:"Incoming Network Traffic"}),Ie(GraphHost,{options:d}),this.renderNameValuePair("Incoming Data",this.formatTrafficValue(h),1,"Number of bytes received by the MySQL server at the network level.")]}),Ie(GridCell,{className:"separated",orientation:Di.TopDown,style:{gridColumn:e,gridRow:3},children:[Ie(Label,{className:"subTitle",children:"Outgoing Network Traffic"}),Ie(GraphHost,{options:c}),this.renderNameValuePair("Outgoing Data",this.formatTrafficValue(p),2,"Number of bytes sent by the MySQL server at the network level.")]}),Ie(GridCell,{className:"separated",orientation:Di.TopDown,style:{gridColumn:e,gridRow:4},children:[Ie(Label,{className:"subTitle",children:"Client Connections"}),Ie(GraphHost,{options:u}),Ie("div",{className:"placeholder"})]})),m}renderMySQLStatus(e){const{graphData:t}=this.state,n=Xs.get(t.activeColorScheme),{tableCacheEfficiency:i,selects:o,inserts:s,updates:r,deletes:a,creates:l,alters:d,drops:c,totalStatements:u,threadsCached:h,threadsConnected:p,threadsCreated:m,threadsRunning:g,openFiles:f,openStreams:b,openTableDefinitions:v,openTables:S,openedTableDefinitions:C,openedTables:w,trxBegin:y,trxCommit:k,trxReleaseSavepoint:I,trxRollback:D,trxRollbackToSavepoint:T,trxSavepoint:R}=t.computedValues,x=t.series.get("sqlStatementsData"),E=[{name:"Cache Efficiency",value:0},{name:"Cache Misses",value:0}];i>0&&(E[0].value=i,E[1].value=1-i);const M={viewport:{left:0,top:0,width:400,height:300},series:[{id:"sqlStatus1",type:"pie",radius:[60,130],showValues:!1,colors:[n[3],n[4]],transformation:{x:"50%",y:"50%",width:400,height:300},tooltip:this.pieTooltipPercent,data:E}]},P={viewport:{left:0,top:0,width:400,height:300},series:[{id:"sqlStatus2",type:"pie",radius:[60,130],showValues:!1,colors:[n[0],n[1],n[2],n[5]],transformation:{x:"50%",y:"50%",width:400,height:300},tooltip:this.pieTooltip,data:[{name:"Threads Running",value:g},{name:"Threads Connected",value:p},{name:"Threads Cached",value:h},{name:"Threads Created",value:m}]}]},L={viewport:{left:0,top:0,width:400,height:300},series:[{id:"sqlStatus3",type:"pie",radius:[60,130],showValues:!1,colors:[n[0],n[1],n[2],n[5],n[3],n[6]],transformation:{x:"50%",y:"50%",width:400,height:300},tooltip:this.pieTooltip,data:[{name:"Open Files",value:f},{name:"Open Streams",value:b},{name:"Open Table Definitions",value:v},{name:"Open Tables",value:S},{name:"Total Opened Tabled Definitions",value:C},{name:"Total Opened Tables",value:w}]}]},F={viewport:{left:0,top:0,width:400,height:300},series:[{id:"sqlStatus4",type:"pie",radius:[60,130],showValues:!1,colors:[n[0],n[1],n[2],n[5],n[3],n[6]],transformation:{x:"50%",y:"50%",width:400,height:300},tooltip:this.pieTooltip,data:[{name:"Begin",value:y},{name:"Commit",value:k},{name:"Release Savepoint",value:I},{name:"Rollback",value:D},{name:"Rollback to Savepoint",value:T},{name:"Savepoint",value:R}]}]},A=(new Date).getTime(),B=[A-_PerformanceDashboard.sampleInterval*t.displayInterval,A],N={viewport:{left:0,top:0,width:400,height:300},series:[{id:"sqlStatus5",type:"line",strokeWidth:2,colors:[n[5],n[6],n[7]],marginLeft:80,xDomain:B,curve:"Linear",yTickCount:6,tooltip:this.statementsTooltip,transformation:{x:0,y:0,width:400,height:300},data:x}]},O=[];return O.push(Ie(GridCell,{className:"title",orientation:Di.TopDown,style:{gridColumn:e,gridRow:1},crossAlignment:ki.Center,children:[Ie(xi,{className:"sectionIcon",src:"/assets/schemaMySQL-46671b33.svg"}),Ie(Label,{children:"MySQL Status"}),Ie(Label,{children:"Primary MySQL server activity and performance statistics."})]}),Ie(GridCell,{className:"separated",orientation:Di.TopDown,style:{gridColumn:e,gridRow:2},children:[Ie(Grid,{columns:2,rowGap:12,style:{marginBottom:"8px"},children:[Ie(GridCell,{orientation:Di.TopDown,children:[Ie(Label,{className:"pieTitle",children:"Table Cache"}),Ie(GraphHost,{id:"tableCacheGraph",options:M})]}),Ie(GridCell,{orientation:Di.TopDown,children:[Ie(Label,{className:"pieTitle",children:"Threads"}),Ie(GraphHost,{id:"threadsGraph",options:P})]}),Ie(GridCell,{orientation:Di.TopDown,children:[Ie(Label,{className:"pieTitle",children:"Open Objects"}),Ie(GraphHost,{id:"openFilesGraph",options:L})]}),Ie(GridCell,{orientation:Di.TopDown,children:[Ie(Label,{className:"pieTitle",children:"Transactions"}),Ie(GraphHost,{id:"transactionGraph",options:F})]})]}),this.renderNameValuePair("Cache Efficiency",`${(100*i).toFixed(0)}%`,0,"Cache for minimizing the number of times MySQL opens database tables when accessed."),this.renderNameValuePair("Total Opened Tables",`${w.toLocaleString("en")}`,0,"Total number of opened tables."),this.renderNameValuePair("Total Transactions",`${y.toLocaleString("en")}`,0,"Total number of started transactions.")]}),Ie(GridCell,{className:"separated",orientation:Di.TopDown,style:{gridColumn:e,gridRow:3},children:[Ie(Label,{className:"subTitle",children:"SQL Statements Executed"}),Ie(GraphHost,{options:N}),this.renderNameValuePair("Total Statements",`${u}/s`,0,"Total number of statements executed.")]}),Ie(GridCell,{className:"separated",orientation:Di.TopDown,style:{gridColumn:e,gridRow:4},children:Ie(Grid,{id:"selectGrid",columns:2,children:[Ie(GridCell,{orientation:Di.TopDown,children:this.renderNameValuePair("SELECT",`${o.toFixed(0)}/s`,3,"SELECT Statements Executed")}),Ie(GridCell,{orientation:Di.TopDown}),Ie(GridCell,{orientation:Di.TopDown,children:this.renderNameValuePair("INSERT",`${s.toFixed(0)}/s`,4,"INSERT Statements Executed")}),Ie(GridCell,{orientation:Di.TopDown,children:this.renderNameValuePair("CREATE",`${l.toFixed(0)}/s`,5,"CREATE Statements Executed")}),Ie(GridCell,{orientation:Di.TopDown,children:this.renderNameValuePair("UPDATE",`${r.toFixed(0)}/s`,4,"UPDATE Statements Executed")}),Ie(GridCell,{orientation:Di.TopDown,children:this.renderNameValuePair("ALTER",`${d.toFixed(0)}/s`,5,"ALTER Statements Executed")}),Ie(GridCell,{orientation:Di.TopDown,children:this.renderNameValuePair("DELETE",`${a.toFixed(0)}/s`,4,"DELETE Statements Executed")}),Ie(GridCell,{orientation:Di.TopDown,children:this.renderNameValuePair("DROP",`${c.toFixed(0)}/s`,5,"DROP Statements Executed")})]})})),O}renderInnoDBStatus(e){const{graphData:t}=this.state,n=Xs.get(t.activeColorScheme),i=t.computedValues.innoDBBufferPoolUsage,o=t.computedValues.innoDBBufferReads,s=t.computedValues.innoDBBufferWrites,r=t.computedValues.innoDBBufferDiskReads,a=t.computedValues.innoDBRedoLogDataWritten,l=t.computedValues.innoDBRedoLogWrites,d=t.computedValues.innoDBDoubleWriteBufferWrites,c=t.computedValues.innoDBDataWritten,u=t.computedValues.innoDBDataRead,h=t.computedValues.checkpointAge,p=t.computedValues.innoDBBufferReadRatio,m=t.series.get("innoDBDiskWritesData")??[],g=t.series.get("innoDBDiskReadsData")??[],f={viewport:{left:0,top:0,width:400,height:300},series:[{id:"innoDBStatus1",type:"pie",radius:[60,130],showValues:!1,rotation:"0deg",colors:[n[3],n[4]],transformation:{x:"50%",y:"50%",width:400,height:300},tooltip:this.pieTooltipPercent,data:[{name:"Buffer Pool Usage",value:i<0?0:i},{name:"Unused",value:i<0?0:1-i}]}]};let b=h<0?0:.125,v=h<0?0:.125,S=h<0?0:1-h-.25;S<0&&(v+=S,S=0),v<0&&(b+=v,v=0);const C={viewport:{left:0,top:0,width:400,height:300},series:[{id:"innoDBStatus2",type:"pie",radius:[60,130],showValues:!1,colors:[n[0],n[1],n[3],n[5]],transformation:{x:"50%",y:"50%",width:400,height:300},tooltip:this.pieTooltipPercent,data:[{name:"Checkpoint Age",value:h<0?0:h},{name:"Available Range",value:S},{name:"Async Flush Range",value:v},{name:"Sync Flush Range",value:b}]}]},w={viewport:{left:0,top:0,width:400,height:300},series:[{id:"innoDBStatus3",type:"pie",borderRadius:8,radius:[60,130],showValues:!1,colors:[n[3],n[4]],transformation:{x:"50%",y:"50%",width:400,height:300},tooltip:this.pieTooltipPercent,data:[{name:"Disk Reads",value:p<0?0:p},{name:"Memory Reads",value:p<0?0:1-p}]}]},y=(new Date).getTime(),k=[y-_PerformanceDashboard.sampleInterval*t.displayInterval,y],I={viewport:{left:0,top:0,width:400,height:300},series:[{id:"innoDBStatus4",type:"line",strokeWidth:2,colors:[n[1]],marginLeft:80,xDomain:k,yFormat:this.formatTrafficValue,yDomain:this.findYDomainValues(m,0),curve:"Linear",yTickCount:6,tooltip:this.trafficTooltip,transformation:{x:0,y:0,width:400,height:300},data:m}]},D={viewport:{left:0,top:0,width:400,height:300},series:[{id:"innoDBStatus5",type:"line",strokeWidth:2,colors:[n[0]],marginLeft:80,xDomain:k,yFormat:this.formatTrafficValue,yDomain:this.findYDomainValues(g,0),curve:"Linear",yTickCount:6,tooltip:this.trafficTooltip,transformation:{x:0,y:0,width:400,height:300},data:g}]},T=[];return T.push(Ie(GridCell,{className:"title",orientation:Di.TopDown,style:{gridColumn:e,gridRow:1},crossAlignment:ki.Center,children:[Ie(xi,{className:"sectionIcon",src:"/assets/databaseEngine-db047f00.svg"}),Ie(Label,{children:"InnoDB Status"}),Ie(Label,{children:"Overview of the InnoDB buffer pool and disk activity generated by the InnoDB storage engine."})]}),Ie(GridCell,{orientation:Di.TopDown,style:{gridColumn:e,gridRow:2},children:[Ie(Grid,{columns:2,rowGap:12,equalHeight:!0,style:{marginBottom:"8px"},children:[Ie(GridCell,{orientation:Di.TopDown,columnSpan:2,style:{padding:"0 25%"},children:[Ie(Label,{className:"pieTitle",children:"InnoDB Buffer Pool"}),Ie(GraphHost,{id:"bufferPoolGraph",options:f})]}),Ie(GridCell,{orientation:Di.TopDown,children:[Ie(Label,{className:"pieTitle",children:"Checkpoint Age"}),Ie(GraphHost,{id:"threadsGraph",options:C})]}),Ie(GridCell,{orientation:Di.TopDown,children:[Ie(Label,{className:"pieTitle",children:"Disk Read Ratio"}),Ie(GraphHost,{id:"openFilesGraph",options:w})]})]}),this.renderNameValuePair("Read Requests",`${o.toFixed(0)} pages/s`,1,"The number of logical read requests InnoDB has done to the buffer pool."),this.renderNameValuePair("Write Requests",`${s.toFixed(0)} pages/s`,2,"The number of logical write requests InnoDB has done to the buffer pool."),this.renderNameValuePair("Disk Reads",`${r.toFixed(0)} #/s`,1,"The number of logical reads that InnoDB could not satisfy from the buffer pool, and had to read directly from the disk.")]}),Ie(GridCell,{orientation:Di.TopDown,style:{gridColumn:e,gridRow:3},children:[Ie(Label,{className:"subTitle",children:"InnoDB Disk Writes"}),Ie(GraphHost,{options:I}),this.renderNameValuePair("Log data written",this.formatTrafficValue(a),2,"The number of bytes written to the InnoDB redo log files."),this.renderNameValuePair("Log writes",`${l.toFixed(0)} #/s`,2,"The number of physical writes to the InnoDB redo log file."),this.renderNameValuePair("Writing",this.formatTrafficValue(c),1,"Total amount of data in bytes written in file operations by the InnoDB storage engine.")]}),Ie(GridCell,{orientation:Di.TopDown,style:{gridColumn:e,gridRow:4},children:[Ie(Label,{className:"subTitle",children:"InnoDB Disk Reads"}),Ie(GraphHost,{options:D}),this.renderNameValuePair("Buffer Writes",this.formatTrafficValue(d),2,"The number of double-write operations that have been performed."),this.renderNameValuePair("Reading",this.formatTrafficValue(u),1,"Total amount of data in bytes read in file operations by the InnoDB storage engine.")]})),T}renderNameValuePair(e,t,n,i){const{graphData:o}=this.props,s=Xs.get(o.activeColorScheme);let r;switch(n){case 3:r=Ie(Label,{className:"marker",style:{color:s[5]},children:"▌"});break;case 4:r=Ie(Label,{className:"marker",style:{color:s[6]},children:"▌"});break;case 5:r=Ie(Label,{className:"marker",style:{color:s[7]},children:"▌"})}return Ie(Container,{className:"nameValuePair","data-tooltip":i,children:[Ie(Label,{className:"nameLabel ellipsis","data-tooltip":"inherit",children:e}),Ie(Label,{className:"valueLabel ellipsis","data-tooltip":"inherit",children:t}),r]})}async queryAndUpdate(){const{backend:e}=this.props,t=this.variableNames.join('","');try{const n=await e.execute(`show global status where variable_name in ("${t}")`);if(n&&n.rows){const t=n.rows;if(this.hasPSAccess){const n=await e.execute('SELECT STORAGE_ENGINES->>\'$."InnoDB"."LSN"\' - STORAGE_ENGINES->>\'$."InnoDB"."LSN_checkpoint"\' FROM performance_schema.log_status');if(n&&n.rows&&n.rows.length>0){const e=n.rows[0];this.updateData(t,e[0])}}else this.updateData(t)}}catch(n){this.updateData([])}}updateData(e,t=0){const{onGraphDataChange:n}=this.props,{graphData:i}=this.state,o=i.currentValues,s=i.series.get("incomingNetworkData")??[],r=i.series.get("outgoingNetworkData")??[],a=i.series.get("clientConnectionsData")??[],l=i.series.get("sqlStatementsData")??[],d=i.series.get("innoDBDiskWritesData")??[],c=i.series.get("innoDBDiskReadsData")??[],u=this.extractCurrentValues(e),h=(new Date).getTime(),p=(h-i.timestamp)/1e3,m=e=>{const t=o.get(e)??u.get(e)??0;return((u.get(e)??0)-t)/p};s.shift(),s.push({xValue:h,yValue:m("Bytes_received")}),r.shift(),r.push({xValue:h,yValue:m("Bytes_sent")}),a.shift(),a.push({xValue:h,yValue:u.get("Threads_connected")});const g=u.get("Threads_cached")??0,f=u.get("Threads_connected")??0,b=u.get("Threads_created")??0,v=u.get("Threads_running")??0,S=u.get("Open_files")??0,C=u.get("Open_streams")??0,w=u.get("Open_table_definitions")??0,y=u.get("Open_tables")??0,k=u.get("Opened_table_definitions")??0,I=u.get("Opened_tables")??0,D=u.get("Com_begin")??0,T=u.get("Com_commit")??0,R=u.get("Com_release_savepoint")??0,x=u.get("Com_rollback")??0,E=u.get("Com_rollback_to_savepoint")??0,M=u.get("Com_savepoint")??0,P=Math.round(m("Com_select")),L=Math.round(m("Com_insert")),F=Math.round(m("Com_update")),A=Math.round(m("Com_delete")),B=Math.round(m("Com_create_db")+m("Com_create_event")+m("Com_create_function")+m("Com_create_index")+m("Com_create_procedure")+m("Com_create_server")+m("Com_create_table")+m("Com_create_trigger")+m("Com_create_udf")+m("Com_create_user")+m("Com_create_view")),N=Math.round(m("Com_alter_db")+m("Com_alter_db_upgrade")+m("Com_alter_event")+m("Com_alter_function")+m("Com_alter_procedure")+m("Com_alter_server")+m("Com_alter_table")+m("Com_alter_tablespace")+m("Com_alter_user")),O=Math.round(m("Com_drop_db")+m("Com_drop_event")+m("Com_drop_function")+m("Com_drop_index")+m("Com_drop_procedure")+m("Com_drop_server")+m("Com_drop_table")+m("Com_drop_trigger")+m("Com_drop_user")+m("Com_drop_view")),_=P+L+F+A+B+N+O;l.shift(),l.shift(),l.shift(),l.push({xValue:h,yValue:P,group:"select"}),l.push({xValue:h,yValue:L+F+A,group:"dml"}),l.push({xValue:h,yValue:B+N+O,group:"ddl"});const G=u.get("Table_open_cache_hits")??0,U=G/(G+(u.get("Table_open_cache_misses")??1)),q=(u.get("Innodb_buffer_pool_bytes_data")??0)/(u.get("Innodb_page_size")??0)/(u.get("Innodb_buffer_pool_pages_total")??0),V=m("Innodb_buffer_pool_read_requests"),z=m("Innodb_buffer_pool_write_requests"),H=m("Innodb_buffer_pool_reads"),j=0===V?0:H/V,W=m("Innodb_os_log_written"),$=m("Innodb_log_writes"),K=m("Innodb_dblwr_writes"),Q=m("Innodb_data_written"),Y=m("Innodb_data_read");d.shift(),d.push({xValue:h,yValue:Q}),c.shift(),c.push({xValue:h,yValue:Y});const J=t/(u.get("Innodb_log_file_size")??1)*(u.get("Innodb_log_files_in_group")??1);null==n||n({timestamp:h,activeColorScheme:i.activeColorScheme,displayInterval:i.displayInterval,currentValues:u,computedValues:{threadsCached:g,threadsConnected:f,threadsCreated:b,threadsRunning:v,openFiles:S,openStreams:C,openTableDefinitions:w,openTables:y,openedTableDefinitions:k,openedTables:I,trxBegin:D,trxCommit:T,trxReleaseSavepoint:R,trxRollback:x,trxRollbackToSavepoint:E,trxSavepoint:M,tableCacheEfficiency:U,totalStatements:_,selects:P,creates:B,inserts:L,updates:F,deletes:A,alters:N,drops:O,innoDBBufferPoolUsage:q,innoDBBufferReads:V,innoDBBufferWrites:z,innoDBBufferDiskReads:H,innoDBRedoLogDataWritten:W,innoDBRedoLogWrites:$,innoDBDoubleWriteBufferWrites:K,innoDBDataWritten:Q,innoDBDataRead:Y,innoDBBufferReadRatio:j,checkpointAge:J},series:new Map([["incomingNetworkData",s],["outgoingNetworkData",r],["clientConnectionsData",a],["sqlStatementsData",l],["innoDBDiskWritesData",d],["innoDBDiskReadsData",c]])})}extractCurrentValues(e){const t=new Map(e),n=new Map;return this.variableNames.forEach((e=>{n.set(e,parseInt(t.get(e)??"0",10))})),n}findYDomainValues(e,t){let n=t??-1e100,i=t??1e100;if(e.forEach((e=>{e.yValue&&(e.yValue<i&&(i=e.yValue),e.yValue>n&&(n=e.yValue))})),i>n){const e=i;i=n,n=e}if(0!==i){const e=Math.sign(i);i=Math.abs(i);const t=Math.log(i)/Math.log(2),n=e<0?Math.ceil(t):Math.floor(t);i=e*Math.pow(2,n)}if(0!==n){const e=Math.sign(n);n=Math.abs(n);const t=Math.ceil(Math.log(n)/Math.log(2)),i=e<0?Math.floor(t):Math.ceil(t);n=e*Math.pow(2,i)}return 0===i&&0===n?[0,10]:[i,n]}get trafficTooltip(){return{format:e=>{if(this.isPieDatum(e))return"";if(void 0===e.yValue)return"";const t=(new Date).getTime()-(e.xValue instanceof Date?e.xValue.getTime():e.xValue);return`${this.formatTimeDifference(t)}\n${this.formatTrafficValue(e.yValue)}`},position:{left:200,top:20}}}get pieTooltip(){return{format:e=>{if(this.isPieDatum(e)){const t=e.value.toLocaleString("en");return e.name?`${e.name}: ${t}`:`${e.value}`}return""}}}get pieTooltipPercent(){return{format:e=>{if(this.isPieDatum(e)){const t=(100*e.value).toFixed(2);return e.name?`${e.name}: ${t}%`:`${t}%`}return""}}}get connectionsTooltip(){return{format:e=>{if(this.isPieDatum(e))return"";if(void 0===e.yValue)return"";const t=(new Date).getTime()-(e.xValue instanceof Date?e.xValue.getTime():e.xValue);return`${this.formatTimeDifference(t)}\n${e.yValue} connections`},position:{left:200,top:20}}}get statementsTooltip(){return{format:(e,t,n)=>{if(this.isPieDatum(e)||void 0===t||void 0===n)return"";if(void 0===e.yValue)return"";const i=(new Date).getTime()-(e.xValue instanceof Date?e.xValue.getTime():e.xValue);t=3*Math.floor(t/3);const o=n;return`${this.formatTimeDifference(i)}\n${o[t].yValue} SELECT\n${o[t+1].yValue} DML\n${o[t+2].yValue} DDL`},position:{left:200,top:20}}}isPieDatum(e){return void 0!==e.value}};pe(Zs,"sampleInterval",3e3);let er=Zs;const tr=new RegExp("(You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '(.*)' at line )(\\d+)"),nr=new RegExp("^\\s*\\n+"),ir=class _DBConnectionTab extends ComponentBase{constructor(e){super(e),pe(this,"runningContexts",new Map),pe(this,"resultTimers",new Map),pe(this,"notebookRef",ke()),pe(this,"scriptRef",ke()),pe(this,"scriptWaiting",!1),pe(this,"loadingNotebook",!1),pe(this,"cachedMrsServiceSdk",{}),pe(this,"mrsLoginResult"),fe(this,ie,{}),pe(this,"editorStopExecution",(async()=>{const{backend:e}=this.state;return!!e&&(await e.killQuery(),!0)})),pe(this,"editorCommit",(async()=>{const{backend:e}=this.state;if(!e)return!1;try{await e.execute("commit"),await nn.execute("sqlTransactionChanged",void 0)}catch(t){await nn.execute("showError",["Execution Error",String(t)])}return!0})),pe(this,"editorRollback",(async()=>{const{backend:e}=this.state;return!!e&&(await e.execute("rollback"),await nn.execute("sqlTransactionChanged",void 0),!0)})),pe(this,"sqlShowDataAtPage",(async e=>{const t=hi.get("sql.limitRowCount",1e3);return await this.executeQuery(e.context,0,e.page,t,{},e.sql,e.oldResultId),!0})),pe(this,"editorRunCode",(async e=>{if(this.notebookRef.current)return"mysql"===e.language&&await this.notebookRef.current.executeQueries({params:e.params},e.code,e.linkId),Promise.resolve(!0);{const{savedState:e}=this.props,t=e.editors.find((e=>e.type===jn.Notebook));return t?this.handleSelectItem(t.id,t.type):this.handleAddEditor(),Promise.resolve(!1)}})),pe(this,"editorRunScript",(async e=>this.scriptWaiting?!!this.scriptRef.current&&(this.scriptWaiting=!1,this.scriptRef.current.executeWithMaximizedResult(e.content,e.forceSecondaryEngine)):(this.scriptWaiting=!0,await this.editorEditScript(e),!1))),pe(this,"editorInsertUserScript",(async e=>{try{const t=await Kn.modules.getDataContent(e.resourceId);this.notebookRef.current?this.notebookRef.current.insertScriptText(e.language,t):this.scriptRef.current&&this.scriptRef.current.insertScriptText(e.language,t)}catch(t){return await nn.execute("showError",["Loading Error","Cannot load scripts content:",String(t)]),!1}return!0})),pe(this,"showPageSection",(e=>(this.handleSelectItem(e.id,e.type),Promise.resolve(!0)))),pe(this,"editorEditScript",(e=>{const{id:t,onSelectItem:n}=this.props;return null==n||n({tabId:t??"",itemId:e.scriptId,type:jn.Script,language:e.language,caption:e.name,content:e.content}),Promise.resolve(!0)})),pe(this,"editorLoadScript",(e=>{const{id:t,onLoadScript:n}=this.props;return null==n||n(t??"",e.scriptId,e.content),Promise.resolve(!0)})),pe(this,"editorRenameScript",(e=>{const{id:t,onEditorRename:n}=this.props;return null==n||n(t??"",e.scriptId,e.name??"<untitled>"),Promise.resolve(!0)})),pe(this,"addContextResultMessage",((e,t)=>{const n=this.runningContexts.get(e);n&&n.addResultData({type:"text",text:[{type:zi.Info,content:t}]},{resultId:""})})),pe(this,"cancelMrsAuthentication",(async e=>{var t;null==(t=this.notebookRef.current)||t.focus(),this.mrsLoginResult=void 0,this.cachedMrsServiceSdk.schemaMetadataVersion=void 0,await this.updateMrsServiceSdkCache();const n=e.payload;return(null==n?void 0:n.contextId)?(this.addContextResultMessage(n.contextId,"\nAuthentication cancelled."),Promise.resolve(!0)):Promise.resolve(!1)})),pe(this,"acceptMrsAuthentication",(async e=>{var t;null==(t=this.notebookRef.current)||t.focus();try{const t=e.request.payload;if(e.request.service&&t.loginResult){if(this.mrsLoginResult=t.loginResult,this.cachedMrsServiceSdk.schemaMetadataVersion=void 0,await this.updateMrsServiceSdkCache(),t.contextId&&e.request.user)return this.addContextResultMessage(t.contextId,`\nUser '${e.request.user}' logged in successfully.`),Promise.resolve(!0)}else t.contextId&&this.addContextResultMessage(t.contextId,"\nAuthentication cancelled.")}catch(n){nn.execute("showError",["Accept Password Error",String(n)])}return Promise.resolve(!1)})),pe(this,"editorLoadNotebook",(async e=>{const t=async t=>{let n;if(0===t.length)n={type:"MySQLNotebook",version:"1.0",caption:"Untitled",content:"",options:{},viewState:null,contexts:[]};else try{n=JSON.parse(t)}catch(i){return void(await nn.execute("showError",["The notebook file is not valid JSON."]))}if("MySQLNotebook"!==n.type)nn.execute("showError",["Invalid notebook content"]);else try{this.loadingNotebook=!0;let t=this.findActiveEditor();if(!t){this.handleAddEditor()&&(t=this.findActiveEditor())}const i=null==t?void 0:t.state;if(i){const{id:e}=this.props;t.caption=n.caption,i.model.setValue(n.content),i.options=n.options;const o=Oi.db.transaction(Bi.DbEditor,"readwrite").objectStore(Bi.DbEditor);for(const t of n.contexts){const n=new Map,i=t.state.result;if("resultIds"===(null==i?void 0:i.type)){i.list.forEach(((e,t,i)=>{const o=an();n.set(e,o),i[t]=o}));for(const i of t.data??[])i.resultId=n.get(i.resultId)??"",i.tabId=e,await o.add(i)}}setTimeout((()=>{var e;null==(e=this.notebookRef.current)||e.restoreNotebook(n),this.loadingNotebook=!1}),10)}tn.embedded&&this.setState({standaloneMode:(null==e?void 0:e.standalone)??!1})}catch(o){this.loadingNotebook=!1,nn.execute("showError",["Error while loading notebook",String(o)])}};if(void 0===e){if(tn.embedded)return nn.executeRemote("editorLoadNotebook",void 0);const e=await on([".mysql-notebook"],!1);if(e){const n=e[0],i=new FileReader;i.onload=()=>{if("string"==typeof i.result)try{t(i.result)}catch(e){if(e instanceof Error){const t=e.toString()||"";alert(`Error while parsing JSON data: \n${t}`)}}else nn.execute("showError",["Cannot read notebook file"])},i.readAsText(n,"utf-8")}}else await t(e.content);return Promise.resolve(!0)})),pe(this,"editorSaveNotebook",(async e=>{var t;const n=this.findActiveEditor();if(n){const i=n.state;if(i&&i.model.executionContexts){const o={type:"MySQLNotebook",version:"1.0",caption:n.caption,content:i.model.getValue(),options:i.options,viewState:(null==(t=this.notebookRef.current)?void 0:t.getViewState())??null,contexts:await i.model.executionContexts.collectRawState()},s=JSON.stringify(o,((e,t)=>{if("diagnosticDecorationIDs"!==e)return t}),4);if(tn.embedded)void 0===e?nn.executeRemote("editorSaveNotebook",s):nn.executeRemote("editorSaveNotebookInPlace",s);else{const{caption:e}=this.props;sn(s,`${e??"<unnamed>"} - ${n.caption}.mysql-notebook`)}}}return Promise.resolve(!0)})),pe(this,"runSQLCode",(async(e,t)=>{var n;const i=hi.get("sql.limitRowCount",1e3);if(e.clearResult(),t.source){const o=null==(n=await e.getStatementAtPosition(t.source))?void 0:n.text;await this.executeQuery(e,0,0,i,t,o??"")}else{const n=await e.getExecutableStatements();for(;;){const s=hi.get("editor.stopOnErrors",!0),r=n.shift();if(!r)break;try{await this.executeQuery(e,r.index,0,i,t,r.text)}catch(o){if(s)break}}}})),pe(this,"executeQuery",(async(e,t,n,i,o,s,r)=>{if(0===s.trim().length)return;const{backend:a}=this.state;if(a){const l=bo.instance,d=await l.determineQueryType(e,s),c=[];if(d===Ji.Select&&o.params){(await l.extractQueryParameters(s,e.dbVersion,e.sqlMode)).forEach((e=>{const t=o.params.find((t=>t[0]===e[0]));t?c.push(t[1]):c.push(e[1])}))}if(d===Ji.Select&&(i>0||o.forceSecondaryEngine)){const u=n*i,[h,p]=await l.preprocessStatement(e,s,u,i+1,o.forceSecondaryEngine);await this.doExecution({backend:a,query:h,original:s,queryType:d,params:c,context:e,index:t,explicitPaging:p,currentPage:n,oldResultId:r,showAsText:o.asText??!1})}else await this.doExecution({backend:a,query:s,original:s,queryType:d,params:c,context:e,index:t,explicitPaging:!1,currentPage:n,oldResultId:r,showAsText:o.asText??!1})}})),pe(this,"doExecution",(async e=>{const{id:t=""}=this.props;let n,i=an(),o=!1;e.queryType===Ji.Call&&(n=0);try{e.oldResultId&&(i=e.oldResultId,o=!0,i&&Oi.removeDataByResultIds(Bi.DbEditor,[i]));let s=[],r=!1;e.context.executionStarts(),await e.backend.execute(e.query,e.params,void 0,(a=>{var l;const{dbType:d}=this.props;let c=!1,u=0,h={text:""},p=!1;if(void 0!==a.result.totalRowCount){if(p=!0,u=a.result.totalRowCount,e.explicitPaging){hi.get("sql.limitRowCount",1e3)<u&&(--u,null==(l=a.result.rows)||l.pop(),c=!0)}h=a.result.rowsAffected?{text:`OK, ${Pn("row",a.result.rowsAffected)} affected in ${Mn(a.result.executionTime)}`}:{text:`OK, ${Pn("record",u)} retrieved in ${Mn(a.result.executionTime)}`},0===u&&(h.type=zi.Response)}a.result.columns&&(s=Qi(d,a.result.columns),r=!0);const m=Yi(s,a.result.rows);if(e.showAsText){let t="";if(r){let n=e.query.trim();n.endsWith(";")||(n+=";"),t+=`sql> ${n}\n`}t+=this.convertResultSetToText(m,s,r,p),this.addTimedResult(e.context,{type:"text",executionInfo:p?h:void 0,text:[{type:zi.Text,content:t}]},{resultId:i,index:e.index,sql:e.original,replaceData:o})}else Oi.db.add("dbModuleResultData",{tabId:t,resultId:i,rows:m,columns:r?s:void 0,executionInfo:p?h:void 0,totalRowCount:p?u:void 0,hasMoreRows:c,currentPage:e.currentPage,index:e.index,subIndex:n,sql:e.original}),this.addTimedResult(e.context,{type:"resultSetRows",rows:m,columns:r?s:void 0,executionInfo:p?h:void 0,totalRowCount:p?u:void 0,hasMoreRows:c,currentPage:e.currentPage},{resultId:i,index:e.index,subIndex:n,sql:e.original,replaceData:o});p&&(i=an(),e.queryType===Ji.Call&&++n),r=!1,o=!1})),await this.handleDependentTasks(e)}catch(s){const t=this.resultTimers.get(i);t&&(await kt(t.timer),this.resultTimers.delete(i));let n=zi.Error,r="",a=0;if(s instanceof ResponseError)if(r=s.info.requestState.msg,s.info.requestState.code)a=s.info.requestState.code;else{const e=r.match(/MySQL Error \((\d+)\)/);e&&(a=parseInt(e[1],10));const t="ScriptingError: ClassicSession.run_sql: \n";r.startsWith(t)&&(r=r.substring(t.length).trim(),r.startsWith("Exception: ")&&(r=`ERROR: ${r.substring(11)}`))}else r=s;switch(a){case 1201:n=zi.Warning,r="Cancelled: query was prematurely stopped";break;case 1064:{const t=r.match(tr);if(t){let n=parseInt(t[3],10);const i=(await e.context.getExecutableStatements())[e.index-1];if(i){n+=i.line;const e=i.text.match(nr);e&&(n+=e[0].length)}r=r.replace(tr,((e,t)=>`${t}${n}`))}break}}if(this.addTimedResult(e.context,{type:"text",text:[{type:n,index:e.index,content:r,language:"ansi"}],executionInfo:{text:""}},{resultId:i,index:e.index,sql:e.original,replaceData:o}),3889===a)await this.getHeatWaveTrace(e.context,e.original,i)}})),pe(this,"reconnect",(async e=>{const{backend:t}=this.state;if(t)try{await t.reconnect(),await e.addResultData({type:"text",text:[{type:zi.Info,index:0,content:"Reconnection done",language:"ansi"}]},{resultId:""})}catch(n){await e.addResultData({type:"text",text:[{type:zi.Error,index:0,content:String(n),language:"ansi"}]},{resultId:""})}})),pe(this,"handleDependentTasks",(async e=>{const{id:t,connectionId:n}=this.props,{backend:i}=this.state;switch(e.queryType){case Ji.SetAutoCommit:case Ji.StartTransaction:case Ji.BeginWork:case Ji.Commit:case Ji.RollbackWork:nn.execute("sqlTransactionChanged",void 0);break;case Ji.Use:{const e=await(null==i?void 0:i.getCurrentSchema());e&&(nn.executeRemote("sqlSetCurrentSchema",{id:t??"",connectionId:n,schema:e}),await nn.execute("sqlSetCurrentSchema",{id:t??"",connectionId:n,schema:e}));break}case Ji.RestUse:case Ji.Rest:this.cachedMrsServiceSdk.schemaMetadataVersion=void 0,await this.updateMrsServiceSdkCache(),nn.executeRemote("refreshConnections",void 0)}})),pe(this,"updateMrsServiceSdkCache",(async()=>{var e,t,n,i;const{connectionId:o}=this.props,{backend:s}=this.state;if(void 0===s)return!1;{const a=an(),l=async(e,t)=>{tn.embedded?nn.executeRemote("updateStatusbar",[{id:a,text:e,visible:void 0!==e,hideAfter:t}]):await nn.execute("updateStatusbar",[{id:a,text:e,visible:void 0!==e,hideAfter:t}])};try{l("$(loading~spin) Checking MRS status ...");const r=await s.mrs.getCurrentServiceMetadata();if(void 0!==r.id&&null!==r.id&&void 0!==r.hostCtx&&null!==r.hostCtx&&void 0!==r.metadataVersion)if(this.cachedMrsServiceSdk.schemaId!==r.id||this.cachedMrsServiceSdk.schemaMetadataVersion!==r.metadataVersion){let n=!1,i=!1,a="";if(this.mrsLoginResult&&this.mrsLoginResult.authApp&&this.mrsLoginResult.jwt&&(a=`const mrsLoginResult = { authApp: "${this.mrsLoginResult.authApp}", jwt: "${this.mrsLoginResult.jwt}" };\n`,i=!0),void 0===this.cachedMrsServiceSdk.baseClasses&&(l("$(loading~spin) Loading MRS SDK Base Classes ..."),this.cachedMrsServiceSdk.baseClasses=await s.mrs.getSdkBaseClasses("TypeScript",!0),n=!0),l(`$(loading~spin) ${n?"Loading":"Refreshing"} MRS SDK for ${r.hostCtx}...`),void 0===this.cachedMrsServiceSdk.serviceUrl)if(r.hostCtx.toLowerCase().startsWith("http"))this.cachedMrsServiceSdk.serviceUrl=r.hostCtx;else{const e=await s.mrs.getService(r.id,null,null,null,null);this.cachedMrsServiceSdk.serviceUrl=`https://localhost:${8443+o}${e.urlContextRoot}`}a+=this.cachedMrsServiceSdk.baseClasses+"\n"+await s.mrs.getSdkServiceClasses(r.id,"TypeScript",!0,this.cachedMrsServiceSdk.serviceUrl),this.cachedMrsServiceSdk.code=a,this.cachedMrsServiceSdk.codeLineCount=(a.match(/\n/gm)??[]).length+1,this.cachedMrsServiceSdk.schemaId=r.id,this.cachedMrsServiceSdk.schemaMetadataVersion=r.metadataVersion;const d=(null==(e=this.notebookRef.current)?void 0:e.addOrUpdateExtraLib(this.cachedMrsServiceSdk.code,"mrsServiceSdk.d.ts"))??0;null==(t=this.scriptRef.current)||t.addOrUpdateExtraLib(this.cachedMrsServiceSdk.code,"mrsServiceSdk.d.ts");const c=n?"loaded":"refreshed (v"+String(d)+")",u=i?" User authenticated.":"";l(`MRS SDK for ${r.hostCtx} has been ${c}.${u}`,5e3)}else l();else if(void 0!==r.metadataVersion){this.cachedMrsServiceSdk={},l("$(loading~spin) Loading MRS Management Classes ...");const e=await s.mrs.getRuntimeManagementCode();this.cachedMrsServiceSdk.codeLineCount=(e.match(/\n/gm)??[]).length+1,this.cachedMrsServiceSdk.code=e,null==(n=this.notebookRef.current)||n.addOrUpdateExtraLib(e,"mrsServiceSdk.d.ts"),null==(i=this.scriptRef.current)||i.addOrUpdateExtraLib(e,"mrsServiceSdk.d.ts"),l("MRS MRS Management Classes have been loaded.",5e3)}else l();return!0}catch(r){return l(`MRS SDK Error: ${String(r)}`),!1}}})),pe(this,"handleExecution",(async(e,t)=>{const{workerPool:n}=this.props,i=e.code.trim();if(0===i.length)return!1;this.runningContexts.set(e.id,e);const o=i.split(" ");if(o.length>0){switch(o[0].toLowerCase()){case"\\about":{const t=navigator.userAgent.includes("Macintosh"),n=_DBConnectionTab.aboutMessage.replace("%modifier%",t?"Cmd":"Ctrl");return await(null==e?void 0:e.addResultData({type:"text",text:[{type:zi.Info,content:n,language:"ansi"}]},{resultId:""})),!0}case"\\reconnect":return await(null==e?void 0:e.addResultData({type:"text",text:[{type:zi.Info,content:"Reconnecting the current DB connection ...\n",language:"ansi"}]},{resultId:""})),await this.reconnect(e),!0}}switch(e.clearResult(),e.language){case"javascript":n.runTask({api:$s.Request,code:e.code,contextId:e.id}).then(((e,t)=>{this.handleTaskResult(e,t)}));break;case"typescript":{await this.updateMrsServiceSdkCache();const t=e.code.includes("await ");n.runTask({api:$s.Request,libCodeLineNumbers:(this.cachedMrsServiceSdk.codeLineCount?this.cachedMrsServiceSdk.codeLineCount-1:0)+(t?1:0),code:Ge.transpile((this.cachedMrsServiceSdk.code??"")+(t?"(async () => {\n"+e.code.replace("\nexport{}\n","")+"})()":e.code),{alwaysStrict:!0,target:Dt.ScriptTarget.ES2022,inlineSourceMap:!0}),contextId:e.id,globalScriptingObject:ge(this,ie)}).then(((e,t)=>{this.handleTaskResult(e,t)}));break}case"sql":case"mysql":await this.runSQLCode(e,t)}return!0})),pe(this,"handleEdit",(e=>{if(e){const{id:t="",onEditorChange:n}=this.props;null==n||n(t,e)}})),pe(this,"handleTaskResult",(async(e,t)=>{const{workerPool:n,connectionId:i}=this.props,{backend:o}=this.state;try{switch(t.api){case $s.QueryStatus:{const e=t.result,n=`${e.requestState.type}, ${Pn("record",e.totalRowCount||0)} retrieved in ${Mn(e.executionTime)}`,i=this.runningContexts.get(t.contextId);i&&await i.addResultData({type:"text",text:[{type:zi.Info,content:n,language:"ansi"}],executionInfo:{text:""}},{resultId:""});break}case $s.Result:if(t.result&&"PENDING"!==t.result){const e=this.runningContexts.get(t.contextId);e&&(t.isError?await e.addResultData({type:"text",text:[{type:zi.Error,content:String(t.result),language:"ansi"}],executionInfo:{type:zi.Error,text:""}},{resultId:""}):await e.addResultData({type:"text",text:[{type:zi.Info,content:String(t.result)}]},{resultId:""}))}break;case $s.RunSql:if(o){n.retainTask(e);let i=[],r=[];const a=e=>{if(e.columns&&(i=e.columns,r=[]),e.rows)for(const t of e.rows??[]){const e={};if(Array.isArray(t))for(let n=0;n<t.length;n++)e[i[n].name]=t[n];r.push(e)}};try{const i=await o.execute(t.code,t.params,an(),(e=>{a(e.result)}));i&&a(i),n.continueTask(e,{api:$s.Request,result:r,contextId:t.contextId,final:!0})}catch(s){const i=this.runningContexts.get(t.contextId);await(null==i?void 0:i.addResultData({type:"text",executionInfo:{type:zi.Error,text:`Error: ${String(s)}`}},{resultId:""})),n.releaseTask(e)}}break;case $s.RunSqlIterative:if(o){n.retainTask(e);try{const i=await o.execute(t.code,t.params,void 0,(i=>{n.continueTask(e,{api:$s.Request,result:i,contextId:t.contextId,final:!1})}));n.continueTask(e,{api:$s.Request,result:i,contextId:t.contextId,final:!0})}catch(s){const i=this.runningContexts.get(t.contextId);await(null==i?void 0:i.addResultData({type:"text",executionInfo:{type:zi.Error,text:`Error: ${String(s)}`}},{resultId:""})),n.releaseTask(e)}}break;case $s.Print:{const e=this.runningContexts.get(t.contextId);void 0!==t.value&&e&&await e.addResultData({type:"text",text:[{type:zi.Info,content:String(t.value)}]},{resultId:""});break}case $s.SetGlobalObjectProperty:{const e=this.runningContexts.get(t.contextId);void 0!==t.name&&e&&(ge(this,ie)[t.name]=t.value);break}case $s.Graph:{const e=this.runningContexts.get(t.contextId);await(null==e?void 0:e.addResultData({type:"graphData",options:t.options},{resultId:""}));break}case $s.MrsPrintSdkCode:{const e=this.runningContexts.get(t.contextId);if(this.cachedMrsServiceSdk.code&&e){const t=this.cachedMrsServiceSdk.code.split("\n");let n="",i=1;for(const e of t)n+=(i+++" ").padStart(5," ")+e.replaceAll("\t"," ".repeat(2))+"\n";await e.addResultData({type:"text",text:[{type:zi.Info,content:n}]},{resultId:""})}break}case $s.MrsSetCurrentService:o&&t.serviceId&&"string"==typeof t.serviceId&&(await o.mrs.setCurrentService(t.serviceId),await this.updateMrsServiceSdkCache(),nn.executeRemote("refreshConnections",void 0));break;case $s.MrsEditService:if(o&&t.serviceId&&"string"==typeof t.serviceId){const e=await o.mrs.getService(t.serviceId,null,null,null,null);void 0!==e&&nn.execute("showMrsServiceDialog",e)}break;case $s.MrsExportServiceSdk:if(o&&t.serviceId&&"string"==typeof t.serviceId){void 0!==await o.mrs.getService(t.serviceId,null,null,null,null)&&nn.execute("showMrsSdkExportDialog",{serviceId:t.serviceId,connectionId:i})}break;case $s.MrsSetServiceUrl:this.cachedMrsServiceSdk={serviceUrl:t.serviceUrl},await this.updateMrsServiceSdkCache();break;case $s.MrsAuthenticate:{const e={requestId:"userInput",service:t.serviceUrl,user:t.userName,payload:{authPath:t.authPath,authApp:t.authApp,contextId:t.contextId}};nn.execute("requestMrsAuthentication",e);break}case $s.MrsEditSchema:if(o&&t.schemaId&&"string"==typeof t.schemaId){const e=await o.mrs.getSchema(t.schemaId);if(void 0!==e){const t={schemaName:e.name,schema:e};nn.execute("showMrsSchemaDialog",t)}}break;case $s.MrsEditDbObject:if(o&&t.dbObjectId&&"string"==typeof t.dbObjectId){const e=await o.mrs.getDbObject(t.dbObjectId);if(void 0!==e){const t={dbObject:e,createObject:!1};nn.execute("showMrsDbObjectDialog",t)}}}}catch(r){const e=this.runningContexts.get(t.contextId);await(null==e?void 0:e.addResultData({type:"text",text:[{type:zi.Error,content:r instanceof Error?r.stack??r.message:String(r)}],executionInfo:{type:zi.Error,text:""}},{resultId:""}))}})),pe(this,"handleSelectItem",((e,t,n)=>{const{id:i="",onSelectItem:o}=this.props;null==o||o({itemId:e,tabId:i,type:t,caption:n})})),pe(this,"handleCloseEditor",(e=>{const{id:t,onRemoveEditor:n}=this.props;null==n||n(t??"",e)})),pe(this,"handleAddEditor",(()=>{const{id:e,onAddEditor:t}=this.props;return null==t?void 0:t(e??"")})),pe(this,"handleEditorRename",((e,t)=>{const{id:n,onEditorRename:i}=this.props;null==i||i(n??"",e,t)})),pe(this,"handleAddScript",(e=>{const{id:t,onAddScript:n,dbType:i}=this.props;null==n||n(t??"",e,i)})),pe(this,"saveSchemaTree",((e,t)=>{const{onSaveSchemaTree:n}=this.props;null==n||n(e,t)})),pe(this,"saveExplorerState",((e,t)=>{const{onSaveExplorerState:n}=this.props;null==n||n(e,t)})),pe(this,"handleExplorerMenuAction",((e,t,n)=>{const{connectionId:i}=this.props,{backend:o}=this.state,s=n;switch(t){case"setCurrentSchemaMenuItem":nn.execute("sqlSetCurrentSchema",{id:e,connectionId:i,schema:s.qualifiedName.schema});break;case"filterMenuItem":case"inspectorMenuItem":case"editorNameMenuItem":case"createSchemaMenuItem":case"alterSchemaMenuItem":case"dropSchemaMenuItem":case"refreshMenuItem":break;case"clipboardNameMenuItem":nn.writeToClipboard(s.caption);break;case"clipboardCreateStatementMenuItem":case"editorCreateStatementMenuItem":{let e,n=`\`${s.qualifiedName.schema}\`.`,i=1;switch(s.type){case Wn.Schema:e="schema",n="";break;case Wn.Table:e="table";break;case Wn.View:e="view";break;case Wn.StoredFunction:i=2,e="function";break;case Wn.StoredProcedure:i=2,e="procedure";break;case Wn.Trigger:e="trigger";break;case Wn.Event:e="event";break;case Wn.User:e="user"}e&&(null==o||o.execute(`show create ${e} ${n}\`${s.caption}\``).then((e=>{const n=null==e?void 0:e.rows;if(n&&n.length>0){const e=n[0];e.length>i&&("clipboardCreateStatementMenuItem"===t?nn.writeToClipboard(e[i]):this.notebookRef.current?this.notebookRef.current.insertScriptText("mysql",e[i]):this.scriptRef.current&&this.scriptRef.current.insertScriptText("sql",e[i]))}})));break}default:{const{id:e,onExplorerMenuAction:i}=this.props;null==i||i(e??"",t,n);break}}})),pe(this,"handlePaneResize",(e=>{e.forEach((e=>{if("explorer"===e.id){const{id:t="",onExplorerResize:n}=this.props;null==n||n(t,e.currentSize)}}))})),pe(this,"handleGraphDataChange",(e=>{const{id:t,onGraphDataChange:n}=this.props;null==n||n(t??"",e)})),pe(this,"findActiveEditor",(()=>{const{savedState:e}=this.props;let t=e.editors.find((t=>t.id===e.activeEntry));return!t&&e.editors.length>0&&(t=e.editors[0]),t})),this.state={backend:e.savedState.backend,standaloneMode:!1},this.addHandledProperties("connectionId","dbType","savedState","workerPool","toolbarInset","showExplorer","showAbout","extraLibs","onHelpCommand","onAddEditor","onLoadEditor","onRemoveEditor","onSelectEditor","onChangeEditor","onAddScript","onSaveSchemaTree","onSaveExplorerState","onExplorerResize","onExplorerMenuAction")}componentDidMount(){var e;nn.register("editorStopExecution",this.editorStopExecution),nn.register("editorCommit",this.editorCommit),nn.register("editorRollback",this.editorRollback),nn.register("sqlShowDataAtPage",this.sqlShowDataAtPage),nn.register("editorRunCode",this.editorRunCode),nn.register("editorRunScript",this.editorRunScript),nn.register("editorInsertUserScript",this.editorInsertUserScript),nn.register("showPageSection",this.showPageSection),nn.register("editorEditScript",this.editorEditScript),nn.register("editorLoadScript",this.editorLoadScript),nn.register("editorRenameScript",this.editorRenameScript),nn.register("acceptMrsAuthentication",this.acceptMrsAuthentication),nn.register("cancelMrsAuthentication",this.cancelMrsAuthentication),nn.register("refreshMrsServiceSdk",this.updateMrsServiceSdkCache),nn.register("editorSaveNotebook",this.editorSaveNotebook),nn.register("editorLoadNotebook",this.editorLoadNotebook);const{id:t,connectionId:n,savedState:i}=this.props;nn.executeRemote("sqlSetCurrentSchema",{id:t??"",connectionId:n,schema:i.currentSchema}),null==(e=this.notebookRef.current)||e.focus(),this.updateMrsServiceSdkCache()}componentWillUnmount(){this.resultTimers.forEach((e=>{kt(e.timer)})),this.resultTimers.clear();const{id:e,connectionId:t}=this.props;nn.executeRemote("sqlSetCurrentSchema",{id:e??"",connectionId:t,schema:""}),nn.unregister("editorStopExecution",this.editorStopExecution),nn.unregister("editorCommit",this.editorCommit),nn.unregister("editorRollback",this.editorRollback),nn.unregister("sqlShowDataAtPage",this.sqlShowDataAtPage),nn.unregister("editorRunCode",this.editorRunCode),nn.unregister("editorRunScript",this.editorRunScript),nn.unregister("editorInsertUserScript",this.editorInsertUserScript),nn.unregister("showPageSection",this.showPageSection),nn.unregister("editorEditScript",this.editorEditScript),nn.unregister("editorLoadScript",this.editorLoadScript),nn.unregister("editorRenameScript",this.editorRenameScript),nn.unregister("acceptMrsAuthentication",this.acceptMrsAuthentication),nn.unregister("cancelMrsAuthentication",this.cancelMrsAuthentication),nn.unregister("refreshMrsServiceSdk",this.updateMrsServiceSdkCache),nn.unregister("editorSaveNotebook",this.editorSaveNotebook),nn.unregister("editorLoadNotebook",this.editorLoadNotebook)}componentDidUpdate(e){const{id:t,connectionId:n,savedState:i}=this.props;n!==e.connectionId&&(this.setState({backend:i.backend}),nn.executeRemote("sqlSetCurrentSchema",{id:t??"",connectionId:n,schema:i.currentSchema}))}render(){const{toolbarItems:e,id:t,savedState:n,dbType:i,showExplorer:o=!0,onHelpCommand:s,showAbout:r,extraLibs:a}=this.props,{backend:l,standaloneMode:d}=this.state,c=this.getEffectiveClassNames(["connectionTabHost"]);let u;const h=this.findActiveEditor();if(h)switch(h.type){case jn.Notebook:this.scriptRef.current=null,u=Ie(Notebook,{ref:this.notebookRef,savedState:n,backend:l,toolbarItemsTemplate:e,standaloneMode:d,dbType:i,extraLibs:a,showAbout:r&&!this.loadingNotebook,fontSize:tn.editorFontSize,onHelpCommand:s,onScriptExecution:this.handleExecution});break;case jn.Script:this.notebookRef.current=null,u=Ie(ScriptEditor,{id:n.activeEntry,ref:this.scriptRef,extraLibs:a,savedState:n,toolbarItemsTemplate:e,standaloneMode:d,fontSize:tn.editorFontSize,onScriptExecution:this.handleExecution,onEdit:this.handleEdit});break;case jn.Status:u=Ie(ServerStatus,{backend:n.backend,toolbarItems:e});break;case jn.Connections:u=Ie(Js,{backend:n.backend,toolbarItems:e});break;case jn.Dashboard:u=Ie(er,{backend:n.backend,toolbarItems:e,graphData:n.graphData,onGraphDataChange:this.handleGraphDataChange})}return Ie(SplitContainer,{className:c,panes:[{id:"explorer",minSize:150,initialSize:n.explorerWidth>-1?n.explorerWidth:250,snap:!0,resizable:!0,collapsed:!o,content:Ie(Explorer,{id:t,dbType:i,schemaTree:n.schemaTree,savedState:n.explorerState,editors:n.editors,scripts:n.scripts,selectedEntry:n.activeEntry,markedSchema:n.currentSchema,backend:n.backend,onSelectItem:this.handleSelectItem,onCloseItem:this.handleCloseEditor,onAddItem:this.handleAddEditor,onChangeItem:this.handleEditorRename,onAddScript:this.handleAddScript,onSaveSchemaTree:this.saveSchemaTree,onSaveExplorerState:this.saveExplorerState,onContextMenuItemClick:this.handleExplorerMenuAction})},{id:"content",minSize:350,snap:!1,stretch:!0,content:u}],onPaneResized:this.handlePaneResize})}addTimedResult(e,t,n){const i=this.resultTimers.get(n.resultId);if(i)i.results.push([t,n]);else{const i={timer:yt.setIntervalAsync((async t=>{const n=this.resultTimers.get(t);if(n){const i=n.results.shift();i?await e.addResultData(i[0],i[1],{showIndexes:!0}):kt(n.timer).then((()=>{this.resultTimers.delete(t)}))}}),20,n.resultId),results:[[t,n]]};this.resultTimers.set(n.resultId,i)}}async getHeatWaveTrace(e,t,n){const{backend:i}=this.state;if(!i)return;const o=bo.instance;await o.determineQueryType(e,t)!==Ji.ExplainStatement&&(t="explain "+t);try{await i.execute('SET @old_optimizer_trace = @@optimizer_trace, @old_optimizer_trace_offset = @@optimizer_trace_offset, @@optimizer_trace = "enabled=on", @@optimizer_trace_offset = -2;'),await i.execute(t);const o=await i.execute("SELECT QUERY, TRACE->'$**.Rapid_Offload_Fails', TRACE->'$**.secondary_engine_not_used' FROM INFORMATION_SCHEMA.OPTIMIZER_TRACE;");if(await i.execute("SET @@optimizer_trace = @old_optimizer_trace, @@optimizer_trace_offset = @old_optimizer_trace_offset;",[],n),o){const t=o.rows;if(t&&t.length>0&&t[0].length>1){const n=t[0][1]??t[0][2],i=n.substring(2,n.length-2).split(":");if(i.length>1){const t=i[1].trim(),n={content:"Optimizer Trace: "+t.substring(1,t.length-1),type:zi.Warning,language:"ansi"};await e.addResultData({type:"text",text:[n]},{resultId:""})}}}}catch(s){const t={content:"Error while getting optimizer trace:\n"+String(s),type:zi.Error,language:"ansi"};await e.addResultData({type:"text",text:[t]},{resultId:""})}}convertResultSetToText(e,t,n,i){let o="";t.length>0&&void 0===t[0].width&&t.forEach((e=>{switch(e.title=e.title.replaceAll(/\r/g,"\\r").replaceAll(/\n/g,"\\n"),e.width=e.title.length,e.dataType.type){case Ui.TinyInt:case Ui.SmallInt:case Ui.MediumInt:case Ui.Int:case Ui.Bigint:case Ui.UInteger:case Ui.Float:case Ui.Real:case Ui.Double:case Ui.Decimal:e.rightAlign=!0}})),e.forEach((e=>{let n;t.forEach((t=>{switch(t.dataType.type){case Ui.TinyBlob:case Ui.Blob:case Ui.MediumBlob:case Ui.LongBlob:case Ui.Binary:case Ui.Varbinary:n=Ln(String(e[t.field]),64);break;default:n=String(e[t.field])}e[t.field]=n;let i=n.length;if(/\r|\n/.exec(n)){let e=0;const t=n.split(/\r|\n/);for(const n of t)n.length>e&&(e=n.length);i=e}i>(t.width??0)&&(t.width=i)}))}));const s=t.reduce(((e,t)=>e+"-".repeat(t.width+2)+"+"),"+");if(n){o+=s+"\n";const e=t.reduce(((e,n,i)=>e+" "+n.title.padEnd(t[i].width)+" |"),"|");o+=e+"\n"+s+"\n"}return e.forEach((e=>{const n=t.reduce(((n,i,o)=>{if(t[o].rightAlign)return n+" "+String(e[i.field]).padStart(t[o].width)+" |";if(/\r|\n/.exec(String(e[i.field]))){let s=n,r="| ",a=" ";t.forEach(((e,t)=>{t<o?r+=`${" ".repeat(e.width)} | `:t>o&&(a+=`${" ".repeat(e.width)} | `)})),r=r.slice(0,-1),a=a.slice(0,-1);const l=String(e[i.field]).split(/\r|\n/);return l.forEach(((e,n)=>{n>0&&(s+=r),s+=` ${e}${" ".repeat(t[o].width-e.length)} |`,n<l.length-1&&(s+=a+"\n")})),s}return n+" "+String(e[i.field]).padEnd(t[o].width)+" |"}),"|");o+=n+"\n"})),i&&(o+=s+"\n"),o}};ie=new WeakMap,pe(ir,"aboutMessage","Welcome to the MySQL Shell - DB Notebook.\n\nPress %modifier%+Enter to execute the code block.\n\nExecute \\sql to switch to SQL, \\js to JavaScript and \\ts to TypeScript mode.\nExecute \\help or \\? for help;");let or=ir;function sr(){return new Worker("/assets/console.worker-1c4f853c.js",{type:"module"})}const rr=class _ExecutionWorkerPool extends WorkerPool{createNewWorker(){const e=new sr;return e.id="ew"+String(_ExecutionWorkerPool.nextId++),e}};pe(rr,"nextId",0);let ar=rr;class DocumentDropdownItem extends DropdownItem{constructor(e){super(e),this.addHandledProperties("page")}}class AwaitableValueEditDialog extends ComponentBase{constructor(){super(...arguments),fe(this,oe,ke()),fe(this,se,void 0),pe(this,"validateInput",((e,t)=>({messages:{}}))),pe(this,"handleCloseDialog",((e,t)=>{var n;null==(n=ge(this,se))||n.notify({closure:e,values:t})}))}get id(){return""}render(){return Ie(ValueEditDialog,{ref:ge(this,oe),id:this.id,onClose:this.handleCloseDialog,onValidate:this.validateInput})}show(e){return Promise.resolve($i.Cancel)}async doShow(e,t){var n;be(this,se,new Semaphore),null==(n=ge(this,oe).current)||n.show(e(),t);const i=await ge(this,se).wait();return be(this,se,void 0),i}}oe=new WeakMap,se=new WeakMap;const lr="/assets/arrow-5c47ece5.svg",dr="/assets/unnest-5677d288.svg",cr="/assets/checkAll-20f08ac9.svg",ur="/assets/checkNone-0bbcaca9.svg";class ValueEditCustom extends ComponentBase{render(){return null}}var hr=(e=>(e.TypeScript="TypeScript",e))(hr||{});const pr=class _MrsObjectFieldEditor extends ValueEditCustom{constructor(e){super(e),pe(this,"tableRef",ke()),pe(this,"updateStateData",((e,t)=>{const{onDataChange:n}=this.props;null==n||n(e,t)})),pe(this,"toggleSqlPreview",(()=>{const{sqlPreview:e}=this.state;this.setState({sqlPreview:!e})})),pe(this,"copySqlToClipboard",(()=>{const{values:e,getCurrentDbObject:t}=this.props,n=e;_MrsObjectFieldEditor.updateMrsObjectFields(n),n.dbObject=t();const i=_MrsObjectFieldEditor.buildDualityViewSql(n)??"";nn.writeToClipboard(i)})),pe(this,"treeGridRowFormatter",(e=>{const t=e.getData();if(t.field.objectReference){if(e.getElement().classList.add("referenceRow"),t.field.objectReference){let n;switch(t.field.objectReference.referenceMapping.kind){case"1:1":n="fk11";break;case"n:1":n="fkN1";break;default:n="fk1N"}e.getElement().classList.add(n)}t.expanded?e.getElement().classList.add("expanded"):e.getElement().classList.remove("expanded")}else e.getElement().classList.remove("referenceRow");t.firstItem&&e.getElement().classList.add("firstItem"),t.lastItem&&e.getElement().classList.add("lastItem"),3===t.type&&e.getElement().classList.add("deleted")})),pe(this,"treeGridJsonColumnFormatter",(e=>{var t,n,i,o,s,r,a,l,d,c,u;const{values:h}=this.props,p=h,m=e.getData(),g=document.createElement("div");2===m.type||3===m.type?g.className=this.getEffectiveClassNames(["mrsObjectJsonFieldDiv",m.children?"withChildren":"withoutChildren"]):g.className="mrsObjectJsonFieldDiv";const f=this.findMrsObjectById(p.currentMrsObjectId);let b;if(1===m.type)b=e.getRow().getPrevRow()?Ie(Re,{children:[void 0!==p.showSdkOptions&&Ie(Label,{className:"datatype",caption:this.getJsonFieldDatatype(m)}),Ie(Label,{className:"bracket",caption:"{"})]}):Ie(Re,{children:[Ie(Container,{className:"fieldInfo",orientation:Di.LeftToRight,crossAlignment:ki.Center,children:[Ie(xi,{className:"tableIcon",src:"/assets/mrsDbObject-d3ed9705.svg",width:16,height:16}),Ie(Label,{className:void 0===p.showSdkOptions?"tableName":"datatype",caption:void 0===p.showSdkOptions?null==f?void 0:f.name:this.getMrsObjectName(m)}),Ie(Label,{className:"tableName",caption:"{"})]}),Ie(Container,{className:"fieldOptions",orientation:Di.LeftToRight,crossAlignment:ki.Center,children:[Ie(xi,{className:"action",src:cr,width:16,height:16,onClick:()=>{this.handleIconClick(e,7)}}),Ie(xi,{className:"action",src:ur,width:16,height:16,onClick:()=>{this.handleIconClick(e,8)}}),Ie(Label,{caption:"…"})]})]});else if(2===m.type||3===m.type||0===m.type){const h=(null==(t=m.field.objectReference)?void 0:t.unnest)??!1;b=Ie(Re,{children:[Ie(Container,{className:"fieldInfo",orientation:Di.LeftToRight,crossAlignment:ki.Center,children:[Ie(Checkbox,{id:m.field.id,className:m.children?"withChildren":"withoutChildren",checkState:h?Do.Indeterminate:m.field.enabled?Do.Checked:Do.Unchecked,onClick:t=>{this.treeGridToggleEnableState(t,e)},disabled:h}),Ie(Label,{className:h||!m.field.enabled?"jsonFieldDisabled":"jsonField",caption:m.field.name}),void 0!==m.unnested&&Ie(Container,{className:"unnestedDiv",orientation:Di.LeftToRight,crossAlignment:ki.Center,children:[Ie(Label,{className:"referenceFieldName",caption:"("}),Ie(xi,{className:"unnestedIcon",src:dr,width:16,height:16}),Ie(Label,{className:"referenceFieldName",caption:`${m.unnested.referenceFieldName})`})]}),void 0!==p.showSdkOptions&&Ie(Re,{children:[Ie(Label,{className:"dot",caption:":"}),Ie(Label,{className:"datatype",caption:this.getJsonFieldDatatype(m)})]})]}),Ie(Container,{className:"fieldOptions",orientation:Di.LeftToRight,crossAlignment:ki.Center,children:[void 0===m.field.objectReference&&!(("PROCEDURE"===p.dbObject.objectType||"FUNCTION"===p.dbObject.objectType)&&"RESULT"===(null==f?void 0:f.kind))&&Ie(Re,{children:[void 0===m.parent&&Ie(xi,{className:(null==(n=m.field.dbColumn)?void 0:n.name)===p.dbObject.rowUserOwnershipColumn&&p.dbObject.rowUserOwnershipEnforced?"selected":"notSelected",src:"/assets/rowOwnership-5c28d52e.svg",width:16,height:16,onClick:()=>{this.handleIconClick(e,2)},"data-tooltip":"Set as row ownership field"}),"PROCEDURE"!==p.dbObject.objectType&&"FUNCTION"!==p.dbObject.objectType&&Ie(Re,{children:[Ie(xi,{className:m.field.allowSorting?"selected":"notSelected",src:"/assets/allowSorting-35434fb9.svg",width:16,height:16,onClick:()=>{this.handleIconClick(e,4)},"data-tooltip":"Allow sorting operations using this field"}),Ie(xi,{className:m.field.allowFiltering?"notSelected":"selected",src:"/assets/noFilter-f79c9ab0.svg",width:16,height:16,onClick:()=>{this.handleIconClick(e,3)},"data-tooltip":"Prevent filtering operations on this field"}),Ie(xi,{className:m.field.noUpdate?"selected":"notSelected",src:"/assets/noUpdate-3e983e09.svg",width:16,height:16,onClick:()=>{this.handleIconClick(e,5)},"data-tooltip":"Prevent updates on this field"}),Ie(xi,{className:m.field.noCheck?"selected":"notSelected",src:"/assets/noCheck-5b5af59f.svg",width:16,height:16,onClick:()=>{this.handleIconClick(e,6)},"data-tooltip":"Exclude this field from ETAG calculations"})]}),"PARAMETERS"===(null==f?void 0:f.kind)&&"FUNCTION"!==p.dbObject.objectType&&Ie(xi,{className:"selected",src:(null==(i=m.field.dbColumn)?void 0:i.in)&&(null==(o=m.field.dbColumn)?void 0:o.out)?"/assets/inOut-7016fea1.svg":(null==(s=m.field.dbColumn)?void 0:s.out)?"/assets/out-68a75406.svg":"/assets/in-987bcbb4.svg",width:16,height:16,"data-tooltip":(null==(r=m.field.dbColumn)?void 0:r.in)&&(null==(a=m.field.dbColumn)?void 0:a.out)?"INOUT parameter":(null==(l=m.field.dbColumn)?void 0:l.out)?"OUT parameter":"IN parameter"})]}),m.field.objectReference&&Ie(Re,{children:[Ie(xi,{className:"action notSelected",src:cr,width:16,height:16,onClick:()=>{this.handleIconClick(e,7)},"data-tooltip":"Select all fields"}),Ie(xi,{className:"action notSelected",src:ur,width:16,height:16,onClick:()=>{this.handleIconClick(e,8)},"data-tooltip":"Deselect all fields"})]}),("PROCEDURE"===p.dbObject.objectType||"FUNCTION"===p.dbObject.objectType)&&"RESULT"===(null==f?void 0:f.kind)&&Ie(Re,{children:Ie(xi,{className:"action",src:wi,width:16,height:16,onClick:()=>{this.handleIconClick(e,9)},"data-tooltip":"Delete field"})}),(!(void 0===m.field.objectReference&&("PROCEDURE"!==p.dbObject.objectType&&"FUNCTION"!==p.dbObject.objectType||"RESULT"!==(null==f?void 0:f.kind))&&(null==(d=m.field.dbColumn)?void 0:d.name)===p.dbObject.rowUserOwnershipColumn&&p.dbObject.rowUserOwnershipEnforced)||!(void 0===m.field.objectReference&&"PROCEDURE"!==p.dbObject.objectType&&"FUNCTION"!==p.dbObject.objectType&&(null==(c=m.field.dbColumn)?void 0:c.name)===p.dbObject.rowUserOwnershipColumn&&p.dbObject.rowUserOwnershipEnforced&&!m.field.allowFiltering&&m.field.allowSorting&&m.field.noUpdate&&m.field.noCheck)||m.field.objectReference)&&Ie(Label,{caption:"…"})]}),m.field.objectReference&&("1:1"===m.field.objectReference.referenceMapping.kind||"n:1"===m.field.objectReference.referenceMapping.kind)&&void 0===m.field.objectReference.reduceToValueOfFieldId&&Ie(Container,{className:this.getEffectiveClassNames(["unnestDiv",(null==(u=m.field.objectReference)?void 0:u.unnest)?"unnested":"notUnnested"]),orientation:Di.LeftToRight,crossAlignment:ki.Center,onClick:()=>{this.handleIconClick(e,1)},onKeyPress:()=>{this.handleIconClick(e,1)},"data-tooltip":"Merge columns of the referenced table into this JSON object",children:[Ie(xi,{tabIndex:0,"data-tooltip":"inherit",width:16,height:16,src:dr},m.field.id+"CBtn"),Ie(Label,{"data-tooltip":"inherit",children:"Unnest"})]})]})}else 4===m.type&&(b=Ie(Re,{children:["PROCEDURE"===p.dbObject.objectType&&"RESULT"===(null==f?void 0:f.kind)&&Ie(xi,{className:"addField",width:"11px",height:"11px",src:us,onClick:()=>{this.addNewField(e.getRow())}}),Ie(Label,{className:"bracket",caption:"}"})]}));return Ue(b,g),g})),pe(this,"treeGridRelationalColumnFormatter",(e=>{var t,n,i,o,s,r,a,l,d,c,u;const h=e.getData(),{values:p}=this.props,m=p,g=document.createElement("div");let f;g.className=this.getEffectiveClassNames(["mrsObjectDbColumnFieldDiv"]);const b=e.getRow().getPrevRow()?(null==(t=h.field.objectReference)?void 0:t.crudOperations.split(","))??[]:m.crudOperations,v=Ie(Container,{className:"crudDiv",orientation:Di.LeftToRight,crossAlignment:ki.Center,children:["CREATE","READ","UPDATE","DELETE"].map((t=>{var n;return Ie(Container,{className:this.getEffectiveClassNames([b.includes(t)?"activated":"deactivated",void 0===(null==(n=h.field.objectReference)?void 0:n.reduceToValueOfFieldId)?"enabled":"disabled"]),orientation:Di.LeftToRight,crossAlignment:ki.Center,onClick:()=>{this.handleIconClick(e,0,t)},onKeyPress:()=>{this.handleIconClick(e,0,t)},"data-tooltip":`Allow ${t} operations on this object`,children:Ie(Label,{"data-tooltip":"inherit",children:t.slice(0,1)})},h.field.id+t)}))});if(1===h.type){let t,n;switch(e.getRow().getPrevRow()&&h.field.objectReference&&void 0!==m.showSdkOptions?t=h.field.objectReference.referenceMapping.referencedSchema+"."+h.field.objectReference.referenceMapping.referencedTable:e.getRow().getPrevRow()||(t=`${m.dbSchemaName}.${m.dbObject.name}`),m.dbObject.objectType){case"VIEW":n=Us;break;case"PROCEDURE":n=Gs;break;case"FUNCTION":n="/assets/schemaFunction-2ea0cdb2.svg";break;default:n=Os}f=Ie(Re,{children:[t&&Ie(Re,{children:[Ie(xi,{className:"tableIcon",src:n,width:16,height:16}),Ie(Label,{className:"tableName",caption:t,"data-tooltip":"Database schema table"})]}),!e.getRow().getPrevRow()&&"PROCEDURE"!==m.dbObject.objectType&&"FUNCTION"!==m.dbObject.objectType&&v]})}else if(2===h.type||3===h.type){let t=(null==(n=h.field.dbColumn)?void 0:n.isPrimary)?"/assets/schemaTableColumnPK-49abb204.svg":(null==(i=h.field.dbColumn)?void 0:i.notNull)?"/assets/schemaTableColumnNN-a113d12d.svg":_s,p=(null==(o=h.field.dbColumn)?void 0:o.isPrimary)?"Primary key column":(null==(s=h.field.dbColumn)?void 0:s.notNull)?"Table column that must not be NULL":"Table column";if(h.field.objectReference)switch(h.field.objectReference.referenceMapping.kind){case"1:1":t="/assets/schemaTableForeignKey11-b0e40eb1.svg",p="Table with a 1:1 relationship";break;case"n:1":t="/assets/schemaTableForeignKeyN1-ad0e2a7a.svg",p="Table with a n:1 relationship";break;default:t="/assets/schemaTableForeignKey-ee00398b.svg",p="Table with a 1:n relationship"}if(h.field.objectReference){const n=h.field.objectReference.referenceMapping.referencedSchema+"."+h.field.objectReference.referenceMapping.referencedTable;f=Ie(Re,{children:[Ie(xi,{src:lr,width:16,height:16}),Ie(xi,{src:t,width:16,height:16,"data-tooltip":p}),Ie(xi,{src:Os,width:16,height:16}),Ie(Label,{className:"tableName",caption:n}),h.field.enabled&&v,"1:n"===h.field.objectReference.referenceMapping.kind&&h.children&&h.children.length>0&&0!==h.children[0].type&&Ie(Dropdown,{className:"reduceToDropdown",placeholder:"Unnest field ...","data-tooltip":"Display selected field instead of the object. Updates will be disabled",id:h.field.id+"reduceToDropdown",multiSelect:!1,optional:!0,selection:null==(c=null==(d=h.children)?void 0:d.find((e=>{var t;return e.field.id===(null==(t=h.field.objectReference)?void 0:t.reduceToValueOfFieldId)})))?void 0:c.field.name,onSelect:(t,n)=>{var i,o,s;const r=this.findTreeItemById(h.field.id,m.currentTreeItems);if(r&&r.field.objectReference){const n=[...t];let a;n.length>0?(a=null==(o=null==(i=h.children)?void 0:i.find((e=>e.field.name===n[0]&&!e.firstItem)))?void 0:o.field.id,a&&(null==(s=h.children)||s.forEach((e=>{const t=this.findTreeItemById(e.field.id,m.currentTreeItems);t&&t.field.id!==a?t.field.enabled=!1:t&&t.field.id===a&&(t.field.enabled=!0)}))),r.expanded=!1):a=void 0,r.field.objectReference.reduceToValueOfFieldId=a,r.field.objectReference.crudOperations="READ",void 0===a&&!0===r.field.objectReference.unnest&&this.handleIconClick(e,1),void 0!==a&&(r.field.objectReference.unnest=!0,this.updateStateData(m))}},disabled:!1,autoFocus:!1,children:null==(u=h.children)?void 0:u.map(((e,t)=>{var n,i,o;return(null==(n=e.field.dbColumn)?void 0:n.name)?Ie(Dropdown.Item,{caption:null==(i=e.field.dbColumn)?void 0:i.name,id:null==(o=e.field.dbColumn)?void 0:o.name},t):void 0}))},h.field.id+"reduceToDropdown")]})}else{const e=void 0===h.unnested?null==(r=h.field.dbColumn)?void 0:r.name:`${h.unnested.schemaTable}.${String(null==(a=h.field.dbColumn)?void 0:a.name)}`;f=Ie(Re,{children:[Ie(xi,{src:lr,width:16,height:16}),Ie(xi,{src:t,width:16,height:16,"data-tooltip":p}),Ie(Label,{className:"columnName",caption:e}),void 0!==m.showSdkOptions&&Ie(Label,{className:"datatype",caption:null==(l=h.field.dbColumn)?void 0:l.datatype.toUpperCase()})]})}}return Ue(f,g),g})),pe(this,"getMrsObjectName",(e=>{var t,n;const{values:i}=this.props,o=i,s=this.findMrsObjectById(o.currentMrsObjectId),r=null==(n=null==(t=null==s?void 0:s.sdkOptions)?void 0:t.languageOptions)?void 0:n.find((e=>e.language===o.showSdkOptions));return void 0!==s&&1===e.type?o.showSdkOptions?(null==r?void 0:r.className)?"I"+(null==r?void 0:r.className):"I"+s.name:(null==r?void 0:r.className)??s.name:"Not defined"})),pe(this,"getJsonDatatype",(e=>e.startsWith("tinyint(1)")||e.startsWith("bit(1)")?"boolean":e.startsWith("tinyint")||e.startsWith("smallint")||e.startsWith("mediumint")||e.startsWith("int")||e.startsWith("bigint")||e.startsWith("decimal")||e.startsWith("numeric")||e.startsWith("float")||e.startsWith("double")?"number":e.startsWith("json")?"unknown":e.startsWith("geometry")?"object":"string")),pe(this,"getJsonFieldDatatype",(e=>{var t,n,i,o,s;const{values:r}=this.props,a=r,l=this.findMrsObjectById(a.currentMrsObjectId);if(void 0===l)return"mrsObject undefined";let d="";return d=(null==(t=e.field.sdkOptions)?void 0:t.datatypeName)?null==(n=e.field.sdkOptions)?void 0:n.datatypeName:(null==(i=e.field.objectReference)?void 0:i.referenceMapping)&&null!==(null==(o=e.field.objectReference)?void 0:o.referenceMapping)?`I${l.name}${Nn(e.field.name)}`:this.getJsonDatatype((null==(s=e.field.dbColumn)?void 0:s.datatype)??""),d})),pe(this,"addFieldsToMrsObjectTreeList",(async(e,t,n,i,o,s)=>{var r,a,l;const{values:d}=this.props,c=d,u=this.findMrsObjectById(c.currentMrsObjectId);if(void 0===u)return;const h=(null==i?void 0:i.children)??c.currentTreeItems;let p=[];p=(null==(r=u.storedFields)?void 0:r.filter((e=>void 0===i?1===e.lev:e.parentReferenceId===i.field.representsReferenceId)))??[];const m=[],g={id:ln(),objectId:u.id,representsReferenceId:void 0,parentReferenceId:void 0,name:Bn(t),position:0,dbColumn:void 0,enabled:!1,allowFiltering:!1,allowSorting:!1,noCheck:!1,noUpdate:!1,sdkOptions:void 0,comments:void 0,objectReference:null==i?void 0:i.field.objectReference};h.push({type:1,expanded:!1,expandedOnce:!1,field:g,parent:i});try{"PROCEDURE"===n||"FUNCTION"===n?"PARAMETERS"===u.kind?await this.addParametersAsFields(t,e,n,p,u,h,m,i):this.addFields(u,h,m,i):await this.addColumnsAsFields(t,e,n,p,u,h,m,i,o,s)}catch(f){console.log(`Backend Error: ${String(f)}`)}h.push({type:4,expanded:!1,expandedOnce:!1,field:g,lastItem:!0,parent:i}),i&&i.children&&0===(null==(a=i.children[0])?void 0:a.type)&&i.children.splice(0,1),h.length>0&&(h[0].firstItem=!0);for(const b of m){const e=null==(l=b.field.objectReference)?void 0:l.referenceMapping;e&&await this.addFieldsToMrsObjectTreeList(e.referencedSchema,e.referencedTable,n,b,o,s)}})),pe(this,"addColumnsAsFields",(async(e,t,n,i,o,s,r,a,l,d)=>{const{values:c,backend:u}=this.props,h=c,p=await u.mrs.getTableColumnsWithReferences(void 0,e,void 0,void 0,t,n),m=[],g=[];p.forEach((e=>{var t,n,c,u,p,f,b,v,S,C,w,y,k,I,D,T,R,x,E,M,P,L;let F;const A=null==i?void 0:i.find((t=>{var n;return(null==(n=t.dbColumn)?void 0:n.name)===e.name}));let B=(null==A?void 0:A.name)??Bn(e.name);if(m.includes(B)){B+=On(e.refColumnNames??"");let t=1;for(;m.includes(B);)B=B.slice(0,-1*String(t).length)+String(t++)}if(m.push(B),e.referenceMapping&&null!==e.referenceMapping){let t=!0;if(h.dbSchemaName===(null==(u=e.referenceMapping)?void 0:u.referencedSchema)&&h.dbObject.name===(null==(p=e.referenceMapping)?void 0:p.referencedTable)&&(t=!1),(null==(b=null==(f=null==a?void 0:a.parent)?void 0:f.field.objectReference)?void 0:b.referenceMapping.referencedSchema)===(null==(v=e.referenceMapping)?void 0:v.referencedSchema)&&(null==(C=null==(S=null==a?void 0:a.parent)?void 0:S.field.objectReference)?void 0:C.referenceMapping.referencedTable)===(null==(w=e.referenceMapping)?void 0:w.referencedTable)&&(t=!1),t){const t=null==i?void 0:i.find((t=>{var n;return JSON.stringify(null==(n=t.objectReference)?void 0:n.referenceMapping)===JSON.stringify(e.referenceMapping)})),n={id:(null==t?void 0:t.representsReferenceId)??ln(),reduceToValueOfFieldId:(null==(y=null==t?void 0:t.objectReference)?void 0:y.reduceToValueOfFieldId)??void 0,referenceMapping:(null==(k=null==t?void 0:t.objectReference)?void 0:k.referenceMapping)?{...null==(I=null==t?void 0:t.objectReference)?void 0:I.referenceMapping}:e.referenceMapping,unnest:(null==(D=null==t?void 0:t.objectReference)?void 0:D.unnest)??!1,crudOperations:(null==(T=null==t?void 0:t.objectReference)?void 0:T.crudOperations)??"READ",sdkOptions:null==(R=null==t?void 0:t.objectReference)?void 0:R.sdkOptions,comments:null==(x=null==t?void 0:t.objectReference)?void 0:x.comments};F={id:(null==t?void 0:t.id)??ln(),objectId:o.id,representsReferenceId:n.id,parentReferenceId:null==a?void 0:a.field.representsReferenceId,name:B,position:(null==t?void 0:t.position)??e.position,dbColumn:e.dbColumn,enabled:(null==t?void 0:t.enabled)??!1,allowFiltering:(null==t?void 0:t.allowFiltering)??!0,allowSorting:(null==A?void 0:A.allowSorting)??!1,noCheck:(null==t?void 0:t.noCheck)??!1,noUpdate:(null==t?void 0:t.noUpdate)??!1,sdkOptions:null==t?void 0:t.sdkOptions,comments:null==t?void 0:t.comments,objectReference:n};const c={type:2,expanded:F.enabled,expandedOnce:F.enabled,field:F,children:e.referenceMapping&&null!==e.referenceMapping?[this.newLoadingPlaceholderNode(F)]:void 0,parent:a};s.push(c),(F.enabled||!0===(null==(E=F.objectReference)?void 0:E.unnest))&&r.push(c),!0!==(null==(M=F.objectReference)?void 0:M.unnest)||(null==(P=F.objectReference)?void 0:P.reduceToValueOfFieldId)||null==l||l.push(c),(null==(L=F.objectReference)?void 0:L.reduceToValueOfFieldId)&&(null==d||d.push(c))}}else F={id:(null==A?void 0:A.id)??ln(),objectId:o.id,representsReferenceId:void 0,parentReferenceId:(null==A?void 0:A.representsReferenceId)??(null==a?void 0:a.field.representsReferenceId),name:B,position:(null==A?void 0:A.position)??e.position,dbColumn:e.dbColumn,storedDbColumn:null==A?void 0:A.dbColumn,enabled:(null==A?void 0:A.enabled)??!0,allowFiltering:(null==A?void 0:A.allowFiltering)??!0,allowSorting:(null==A?void 0:A.allowSorting)??((null==(t=e.dbColumn)?void 0:t.isPrimary)||(null==(n=e.dbColumn)?void 0:n.isUnique)||!1),noCheck:(null==A?void 0:A.noCheck)??!1,noUpdate:(null==A?void 0:A.noUpdate)??!1,sdkOptions:null==A?void 0:A.sdkOptions,comments:null==A?void 0:A.comments,objectReference:void 0},(null==(c=F.dbColumn)?void 0:c.isPrimary)&&g.push(F.dbColumn.name),s.push({type:2,expanded:!1,expandedOnce:!1,field:F,parent:a})}))})),pe(this,"addParametersAsFields",(async(e,t,n,i,o,s,r,a)=>{const{backend:l}=this.props;(await l.mrs.getDbObjectParameters(e,t,void 0,n)).forEach((e=>{const t=null==i?void 0:i.find((t=>{var n;return(null==(n=t.dbColumn)?void 0:n.name)===e.name})),n=(null==t?void 0:t.name)??Bn(e.name),r={id:(null==t?void 0:t.id)??ln(),objectId:o.id,representsReferenceId:void 0,parentReferenceId:(null==t?void 0:t.representsReferenceId)??(null==a?void 0:a.field.representsReferenceId),name:n,position:(null==t?void 0:t.position)??e.position,dbColumn:{name:e.name,in:e.mode.includes("IN"),out:e.mode.includes("OUT"),datatype:e.datatype,notNull:!0,isGenerated:!1,isPrimary:!1,isUnique:!1},storedDbColumn:null==t?void 0:t.dbColumn,enabled:(null==t?void 0:t.enabled)??!0,allowFiltering:(null==t?void 0:t.allowFiltering)??!0,allowSorting:(null==t?void 0:t.allowSorting)??!1,noCheck:(null==t?void 0:t.noCheck)??!1,noUpdate:(null==t?void 0:t.noUpdate)??!1,sdkOptions:null==t?void 0:t.sdkOptions,comments:null==t?void 0:t.comments,objectReference:void 0};s.push({type:2,expanded:!1,expandedOnce:!1,field:r,parent:a})}))})),pe(this,"addFields",((e,t,n,i)=>{var o,s;null==(o=e.fields)||o.forEach((e=>{t.push({type:2,expanded:!1,expandedOnce:!1,field:e,parent:i})})),null==(s=e.storedFields)||s.forEach((n=>{var o;void 0===(null==(o=e.fields)?void 0:o.find((e=>e.id===n.id)))&&t.push({type:3,expanded:!1,expandedOnce:!1,field:n,parent:i})}))})),pe(this,"newLoadingPlaceholderNode",(e=>({type:0,expanded:!1,expandedOnce:!1,field:{id:e.id+"Loading",objectId:"",name:"Loading...",position:1,enabled:!1,allowFiltering:!0,allowSorting:!1,noCheck:!1,noUpdate:!1}}))),pe(this,"initMrsObjects",(async()=>{const{values:e,backend:t}=this.props,n=e;if(0===n.mrsObjects.length){try{if(""!==n.dbObject.id){const e=await t.mrs.getObjects(n.dbObject.id);if(e.length>0){n.mrsObjects=e,n.currentMrsObjectId=e[0].id;for(const e of n.mrsObjects)e.storedFields=await t.mrs.getObjectFieldsWithReferences(e.id),("PROCEDURE"===n.dbObject.objectType||"FUNCTION"===n.dbObject.objectType)&&"RESULT"===e.kind&&e.storedFields.length>0&&(e.fields=structuredClone(e.storedFields))}}if(""===n.dbObject.id||0===n.mrsObjects.length){const e=ln();if(n.mrsObjects=[{id:e,dbObjectId:n.dbObject.id,name:n.defaultMrsObjectName+("PROCEDURE"===n.dbObject.objectType||"FUNCTION"===n.dbObject.objectType?"Params":""),position:0,kind:"PROCEDURE"===n.dbObject.objectType||"FUNCTION"===n.dbObject.objectType?"PARAMETERS":"RESULT",sdkOptions:void 0,comments:void 0}],n.currentMrsObjectId=e,"FUNCTION"===n.dbObject.objectType){const e=await t.mrs.getDbFunctionReturnType(n.dbObject.name,n.dbSchemaName),i=ln();n.mrsObjects.push({id:i,dbObjectId:n.dbObject.id,name:n.defaultMrsObjectName+"Result",position:1,kind:"RESULT",sdkOptions:void 0,comments:void 0,fields:[{id:ln(),objectId:i,name:"result",position:0,enabled:!0,allowFiltering:!0,allowSorting:!1,noCheck:!1,noUpdate:!1,dbColumn:{name:"result",datatype:e,notNull:!1,isGenerated:!1,isPrimary:!1,isUnique:!1}}]})}}}catch(i){console.log(`Backend Error: ${String(i)}`)}await this.fillTreeBasedOnMrsObjectFields()}this.updateStateData(n)})),pe(this,"fillTreeBasedOnMrsObjectFields",(async()=>{const{values:e}=this.props,t=e,n=[],i=[];await this.addFieldsToMrsObjectTreeList(t.dbSchemaName,t.dbObject.name,t.dbObject.objectType,void 0,n,i);for(let o=n.length-1;o>=0;o--){const e=n[o];await this.performTreeItemUnnestChange(e,!0)}for(let o=i.length-1;o>=0;o--){i[o].expanded=!1}})),pe(this,"findMrsObjectById",(e=>{const{values:t}=this.props;if(void 0!==e)return t.mrsObjects.find((t=>t.id===e))})),pe(this,"findTreeItemById",((e,t)=>{if(!e||!t)return;const n=t.find((t=>t.field.id===e));if(n)return n;let i;return t.forEach((t=>{if(t.children&&void 0===i){const n=this.findTreeItemById(e,t.children);n&&(i=n)}})),i})),pe(this,"handleCellDblClick",((e,t)=>{t.edit(!0)})),pe(this,"editorHost",((e,t,n,i)=>{var o;const{values:s}=this.props,r=s,a=document.createElement("div"),l=e.getData(),{title:d,field:c}=e.getColumn().getDefinition();let u="";return a.classList.add("cellEditorHost"+d),"json"===c?(1!==l.type||e.getRow().getPrevRow()?void 0===r.showSdkOptions?u=l.field.name:(u=l.field.name,l.field.sdkOptions&&(null==(o=l.field.sdkOptions)?void 0:o.datatypeName)?u+=`: ${l.field.sdkOptions.datatypeName}`:u+=`: ${this.getJsonFieldDatatype(l)}`):u=this.getMrsObjectName(l),this.renderCustomEditor(e,t,a,u,n,i),a):!("relational"!==c||!l.field.dbColumn)&&(u=`${l.field.dbColumn.name}: ${l.field.dbColumn.datatype}`,this.renderCustomEditor(e,t,a,u,n,i),a)})),pe(this,"renderCustomEditor",((e,t,n,i,o,s)=>{const r=ke(),a=Ie(Input,{innerRef:r,className:"fieldEditor",value:i??"",onConfirm:(t,n)=>{e.setValue(n.value),o(n.value)},onCancel:e=>{e.stopPropagation(),s(void 0)}});a&&Ue(a,n),t((()=>{var e;if(null==(e=r.current)||e.focus(),r.current&&"string"==typeof i){if(i.startsWith("newField")||i.startsWith("new_field"))return r.current.select();const e=i.indexOf(":");e>=0&&(r.current.selectionStart=e,r.current.selectionEnd=e)}}))})),pe(this,"handleCellEdited",(e=>{var t,n,i,o;const{values:s}=this.props,r=s,a=e.getData(),l=this.findTreeItemById(a.field.id,r.currentTreeItems),d=e.getColumn().getDefinition();if("json"===d.field){if(1!==a.type||e.getRow().getPrevRow()){if(null==l?void 0:l.field){const t=String(e.getValue()),n=t.indexOf(":");let s="";if(n>=0?(l.field.name=t.slice(0,n).trim(),s=t.slice(n+1).trim().toLowerCase(),s.toLowerCase()!==this.getJsonDatatype((null==(i=l.field.dbColumn)?void 0:i.datatype)??"")&&(l.field.sdkOptions?l.field.sdkOptions.datatypeName=s:l.field.sdkOptions={datatypeName:s})):l.field.name=t,"new_field"===(null==(o=l.field.dbColumn)?void 0:o.name))switch(l.field.dbColumn.name=l.field.name.replace(/([a-z])([A-Z])/g,((e,t,n)=>`${t}_${n.toLowerCase()}`)),s){case"number":l.field.dbColumn.datatype="integer";break;case"boolean":l.field.dbColumn.datatype="tinyint(1)";break;case"object":case"unknown":l.field.dbColumn.datatype="json";break;default:l.field.dbColumn.datatype="varchar(255)"}}}else{if(this.getMrsObjectName(a)!==e.getValue()){const i=this.findMrsObjectById(r.currentMrsObjectId);if(void 0===i)return;if(r.showSdkOptions){let o=null==(n=null==(t=null==i?void 0:i.sdkOptions)?void 0:t.languageOptions)?void 0:n.find((e=>e.language===r.showSdkOptions));void 0===o?(void 0===i.sdkOptions&&(i.sdkOptions={languageOptions:[]}),void 0===i.sdkOptions.languageOptions&&(i.sdkOptions.languageOptions=[]),o={language:r.showSdkOptions,className:e.getValue()},i.sdkOptions.languageOptions.push(o)):o.className=e.getValue()}else i.name=e.getValue()}}this.updateStateData(r)}else if("relational"===d.field){if(null==l?void 0:l.field.dbColumn){const t=String(e.getValue()),n=t.indexOf(":");n>=0?(l.field.dbColumn.name=t.slice(0,n).trim(),l.field.dbColumn.datatype=t.slice(n+1).trim().toLowerCase()):l.field.dbColumn.name=t,"newField"===l.field.name&&(l.field.name=Bn(l.field.dbColumn.name))}this.updateStateData(r)}})),pe(this,"performTreeItemUnnestChange",(async(e,t)=>{var n;const{values:i}=this.props,o=i;if(e.field.objectReference){const i=void 0!==e.parent?e.parent.children:o.currentTreeItems;if(i)if(t){e.children&&e.children.length>0&&0===e.children[0].type&&await this.addFieldsToMrsObjectTreeList(e.field.objectReference.referenceMapping.referencedSchema,e.field.objectReference.referenceMapping.referencedTable,o.dbObject.objectType,e);const t=null==i?void 0:i.indexOf(e);if(t){let o=1;const s=[];i.forEach((t=>{t.field!==e.field&&s.push(t.field.name)})),null==(n=e.children)||n.forEach((n=>{var r;if(2===n.type){const a=null==(r=e.field.objectReference)?void 0:r.referenceMapping;if(a){if(n.unnested={schemaTable:`${a.referencedSchema}.${a.referencedTable}`,referenceFieldName:e.field.name,originalFieldName:(" "+n.field.name).slice(1)},s.includes(n.field.name)){n.field.name+="2";let e=3;for(;s.includes(n.field.name);)n.field.name=n.field.name.slice(0,-1*String(e).length)+String(e++)}s.push(n.field.name)}null==i||i.splice(t+o,0,n),o++}}))}e.expanded=!1}else{for(let e=i.length-1;e>=0;e--){const t=i[e];void 0!==t.unnested&&(t.field.name=t.unnested.originalFieldName,t.field.enabled=!0,t.unnested=void 0,i.splice(e,1))}e.expanded=!0,e.field.enabled=!0}e.field.objectReference.unnest=t}})),pe(this,"performIconClick",(async(e,t,n)=>{var i,o,s,r,a;const{values:l,dbObjectChange:d}=this.props,c=l;if(e&&e.field)switch(t){case 0:if(n&&void 0===(null==(i=e.field.objectReference)?void 0:i.reduceToValueOfFieldId)){let t;t=void 0===e.field.representsReferenceId?c.crudOperations:(null==(o=e.field.objectReference)?void 0:o.crudOperations.split(","))??[],t.includes(n)?t.splice(t.indexOf(n),1):t.push(n),void 0===e.field.representsReferenceId?c.crudOperations=t:e.field.objectReference&&(e.field.objectReference.crudOperations=t.join(","))}break;case 1:e.field.objectReference&&await this.performTreeItemUnnestChange(e,!e.field.objectReference.unnest);break;case 3:e.field.allowFiltering=!e.field.allowFiltering;break;case 4:e.field.allowSorting=!e.field.allowSorting;break;case 5:e.field.noUpdate=!e.field.noUpdate;break;case 6:e.field.noCheck=!e.field.noCheck;break;case 2:c.dbObject.rowUserOwnershipColumn!==(null==(s=e.field.dbColumn)?void 0:s.name)?(c.dbObject.rowUserOwnershipEnforced=1,c.dbObject.rowUserOwnershipColumn=null==(r=e.field.dbColumn)?void 0:r.name):(c.dbObject.rowUserOwnershipEnforced=0,c.dbObject.rowUserOwnershipColumn=void 0),d&&d();break;case 7:case 8:{let n;if(e.children&&e.expanded?n=e.children:void 0===e.parent&&void 0===e.field.objectReference&&(n=c.currentTreeItems),n)for(const e of n)void 0===e.field.objectReference&&(e.field.enabled=7===t);break}case 9:{const t=this.findMrsObjectById(c.currentMrsObjectId);t&&(t.fields=null==(a=t.fields)?void 0:a.filter((t=>t.id!==e.field.id)),c.currentTreeItems=c.currentTreeItems.filter((t=>t.field.id!==e.field.id)));break}}})),pe(this,"handleIconClick",((e,t,n)=>{const{values:i}=this.props,o=i,s=e.getData(),r=this.findTreeItemById(s.field.id,o.currentTreeItems);r&&this.performIconClick(r,t,n).then((()=>{this.updateStateData(o)})).catch((e=>{console.log(`An error occurred during execution: ${String(e)}`)}))})),pe(this,"treeGridToggleEnableState",((e,t)=>{var n,i,o;const{values:s}=this.props,r=s,a=t.getData(),l=this.findTreeItemById(a.field.id,r.currentTreeItems);if(!(null==(n=null==l?void 0:l.field)?void 0:n.enabled)){let e=t.getRow().getTreeParent();for(;e;){const t=e.getData(),n=this.findTreeItemById(t.field.id,r.currentTreeItems);void 0!==(null==(i=null==n?void 0:n.field.objectReference)?void 0:i.reduceToValueOfFieldId)&&(n.field.objectReference.reduceToValueOfFieldId=void 0),e=e.getTreeParent()}}(null==(o=null==l?void 0:l.field)?void 0:o.objectReference)&&void 0===l.field.objectReference.reduceToValueOfFieldId&&!l.expanded?t.getRow().treeExpand():(null==l?void 0:l.field)&&(l.field.enabled=!l.field.enabled,!l.field.enabled&&l.field.objectReference&&(l.expanded=!1,l.expandedOnce=!1,l.children=[this.newLoadingPlaceholderNode(l.field)]),this.updateStateData(r))})),pe(this,"handleRowExpanded",(e=>{var t;const{values:n}=this.props,i=n,o=e.getData();!0!==(null==(t=o.field.objectReference)?void 0:t.unnest)?(o.expanded=!0,!o.expandedOnce&&o.field.objectReference&&(o.field.enabled=!0,this.addFieldsToMrsObjectTreeList(o.field.objectReference.referenceMapping.referencedSchema,o.field.objectReference.referenceMapping.referencedTable,i.dbObject.objectType,o).then((()=>{o.expandedOnce=!0,this.updateStateData(i)})).catch())):e.treeCollapse()})),pe(this,"handleRowCollapsed",(e=>{e.getData().expanded=!1})),pe(this,"isRowExpanded",(e=>{const t=e.getData().expanded;return t&&this.handleRowExpanded(e),t})),pe(this,"setCurrentMrsObject",(async e=>{const{values:t}=this.props,n=t;_MrsObjectFieldEditor.updateMrsObjectFields(n),n.currentTreeItems=[],n.currentlyListedTables=[],e?(n.currentMrsObjectId=e.id,await this.fillTreeBasedOnMrsObjectFields()):n.currentMrsObjectId=void 0,this.updateStateData(n)})),pe(this,"addMrsObject",((e,t)=>{const{values:n}=this.props,i=n,o=ln();let s=i.defaultMrsObjectName;i.mrsObjects.length>1&&(s+=String(i.mrsObjects.length));const r={id:o,dbObjectId:i.dbObject.id,name:s,position:i.mrsObjects.length,kind:"RESULT",sdkOptions:void 0,comments:void 0};i.mrsObjects.push(r),this.setCurrentMrsObject(r)})),pe(this,"removeCurrentMrsObject",((e,t)=>{const{values:n}=this.props,i=n,o=this.findMrsObjectById(i.currentMrsObjectId);if(void 0!==o){const e=i.mrsObjects.indexOf(o);i.mrsObjects.splice(e,1);for(let t=e;t<i.mrsObjects.length;t++)i.mrsObjects[t].position--}const s=i.mrsObjects.find((e=>"PARAMETERS"===e.kind));this.setCurrentMrsObject(s)})),pe(this,"addNewField",(e=>{var t;if("boolean"==typeof e)return;const{values:n}=this.props,i=n,o=(null==(t=e.getData().parent)?void 0:t.children)??i.currentTreeItems,s=ln();null==o||o.splice(-1,0,{type:2,expanded:!1,expandedOnce:!1,field:{id:s,objectId:i.currentMrsObjectId??"",name:"newField",position:o.length,enabled:!0,allowFiltering:!0,allowSorting:!1,noCheck:!1,noUpdate:!1,dbColumn:{name:"new_field",datatype:"VARCHAR(255)",notNull:!1,isPrimary:!1,isUnique:!1,isGenerated:!1}}}),this.updateStateData(i,(()=>{var e;const t=(null==(e=this.tableRef.current)?void 0:e.getRows())??[];for(const n of t){if(n.getData().field.id===s){const e=n.getCells();e.length>0&&e[1].edit(!0);break}}}))})),pe(this,"dbObjectNameChanged",((e,t)=>{const{values:n}=this.props;n.dbObject.name=t.value,this.forceUpdate()}));if(!e.values)throw new Error("The value of the MrsRestObjectFieldEditor custom control needs to be initialized.");this.state={sqlPreview:!1},this.initMrsObjects()}render(){const{values:e,getCurrentDbObject:t}=this.props,{sqlPreview:n}=this.state,i=e,o={treeColumn:"json",treeChildIndent:-6,selectionType:ii.None,showHeader:!1,layout:"fitColumns",verticalGridLines:!1,horizontalGridLines:!1},s=[{title:"Json",field:"json",resizable:!0,hozAlign:"left",editable:!1,editor:this.editorHost,formatter:this.treeGridJsonColumnFormatter,cellEdited:this.handleCellEdited,cellDblClick:this.handleCellDblClick},{title:"Relational",field:"relational",resizable:!1,hozAlign:"left",editable:!1,editor:this.editorHost,formatter:this.treeGridRelationalColumnFormatter,cellEdited:this.handleCellEdited,cellDblClick:this.handleCellDblClick}],r=void 0!==i.showSdkOptions?String(hr[i.showSdkOptions]):"";let a="";!0===n&&(_MrsObjectFieldEditor.updateMrsObjectFields(i),i.dbObject=t(),a=_MrsObjectFieldEditor.buildDualityViewSql(i)??"");const l=this.findMrsObjectById(i.currentMrsObjectId);let d;return d=void 0===i.showSdkOptions?"PARAMETERS"===(null==l?void 0:l.kind)?"Parameters":`Result ${String(null==l?void 0:l.position)}`:null==l?void 0:l.name,Ie(Container,{className:this.getEffectiveClassNames(["mrsObjectFieldEditor",void 0!==i.showSdkOptions?"showSdkOptions":void 0]),orientation:Di.TopDown,children:[Ie(Container,{className:"settings",orientation:Di.LeftToRight,crossAlignment:ki.Start,children:[Ie(Container,{className:"settingsMain",orientation:Di.LeftToRight,crossAlignment:ki.Center,children:[Ie(Container,{className:"labelWithInput",orientation:Di.LeftToRight,crossAlignment:ki.Center,children:[Ie(Label,{children:"DB Object:"}),Ie(Input,{id:"dbObject",value:i.dbObject.name,onChange:this.dbObjectNameChanged})]}),("PROCEDURE"===i.dbObject.objectType||"FUNCTION"===i.dbObject.objectType)&&Ie(Container,{className:"mrsObject",orientation:Di.LeftToRight,crossAlignment:ki.Center,children:[Ie(Dropdown,{id:"mrsObjectName",selection:d,onSelect:(e,t)=>{const n=[...e];if(n.length>0&&""!==n[0]){let e;e=void 0===i.showSdkOptions?"Parameters"===n[0]?i.mrsObjects.find((e=>e.kind="PARAMETERS")):i.mrsObjects.find((e=>n[0]===`Result ${String(null==e?void 0:e.position)}`)):i.mrsObjects.find((e=>n[0]===e.name)),this.setCurrentMrsObject(e)}},children:i.mrsObjects.map((e=>{let t;return t=void 0===i.showSdkOptions?"PARAMETERS"===e.kind?"Parameters":`Result ${String(null==e?void 0:e.position)}`:e.name,Ie(Dropdown.Item,{caption:t,id:t},t)}))}),"PROCEDURE"===i.dbObject.objectType&&"PARAMETERS"!==(null==l?void 0:l.kind)&&Ie(Button,{onClick:this.removeCurrentMrsObject,imageOnly:!0,"data-tooltip":"Remove the current result set definition",children:Ie(xi,{src:Ti.Remove,width:11,height:11})}),"PROCEDURE"===i.dbObject.objectType&&Ie(Button,{className:"addMrsObjectBtn",onClick:this.addMrsObject,"data-tooltip":"Add a result set definition returned by this stored procedure",children:[Ie(xi,{src:Ti.Add,width:11,height:11}),Ie(Label,{caption:"Add Result"})]})]})]}),Ie(Container,{className:"settingsRight",orientation:Di.RightToLeft,crossAlignment:ki.Center,children:[Ie(Re,{children:[Ie(Button,{className:"sqlCopyBtn","data-tooltip":"Copy SQL to Clipboard",onClick:this.copySqlToClipboard,imageOnly:!0,children:Ie(xi,{src:Ti.Copy,width:11,height:11,"data-tooltip":"inherit"})},"sqlCopyBtn"),Ie(Button,{className:this.getEffectiveClassNames(["sqlPreviewBtn",n?"buttonActivated":void 0]),"data-tooltip":"Toggle MRS SQL Preview",onClick:this.toggleSqlPreview,imageOnly:!0,children:[Ie(xi,{src:Ti.Search,width:11,height:11,"data-tooltip":"inherit"}),Ie(Label,{caption:"SQL Preview","data-tooltip":"inherit"})]},"sqlPreviewBtn")]}),Ie("div",{className:"divider"}),!n&&Ie(Re,{children:[Ie(Container,{className:"labelWithInput",orientation:Di.LeftToRight,crossAlignment:ki.Center,children:Ie(Dropdown,{id:"sdkLanguage",placeholder:"SDK Language","data-tooltip":"Select a SDK language to display the specific interface names and datatypes",selection:r,optional:!0,onSelect:(e,t)=>{const n=[...e];if(n.length>0&&""!==n[0]){const e=hr[n[0]];i.showSdkOptions=e}else i.showSdkOptions=void 0;this.updateStateData(i)},children:Object.values(hr).map((e=>Number(e)>=0?void 0:Ie(Dropdown.Item,{caption:String(e),id:String(e)},String(e))))})}),Ie("div",{className:"divider"})]})]})]}),!1===n&&Ie(TreeGrid,{className:this.getEffectiveClassNames(["mrsObjectTreeGrid"]),ref:this.tableRef,options:o,columns:s,tableData:i.currentTreeItems,onRowExpanded:this.handleRowExpanded,onRowCollapsed:this.handleRowCollapsed,isRowExpanded:this.isRowExpanded,onFormatRow:this.treeGridRowFormatter}),!0===n&&Ie(Container,{className:"sqlPreview",orientation:Di.LeftToRight,crossAlignment:ki.Start,children:Ie(Go,{initialContent:a,language:"mysql",readonly:!0,lineNumbers:"off",font:{fontFamily:"SourceCodePro+Powerline+Awesome+MySQL",fontSize:12,lineHeight:18},minimap:{enabled:!1},scrollbar:{useShadows:!0,verticalHasArrows:!1,horizontalHasArrows:!1,vertical:"auto",horizontal:"auto",verticalScrollbarSize:8,horizontalScrollbarSize:8}})})]})}};pe(pr,"updateMrsObjectFields",(e=>{const t=[],n=e=>{if(void 0!==e.children)for(const t of e.children)n(t);2===e.type&&(t.includes(e.field)||t.push(e.field))};for(const o of e.currentTreeItems)n(o);const i=e.mrsObjects.find((t=>t.id===e.currentMrsObjectId));i&&(i.fields=t)})),pe(pr,"buildDualityViewSql",(e=>{const t=e=>e.endsWith(",\n")?e.slice(0,-2):e.slice(0,-1),n=(i,o,s,r)=>{var a,l,d,c,u,h,p,m;let g="";const f=i.filter((e=>{var t;return void 0!==(null==(t=e.objectReference)?void 0:t.reduceToValueOfFieldId)})).map((e=>{var t;return(null==(t=e.objectReference)?void 0:t.reduceToValueOfFieldId)??""}));for(const b of i)if(b.parentReferenceId===o||null===b.parentReferenceId&&void 0===o){const o=" ".repeat(4*(s??1));if(b.objectReference||!b.enabled&&!f.includes(b.id)){if(void 0!==b.objectReference&&(b.enabled||b.objectReference.unnest)){const e=t(n(i,b.representsReferenceId,(s??1)+1,r)),a=b.objectReference.referenceMapping.referencedSchema+"."+b.objectReference.referenceMapping.referencedTable;g+=`${o}${b.name}: ${a}`,b.objectReference.crudOperations.includes("CREATE")&&(g+=" @INSERT"),b.objectReference.crudOperations.includes("UPDATE")&&(g+=" @UPDATE"),b.objectReference.crudOperations.includes("DELETE")&&(g+=" @DELETE"),(b.objectReference.unnest||void 0!==b.objectReference.reduceToValueOfFieldId)&&(g+=" @UNNEST"),g+=` {\n${e}\n${o}},\n`}}else g+=`${o}${b.name}: ${String(null==(a=b.dbColumn)?void 0:a.name)}`,(null==(l=b.dbColumn)?void 0:l.in)&&!(null==(d=b.dbColumn)?void 0:d.out)&&(g+=" @IN"),!(null==(c=b.dbColumn)?void 0:c.in)&&(null==(u=b.dbColumn)?void 0:u.out)&&(g+=" @OUT"),(null==(h=b.dbColumn)?void 0:h.in)&&(null==(p=b.dbColumn)?void 0:p.out)&&(g+=" @INOUT"),b.noCheck&&(g+=" @NOCHECK"),b.noUpdate&&(g+=" @NOUPDATE"),b.allowSorting&&(g+=" @SORTABLE"),b.allowFiltering||(g+=" @NOFILTERING"),(null==(m=b.dbColumn)?void 0:m.name)===e.dbObject.rowUserOwnershipColumn&&e.dbObject.rowUserOwnershipEnforced&&(g+=" @ROWOWNERSHIP"),r&&b.dbColumn&&b.dbColumn.datatype&&(g+=` @DATATYPE("${b.dbColumn.datatype}")`),g+=",\n"}return g},i=e=>{let t="";return e.enabled||(t+="\n    DISABLED"),e.requiresAuth&&(t+="\n    AUTHENTICATION REQUIRED"),e.itemsPerPage&&25!==e.itemsPerPage&&(t+=`\n    ITEMS PER PAGE ${e.itemsPerPage}`),e.comments&&(t+=`\n    COMMENTS "${e.comments}"`),e.mediaType&&(t+=`\n    MEDIA TYPE ${e.mediaType}`),"FEED"!==e.crudOperationFormat&&(t+=`\n    FORMAT ${e.crudOperationFormat}`),e.authStoredProcedure&&(t+=`\n    AUTHENTICATION PROCEDURE ${e.authStoredProcedure}`),t};let o;if("PROCEDURE"!==e.dbObject.objectType&&"FUNCTION"!==e.dbObject.objectType){const s=e.mrsObjects.find((t=>t.id===e.currentMrsObjectId));if(s){o=`CREATE OR REPLACE REST DUALITY VIEW ${e.dbObject.requestPath}\n    ON SERVICE ${e.servicePath} SCHEMA ${e.dbSchemaPath}\n    AS ${e.dbSchemaName}.${e.dbObject.name} CLASS ${s.name}`;for(const t of e.dbObject.crudOperations)"CREATE"===t?o+=" @INSERT":"UPDATE"===t?o+=" @UPDATE":"DELETE"===t&&(o+=" @DELETE");s.fields&&(o+=` {\n${t(n(null==s?void 0:s.fields,void 0,2))}\n    }`),o+=i(e.dbObject)+";"}}else{const t=e.mrsObjects.find((e=>"PARAMETERS"===e.kind));if(t){o=`CREATE OR REPLACE REST ${e.dbObject.objectType} ${e.dbObject.requestPath}\n    ON SERVICE ${e.servicePath} SCHEMA ${e.dbSchemaPath}\n    AS ${e.dbSchemaName}.${e.dbObject.name}`,t.fields&&(o+=`\n    PARAMETERS ${t.name} {\n`+n(null==t?void 0:t.fields,void 0,2).slice(0,-2)+"\n    }");for(const t of e.mrsObjects)"PARAMETERS"!==t.kind&&t.fields&&(o+=`\n    RESULT ${t.name} {\n`+n(t.fields,void 0,2,!0).slice(0,-2)+"\n    }");o+=i(e.dbObject)+";"}}return o}));let mr=pr;re=new WeakMap;const gr=class _MrsHub extends ComponentBase{constructor(){super(...arguments),fe(this,le,new Map),fe(this,de,new Map),pe(this,"showMrsServiceDialog",(async(e,t)=>{var n,i;const o=await e.mrs.getAuthVendors(),s=t?"Adjust the REST Service Configuration":"Enter Configuration Values for the New REST Service",r={id:"",authVendorId:"",authVendorName:"",serviceId:"",name:"<new>",description:"",url:"",urlDirectAuth:"",accessToken:"",appId:"",enabled:!0,limitToRegisteredUsers:!0,defaultRoleId:"MQAAAAAAAAAAAAAAAAAAAA=="};if(t&&!t.authApps){t.authApps=await e.mrs.getAuthApps(t.id),t.authApps.push(r);for(const e of t.authApps)e.authVendorName=(null==(n=o.find((t=>e.authVendorId===t.id)))?void 0:n.name)??""}const a={headers:{"Access-Control-Allow-Credentials":"true","Access-Control-Allow-Headers":"Content-Type, Authorization, X-Requested-With, Origin, X-Auth-Token","Access-Control-Allow-Methods":"GET, POST, PUT, DELETE, OPTIONS"},http:{allowedOrigin:"auto"},logging:{exceptions:!0,request:{body:!0,headers:!0},response:{body:!0,headers:!0}},returnInternalErrorDetails:!0,includeLinksInResults:!1};let l="";(null==t?void 0:t.options)?l=JSON.stringify(t.options,void 0,4):t||(l=JSON.stringify(a,void 0,4));const d={id:"mrsServiceDialog",type:ji.MrsService,title:s,parameters:{protocols:["HTTPS","HTTP"],authVendors:o},values:{serviceId:(null==t?void 0:t.id)??0,servicePath:(null==t?void 0:t.urlContextRoot)??"/myService",hostName:null==t?void 0:t.urlHostName,protocols:(null==t?void 0:t.urlProtocol)??["HTTPS"],isCurrent:!t||1===t.isCurrent,enabled:!t||1===t.enabled,comments:(null==t?void 0:t.comments)??"",options:l,authPath:(null==t?void 0:t.authPath)??"/authentication",authCompletedUrlValidation:(null==t?void 0:t.authCompletedUrlValidation)??"",authCompletedUrl:(null==t?void 0:t.authCompletedUrl)??"",authCompletedPageContent:(null==t?void 0:t.authCompletedPageContent)??"",authApps:(null==t?void 0:t.authApps)??[r]}},c=await this.showDialog(d);if(c===$i.Cancel)return!0;const u=c,h=u.servicePath,p=u.protocols,m=u.hostName,g=u.comments,f=u.isCurrent,b=u.enabled,v=""===u.options?null:JSON.parse(u.options),S=u.authPath,C=u.authCompletedUrl,w=u.authCompletedUrlValidation,y=u.authCompletedPageContent,k=u.authApps.filter((e=>""!==e.id));for(const D of k)D.authVendorId=(null==(i=o.find((e=>D.authVendorName===e.name)))?void 0:i.id)??"",D.serviceId=""===D.serviceId?void 0:D.serviceId,D.authVendorId=""===D.authVendorId?void 0:D.authVendorId,D.defaultRoleId=""===D.defaultRoleId?null:D.defaultRoleId;if(t)try{await e.mrs.updateService(t.id,t.urlContextRoot,t.urlHostName,{urlContextRoot:h,urlProtocol:p,urlHostName:m,enabled:b,comments:g,options:v,authPath:S,authCompletedUrl:C,authCompletedUrlValidation:w,authCompletedPageContent:y,authApps:k}),f&&await e.mrs.setCurrentService(t.id),nn.execute("refreshConnections",void 0),nn.execute("showInfo",["The MRS service has been successfully updated."])}catch(I){nn.execute("showError",[`Error while updating MySQL REST service: ${String(I)}`])}else try{const t=await e.mrs.addService(h,p,m??"",g,b,v,S,C,w,y,k);f&&await e.mrs.setCurrentService(t.id),nn.executeRemote("refreshConnections",void 0),nn.execute("showInfo",["The MRS service has been created."])}catch(I){nn.execute("showError",[`Error while adding MySQL REST service: ${String(I)}`])}return!0})),pe(this,"showMrsSchemaDialog",(async(e,t,n)=>{try{const o=await e.mrs.listServices(),s=n?"Adjust the REST Schema Configuration":"Enter Configuration Values for the New REST Schema",r={id:"mrsSchemaDialog",type:ji.MrsSchema,title:s,parameters:{services:o},values:{serviceId:null==n?void 0:n.serviceId,dbSchemaName:(null==n?void 0:n.name)??t,requestPath:(null==n?void 0:n.requestPath)??`/${Bn(t??"schema")}`,requiresAuth:1===(null==n?void 0:n.requiresAuth),enabled:!n||1===n.enabled,itemsPerPage:null==n?void 0:n.itemsPerPage,comments:(null==n?void 0:n.comments)??"",options:(null==n?void 0:n.options)?JSON.stringify(null==n?void 0:n.options):""}},a=await this.showDialog(r);if(a===$i.Cancel)return!0;const l=a,d=l.serviceId,c=l.dbSchemaName,u=l.requestPath,h=l.requiresAuth,p=l.itemsPerPage?l.itemsPerPage:null,m=l.comments,g=l.enabled,f=""===l.options?null:JSON.parse(l.options);if(n)try{await e.mrs.updateSchema(n.id,d,c,u,h,g,p,m,f),nn.executeRemote("refreshConnections",void 0),nn.execute("showInfo",["The MRS schema has been updated successfully."])}catch(i){await nn.execute("showError",[`Error while updating MRS schema: ${String(i)??"<unknown>"}`])}else try{await e.mrs.addSchema(d,c,u,h,f,p,m),nn.executeRemote("refreshConnections",void 0),nn.execute("showInfo",["The MRS schema has been added successfully."])}catch(i){await nn.execute("showError",[`Error while adding MRS schema: ${String(i)??"<unknown>"}`])}}catch(i){await nn.execute("showError",[`Error while listing MySQL REST services: ${String(i)??"<unknown>"}`])}return!0})),pe(this,"showMrsContentSetDialog",(async(e,t,n)=>{try{const o=await e.mrs.listServices(),s=n?"Adjust the MRS Static Content Set Configuration":"Enter Configuration Values for the New MRS Static Content Set";let r=null==n?void 0:n.requestPath;if(!r)if(t){const e=()=>{const e=t.lastIndexOf("/");return t.substring(t.substring(0,e).lastIndexOf("/"),e)};r=t.endsWith("/build")||t.endsWith("/output")||t.endsWith("/out")||t.endsWith("/web")?e():t.substring(t.lastIndexOf("/"))}else r="/content";const a={id:"mrsContentSetDialog",type:ji.MrsContentSet,title:s,parameters:{services:o,backend:e},values:{directory:t,serviceId:null==n?void 0:n.serviceId,requestPath:(null==n?void 0:n.requestPath)??r,requiresAuth:1===(null==n?void 0:n.requiresAuth),enabled:!n||1===n.enabled,comments:(null==n?void 0:n.comments)??"",options:(null==n?void 0:n.options)?JSON.stringify(null==n?void 0:n.options):"",payload:{backend:e}}},l=await this.showDialog(a);if(l===$i.Cancel)return!0;const d=l,c=d.serviceId;r=d.requestPath;const u=d.requiresAuth,h=d.comments,p=d.enabled,m=""===d.options?null:JSON.parse(d.options);let g=!1;try{if(g=await e.mrs.getServiceRequestPathAvailability(c,r),!g){if((await e.mrs.listContentSets(c,r)).length>0){(await ss.showDialog({id:"mrsContentSetPathConfirmation",type:Hi.Confirm,title:"Confirmation",parameters:{prompt:`The request path ${r} is already used by another static content set. Do you want to replace the existing one?`,accept:"Yes",refuse:"No",default:"No"}})).closure===$i.Accept?g=!0:nn.execute("showInfo",["Cancelled the upload."])}else nn.execute("showError",[`The request path ${r} is already used on this service.`])}}catch(i){nn.execute("showError",[`Error while checking the MRS content set request path: ${String(i)??"<unknown>"}`])}if(g&&!n){const t=an(),n=(e,n)=>{nn.executeRemote("updateStatusbar",[{id:t,text:e,visible:void 0!==e,hideAfter:n}])};try{n("$(loading~spin) Starting to load static content set ...");const t=await e.mrs.addContentSet(d.directory,r,u,m,c,h,p,!0,(e=>{n("$(loading~spin) "+e)}));n(),nn.executeRemote("refreshConnections",void 0),nn.execute("showInfo",[`The MRS static content set has been added successfully. ${t.numberOfFilesUploaded??""} file${t.numberOfFilesUploaded??1?"s":""} have been uploaded`])}catch(i){nn.execute("showError",[`Error while adding MRS content set: ${String(i)??"<unknown>"}`])}finally{n()}}}catch(i){nn.execute("showError",[`Error while listing MySQL REST services: ${String(i)??"<unknown>"}`])}return!0})),pe(this,"showMrsAuthAppDialog",(async(e,t,n)=>{var i,o,s,r;const a=t?"Adjust the MRS Authentication App Configuration":"Enter Configuration Values for the New MRS Authentication App",l=await e.mrs.getAuthVendors(),d=await e.mrs.listRoles(),c=(null==(i=l.find((e=>(null==t?void 0:t.authVendorId)===e.id)))?void 0:i.name)??"",u=(null==(o=d.find((e=>(null==t?void 0:t.defaultRoleId)===e.id)))?void 0:o.caption)??d.length>0?d[0].caption:"",h={id:"mrsAuthenticationAppDialog",type:ji.MrsAuthenticationApp,title:a,parameters:{protocols:["HTTPS","HTTP"],authVendors:l,roles:d},values:{create:void 0!==t,id:"",authVendorName:c,name:null==t?void 0:t.name,description:null==t?void 0:t.description,accessToken:null==t?void 0:t.accessToken,appId:null==t?void 0:t.appId,url:null==t?void 0:t.url,urlDirectAuth:null==t?void 0:t.urlDirectAuth,enabled:(null==t?void 0:t.enabled)??!0,limitToRegisteredUsers:null==t?void 0:t.limitToRegisteredUsers,defaultRoleId:u}},p=await this.showDialog(h);if(p===$i.Cancel)return!0;const m=p,g=(null==(s=l.find((e=>m.authVendorName===e.name)))?void 0:s.id)??"",f=(null==(r=d.find((e=>m.defaultRoleName===e.caption)))?void 0:r.id)??null;if(t)try{await e.mrs.updateAuthApp(t.id,{authVendorId:g,name:m.name,description:m.description,url:m.url,urlDirectAuth:m.urlDirectAuth,accessToken:m.accessToken,appId:m.appId,enabled:m.enabled,limitToRegisteredUsers:m.limitToRegisteredUsers,defaultRoleId:f}),nn.executeRemote("refreshConnections",void 0),nn.execute("showInfo",["The MRS Authentication App has been updated."])}catch(b){nn.execute("showError",[`Error while updating MySQL REST Authentication App: ${String(b)}`])}else try{n&&await e.mrs.addAuthApp(n.id,{authVendorId:g,name:m.name,description:m.description,url:m.url,urlDirectAuth:m.urlDirectAuth,accessToken:m.accessToken,appId:m.appId,enabled:m.enabled,limitToRegisteredUsers:m.limitToRegisteredUsers,defaultRoleId:f},[]),nn.executeRemote("refreshConnections",void 0),nn.execute("showInfo",["The MRS Authentication App has been added."])}catch(b){nn.execute("showError",[`Error while adding MySQL REST Authentication App: ${String(b)}`])}return!0})),pe(this,"showMrsUserDialog",(async(e,t,n)=>{var i;const o=n?"Adjust the REST User":"Enter new MySQL REST User Values",s=await e.mrs.getAuthApps(t.serviceId??"unknown"),r=await e.mrs.listRoles(null==t?void 0:t.serviceId);let a=[];n&&n.id?a=await e.mrs.listUserRoles(n.id):t.defaultRoleId&&(a=[{userId:null,roleId:t.defaultRoleId,comments:null}]);const l={id:"mrsUserDialog",type:ji.MrsUser,title:o,parameters:{authApp:t,authApps:s,availableRoles:r,userRoles:a},values:{name:null==n?void 0:n.name,email:null==n?void 0:n.email,vendorUserId:null==n?void 0:n.vendorUserId,loginPermitted:(null==n?void 0:n.loginPermitted)??!0,mappedUserId:null==n?void 0:n.mappedUserId,appOptions:null==n?void 0:n.appOptions,authString:null==n?void 0:n.authString}},d=await this.showDialog(l);if(d===$i.Cancel)return!0;const c=d,u=null==(i=s.find((e=>e.name===c.authAppName)))?void 0:i.id,h=c.userRoles.map((e=>({userId:(null==n?void 0:n.id)??null,roleId:r.find((t=>t.caption===e)).id,comments:null})));if(n){if(n.id)try{await e.mrs.updateUser(n.id,{authAppId:u,name:c.name??null,email:c.email??null,vendorUserId:c.vendorUserId??null,loginPermitted:c.loginPermitted,mappedUserId:c.mappedUserId??null,appOptions:c.appOptions?JSON.parse(c.appOptions):null,authString:c.authString??null},h),nn.executeRemote("refreshConnections",void 0),nn.execute("showInfo",["The MRS User has been updated."])}catch(p){nn.execute("showError",[`Error while updating MySQL REST User: ${String(p)}`])}}else try{t&&t.id&&await e.mrs.addUser(t.id,c.name,c.email,c.vendorUserId,c.loginPermitted,c.mappedUserId,c.appOptions?JSON.parse(c.appOptions):null,c.authString,h),nn.executeRemote("refreshConnections",void 0),nn.execute("showInfo",["The MRS User has been added."])}catch(p){nn.execute("showError",[`Error while adding MySQL REST User: ${String(p)}`])}return!0})),pe(this,"showMrsSdkExportDialog",(async(e,t,n,i,o)=>{if(void 0===i&&void 0===(i=await Kn.dbConnections.getDbConnection(n)))return!1;const s=await e.mrs.getService(t,null,null,null,null);let r;if(s.hostCtx.toLowerCase().startsWith("http"))r=s.hostCtx;else{r=`https://localhost:${8443+n}${s.urlContextRoot}`}const a=o?await e.mrs.getSdkOptions(o):void 0,l={id:"mrsSdkExportDialog",type:ji.MrsSdkExport,title:`Export MRS SDK Files for ${s.hostCtx}`,parameters:{serviceName:s.hostCtx,languages:["TypeScript"],appBaseClasses:[{language:"TypeScript",appBaseClasses:["MrsBaseAppPreact.ts"]}]},values:{directory:o,serviceUrl:(null==a?void 0:a.serviceUrl)??r,serviceId:t,sdkLanguage:(null==a?void 0:a.sdkLanguage)??"TypeScript",addAppBaseClass:null==a?void 0:a.addAppBaseClass,header:null==a?void 0:a.header}},d=await this.showDialog(l);if(d===$i.Cancel)return!0;const c=d;try{await e.mrs.dumpSdkServiceFiles(c.directory,{serviceId:t,dbConnectionUri:jo(i),sdkLanguage:c.sdkLanguage,serviceUrl:c.serviceUrl,addAppBaseClass:c.addAppBaseClass}),nn.execute("showInfo",["MRS SDK Files exported successfully."])}catch(u){nn.execute("showError",[`Error while exporting the REST Service SDK Files: ${String(u)}`])}return!0})),pe(this,"showDialog",(e=>{const t=e.type;if(!ge(this,le).has(t)){const n=ge(this,de).get(t);if(n&&n.current){ge(this,le).set(t,document.activeElement);const i=n.current.show(e),o=ge(this,le).get(t);return ge(this,le).delete(t),(o instanceof HTMLTextAreaElement||o instanceof HTMLInputElement)&&o.focus(),i}}return Promise.resolve($i.Cancel)}))}render(){const e=[];return ge(_MrsHub,ae).forEach(((t,n)=>{const i=ke();ge(this,de).set(n,i),e.push(Ie(t,{ref:i},t.name))})),Ie(Re,{children:e})}async showMrsDbObjectDialog(e,t){const n=t.dbObject,i=await e.mrs.listServices(),o=await e.mrs.listSchemas(""===n.serviceId?void 0:n.serviceId);let s;if("PROCEDURE"!==n.objectType&&"FUNCTION"!==n.objectType){s=(await e.mrs.getTableColumnsWithReferences(void 0,n.name,void 0,void 0,n.schemaName,n.objectType)).filter((e=>void 0===e.referenceMapping||null===e.referenceMapping)).map((e=>e.name))}else{s=(await e.mrs.getDbObjectParameters(n.name,n.schemaName,void 0,n.objectType)).map((e=>e.name))}const r={id:"mrsDbObjectDialog",type:ji.MrsDbObject,title:void 0,parameters:{services:i,schemas:o,rowOwnershipFields:s},values:{id:n.id,serviceId:n.serviceId,dbSchemaId:n.dbSchemaId,name:n.name,requestPath:n.requestPath,requiresAuth:1===n.requiresAuth,enabled:1===n.enabled,itemsPerPage:n.itemsPerPage,comments:n.comments??"",rowUserOwnershipEnforced:1===n.rowUserOwnershipEnforced,rowUserOwnershipColumn:n.rowUserOwnershipColumn,objectType:n.objectType,crudOperations:n.crudOperations,crudOperationFormat:n.crudOperationFormat,autoDetectMediaType:1===n.autoDetectMediaType,mediaType:n.mediaType,options:(null==n?void 0:n.options)?JSON.stringify(null==n?void 0:n.options):"",authStoredProcedure:n.authStoredProcedure,payload:{backend:e,dbObject:n,createObject:t.createObject}}},a=await this.showDialog(r);if(a===$i.Cancel)return!0;const l=a,d=l.servicePath,c=l.dbSchemaId,u=l.dbSchemaPath,h=l.name,p=l.requestPath,m=l.requiresAuth,g=l.itemsPerPage,f=l.comments,b=l.enabled,v=l.rowUserOwnershipEnforced,S=l.rowUserOwnershipColumn,C=l.objectType,w="PROCEDURE"===C?["UPDATE"]:l.crudOperations??["READ"],y=l.crudOperationFormat??"FEED",k=l.mediaType,I=l.autoDetectMediaType,D=l.authStoredProcedure,T=""===l.options?null:JSON.parse(l.options),R=l.objects,x=i.find((e=>e.urlContextRoot===d)),E=(await e.mrs.listSchemas(null==x?void 0:x.id)).find((e=>e.requestPath===u));if(t.createObject)try{await e.mrs.addDbObject(h,C,!1,p,b,w,y,m,v,I,T,g,S,null==E?void 0:E.id,void 0,f,k,"",R),nn.executeRemote("refreshConnections",void 0)}catch(M){return nn.execute("showError",[`The MRS Database Object ${h} could not be created.`,`${String(M)}`]),!0}else try{await e.mrs.updateDbObject(n.id,n.name,n.requestPath,c,{name:h,dbSchemaId:null==E?void 0:E.id,requestPath:p,requiresAuth:m,autoDetectMediaType:I,enabled:b,rowUserOwnershipEnforced:v,rowUserOwnershipColumn:S,itemsPerPage:g,comments:f,mediaType:k,authStoredProcedure:D,crudOperations:w,crudOperationFormat:y,options:T,objects:R}),nn.executeRemote("refreshConnections",void 0)}catch(M){return nn.execute("showError",[`The MRS Database Object ${h} could not be updated.`,`${String(M)}`]),!0}return nn.execute("showInfo",[`The MRS Database Object ${h} was ${l.createObject?"created":"updated"} successfully.`]),nn.execute("refreshMrsServiceSdk",{}),!0}};ae=new WeakMap,le=new WeakMap,de=new WeakMap,fe(gr,ae,new Map([[ji.MrsService,class MrsServiceDialog extends AwaitableValueEditDialog{constructor(){super(...arguments),pe(this,"validateInput",((e,t)=>{const n={messages:{},requiredContexts:[]};if(e){const e=t.sections.get("mainSection");if(e){const t=e.values.servicePath.value;t?t.startsWith("/")?"/mrs"===t.toLowerCase()&&(n.messages.servicePath=`The request path \`${t}\` is reserved and cannot be used.`):n.messages.servicePath="The request path must start with /.":n.messages.servicePath="The service name must not be empty."}const o=t.sections.get("optionsSection");if(o)try{const e=o.values.options.value;""!==e&&JSON.parse(e)}catch(i){n.messages.options="Please provide a valid JSON object."}}else{const e=t.sections.get("authAppSection");if(e&&e.values.authApps){const t=e.values.authApps,n=t.value,i=n.find((e=>""===e.id));!i||""===i.authVendorName&&"<new>"===i.name||(i.id=""+-1*n.length,i.position=n.length,i.authVendorName&&"<new>"===i.name&&(i.name=i.authVendorName),t.active=i.id,n.push({id:"",authVendorId:"",authVendorName:"",serviceId:"",name:"<new>",description:"",url:"",urlDirectAuth:"",accessToken:"",appId:"",enabled:!0,useBuiltInAuthorization:!0,limitToRegisteredUsers:!0,defaultRoleId:"MQAAAAAAAAAAAAAAAAAAAA=="}))}}return n})),pe(this,"processResults",(e=>{const t=e.sections.get("mainSection"),n=e.sections.get("settingsSection"),i=e.sections.get("optionsSection"),o=e.sections.get("authSection"),s=e.sections.get("authAppSection");if(t&&n&&i&&o&&s){return{servicePath:t.values.servicePath.value,comments:n.values.comments.value,hostName:n.values.hostName.value,isCurrent:t.values.makeDefault.value,enabled:t.values.enabled.value,protocols:["HTTP","HTTPS"],options:i.values.options.value,authPath:o.values.authPath.value,authCompletedUrlValidation:o.values.authCompletedUrlValidation.value,authCompletedUrl:o.values.authCompletedUrl.value,authCompletedPageContent:o.values.authCompletedPageContent.value,authApps:s.values.authApps.value}}return{}}))}get id(){return"mrsServiceDialog"}async show(e){var t;const n=null==(t=e.parameters)?void 0:t.authVendors,i=this.dialogValues(e,n),o=await this.doShow((()=>i),{title:"MySQL REST Service"});return o.closure===$i.Accept?this.processResults(o.values):$i.Cancel}dialogValues(e,t){var n,i,o,s,r,a,l,d,c,u,h;const p={caption:e.title,values:{servicePath:{type:"text",caption:"REST Service Path",value:null==(n=e.values)?void 0:n.servicePath,horizontalSpan:6,options:[Jo.AutoFocus],description:"The URL context root of this service."},makeDefaultTitle:{type:"description",caption:"REST Service Flags",horizontalSpan:2,options:[Jo.Grouped,Jo.NewGroup]},enabled:{type:"boolean",caption:"Enabled",value:(null==(i=e.values)?void 0:i.enabled)??!0,horizontalSpan:2,options:[Jo.Grouped]},makeDefault:{type:"boolean",caption:"Default",value:(null==(o=e.values)?void 0:o.isCurrent)??!0,horizontalSpan:2,options:[Jo.Grouped]}}},m={caption:"Settings",groupName:"group1",values:{comments:{type:"text",caption:"Comments",value:null==(s=e.values)?void 0:s.comments,horizontalSpan:8,description:"Comments to describe this REST Service."},hostName:{type:"text",caption:"Host Name Filter",value:null==(r=e.values)?void 0:r.hostName,horizontalSpan:4,description:"If specified, the REST service will only be made available to requests for this specific host.",placeholder:"<Host Name Filter:Port>"}}},g={caption:"Options",groupName:"group1",values:{options:{type:"text",caption:"Options:",value:null==(a=e.values)?void 0:a.options,horizontalSpan:8,multiLine:!0,multiLineCount:8,description:"Additional options in JSON format"}}},f={caption:"Authentication",groupName:"group1",values:{authPath:{type:"text",caption:"Authentication Path:",value:null==(l=e.values)?void 0:l.authPath,horizontalSpan:4,description:"The path used for authentication."},authCompletedUrl:{type:"text",caption:"Redirection URL:",value:null==(d=e.values)?void 0:d.authCompletedUrl,horizontalSpan:4,description:"The authentication workflow will redirect to this URL after login."},authCompletedUrlValidation:{type:"text",caption:"Redirection URL Validation:",value:null==(c=e.values)?void 0:c.authCompletedUrlValidation,horizontalSpan:4,description:"A regular expression to validate the /login?onCompletionRedirect parameter set by the app."},authCompletedPageContent:{type:"text",caption:"Authentication Completed Page Content:",value:null==(u=e.values)?void 0:u.authCompletedPageContent,multiLine:!0,horizontalSpan:4,description:"If this field is set its content will replace the page content of the /completed page."}}},b=(null==(h=e.values)?void 0:h.authApps)??[],v={caption:"Authentication Apps",groupName:"group1",values:{authApps:{type:"relation",caption:"Apps:",value:b,listItemCaptionFields:["name"],listItemId:"id",active:b.length>0?String(b[0].id):void 0,horizontalSpan:2,verticalSpan:4,relations:{authVendorName:"appAuthVendorName",name:"appName",description:"appDescription",url:"appUrl",urlDirectAuth:"appUrlDirectAuth",accessToken:"appAccessToken",appId:"appId",enabled:"appEnabled",limitToRegisteredUsers:"appLimitToRegisteredUsers"}},appAuthVendorName:{type:"choice",caption:"Vendor",choices:t?[""].concat(t.map((e=>e.name))):[],value:"",horizontalSpan:3,description:"The authentication vendor"},appName:{type:"text",caption:"Name",value:"",horizontalSpan:3,description:"The name of the app"},appDescription:{type:"text",caption:"Description",value:"",horizontalSpan:3,description:"A short description of the app"},flags:{type:"description",caption:"Auth App Flags",horizontalSpan:3,options:[Jo.Grouped,Jo.NewGroup]},appEnabled:{type:"boolean",caption:"Enabled",horizontalSpan:3,value:!0,options:[Jo.Grouped]},appLimitToRegisteredUsers:{type:"boolean",caption:"Limit to registered users",horizontalSpan:3,value:!0,options:[Jo.Grouped]},appId:{type:"text",caption:"App ID",value:"",horizontalSpan:3,description:"The OAuth2 App ID for this app as defined by the vendor"},appAccessToken:{type:"text",caption:"Access Token",value:"",horizontalSpan:3,description:"The OAuth2 access token for this app as defined by the vendor"},appUrl:{type:"text",caption:"Custom URL",value:"",horizontalSpan:3,description:"A custom OAuth2 service URL"},appUrlDirectAuth:{type:"text",caption:"Custom URL for Access Token",value:"",horizontalSpan:3,description:"A custom URL for exchanging the Access Token"}}};return{id:"mainSection",sections:new Map([["mainSection",p],["settingsSection",m],["optionsSection",g],["authSection",f],["authAppSection",v]])}}}],[ji.MrsSchema,class MrsSchemaDialog extends AwaitableValueEditDialog{constructor(){super(...arguments),pe(this,"validateInput",((e,t)=>{const n={messages:{},requiredContexts:[]};if(e){const e=t.sections.get("mainSection"),i=t.sections.get("settingsSection");if(e&&i){i.values.dbSchemaName.value||(n.messages.dbSchemaName="The database schema name must not be empty.");const t=e.values.requestPath.value;t?t.startsWith("/")||(n.messages.requestPath="The request path must start with /."):n.messages.requestPath="The request path must not be empty."}}return n})),pe(this,"processResults",((e,t)=>{var n;const i=e.sections.get("mainSection"),o=e.sections.get("settingsSection"),s=e.sections.get("optionsSection");if(i&&o&&s){return{dbSchemaName:o.values.dbSchemaName.value,serviceId:(null==(n=t.find((e=>i.values.service.value===e.hostCtx)))?void 0:n.id)??"",requestPath:i.values.requestPath.value,requiresAuth:i.values.requiresAuth.value,enabled:i.values.enabled.value,itemsPerPage:o.values.itemsPerPage.value,comments:o.values.comments.value,options:s.values.options.value}}return{}}))}get id(){return"mrsSchemaDialog"}async show(e){var t;const n=(null==(t=e.parameters)?void 0:t.services)??[],i=this.dialogValues(e,n),o=await this.doShow((()=>i),{title:"MySQL REST Schema"});return o.closure===$i.Accept?this.processResults(o.values,n):$i.Cancel}dialogValues(e,t){var n,i,o,s,r,a,l;let d=t.find((t=>{var n;return t.id===(null==(n=e.values)?void 0:n.serviceId)}));void 0===d&&(d=t.find((e=>1===e.isCurrent))),t.length>0&&!d&&(d=t[0]);const c={caption:e.title,values:{service:{type:"choice",caption:"REST Service Path",value:null==d?void 0:d.hostCtx,choices:t.map((e=>e.hostCtx)),horizontalSpan:3,description:"The path of the REST Service this REST Schema belongs to"},requestPath:{type:"text",caption:"REST Schema Path",value:null==(n=e.values)?void 0:n.requestPath,horizontalSpan:3,options:[Jo.AutoFocus],description:"The request path to access the schema, has to start with /"},flagsTitle:{type:"description",caption:"REST Schema Flags",horizontalSpan:2,options:[Jo.Grouped,Jo.NewGroup]},enabled:{type:"boolean",caption:"Enabled",horizontalSpan:2,value:(null==(i=e.values)?void 0:i.enabled)??!0,options:[Jo.Grouped]},requiresAuth:{type:"boolean",caption:"Requires Auth",horizontalSpan:2,value:(null==(o=e.values)?void 0:o.requiresAuth)??!0,options:[Jo.Grouped]}}},u={caption:"Settings",groupName:"group1",values:{dbSchemaName:{type:"text",caption:"Database Schema Name",value:null==(s=e.values)?void 0:s.dbSchemaName,horizontalSpan:5,description:"The name of the corresponding database schema."},itemsPerPage:{type:"text",caption:"Items per Page",horizontalSpan:3,value:null==(r=e.values)?void 0:r.itemsPerPage},comments:{type:"text",caption:"Comments",value:null==(a=e.values)?void 0:a.comments,horizontalSpan:8,description:"Comments to describe this REST Schema."}}},h={caption:"Options",groupName:"group1",values:{options:{type:"text",caption:"Options",value:null==(l=e.values)?void 0:l.options,horizontalSpan:8,multiLine:!0,multiLineCount:8,description:"Additional options in JSON format"}}};return{id:"mainSection",sections:new Map([["mainSection",c],["settingsSection",u],["optionsSection",h]])}}}],[ji.MrsDbObject,class MrsDbObjectDialog extends AwaitableValueEditDialog{constructor(){super(...arguments),pe(this,"requestValue"),pe(this,"objectType"),pe(this,"backend"),pe(this,"createDbObject",!1),pe(this,"dialogValues"),pe(this,"validateInput",((e,t)=>{const n={messages:{},requiredContexts:[]};if(e){const e=t.sections.get("mainSection");if(e)if(e.values.requestPath.value){e.values.requestPath.value.startsWith("/")||(n.messages.requestPath="The request path must start with '/'.")}else n.messages.requestPath="The request path must not be empty.";const i=t.sections.get("mrsObject");if(i){i.values.tree.value.dbObject.name||(n.messages.name="The object name must not be empty.")}}return n})),pe(this,"processResults",((e,t)=>{var n;const i=t.sections.get("mainSection"),o=t.sections.get("settingsSection"),s=t.sections.get("optionsSection"),r=t.sections.get("mrsObject"),a=t.sections.get("authorizationSection");if(i&&s&&r&&a&&o){const t={};t.objectType=this.objectType,t.servicePath=i.values.service.value,t.dbSchemaPath=i.values.schema.value,t.dbSchemaId=null==(n=e.find((e=>i.values.schema.value===e.requestPath)))?void 0:n.id,t.requestPath=i.values.requestPath.value,t.requiresAuth=i.values.requiresAuth.value,t.enabled=i.values.enabled.value,t.itemsPerPage=o.values.itemsPerPage.value,t.comments=o.values.comments.value,t.crudOperationFormat=o.values.crudOperationFormat.value,t.mediaType=o.values.mediaType.value,t.autoDetectMediaType=o.values.autoDetectMediaType.value,t.rowUserOwnershipColumn=a.values.rowUserOwnershipColumn.value,t.rowUserOwnershipEnforced=a.values.rowUserOwnershipEnforced.value,t.authStoredProcedure=a.values.authStoredProcedure.value,t.options=s.values.options.value;const l=r.values.tree.value;t.name=l.dbObject.name,t.crudOperations=l.crudOperations,mr.updateMrsObjectFields(l);for(const e of l.mrsObjects)e.storedFields=void 0;return t.objects=l.mrsObjects,t}return{}})),pe(this,"handleDbObjectChange",(()=>{var e;const t=null==(e=this.dialogValues)?void 0:e.sections.get("authorizationSection");t&&(t.values.rowUserOwnershipColumn.value=this.requestValue.rowUserOwnershipColumn,t.values.rowUserOwnershipEnforced.value=this.requestValue.rowUserOwnershipEnforced??!0)})),pe(this,"handleGetCurrentDbObject",(()=>{var e;const t=null==(e=this.dialogValues)?void 0:e.sections.get("mainSection");return t&&(this.requestValue.requestPath=t.values.requestPath.value,this.requestValue.enabled=+t.values.enabled.value,this.requestValue.requiresAuth=+t.values.requiresAuth.value),this.requestValue}))}get id(){return"mrsDbObjectDialog"}async show(e,t){var n,i,o,s,r;this.requestValue=e.values;const a=null==(n=e.parameters)?void 0:n.services,l=null==(i=e.parameters)?void 0:i.schemas,d=null==(o=e.parameters)?void 0:o.rowOwnershipFields,c=null==(s=e.values)?void 0:s.payload;this.objectType=null==(r=e.values)?void 0:r.objectType,this.backend=c.backend,this.createDbObject=c.createObject,this.dialogValues=this.createDialogValues(e,a,l,d,t);const u=await this.doShow((()=>this.dialogValues),{title:"MySQL REST Object",autoResize:!0});return u.closure===$i.Accept?this.processResults(l,u.values):$i.Cancel}createDialogValues(e,t,n,i,o){var s,r,a,l,d,c,u,h,p,m,g,f,b;let v=t.find((t=>{var n;return t.id===(null==(n=e.values)?void 0:n.serviceId)}));void 0===v&&(v=t.find((e=>1===e.isCurrent))),t.length>0&&!v&&(v=t[0]);const S=n.find((t=>{var n;return(null==(n=e.values)?void 0:n.dbSchemaId)===t.id}));let C;this.createDbObject||(C=[Jo.Disabled]);const w={caption:o,values:{service:{type:"choice",caption:"REST Service Path",value:null==v?void 0:v.hostCtx,choices:t.map((e=>e.hostCtx)),horizontalSpan:2,description:"The path of the REST Service",options:C},schema:{type:"choice",caption:"REST Schema Path",value:null==S?void 0:S.requestPath,choices:n.map((e=>e.requestPath)),horizontalSpan:2,description:"The path of the REST Schema",options:C},requestPath:{type:"text",caption:"REST Object Path",value:null==(s=e.values)?void 0:s.requestPath,horizontalSpan:2,description:"The path, has to starts with /",options:[Jo.AutoFocus]},flags:{type:"description",caption:"MRS Object Flags",horizontalSpan:2,options:[Jo.Grouped,Jo.NewGroup]},enabled:{type:"boolean",caption:"Enabled",horizontalSpan:2,value:(null==(r=e.values)?void 0:r.enabled)??!0,options:[Jo.Grouped]},requiresAuth:{type:"boolean",caption:"Requires Auth",horizontalSpan:2,value:(null==(a=e.values)?void 0:a.requiresAuth)??!0,options:[Jo.Grouped]}}},y={servicePath:(null==v?void 0:v.urlContextRoot)??"",dbSchemaName:(null==S?void 0:S.name)??"",dbSchemaPath:(null==S?void 0:S.requestPath)??"",dbObject:this.requestValue,defaultMrsObjectName:On((null==v?void 0:v.urlContextRoot)??"")+On((null==S?void 0:S.requestPath)??"")+On(this.requestValue.name),crudOperations:null==(l=e.values)?void 0:l.crudOperations,mrsObjects:[],currentlyListedTables:[],currentMrsObjectId:void 0,currentTreeItems:[],createDbObject:this.createDbObject},k={caption:"PROCEDURE"===this.requestValue.objectType||"FUNCTION"===this.requestValue.objectType?"Parameters/Result Sets":"JSON/Relational Duality",groupName:"group1",expand:!0,values:{tree:{type:"custom",value:y,component:Ie(mr,{backend:this.backend,dbObjectChange:this.handleDbObjectChange,getCurrentDbObject:this.handleGetCurrentDbObject}),horizontalSpan:8}}},I={caption:"Settings",groupName:"group1",values:{crudOperationFormat:{type:"choice",caption:"Result Format",choices:["FEED","ITEM","MEDIA"],value:null==(d=e.values)?void 0:d.crudOperationFormat,horizontalSpan:2},itemsPerPage:{type:"text",caption:"Items per Page",horizontalSpan:2,value:null==(c=e.values)?void 0:c.itemsPerPage},comments:{type:"text",caption:"Comments",value:null==(u=e.values)?void 0:u.comments,horizontalSpan:4},mediaType:{type:"text",caption:"Media Type",horizontalSpan:4,value:null==(h=e.values)?void 0:h.mediaType,description:"The HTML MIME Type of the result"},autoDetectMediaType:{type:"boolean",caption:"Automatically Detect Media Type",horizontalSpan:4,value:(null==(p=e.values)?void 0:p.autoDetectMediaType)??!1}}},D={caption:"Options",groupName:"group1",values:{options:{type:"text",caption:"Options",value:null==(m=e.values)?void 0:m.options,horizontalSpan:8,multiLine:!0,multiLineCount:8,description:"Additional options in JSON format"}}},T={caption:"Authorization",groupName:"group1",values:{rowUserOwnershipEnforced:{type:"boolean",caption:"Row Ownership",label:"Enforce Row User Ownership",horizontalSpan:4,value:(null==(g=e.values)?void 0:g.rowUserOwnershipEnforced)??!0,description:"Enables the MRS row ownership management"},rowUserOwnershipColumn:{type:"choice",caption:"Row Ownership Field",value:null==(f=e.values)?void 0:f.rowUserOwnershipColumn,choices:i,horizontalSpan:4,optional:!0,description:"Field that holds the user ID that should be managed by MRS"},authStoredProcedure:{type:"text",caption:"Custom Stored Procedure used for Authorization",horizontalSpan:8,value:null==(b=e.values)?void 0:b.authStoredProcedure}}};return{id:"mainSection",sections:new Map([["mainSection",w],["mrsObject",k],["settingsSection",I],["authorizationSection",T],["optionsSection",D]])}}}],[ji.MrsContentSet,class MrsContentSetDialog extends AwaitableValueEditDialog{constructor(){super(...arguments),pe(this,"validateInput",((e,t)=>{const n={messages:{},requiredContexts:[]};if(e){const e=t.sections.get("mainSection");if(e)if(e.values.requestPath.value){e.values.requestPath.value.startsWith("/")||(n.messages.requestPath="The request path must start with /.")}else n.messages.requestPath="The request path must not be empty."}return n})),pe(this,"processResults",((e,t)=>{var n;const i=e.sections.get("mainSection");if(i){return{serviceId:(null==(n=t.find((e=>i.values.service.value===e.hostCtx)))?void 0:n.id)??"",requestPath:i.values.requestPath.value,requiresAuth:i.values.requiresAuth.value,enabled:i.values.enabled.value,comments:i.values.comments.value,options:i.values.options.value,directory:i.values.directory.value}}return{}}))}get id(){return"mrsContentSetDialog"}async show(e){var t;const n=null==(t=e.parameters)?void 0:t.services,i=this.dialogValues(e,n),o=await this.doShow((()=>i),{title:"MRS Content Set"});return o.closure===$i.Accept?this.processResults(o.values,n):$i.Cancel}dialogValues(e,t){var n,i,o,s,r,a,l;let d=t.find((t=>{var n;return(null==(n=e.values)?void 0:n.serviceId)===t.id}));t.length>0&&!d&&(d=t[0]);const c={caption:e.title,values:{requestPath:{type:"text",caption:"Request Path",value:null==(n=e.values)?void 0:n.requestPath,horizontalSpan:4,options:[Jo.AutoFocus],description:"The request path to access the content, has to start with /"},service:{type:"choice",caption:"MRS Service",value:null==d?void 0:d.hostCtx,choices:t.map((e=>e.hostCtx)),horizontalSpan:4,description:"The MRS Service to hold the content"},directory:{type:"resource",caption:"Folder to upload",value:null==(i=e.values)?void 0:i.directory,horizontalSpan:8,options:(null==(o=e.values)?void 0:o.directory)?[]:[Jo.Hidden],description:"The folder that should be uploaded, including all its files and sub-folders"},enabled:{type:"boolean",caption:"Enabled",horizontalSpan:4,value:(null==(s=e.values)?void 0:s.enabled)??!0,description:"Defines if the static content should be made available"},requiresAuth:{type:"boolean",caption:"Requires Authentication",horizontalSpan:4,value:(null==(r=e.values)?void 0:r.requiresAuth)??!0,description:"Only authenticated users can access the content if checked"},comments:{type:"text",caption:"Comments",value:null==(a=e.values)?void 0:a.comments,horizontalSpan:8},options:{type:"text",caption:"Options",value:null==(l=e.values)?void 0:l.options,horizontalSpan:8,multiLine:!0,description:"Additional options in JSON format"}}};return{id:"mainSection",sections:new Map([["mainSection",c]])}}}],[ji.MrsAuthenticationApp,class MrsAuthenticationAppDialog extends AwaitableValueEditDialog{constructor(){super(...arguments),pe(this,"validateInput",((e,t)=>{const n={messages:{},requiredContexts:[]},i=t.sections.get("mainSection");return e?i&&(i.values.authVendorName.value||(n.messages.authVendorName="The vendor name must not be empty."),i.values.name.value||(n.messages.name="The name must not be empty.")):i&&(""!==i.values.name.value&&void 0!==i.values.name.value||(i.values.name.value=i.values.authVendorName.value)),n})),pe(this,"processResults",(e=>{const t=e.sections.get("mainSection");if(t){return{authVendorName:t.values.authVendorName.value,name:t.values.name.value,description:t.values.description.value,accessToken:t.values.accessToken.value,appId:t.values.appId.value,url:t.values.url.value,urlDirectAuth:t.values.urlDirectAuth.value,enabled:t.values.enabled.value,limitToRegisteredUsers:t.values.limitToRegisteredUsers.value,defaultRoleName:t.values.defaultRoleName.value}}return{}}))}get id(){return"mrsAuthenticationAppDialog"}async show(e){var t,n;const i=null==(t=e.parameters)?void 0:t.authVendors,o=null==(n=e.parameters)?void 0:n.roles,s=this.dialogValues(e,i,o),r=await this.doShow((()=>s),{title:"MySQL REST Authentication App"});return r.closure===$i.Accept?this.processResults(r.values):$i.Cancel}dialogValues(e,t,n){const i=e.values,o={caption:e.title,values:{authVendorName:{type:"choice",caption:"Vendor",choices:t?[""].concat(t.map((e=>e.name))):[],value:i.authVendorName,description:"The authentication vendor"},name:{type:"text",caption:"Name",value:i.name,description:"The name of the authentication app"},description:{type:"text",caption:"Description",value:i.description,description:"A short description of the app"},accessToken:{type:"text",caption:"Access Token",value:i.accessToken,description:"The OAuth2 access token for this app as defined by the vendor"},appId:{type:"text",caption:"App ID",value:i.appId,description:"The OAuth2 App ID for this app as defined by the vendor"},url:{type:"text",caption:"Custom URL",value:i.url,description:"A custom OAuth2 service URL"},urlDirectAuth:{type:"text",caption:"Custom URL for Access Token",value:i.urlDirectAuth,description:"A custom URL for exchanging the Access Token"},defaultRoleName:{type:"choice",caption:"Default Role",choices:n?n.map((e=>e.caption)):[],value:i.defaultRoleId??"",description:"The default role for users",optional:!0},flags:{type:"description",caption:"Flags",options:[Jo.Grouped,Jo.NewGroup]},enabled:{type:"boolean",caption:"Enabled",value:i.enabled,options:[Jo.Grouped]},limitToRegisteredUsers:{type:"boolean",caption:"Limit to registered users",value:i.limitToRegisteredUsers,options:[Jo.Grouped]}}};return{id:"mainSection",sections:new Map([["mainSection",o]])}}}],[ji.MrsUser,class MrsUserDialog extends AwaitableValueEditDialog{constructor(){super(...arguments),pe(this,"currentAuthApp",null),pe(this,"validateInput",((e,t)=>{var n;const i={messages:{},requiredContexts:[]};if(e){const e=t.sections.get("mainSection");e&&"MAAAAAAAAAAAAAAAAAAAAA=="===(null==(n=this.currentAuthApp)?void 0:n.authVendorId)&&(e.values.name.value||e.values.email.value||(i.messages.name="The user name or email are required for this app."),e.values.authString.value||(i.messages.authString="The authentication string is required for this app."))}return i})),pe(this,"processResults",(e=>{const t=e.sections.get("mainSection");if(t){return{authAppName:t.values.authApp.value,name:t.values.name.value,email:t.values.email.value,vendorUserId:t.values.vendorUserId.value,loginPermitted:t.values.loginPermitted.value,mappedUserId:t.values.mappedUserId.value,appOptions:t.values.appOptions.value,authString:t.values.authString.value,userRoles:t.values.roles.value}}return{}}))}get id(){return"mrsUserDialog"}async show(e){var t,n,i;const o=null==(t=e.parameters)?void 0:t.authApps,s=null==(n=e.parameters)?void 0:n.availableRoles,r=null==(i=e.parameters)?void 0:i.userRoles,a=this.dialogValues(e,o,s,r),l=await this.doShow((()=>a),{title:"MySQL REST User"});return l.closure===$i.Accept?this.processResults(l.values):$i.Cancel}dialogValues(e,t,n,i){var o;const s=e.values;this.currentAuthApp=null==(o=e.parameters)?void 0:o.authApp;const r=i.map((e=>{var t;return(null==(t=n.find((t=>t.id===e.roleId)))?void 0:t.caption)??"unknown role"})),a={caption:e.title,values:{name:{type:"text",caption:"User Name",value:s.name,horizontalSpan:3,description:"The name of the user",options:[Jo.AutoFocus]},authString:{type:"text",caption:"User Password",value:s.authString,horizontalSpan:3,obfuscated:!0,description:"The password of the user"},authApp:{type:"choice",caption:"Authentication App",choices:t?[""].concat(t.map((e=>e.name?e.name:""))):[],value:this.currentAuthApp.name,horizontalSpan:2,description:"The authentication app"},email:{type:"text",caption:"Email",value:s.email,horizontalSpan:3,description:"The email of the user"},roles:{type:"set",caption:"Assigned Roles",tagSet:n.map((e=>e.caption)),value:r,horizontalSpan:3,description:"Roles assign DB Object privileges to the user."},loginPermittedTitle:{type:"description",caption:"",horizontalSpan:2,options:[Jo.Grouped,Jo.NewGroup]},loginPermitted:{type:"boolean",caption:"Permit Login",value:s.loginPermitted,horizontalSpan:2,description:"Allow user to log in",options:[Jo.Grouped]},appOptions:{type:"text",caption:"User Options",value:s.appOptions?JSON.stringify(s.appOptions):"",horizontalSpan:6,verticalSpan:2,description:"Additional options in JSON format",multiLine:!0},vendorUserId:{type:"text",caption:"Vendor User Id",value:s.vendorUserId,horizontalSpan:2,description:"Set by OAuth2 vendors"},mappedUserId:{type:"text",caption:"Mapped User Id",value:s.mappedUserId,horizontalSpan:2,description:"Optional id for sync-ing"}}};return{id:"mainSection",sections:new Map([["mainSection",a]])}}}],[ji.MrsSdkExport,class MrsSdkExportDialog extends AwaitableValueEditDialog{constructor(){super(...arguments),fe(this,re,void 0),pe(this,"validateInput",((e,t)=>{const n={messages:{},requiredContexts:[]};if(e){const e=t.sections.get("mainSection");e&&tn.embedded&&!e.values.directory.value&&(n.messages.directory="Please specify a directory.")}return n})),pe(this,"processResults",(e=>{const t=e.sections.get("mainSection");if(t){return{serviceId:ge(this,re),directory:tn.embedded?t.values.directory.value:void 0,sdkLanguage:t.values.sdkLanguage.value,serviceUrl:t.values.serviceUrl.value,addAppBaseClass:t.values.addAppBaseClass.value}}return{}}))}get id(){return"mrsSdkExportDialog"}async show(e){var t,n,i;const o=null==(t=e.parameters)?void 0:t.languages,s=null==(n=e.parameters)?void 0:n.serviceName,r=null==(i=e.parameters)?void 0:i.appBaseClasses,a=this.dialogValues(e,o,s,r),l=await this.doShow((()=>a),{title:`Export MRS SDK for ${s}`});return l.closure===$i.Accept?this.processResults(l.values):$i.Cancel}dialogValues(e,t,n,i){var o;const s=e.values;be(this,re,s.serviceId);const r=(null==(o=i.find((e=>e.language===(s.sdkLanguage??t[0]))))?void 0:o.appBaseClasses)??[],a={caption:e.title,values:{directory:{type:"resource",caption:"Directory",value:s.directory,canSelectFolders:!0,canSelectFiles:!1,horizontalSpan:8,description:"The directory where the SDK files should be written"},serviceUrl:{type:"text",caption:"REST Service URL",value:s.serviceUrl,horizontalSpan:8,description:"The URL to access the REST Service",options:[Jo.AutoFocus]},sdkLanguage:{type:"choice",caption:"SDK Client API Language",choices:t,value:s.sdkLanguage??t[0],horizontalSpan:4,description:"The development language that should be used for generation"},addAppBaseClass:{type:"choice",caption:"Include AppBaseClass",choices:r,value:s.addAppBaseClass,optional:!0,horizontalSpan:4,description:"Add an application BaseClass with core MRS functionality."},header:{type:"text",caption:"SDK File Header",value:s.header??`/* Copyright (c) ${(new Date).getFullYear()}, Oracle and/or its affiliates. */`,horizontalSpan:8,description:"The header that should be applied to the generated SDK files.",multiLine:!0,multiLineCount:4}}};return tn.embedded||delete a.values.directory,{id:"mainSection",sections:new Map([["mainSection",a]])}}}]]));let fr=gr;class DBEditorModule extends ModuleBase{constructor(e){super(e),pe(this,"connectionState",new Map),pe(this,"workerPool"),pe(this,"editorCounter",0),pe(this,"scriptsTree",[]),pe(this,"pendingProgress"),pe(this,"actionMenuRef",ke()),pe(this,"mrsHubRef",ke()),pe(this,"handlePushConnection",(e=>{const{connections:t}=this.state;t.push(e),this.setState({connections:t})})),pe(this,"handleAddConnection",(e=>{Kn.dbConnections.addDbConnection(Qn.currentProfileId,e,"").then((t=>{if(void 0!==t){const{connections:n}=this.state;e.id=t,n.push(e),this.setState({connections:n}),nn.executeRemote("connectionAdded",e)}})).catch((e=>{nn.execute("showError",["Add Connection Error","Cannot add DB connection:",String(e.message)])}))})),pe(this,"handleUpdateConnection",(e=>{Kn.dbConnections.updateDbConnection(Qn.currentProfileId,e).then((()=>{this.forceUpdate(),nn.executeRemote("connectionUpdated",e)})).catch((e=>{nn.execute("showError",["Update Connection Error","Cannot update DB connection:",String(e.message)])}))})),pe(this,"handleDropConnection",(e=>{const{connections:t}=this.state,n=t.findIndex((t=>t.id===e));n>-1&&this.doDropConnection(n,!0)})),pe(this,"doDropConnection",((e,t)=>{const{connections:n}=this.state,i=n[e];Kn.dbConnections.removeDbConnection(Qn.currentProfileId,i.id).then((()=>{const i=n[e];n.splice(e,1),this.setState({connections:n}),t&&nn.executeRemote("connectionRemoved",i),this.removeTabsForConnection(i.id)}))})),pe(this,"showPage",(e=>{if(e.module===hs){const{connectionsLoaded:t,connections:n}=this.state;if("connections"===e.page)return this.showConnections();if(t){const t=parseInt(e.page,10),i=n.find((e=>e.id===t));if(i)return this.addConnectionTab(i,!1,e.suppressAbout??!1,e.noEditor?"none":"default")}}return Promise.resolve(!1)})),pe(this,"openConnectionTab",(e=>this.addConnectionTab(e.details,e.force,!1,e.initialEditor))),pe(this,"setCurrentSchema",(e=>new Promise((t=>{const{editorTabs:n}=this.state;n.forEach((t=>{if(t.details.id===e.connectionId){const n=this.connectionState.get(e.id.length>0?e.id:t.tabId);n&&n.currentSchema!==e.schema&&(n.backend.setCurrentSchema(e.schema),n.currentSchema=e.schema,n.editors.forEach((t=>{if(t.state){const n=t.state.model.executionContexts;n&&(n.currentSchema=e.schema)}})))}})),this.setState({editorTabs:n},(()=>{t(!0)}))})))),pe(this,"toggleModule",(e=>new Promise((t=>{const{showExplorer:n,selectedPage:i}=this.state;e===hs&&"connections"!==i?this.setState({showExplorer:!n},(()=>{t(!0)})):t(!1)})))),pe(this,"showConnections",(()=>new Promise((e=>{this.setState({selectedPage:"connections"},(()=>{e(!0)})),nn.executeRemote("selectConnectionTab",{connectionId:-1,page:"DB Connection Overview"})})))),pe(this,"runCommand",(e=>new Promise((t=>{if("sendBlockUpdates"===e.command)e.context.linkId&&(nn.executeRemote("codeBlocksUpdate",{linkId:e.context.linkId,code:e.context.code}),t(!0));else t(!1)})))),pe(this,"profileLoaded",(async()=>(await this.loadConnections(),!0))),pe(this,"webSessionStarted",(async()=>{const{editorTabs:e}=this.state;for(const t of e){const e=this.connectionState.get(t.tabId);e&&(await e.backend.startSession(t.tabId),await this.reOpenConnection(e.backend,t.details))}return!0})),pe(this,"handleConnectionAdded",(e=>{const{connections:t}=this.state;return t.push(e),this.setState({connections:t}),Promise.resolve(!0)})),pe(this,"handleConnectionUpdated",(e=>{const{connections:t}=this.state,n=t.findIndex((t=>t.id===e.id));return n>-1&&(t[n]=e,this.setState({connections:t})),Promise.resolve(!0)})),pe(this,"handleConnectionRemoved",(e=>{const{connections:t}=this.state,n=t.findIndex((t=>t.id===e.id));return n>-1&&this.doDropConnection(n,!1),Promise.resolve(!0)})),pe(this,"handleRefreshConnections",(()=>this.loadConnections().then((()=>!0)))),pe(this,"showMrsDbObjectDialog",(async e=>{if(this.mrsHubRef.current){const{selectedPage:t,editorTabs:n}=this.state;if(n.find((e=>e.tabId===t))){const n=this.connectionState.get(t);if(n)return this.mrsHubRef.current.showMrsDbObjectDialog(n.backend,e)}}return!1})),pe(this,"showMrsServiceDialog",(async e=>{if(this.mrsHubRef.current){const{selectedPage:t,editorTabs:n}=this.state;if(n.find((e=>e.tabId===t))){const n=this.connectionState.get(t);if(n)return this.mrsHubRef.current.showMrsServiceDialog(n.backend,e)}}return!1})),pe(this,"showMrsSchemaDialog",(async e=>{if(this.mrsHubRef.current){const{selectedPage:t,editorTabs:n}=this.state;if(n.find((e=>e.tabId===t))){const n=this.connectionState.get(t);if(n)return this.mrsHubRef.current.showMrsSchemaDialog(n.backend,e.schemaName,e.schema)}}return!1})),pe(this,"showMrsContentSetDialog",(async e=>{if(this.mrsHubRef.current){const{selectedPage:t,editorTabs:n}=this.state;if(n.find((e=>e.tabId===t))){const n=this.connectionState.get(t);if(n)return this.mrsHubRef.current.showMrsContentSetDialog(n.backend,e.directory,e.contentSet)}}return!1})),pe(this,"showMrsAuthAppDialog",(async e=>{if(this.mrsHubRef.current){const{selectedPage:t,editorTabs:n}=this.state;if(n.find((e=>e.tabId===t))){const n=this.connectionState.get(t);if(n)return this.mrsHubRef.current.showMrsAuthAppDialog(n.backend,e.authApp,e.service)}}return!1})),pe(this,"showMrsUserDialog",(async e=>{if(this.mrsHubRef.current){const{selectedPage:t,editorTabs:n}=this.state;if(n.find((e=>e.tabId===t))){const n=this.connectionState.get(t);if(n)return this.mrsHubRef.current.showMrsUserDialog(n.backend,e.authApp,e.user)}}return!1})),pe(this,"showMrsSdkExportDialog",(async e=>{if(this.mrsHubRef.current){const{selectedPage:t,editorTabs:n}=this.state;if(n.find((e=>e.tabId===t))){const n=this.connectionState.get(t);if(n)return this.mrsHubRef.current.showMrsSdkExportDialog(n.backend,e.serviceId,e.connectionId,e.connectionDetails,e.directory)}}return!1})),pe(this,"addConnectionTab",((e,t,n,i)=>new Promise(((o,s)=>{const{editorTabs:r}=this.state;let a,l=1;if(r.forEach((t=>{t.details.id===e.id&&(++l,a=t)})),a&&!t)this.setState({selectedPage:a.tabId},(()=>{o(!0)}));else{const t=l>1?` (${l})`:"",a=an();if(this.connectionState.get(a))r.push({details:e,tabId:a,caption:e.caption+t,suppressAbout:n}),this.setState({editorTabs:r,selectedPage:a},(()=>{o(!0)}));else{this.showProgress();const r=new ShellInterfaceSqlEditor,l=e=>{e?o(!0):r.closeSession().then((()=>{o(!0)})).catch((e=>{s(e)}))};this.setProgressMessage("Starting editor session..."),r.startSession(a).then((()=>{if(this.setProgressMessage("Session created, opening new connection..."),e.dbType===Ki.Sqlite){const s=e.options;Kn.core.validatePath(s.dbFile).then((()=>{this.openNewConnection(r,a,t,e,n,i).then((e=>{l(e)}))})).catch((()=>{Kn.core.createDatabaseFile(s.dbFile).then((()=>{this.openNewConnection(r,a,t,e,n,i).then((()=>{o(!0)}))})).catch((e=>{nn.execute("showError",["DB Creation Error",String(e)])}))}))}else this.openNewConnection(r,a,t,e,n,i).then((e=>{l(e)}))})).catch((e=>{this.hideProgress(!0),nn.execute("showError",["Module Session Error",String(e)]),s()}))}}})))),pe(this,"handleCloseTab",(e=>{e.stopPropagation();const t=e.currentTarget.id;this.removeTab(t)})),pe(this,"handleSelectTabOrEntry",((e,t)=>{const n=De(t.children),i=[...e][0],o=n.find((e=>{const t=e.props;return t.page&&t.id===i}));if(o){const e=o.props;this.handleSelectTab(e.page),this.handleSelectEntry({tabId:e.page,itemId:e.id,type:e.type})}else this.handleSelectTab(i)})),pe(this,"addNewScript",(e=>{var t;if(e.stopPropagation(),e.target instanceof HTMLElement){const n=e.target.getBoundingClientRect();null==(t=this.actionMenuRef.current)||t.open(n,!1)}})),pe(this,"addNewConsole",(e=>{e.stopPropagation(),nn.executeRemote("newSession",{sessionId:-1})})),pe(this,"handleNewScriptClick",((e,t)=>{const{selectedPage:n,editorTabs:i}=this.state,o=i.find((e=>e.tabId===n));if(o)switch(t.id){case"addEditor":this.handleAddNotebook(n);break;case"addSQLScript":nn.executeRemote("createNewEditor",{page:String(o.details.id),language:o.details.dbType===Ki.MySQL?"mysql":"sql"});break;case"addTSScript":nn.executeRemote("createNewEditor",{page:String(o.details.id),language:"typescript"});break;case"addJSScript":nn.executeRemote("createNewEditor",{page:String(o.details.id),language:"javascript"})}return!0})),pe(this,"editorSaved",(e=>{const{dirtyEditors:t}=this.state;return t.has(e.id)?(e.saved&&(t.delete(e.id),this.setState({dirtyEditors:t})),Promise.resolve(!0)):Promise.resolve(!1)})),pe(this,"handleCloseButtonClick",(()=>{const{selectedPage:e}=this.state;"connections"===e&&0===this.connectionState.size&&nn.executeRemote("closeInstance",void 0);const t=this.connectionState.get(e);t&&this.editorClose({connectionId:t.connectionId,editorId:t.activeEntry})})),pe(this,"editorClose",(e=>{var t;const{editorTabs:n}=this.state,i=null==(t=n.find((t=>t.details.id===e.connectionId)))?void 0:t.tabId;if(!i)return Promise.resolve(!1);const o=this.connectionState.get(i);if(o){const t=o.editors.findIndex((t=>t.id===e.editorId));if(t>-1){const e=o.editors[t];return this.saveEditorIfNeeded(e),t>0?o.activeEntry=o.editors[t-1].id:t<o.editors.length-1&&(o.activeEntry=o.editors[t+1].id),o.editors.splice(t,1),0===o.editors.length?this.removeTab(i):(this.notifyRemoteEditorClose(o.connectionId,e.id),this.forceUpdate()),Promise.resolve(!0)}}return Promise.resolve(!1)})),pe(this,"createNewEditor",(e=>{const{selectedPage:t}=this.state;return"msg"===e.language&&this.handleAddNotebook(t),Promise.resolve(!0)})),pe(this,"handleSelectTab",(e=>{const{selectedPage:t}=this.state,n=this.connectionState.get(t);if(n&&n.editors.forEach((e=>{this.saveEditorIfNeeded(e)})),this.setState({selectedPage:e}),"connections"===e)nn.executeRemote("selectConnectionTab",{connectionId:-1,page:"DB Connection Overview"});else{const{editorTabs:t}=this.state,n=t.find((t=>t.tabId===e));n&&nn.executeRemote("selectConnectionTab",{connectionId:n.details.id,page:n.caption})}})),pe(this,"handleAddNotebook",(e=>{const t=this.connectionState.get(e);if(t){const n=this.createEditorModel(t.backend,"","msg",t.serverVersion,t.sqlMode,t.currentSchema),i=an(),o={id:i,caption:"DB Notebook "+ ++this.editorCounter,type:jn.Notebook,state:{model:n,viewState:null,options:Cs},currentVersion:n.getVersionId()};return t.editors.push(o),t.activeEntry=i,this.notifyRemoteEditorOpen(t.connectionId,e,t.dbType,"msg",o),this.forceUpdate(),i}})),pe(this,"handleRemoveEditor",((e,t,n=!0)=>{const i=this.connectionState.get(e);if(i){const o=i.editors.findIndex((e=>e.id===t));if(o>-1){const s=i.editors[o];if(this.saveEditorIfNeeded(s),i.activeEntry===t&&(o>0?i.activeEntry=i.editors[o-1].id:o<i.editors.length-1&&(i.activeEntry=i.editors[o+1].id)),i.editors.splice(o,1),this.notifyRemoteEditorClose(i.connectionId,s.id),0===i.editors.length){const t="notebook"===hi.get("dbEditor.defaultEditor","notebook"),n=t?"msg":"mysql",o=this.createEditorModel(i.backend,"",n,i.serverVersion,i.sqlMode,i.currentSchema),s=an(),r={id:s,caption:"DB Notebook "+ ++this.editorCounter,type:t?jn.Notebook:jn.Script,state:{model:o,viewState:null,options:Cs},currentVersion:o.getVersionId()};i.editors.push(r),i.activeEntry=s,this.notifyRemoteEditorOpen(i.connectionId,e,i.dbType,n,r)}n&&this.forceUpdate()}}})),pe(this,"handleLoadEditor",((e,t,n)=>{var i,o;const s=this.connectionState.get(e);if(s){const e=s.editors.find((e=>e.id===t));null==(o=null==(i=null==e?void 0:e.state)?void 0:i.model)||o.setValue(n)}})),pe(this,"handleEditorSelectorChange",(e=>{const{selectedPage:t}=this.state,n=[...e][0],i=this.connectionState.get(t);if(i){const e=i.editors.find((e=>e.id===n));e&&this.handleSelectEntry({tabId:t,itemId:n,type:e.type})}})),pe(this,"handleSelectEntry",(e=>{const t=this.connectionState.get(e.tabId);if(t&&t.activeEntry!==e.itemId){const n=t.editors.find((e=>e.id===t.activeEntry));n&&this.saveEditorIfNeeded(n);let i=!0;const o=t.editors.find((t=>t.id===e.itemId));let s;if(o)s=o.id;else{const n=t.scripts.find((t=>t.id===e.itemId));if(n)s=n.id,n.dbDataId?(i=!1,Kn.modules.getDataContent(n.dbDataId).then((i=>{void 0!==i&&(this.addEditorFromScript(e.tabId,t,n,i),t.activeEntry=e.itemId,this.forceUpdate())})).catch((e=>{nn.execute("showError",["Loading Error","Cannot load scripts content:",String(e)])}))):this.addEditorFromScript(e.tabId,t,n,"");else if(s=e.itemId,e.type===jn.Script){if(void 0!==e.content){const n={id:e.itemId,caption:e.caption??"Script",language:e.language??"mysql",dbDataId:-1,folderId:-1,type:jn.Script};this.addEditorFromScript(e.tabId,t,n,e.content)}}else{let n=e.caption;if(!n)switch(e.type){case jn.Status:n="Server Status";break;case jn.Connections:n="Client Connections";break;case jn.Dashboard:n="Performance Dashboard"}const i={id:e.itemId,caption:n??"Unknown",type:e.type,currentVersion:0};t.editors.push(i),this.notifyRemoteEditorOpen(t.connectionId,e.tabId,t.dbType,e.language??"mysql",i)}}i&&(t.activeEntry=e.itemId,nn.executeRemote("editorSelect",{connectionId:t.connectionId,editorId:s}),this.forceUpdate())}else t&&nn.executeRemote("editorSelect",{connectionId:t.connectionId,editorId:e.itemId})})),pe(this,"handleEditorRename",((e,t,n)=>{const i=this.connectionState.get(e);if(n&&i){let e=!1;const o=i.editors.find((e=>e.id===t));o&&(o.caption=n,e=!0);const s=i.scripts.find((e=>e.id===t));s&&(s.caption=n,e=!0),e&&((null==s?void 0:s.dbDataId)&&Kn.modules.updateData(s.dbDataId,s.caption),this.forceUpdate())}})),pe(this,"handleEditorChange",((e,t)=>{const{dirtyEditors:n}=this.state;n.has(t)||(n.add(t),this.setState({dirtyEditors:n}))})),pe(this,"handleAddScript",((e,t,n)=>{let i=t;if("sql"===i&&n===Ki.MySQL)i="mysql";const o=this.connectionState.get(e);if(o){const t=this.createEditorModel(o.backend,"",i,o.serverVersion,o.sqlMode,o.currentSchema);let n="";for(;;){const e="Script "+ ++this.editorCounter;if(-1===o.scripts.findIndex((t=>t.caption===e))){n=e;break}}const s=Kn.modules.scriptTypeFromLanguage(i);s&&Kn.modules.addData(n,"",s,"scripts","").then((s=>{const r=an(),a={id:r,caption:n,dbDataId:s,type:jn.Script,state:{model:t,viewState:null,options:Cs},currentVersion:t.getVersionId()};o.editors.push(a),o.scripts.push({id:r,type:jn.Script,caption:n,language:i,dbDataId:s,folderId:1}),o.activeEntry=r,this.notifyRemoteEditorOpen(o.connectionId,e,o.dbType,i,a),this.forceUpdate()})).catch((e=>{nn.execute("showError",["Data Module Error","Cannot add new user script:",String(e)])}))}})),pe(this,"handleExplorerResize",((e,t)=>{const n=this.connectionState.get(e);n&&(n.explorerWidth=t)})),pe(this,"handleExplorerMenuAction",((e,t,n)=>{const i=this.connectionState.get(e);if(i&&"deleteScriptMenuItem"===t)if(n){const t=n,o=i.scripts.findIndex((e=>e.id===t.id)),s=o>-1?i.scripts[o]:void 0;s&&s.dbDataId&&(this.handleRemoveEditor(e,t.id,!1),Kn.modules.deleteData(s.dbDataId,t.folderId).then((()=>{i.scripts.splice(o,1),this.forceUpdate()})).catch((e=>{nn.execute("showError",["Data Module Error","Cannot delete user script:",String(e.message)])})))}})),pe(this,"handleGraphDataChange",((e,t)=>{const n=this.connectionState.get(e);n&&(n.graphData=t),this.forceUpdate()})),pe(this,"setProgressMessage",(e=>{this.setState({progressMessage:e})})),pe(this,"showProgress",(()=>{this.pendingProgress=setTimeout((()=>{const{selectedPage:e}=this.state;this.setState({loading:!0,lastSelectedPage:e})}),500)})),pe(this,"hideProgress",(e=>{this.pendingProgress&&(clearTimeout(this.pendingProgress),this.pendingProgress=null,e&&this.setState({loading:!1}))})),pe(this,"handleSaveSchemaTree",((e,t)=>{const n=this.connectionState.get(e);n&&(n.schemaTree=t)})),pe(this,"handleSaveExplorerState",((e,t)=>{const n=this.connectionState.get(e);n&&(n.explorerState=new Map([...n.explorerState,...t])),this.forceUpdate()})),pe(this,"handleHelpCommand",((e,t)=>{switch(t){case"javascript":return'The DB Notebook\'s interactive prompt is currently running in JavaScript mode.\nExecute "\\sql" to switch to SQL mode, "\\ts" to switch to TypeScript mode.\n\nGLOBAL FUNCTIONS\n    - `print(value: any): void`\n      Send a value to the output area.\n    - `runSql(code: string, callback?: (res: IResultSetRow[]) => void), params?: unknown): void`\n      Run the given query.\n    - `function runSqlIterative(code: string, callback?: (res: IResultSetData) => void, params?: unknown): void`\n      Run the given query and process the rows iteratively.\n';case"typescript":return'The DB Notebook\'s interactive prompt is currently running in TypeScript mode.\nExecute "\\sql" to switch to SQL mode, "\\js" to switch to JavaScript mode.\n\nGLOBAL FUNCTIONS\n    - `print(value: unknown): void`\n      Send a value to the output area.\n    - `runSql(code: string, callback?: (res: IResultSetRow[]) => void), params?: unknown[]): void`\n      Run the given query.\n    - `function runSqlIterative(code: string, callback?: (res: IResultSetData) => void, params?: unknown[]): void`\n      Run the given query and process the rows iteratively.\n';case"mysql":return'The DB Notebook\'s interactive prompt is currently running in SQL mode.\nExecute "\\js" to switch to JavaScript mode, "\\ts" to switch to TypeScript mode.\n\nUse ? as placeholders, provide values in comments.\nEXAMPLES\n    SELECT * FROM user\n    WHERE name = ? /*=mike*/'}})),this.workerPool=new ar,this.state={selectedPage:"",editorTabs:[],dirtyEditors:new Set,showExplorer:!0,showTabs:!tn.embedded,connections:[],connectionsLoaded:!1,loading:!1,progressMessage:""},this.loadConnections(),Kn.modules.loadScriptsTree().then((e=>{this.scriptsTree=e})).catch((e=>{nn.execute("showError",["Loading Error","Cannot load user scripts:",String(e)])}))}static get info(){return{id:hs,caption:"DB Editor",icon:"/assets/module-sql-371330e5.svg"}}static getDerivedStateFromProps(e,t){const{selectedPage:n,loading:i}=t;let o=n;o||i||tn.embedded||(o="connections");return{selectedPage:o}}componentDidMount(){nn.register("showPage",this.showPage),nn.register("openConnectionTab",this.openConnectionTab),nn.register("sqlSetCurrentSchema",this.setCurrentSchema),nn.register("moduleToggle",this.toggleModule),nn.register("editorShowConnections",this.showConnections),nn.register("editorRunCommand",this.runCommand),nn.register("editorSaved",this.editorSaved),nn.register("editorClose",this.editorClose),nn.register("createNewEditor",this.createNewEditor),nn.register("profileLoaded",this.profileLoaded),nn.register("webSessionStarted",this.webSessionStarted),nn.register("connectionAdded",this.handleConnectionAdded),nn.register("connectionUpdated",this.handleConnectionUpdated),nn.register("connectionRemoved",this.handleConnectionRemoved),nn.register("refreshConnections",this.handleRefreshConnections),nn.register("showMrsDbObjectDialog",this.showMrsDbObjectDialog),nn.register("showMrsServiceDialog",this.showMrsServiceDialog),nn.register("showMrsSchemaDialog",this.showMrsSchemaDialog),nn.register("showMrsContentSetDialog",this.showMrsContentSetDialog),nn.register("showMrsAuthAppDialog",this.showMrsAuthAppDialog),nn.register("showMrsUserDialog",this.showMrsUserDialog),nn.register("showMrsSdkExportDialog",this.showMrsSdkExportDialog)}componentWillUnmount(){nn.unregister("showPage",this.showPage),nn.unregister("openConnectionTab",this.openConnectionTab),nn.unregister("sqlSetCurrentSchema",this.setCurrentSchema),nn.unregister("moduleToggle",this.toggleModule),nn.unregister("editorShowConnections",this.showConnections),nn.unregister("editorRunCommand",this.runCommand),nn.unregister("editorSaved",this.editorSaved),nn.unregister("editorClose",this.editorClose),nn.unregister("createNewEditor",this.createNewEditor),nn.unregister("profileLoaded",this.profileLoaded),nn.unregister("webSessionStarted",this.webSessionStarted),nn.unregister("connectionAdded",this.handleConnectionAdded),nn.unregister("connectionUpdated",this.handleConnectionUpdated),nn.unregister("connectionRemoved",this.handleConnectionRemoved),nn.unregister("refreshConnections",this.handleRefreshConnections),nn.unregister("showMrsDbObjectDialog",this.showMrsDbObjectDialog),nn.unregister("showMrsServiceDialog",this.showMrsServiceDialog),nn.unregister("showMrsSchemaDialog",this.showMrsSchemaDialog),nn.unregister("showMrsContentSetDialog",this.showMrsContentSetDialog),nn.unregister("showMrsAuthAppDialog",this.showMrsAuthAppDialog),nn.unregister("showMrsUserDialog",this.showMrsUserDialog),nn.unregister("showMrsSdkExportDialog",this.showMrsSdkExportDialog)}render(){const{innerRef:e}=this.props,{connections:t,connectionsLoaded:n,selectedPage:i,editorTabs:o,showExplorer:s,showTabs:r,loading:a,progressMessage:l}=this.state;let d=Es;const c=tn.embedded,u={navigation:[],execution:[],editor:[],auxillary:[]};if(c){const e=[Ie(Dropdown.Item,{id:"connections",caption:"DB Connection Overview",picture:Ie(xi,{src:ds})},"connections")];let t;o.forEach((n=>{const o=this.connectionState.get(n.tabId),s=n.details.dbType===Ki.MySQL?Ds:Ts;e.push(Ie(Dropdown.Item,{id:n.tabId,caption:n.caption,picture:Ie(xi,{src:s})},n.tabId)),o.editors.forEach((s=>{let r;if(s.state){const e=s.state.model.getLanguageId(),t=js.get(e);r=Ie("msg"===e?xi:Image,{src:t??Is})}else{const e=Ws.get(s.type)||Is;r=Ie(xi,{src:e})}e.push(Ie(DocumentDropdownItem,{page:n.tabId,type:s.type,id:s.id,caption:s.caption,picture:r,style:{marginLeft:16}},s.id)),i===n.tabId&&s.id===o.activeEntry&&(t=s.id,n.details.dbType===Ki.Sqlite&&(d=xs))}))})),u.navigation.push(Ie(Label,{style:{marginRight:"8px"},children:"Editor:"},"mainLabel"),Ie(Dropdown,{id:"documentSelector",selection:t??i,onSelect:this.handleSelectTabOrEntry,children:e},"selector")),"connections"===i&&u.navigation.push(Ie(Button,{id:"newConsoleMenuButton","data-tooltip":"Open New Shell Console",style:{marginLeft:"4px"},onClick:this.addNewConsole,children:Ie(xi,{src:"/assets/toolbar-new-shell-console-24f81da3.svg","data-tooltip":"inherit"},"newIcon")},"button1"),Ie(Divider,{id:"actionDivider",vertical:!0,thickness:1},"divider2")),u.auxillary.push(Ie(Button,{id:"itemCloseButton",imageOnly:!0,"data-tooltip":"Close this Editor",onClick:this.handleCloseButtonClick,children:Ie(xi,{src:wi,"data-tooltip":"inherit"})},"itemCloseButton"))}const h=[];let p=i;if(a||!n){const e=Ie(Re,{children:[Ie(ProgressIndicator,{id:"loadingProgressIndicator",backgroundOpacity:.95,linear:!1}),Ie(Label,{id:"progressMessageId",caption:l})]});h.push({icon:ds,caption:"Open Connection",id:"progress",content:e}),p="progress"}else{const e=Ie(Ns,{toolbarItems:u,connections:t,onAddConnection:this.handleAddConnection,onUpdateConnection:this.handleUpdateConnection,onDropConnection:this.handleDropConnection,onPushSavedConnection:this.handlePushConnection});h.push({icon:ds,caption:"Connection Overview",id:"connections",content:e})}o.forEach((e=>{const t=this.connectionState.get(e.tabId);0===u.navigation.length&&u.navigation.push(Ie(Label,{style:{marginRight:"8px"},children:"Editor:"},"mainLabel"),Ie(Dropdown,{id:"documentSelector",selection:t.activeEntry,onSelect:this.handleEditorSelectorChange,children:t.editors.map((e=>{let t;if(e.state){const n=e.state.model.getLanguageId(),i=js.get(n);t=Ie("msg"===n?xi:Image,{src:i??Is})}else{const n=Ws.get(e.type)||Is;t=Ie(xi,{src:n})}return Ie(Dropdown.Item,{id:e.id,caption:e.caption,picture:t},e.id)}))},"documentSelector"));const n=Ie(or,{id:e.tabId,caption:e.caption,showAbout:!e.suppressAbout,workerPool:this.workerPool,dbType:e.details.dbType,connectionId:e.details.id,toolbarItems:u,extraLibs:[{code:'/*\n * Copyright (c) 2020, 2023, Oracle and/or its affiliates.\n *\n * This program is free software; you can redistribute it and/or modify\n * it under the terms of the GNU General Public License, version 2.0,\n * as published by the Free Software Foundation.\n *\n * This program is also distributed with certain software (including\n * but not limited to OpenSSL) that is licensed under separate terms, as\n * designated in a particular file or component or in included license\n * documentation.  The authors of MySQL hereby grant you an additional\n * permission to link the program and your derivative works with the\n * separately licensed software that they have included with MySQL.\n * This program is distributed in the hope that it will be useful,  but\n * WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See\n * the GNU General Public License, version 2.0, for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software Foundation, Inc.,\n * 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA\n */\n\n/* eslint-disable max-classes-per-file */\n\ndeclare interface IRequestState {\n    type: string;\n    msg: string;\n}\n\ndeclare interface IResultSetData {\n    requestId: string;\n    requestState: IRequestState;\n\n    executionTime?: number;\n    rows?: unknown[];\n    columns?: string[];\n    totalRowCount?: number;\n}\n\ndeclare interface IDataRecord {\n    [key: string]: unknown;\n}\n\ndeclare type DataRecords = IDataRecord[];\n\n\n/**\n * Adds the value (converted to a string) to the current block output or creates new output if nothing was shown so far.\n *\n * @param value The value to print.\n */\ndeclare function print(value: unknown): void;\n\n/**\n * Executes a query and calls a callback for each answer from the server.\n *\n * @param code The query to run.\n * @param callback A function to call on results.\n * @param params Optional parameters for the query.\n */\ndeclare function runSqlIterative(code: string, callback?: (res: IResultSetData) => void, params?: unknown): void;\n\n/**\n * Executes a query and calls a callback with the full reply from the server.\n *\n * @param code The query to run.\n * @param callback A function to call on results.\n * @param params Optional parameters for the query.\n */\ndeclare function runSqlWithCallback(code: string, callback?: (res: IDataRecord[]) => void, params?: unknown): void;\n\n/**\n * Executes a query and returns the answer from the server in a promise that can be awaited.\n *\n * @param code The query to run.\n * @param params Optional parameters for the query.\n * @returns A promise\n */\ndeclare async function runSql(code: string, params?: unknown): Promise<IDataRecord[]>;\n\n\n// ---------- Graph Structures ----------\n\ndeclare interface ITooltipOptions {\n    /** Generates the tooltip for the value at the given index. Return an empty string to hide the tooltip. */\n    format: (datum: IXYDatum | IPieDatum, index?: number, data?: Array<IXYDatum | IPieDatum>) => string;\n\n    /** Pins the tooltip to this position, if given (default: tooltip moves with the mouse). */\n    position?: { left: number; top: number; };\n}\n\ndeclare interface IBaseGraphEntry {\n    /** The series type. */\n    type: string;\n\n    name?: string;\n\n    /**\n     * A unique ID to identify the specific graph.\n     * Note: this is also used as an HTML ID, so it must start with a letter to be valid!\n     */\n    id: string;\n\n    /** A local color palette for a single series. */\n    colors?: string[];\n\n    /** Specifies position and size of the single graph entry, relative to the owning viewport. */\n    transformation?: {\n        /** X position in CSS units (default 50% for pie charts, otherwise 0). */\n        x: number | string;\n\n        /** Y position in CSS units (default 50%, for pie charts, otherwise 0). */\n        y: number | string;\n\n        width: number;\n        height: number;\n    };\n\n    /** Tooltip formatting options. */\n    tooltip?: ITooltipOptions;\n\n    /** Animation options. */\n    animation?: {\n        /** Whether to animate data changes. */\n        disabled?: boolean;\n\n        /** The duration of animations in milliseconds. */\n        duration?: number;\n    };\n}\n\ndeclare interface IPieDatum {\n    /** Title for a pie piece and id for the mapping between the datum and the legend. */\n    name?: string;\n    value: number;\n}\n\ndeclare interface IPieGraphConfiguration extends IBaseGraphEntry {\n    type: "pie";\n\n    /** Inner and outer radius in CSS units. If not given the parent determines the size. */\n    radius?: [number, number];\n\n    /** The angle is specified in radians, with 0 at -y (12 o’clock) and positive angles proceeding clockwise. */\n    startAngle?: number;\n\n    /** The angle is specified in radians, with 0 at -y (12 o’clock) and positive angles proceeding clockwise. */\n    endAngle?: number;\n\n    /**\n     * If the corner radius is greater than zero, the corners of the arc are rounded using circles of the given radius.\n     * For a circular sector, the two outer corners are rounded; for an annular sector, all four corners are rounded.\n     */\n    borderRadius?: number;\n\n    borderColor?: string;\n    borderWidth?: number;\n\n    /**\n     * Specifies a padding sector between pie arcs.\n     * The recommended minimum inner radius when using padding is outerRadius * padAngle / sin(θ), where θ is\n     * the angular span of the smallest arc before padding.\n     */\n    padAngle?: number;\n\n    /**\n     * The pad radius determines the fixed linear distance separating adjacent arcs, defined as padRadius * padAngle.\n     */\n    padRadius?: number;\n\n    /** When true then value labels with lines are rendered (default: true). */\n    showValues?: boolean;\n\n    /** A CSS value that specifies an angle around which to rotate the graph. */\n    rotation?: string;\n\n    data?: IPieDatum[];\n}\n\n/** A single point in a two-dimensional graph. */\ndeclare interface IXYDatum {\n    /** The value on the x axis. */\n    xValue: number | Date;\n\n    /** The associated y value. Can be undefined to defined a gap. */\n    yValue?: number;\n\n    /** A value to assign a datum to a group of values. Use this to define XY graphs with an additional dimension. */\n    group?: string;\n}\n\ndeclare type DatumDataType = string | number | Date;\n\ndeclare type ITabularGraphRow = DatumDataType[];\ndeclare type ITabularGraphData = ITabularGraphRow[];\n\ndeclare interface IJsonGraphEntry {\n    [key: string]: DatumDataType;\n}\n\ndeclare type IJsonGraphData = IJsonGraphEntry[];\n\n/**\n * Graph data consist of one of two formats:\n *\n * Tabular data uses the first entire row and the first column (the first value in each row) as categories of the data\n * (depending on the graph layout).\n *\n * JSON data uses keys for categories, which nonetheless follow a similar pattern as tabular data.\n */\ndeclare type IGraphData = ITabularGraphData | IJsonGraphData;\n\n/**\n * Determines the look of the generated curve in a line graph.\n */\ndeclare type LineGraphCurve =\n    /** Cubic basis spline curve. */\n    "Basis"\n\n    /** Straightened cubic basis spline curve. */\n    | "Bundle"\n\n    /** Polyline curve. */\n    | "Linear"\n\n    /** A cubic spline. */\n    | "Natural"\n\n    /** Stepwise curve (midpoint). */\n    | "Step"\n\n    /** Stepwise curve (start x). */\n    | "StepBefore"\n\n    /** Stepwise curve (end x). */\n    | "StepAfter"\n    ;\n\n\ndeclare interface ILineGraphConfiguration extends IBaseGraphEntry {\n    type: "line";\n\n    /** The x axis value title for a given datum. */\n    xTitle?: (datum: IXYDatum, index: number, data: IXYDatum[]) => string;\n\n    /** The top margin, in pixels (default: 20). */\n    marginTop?: number;\n\n    /** The right margin, in pixels (default: 30). */\n    marginRight?: number;\n\n    /** The bottom margin, in pixels (default: 30). */\n    marginBottom?: number;\n\n    /** The left margin, in pixels (default: 40). */\n    marginLeft?: number;\n\n    /** Width of the line in pixels (default: 1.5). */\n    strokeWidth?: number;\n\n    /** The join type of line segments (default: "round"). */\n    strokeLinejoin?: string;\n\n    /** The line cap of line segments (defaultL "round"). */\n    strokeLinecap?: string;\n\n    /** Minimum and maximum X value. */\n    xDomain?: [number, number] | [Date, Date];\n\n    /** Number of x axis tick marks (default: width / 80) */\n    xTickCount?: number;\n\n    /** Minimum and maximum Y value. */\n    yDomain?: [number, number];\n\n    /** Number of y axis tick marks (default: height / 40) */\n    yTickCount?: number;\n\n    /** A format specifier string for the y-axis, */\n    yFormat?: string | ((value: d3.NumberValue) => string);\n\n    /** A label for the y-axis. */\n    yLabel?: string;\n\n    /** The type of curve to draw (default: Basis) */\n    curve?: LineGraphCurve;\n\n    data?: IXYDatum[];\n}\n\ndeclare interface IBarGraphConfiguration extends IBaseGraphEntry {\n    type: "bar";\n\n    /** The x axis tooltip for a given datum. */\n    xTitle?: (datum: DatumDataType, index: number, data: DatumDataType[]) => string;\n\n    /** The top margin, in pixels (default: 20). */\n    marginTop?: number;\n\n    /** The right margin, in pixels (default: 0). */\n    marginRight?: number;\n\n    /** The bottom margin, in pixels (default: 30). */\n    marginBottom?: number;\n\n    /** The left margin, in pixels (default: 0). */\n    marginLeft?: number;\n\n    /** Amount of x-space between bars (default: 0.1). */\n    xPadding?: number;\n\n    /** Minimum and maximum X value. */\n    xDomain?: [DatumDataType, DatumDataType];\n\n    /** Minimum and maximum Y value. */\n    yDomain?: [DatumDataType, DatumDataType];\n\n    /** A format specifier string for the y-axis, */\n    yFormat?: string;\n\n    /** A label for the y-axis. */\n    yLabel?: string;\n\n    data?: IGraphData;\n}\n\n/** Description of an entry in the graph. */\ndeclare type IGraphConfiguration = IPieGraphConfiguration | ILineGraphConfiguration | IBarGraphConfiguration;\n\n/** Alignment of content within its parent container. */\ndeclare type GraphAlignment = "Start" | "Middle" | "End";\n\n/** Description of a caption in a graph (titles, legend labels, data labels etc.). */\ndeclare interface IGraphLabel {\n    text: string;\n    horizontalAlignment?: GraphAlignment;\n    verticalAlignment?: GraphAlignment;\n}\n\n/** The top level interface for a graph host, which can contain multiple graphs. */\ndeclare interface IGraphOptions {\n    /** The graph\'s main title. */\n    title?: IGraphLabel;\n\n    /** The list of entries in the graph. */\n    series?: IGraphConfiguration[];\n\n    /** The global color palette. */\n    colors?: string[];\n\n    viewport?: { left: number; top: number; width: number; height: number; };\n}\n\n/** The entry point for general graph rendering. */\ndeclare class Graph {\n    public static render(options: IGraphOptions): void;\n}\n\ndeclare enum PieGraphLayout {\n    Donut,\n    ThickDonut,\n    ThinDonut,\n    Pie,\n}\n\n/** A simplified graph class specifically for Pie graphs. */\ndeclare class PieGraph {\n    public static render(data: IDataRecord[], layout?: PieGraphLayout, keys?: { name: string; value: string; }): void;\n}\n\n/** Define the global object that is persisted between code blocks. */\ninterface IDictionary { [key: string]: unknown; }\n\ndeclare let $: IDictionary;\n',path:"runtime"}],savedState:t,showExplorer:r&&s,onHelpCommand:this.handleHelpCommand,onAddEditor:this.handleAddNotebook,onRemoveEditor:this.handleRemoveEditor,onLoadScript:this.handleLoadEditor,onSelectItem:this.handleSelectEntry,onEditorRename:this.handleEditorRename,onEditorChange:this.handleEditorChange,onAddScript:this.handleAddScript,onSaveSchemaTree:this.handleSaveSchemaTree,onSaveExplorerState:this.handleSaveExplorerState,onExplorerResize:this.handleExplorerResize,onExplorerMenuAction:this.handleExplorerMenuAction,onGraphDataChange:this.handleGraphDataChange});h.push({icon:"/assets/scripting-9fea3871.svg",caption:e.caption,id:e.tabId,content:n,auxillary:Ie(Button,{id:e.tabId,className:"closeButton",round:!0,onClick:this.handleCloseTab,children:Ie(xi,{src:wi})})})}));return Ie(Re,{children:[Ie(Tabview,{innerRef:e,className:"dbModuleTabview moduleHost",tabPosition:Ao.Top,selectedId:p,stretchTabs:!1,showTabs:r,canReorderTabs:!0,pages:h,onSelectTab:this.handleSelectTab}),c&&Ie(Po,{id:"editorToolbarActionMenu",ref:this.actionMenuRef,placement:Zn.BottomLeft,onItemClick:this.handleNewScriptClick,children:[Ie(MenuItem,{id:"addEditor",caption:"New DB Notebook",icon:Ko},"item1"),Ie(MenuItem,{id:"addSQLScript",caption:"New SQL Script",icon:d},"item2"),Ie(MenuItem,{id:"addTSScript",caption:"New TS Script",icon:Ms},"item3"),Ie(MenuItem,{id:"addJSScript",caption:"New JS Script",icon:Rs},"item4")]},"actionMenu"),Ie(fr,{ref:this.mrsHubRef})]})}async loadConnections(){await Kn.dbConnections.listDbConnections(Qn.currentProfileId,"").then((e=>{this.setState({connections:e,connectionsLoaded:!0})})).catch((e=>{nn.execute("showError",["Loading Error","Cannot load DB connections:",String(e)])}))}async openNewConnection(e,t,n,i,o,s){const{editorTabs:r}=this.state;try{const a=an();let l;if(await e.openConnection(i.id,a,((t,n)=>{if(!bs.handleShellPrompt(t.result,n,e,"Provide Password")){const e=t;this.setProgressMessage(e.requestState.msg),l=t.result}})),!l)return!1;this.setProgressMessage("Connection opened, creating the editor...");let d="";l.currentSchema?d=l.currentSchema:i.dbType===Ki.MySQL&&(d=i.options.schema??"");const c=l.info,u=c.sqlMode??hi.get("editor.sqlMode",""),h=c.version?ws(c.version):hi.get("editor.dbVersion",80024),p=c.edition??"",m=c.heatWaveAvailable??!1,g=an(),f="notebook"===hi.get("dbEditor.defaultEditor","notebook");let b;b=void 0===s||"default"===s?f?jn.Notebook:jn.Script:"notebook"===s?jn.Notebook:jn.Script;const v=b===jn.Notebook?"msg":"mysql",S=[];let C;if("none"!==s){const t=this.createEditorModel(e,"",v,h,u,d);C={id:g,caption:b===jn.Script?"Script":"DB Notebook",type:b,state:{model:t,viewState:null,options:Cs},currentVersion:t.getVersionId()},S.push(C)}const w={connectionId:i.id,activeEntry:g,currentSchema:d,dbType:i.dbType,schemaTree:[],explorerState:new Map,editors:S,scripts:this.scriptsTree,backend:e,serverVersion:h,serverEdition:p,sqlMode:u,heatWaveEnabled:m,explorerWidth:-1,graphData:{timestamp:0,activeColorScheme:"classic",displayInterval:50,currentValues:new Map,computedValues:{},series:new Map}};this.connectionState.set(t,w),r.push({details:i,tabId:t,caption:i.caption+n,suppressAbout:o}),C&&this.notifyRemoteEditorOpen(i.id,t,i.dbType,v,C),this.hideProgress(!1),await this.setStatePromise({editorTabs:r,selectedPage:t,loading:!1})}catch(a){nn.execute("showError",["Connection Error",String(a)]);const{lastSelectedPage:e}=this.state;await this.setStatePromise({selectedPage:e??"connections"}),this.hideProgress(!0)}return!0}async reOpenConnection(e,t){try{await e.openConnection(t.id,void 0,((t,n)=>{bs.handleShellPrompt(t.result,n,e)||this.setProgressMessage("Loading ...")})),this.setProgressMessage("Connection opened")}catch(n){nn.execute("showError",["Connection Error",String(n)]);const{lastSelectedPage:e}=this.state;throw this.setState({selectedPage:e??"connections"}),this.hideProgress(!0),n}}async removeTab(e){const{selectedPage:t,editorTabs:n}=this.state;await Oi.removeDataByTabId(Bi.DbEditor,e);const i=n.findIndex((t=>t.tabId===e));if(i>-1){n.splice(i,1);let o=t;e===o&&(o=i>0?n[i-1].tabId:i>=n.length-1?"connections":n[i+1].tabId),this.setState({selectedPage:o,editorTabs:n});const s=this.connectionState.get(e);s&&(this.notifyRemoteEditorClose(s.connectionId),s.editors.forEach((e=>{this.saveEditorIfNeeded(e)})),this.connectionState.delete(e),await s.backend.closeSession())}return!0}async removeTabsForConnection(e){const{editorTabs:t}=this.state;for(const n of t)n.details.id===e&&await this.removeTab(n.tabId);return Promise.resolve(!0)}addEditorFromScript(e,t,n,i){const o=this.createEditorModel(t.backend,i,n.language,t.serverVersion,t.sqlMode,t.currentSchema),s={id:n.id,caption:n.caption,type:jn.Script,state:{model:o,viewState:null,options:Cs},dbDataId:n.dbDataId,currentVersion:o.getVersionId()};t.editors.push(s),this.notifyRemoteEditorOpen(t.connectionId,e,t.dbType,n.language,s)}saveEditorIfNeeded(e){if(e.dbDataId&&e.state){const t=e.state.model,n=t.getVersionId();if(n!==e.currentVersion){e.currentVersion=n;const i=t.getValue();let o=!1;if(e.dbDataId>-1&&(Kn.modules.updateData(e.dbDataId,void 0,i),o=!0),o){const{dirtyEditors:t}=this.state;t.delete(e.id)&&this.setState({dirtyEditors:t})}}}}createEditorModel(e,t,n,i,o,s){const r=Object.assign(Gt.createModel(t,n),{executionContexts:new ExecutionContexts(Bi.DbEditor,i,o,s),symbols:new DynamicSymbolTable(e,"db symbols",{allowDuplicateSymbols:!0}),editorMode:Li.Standard});return r.getEndOfLineSequence()!==Gt.EndOfLineSequence.LF?r.setEOL(Gt.EndOfLineSequence.LF):r.setValue(t),r}notifyRemoteEditorOpen(e,t,n,i,o){const{editorTabs:s}=this.state,r=s.find((e=>e.tabId===t));nn.executeRemote("editorsChanged",{opened:!0,connectionId:e,connectionCaption:(null==r?void 0:r.caption)??"Unknown",dbType:n,editorId:o.id,editorCaption:o.caption,language:i,editorType:o.type})}notifyRemoteEditorClose(e,t){nn.executeRemote("editorsChanged",{opened:!1,connectionId:e,editorId:t})}}class InnoDBClusterModule extends ModuleBase{static get info(){return{id:"gui.innodb.cluster",caption:"InnoDB",icon:"/assets/module-cluster-05650f0c.svg"}}}class ThemeColor{constructor(e){pe(this,"variableName"),this.variableName=mi.get.themeValueNameToCssVariable(e)}}var br=(e=>(e[e.TextType=0]="TextType",e[e.ButtonType=1]="ButtonType",e[e.DropdownType=2]="DropdownType",e))(br||{});class Statusbar extends ComponentBase{constructor(e){super(e),pe(this,"updateStatusbar",(e=>(this.updateStatusItems(e),Promise.resolve(!0)))),pe(this,"handleItemClick",((e,t)=>{nn.execute("statusBarButtonClick",{type:"data-command"in t?t["data-command"]:"",event:e})})),pe(this,"handleItemChange",(e=>{nn.execute("changeProfile",[...e][0])})),pe(this,"updateStatusItems",(e=>{const{itemDetails:t}=this.state;e.forEach((e=>{const n=t.get(e.id);n&&Object.assign(n,e)})),this.setState({itemDetails:t})}));const t=new Map;this.state={itemDetails:t},e.items.forEach((e=>{t.set(e.id,{id:e.id,text:e.text||"",icon:e.icon,choices:e.choices??[],visible:e.visible??!1,standout:e.standout??!1})})),this.addHandledProperties("items")}componentDidMount(){nn.register("updateStatusbar",this.updateStatusbar)}componentWillUnmount(){nn.unregister("updateStatusbar",this.updateStatusbar)}render(){const{items:e}=this.mergedProps,{itemDetails:t}=this.state,n=this.getEffectiveClassNames(["statusbar","verticalCenterContent"]),i=[],o=[];return e.forEach(((e,n)=>{var s,r;const a=t.get(e.id);if(a&&a.visible){const t=e.color instanceof ThemeColor?"var("+e.color.variableName+")":e.color;let l="statusbarItem";a.standout&&(l+=" prominent");let d=null;switch(e.type){case 2:{let t="0";const i=[];null==(s=a.choices)||s.forEach(((e,n)=>{const o=Ie(Dropdown.Item,{id:e.data.id,caption:e.label},`dropDownItem${n}`);i.push(o),""!==a.text&&a.text===String(e.data.id)&&(t=e.data.id)})),d=Ie(Dropdown,{className:l,withoutArrow:!0,selection:t,onSelect:this.handleItemChange,optional:!1,title:e.tooltip,children:i},`statusbarItem${n}`);break}default:{let i;null!=e.icon&&(i=Ie(xi,{src:e.icon})),d=Ie(Button,{className:l,caption:a.text,"data-command":e.commandId,title:e.tooltip,disabled:!e.commandId||0===e.commandId.length,imageOnly:0===(null==(r=a.text)?void 0:r.length),style:{color:t},onClick:this.handleItemClick,children:i},`statusbarItem${n}`);break}}e.rightAlign?o.push(d):i.push(d)}})),Ie(Container,{className:n,...this.unhandledProperties,children:[Ie(Container,{className:"leftItems",orientation:Di.LeftToRight,crossAlignment:ki.Stretch,children:i}),Ie(Container,{className:"rightItems",orientation:Di.RightToLeft,crossAlignment:ki.Stretch,children:o})]})}}class MessagePanel extends ComponentBase{constructor(e){super(e),fe(this,ce,ke()),fe(this,ue,void 0),pe(this,"showError",(e=>{if(ge(this,ue))throw new Error("Only one message can be shown at a time.");return this.show(!0,e),ge(this,ue)?ge(this,ue).wait():Promise.resolve(!0)})),pe(this,"showInfo",(e=>{if(ge(this,ue))throw new Error("Only one message can be shown at a time.");return this.show(!1,e),ge(this,ue)?ge(this,ue).wait():Promise.resolve(!0)})),pe(this,"show",((e,t)=>{if(!e&&tn.embedded){if(nn.executeRemote("showInfo",t))return}if(t.length>0){be(this,ue,new Semaphore);let n=e?"Error":"Information",i=t[0];t.length>1&&(n=i,i=t.slice(1).join("\n")),this.setState({isError:e,caption:n,message:i},(()=>{var e;null==(e=ge(this,ce).current)||e.open()}))}})),pe(this,"handleActionClick",(()=>{var e;null==(e=ge(this,ce).current)||e.close(!1)})),pe(this,"closePanel",(e=>{var t,n;e&&(null==(t=ge(this,ce).current)||t.close(!1)),null==(n=ge(this,ue))||n.notifyAll(!0),be(this,ue,void 0)})),this.state={caption:"",message:"",isError:!1}}componentDidMount(){nn.register("showError",this.showError),nn.register("showInfo",this.showInfo)}componentWillUnmount(){nn.unregister("showError",this.showError),nn.unregister("showInfo",this.showInfo)}render(){const{isError:e,caption:t,message:n}=this.state,i=this.getEffectiveClassNames(["errorPanel"]);return Ie(Dialog,{ref:ge(this,ce),className:i,caption:Ie(Re,{children:[Ie(xi,{src:e?Ti.Error:Ti.Info}),Ie(Label,{children:t})]}),content:Ie(Container,{orientation:Di.TopDown,children:n&&Ie(Label,{id:e?"errorMessage":"infoMessage",caption:n,style:{whiteSpace:"pre-line"}})}),actions:{end:[Ie(Button,{caption:"Close",onClick:this.handleActionClick},"close")]},onClose:this.closePanel})}}ce=new WeakMap,ue=new WeakMap;Ue(Ie(class App extends Ce{constructor(e){super(e),pe(this,"actionMenuRef",ke()),pe(this,"defaultProfile"),pe(this,"statusBarButtonClick",(e=>{var t;if("openPopupMenu"===e.type){const n=e.event.target;return null==(t=this.actionMenuRef.current)||t.open(n.getBoundingClientRect()),Promise.resolve(!0)}return Promise.resolve(!1)})),pe(this,"editorInfoUpdated",(e=>{let t="";(e.indentSize||e.tabSize)&&(t=e.insertSpaces?`Spaces: ${e.indentSize??0}`:`Tab Size: ${e.tabSize??0}`);const n=[];return""!==t&&n.push({id:"editorIndent",visible:!0,text:t}),(e.line||e.column)&&n.push({id:"editorPosition",visible:!0,text:`Ln ${e.line??1}, Col ${e.column??1}`}),e.language&&n.push({id:"editorLanguage",visible:!0,text:e.language}),e.eol&&n.push({id:"editorEOL",visible:!0,text:e.eol}),nn.execute("updateStatusbar",n)})),pe(this,"themeChanged",(e=>(nn.executeRemote("themeChanged",e),Promise.resolve(!0)))),pe(this,"toggleOptions",(()=>{const{showOptions:e}=this.state;this.setState({showOptions:!e})})),pe(this,"dialogResponse",(e=>{if(tn.embedded){const t=nn.executeRemote("dialogResponse",e);return Promise.resolve(t)}return Promise.resolve(!1)})),this.state={authenticated:!1,explorerIsVisible:!0,loginInProgress:!0,showOptions:!1,statusbarEntries:[{id:"profileTitle",type:br.TextType,text:"Profile:",visible:!1},{id:"profileChoice",type:br.ButtonType,tooltip:"Change profile",choices:[],visible:!1,commandId:"openPopupMenu"},{id:"details",type:br.TextType,rightAlign:!0,standout:!1},{id:"editorLanguage",type:br.TextType,visible:!1,rightAlign:!0},{id:"editorEOL",type:br.TextType,visible:!1,rightAlign:!0},{id:"editorIndent",type:br.TextType,visible:!1,rightAlign:!0},{id:"editorPosition",type:br.ButtonType,visible:!1,rightAlign:!0,commandId:"scripting:editor.action.gotoLine"}]},nn.register("dialogResponse",this.dialogResponse),nn.register("webSessionStarted",(e=>(Qn.sessionId=e.sessionUuid,Qn.localUserMode=e.localUserMode??!1,""===Qn.userName&&"Session recovered"!==e.requestState.msg?Qn.localUserMode&&Kn.users.authenticate("LocalAdministrator","").then((e=>{e&&nn.execute("userAuthenticated",e)})).catch((()=>{this.setState({loginInProgress:!0})})):(this.defaultProfile=e.activeProfile,this.defaultProfile&&(Qn.loadProfile(this.defaultProfile),this.enableModules(this.defaultProfile.userId))),Promise.resolve(!0)))),nn.register("userAuthenticated",(e=>(this.defaultProfile=e,this.defaultProfile&&(Qn.loadProfile(this.defaultProfile),this.enableModules(this.defaultProfile.userId)),Promise.resolve(!0)))),window.document.body.addEventListener("contextmenu",(e=>{e.preventDefault()})),window.addEventListener("beforeunload",(()=>{nn.execute("applicationWillFinish",void 0),Hn.get.disconnect(),Oi.cleanUp(),nn.unregister("statusBarButtonClick",this.statusBarButtonClick),nn.unregister("editorInfoUpdated",this.editorInfoUpdated),nn.unregister("themeChanged",this.themeChanged),nn.unregister("dialogResponse",this.dialogResponse)}))}componentDidMount(){tn.testsRunning||Hn.get.connect({url:new URL(window.location.href)});let e="14px";tn.fontSize&&(e=`${tn.fontSize}px`),window.document.documentElement.style.fontSize=e;let t=e;tn.editorFontSize&&(t=`${tn.editorFontSize}px`);const n=document.createElement("style");n.innerHTML=`.msg.codeEditor .zoneHost { font-size: ${t}; } .msg.resultHost .resultView .tabulator { font-size: ${t}; }`,document.head.appendChild(n),nn.register("statusBarButtonClick",this.statusBarButtonClick),nn.register("editorInfoUpdated",this.editorInfoUpdated),nn.register("themeChanged",this.themeChanged)}render(){const{loginInProgress:e,statusbarEntries:t}=this.state;let n;if(e){n=(tn.get("token")??"").length>0?Ie(ProgressIndicator,{backgroundOpacity:0,indicatorWidth:100,indicatorHeight:100}):Ie(LoginPage,{})}else n=Ie(ApplicationHost,{toggleOptions:this.toggleOptions});return Ie(ErrorBoundary,{children:[n,Ie(MessagePanel,{}),Ie(TooltipProvider,{showDelay:200}),!tn.embedded&&Ie(Re,{children:[Ie(Statusbar,{items:t}),Ie(ProfileSelector,{ref:this.actionMenuRef}),Ie(es,{})]})]})}enableModules(e){Kn.users.getGuiModuleList(e).then((e=>{Jn.registerModule(DBEditorModule),Jn.registerModule(ks),Jn.registerModule(InnoDBClusterModule),e.forEach((e=>{Jn.enableModule(e)})),this.setState({loginInProgress:!1})})).catch((e=>{nn.execute("showError",["Backend Error",`Cannot retrieve the module list: \n${String(e)}`])}))}},{}),document.getElementById("root"));
